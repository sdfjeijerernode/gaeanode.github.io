import{u as $f,d as fe,t as Fs,e as nT,f as Op,g as Ct,h as P,i as B3,j as Qo,k as L3,l as ve,m as Zo,n as rT,p as tt,q as D3,s as En,v as Hr,x as wa,r as O3,y as F3,z as U3,A as H3,B as z3,C as iT,D as gi,E as s0,F as Ql,G as eb,H as gw,I as G3,J as sT,K as V3,L as Pl,M as o0,N as $3,O as Ba,P as oT,S as ou,Q as tb,R as Fp,T as aT,U as qu,V as j3,W as lT,X as W3,Y as q3,Z as X3,$ as pl,a0 as Kv,a1 as K3,a2 as Jd,a3 as au,a4 as Jn,a5 as Y3,a6 as vw,a7 as Pc,a8 as Yv,a9 as Q3,aa as ef,ab as cT,ac as Yt,ad as La,ae as Xc,af as El,ag as Z3,ah as uT,ai as Mn,aj as Up,ak as cr,al as tf,am as cs,an as J3,ao as eN,ap as dT,aq as Nl,ar as os,as as a0,o as ge,c as Se,at as nn,au as qe,av as ur,aw as tN,ax as fT,a as ke,ay as mr,az as Tn,aA as Xu,aB as nN,aC as mg,w as He,aD as cn,aE as ns,aF as yi,aG as Mt,aH as Ze,aI as St,b as L,aJ as rN,aK as Zl,aL as l0,aM as c0,aN as nf,aO as iN,aP as sN,aQ as oN,aR as aN,aS as lN,aT as vr,aU as u0,aV as Aa,aW as Ia,aX as cN,aY as uN,aZ as lu,a_ as dN,a$ as hT,b0 as fN,b1 as pT,b2 as Hp,b3 as mT,b4 as nb,b5 as gT,b6 as hN,b7 as pN,b8 as mN,b9 as vT,ba as gN,bb as Qv,bc as yw,bd as zp,be as vN,bf as yN,bg as _N,bh as _w,bi as bN,bj as xN,bk as wN,bl as AN,bm as dr,bn as zr,bo as d0,bp as ja,bq as Wa,_ as ro,br as Uo,bs as rb,bt as yT,bu as Po,bv as Jl,bw as EN,bx as Zn,by as _T,bz as bT}from"./entry.ce5f59a6.js";import{_ as xT}from"./client-only.b367a456.js";const Zv=globalThis.requestIdleCallback||(n=>{const e=Date.now(),t={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{n(t)},1)}),SN=globalThis.cancelIdleCallback||(n=>{clearTimeout(n)}),TN=n=>{const e=$f();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{Zv(n)}):Zv(n)},MN=()=>null;function RN(...n){const e=typeof n[n.length-1]=="string"?n.pop():void 0;typeof n[0]!="string"&&n.unshift(e);let[t,r,i={}]=n;if(typeof t!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof r!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");i.server=i.server??!0,i.default=i.default??MN,i.lazy=i.lazy??!1,i.immediate=i.immediate??!0;const s=$f(),o=()=>s.isHydrating?s.payload.data[t]:s.static.data[t],a=()=>o()!==void 0;s._asyncData[t]||(s._asyncData[t]={data:fe(o()??i.default()),pending:fe(!a()),error:Fs(s.payload._errors,t),status:fe("idle")});const l={...s._asyncData[t]};l.refresh=l.execute=(f={})=>{if(s._asyncDataPromises[t]){if(f.dedupe===!1)return s._asyncDataPromises[t];s._asyncDataPromises[t].cancelled=!0}if((f._initial||s.isHydrating&&f._initial!==!1)&&a())return o();l.pending.value=!0,l.status.value="pending";const p=new Promise((m,g)=>{try{m(r(s))}catch(y){g(y)}}).then(m=>{if(p.cancelled)return s._asyncDataPromises[t];let g=m;i.transform&&(g=i.transform(m)),i.pick&&(g=IN(g,i.pick)),l.data.value=g,l.error.value=null,l.status.value="success"}).catch(m=>{if(p.cancelled)return s._asyncDataPromises[t];l.error.value=m,l.data.value=P(i.default()),l.status.value="error"}).finally(()=>{p.cancelled||(l.pending.value=!1,s.payload.data[t]=l.data.value,l.error.value&&(s.payload._errors[t]=B3(l.error.value)),delete s._asyncDataPromises[t])});return s._asyncDataPromises[t]=p,s._asyncDataPromises[t]};const c=()=>l.refresh({_initial:!0}),u=i.server!==!1&&s.payload.serverRendered;{const f=Qo();if(f&&!f._nuxtOnBeforeMountCbs){f._nuxtOnBeforeMountCbs=[];const m=f._nuxtOnBeforeMountCbs;f&&(nT(()=>{m.forEach(g=>{g()}),m.splice(0,m.length)}),Op(()=>m.splice(0,m.length)))}u&&s.isHydrating&&a()?(l.pending.value=!1,l.status.value=l.error.value?"error":"success"):f&&(s.payload.serverRendered&&s.isHydrating||i.lazy)&&i.immediate?f._nuxtOnBeforeMountCbs.push(c):i.immediate&&c(),i.watch&&Ct(i.watch,()=>l.refresh());const p=s.hook("app:data:refresh",m=>{if(!m||m.includes(t))return l.refresh()});f&&Op(p)}const d=Promise.resolve(s._asyncDataPromises[t]).then(()=>l);return Object.assign(d,l),d}function IN(n,e){const t={};for(const r of e)t[r]=n[r];return t}function CN(n,e,t){const[r={},i]=typeof e=="string"?[{},e]:[e,t],s=r.key||L3([i,P(r.baseURL),typeof n=="string"?n:"",P(r.params||r.query)]);if(!s||typeof s!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+s);if(!n)throw new Error("[nuxt] [useFetch] request is missing.");const o=s===i?"$f"+s:s,a=ve(()=>{let S=n;return typeof S=="function"&&(S=S()),P(S)});if(!r.baseURL&&typeof a.value=="string"&&a.value.startsWith("//"))throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:l,lazy:c,default:u,transform:d,pick:f,watch:p,immediate:m,...g}=r,y=Zo({...g,cache:typeof r.cache=="boolean"?void 0:r.cache}),h={server:l,lazy:c,default:u,transform:d,pick:f,immediate:m,watch:p===!1?[]:[y,a,...p||[]]};let w;return RN(o,()=>{var C;return(C=w==null?void 0:w.abort)==null||C.call(w),w=typeof AbortController<"u"?new AbortController:{},typeof a.value=="string"&&a.value.startsWith("/"),(r.$fetch||globalThis.$fetch)(a.value,{signal:w.signal,...y})},h)}async function wT(n,e=rT()){const{path:t,matched:r}=e.resolve(n);if(!r.length||(e._routePreloaded||(e._routePreloaded=new Set),e._routePreloaded.has(t)))return;const i=e._preloadPromises=e._preloadPromises||[];if(i.length>4)return Promise.all(i).then(()=>wT(n,e));e._routePreloaded.add(t);const s=r.map(o=>{var a;return(a=o.components)==null?void 0:a.default}).filter(o=>typeof o=="function");for(const o of s){const a=Promise.resolve(o()).catch(()=>{}).finally(()=>i.splice(i.indexOf(a)));i.push(a)}await Promise.all(i)}const PN=(...n)=>n.find(e=>e!==void 0),NN="noopener noreferrer";/*! @__NO_SIDE_EFFECTS__ */function kN(n){const e=n.componentName||"NuxtLink",t=(r,i)=>{if(!r||n.trailingSlash!=="append"&&n.trailingSlash!=="remove")return r;const s=n.trailingSlash==="append"?H3:z3;if(typeof r=="string")return s(r,!0);const o="path"in r?r.path:i(r).path;return{...r,name:void 0,path:s(o,!0)}};return tt({name:e,props:{to:{type:[String,Object],default:void 0,required:!1},href:{type:[String,Object],default:void 0,required:!1},target:{type:String,default:void 0,required:!1},rel:{type:String,default:void 0,required:!1},noRel:{type:Boolean,default:void 0,required:!1},prefetch:{type:Boolean,default:void 0,required:!1},noPrefetch:{type:Boolean,default:void 0,required:!1},activeClass:{type:String,default:void 0,required:!1},exactActiveClass:{type:String,default:void 0,required:!1},prefetchedClass:{type:String,default:void 0,required:!1},replace:{type:Boolean,default:void 0,required:!1},ariaCurrentValue:{type:String,default:void 0,required:!1},external:{type:Boolean,default:void 0,required:!1},custom:{type:Boolean,default:void 0,required:!1}},setup(r,{slots:i}){const s=rT(),o=ve(()=>{const d=r.to||r.href||"";return t(d,s.resolve)}),a=ve(()=>r.external||r.target&&r.target!=="_self"?!0:typeof o.value=="object"?!1:o.value===""||D3(o.value,{acceptRelative:!0})),l=fe(!1),c=fe(null),u=d=>{var f;c.value=r.custom?(f=d==null?void 0:d.$el)==null?void 0:f.nextElementSibling:d==null?void 0:d.$el};if(r.prefetch!==!1&&r.noPrefetch!==!0&&r.target!=="_blank"&&!LN()){const f=$f();let p,m=null;En(()=>{const g=BN();TN(()=>{p=Zv(()=>{var y;(y=c==null?void 0:c.value)!=null&&y.tagName&&(m=g.observe(c.value,async()=>{m==null||m(),m=null;const h=typeof o.value=="string"?o.value:s.resolve(o.value).fullPath;await Promise.all([f.hooks.callHook("link:prefetch",h).catch(()=>{}),!a.value&&wT(o.value,s).catch(()=>{})]),l.value=!0}))})})}),Hr(()=>{p&&SN(p),m==null||m(),m=null})}return()=>{var g,y;if(!a.value){const h={ref:u,to:o.value,activeClass:r.activeClass||n.activeClass,exactActiveClass:r.exactActiveClass||n.exactActiveClass,replace:r.replace,ariaCurrentValue:r.ariaCurrentValue,custom:r.custom};return r.custom||(l.value&&(h.class=r.prefetchedClass||n.prefetchedClass),h.rel=r.rel),wa(O3("RouterLink"),h,i.default)}const d=typeof o.value=="object"?((g=s.resolve(o.value))==null?void 0:g.href)??null:o.value||null,f=r.target||null,p=r.noRel?null:PN(r.rel,n.externalRelAttribute,d?NN:"")||null,m=()=>iT(d,{replace:r.replace});return r.custom?i.default?i.default({href:d,navigate:m,get route(){if(!d)return;const h=F3(d);return{path:h.pathname,fullPath:h.pathname,get query(){return U3(h.search)},hash:h.hash,params:{},name:void 0,matched:[],redirectedFrom:void 0,meta:{},href:d}},rel:p,target:f,isExternal:a.value,isActive:!1,isExactActive:!1}):null:wa("a",{ref:c,href:d,rel:p,target:f},(y=i.default)==null?void 0:y.call(i))}}})}const Da=kN({componentName:"NuxtLink"});function BN(){const n=$f();if(n._observer)return n._observer;let e=null;const t=new Map,r=(s,o)=>(e||(e=new IntersectionObserver(a=>{for(const l of a){const c=t.get(l.target);(l.isIntersecting||l.intersectionRatio>0)&&c&&c()}})),t.set(s,o),e.observe(s),()=>{t.delete(s),e.unobserve(s),t.size===0&&(e.disconnect(),e=null)});return n._observer={observe:r}}function LN(){const n=navigator.connection;return!!(n&&(n.saveData||/2g/.test(n.effectiveType)))}const bo=(n,e,{checkForDefaultPrevented:t=!0}={})=>i=>{const s=n==null?void 0:n(i);if(t===!1||!s)return e==null?void 0:e(i)},DN=()=>gi&&/firefox/i.test(window.navigator.userAgent);function ON(n){return n}var FN=s0(Ql,"WeakMap");const Jv=FN;var bw=Object.create,UN=function(){function n(){}return function(e){if(!eb(e))return{};if(bw)return bw(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const HN=UN;function zN(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function GN(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var VN=800,$N=16,jN=Date.now;function WN(n){var e=0,t=0;return function(){var r=jN(),i=$N-(r-t);if(t=r,i>0){if(++e>=VN)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function qN(n){return function(){return n}}var XN=gw?function(n,e){return gw(n,"toString",{configurable:!0,enumerable:!1,value:qN(e),writable:!0})}:ON;const KN=XN;var YN=WN(KN);const QN=YN;function ZN(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}function f0(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(t[a],n[a],a,t,n):void 0;l===void 0&&(l=n[a]),i?G3(t,a,l):sT(t,a,l)}return t}var xw=Math.max;function JN(n,e,t){return e=xw(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,s=xw(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(o),zN(n,this,a)}}var ek=9007199254740991;function ib(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=ek}function AT(n){return n!=null&&ib(n.length)&&!V3(n)}var tk=Object.prototype;function sb(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||tk;return n===t}function nk(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var rk="[object Arguments]";function ww(n){return Pl(n)&&o0(n)==rk}var ET=Object.prototype,ik=ET.hasOwnProperty,sk=ET.propertyIsEnumerable,ok=ww(function(){return arguments}())?ww:function(n){return Pl(n)&&ik.call(n,"callee")&&!sk.call(n,"callee")};const ob=ok;function ak(){return!1}var ST=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Aw=ST&&typeof module=="object"&&module&&!module.nodeType&&module,lk=Aw&&Aw.exports===ST,Ew=lk?Ql.Buffer:void 0,ck=Ew?Ew.isBuffer:void 0,uk=ck||ak;const Gp=uk;var dk="[object Arguments]",fk="[object Array]",hk="[object Boolean]",pk="[object Date]",mk="[object Error]",gk="[object Function]",vk="[object Map]",yk="[object Number]",_k="[object Object]",bk="[object RegExp]",xk="[object Set]",wk="[object String]",Ak="[object WeakMap]",Ek="[object ArrayBuffer]",Sk="[object DataView]",Tk="[object Float32Array]",Mk="[object Float64Array]",Rk="[object Int8Array]",Ik="[object Int16Array]",Ck="[object Int32Array]",Pk="[object Uint8Array]",Nk="[object Uint8ClampedArray]",kk="[object Uint16Array]",Bk="[object Uint32Array]",Sn={};Sn[Tk]=Sn[Mk]=Sn[Rk]=Sn[Ik]=Sn[Ck]=Sn[Pk]=Sn[Nk]=Sn[kk]=Sn[Bk]=!0;Sn[dk]=Sn[fk]=Sn[Ek]=Sn[hk]=Sn[Sk]=Sn[pk]=Sn[mk]=Sn[gk]=Sn[vk]=Sn[yk]=Sn[_k]=Sn[bk]=Sn[xk]=Sn[wk]=Sn[Ak]=!1;function Lk(n){return Pl(n)&&ib(n.length)&&!!Sn[o0(n)]}function ab(n){return function(e){return n(e)}}var TT=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ud=TT&&typeof module=="object"&&module&&!module.nodeType&&module,Dk=Ud&&Ud.exports===TT,gg=Dk&&$3.process,Ok=function(){try{var n=Ud&&Ud.require&&Ud.require("util").types;return n||gg&&gg.binding&&gg.binding("util")}catch{}}();const cu=Ok;var Sw=cu&&cu.isTypedArray,Fk=Sw?ab(Sw):Lk;const MT=Fk;var Uk=Object.prototype,Hk=Uk.hasOwnProperty;function RT(n,e){var t=Ba(n),r=!t&&ob(n),i=!t&&!r&&Gp(n),s=!t&&!r&&!i&&MT(n),o=t||r||i||s,a=o?nk(n.length,String):[],l=a.length;for(var c in n)(e||Hk.call(n,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||oT(c,l)))&&a.push(c);return a}function IT(n,e){return function(t){return n(e(t))}}var zk=IT(Object.keys,Object);const Gk=zk;var Vk=Object.prototype,$k=Vk.hasOwnProperty;function jk(n){if(!sb(n))return Gk(n);var e=[];for(var t in Object(n))$k.call(n,t)&&t!="constructor"&&e.push(t);return e}function lb(n){return AT(n)?RT(n):jk(n)}function Wk(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var qk=Object.prototype,Xk=qk.hasOwnProperty;function Kk(n){if(!eb(n))return Wk(n);var e=sb(n),t=[];for(var r in n)r=="constructor"&&(e||!Xk.call(n,r))||t.push(r);return t}function cb(n){return AT(n)?RT(n,!0):Kk(n)}function ub(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var Tw=ou?ou.isConcatSpreadable:void 0;function Yk(n){return Ba(n)||ob(n)||!!(Tw&&n&&n[Tw])}function CT(n,e,t,r,i){var s=-1,o=n.length;for(t||(t=Yk),i||(i=[]);++s<o;){var a=n[s];e>0&&t(a)?e>1?CT(a,e-1,t,r,i):ub(i,a):r||(i[i.length]=a)}return i}function Qk(n){var e=n==null?0:n.length;return e?CT(n,1):[]}function Zk(n){return QN(JN(n,void 0,Qk),n+"")}var Jk=IT(Object.getPrototypeOf,Object);const PT=Jk;function ey(){if(!arguments.length)return[];var n=arguments[0];return Ba(n)?n:[n]}function eB(){this.__data__=new tb,this.size=0}function tB(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function nB(n){return this.__data__.get(n)}function rB(n){return this.__data__.has(n)}var iB=200;function sB(n,e){var t=this.__data__;if(t instanceof tb){var r=t.__data__;if(!Fp||r.length<iB-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new aT(r)}return t.set(n,e),this.size=t.size,this}function Do(n){var e=this.__data__=new tb(n);this.size=e.size}Do.prototype.clear=eB;Do.prototype.delete=tB;Do.prototype.get=nB;Do.prototype.has=rB;Do.prototype.set=sB;function oB(n,e){return n&&f0(e,lb(e),n)}function aB(n,e){return n&&f0(e,cb(e),n)}var NT=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Mw=NT&&typeof module=="object"&&module&&!module.nodeType&&module,lB=Mw&&Mw.exports===NT,Rw=lB?Ql.Buffer:void 0,Iw=Rw?Rw.allocUnsafe:void 0;function cB(n,e){if(e)return n.slice();var t=n.length,r=Iw?Iw(t):new n.constructor(t);return n.copy(r),r}function uB(n,e){for(var t=-1,r=n==null?0:n.length,i=0,s=[];++t<r;){var o=n[t];e(o,t,n)&&(s[i++]=o)}return s}function kT(){return[]}var dB=Object.prototype,fB=dB.propertyIsEnumerable,Cw=Object.getOwnPropertySymbols,hB=Cw?function(n){return n==null?[]:(n=Object(n),uB(Cw(n),function(e){return fB.call(n,e)}))}:kT;const db=hB;function pB(n,e){return f0(n,db(n),e)}var mB=Object.getOwnPropertySymbols,gB=mB?function(n){for(var e=[];n;)ub(e,db(n)),n=PT(n);return e}:kT;const BT=gB;function vB(n,e){return f0(n,BT(n),e)}function LT(n,e,t){var r=e(n);return Ba(n)?r:ub(r,t(n))}function ty(n){return LT(n,lb,db)}function yB(n){return LT(n,cb,BT)}var _B=s0(Ql,"DataView");const ny=_B;var bB=s0(Ql,"Promise");const ry=bB;var xB=s0(Ql,"Set");const iy=xB;var Pw="[object Map]",wB="[object Object]",Nw="[object Promise]",kw="[object Set]",Bw="[object WeakMap]",Lw="[object DataView]",AB=qu(ny),EB=qu(Fp),SB=qu(ry),TB=qu(iy),MB=qu(Jv),cl=o0;(ny&&cl(new ny(new ArrayBuffer(1)))!=Lw||Fp&&cl(new Fp)!=Pw||ry&&cl(ry.resolve())!=Nw||iy&&cl(new iy)!=kw||Jv&&cl(new Jv)!=Bw)&&(cl=function(n){var e=o0(n),t=e==wB?n.constructor:void 0,r=t?qu(t):"";if(r)switch(r){case AB:return Lw;case EB:return Pw;case SB:return Nw;case TB:return kw;case MB:return Bw}return e});const rf=cl;var RB=Object.prototype,IB=RB.hasOwnProperty;function CB(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&IB.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var PB=Ql.Uint8Array;const Vp=PB;function fb(n){var e=new n.constructor(n.byteLength);return new Vp(e).set(new Vp(n)),e}function NB(n,e){var t=e?fb(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var kB=/\w*$/;function BB(n){var e=new n.constructor(n.source,kB.exec(n));return e.lastIndex=n.lastIndex,e}var Dw=ou?ou.prototype:void 0,Ow=Dw?Dw.valueOf:void 0;function LB(n){return Ow?Object(Ow.call(n)):{}}function DB(n,e){var t=e?fb(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var OB="[object Boolean]",FB="[object Date]",UB="[object Map]",HB="[object Number]",zB="[object RegExp]",GB="[object Set]",VB="[object String]",$B="[object Symbol]",jB="[object ArrayBuffer]",WB="[object DataView]",qB="[object Float32Array]",XB="[object Float64Array]",KB="[object Int8Array]",YB="[object Int16Array]",QB="[object Int32Array]",ZB="[object Uint8Array]",JB="[object Uint8ClampedArray]",eL="[object Uint16Array]",tL="[object Uint32Array]";function nL(n,e,t){var r=n.constructor;switch(e){case jB:return fb(n);case OB:case FB:return new r(+n);case WB:return NB(n,t);case qB:case XB:case KB:case YB:case QB:case ZB:case JB:case eL:case tL:return DB(n,t);case UB:return new r;case HB:case VB:return new r(n);case zB:return BB(n);case GB:return new r;case $B:return LB(n)}}function rL(n){return typeof n.constructor=="function"&&!sb(n)?HN(PT(n)):{}}var iL="[object Map]";function sL(n){return Pl(n)&&rf(n)==iL}var Fw=cu&&cu.isMap,oL=Fw?ab(Fw):sL;const aL=oL;var lL="[object Set]";function cL(n){return Pl(n)&&rf(n)==lL}var Uw=cu&&cu.isSet,uL=Uw?ab(Uw):cL;const dL=uL;var fL=1,hL=2,pL=4,DT="[object Arguments]",mL="[object Array]",gL="[object Boolean]",vL="[object Date]",yL="[object Error]",OT="[object Function]",_L="[object GeneratorFunction]",bL="[object Map]",xL="[object Number]",FT="[object Object]",wL="[object RegExp]",AL="[object Set]",EL="[object String]",SL="[object Symbol]",TL="[object WeakMap]",ML="[object ArrayBuffer]",RL="[object DataView]",IL="[object Float32Array]",CL="[object Float64Array]",PL="[object Int8Array]",NL="[object Int16Array]",kL="[object Int32Array]",BL="[object Uint8Array]",LL="[object Uint8ClampedArray]",DL="[object Uint16Array]",OL="[object Uint32Array]",xn={};xn[DT]=xn[mL]=xn[ML]=xn[RL]=xn[gL]=xn[vL]=xn[IL]=xn[CL]=xn[PL]=xn[NL]=xn[kL]=xn[bL]=xn[xL]=xn[FT]=xn[wL]=xn[AL]=xn[EL]=xn[SL]=xn[BL]=xn[LL]=xn[DL]=xn[OL]=!0;xn[yL]=xn[OT]=xn[TL]=!1;function lp(n,e,t,r,i,s){var o,a=e&fL,l=e&hL,c=e&pL;if(t&&(o=i?t(n,r,i,s):t(n)),o!==void 0)return o;if(!eb(n))return n;var u=Ba(n);if(u){if(o=CB(n),!a)return GN(n,o)}else{var d=rf(n),f=d==OT||d==_L;if(Gp(n))return cB(n,a);if(d==FT||d==DT||f&&!i){if(o=l||f?{}:rL(n),!a)return l?vB(n,aB(o,n)):pB(n,oB(o,n))}else{if(!xn[d])return i?n:{};o=nL(n,d,a)}}s||(s=new Do);var p=s.get(n);if(p)return p;s.set(n,o),dL(n)?n.forEach(function(y){o.add(lp(y,e,t,y,n,s))}):aL(n)&&n.forEach(function(y,h){o.set(h,lp(y,e,t,h,n,s))});var m=c?l?yB:ty:l?cb:lb,g=u?void 0:m(n);return ZN(g||n,function(y,h){g&&(h=y,y=n[h]),sT(o,h,lp(y,e,t,h,n,s))}),o}var FL=4;function Hw(n){return lp(n,FL)}var UL="__lodash_hash_undefined__";function HL(n){return this.__data__.set(n,UL),this}function zL(n){return this.__data__.has(n)}function $p(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new aT;++e<t;)this.add(n[e])}$p.prototype.add=$p.prototype.push=HL;$p.prototype.has=zL;function GL(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function VL(n,e){return n.has(e)}var $L=1,jL=2;function UT(n,e,t,r,i,s){var o=t&$L,a=n.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(n),u=s.get(e);if(c&&u)return c==e&&u==n;var d=-1,f=!0,p=t&jL?new $p:void 0;for(s.set(n,e),s.set(e,n);++d<a;){var m=n[d],g=e[d];if(r)var y=o?r(g,m,d,e,n,s):r(m,g,d,n,e,s);if(y!==void 0){if(y)continue;f=!1;break}if(p){if(!GL(e,function(h,w){if(!VL(p,w)&&(m===h||i(m,h,t,r,s)))return p.push(w)})){f=!1;break}}else if(!(m===g||i(m,g,t,r,s))){f=!1;break}}return s.delete(n),s.delete(e),f}function WL(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}function qL(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var XL=1,KL=2,YL="[object Boolean]",QL="[object Date]",ZL="[object Error]",JL="[object Map]",eD="[object Number]",tD="[object RegExp]",nD="[object Set]",rD="[object String]",iD="[object Symbol]",sD="[object ArrayBuffer]",oD="[object DataView]",zw=ou?ou.prototype:void 0,vg=zw?zw.valueOf:void 0;function aD(n,e,t,r,i,s,o){switch(t){case oD:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case sD:return!(n.byteLength!=e.byteLength||!s(new Vp(n),new Vp(e)));case YL:case QL:case eD:return j3(+n,+e);case ZL:return n.name==e.name&&n.message==e.message;case tD:case rD:return n==e+"";case JL:var a=WL;case nD:var l=r&XL;if(a||(a=qL),n.size!=e.size&&!l)return!1;var c=o.get(n);if(c)return c==e;r|=KL,o.set(n,e);var u=UT(a(n),a(e),r,i,s,o);return o.delete(n),u;case iD:if(vg)return vg.call(n)==vg.call(e)}return!1}var lD=1,cD=Object.prototype,uD=cD.hasOwnProperty;function dD(n,e,t,r,i,s){var o=t&lD,a=ty(n),l=a.length,c=ty(e),u=c.length;if(l!=u&&!o)return!1;for(var d=l;d--;){var f=a[d];if(!(o?f in e:uD.call(e,f)))return!1}var p=s.get(n),m=s.get(e);if(p&&m)return p==e&&m==n;var g=!0;s.set(n,e),s.set(e,n);for(var y=o;++d<l;){f=a[d];var h=n[f],w=e[f];if(r)var M=o?r(w,h,f,e,n,s):r(h,w,f,n,e,s);if(!(M===void 0?h===w||i(h,w,t,r,s):M)){g=!1;break}y||(y=f=="constructor")}if(g&&!y){var S=n.constructor,C=e.constructor;S!=C&&"constructor"in n&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof C=="function"&&C instanceof C)&&(g=!1)}return s.delete(n),s.delete(e),g}var fD=1,Gw="[object Arguments]",Vw="[object Array]",mh="[object Object]",hD=Object.prototype,$w=hD.hasOwnProperty;function pD(n,e,t,r,i,s){var o=Ba(n),a=Ba(e),l=o?Vw:rf(n),c=a?Vw:rf(e);l=l==Gw?mh:l,c=c==Gw?mh:c;var u=l==mh,d=c==mh,f=l==c;if(f&&Gp(n)){if(!Gp(e))return!1;o=!0,u=!1}if(f&&!u)return s||(s=new Do),o||MT(n)?UT(n,e,t,r,i,s):aD(n,e,l,t,r,i,s);if(!(t&fD)){var p=u&&$w.call(n,"__wrapped__"),m=d&&$w.call(e,"__wrapped__");if(p||m){var g=p?n.value():n,y=m?e.value():e;return s||(s=new Do),i(g,y,t,r,s)}}return f?(s||(s=new Do),dD(n,e,t,r,i,s)):!1}function HT(n,e,t,r,i){return n===e?!0:n==null||e==null||!Pl(n)&&!Pl(e)?n!==n&&e!==e:pD(n,e,t,r,HT,i)}function mD(n,e){return n!=null&&e in Object(n)}function gD(n,e,t){e=lT(e,n);for(var r=-1,i=e.length,s=!1;++r<i;){var o=W3(e[r]);if(!(s=n!=null&&t(n,o)))break;n=n[o]}return s||++r!=i?s:(i=n==null?0:n.length,!!i&&ib(i)&&oT(o,i)&&(Ba(n)||ob(n)))}function vD(n,e){return n!=null&&gD(n,e,mD)}function yD(n,e){return HT(n,e)}function h0(n){return n==null}function _D(n){return n===void 0}function bD(n,e,t){for(var r=-1,i=e.length,s={};++r<i;){var o=e[r],a=q3(n,o);t(a,o)&&X3(s,lT(o,n),a)}return s}function xD(n,e){return bD(n,e,function(t,r){return vD(n,r)})}var wD=Zk(function(n,e){return n==null?{}:xD(n,e)});const AD=wD;class ED extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function zT(n,e){throw new ED(`[${n}] ${e}`)}let gh;const SD=n=>{var e;if(!gi)return 0;if(gh!==void 0)return gh;const t=document.createElement("div");t.className=`${n}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const r=t.offsetWidth;t.style.overflow="scroll";const i=document.createElement("div");i.style.width="100%",t.appendChild(i);const s=i.offsetWidth;return(e=t.parentNode)==null||e.removeChild(t),gh=r-s,gh},TD=(...n)=>e=>{n.forEach(t=>{pl(t)?t(e):t.value=e})},Ho="update:modelValue";var cp=(n=>(n[n.TEXT=1]="TEXT",n[n.CLASS=2]="CLASS",n[n.STYLE=4]="STYLE",n[n.PROPS=8]="PROPS",n[n.FULL_PROPS=16]="FULL_PROPS",n[n.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",n[n.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",n[n.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",n[n.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",n[n.NEED_PATCH=512]="NEED_PATCH",n[n.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",n[n.HOISTED=-1]="HOISTED",n[n.BAIL=-2]="BAIL",n))(cp||{});const MD=n=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(n),RD=["class","style"],ID=/^on[A-Z]/,CD=(n={})=>{const{excludeListeners:e=!1,excludeKeys:t}=n,r=ve(()=>((t==null?void 0:t.value)||[]).concat(RD)),i=Qo();return i?ve(()=>{var s;return Kv(Object.entries((s=i.proxy)==null?void 0:s.$attrs).filter(([o])=>!r.value.includes(o)&&!(e&&ID.test(o))))}):ve(()=>({}))},sy=({from:n,replacement:e,scope:t,version:r,ref:i,type:s="API"},o)=>{Ct(()=>P(o),a=>{},{immediate:!0})},PD=(n,e,t)=>{let r={offsetX:0,offsetY:0};const i=a=>{const l=a.clientX,c=a.clientY,{offsetX:u,offsetY:d}=r,f=n.value.getBoundingClientRect(),p=f.left,m=f.top,g=f.width,y=f.height,h=document.documentElement.clientWidth,w=document.documentElement.clientHeight,M=-p+u,S=-m+d,C=h-p-g+u,k=w-m-y+d,F=B=>{const I=Math.min(Math.max(u+B.clientX-l,M),C),U=Math.min(Math.max(d+B.clientY-c,S),k);r={offsetX:I,offsetY:U},n.value.style.transform=`translate(${Jd(I)}, ${Jd(U)})`},N=()=>{document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",N)};document.addEventListener("mousemove",F),document.addEventListener("mouseup",N)},s=()=>{e.value&&n.value&&e.value.addEventListener("mousedown",i)},o=()=>{e.value&&n.value&&e.value.removeEventListener("mousedown",i)};En(()=>{K3(()=>{t.value?s():o()})}),Hr(()=>{o()})},ND=(n,e={})=>{au(n)||zT("[useLockscreen]","You need to pass a ref param to this function");const t=e.ns||Jn("popup"),r=Y3(()=>t.bm("parent","hidden"));if(!gi||vw(document.body,r.value))return;let i=0,s=!1,o="0";const a=()=>{setTimeout(()=>{ef(document==null?void 0:document.body,r.value),s&&document&&(document.body.style.width=o)},200)};Ct(n,l=>{if(!l){a();return}s=!vw(document.body,r.value),s&&(o=document.body.style.width),i=SD(t.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,u=Pc(document.body,"overflowY");i>0&&(c||u==="scroll")&&s&&(document.body.style.width=`calc(100% - ${i}px)`),Yv(document.body,r.value)}),Q3(()=>a())},kD=cT({type:Yt(Boolean),default:null}),BD=cT({type:Yt(Function)}),GT=n=>{const e=`update:${n}`,t=`onUpdate:${n}`,r=[e],i={[n]:kD,[t]:BD};return{useModelToggle:({indicator:o,toggleReason:a,shouldHideWhenRouteChanges:l,shouldProceed:c,onShow:u,onHide:d})=>{const f=Qo(),{emit:p}=f,m=f.props,g=ve(()=>pl(m[t])),y=ve(()=>m[n]===null),h=F=>{o.value!==!0&&(o.value=!0,a&&(a.value=F),pl(u)&&u(F))},w=F=>{o.value!==!1&&(o.value=!1,a&&(a.value=F),pl(d)&&d(F))},M=F=>{if(m.disabled===!0||pl(c)&&!c())return;const N=g.value&&gi;N&&p(e,!0),(y.value||!N)&&h(F)},S=F=>{if(m.disabled===!0||!gi)return;const N=g.value&&gi;N&&p(e,!1),(y.value||!N)&&w(F)},C=F=>{La(F)&&(m.disabled&&F?g.value&&p(e,!1):o.value!==F&&(F?h():w()))},k=()=>{o.value?S():M()};return Ct(()=>m[n],C),l&&f.appContext.config.globalProperties.$route!==void 0&&Ct(()=>({...f.proxy.$route}),()=>{l.value&&o.value&&S()}),En(()=>{C(m[n])}),{hide:S,show:M,toggle:k,hasUpdateHandler:g}},useModelToggleProps:i,useModelToggleEmits:r}};GT("modelValue");const VT=n=>{const e=Qo();return ve(()=>{var t,r;return(r=(t=e==null?void 0:e.proxy)==null?void 0:t.$props)==null?void 0:r[n]})};var Zr="top",Di="bottom",Oi="right",Jr="left",hb="auto",jf=[Zr,Di,Oi,Jr],uu="start",sf="end",LD="clippingParents",$T="viewport",vd="popper",DD="reference",jw=jf.reduce(function(n,e){return n.concat([e+"-"+uu,e+"-"+sf])},[]),pb=[].concat(jf,[hb]).reduce(function(n,e){return n.concat([e,e+"-"+uu,e+"-"+sf])},[]),OD="beforeRead",FD="read",UD="afterRead",HD="beforeMain",zD="main",GD="afterMain",VD="beforeWrite",$D="write",jD="afterWrite",WD=[OD,FD,UD,HD,zD,GD,VD,$D,jD];function Ks(n){return n?(n.nodeName||"").toLowerCase():null}function ps(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function du(n){var e=ps(n).Element;return n instanceof e||n instanceof Element}function Li(n){var e=ps(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function mb(n){if(typeof ShadowRoot>"u")return!1;var e=ps(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function qD(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},s=e.elements[t];!Li(s)||!Ks(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function XD(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!Li(i)||!Ks(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}var jT={name:"applyStyles",enabled:!0,phase:"write",fn:qD,effect:XD,requires:["computeStyles"]};function Vs(n){return n.split("-")[0]}var Sl=Math.max,jp=Math.min,fu=Math.round;function hu(n,e){e===void 0&&(e=!1);var t=n.getBoundingClientRect(),r=1,i=1;if(Li(n)&&e){var s=n.offsetHeight,o=n.offsetWidth;o>0&&(r=fu(t.width)/o||1),s>0&&(i=fu(t.height)/s||1)}return{width:t.width/r,height:t.height/i,top:t.top/i,right:t.right/r,bottom:t.bottom/i,left:t.left/r,x:t.left/r,y:t.top/i}}function gb(n){var e=hu(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function WT(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&mb(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function zo(n){return ps(n).getComputedStyle(n)}function KD(n){return["table","td","th"].indexOf(Ks(n))>=0}function qa(n){return((du(n)?n.ownerDocument:n.document)||window.document).documentElement}function p0(n){return Ks(n)==="html"?n:n.assignedSlot||n.parentNode||(mb(n)?n.host:null)||qa(n)}function Ww(n){return!Li(n)||zo(n).position==="fixed"?null:n.offsetParent}function YD(n){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t=navigator.userAgent.indexOf("Trident")!==-1;if(t&&Li(n)){var r=zo(n);if(r.position==="fixed")return null}var i=p0(n);for(mb(i)&&(i=i.host);Li(i)&&["html","body"].indexOf(Ks(i))<0;){var s=zo(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Wf(n){for(var e=ps(n),t=Ww(n);t&&KD(t)&&zo(t).position==="static";)t=Ww(t);return t&&(Ks(t)==="html"||Ks(t)==="body"&&zo(t).position==="static")?e:t||YD(n)||e}function vb(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function Hd(n,e,t){return Sl(n,jp(e,t))}function QD(n,e,t){var r=Hd(n,e,t);return r>t?t:r}function qT(){return{top:0,right:0,bottom:0,left:0}}function XT(n){return Object.assign({},qT(),n)}function KT(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var ZD=function(n,e){return n=typeof n=="function"?n(Object.assign({},e.rects,{placement:e.placement})):n,XT(typeof n!="number"?n:KT(n,jf))};function JD(n){var e,t=n.state,r=n.name,i=n.options,s=t.elements.arrow,o=t.modifiersData.popperOffsets,a=Vs(t.placement),l=vb(a),c=[Jr,Oi].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var d=ZD(i.padding,t),f=gb(s),p=l==="y"?Zr:Jr,m=l==="y"?Di:Oi,g=t.rects.reference[u]+t.rects.reference[l]-o[l]-t.rects.popper[u],y=o[l]-t.rects.reference[l],h=Wf(s),w=h?l==="y"?h.clientHeight||0:h.clientWidth||0:0,M=g/2-y/2,S=d[p],C=w-f[u]-d[m],k=w/2-f[u]/2+M,F=Hd(S,k,C),N=l;t.modifiersData[r]=(e={},e[N]=F,e.centerOffset=F-k,e)}}function eO(n){var e=n.state,t=n.options,r=t.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!WT(e.elements.popper,i)||(e.elements.arrow=i))}var tO={name:"arrow",enabled:!0,phase:"main",fn:JD,effect:eO,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function pu(n){return n.split("-")[1]}var nO={top:"auto",right:"auto",bottom:"auto",left:"auto"};function rO(n){var e=n.x,t=n.y,r=window,i=r.devicePixelRatio||1;return{x:fu(e*i)/i||0,y:fu(t*i)/i||0}}function qw(n){var e,t=n.popper,r=n.popperRect,i=n.placement,s=n.variation,o=n.offsets,a=n.position,l=n.gpuAcceleration,c=n.adaptive,u=n.roundOffsets,d=n.isFixed,f=o.x,p=f===void 0?0:f,m=o.y,g=m===void 0?0:m,y=typeof u=="function"?u({x:p,y:g}):{x:p,y:g};p=y.x,g=y.y;var h=o.hasOwnProperty("x"),w=o.hasOwnProperty("y"),M=Jr,S=Zr,C=window;if(c){var k=Wf(t),F="clientHeight",N="clientWidth";if(k===ps(t)&&(k=qa(t),zo(k).position!=="static"&&a==="absolute"&&(F="scrollHeight",N="scrollWidth")),k=k,i===Zr||(i===Jr||i===Oi)&&s===sf){S=Di;var B=d&&k===C&&C.visualViewport?C.visualViewport.height:k[F];g-=B-r.height,g*=l?1:-1}if(i===Jr||(i===Zr||i===Di)&&s===sf){M=Oi;var I=d&&k===C&&C.visualViewport?C.visualViewport.width:k[N];p-=I-r.width,p*=l?1:-1}}var U=Object.assign({position:a},c&&nO),G=u===!0?rO({x:p,y:g}):{x:p,y:g};if(p=G.x,g=G.y,l){var R;return Object.assign({},U,(R={},R[S]=w?"0":"",R[M]=h?"0":"",R.transform=(C.devicePixelRatio||1)<=1?"translate("+p+"px, "+g+"px)":"translate3d("+p+"px, "+g+"px, 0)",R))}return Object.assign({},U,(e={},e[S]=w?g+"px":"",e[M]=h?p+"px":"",e.transform="",e))}function iO(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=r===void 0?!0:r,s=t.adaptive,o=s===void 0?!0:s,a=t.roundOffsets,l=a===void 0?!0:a,c={placement:Vs(e.placement),variation:pu(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,qw(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,qw(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var YT={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:iO,data:{}},vh={passive:!0};function sO(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=ps(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",t.update,vh)}),a&&l.addEventListener("resize",t.update,vh),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",t.update,vh)}),a&&l.removeEventListener("resize",t.update,vh)}}var QT={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:sO,data:{}},oO={left:"right",right:"left",bottom:"top",top:"bottom"};function up(n){return n.replace(/left|right|bottom|top/g,function(e){return oO[e]})}var aO={start:"end",end:"start"};function Xw(n){return n.replace(/start|end/g,function(e){return aO[e]})}function yb(n){var e=ps(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function _b(n){return hu(qa(n)).left+yb(n).scrollLeft}function lO(n){var e=ps(n),t=qa(n),r=e.visualViewport,i=t.clientWidth,s=t.clientHeight,o=0,a=0;return r&&(i=r.width,s=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=r.offsetLeft,a=r.offsetTop)),{width:i,height:s,x:o+_b(n),y:a}}function cO(n){var e,t=qa(n),r=yb(n),i=(e=n.ownerDocument)==null?void 0:e.body,s=Sl(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Sl(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+_b(n),l=-r.scrollTop;return zo(i||t).direction==="rtl"&&(a+=Sl(t.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function bb(n){var e=zo(n),t=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+r)}function ZT(n){return["html","body","#document"].indexOf(Ks(n))>=0?n.ownerDocument.body:Li(n)&&bb(n)?n:ZT(p0(n))}function zd(n,e){var t;e===void 0&&(e=[]);var r=ZT(n),i=r===((t=n.ownerDocument)==null?void 0:t.body),s=ps(r),o=i?[s].concat(s.visualViewport||[],bb(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(zd(p0(o)))}function oy(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function uO(n){var e=hu(n);return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function Kw(n,e){return e===$T?oy(lO(n)):du(e)?uO(e):oy(cO(qa(n)))}function dO(n){var e=zd(p0(n)),t=["absolute","fixed"].indexOf(zo(n).position)>=0,r=t&&Li(n)?Wf(n):n;return du(r)?e.filter(function(i){return du(i)&&WT(i,r)&&Ks(i)!=="body"}):[]}function fO(n,e,t){var r=e==="clippingParents"?dO(n):[].concat(e),i=[].concat(r,[t]),s=i[0],o=i.reduce(function(a,l){var c=Kw(n,l);return a.top=Sl(c.top,a.top),a.right=jp(c.right,a.right),a.bottom=jp(c.bottom,a.bottom),a.left=Sl(c.left,a.left),a},Kw(n,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function JT(n){var e=n.reference,t=n.element,r=n.placement,i=r?Vs(r):null,s=r?pu(r):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(i){case Zr:l={x:o,y:e.y-t.height};break;case Di:l={x:o,y:e.y+e.height};break;case Oi:l={x:e.x+e.width,y:a};break;case Jr:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?vb(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case uu:l[c]=l[c]-(e[u]/2-t[u]/2);break;case sf:l[c]=l[c]+(e[u]/2-t[u]/2);break}}return l}function of(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=r===void 0?n.placement:r,s=t.boundary,o=s===void 0?LD:s,a=t.rootBoundary,l=a===void 0?$T:a,c=t.elementContext,u=c===void 0?vd:c,d=t.altBoundary,f=d===void 0?!1:d,p=t.padding,m=p===void 0?0:p,g=XT(typeof m!="number"?m:KT(m,jf)),y=u===vd?DD:vd,h=n.rects.popper,w=n.elements[f?y:u],M=fO(du(w)?w:w.contextElement||qa(n.elements.popper),o,l),S=hu(n.elements.reference),C=JT({reference:S,element:h,strategy:"absolute",placement:i}),k=oy(Object.assign({},h,C)),F=u===vd?k:S,N={top:M.top-F.top+g.top,bottom:F.bottom-M.bottom+g.bottom,left:M.left-F.left+g.left,right:F.right-M.right+g.right},B=n.modifiersData.offset;if(u===vd&&B){var I=B[i];Object.keys(N).forEach(function(U){var G=[Oi,Di].indexOf(U)>=0?1:-1,R=[Zr,Di].indexOf(U)>=0?"y":"x";N[U]+=I[R]*G})}return N}function hO(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=t.boundary,s=t.rootBoundary,o=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,c=l===void 0?pb:l,u=pu(r),d=u?a?jw:jw.filter(function(m){return pu(m)===u}):jf,f=d.filter(function(m){return c.indexOf(m)>=0});f.length===0&&(f=d);var p=f.reduce(function(m,g){return m[g]=of(n,{placement:g,boundary:i,rootBoundary:s,padding:o})[Vs(g)],m},{});return Object.keys(p).sort(function(m,g){return p[m]-p[g]})}function pO(n){if(Vs(n)===hb)return[];var e=up(n);return[Xw(n),e,Xw(e)]}function mO(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,s=i===void 0?!0:i,o=t.altAxis,a=o===void 0?!0:o,l=t.fallbackPlacements,c=t.padding,u=t.boundary,d=t.rootBoundary,f=t.altBoundary,p=t.flipVariations,m=p===void 0?!0:p,g=t.allowedAutoPlacements,y=e.options.placement,h=Vs(y),w=h===y,M=l||(w||!m?[up(y)]:pO(y)),S=[y].concat(M).reduce(function(K,E){return K.concat(Vs(E)===hb?hO(e,{placement:E,boundary:u,rootBoundary:d,padding:c,flipVariations:m,allowedAutoPlacements:g}):E)},[]),C=e.rects.reference,k=e.rects.popper,F=new Map,N=!0,B=S[0],I=0;I<S.length;I++){var U=S[I],G=Vs(U),R=pu(U)===uu,v=[Zr,Di].indexOf(G)>=0,_=v?"width":"height",b=of(e,{placement:U,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),A=v?R?Oi:Jr:R?Di:Zr;C[_]>k[_]&&(A=up(A));var T=up(A),D=[];if(s&&D.push(b[G]<=0),a&&D.push(b[A]<=0,b[T]<=0),D.every(function(K){return K})){B=U,N=!1;break}F.set(U,D)}if(N)for(var V=m?3:1,O=function(K){var E=S.find(function(Y){var j=F.get(Y);if(j)return j.slice(0,K).every(function(X){return X})});if(E)return B=E,"break"},x=V;x>0;x--){var $=O(x);if($==="break")break}e.placement!==B&&(e.modifiersData[r]._skip=!0,e.placement=B,e.reset=!0)}}var gO={name:"flip",enabled:!0,phase:"main",fn:mO,requiresIfExists:["offset"],data:{_skip:!1}};function Yw(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function Qw(n){return[Zr,Oi,Di,Jr].some(function(e){return n[e]>=0})}function vO(n){var e=n.state,t=n.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=of(e,{elementContext:"reference"}),a=of(e,{altBoundary:!0}),l=Yw(o,r),c=Yw(a,i,s),u=Qw(l),d=Qw(c);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}var yO={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:vO};function _O(n,e,t){var r=Vs(n),i=[Jr,Zr].indexOf(r)>=0?-1:1,s=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[Jr,Oi].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function bO(n){var e=n.state,t=n.options,r=n.name,i=t.offset,s=i===void 0?[0,0]:i,o=pb.reduce(function(u,d){return u[d]=_O(d,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}var xO={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:bO};function wO(n){var e=n.state,t=n.name;e.modifiersData[t]=JT({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var e2={name:"popperOffsets",enabled:!0,phase:"read",fn:wO,data:{}};function AO(n){return n==="x"?"y":"x"}function EO(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,s=i===void 0?!0:i,o=t.altAxis,a=o===void 0?!1:o,l=t.boundary,c=t.rootBoundary,u=t.altBoundary,d=t.padding,f=t.tether,p=f===void 0?!0:f,m=t.tetherOffset,g=m===void 0?0:m,y=of(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),h=Vs(e.placement),w=pu(e.placement),M=!w,S=vb(h),C=AO(S),k=e.modifiersData.popperOffsets,F=e.rects.reference,N=e.rects.popper,B=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,I=typeof B=="number"?{mainAxis:B,altAxis:B}:Object.assign({mainAxis:0,altAxis:0},B),U=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,G={x:0,y:0};if(k){if(s){var R,v=S==="y"?Zr:Jr,_=S==="y"?Di:Oi,b=S==="y"?"height":"width",A=k[S],T=A+y[v],D=A-y[_],V=p?-N[b]/2:0,O=w===uu?F[b]:N[b],x=w===uu?-N[b]:-F[b],$=e.elements.arrow,K=p&&$?gb($):{width:0,height:0},E=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:qT(),Y=E[v],j=E[_],X=Hd(0,F[b],K[b]),ee=M?F[b]/2-V-X-Y-I.mainAxis:O-X-Y-I.mainAxis,le=M?-F[b]/2+V+X+j+I.mainAxis:x+X+j+I.mainAxis,me=e.elements.arrow&&Wf(e.elements.arrow),he=me?S==="y"?me.clientTop||0:me.clientLeft||0:0,je=(R=U==null?void 0:U[S])!=null?R:0,q=A+ee-je-he,ze=A+le-je,Qe=Hd(p?jp(T,q):T,A,p?Sl(D,ze):D);k[S]=Qe,G[S]=Qe-A}if(a){var We,Pe=S==="x"?Zr:Jr,Nt=S==="x"?Di:Oi,Me=k[C],W=C==="y"?"height":"width",H=Me+y[Pe],te=Me-y[Nt],de=[Zr,Jr].indexOf(h)!==-1,Z=(We=U==null?void 0:U[C])!=null?We:0,ne=de?H:Me-F[W]-N[W]-Z+I.altAxis,ye=de?Me+F[W]+N[W]-Z-I.altAxis:te,Ce=p&&de?QD(ne,Me,ye):Hd(p?ne:H,Me,p?ye:te);k[C]=Ce,G[C]=Ce-Me}e.modifiersData[r]=G}}var SO={name:"preventOverflow",enabled:!0,phase:"main",fn:EO,requiresIfExists:["offset"]};function TO(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function MO(n){return n===ps(n)||!Li(n)?yb(n):TO(n)}function RO(n){var e=n.getBoundingClientRect(),t=fu(e.width)/n.offsetWidth||1,r=fu(e.height)/n.offsetHeight||1;return t!==1||r!==1}function IO(n,e,t){t===void 0&&(t=!1);var r=Li(e),i=Li(e)&&RO(e),s=qa(e),o=hu(n,i),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!t)&&((Ks(e)!=="body"||bb(s))&&(a=MO(e)),Li(e)?(l=hu(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=_b(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function CO(n){var e=new Map,t=new Set,r=[];n.forEach(function(s){e.set(s.name,s)});function i(s){t.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return n.forEach(function(s){t.has(s.name)||i(s)}),r}function PO(n){var e=CO(n);return WD.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}function NO(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function kO(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var Zw={placement:"bottom",modifiers:[],strategy:"absolute"};function Jw(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function xb(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,i=e.defaultOptions,s=i===void 0?Zw:i;return function(o,a,l){l===void 0&&(l=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},Zw,s),modifiersData:{},elements:{reference:o,popper:a},attributes:{},styles:{}},u=[],d=!1,f={state:c,setOptions:function(g){var y=typeof g=="function"?g(c.options):g;m(),c.options=Object.assign({},s,c.options,y),c.scrollParents={reference:du(o)?zd(o):o.contextElement?zd(o.contextElement):[],popper:zd(a)};var h=PO(kO([].concat(r,c.options.modifiers)));return c.orderedModifiers=h.filter(function(w){return w.enabled}),p(),f.update()},forceUpdate:function(){if(!d){var g=c.elements,y=g.reference,h=g.popper;if(Jw(y,h)){c.rects={reference:IO(y,Wf(h),c.options.strategy==="fixed"),popper:gb(h)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(N){return c.modifiersData[N.name]=Object.assign({},N.data)});for(var w=0;w<c.orderedModifiers.length;w++){if(c.reset===!0){c.reset=!1,w=-1;continue}var M=c.orderedModifiers[w],S=M.fn,C=M.options,k=C===void 0?{}:C,F=M.name;typeof S=="function"&&(c=S({state:c,options:k,name:F,instance:f})||c)}}}},update:NO(function(){return new Promise(function(g){f.forceUpdate(),g(c)})}),destroy:function(){m(),d=!0}};if(!Jw(o,a))return f;f.setOptions(l).then(function(g){!d&&l.onFirstUpdate&&l.onFirstUpdate(g)});function p(){c.orderedModifiers.forEach(function(g){var y=g.name,h=g.options,w=h===void 0?{}:h,M=g.effect;if(typeof M=="function"){var S=M({state:c,name:y,instance:f,options:w}),C=function(){};u.push(S||C)}})}function m(){u.forEach(function(g){return g()}),u=[]}return f}}xb();var BO=[QT,e2,YT,jT];xb({defaultModifiers:BO});var LO=[QT,e2,YT,jT,xO,gO,SO,tO,yO],DO=xb({defaultModifiers:LO});const OO=(n,e,t={})=>{const r={name:"updateState",enabled:!0,phase:"write",fn:({state:l})=>{const c=FO(l);Object.assign(o.value,c)},requires:["computeStyles"]},i=ve(()=>{const{onFirstUpdate:l,placement:c,strategy:u,modifiers:d}=P(t);return{onFirstUpdate:l,placement:c||"bottom",strategy:u||"absolute",modifiers:[...d||[],r,{name:"applyStyles",enabled:!1}]}}),s=Xc(),o=fe({styles:{popper:{position:P(i).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),a=()=>{s.value&&(s.value.destroy(),s.value=void 0)};return Ct(i,l=>{const c=P(s);c&&c.setOptions(l)},{deep:!0}),Ct([n,e],([l,c])=>{a(),!(!l||!c)&&(s.value=DO(l,c,P(i)))}),Hr(()=>{a()}),{state:ve(()=>{var l;return{...((l=P(s))==null?void 0:l.state)||{}}}),styles:ve(()=>P(o).styles),attributes:ve(()=>P(o).attributes),update:()=>{var l;return(l=P(s))==null?void 0:l.update()},forceUpdate:()=>{var l;return(l=P(s))==null?void 0:l.forceUpdate()},instanceRef:ve(()=>P(s))}};function FO(n){const e=Object.keys(n.elements),t=Kv(e.map(i=>[i,n.styles[i]||{}])),r=Kv(e.map(i=>[i,n.attributes[i]]));return{styles:t,attributes:r}}const t2=n=>{if(!n)return{onClick:El,onMousedown:El,onMouseup:El};let e=!1,t=!1;return{onClick:o=>{e&&t&&n(o),e=t=!1},onMousedown:o=>{e=o.target===o.currentTarget},onMouseup:o=>{t=o.target===o.currentTarget}}};function eA(){let n;const e=(r,i)=>{t(),n=window.setTimeout(r,i)},t=()=>window.clearTimeout(n);return Z3(()=>t()),{registerTimeout:e,cancelTimeout:t}}const tA={prefix:Math.floor(Math.random()*1e4),current:0},UO=Symbol("elIdInjection"),n2=()=>Qo()?Mn(UO,tA):tA,af=n=>{const e=n2(),t=uT();return ve(()=>P(n)||`${t.value}-id-${e.prefix}-${e.current++}`)};let Nc=[];const nA=n=>{const e=n;e.key===Up.esc&&Nc.forEach(t=>t(e))},HO=n=>{En(()=>{Nc.length===0&&document.addEventListener("keydown",nA),gi&&Nc.push(n)}),Hr(()=>{Nc=Nc.filter(e=>e!==n),Nc.length===0&&gi&&document.removeEventListener("keydown",nA)})};let rA;const r2=()=>{const n=uT(),e=n2(),t=ve(()=>`${n.value}-popper-container-${e.prefix}`),r=ve(()=>`#${t.value}`);return{id:t,selector:r}},zO=n=>{const e=document.createElement("div");return e.id=n,document.body.appendChild(e),e},GO=()=>{const{id:n,selector:e}=r2();return nT(()=>{gi&&!rA&&!document.body.querySelector(e.value)&&(rA=zO(n.value))}),{id:n,selector:e}},VO=cr({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),$O=({showAfter:n,hideAfter:e,autoClose:t,open:r,close:i})=>{const{registerTimeout:s}=eA(),{registerTimeout:o,cancelTimeout:a}=eA();return{onOpen:u=>{s(()=>{r(u);const d=P(t);tf(d)&&d>0&&o(()=>{i(u)},d)},P(n))},onClose:u=>{a(),s(()=>{i(u)},P(e))}}},i2=Symbol("elForwardRef"),jO=n=>{cs(i2,{setForwardRef:t=>{n.value=t}})},WO=n=>({mounted(e){n(e)},updated(e){n(e)},unmounted(){n(null)}});function qO(n){const e=fe();function t(){if(n.value==null)return;const{selectionStart:i,selectionEnd:s,value:o}=n.value;if(i==null||s==null)return;const a=o.slice(0,Math.max(0,i)),l=o.slice(Math.max(0,s));e.value={selectionStart:i,selectionEnd:s,value:o,beforeTxt:a,afterTxt:l}}function r(){if(n.value==null||e.value==null)return;const{value:i}=n.value,{beforeTxt:s,afterTxt:o,selectionStart:a}=e.value;if(s==null||o==null||a==null)return;let l=i.length;if(i.endsWith(o))l=i.length-o.length;else if(i.startsWith(s))l=s.length;else{const c=s[a-1],u=i.indexOf(c,a-1);u!==-1&&(l=u+1)}n.value.setSelectionRange(l,l)}return[t,r]}function XO(n,{afterFocus:e,afterBlur:t}={}){const r=Qo(),{emit:i}=r,s=Xc(),o=fe(!1),a=u=>{o.value||(o.value=!0,i("focus",u),e==null||e())},l=u=>{var d;u.relatedTarget&&((d=s.value)!=null&&d.contains(u.relatedTarget))||(o.value=!1,i("blur",u),t==null||t())},c=()=>{var u;(u=n.value)==null||u.focus()};return Ct(s,u=>{u&&u.setAttribute("tabindex","-1")}),J3(s,"click",c),{wrapperRef:s,isFocused:o,handleFocus:a,handleBlur:l}}const Ku=Symbol("formContextKey"),kl=Symbol("formItemContextKey"),mu=(n,e={})=>{const t=fe(void 0),r=e.prop?t:VT("size"),i=e.global?t:eN(),s=e.form?{size:void 0}:Mn(Ku,void 0),o=e.formItem?{size:void 0}:Mn(kl,void 0);return ve(()=>r.value||P(n)||(o==null?void 0:o.size)||(s==null?void 0:s.size)||i.value||"")},m0=n=>{const e=VT("disabled"),t=Mn(Ku,void 0);return ve(()=>e.value||P(n)||(t==null?void 0:t.disabled)||!1)},qf=()=>{const n=Mn(Ku,void 0),e=Mn(kl,void 0);return{form:n,formItem:e}},wb=(n,{formItemContext:e,disableIdGeneration:t,disableIdManagement:r})=>{t||(t=fe(!1)),r||(r=fe(!1));const i=fe();let s;const o=ve(()=>{var a;return!!(!n.label&&e&&e.inputIds&&((a=e.inputIds)==null?void 0:a.length)<=1)});return En(()=>{s=Ct([Fs(n,"id"),t],([a,l])=>{const c=a??(l?void 0:af().value);c!==i.value&&(e!=null&&e.removeInputId&&(i.value&&e.removeInputId(i.value),!(r!=null&&r.value)&&!l&&c&&e.addInputId(c)),i.value=c)},{immediate:!0})}),Op(()=>{s&&s(),e!=null&&e.removeInputId&&i.value&&e.removeInputId(i.value)}),{isLabeledByFormItem:o,inputId:i}},KO=cr({size:{type:String,values:dT},disabled:Boolean}),YO=cr({...KO,model:Object,rules:{type:Yt(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),QO={validate:(n,e,t)=>(Nl(n)||os(n))&&La(e)&&os(t)};function ZO(){const n=fe([]),e=ve(()=>{if(!n.value.length)return"0";const s=Math.max(...n.value);return s?`${s}px`:""});function t(s){const o=n.value.indexOf(s);return o===-1&&e.value,o}function r(s,o){if(s&&o){const a=t(o);n.value.splice(a,1,s)}else s&&n.value.push(s)}function i(s){const o=t(s);o>-1&&n.value.splice(o,1)}return{autoLabelWidth:e,registerLabelWidth:r,deregisterLabelWidth:i}}const yh=(n,e)=>{const t=ey(e);return t.length>0?n.filter(r=>r.prop&&t.includes(r.prop)):n},JO="ElForm",eF=tt({name:JO}),tF=tt({...eF,props:YO,emits:QO,setup(n,{expose:e,emit:t}){const r=n,i=[],s=mu(),o=Jn("form"),a=ve(()=>{const{labelPosition:w,inline:M}=r;return[o.b(),o.m(s.value||"default"),{[o.m(`label-${w}`)]:w,[o.m("inline")]:M}]}),l=w=>{i.push(w)},c=w=>{w.prop&&i.splice(i.indexOf(w),1)},u=(w=[])=>{r.model&&yh(i,w).forEach(M=>M.resetField())},d=(w=[])=>{yh(i,w).forEach(M=>M.clearValidate())},f=ve(()=>!!r.model),p=w=>{if(i.length===0)return[];const M=yh(i,w);return M.length?M:[]},m=async w=>y(void 0,w),g=async(w=[])=>{if(!f.value)return!1;const M=p(w);if(M.length===0)return!0;let S={};for(const C of M)try{await C.validate("")}catch(k){S={...S,...k}}return Object.keys(S).length===0?!0:Promise.reject(S)},y=async(w=[],M)=>{const S=!pl(M);try{const C=await g(w);return C===!0&&(M==null||M(C)),C}catch(C){if(C instanceof Error)throw C;const k=C;return r.scrollToError&&h(Object.keys(k)[0]),M==null||M(!1,k),S&&Promise.reject(k)}},h=w=>{var M;const S=yh(i,w)[0];S&&((M=S.$el)==null||M.scrollIntoView(r.scrollIntoViewOptions))};return Ct(()=>r.rules,()=>{r.validateOnRuleChange&&m().catch(w=>void 0)},{deep:!0}),cs(Ku,Zo({...a0(r),emit:t,resetFields:u,clearValidate:d,validateField:y,addField:l,removeField:c,...ZO()})),e({validate:m,validateField:y,resetFields:u,clearValidate:d,scrollToField:h}),(w,M)=>(ge(),Se("form",{class:qe(P(a))},[nn(w.$slots,"default")],2))}});var nF=ur(tF,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form.vue"]]);function ml(){return ml=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ml.apply(this,arguments)}function rF(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,lf(n,e)}function ay(n){return ay=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ay(n)}function lf(n,e){return lf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},lf(n,e)}function iF(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dp(n,e,t){return iF()?dp=Reflect.construct.bind():dp=function(i,s,o){var a=[null];a.push.apply(a,s);var l=Function.bind.apply(i,a),c=new l;return o&&lf(c,o.prototype),c},dp.apply(null,arguments)}function sF(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function ly(n){var e=typeof Map=="function"?new Map:void 0;return ly=function(r){if(r===null||!sF(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return dp(r,arguments,ay(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),lf(i,r)},ly(n)}var oF=/%[sdj%]/g,aF=function(){};typeof process<"u"&&process.env;function cy(n){if(!n||!n.length)return null;var e={};return n.forEach(function(t){var r=t.field;e[r]=e[r]||[],e[r].push(t)}),e}function pi(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var i=0,s=t.length;if(typeof n=="function")return n.apply(null,t);if(typeof n=="string"){var o=n.replace(oF,function(a){if(a==="%%")return"%";if(i>=s)return a;switch(a){case"%s":return String(t[i++]);case"%d":return Number(t[i++]);case"%j":try{return JSON.stringify(t[i++])}catch{return"[Circular]"}break;default:return a}});return o}return n}function lF(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function er(n,e){return!!(n==null||e==="array"&&Array.isArray(n)&&!n.length||lF(e)&&typeof n=="string"&&!n)}function cF(n,e,t){var r=[],i=0,s=n.length;function o(a){r.push.apply(r,a||[]),i++,i===s&&t(r)}n.forEach(function(a){e(a,o)})}function iA(n,e,t){var r=0,i=n.length;function s(o){if(o&&o.length){t(o);return}var a=r;r=r+1,a<i?e(n[a],s):t([])}s([])}function uF(n){var e=[];return Object.keys(n).forEach(function(t){e.push.apply(e,n[t]||[])}),e}var sA=function(n){rF(e,n);function e(t,r){var i;return i=n.call(this,"Async Validation Error")||this,i.errors=t,i.fields=r,i}return e}(ly(Error));function dF(n,e,t,r,i){if(e.first){var s=new Promise(function(f,p){var m=function(h){return r(h),h.length?p(new sA(h,cy(h))):f(i)},g=uF(n);iA(g,t,m)});return s.catch(function(f){return f}),s}var o=e.firstFields===!0?Object.keys(n):e.firstFields||[],a=Object.keys(n),l=a.length,c=0,u=[],d=new Promise(function(f,p){var m=function(y){if(u.push.apply(u,y),c++,c===l)return r(u),u.length?p(new sA(u,cy(u))):f(i)};a.length||(r(u),f(i)),a.forEach(function(g){var y=n[g];o.indexOf(g)!==-1?iA(y,t,m):cF(y,t,m)})});return d.catch(function(f){return f}),d}function fF(n){return!!(n&&n.message!==void 0)}function hF(n,e){for(var t=n,r=0;r<e.length;r++){if(t==null)return t;t=t[e[r]]}return t}function oA(n,e){return function(t){var r;return n.fullFields?r=hF(e,n.fullFields):r=e[t.field||n.fullField],fF(t)?(t.field=t.field||n.fullField,t.fieldValue=r,t):{message:typeof t=="function"?t():t,fieldValue:r,field:t.field||n.fullField}}}function aA(n,e){if(e){for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];typeof r=="object"&&typeof n[t]=="object"?n[t]=ml({},n[t],r):n[t]=r}}return n}var s2=function(e,t,r,i,s,o){e.required&&(!r.hasOwnProperty(e.field)||er(t,o||e.type))&&i.push(pi(s.messages.required,e.fullField))},pF=function(e,t,r,i,s){(/^\s+$/.test(t)||t==="")&&i.push(pi(s.messages.whitespace,e.fullField))},_h,mF=function(){if(_h)return _h;var n="[a-fA-F\\d:]",e=function(S){return S&&S.includeBoundaries?"(?:(?<=\\s|^)(?="+n+")|(?<="+n+")(?=\\s|$))":""},t="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",i=(`
(?:
(?:`+r+":){7}(?:"+r+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+r+":){6}(?:"+t+"|:"+r+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+r+":){5}(?::"+t+"|(?::"+r+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+r+":){4}(?:(?::"+r+"){0,1}:"+t+"|(?::"+r+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+r+":){3}(?:(?::"+r+"){0,2}:"+t+"|(?::"+r+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+r+":){2}(?:(?::"+r+"){0,3}:"+t+"|(?::"+r+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+r+":){1}(?:(?::"+r+"){0,4}:"+t+"|(?::"+r+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+r+"){0,5}:"+t+"|(?::"+r+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp("(?:^"+t+"$)|(?:^"+i+"$)"),o=new RegExp("^"+t+"$"),a=new RegExp("^"+i+"$"),l=function(S){return S&&S.exact?s:new RegExp("(?:"+e(S)+t+e(S)+")|(?:"+e(S)+i+e(S)+")","g")};l.v4=function(M){return M&&M.exact?o:new RegExp(""+e(M)+t+e(M),"g")},l.v6=function(M){return M&&M.exact?a:new RegExp(""+e(M)+i+e(M),"g")};var c="(?:(?:[a-z]+:)?//)",u="(?:\\S+(?::\\S*)?@)?",d=l.v4().source,f=l.v6().source,p="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",m="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",g="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",y="(?::\\d{2,5})?",h='(?:[/?#][^\\s"]*)?',w="(?:"+c+"|www\\.)"+u+"(?:localhost|"+d+"|"+f+"|"+p+m+g+")"+y+h;return _h=new RegExp("(?:^"+w+"$)","i"),_h},lA={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Nd={integer:function(e){return Nd.number(e)&&parseInt(e,10)===e},float:function(e){return Nd.number(e)&&!Nd.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!Nd.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(lA.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(mF())},hex:function(e){return typeof e=="string"&&!!e.match(lA.hex)}},gF=function(e,t,r,i,s){if(e.required&&t===void 0){s2(e,t,r,i,s);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],a=e.type;o.indexOf(a)>-1?Nd[a](t)||i.push(pi(s.messages.types[a],e.fullField,e.type)):a&&typeof t!==e.type&&i.push(pi(s.messages.types[a],e.fullField,e.type))},vF=function(e,t,r,i,s){var o=typeof e.len=="number",a=typeof e.min=="number",l=typeof e.max=="number",c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=t,d=null,f=typeof t=="number",p=typeof t=="string",m=Array.isArray(t);if(f?d="number":p?d="string":m&&(d="array"),!d)return!1;m&&(u=t.length),p&&(u=t.replace(c,"_").length),o?u!==e.len&&i.push(pi(s.messages[d].len,e.fullField,e.len)):a&&!l&&u<e.min?i.push(pi(s.messages[d].min,e.fullField,e.min)):l&&!a&&u>e.max?i.push(pi(s.messages[d].max,e.fullField,e.max)):a&&l&&(u<e.min||u>e.max)&&i.push(pi(s.messages[d].range,e.fullField,e.min,e.max))},oc="enum",yF=function(e,t,r,i,s){e[oc]=Array.isArray(e[oc])?e[oc]:[],e[oc].indexOf(t)===-1&&i.push(pi(s.messages[oc],e.fullField,e[oc].join(", ")))},_F=function(e,t,r,i,s){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||i.push(pi(s.messages.pattern.mismatch,e.fullField,t,e.pattern));else if(typeof e.pattern=="string"){var o=new RegExp(e.pattern);o.test(t)||i.push(pi(s.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},Ht={required:s2,whitespace:pF,type:gF,range:vF,enum:yF,pattern:_F},bF=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(er(t,"string")&&!e.required)return r();Ht.required(e,t,i,o,s,"string"),er(t,"string")||(Ht.type(e,t,i,o,s),Ht.range(e,t,i,o,s),Ht.pattern(e,t,i,o,s),e.whitespace===!0&&Ht.whitespace(e,t,i,o,s))}r(o)},xF=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(er(t)&&!e.required)return r();Ht.required(e,t,i,o,s),t!==void 0&&Ht.type(e,t,i,o,s)}r(o)},wF=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(t===""&&(t=void 0),er(t)&&!e.required)return r();Ht.required(e,t,i,o,s),t!==void 0&&(Ht.type(e,t,i,o,s),Ht.range(e,t,i,o,s))}r(o)},AF=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(er(t)&&!e.required)return r();Ht.required(e,t,i,o,s),t!==void 0&&Ht.type(e,t,i,o,s)}r(o)},EF=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(er(t)&&!e.required)return r();Ht.required(e,t,i,o,s),er(t)||Ht.type(e,t,i,o,s)}r(o)},SF=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(er(t)&&!e.required)return r();Ht.required(e,t,i,o,s),t!==void 0&&(Ht.type(e,t,i,o,s),Ht.range(e,t,i,o,s))}r(o)},TF=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(er(t)&&!e.required)return r();Ht.required(e,t,i,o,s),t!==void 0&&(Ht.type(e,t,i,o,s),Ht.range(e,t,i,o,s))}r(o)},MF=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(t==null&&!e.required)return r();Ht.required(e,t,i,o,s,"array"),t!=null&&(Ht.type(e,t,i,o,s),Ht.range(e,t,i,o,s))}r(o)},RF=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(er(t)&&!e.required)return r();Ht.required(e,t,i,o,s),t!==void 0&&Ht.type(e,t,i,o,s)}r(o)},IF="enum",CF=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(er(t)&&!e.required)return r();Ht.required(e,t,i,o,s),t!==void 0&&Ht[IF](e,t,i,o,s)}r(o)},PF=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(er(t,"string")&&!e.required)return r();Ht.required(e,t,i,o,s),er(t,"string")||Ht.pattern(e,t,i,o,s)}r(o)},NF=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(er(t,"date")&&!e.required)return r();if(Ht.required(e,t,i,o,s),!er(t,"date")){var l;t instanceof Date?l=t:l=new Date(t),Ht.type(e,l,i,o,s),l&&Ht.range(e,l.getTime(),i,o,s)}}r(o)},kF=function(e,t,r,i,s){var o=[],a=Array.isArray(t)?"array":typeof t;Ht.required(e,t,i,o,s,a),r(o)},yg=function(e,t,r,i,s){var o=e.type,a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(er(t,o)&&!e.required)return r();Ht.required(e,t,i,a,s,o),er(t,o)||Ht.type(e,t,i,a,s)}r(a)},BF=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(er(t)&&!e.required)return r();Ht.required(e,t,i,o,s)}r(o)},Gd={string:bF,method:xF,number:wF,boolean:AF,regexp:EF,integer:SF,float:TF,array:MF,object:RF,enum:CF,pattern:PF,date:NF,url:yg,hex:yg,email:yg,required:kF,any:BF};function uy(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var dy=uy(),Xf=function(){function n(t){this.rules=null,this._messages=dy,this.define(t)}var e=n.prototype;return e.define=function(r){var i=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(typeof r!="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(s){var o=r[s];i.rules[s]=Array.isArray(o)?o:[o]})},e.messages=function(r){return r&&(this._messages=aA(uy(),r)),this._messages},e.validate=function(r,i,s){var o=this;i===void 0&&(i={}),s===void 0&&(s=function(){});var a=r,l=i,c=s;if(typeof l=="function"&&(c=l,l={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,a),Promise.resolve(a);function u(g){var y=[],h={};function w(S){if(Array.isArray(S)){var C;y=(C=y).concat.apply(C,S)}else y.push(S)}for(var M=0;M<g.length;M++)w(g[M]);y.length?(h=cy(y),c(y,h)):c(null,a)}if(l.messages){var d=this.messages();d===dy&&(d=uy()),aA(d,l.messages),l.messages=d}else l.messages=this.messages();var f={},p=l.keys||Object.keys(this.rules);p.forEach(function(g){var y=o.rules[g],h=a[g];y.forEach(function(w){var M=w;typeof M.transform=="function"&&(a===r&&(a=ml({},a)),h=a[g]=M.transform(h)),typeof M=="function"?M={validator:M}:M=ml({},M),M.validator=o.getValidationMethod(M),M.validator&&(M.field=g,M.fullField=M.fullField||g,M.type=o.getType(M),f[g]=f[g]||[],f[g].push({rule:M,value:h,source:a,field:g}))})});var m={};return dF(f,l,function(g,y){var h=g.rule,w=(h.type==="object"||h.type==="array")&&(typeof h.fields=="object"||typeof h.defaultField=="object");w=w&&(h.required||!h.required&&g.value),h.field=g.field;function M(k,F){return ml({},F,{fullField:h.fullField+"."+k,fullFields:h.fullFields?[].concat(h.fullFields,[k]):[k]})}function S(k){k===void 0&&(k=[]);var F=Array.isArray(k)?k:[k];!l.suppressWarning&&F.length&&n.warning("async-validator:",F),F.length&&h.message!==void 0&&(F=[].concat(h.message));var N=F.map(oA(h,a));if(l.first&&N.length)return m[h.field]=1,y(N);if(!w)y(N);else{if(h.required&&!g.value)return h.message!==void 0?N=[].concat(h.message).map(oA(h,a)):l.error&&(N=[l.error(h,pi(l.messages.required,h.field))]),y(N);var B={};h.defaultField&&Object.keys(g.value).map(function(G){B[G]=h.defaultField}),B=ml({},B,g.rule.fields);var I={};Object.keys(B).forEach(function(G){var R=B[G],v=Array.isArray(R)?R:[R];I[G]=v.map(M.bind(null,G))});var U=new n(I);U.messages(l.messages),g.rule.options&&(g.rule.options.messages=l.messages,g.rule.options.error=l.error),U.validate(g.value,g.rule.options||l,function(G){var R=[];N&&N.length&&R.push.apply(R,N),G&&G.length&&R.push.apply(R,G),y(R.length?R:null)})}}var C;if(h.asyncValidator)C=h.asyncValidator(h,g.value,S,g.source,l);else if(h.validator){try{C=h.validator(h,g.value,S,g.source,l)}catch(k){console.error==null,l.suppressValidatorError||setTimeout(function(){throw k},0),S(k.message)}C===!0?S():C===!1?S(typeof h.message=="function"?h.message(h.fullField||h.field):h.message||(h.fullField||h.field)+" fails"):C instanceof Array?S(C):C instanceof Error&&S(C.message)}C&&C.then&&C.then(function(){return S()},function(k){return S(k)})},function(g){u(g)},a)},e.getType=function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!Gd.hasOwnProperty(r.type))throw new Error(pi("Unknown rule type %s",r.type));return r.type||"string"},e.getValidationMethod=function(r){if(typeof r.validator=="function")return r.validator;var i=Object.keys(r),s=i.indexOf("message");return s!==-1&&i.splice(s,1),i.length===1&&i[0]==="required"?Gd.required:Gd[this.getType(r)]||void 0},n}();Xf.register=function(e,t){if(typeof t!="function")throw new Error("Cannot register a validator by type, validator is not a function");Gd[e]=t};Xf.warning=aF;Xf.messages=dy;Xf.validators=Gd;const LF=["","error","validating","success"],DF=cr({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:Yt([String,Array])},required:{type:Boolean,default:void 0},rules:{type:Yt([Object,Array])},error:String,validateStatus:{type:String,values:LF},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:dT}}),cA="ElLabelWrap";var OF=tt({name:cA,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(n,{slots:e}){const t=Mn(Ku,void 0),r=Mn(kl);r||zT(cA,"usage: <el-form-item><label-wrap /></el-form-item>");const i=Jn("form"),s=fe(),o=fe(0),a=()=>{var u;if((u=s.value)!=null&&u.firstElementChild){const d=window.getComputedStyle(s.value.firstElementChild).width;return Math.ceil(Number.parseFloat(d))}else return 0},l=(u="update")=>{Tn(()=>{e.default&&n.isAutoWidth&&(u==="update"?o.value=a():u==="remove"&&(t==null||t.deregisterLabelWidth(o.value)))})},c=()=>l("update");return En(()=>{c()}),Hr(()=>{l("remove")}),tN(()=>c()),Ct(o,(u,d)=>{n.updateAll&&(t==null||t.registerLabelWidth(u,d))}),fT(ve(()=>{var u,d;return(d=(u=s.value)==null?void 0:u.firstElementChild)!=null?d:null}),c),()=>{var u,d;if(!e)return null;const{isAutoWidth:f}=n;if(f){const p=t==null?void 0:t.autoLabelWidth,m=r==null?void 0:r.hasLabel,g={};if(m&&p&&p!=="auto"){const y=Math.max(0,Number.parseInt(p,10)-o.value),h=t.labelPosition==="left"?"marginRight":"marginLeft";y&&(g[h]=`${y}px`)}return ke("div",{ref:s,class:[i.be("item","label-wrap")],style:g},[(u=e.default)==null?void 0:u.call(e)])}else return ke(mr,{ref:s},[(d=e.default)==null?void 0:d.call(e)])}}});const FF=["role","aria-labelledby"],UF=tt({name:"ElFormItem"}),HF=tt({...UF,props:DF,setup(n,{expose:e}){const t=n,r=Xu(),i=Mn(Ku,void 0),s=Mn(kl,void 0),o=mu(void 0,{formItem:!1}),a=Jn("form-item"),l=af().value,c=fe([]),u=fe(""),d=nN(u,100),f=fe(""),p=fe();let m,g=!1;const y=ve(()=>{if((i==null?void 0:i.labelPosition)==="top")return{};const j=Jd(t.labelWidth||(i==null?void 0:i.labelWidth)||"");return j?{width:j}:{}}),h=ve(()=>{if((i==null?void 0:i.labelPosition)==="top"||i!=null&&i.inline)return{};if(!t.label&&!t.labelWidth&&B)return{};const j=Jd(t.labelWidth||(i==null?void 0:i.labelWidth)||"");return!t.label&&!r.label?{marginLeft:j}:{}}),w=ve(()=>[a.b(),a.m(o.value),a.is("error",u.value==="error"),a.is("validating",u.value==="validating"),a.is("success",u.value==="success"),a.is("required",v.value||t.required),a.is("no-asterisk",i==null?void 0:i.hideRequiredAsterisk),(i==null?void 0:i.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[a.m("feedback")]:i==null?void 0:i.statusIcon}]),M=ve(()=>La(t.inlineMessage)?t.inlineMessage:(i==null?void 0:i.inlineMessage)||!1),S=ve(()=>[a.e("error"),{[a.em("error","inline")]:M.value}]),C=ve(()=>t.prop?os(t.prop)?t.prop:t.prop.join("."):""),k=ve(()=>!!(t.label||r.label)),F=ve(()=>t.for||c.value.length===1?c.value[0]:void 0),N=ve(()=>!F.value&&k.value),B=!!s,I=ve(()=>{const j=i==null?void 0:i.model;if(!(!j||!t.prop))return mg(j,t.prop).value}),U=ve(()=>{const{required:j}=t,X=[];t.rules&&X.push(...ey(t.rules));const ee=i==null?void 0:i.rules;if(ee&&t.prop){const le=mg(ee,t.prop).value;le&&X.push(...ey(le))}if(j!==void 0){const le=X.map((me,he)=>[me,he]).filter(([me])=>Object.keys(me).includes("required"));if(le.length>0)for(const[me,he]of le)me.required!==j&&(X[he]={...me,required:j});else X.push({required:j})}return X}),G=ve(()=>U.value.length>0),R=j=>U.value.filter(ee=>!ee.trigger||!j?!0:Array.isArray(ee.trigger)?ee.trigger.includes(j):ee.trigger===j).map(({trigger:ee,...le})=>le),v=ve(()=>U.value.some(j=>j.required)),_=ve(()=>{var j;return d.value==="error"&&t.showMessage&&((j=i==null?void 0:i.showMessage)!=null?j:!0)}),b=ve(()=>`${t.label||""}${(i==null?void 0:i.labelSuffix)||""}`),A=j=>{u.value=j},T=j=>{var X,ee;const{errors:le,fields:me}=j;A("error"),f.value=le?(ee=(X=le==null?void 0:le[0])==null?void 0:X.message)!=null?ee:`${t.prop} is required`:"",i==null||i.emit("validate",t.prop,!1,f.value)},D=()=>{A("success"),i==null||i.emit("validate",t.prop,!0,"")},V=async j=>{const X=C.value;return new Xf({[X]:j}).validate({[X]:I.value},{firstFields:!0}).then(()=>(D(),!0)).catch(le=>(T(le),Promise.reject(le)))},O=async(j,X)=>{if(g||!t.prop)return!1;const ee=pl(X);if(!G.value)return X==null||X(!1),!1;const le=R(j);return le.length===0?(X==null||X(!0),!0):(A("validating"),V(le).then(()=>(X==null||X(!0),!0)).catch(me=>{const{fields:he}=me;return X==null||X(!1,he),ee?!1:Promise.reject(he)}))},x=()=>{A(""),f.value="",g=!1},$=async()=>{const j=i==null?void 0:i.model;if(!j||!t.prop)return;const X=mg(j,t.prop);g=!0,X.value=Hw(m),await Tn(),x(),g=!1},K=j=>{c.value.includes(j)||c.value.push(j)},E=j=>{c.value=c.value.filter(X=>X!==j)};Ct(()=>t.error,j=>{f.value=j||"",A(j?"error":"")},{immediate:!0}),Ct(()=>t.validateStatus,j=>A(j||""));const Y=Zo({...a0(t),$el:p,size:o,validateState:u,labelId:l,inputIds:c,isGroup:N,hasLabel:k,addInputId:K,removeInputId:E,resetField:$,clearValidate:x,validate:O});return cs(kl,Y),En(()=>{t.prop&&(i==null||i.addField(Y),m=Hw(I.value))}),Hr(()=>{i==null||i.removeField(Y)}),e({size:o,validateMessage:f,validateState:u,validate:O,clearValidate:x,resetField:$}),(j,X)=>{var ee;return ge(),Se("div",{ref_key:"formItemRef",ref:p,class:qe(P(w)),role:P(N)?"group":void 0,"aria-labelledby":P(N)?P(l):void 0},[ke(P(OF),{"is-auto-width":P(y).width==="auto","update-all":((ee=P(i))==null?void 0:ee.labelWidth)==="auto"},{default:He(()=>[P(k)?(ge(),cn(ns(P(F)?"label":"div"),{key:0,id:P(l),for:P(F),class:qe(P(a).e("label")),style:yi(P(y))},{default:He(()=>[nn(j.$slots,"label",{label:P(b)},()=>[Mt(Ze(P(b)),1)])]),_:3},8,["id","for","class","style"])):St("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),L("div",{class:qe(P(a).e("content")),style:yi(P(h))},[nn(j.$slots,"default"),ke(rN,{name:`${P(a).namespace.value}-zoom-in-top`},{default:He(()=>[P(_)?nn(j.$slots,"error",{key:0,error:f.value},()=>[L("div",{class:qe(P(S))},Ze(f.value),3)]):St("v-if",!0)]),_:3},8,["name"])],6)],10,FF)}}});var o2=ur(HF,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form-item.vue"]]);const a2=Zl(nF,{FormItem:o2}),l2=l0(o2);let $i;const zF=`
  height:0 !important;
  visibility:hidden !important;
  ${DN()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,GF=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function VF(n){const e=window.getComputedStyle(n),t=e.getPropertyValue("box-sizing"),r=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),i=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:GF.map(o=>`${o}:${e.getPropertyValue(o)}`).join(";"),paddingSize:r,borderSize:i,boxSizing:t}}function uA(n,e=1,t){var r;$i||($i=document.createElement("textarea"),document.body.appendChild($i));const{paddingSize:i,borderSize:s,boxSizing:o,contextStyle:a}=VF(n);$i.setAttribute("style",`${a};${zF}`),$i.value=n.value||n.placeholder||"";let l=$i.scrollHeight;const c={};o==="border-box"?l=l+s:o==="content-box"&&(l=l-i),$i.value="";const u=$i.scrollHeight-i;if(tf(e)){let d=u*e;o==="border-box"&&(d=d+i+s),l=Math.max(d,l),c.minHeight=`${d}px`}if(tf(t)){let d=u*t;o==="border-box"&&(d=d+i+s),l=Math.min(d,l)}return c.height=`${l}px`,(r=$i.parentNode)==null||r.removeChild($i),$i=void 0,c}const $F=cr({id:{type:String,default:void 0},size:c0,disabled:Boolean,modelValue:{type:Yt([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Yt([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:nf},prefixIcon:{type:nf},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Yt([Object,Array,String]),default:()=>iN({})}}),jF={[Ho]:n=>os(n),input:n=>os(n),change:n=>os(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,mouseleave:n=>n instanceof MouseEvent,mouseenter:n=>n instanceof MouseEvent,keydown:n=>n instanceof Event,compositionstart:n=>n instanceof CompositionEvent,compositionupdate:n=>n instanceof CompositionEvent,compositionend:n=>n instanceof CompositionEvent},WF=["role"],qF=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],XF=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],KF=tt({name:"ElInput",inheritAttrs:!1}),YF=tt({...KF,props:$F,emits:jF,setup(n,{expose:e,emit:t}){const r=n,i=sN(),s=Xu(),o=ve(()=>{const Z={};return r.containerRole==="combobox"&&(Z["aria-haspopup"]=i["aria-haspopup"],Z["aria-owns"]=i["aria-owns"],Z["aria-expanded"]=i["aria-expanded"]),Z}),a=ve(()=>[r.type==="textarea"?y.b():g.b(),g.m(p.value),g.is("disabled",m.value),g.is("exceed",K.value),{[g.b("group")]:s.prepend||s.append,[g.bm("group","append")]:s.append,[g.bm("group","prepend")]:s.prepend,[g.m("prefix")]:s.prefix||r.prefixIcon,[g.m("suffix")]:s.suffix||r.suffixIcon||r.clearable||r.showPassword,[g.bm("suffix","password-clear")]:V.value&&O.value},i.class]),l=ve(()=>[g.e("wrapper"),g.is("focus",I.value)]),c=CD({excludeKeys:ve(()=>Object.keys(o.value))}),{form:u,formItem:d}=qf(),{inputId:f}=wb(r,{formItemContext:d}),p=mu(),m=m0(),g=Jn("input"),y=Jn("textarea"),h=Xc(),w=Xc(),M=fe(!1),S=fe(!1),C=fe(!1),k=fe(),F=Xc(r.inputStyle),N=ve(()=>h.value||w.value),{wrapperRef:B,isFocused:I,handleFocus:U,handleBlur:G}=XO(N,{afterBlur(){var Z;r.validateEvent&&((Z=d==null?void 0:d.validate)==null||Z.call(d,"blur").catch(ne=>void 0))}}),R=ve(()=>{var Z;return(Z=u==null?void 0:u.statusIcon)!=null?Z:!1}),v=ve(()=>(d==null?void 0:d.validateState)||""),_=ve(()=>v.value&&oN[v.value]),b=ve(()=>C.value?aN:lN),A=ve(()=>[i.style,r.inputStyle]),T=ve(()=>[r.inputStyle,F.value,{resize:r.resize}]),D=ve(()=>h0(r.modelValue)?"":String(r.modelValue)),V=ve(()=>r.clearable&&!m.value&&!r.readonly&&!!D.value&&(I.value||M.value)),O=ve(()=>r.showPassword&&!m.value&&!r.readonly&&!!D.value&&(!!D.value||I.value)),x=ve(()=>r.showWordLimit&&!!c.value.maxlength&&(r.type==="text"||r.type==="textarea")&&!m.value&&!r.readonly&&!r.showPassword),$=ve(()=>D.value.length),K=ve(()=>!!x.value&&$.value>Number(c.value.maxlength)),E=ve(()=>!!s.suffix||!!r.suffixIcon||V.value||r.showPassword||x.value||!!v.value&&R.value),[Y,j]=qO(h);fT(w,Z=>{if(le(),!x.value||r.resize!=="both")return;const ne=Z[0],{width:ye}=ne.contentRect;k.value={right:`calc(100% - ${ye+15+6}px)`}});const X=()=>{const{type:Z,autosize:ne}=r;if(!(!gi||Z!=="textarea"||!w.value))if(ne){const ye=lu(ne)?ne.minRows:void 0,Ce=lu(ne)?ne.maxRows:void 0,Ee=uA(w.value,ye,Ce);F.value={overflowY:"hidden",...Ee},Tn(()=>{w.value.offsetHeight,F.value=Ee})}else F.value={minHeight:uA(w.value).minHeight}},le=(Z=>{let ne=!1;return()=>{var ye;if(ne||!r.autosize)return;((ye=w.value)==null?void 0:ye.offsetParent)===null||(Z(),ne=!0)}})(X),me=()=>{const Z=N.value,ne=r.formatter?r.formatter(D.value):D.value;!Z||Z.value===ne||(Z.value=ne)},he=async Z=>{Y();let{value:ne}=Z.target;if(r.formatter&&(ne=r.parser?r.parser(ne):ne),!S.value){if(ne===D.value){me();return}t(Ho,ne),t("input",ne),await Tn(),me(),j()}},je=Z=>{t("change",Z.target.value)},q=Z=>{t("compositionstart",Z),S.value=!0},ze=Z=>{var ne;t("compositionupdate",Z);const ye=(ne=Z.target)==null?void 0:ne.value,Ce=ye[ye.length-1]||"";S.value=!MD(Ce)},Qe=Z=>{t("compositionend",Z),S.value&&(S.value=!1,he(Z))},We=()=>{C.value=!C.value,Pe()},Pe=async()=>{var Z;await Tn(),(Z=N.value)==null||Z.focus()},Nt=()=>{var Z;return(Z=N.value)==null?void 0:Z.blur()},Me=Z=>{M.value=!1,t("mouseleave",Z)},W=Z=>{M.value=!0,t("mouseenter",Z)},H=Z=>{t("keydown",Z)},te=()=>{var Z;(Z=N.value)==null||Z.select()},de=()=>{t(Ho,""),t("change",""),t("clear"),t("input","")};return Ct(()=>r.modelValue,()=>{var Z;Tn(()=>X()),r.validateEvent&&((Z=d==null?void 0:d.validate)==null||Z.call(d,"change").catch(ne=>void 0))}),Ct(D,()=>me()),Ct(()=>r.type,async()=>{await Tn(),me(),X()}),En(()=>{!r.formatter&&r.parser,me(),Tn(X)}),e({input:h,textarea:w,ref:N,textareaStyle:T,autosize:Fs(r,"autosize"),focus:Pe,blur:Nt,select:te,clear:de,resizeTextarea:X}),(Z,ne)=>vr((ge(),Se("div",Ia(P(o),{class:P(a),style:P(A),role:Z.containerRole,onMouseenter:W,onMouseleave:Me}),[St(" input "),Z.type!=="textarea"?(ge(),Se(mr,{key:0},[St(" prepend slot "),Z.$slots.prepend?(ge(),Se("div",{key:0,class:qe(P(g).be("group","prepend"))},[nn(Z.$slots,"prepend")],2)):St("v-if",!0),L("div",{ref_key:"wrapperRef",ref:B,class:qe(P(l))},[St(" prefix slot "),Z.$slots.prefix||Z.prefixIcon?(ge(),Se("span",{key:0,class:qe(P(g).e("prefix"))},[L("span",{class:qe(P(g).e("prefix-inner"))},[nn(Z.$slots,"prefix"),Z.prefixIcon?(ge(),cn(P(Aa),{key:0,class:qe(P(g).e("icon"))},{default:He(()=>[(ge(),cn(ns(Z.prefixIcon)))]),_:1},8,["class"])):St("v-if",!0)],2)],2)):St("v-if",!0),L("input",Ia({id:P(f),ref_key:"input",ref:h,class:P(g).e("inner")},P(c),{type:Z.showPassword?C.value?"text":"password":Z.type,disabled:P(m),formatter:Z.formatter,parser:Z.parser,readonly:Z.readonly,autocomplete:Z.autocomplete,tabindex:Z.tabindex,"aria-label":Z.label,placeholder:Z.placeholder,style:Z.inputStyle,form:r.form,onCompositionstart:q,onCompositionupdate:ze,onCompositionend:Qe,onInput:he,onFocus:ne[0]||(ne[0]=(...ye)=>P(U)&&P(U)(...ye)),onBlur:ne[1]||(ne[1]=(...ye)=>P(G)&&P(G)(...ye)),onChange:je,onKeydown:H}),null,16,qF),St(" suffix slot "),P(E)?(ge(),Se("span",{key:1,class:qe(P(g).e("suffix"))},[L("span",{class:qe(P(g).e("suffix-inner"))},[!P(V)||!P(O)||!P(x)?(ge(),Se(mr,{key:0},[nn(Z.$slots,"suffix"),Z.suffixIcon?(ge(),cn(P(Aa),{key:0,class:qe(P(g).e("icon"))},{default:He(()=>[(ge(),cn(ns(Z.suffixIcon)))]),_:1},8,["class"])):St("v-if",!0)],64)):St("v-if",!0),P(V)?(ge(),cn(P(Aa),{key:1,class:qe([P(g).e("icon"),P(g).e("clear")]),onMousedown:uN(P(El),["prevent"]),onClick:de},{default:He(()=>[ke(P(cN))]),_:1},8,["class","onMousedown"])):St("v-if",!0),P(O)?(ge(),cn(P(Aa),{key:2,class:qe([P(g).e("icon"),P(g).e("password")]),onClick:We},{default:He(()=>[(ge(),cn(ns(P(b))))]),_:1},8,["class"])):St("v-if",!0),P(x)?(ge(),Se("span",{key:3,class:qe(P(g).e("count"))},[L("span",{class:qe(P(g).e("count-inner"))},Ze(P($))+" / "+Ze(P(c).maxlength),3)],2)):St("v-if",!0),P(v)&&P(_)&&P(R)?(ge(),cn(P(Aa),{key:4,class:qe([P(g).e("icon"),P(g).e("validateIcon"),P(g).is("loading",P(v)==="validating")])},{default:He(()=>[(ge(),cn(ns(P(_))))]),_:1},8,["class"])):St("v-if",!0)],2)],2)):St("v-if",!0)],2),St(" append slot "),Z.$slots.append?(ge(),Se("div",{key:1,class:qe(P(g).be("group","append"))},[nn(Z.$slots,"append")],2)):St("v-if",!0)],64)):(ge(),Se(mr,{key:1},[St(" textarea "),L("textarea",Ia({id:P(f),ref_key:"textarea",ref:w,class:P(y).e("inner")},P(c),{tabindex:Z.tabindex,disabled:P(m),readonly:Z.readonly,autocomplete:Z.autocomplete,style:P(T),"aria-label":Z.label,placeholder:Z.placeholder,form:r.form,onCompositionstart:q,onCompositionupdate:ze,onCompositionend:Qe,onInput:he,onFocus:ne[2]||(ne[2]=(...ye)=>P(U)&&P(U)(...ye)),onBlur:ne[3]||(ne[3]=(...ye)=>P(G)&&P(G)(...ye)),onChange:je,onKeydown:H}),null,16,XF),P(x)?(ge(),Se("span",{key:0,style:yi(k.value),class:qe(P(g).e("count"))},Ze(P($))+" / "+Ze(P(c).maxlength),7)):St("v-if",!0)],64))],16,WF)),[[u0,Z.type!=="hidden"]])}});var QF=ur(YF,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const c2=Zl(QF),Ab=Symbol("popper"),u2=Symbol("popperContent"),ZF=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],d2=cr({role:{type:String,values:ZF,default:"tooltip"}}),JF=tt({name:"ElPopper",inheritAttrs:!1}),eU=tt({...JF,props:d2,setup(n,{expose:e}){const t=n,r=fe(),i=fe(),s=fe(),o=fe(),a=ve(()=>t.role),l={triggerRef:r,popperInstanceRef:i,contentRef:s,referenceRef:o,role:a};return e(l),cs(Ab,l),(c,u)=>nn(c.$slots,"default")}});var tU=ur(eU,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/popper.vue"]]);const f2=cr({arrowOffset:{type:Number,default:5}}),nU=tt({name:"ElPopperArrow",inheritAttrs:!1}),rU=tt({...nU,props:f2,setup(n,{expose:e}){const t=n,r=Jn("popper"),{arrowOffset:i,arrowRef:s,arrowStyle:o}=Mn(u2,void 0);return Ct(()=>t.arrowOffset,a=>{i.value=a}),Hr(()=>{s.value=void 0}),e({arrowRef:s}),(a,l)=>(ge(),Se("span",{ref_key:"arrowRef",ref:s,class:qe(P(r).e("arrow")),style:yi(P(o)),"data-popper-arrow":""},null,6))}});var iU=ur(rU,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/arrow.vue"]]);const sU="ElOnlyChild",oU=tt({name:sU,setup(n,{slots:e,attrs:t}){var r;const i=Mn(i2),s=WO((r=i==null?void 0:i.setForwardRef)!=null?r:El);return()=>{var o;const a=(o=e.default)==null?void 0:o.call(e,t);if(!a||a.length>1)return null;const l=h2(a);return l?vr(dN(l,t),[[s]]):null}}});function h2(n){if(!n)return null;const e=n;for(const t of e){if(lu(t))switch(t.type){case fN:continue;case hT:case"svg":return dA(t);case mr:return h2(t.children);default:return t}return dA(t)}return null}function dA(n){const e=Jn("only-child");return ke("span",{class:e.e("content")},[n])}const p2=cr({virtualRef:{type:Yt(Object)},virtualTriggering:Boolean,onMouseenter:{type:Yt(Function)},onMouseleave:{type:Yt(Function)},onClick:{type:Yt(Function)},onKeydown:{type:Yt(Function)},onFocus:{type:Yt(Function)},onBlur:{type:Yt(Function)},onContextmenu:{type:Yt(Function)},id:String,open:Boolean}),aU=tt({name:"ElPopperTrigger",inheritAttrs:!1}),lU=tt({...aU,props:p2,setup(n,{expose:e}){const t=n,{role:r,triggerRef:i}=Mn(Ab,void 0);jO(i);const s=ve(()=>a.value?t.id:void 0),o=ve(()=>{if(r&&r.value==="tooltip")return t.open&&t.id?t.id:void 0}),a=ve(()=>{if(r&&r.value!=="tooltip")return r.value}),l=ve(()=>a.value?`${t.open}`:void 0);let c;return En(()=>{Ct(()=>t.virtualRef,u=>{u&&(i.value=pT(u))},{immediate:!0}),Ct(i,(u,d)=>{c==null||c(),c=void 0,Hp(u)&&(["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(f=>{var p;const m=t[f];m&&(u.addEventListener(f.slice(2).toLowerCase(),m),(p=d==null?void 0:d.removeEventListener)==null||p.call(d,f.slice(2).toLowerCase(),m))}),c=Ct([s,o,a,l],f=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((p,m)=>{h0(f[m])?u.removeAttribute(p):u.setAttribute(p,f[m])})},{immediate:!0})),Hp(d)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(f=>d.removeAttribute(f))},{immediate:!0})}),Hr(()=>{c==null||c(),c=void 0}),e({triggerRef:i}),(u,d)=>u.virtualTriggering?St("v-if",!0):(ge(),cn(P(oU),Ia({key:0},u.$attrs,{"aria-controls":P(s),"aria-describedby":P(o),"aria-expanded":P(l),"aria-haspopup":P(a)}),{default:He(()=>[nn(u.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var cU=ur(lU,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/trigger.vue"]]);const _g="focus-trap.focus-after-trapped",bg="focus-trap.focus-after-released",uU="focus-trap.focusout-prevented",fA={cancelable:!0,bubbles:!1},dU={cancelable:!0,bubbles:!1},hA="focusAfterTrapped",pA="focusAfterReleased",m2=Symbol("elFocusTrap"),Eb=fe(),g0=fe(0),Sb=fe(0);let bh=0;const g2=n=>{const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0||r===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e},mA=(n,e)=>{for(const t of n)if(!fU(t,e))return t},fU=(n,e)=>{if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1},hU=n=>{const e=g2(n),t=mA(e,n),r=mA(e.reverse(),n);return[t,r]},pU=n=>n instanceof HTMLInputElement&&"select"in n,_a=(n,e)=>{if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),Sb.value=window.performance.now(),n!==t&&pU(n)&&e&&n.select()}};function gA(n,e){const t=[...n],r=n.indexOf(e);return r!==-1&&t.splice(r,1),t}const mU=()=>{let n=[];return{push:r=>{const i=n[0];i&&r!==i&&i.pause(),n=gA(n,r),n.unshift(r)},remove:r=>{var i,s;n=gA(n,r),(s=(i=n[0])==null?void 0:i.resume)==null||s.call(i)}}},gU=(n,e=!1)=>{const t=document.activeElement;for(const r of n)if(_a(r,e),document.activeElement!==t)return},vA=mU(),vU=()=>g0.value>Sb.value,xh=()=>{Eb.value="pointer",g0.value=window.performance.now()},yA=()=>{Eb.value="keyboard",g0.value=window.performance.now()},yU=()=>(En(()=>{bh===0&&(document.addEventListener("mousedown",xh),document.addEventListener("touchstart",xh),document.addEventListener("keydown",yA)),bh++}),Hr(()=>{bh--,bh<=0&&(document.removeEventListener("mousedown",xh),document.removeEventListener("touchstart",xh),document.removeEventListener("keydown",yA))}),{focusReason:Eb,lastUserFocusTimestamp:g0,lastAutomatedFocusTimestamp:Sb}),wh=n=>new CustomEvent(uU,{...dU,detail:n}),_U=tt({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[hA,pA,"focusin","focusout","focusout-prevented","release-requested"],setup(n,{emit:e}){const t=fe();let r,i;const{focusReason:s}=yU();HO(m=>{n.trapped&&!o.paused&&e("release-requested",m)});const o={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},a=m=>{if(!n.loop&&!n.trapped||o.paused)return;const{key:g,altKey:y,ctrlKey:h,metaKey:w,currentTarget:M,shiftKey:S}=m,{loop:C}=n,k=g===Up.tab&&!y&&!h&&!w,F=document.activeElement;if(k&&F){const N=M,[B,I]=hU(N);if(B&&I){if(!S&&F===I){const G=wh({focusReason:s.value});e("focusout-prevented",G),G.defaultPrevented||(m.preventDefault(),C&&_a(B,!0))}else if(S&&[B,N].includes(F)){const G=wh({focusReason:s.value});e("focusout-prevented",G),G.defaultPrevented||(m.preventDefault(),C&&_a(I,!0))}}else if(F===N){const G=wh({focusReason:s.value});e("focusout-prevented",G),G.defaultPrevented||m.preventDefault()}}};cs(m2,{focusTrapRef:t,onKeydown:a}),Ct(()=>n.focusTrapEl,m=>{m&&(t.value=m)},{immediate:!0}),Ct([t],([m],[g])=>{m&&(m.addEventListener("keydown",a),m.addEventListener("focusin",u),m.addEventListener("focusout",d)),g&&(g.removeEventListener("keydown",a),g.removeEventListener("focusin",u),g.removeEventListener("focusout",d))});const l=m=>{e(hA,m)},c=m=>e(pA,m),u=m=>{const g=P(t);if(!g)return;const y=m.target,h=m.relatedTarget,w=y&&g.contains(y);n.trapped||h&&g.contains(h)||(r=h),w&&e("focusin",m),!o.paused&&n.trapped&&(w?i=y:_a(i,!0))},d=m=>{const g=P(t);if(!(o.paused||!g))if(n.trapped){const y=m.relatedTarget;!h0(y)&&!g.contains(y)&&setTimeout(()=>{if(!o.paused&&n.trapped){const h=wh({focusReason:s.value});e("focusout-prevented",h),h.defaultPrevented||_a(i,!0)}},0)}else{const y=m.target;y&&g.contains(y)||e("focusout",m)}};async function f(){await Tn();const m=P(t);if(m){vA.push(o);const g=m.contains(document.activeElement)?r:document.activeElement;if(r=g,!m.contains(g)){const h=new Event(_g,fA);m.addEventListener(_g,l),m.dispatchEvent(h),h.defaultPrevented||Tn(()=>{let w=n.focusStartEl;os(w)||(_a(w),document.activeElement!==w&&(w="first")),w==="first"&&gU(g2(m),!0),(document.activeElement===g||w==="container")&&_a(m)})}}}function p(){const m=P(t);if(m){m.removeEventListener(_g,l);const g=new CustomEvent(bg,{...fA,detail:{focusReason:s.value}});m.addEventListener(bg,c),m.dispatchEvent(g),!g.defaultPrevented&&(s.value=="keyboard"||!vU()||m.contains(document.activeElement))&&_a(r??document.body),m.removeEventListener(bg,c),vA.remove(o)}}return En(()=>{n.trapped&&f(),Ct(()=>n.trapped,m=>{m?f():p()})}),Hr(()=>{n.trapped&&p()}),{onKeydown:a}}});function bU(n,e,t,r,i,s){return nn(n.$slots,"default",{handleKeydown:n.onKeydown})}var v2=ur(_U,[["render",bU],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);const xU=["fixed","absolute"],wU=cr({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:Yt(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:pb,default:"bottom"},popperOptions:{type:Yt(Object),default:()=>({})},strategy:{type:String,values:xU,default:"absolute"}}),y2=cr({...wU,id:String,style:{type:Yt([String,Array,Object])},className:{type:Yt([String,Array,Object])},effect:{type:String,default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:Yt([String,Array,Object])},popperStyle:{type:Yt([String,Array,Object])},referenceEl:{type:Yt(Object)},triggerTargetEl:{type:Yt(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},ariaLabel:{type:String,default:void 0},virtualTriggering:Boolean,zIndex:Number}),AU={mouseenter:n=>n instanceof MouseEvent,mouseleave:n=>n instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},EU=(n,e=[])=>{const{placement:t,strategy:r,popperOptions:i}=n,s={placement:t,strategy:r,...i,modifiers:[...TU(n),...e]};return MU(s,i==null?void 0:i.modifiers),s},SU=n=>{if(gi)return pT(n)};function TU(n){const{offset:e,gpuAcceleration:t,fallbackPlacements:r}=n;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:r}},{name:"computeStyles",options:{gpuAcceleration:t}}]}function MU(n,e){e&&(n.modifiers=[...n.modifiers,...e??[]])}const RU=0,IU=n=>{const{popperInstanceRef:e,contentRef:t,triggerRef:r,role:i}=Mn(Ab,void 0),s=fe(),o=fe(),a=ve(()=>({name:"eventListeners",enabled:!!n.visible})),l=ve(()=>{var h;const w=P(s),M=(h=P(o))!=null?h:RU;return{name:"arrow",enabled:!_D(w),options:{element:w,padding:M}}}),c=ve(()=>({onFirstUpdate:()=>{m()},...EU(n,[P(l),P(a)])})),u=ve(()=>SU(n.referenceEl)||P(r)),{attributes:d,state:f,styles:p,update:m,forceUpdate:g,instanceRef:y}=OO(u,t,c);return Ct(y,h=>e.value=h),En(()=>{Ct(()=>{var h;return(h=P(u))==null?void 0:h.getBoundingClientRect()},()=>{m()})}),{attributes:d,arrowRef:s,contentRef:t,instanceRef:y,state:f,styles:p,role:i,forceUpdate:g,update:m}},CU=(n,{attributes:e,styles:t,role:r})=>{const{nextZIndex:i}=mT(),s=Jn("popper"),o=ve(()=>P(e).popper),a=fe(n.zIndex||i()),l=ve(()=>[s.b(),s.is("pure",n.pure),s.is(n.effect),n.popperClass]),c=ve(()=>[{zIndex:P(a)},P(t).popper,n.popperStyle||{}]),u=ve(()=>r.value==="dialog"?"false":void 0),d=ve(()=>P(t).arrow||{});return{ariaModal:u,arrowStyle:d,contentAttrs:o,contentClass:l,contentStyle:c,contentZIndex:a,updateZIndex:()=>{a.value=n.zIndex||i()}}},PU=(n,e)=>{const t=fe(!1),r=fe();return{focusStartRef:r,trapped:t,onFocusAfterReleased:c=>{var u;((u=c.detail)==null?void 0:u.focusReason)!=="pointer"&&(r.value="first",e("blur"))},onFocusAfterTrapped:()=>{e("focus")},onFocusInTrap:c=>{n.visible&&!t.value&&(c.target&&(r.value=c.target),t.value=!0)},onFocusoutPrevented:c=>{n.trapping||(c.detail.focusReason==="pointer"&&c.preventDefault(),t.value=!1)},onReleaseRequested:()=>{t.value=!1,e("close")}}},NU=tt({name:"ElPopperContent"}),kU=tt({...NU,props:y2,emits:AU,setup(n,{expose:e,emit:t}){const r=n,{focusStartRef:i,trapped:s,onFocusAfterReleased:o,onFocusAfterTrapped:a,onFocusInTrap:l,onFocusoutPrevented:c,onReleaseRequested:u}=PU(r,t),{attributes:d,arrowRef:f,contentRef:p,styles:m,instanceRef:g,role:y,update:h}=IU(r),{ariaModal:w,arrowStyle:M,contentAttrs:S,contentClass:C,contentStyle:k,updateZIndex:F}=CU(r,{styles:m,attributes:d,role:y}),N=Mn(kl,void 0),B=fe();cs(u2,{arrowStyle:M,arrowRef:f,arrowOffset:B}),N&&(N.addInputId||N.removeInputId)&&cs(kl,{...N,addInputId:El,removeInputId:El});let I;const U=(R=!0)=>{h(),R&&F()},G=()=>{U(!1),r.visible&&r.focusOnShow?s.value=!0:r.visible===!1&&(s.value=!1)};return En(()=>{Ct(()=>r.triggerTargetEl,(R,v)=>{I==null||I(),I=void 0;const _=P(R||p.value),b=P(v||p.value);Hp(_)&&(I=Ct([y,()=>r.ariaLabel,w,()=>r.id],A=>{["role","aria-label","aria-modal","id"].forEach((T,D)=>{h0(A[D])?_.removeAttribute(T):_.setAttribute(T,A[D])})},{immediate:!0})),b!==_&&Hp(b)&&["role","aria-label","aria-modal","id"].forEach(A=>{b.removeAttribute(A)})},{immediate:!0}),Ct(()=>r.visible,G,{immediate:!0})}),Hr(()=>{I==null||I(),I=void 0}),e({popperContentRef:p,popperInstanceRef:g,updatePopper:U,contentStyle:k}),(R,v)=>(ge(),Se("div",Ia({ref_key:"contentRef",ref:p},P(S),{style:P(k),class:P(C),tabindex:"-1",onMouseenter:v[0]||(v[0]=_=>R.$emit("mouseenter",_)),onMouseleave:v[1]||(v[1]=_=>R.$emit("mouseleave",_))}),[ke(P(v2),{trapped:P(s),"trap-on-focus-in":!0,"focus-trap-el":P(p),"focus-start-el":P(i),onFocusAfterTrapped:P(a),onFocusAfterReleased:P(o),onFocusin:P(l),onFocusoutPrevented:P(c),onReleaseRequested:P(u)},{default:He(()=>[nn(R.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16))}});var BU=ur(kU,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/content.vue"]]);const LU=Zl(tU),Tb=Symbol("elTooltip"),_2=cr({...VO,...y2,appendTo:{type:Yt([String,Object])},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:Yt(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean}),b2=cr({...p2,disabled:Boolean,trigger:{type:Yt([String,Array]),default:"hover"},triggerKeys:{type:Yt(Array),default:()=>[Up.enter,Up.space]}}),{useModelToggleProps:DU,useModelToggleEmits:OU,useModelToggle:FU}=GT("visible"),UU=cr({...d2,...DU,..._2,...b2,...f2,showArrow:{type:Boolean,default:!0}}),HU=[...OU,"before-show","before-hide","show","hide","open","close"],zU=(n,e)=>Nl(n)?n.includes(e):n===e,ac=(n,e,t)=>r=>{zU(P(n),e)&&t(r)},GU=tt({name:"ElTooltipTrigger"}),VU=tt({...GU,props:b2,setup(n,{expose:e}){const t=n,r=Jn("tooltip"),{controlled:i,id:s,open:o,onOpen:a,onClose:l,onToggle:c}=Mn(Tb,void 0),u=fe(null),d=()=>{if(P(i)||t.disabled)return!0},f=Fs(t,"trigger"),p=bo(d,ac(f,"hover",a)),m=bo(d,ac(f,"hover",l)),g=bo(d,ac(f,"click",S=>{S.button===0&&c(S)})),y=bo(d,ac(f,"focus",a)),h=bo(d,ac(f,"focus",l)),w=bo(d,ac(f,"contextmenu",S=>{S.preventDefault(),c(S)})),M=bo(d,S=>{const{code:C}=S;t.triggerKeys.includes(C)&&(S.preventDefault(),c(S))});return e({triggerRef:u}),(S,C)=>(ge(),cn(P(cU),{id:P(s),"virtual-ref":S.virtualRef,open:P(o),"virtual-triggering":S.virtualTriggering,class:qe(P(r).e("trigger")),onBlur:P(h),onClick:P(g),onContextmenu:P(w),onFocus:P(y),onMouseenter:P(p),onMouseleave:P(m),onKeydown:P(M)},{default:He(()=>[nn(S.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var $U=ur(VU,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/trigger.vue"]]);const jU=tt({name:"ElTooltipContent",inheritAttrs:!1}),WU=tt({...jU,props:_2,setup(n,{expose:e}){const t=n,{selector:r}=r2(),i=Jn("tooltip"),s=fe(null),o=fe(!1),{controlled:a,id:l,open:c,trigger:u,onClose:d,onOpen:f,onShow:p,onHide:m,onBeforeShow:g,onBeforeHide:y}=Mn(Tb,void 0),h=ve(()=>t.transition||`${i.namespace.value}-fade-in-linear`),w=ve(()=>t.persistent);Hr(()=>{o.value=!0});const M=ve(()=>P(w)?!0:P(c)),S=ve(()=>t.disabled?!1:P(c)),C=ve(()=>t.appendTo||r.value),k=ve(()=>{var A;return(A=t.style)!=null?A:{}}),F=ve(()=>!P(c)),N=()=>{m()},B=()=>{if(P(a))return!0},I=bo(B,()=>{t.enterable&&P(u)==="hover"&&f()}),U=bo(B,()=>{P(u)==="hover"&&d()}),G=()=>{var A,T;(T=(A=s.value)==null?void 0:A.updatePopper)==null||T.call(A),g==null||g()},R=()=>{y==null||y()},v=()=>{p(),b=hN(ve(()=>{var A;return(A=s.value)==null?void 0:A.popperContentRef}),()=>{if(P(a))return;P(u)!=="hover"&&d()})},_=()=>{t.virtualTriggering||d()};let b;return Ct(()=>P(c),A=>{A||b==null||b()},{flush:"post"}),Ct(()=>t.content,()=>{var A,T;(T=(A=s.value)==null?void 0:A.updatePopper)==null||T.call(A)}),e({contentRef:s}),(A,T)=>(ge(),cn(gT,{disabled:!A.teleported,to:P(C)},[ke(nb,{name:P(h),onAfterLeave:N,onBeforeEnter:G,onAfterEnter:v,onBeforeLeave:R},{default:He(()=>[P(M)?vr((ge(),cn(P(BU),Ia({key:0,id:P(l),ref_key:"contentRef",ref:s},A.$attrs,{"aria-label":A.ariaLabel,"aria-hidden":P(F),"boundaries-padding":A.boundariesPadding,"fallback-placements":A.fallbackPlacements,"gpu-acceleration":A.gpuAcceleration,offset:A.offset,placement:A.placement,"popper-options":A.popperOptions,strategy:A.strategy,effect:A.effect,enterable:A.enterable,pure:A.pure,"popper-class":A.popperClass,"popper-style":[A.popperStyle,P(k)],"reference-el":A.referenceEl,"trigger-target-el":A.triggerTargetEl,visible:P(S),"z-index":A.zIndex,onMouseenter:P(I),onMouseleave:P(U),onBlur:_,onClose:P(d)}),{default:He(()=>[o.value?St("v-if",!0):nn(A.$slots,"default",{key:0})]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[u0,P(S)]]):St("v-if",!0)]),_:3},8,["name"])],8,["disabled","to"]))}});var qU=ur(WU,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/content.vue"]]);const XU=["innerHTML"],KU={key:1},YU=tt({name:"ElTooltip"}),QU=tt({...YU,props:UU,emits:HU,setup(n,{expose:e,emit:t}){const r=n;GO();const i=af(),s=fe(),o=fe(),a=()=>{var h;const w=P(s);w&&((h=w.popperInstanceRef)==null||h.update())},l=fe(!1),c=fe(),{show:u,hide:d,hasUpdateHandler:f}=FU({indicator:l,toggleReason:c}),{onOpen:p,onClose:m}=$O({showAfter:Fs(r,"showAfter"),hideAfter:Fs(r,"hideAfter"),autoClose:Fs(r,"autoClose"),open:u,close:d}),g=ve(()=>La(r.visible)&&!f.value);cs(Tb,{controlled:g,id:i,open:pN(l),trigger:Fs(r,"trigger"),onOpen:h=>{p(h)},onClose:h=>{m(h)},onToggle:h=>{P(l)?m(h):p(h)},onShow:()=>{t("show",c.value)},onHide:()=>{t("hide",c.value)},onBeforeShow:()=>{t("before-show",c.value)},onBeforeHide:()=>{t("before-hide",c.value)},updatePopper:a}),Ct(()=>r.disabled,h=>{h&&l.value&&(l.value=!1)});const y=h=>{var w,M;const S=(M=(w=o.value)==null?void 0:w.contentRef)==null?void 0:M.popperContentRef,C=(h==null?void 0:h.relatedTarget)||document.activeElement;return S&&S.contains(C)};return mN(()=>l.value&&d()),e({popperRef:s,contentRef:o,isFocusInsideContent:y,updatePopper:a,onOpen:p,onClose:m,hide:d}),(h,w)=>(ge(),cn(P(LU),{ref_key:"popperRef",ref:s,role:h.role},{default:He(()=>[ke($U,{disabled:h.disabled,trigger:h.trigger,"trigger-keys":h.triggerKeys,"virtual-ref":h.virtualRef,"virtual-triggering":h.virtualTriggering},{default:He(()=>[h.$slots.default?nn(h.$slots,"default",{key:0}):St("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),ke(qU,{ref_key:"contentRef",ref:o,"aria-label":h.ariaLabel,"boundaries-padding":h.boundariesPadding,content:h.content,disabled:h.disabled,effect:h.effect,enterable:h.enterable,"fallback-placements":h.fallbackPlacements,"hide-after":h.hideAfter,"gpu-acceleration":h.gpuAcceleration,offset:h.offset,persistent:h.persistent,"popper-class":h.popperClass,"popper-style":h.popperStyle,placement:h.placement,"popper-options":h.popperOptions,pure:h.pure,"raw-content":h.rawContent,"reference-el":h.referenceEl,"trigger-target-el":h.triggerTargetEl,"show-after":h.showAfter,strategy:h.strategy,teleported:h.teleported,transition:h.transition,"virtual-triggering":h.virtualTriggering,"z-index":h.zIndex,"append-to":h.appendTo},{default:He(()=>[nn(h.$slots,"content",{},()=>[h.rawContent?(ge(),Se("span",{key:0,innerHTML:h.content},null,8,XU)):(ge(),Se("span",KU,Ze(h.content),1))]),h.showArrow?(ge(),cn(P(iU),{key:0,"arrow-offset":h.arrowOffset},null,8,["arrow-offset"])):St("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var ZU=ur(QU,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/tooltip.vue"]]);const x2=Zl(ZU),w2=Symbol("buttonGroupContextKey"),JU=(n,e)=>{sy({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},ve(()=>n.type==="text"));const t=Mn(w2,void 0),r=vT("button"),{form:i}=qf(),s=mu(ve(()=>t==null?void 0:t.size)),o=m0(),a=fe(),l=Xu(),c=ve(()=>n.type||(t==null?void 0:t.type)||""),u=ve(()=>{var m,g,y;return(y=(g=n.autoInsertSpace)!=null?g:(m=r.value)==null?void 0:m.autoInsertSpace)!=null?y:!1}),d=ve(()=>n.tag==="button"?{ariaDisabled:o.value||n.loading,disabled:o.value||n.loading,autofocus:n.autofocus,type:n.nativeType}:{}),f=ve(()=>{var m;const g=(m=l.default)==null?void 0:m.call(l);if(u.value&&(g==null?void 0:g.length)===1){const y=g[0];if((y==null?void 0:y.type)===hT){const h=y.children;return/^\p{Unified_Ideograph}{2}$/u.test(h.trim())}}return!1});return{_disabled:o,_size:s,_type:c,_ref:a,_props:d,shouldAddSpace:f,handleClick:m=>{n.nativeType==="reset"&&(i==null||i.resetFields()),e("click",m)}}},e5=["default","primary","success","warning","info","danger","text",""],t5=["button","submit","reset"],fy=cr({size:c0,disabled:Boolean,type:{type:String,values:e5,default:""},icon:{type:nf},nativeType:{type:String,values:t5,default:"button"},loading:Boolean,loadingIcon:{type:nf,default:()=>gN},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:Yt([String,Object]),default:"button"}}),n5={click:n=>n instanceof MouseEvent};function gr(n,e){r5(n)&&(n="100%");var t=i5(n);return n=e===360?n:Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(String(n*e),10)/100),Math.abs(n-e)<1e-6?1:(e===360?n=(n<0?n%e+e:n%e)/parseFloat(String(e)):n=n%e/parseFloat(String(e)),n)}function Ah(n){return Math.min(1,Math.max(0,n))}function r5(n){return typeof n=="string"&&n.indexOf(".")!==-1&&parseFloat(n)===1}function i5(n){return typeof n=="string"&&n.indexOf("%")!==-1}function A2(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function Eh(n){return n<=1?"".concat(Number(n)*100,"%"):n}function gl(n){return n.length===1?"0"+n:String(n)}function s5(n,e,t){return{r:gr(n,255)*255,g:gr(e,255)*255,b:gr(t,255)*255}}function _A(n,e,t){n=gr(n,255),e=gr(e,255),t=gr(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),s=0,o=0,a=(r+i)/2;if(r===i)o=0,s=0;else{var l=r-i;switch(o=a>.5?l/(2-r-i):l/(r+i),r){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4;break}s/=6}return{h:s,s:o,l:a}}function xg(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*(6*t):t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function o5(n,e,t){var r,i,s;if(n=gr(n,360),e=gr(e,100),t=gr(t,100),e===0)i=t,s=t,r=t;else{var o=t<.5?t*(1+e):t+e-t*e,a=2*t-o;r=xg(a,o,n+1/3),i=xg(a,o,n),s=xg(a,o,n-1/3)}return{r:r*255,g:i*255,b:s*255}}function bA(n,e,t){n=gr(n,255),e=gr(e,255),t=gr(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),s=0,o=r,a=r-i,l=r===0?0:a/r;if(r===i)s=0;else{switch(r){case n:s=(e-t)/a+(e<t?6:0);break;case e:s=(t-n)/a+2;break;case t:s=(n-e)/a+4;break}s/=6}return{h:s,s:l,v:o}}function a5(n,e,t){n=gr(n,360)*6,e=gr(e,100),t=gr(t,100);var r=Math.floor(n),i=n-r,s=t*(1-e),o=t*(1-i*e),a=t*(1-(1-i)*e),l=r%6,c=[t,o,s,s,a,t][l],u=[a,t,t,o,s,s][l],d=[s,s,a,t,t,o][l];return{r:c*255,g:u*255,b:d*255}}function xA(n,e,t,r){var i=[gl(Math.round(n).toString(16)),gl(Math.round(e).toString(16)),gl(Math.round(t).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function l5(n,e,t,r,i){var s=[gl(Math.round(n).toString(16)),gl(Math.round(e).toString(16)),gl(Math.round(t).toString(16)),gl(c5(r))];return i&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function c5(n){return Math.round(parseFloat(n)*255).toString(16)}function wA(n){return ci(n)/255}function ci(n){return parseInt(n,16)}function u5(n){return{r:n>>16,g:(n&65280)>>8,b:n&255}}var hy={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function d5(n){var e={r:0,g:0,b:0},t=1,r=null,i=null,s=null,o=!1,a=!1;return typeof n=="string"&&(n=p5(n)),typeof n=="object"&&(oo(n.r)&&oo(n.g)&&oo(n.b)?(e=s5(n.r,n.g,n.b),o=!0,a=String(n.r).substr(-1)==="%"?"prgb":"rgb"):oo(n.h)&&oo(n.s)&&oo(n.v)?(r=Eh(n.s),i=Eh(n.v),e=a5(n.h,r,i),o=!0,a="hsv"):oo(n.h)&&oo(n.s)&&oo(n.l)&&(r=Eh(n.s),s=Eh(n.l),e=o5(n.h,r,s),o=!0,a="hsl"),Object.prototype.hasOwnProperty.call(n,"a")&&(t=n.a)),t=A2(t),{ok:o,format:n.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}var f5="[-\\+]?\\d+%?",h5="[-\\+]?\\d*\\.\\d+%?",Ta="(?:".concat(h5,")|(?:").concat(f5,")"),wg="[\\s|\\(]+(".concat(Ta,")[,|\\s]+(").concat(Ta,")[,|\\s]+(").concat(Ta,")\\s*\\)?"),Ag="[\\s|\\(]+(".concat(Ta,")[,|\\s]+(").concat(Ta,")[,|\\s]+(").concat(Ta,")[,|\\s]+(").concat(Ta,")\\s*\\)?"),Qi={CSS_UNIT:new RegExp(Ta),rgb:new RegExp("rgb"+wg),rgba:new RegExp("rgba"+Ag),hsl:new RegExp("hsl"+wg),hsla:new RegExp("hsla"+Ag),hsv:new RegExp("hsv"+wg),hsva:new RegExp("hsva"+Ag),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function p5(n){if(n=n.trim().toLowerCase(),n.length===0)return!1;var e=!1;if(hy[n])n=hy[n],e=!0;else if(n==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t=Qi.rgb.exec(n);return t?{r:t[1],g:t[2],b:t[3]}:(t=Qi.rgba.exec(n),t?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Qi.hsl.exec(n),t?{h:t[1],s:t[2],l:t[3]}:(t=Qi.hsla.exec(n),t?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Qi.hsv.exec(n),t?{h:t[1],s:t[2],v:t[3]}:(t=Qi.hsva.exec(n),t?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Qi.hex8.exec(n),t?{r:ci(t[1]),g:ci(t[2]),b:ci(t[3]),a:wA(t[4]),format:e?"name":"hex8"}:(t=Qi.hex6.exec(n),t?{r:ci(t[1]),g:ci(t[2]),b:ci(t[3]),format:e?"name":"hex"}:(t=Qi.hex4.exec(n),t?{r:ci(t[1]+t[1]),g:ci(t[2]+t[2]),b:ci(t[3]+t[3]),a:wA(t[4]+t[4]),format:e?"name":"hex8"}:(t=Qi.hex3.exec(n),t?{r:ci(t[1]+t[1]),g:ci(t[2]+t[2]),b:ci(t[3]+t[3]),format:e?"name":"hex"}:!1)))))))))}function oo(n){return!!Qi.CSS_UNIT.exec(String(n))}var m5=function(){function n(e,t){e===void 0&&(e=""),t===void 0&&(t={});var r;if(e instanceof n)return e;typeof e=="number"&&(e=u5(e)),this.originalInput=e;var i=d5(e);this.originalInput=e,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=(r=t.format)!==null&&r!==void 0?r:i.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return n.prototype.isDark=function(){return this.getBrightness()<128},n.prototype.isLight=function(){return!this.isDark()},n.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},n.prototype.getLuminance=function(){var e=this.toRgb(),t,r,i,s=e.r/255,o=e.g/255,a=e.b/255;return s<=.03928?t=s/12.92:t=Math.pow((s+.055)/1.055,2.4),o<=.03928?r=o/12.92:r=Math.pow((o+.055)/1.055,2.4),a<=.03928?i=a/12.92:i=Math.pow((a+.055)/1.055,2.4),.2126*t+.7152*r+.0722*i},n.prototype.getAlpha=function(){return this.a},n.prototype.setAlpha=function(e){return this.a=A2(e),this.roundA=Math.round(100*this.a)/100,this},n.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},n.prototype.toHsv=function(){var e=bA(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},n.prototype.toHsvString=function(){var e=bA(this.r,this.g,this.b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this.a===1?"hsv(".concat(t,", ").concat(r,"%, ").concat(i,"%)"):"hsva(".concat(t,", ").concat(r,"%, ").concat(i,"%, ").concat(this.roundA,")")},n.prototype.toHsl=function(){var e=_A(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},n.prototype.toHslString=function(){var e=_A(this.r,this.g,this.b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this.a===1?"hsl(".concat(t,", ").concat(r,"%, ").concat(i,"%)"):"hsla(".concat(t,", ").concat(r,"%, ").concat(i,"%, ").concat(this.roundA,")")},n.prototype.toHex=function(e){return e===void 0&&(e=!1),xA(this.r,this.g,this.b,e)},n.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},n.prototype.toHex8=function(e){return e===void 0&&(e=!1),l5(this.r,this.g,this.b,this.a,e)},n.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},n.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},n.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},n.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),r=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(t,", ").concat(r,")"):"rgba(".concat(e,", ").concat(t,", ").concat(r,", ").concat(this.roundA,")")},n.prototype.toPercentageRgb=function(){var e=function(t){return"".concat(Math.round(gr(t,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},n.prototype.toPercentageRgbString=function(){var e=function(t){return Math.round(gr(t,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},n.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+xA(this.r,this.g,this.b,!1),t=0,r=Object.entries(hy);t<r.length;t++){var i=r[t],s=i[0],o=i[1];if(e===o)return s}return!1},n.prototype.toString=function(e){var t=!!e;e=e??this.format;var r=!1,i=this.a<1&&this.a>=0,s=!t&&i&&(e.startsWith("hex")||e==="name");return s?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},n.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},n.prototype.clone=function(){return new n(this.toString())},n.prototype.lighten=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l+=e/100,t.l=Ah(t.l),new n(t)},n.prototype.brighten=function(e){e===void 0&&(e=10);var t=this.toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),new n(t)},n.prototype.darken=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l-=e/100,t.l=Ah(t.l),new n(t)},n.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},n.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},n.prototype.desaturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s-=e/100,t.s=Ah(t.s),new n(t)},n.prototype.saturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s+=e/100,t.s=Ah(t.s),new n(t)},n.prototype.greyscale=function(){return this.desaturate(100)},n.prototype.spin=function(e){var t=this.toHsl(),r=(t.h+e)%360;return t.h=r<0?360+r:r,new n(t)},n.prototype.mix=function(e,t){t===void 0&&(t=50);var r=this.toRgb(),i=new n(e).toRgb(),s=t/100,o={r:(i.r-r.r)*s+r.r,g:(i.g-r.g)*s+r.g,b:(i.b-r.b)*s+r.b,a:(i.a-r.a)*s+r.a};return new n(o)},n.prototype.analogous=function(e,t){e===void 0&&(e=6),t===void 0&&(t=30);var r=this.toHsl(),i=360/t,s=[this];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,s.push(new n(r));return s},n.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new n(e)},n.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var t=this.toHsv(),r=t.h,i=t.s,s=t.v,o=[],a=1/e;e--;)o.push(new n({h:r,s:i,v:s})),s=(s+a)%1;return o},n.prototype.splitcomplement=function(){var e=this.toHsl(),t=e.h;return[this,new n({h:(t+72)%360,s:e.s,l:e.l}),new n({h:(t+216)%360,s:e.s,l:e.l})]},n.prototype.onBackground=function(e){var t=this.toRgb(),r=new n(e).toRgb(),i=t.a+r.a*(1-t.a);return new n({r:(t.r*t.a+r.r*r.a*(1-t.a))/i,g:(t.g*t.a+r.g*r.a*(1-t.a))/i,b:(t.b*t.a+r.b*r.a*(1-t.a))/i,a:i})},n.prototype.triad=function(){return this.polyad(3)},n.prototype.tetrad=function(){return this.polyad(4)},n.prototype.polyad=function(e){for(var t=this.toHsl(),r=t.h,i=[this],s=360/e,o=1;o<e;o++)i.push(new n({h:(r+o*s)%360,s:t.s,l:t.l}));return i},n.prototype.equals=function(e){return this.toRgbString()===new n(e).toRgbString()},n}();function oa(n,e=20){return n.mix("#141414",e).toString()}function g5(n){const e=m0(),t=Jn("button");return ve(()=>{let r={};const i=n.color;if(i){const s=new m5(i),o=n.dark?s.tint(20).toString():oa(s,20);if(n.plain)r=t.cssVarBlock({"bg-color":n.dark?oa(s,90):s.tint(90).toString(),"text-color":i,"border-color":n.dark?oa(s,50):s.tint(50).toString(),"hover-text-color":`var(${t.cssVarName("color-white")})`,"hover-bg-color":i,"hover-border-color":i,"active-bg-color":o,"active-text-color":`var(${t.cssVarName("color-white")})`,"active-border-color":o}),e.value&&(r[t.cssVarBlockName("disabled-bg-color")]=n.dark?oa(s,90):s.tint(90).toString(),r[t.cssVarBlockName("disabled-text-color")]=n.dark?oa(s,50):s.tint(50).toString(),r[t.cssVarBlockName("disabled-border-color")]=n.dark?oa(s,80):s.tint(80).toString());else{const a=n.dark?oa(s,30):s.tint(30).toString(),l=s.isDark()?`var(${t.cssVarName("color-white")})`:`var(${t.cssVarName("color-black")})`;if(r=t.cssVarBlock({"bg-color":i,"text-color":l,"border-color":i,"hover-bg-color":a,"hover-text-color":l,"hover-border-color":a,"active-bg-color":o,"active-border-color":o}),e.value){const c=n.dark?oa(s,50):s.tint(50).toString();r[t.cssVarBlockName("disabled-bg-color")]=c,r[t.cssVarBlockName("disabled-text-color")]=n.dark?"rgba(255, 255, 255, 0.5)":`var(${t.cssVarName("color-white")})`,r[t.cssVarBlockName("disabled-border-color")]=c}}}return r})}const v5=tt({name:"ElButton"}),y5=tt({...v5,props:fy,emits:n5,setup(n,{expose:e,emit:t}){const r=n,i=g5(r),s=Jn("button"),{_ref:o,_size:a,_type:l,_disabled:c,_props:u,shouldAddSpace:d,handleClick:f}=JU(r,t);return e({ref:o,size:a,type:l,disabled:c,shouldAddSpace:d}),(p,m)=>(ge(),cn(ns(p.tag),Ia({ref_key:"_ref",ref:o},P(u),{class:[P(s).b(),P(s).m(P(l)),P(s).m(P(a)),P(s).is("disabled",P(c)),P(s).is("loading",p.loading),P(s).is("plain",p.plain),P(s).is("round",p.round),P(s).is("circle",p.circle),P(s).is("text",p.text),P(s).is("link",p.link),P(s).is("has-bg",p.bg)],style:P(i),onClick:P(f)}),{default:He(()=>[p.loading?(ge(),Se(mr,{key:0},[p.$slots.loading?nn(p.$slots,"loading",{key:0}):(ge(),cn(P(Aa),{key:1,class:qe(P(s).is("loading"))},{default:He(()=>[(ge(),cn(ns(p.loadingIcon)))]),_:1},8,["class"]))],64)):p.icon||p.$slots.icon?(ge(),cn(P(Aa),{key:1},{default:He(()=>[p.icon?(ge(),cn(ns(p.icon),{key:0})):nn(p.$slots,"icon",{key:1})]),_:3})):St("v-if",!0),p.$slots.default?(ge(),Se("span",{key:2,class:qe({[P(s).em("text","expand")]:P(d)})},[nn(p.$slots,"default")],2)):St("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var _5=ur(y5,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button.vue"]]);const b5={size:fy.size,type:fy.type},x5=tt({name:"ElButtonGroup"}),w5=tt({...x5,props:b5,setup(n){const e=n;cs(w2,Zo({size:Fs(e,"size"),type:Fs(e,"type")}));const t=Jn("button");return(r,i)=>(ge(),Se("div",{class:qe(`${P(t).b("group")}`)},[nn(r.$slots,"default")],2))}});var E2=ur(w5,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button-group.vue"]]);const v0=Zl(_5,{ButtonGroup:E2});l0(E2);const S2={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object]},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:c0,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0}},T2={[Ho]:n=>os(n)||tf(n)||La(n),change:n=>os(n)||tf(n)||La(n)},Yu=Symbol("checkboxGroupContextKey"),A5=({model:n,isChecked:e})=>{const t=Mn(Yu,void 0),r=ve(()=>{var s,o;const a=(s=t==null?void 0:t.max)==null?void 0:s.value,l=(o=t==null?void 0:t.min)==null?void 0:o.value;return!Qv(a)&&n.value.length>=a&&!e.value||!Qv(l)&&n.value.length<=l&&e.value});return{isDisabled:m0(ve(()=>(t==null?void 0:t.disabled.value)||r.value)),isLimitDisabled:r}},E5=(n,{model:e,isLimitExceeded:t,hasOwnLabel:r,isDisabled:i,isLabeledByFormItem:s})=>{const o=Mn(Yu,void 0),{formItem:a}=qf(),{emit:l}=Qo();function c(m){var g,y;return m===n.trueLabel||m===!0?(g=n.trueLabel)!=null?g:!0:(y=n.falseLabel)!=null?y:!1}function u(m,g){l("change",c(m),g)}function d(m){if(t.value)return;const g=m.target;l("change",c(g.checked),m)}async function f(m){t.value||!r.value&&!i.value&&s.value&&(m.composedPath().some(h=>h.tagName==="LABEL")||(e.value=c([!1,n.falseLabel].includes(e.value)),await Tn(),u(e.value,m)))}const p=ve(()=>(o==null?void 0:o.validateEvent)||n.validateEvent);return Ct(()=>n.modelValue,()=>{p.value&&(a==null||a.validate("change").catch(m=>void 0))}),{handleChange:d,onClickRoot:f}},S5=n=>{const e=fe(!1),{emit:t}=Qo(),r=Mn(Yu,void 0),i=ve(()=>Qv(r)===!1),s=fe(!1);return{model:ve({get(){var a,l;return i.value?(a=r==null?void 0:r.modelValue)==null?void 0:a.value:(l=n.modelValue)!=null?l:e.value},set(a){var l,c;i.value&&Nl(a)?(s.value=((l=r==null?void 0:r.max)==null?void 0:l.value)!==void 0&&a.length>(r==null?void 0:r.max.value),s.value===!1&&((c=r==null?void 0:r.changeEvent)==null||c.call(r,a))):(t(Ho,a),e.value=a)}}),isGroup:i,isLimitExceeded:s}},T5=(n,e,{model:t})=>{const r=Mn(Yu,void 0),i=fe(!1),s=ve(()=>{const c=t.value;return La(c)?c:Nl(c)?lu(n.label)?c.map(yw).some(u=>yD(u,n.label)):c.map(yw).includes(n.label):c!=null?c===n.trueLabel:!!c}),o=mu(ve(()=>{var c;return(c=r==null?void 0:r.size)==null?void 0:c.value}),{prop:!0}),a=mu(ve(()=>{var c;return(c=r==null?void 0:r.size)==null?void 0:c.value})),l=ve(()=>!!(e.default||n.label));return{checkboxButtonSize:o,isChecked:s,isFocused:i,checkboxSize:a,hasOwnLabel:l}},M5=(n,{model:e})=>{function t(){Nl(e.value)&&!e.value.includes(n.label)?e.value.push(n.label):e.value=n.trueLabel||!0}n.checked&&t()},M2=(n,e)=>{const{formItem:t}=qf(),{model:r,isGroup:i,isLimitExceeded:s}=S5(n),{isFocused:o,isChecked:a,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u}=T5(n,e,{model:r}),{isDisabled:d}=A5({model:r,isChecked:a}),{inputId:f,isLabeledByFormItem:p}=wb(n,{formItemContext:t,disableIdGeneration:u,disableIdManagement:i}),{handleChange:m,onClickRoot:g}=E5(n,{model:r,isLimitExceeded:s,hasOwnLabel:u,isDisabled:d,isLabeledByFormItem:p});return M5(n,{model:r}),{inputId:f,isLabeledByFormItem:p,isChecked:a,isDisabled:d,isFocused:o,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u,model:r,handleChange:m,onClickRoot:g}},R5=["tabindex","role","aria-checked"],I5=["id","aria-hidden","name","tabindex","disabled","true-value","false-value"],C5=["id","aria-hidden","disabled","value","name","tabindex"],P5=tt({name:"ElCheckbox"}),N5=tt({...P5,props:S2,emits:T2,setup(n){const e=n,t=Xu(),{inputId:r,isLabeledByFormItem:i,isChecked:s,isDisabled:o,isFocused:a,checkboxSize:l,hasOwnLabel:c,model:u,handleChange:d,onClickRoot:f}=M2(e,t),p=Jn("checkbox"),m=ve(()=>[p.b(),p.m(l.value),p.is("disabled",o.value),p.is("bordered",e.border),p.is("checked",s.value)]),g=ve(()=>[p.e("input"),p.is("disabled",o.value),p.is("checked",s.value),p.is("indeterminate",e.indeterminate),p.is("focus",a.value)]);return(y,h)=>(ge(),cn(ns(!P(c)&&P(i)?"span":"label"),{class:qe(P(m)),"aria-controls":y.indeterminate?y.controls:null,onClick:P(f)},{default:He(()=>[L("span",{class:qe(P(g)),tabindex:y.indeterminate?0:void 0,role:y.indeterminate?"checkbox":void 0,"aria-checked":y.indeterminate?"mixed":void 0},[y.trueLabel||y.falseLabel?vr((ge(),Se("input",{key:0,id:P(r),"onUpdate:modelValue":h[0]||(h[0]=w=>au(u)?u.value=w:null),class:qe(P(p).e("original")),type:"checkbox","aria-hidden":y.indeterminate?"true":"false",name:y.name,tabindex:y.tabindex,disabled:P(o),"true-value":y.trueLabel,"false-value":y.falseLabel,onChange:h[1]||(h[1]=(...w)=>P(d)&&P(d)(...w)),onFocus:h[2]||(h[2]=w=>a.value=!0),onBlur:h[3]||(h[3]=w=>a.value=!1)},null,42,I5)),[[zp,P(u)]]):vr((ge(),Se("input",{key:1,id:P(r),"onUpdate:modelValue":h[4]||(h[4]=w=>au(u)?u.value=w:null),class:qe(P(p).e("original")),type:"checkbox","aria-hidden":y.indeterminate?"true":"false",disabled:P(o),value:y.label,name:y.name,tabindex:y.tabindex,onChange:h[5]||(h[5]=(...w)=>P(d)&&P(d)(...w)),onFocus:h[6]||(h[6]=w=>a.value=!0),onBlur:h[7]||(h[7]=w=>a.value=!1)},null,42,C5)),[[zp,P(u)]]),L("span",{class:qe(P(p).e("inner"))},null,2)],10,R5),P(c)?(ge(),Se("span",{key:0,class:qe(P(p).e("label"))},[nn(y.$slots,"default"),y.$slots.default?St("v-if",!0):(ge(),Se(mr,{key:0},[Mt(Ze(y.label),1)],64))],2)):St("v-if",!0)]),_:3},8,["class","aria-controls","onClick"]))}});var k5=ur(N5,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox.vue"]]);const B5=["name","tabindex","disabled","true-value","false-value"],L5=["name","tabindex","disabled","value"],D5=tt({name:"ElCheckboxButton"}),O5=tt({...D5,props:S2,emits:T2,setup(n){const e=n,t=Xu(),{isFocused:r,isChecked:i,isDisabled:s,checkboxButtonSize:o,model:a,handleChange:l}=M2(e,t),c=Mn(Yu,void 0),u=Jn("checkbox"),d=ve(()=>{var p,m,g,y;const h=(m=(p=c==null?void 0:c.fill)==null?void 0:p.value)!=null?m:"";return{backgroundColor:h,borderColor:h,color:(y=(g=c==null?void 0:c.textColor)==null?void 0:g.value)!=null?y:"",boxShadow:h?`-1px 0 0 0 ${h}`:void 0}}),f=ve(()=>[u.b("button"),u.bm("button",o.value),u.is("disabled",s.value),u.is("checked",i.value),u.is("focus",r.value)]);return(p,m)=>(ge(),Se("label",{class:qe(P(f))},[p.trueLabel||p.falseLabel?vr((ge(),Se("input",{key:0,"onUpdate:modelValue":m[0]||(m[0]=g=>au(a)?a.value=g:null),class:qe(P(u).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:P(s),"true-value":p.trueLabel,"false-value":p.falseLabel,onChange:m[1]||(m[1]=(...g)=>P(l)&&P(l)(...g)),onFocus:m[2]||(m[2]=g=>r.value=!0),onBlur:m[3]||(m[3]=g=>r.value=!1)},null,42,B5)),[[zp,P(a)]]):vr((ge(),Se("input",{key:1,"onUpdate:modelValue":m[4]||(m[4]=g=>au(a)?a.value=g:null),class:qe(P(u).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:P(s),value:p.label,onChange:m[5]||(m[5]=(...g)=>P(l)&&P(l)(...g)),onFocus:m[6]||(m[6]=g=>r.value=!0),onBlur:m[7]||(m[7]=g=>r.value=!1)},null,42,L5)),[[zp,P(a)]]),p.$slots.default||p.label?(ge(),Se("span",{key:2,class:qe(P(u).be("button","inner")),style:yi(P(i)?P(d):void 0)},[nn(p.$slots,"default",{},()=>[Mt(Ze(p.label),1)])],6)):St("v-if",!0)],2))}});var R2=ur(O5,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-button.vue"]]);const F5=cr({modelValue:{type:Yt(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:c0,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0}}),U5={[Ho]:n=>Nl(n),change:n=>Nl(n)},H5=tt({name:"ElCheckboxGroup"}),z5=tt({...H5,props:F5,emits:U5,setup(n,{emit:e}){const t=n,r=Jn("checkbox"),{formItem:i}=qf(),{inputId:s,isLabeledByFormItem:o}=wb(t,{formItemContext:i}),a=async c=>{e(Ho,c),await Tn(),e("change",c)},l=ve({get(){return t.modelValue},set(c){a(c)}});return cs(Yu,{...AD(a0(t),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:l,changeEvent:a}),Ct(()=>t.modelValue,()=>{t.validateEvent&&(i==null||i.validate("change").catch(c=>void 0))}),(c,u)=>{var d;return ge(),cn(ns(c.tag),{id:P(s),class:qe(P(r).b("group")),role:"group","aria-label":P(o)?void 0:c.label||"checkbox-group","aria-labelledby":P(o)?(d=P(i))==null?void 0:d.labelId:void 0},{default:He(()=>[nn(c.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var I2=ur(z5,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-group.vue"]]);const y0=Zl(k5,{CheckboxButton:R2,CheckboxGroup:I2});l0(R2);l0(I2);const G5=cr({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:Yt([String,Array,Object])},zIndex:{type:Yt([String,Number])}}),V5={click:n=>n instanceof MouseEvent},$5="overlay";var j5=tt({name:"ElOverlay",props:G5,emits:V5,setup(n,{slots:e,emit:t}){const r=Jn($5),i=l=>{t("click",l)},{onClick:s,onMousedown:o,onMouseup:a}=t2(n.customMaskEvent?void 0:i);return()=>n.mask?ke("div",{class:[r.b(),n.overlayClass],style:{zIndex:n.zIndex},onClick:s,onMousedown:o,onMouseup:a},[nn(e,"default")],cp.STYLE|cp.CLASS|cp.PROPS,["onClick","onMouseup","onMousedown"]):wa("div",{class:n.overlayClass,style:{zIndex:n.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[nn(e,"default")])}});const W5=j5,C2=Symbol("dialogInjectionKey"),P2=cr({center:Boolean,alignCenter:Boolean,closeIcon:{type:nf},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),q5={close:()=>!0},X5=["aria-label"],K5=["id"],Y5=tt({name:"ElDialogContent"}),Q5=tt({...Y5,props:P2,emits:q5,setup(n){const e=n,{t}=vN(),{Close:r}=yN,{dialogRef:i,headerRef:s,bodyId:o,ns:a,style:l}=Mn(C2),{focusTrapRef:c}=Mn(m2),u=ve(()=>[a.b(),a.is("fullscreen",e.fullscreen),a.is("draggable",e.draggable),a.is("align-center",e.alignCenter),{[a.m("center")]:e.center},e.customClass]),d=TD(c,i),f=ve(()=>e.draggable);return PD(i,s,f),(p,m)=>(ge(),Se("div",{ref:P(d),class:qe(P(u)),style:yi(P(l)),tabindex:"-1"},[L("header",{ref_key:"headerRef",ref:s,class:qe(P(a).e("header"))},[nn(p.$slots,"header",{},()=>[L("span",{role:"heading",class:qe(P(a).e("title"))},Ze(p.title),3)]),p.showClose?(ge(),Se("button",{key:0,"aria-label":P(t)("el.dialog.close"),class:qe(P(a).e("headerbtn")),type:"button",onClick:m[0]||(m[0]=g=>p.$emit("close"))},[ke(P(Aa),{class:qe(P(a).e("close"))},{default:He(()=>[(ge(),cn(ns(p.closeIcon||P(r))))]),_:1},8,["class"])],10,X5)):St("v-if",!0)],2),L("div",{id:P(o),class:qe(P(a).e("body"))},[nn(p.$slots,"default")],10,K5),p.$slots.footer?(ge(),Se("footer",{key:0,class:qe(P(a).e("footer"))},[nn(p.$slots,"footer")],2)):St("v-if",!0)],6))}});var Z5=ur(Q5,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const J5=cr({...P2,appendToBody:Boolean,beforeClose:{type:Yt(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),e4={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Ho]:n=>La(n),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},t4=(n,e)=>{const r=Qo().emit,{nextZIndex:i}=mT();let s="";const o=af(),a=af(),l=fe(!1),c=fe(!1),u=fe(!1),d=fe(n.zIndex||i());let f,p;const m=vT("namespace",_N),g=ve(()=>{const v={},_=`--${m.value}-dialog`;return n.fullscreen||(n.top&&(v[`${_}-margin-top`]=n.top),n.width&&(v[`${_}-width`]=Jd(n.width))),v}),y=ve(()=>n.alignCenter?{display:"flex"}:{});function h(){r("opened")}function w(){r("closed"),r(Ho,!1),n.destroyOnClose&&(u.value=!1)}function M(){r("close")}function S(){p==null||p(),f==null||f(),n.openDelay&&n.openDelay>0?{stop:f}=_w(()=>N(),n.openDelay):N()}function C(){f==null||f(),p==null||p(),n.closeDelay&&n.closeDelay>0?{stop:p}=_w(()=>B(),n.closeDelay):B()}function k(){function v(_){_||(c.value=!0,l.value=!1)}n.beforeClose?n.beforeClose(v):C()}function F(){n.closeOnClickModal&&k()}function N(){gi&&(l.value=!0)}function B(){l.value=!1}function I(){r("openAutoFocus")}function U(){r("closeAutoFocus")}function G(v){var _;((_=v.detail)==null?void 0:_.focusReason)==="pointer"&&v.preventDefault()}n.lockScroll&&ND(l);function R(){n.closeOnPressEscape&&k()}return Ct(()=>n.modelValue,v=>{v?(c.value=!1,S(),u.value=!0,d.value=n.zIndex?d.value++:i(),Tn(()=>{r("open"),e.value&&(e.value.scrollTop=0)})):l.value&&C()}),Ct(()=>n.fullscreen,v=>{e.value&&(v?(s=e.value.style.transform,e.value.style.transform=""):e.value.style.transform=s)}),En(()=>{n.modelValue&&(l.value=!0,u.value=!0,S())}),{afterEnter:h,afterLeave:w,beforeLeave:M,handleClose:k,onModalClick:F,close:C,doClose:B,onOpenAutoFocus:I,onCloseAutoFocus:U,onCloseRequested:R,onFocusoutPrevented:G,titleId:o,bodyId:a,closed:c,style:g,overlayDialogStyle:y,rendered:u,visible:l,zIndex:d}},n4=["aria-label","aria-labelledby","aria-describedby"],r4=tt({name:"ElDialog",inheritAttrs:!1}),i4=tt({...r4,props:J5,emits:e4,setup(n,{expose:e}){const t=n,r=Xu();sy({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},ve(()=>!!r.title)),sy({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},ve(()=>!!t.customClass));const i=Jn("dialog"),s=fe(),o=fe(),a=fe(),{visible:l,titleId:c,bodyId:u,style:d,overlayDialogStyle:f,rendered:p,zIndex:m,afterEnter:g,afterLeave:y,beforeLeave:h,handleClose:w,onModalClick:M,onOpenAutoFocus:S,onCloseAutoFocus:C,onCloseRequested:k,onFocusoutPrevented:F}=t4(t,s);cs(C2,{dialogRef:s,headerRef:o,bodyId:u,ns:i,rendered:p,style:d});const N=t2(M),B=ve(()=>t.draggable&&!t.fullscreen);return e({visible:l,dialogContentRef:a}),(I,U)=>(ge(),cn(gT,{to:"body",disabled:!I.appendToBody},[ke(nb,{name:"dialog-fade",onAfterEnter:P(g),onAfterLeave:P(y),onBeforeLeave:P(h),persisted:""},{default:He(()=>[vr(ke(P(W5),{"custom-mask-event":"",mask:I.modal,"overlay-class":I.modalClass,"z-index":P(m)},{default:He(()=>[L("div",{role:"dialog","aria-modal":"true","aria-label":I.title||void 0,"aria-labelledby":I.title?void 0:P(c),"aria-describedby":P(u),class:qe(`${P(i).namespace.value}-overlay-dialog`),style:yi(P(f)),onClick:U[0]||(U[0]=(...G)=>P(N).onClick&&P(N).onClick(...G)),onMousedown:U[1]||(U[1]=(...G)=>P(N).onMousedown&&P(N).onMousedown(...G)),onMouseup:U[2]||(U[2]=(...G)=>P(N).onMouseup&&P(N).onMouseup(...G))},[ke(P(v2),{loop:"",trapped:P(l),"focus-start-el":"container",onFocusAfterTrapped:P(S),onFocusAfterReleased:P(C),onFocusoutPrevented:P(F),onReleaseRequested:P(k)},{default:He(()=>[P(p)?(ge(),cn(Z5,Ia({key:0,ref_key:"dialogContentRef",ref:a},I.$attrs,{"custom-class":I.customClass,center:I.center,"align-center":I.alignCenter,"close-icon":I.closeIcon,draggable:P(B),fullscreen:I.fullscreen,"show-close":I.showClose,title:I.title,onClose:P(w)}),bN({header:He(()=>[I.$slots.title?nn(I.$slots,"title",{key:1}):nn(I.$slots,"header",{key:0,close:P(w),titleId:P(c),titleClass:P(i).e("title")})]),default:He(()=>[nn(I.$slots,"default")]),_:2},[I.$slots.footer?{name:"footer",fn:He(()=>[nn(I.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):St("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,n4)]),_:3},8,["mask","overlay-class","z-index"]),[[u0,P(l)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var s4=ur(i4,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const N2=Zl(s4);function o4(n){let e;const t=fe(!1),r=Zo({...n,originalPosition:"",originalOverflow:"",visible:!1});function i(f){r.text=f}function s(){const f=r.parent,p=d.ns;if(!f.vLoadingAddClassList){let m=f.getAttribute("loading-number");m=Number.parseInt(m)-1,m?f.setAttribute("loading-number",m.toString()):(ef(f,p.bm("parent","relative")),f.removeAttribute("loading-number")),ef(f,p.bm("parent","hidden"))}o(),u.unmount()}function o(){var f,p;(p=(f=d.$el)==null?void 0:f.parentNode)==null||p.removeChild(d.$el)}function a(){var f;n.beforeClose&&!n.beforeClose()||(t.value=!0,clearTimeout(e),e=window.setTimeout(l,400),r.visible=!1,(f=n.closed)==null||f.call(n))}function l(){if(!t.value)return;const f=r.parent;t.value=!1,f.vLoadingAddClassList=void 0,s()}const u=xN(tt({name:"ElLoading",setup(f,{expose:p}){const{ns:m,zIndex:g}=wN("loading");return p({ns:m,zIndex:g}),()=>{const y=r.spinner||r.svg,h=wa("svg",{class:"circular",viewBox:r.svgViewBox?r.svgViewBox:"0 0 50 50",...y?{innerHTML:y}:{}},[wa("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),w=r.text?wa("p",{class:m.b("text")},[r.text]):void 0;return wa(nb,{name:m.b("fade"),onAfterLeave:l},{default:He(()=>[vr(ke("div",{style:{backgroundColor:r.background||""},class:[m.b("mask"),r.customClass,r.fullscreen?"is-fullscreen":""]},[wa("div",{class:m.b("spinner")},[h,w])]),[[u0,r.visible]])])})}}})),d=u.mount(document.createElement("div"));return{...a0(r),setText:i,removeElLoadingChild:o,close:a,handleAfterLeave:l,vm:d,get $el(){return d.$el}}}let Sh;const a4=function(n={}){if(!gi)return;const e=l4(n);if(e.fullscreen&&Sh)return Sh;const t=o4({...e,closed:()=>{var i;(i=e.closed)==null||i.call(e),e.fullscreen&&(Sh=void 0)}});c4(e,e.parent,t),AA(e,e.parent,t),e.parent.vLoadingAddClassList=()=>AA(e,e.parent,t);let r=e.parent.getAttribute("loading-number");return r?r=`${Number.parseInt(r)+1}`:r="1",e.parent.setAttribute("loading-number",r),e.parent.appendChild(t.$el),Tn(()=>t.visible.value=e.visible),e.fullscreen&&(Sh=t),t},l4=n=>{var e,t,r,i;let s;return os(n.target)?s=(e=document.querySelector(n.target))!=null?e:document.body:s=n.target||document.body,{parent:s===document.body||n.body?document.body:s,background:n.background||"",svg:n.svg||"",svgViewBox:n.svgViewBox||"",spinner:n.spinner||!1,text:n.text||"",fullscreen:s===document.body&&((t=n.fullscreen)!=null?t:!0),lock:(r=n.lock)!=null?r:!1,customClass:n.customClass||"",visible:(i=n.visible)!=null?i:!0,target:s}},c4=async(n,e,t)=>{const{nextZIndex:r}=t.vm.zIndex||t.vm._.exposed.zIndex,i={};if(n.fullscreen)t.originalPosition.value=Pc(document.body,"position"),t.originalOverflow.value=Pc(document.body,"overflow"),i.zIndex=r();else if(n.parent===document.body){t.originalPosition.value=Pc(document.body,"position"),await Tn();for(const s of["top","left"]){const o=s==="top"?"scrollTop":"scrollLeft";i[s]=`${n.target.getBoundingClientRect()[s]+document.body[o]+document.documentElement[o]-Number.parseInt(Pc(document.body,`margin-${s}`),10)}px`}for(const s of["height","width"])i[s]=`${n.target.getBoundingClientRect()[s]}px`}else t.originalPosition.value=Pc(e,"position");for(const[s,o]of Object.entries(i))t.$el.style[s]=o},AA=(n,e,t)=>{const r=t.vm.ns||t.vm._.exposed.ns;["absolute","fixed","sticky"].includes(t.originalPosition.value)?ef(e,r.bm("parent","relative")):Yv(e,r.bm("parent","relative")),n.fullscreen&&n.lock?Yv(e,r.bm("parent","hidden")):ef(e,r.bm("parent","hidden"))},py=Symbol("ElLoading"),EA=(n,e)=>{var t,r,i,s;const o=e.instance,a=f=>lu(e.value)?e.value[f]:void 0,l=f=>{const p=os(f)&&(o==null?void 0:o[f])||f;return p&&fe(p)},c=f=>l(a(f)||n.getAttribute(`element-loading-${AN(f)}`)),u=(t=a("fullscreen"))!=null?t:e.modifiers.fullscreen,d={text:c("text"),svg:c("svg"),svgViewBox:c("svgViewBox"),spinner:c("spinner"),background:c("background"),customClass:c("customClass"),fullscreen:u,target:(r=a("target"))!=null?r:u?void 0:n,body:(i=a("body"))!=null?i:e.modifiers.body,lock:(s=a("lock"))!=null?s:e.modifiers.lock};n[py]={options:d,instance:a4(d)}},u4=(n,e)=>{for(const t of Object.keys(e))au(e[t])&&(e[t].value=n[t])},k2={mounted(n,e){e.value&&EA(n,e)},updated(n,e){const t=n[py];e.oldValue!==e.value&&(e.value&&!e.oldValue?EA(n,e):e.value&&e.oldValue?lu(e.value)&&u4(e.value,t.options):t==null||t.instance.close())},unmounted(n){var e;(e=n[py])==null||e.instance.close()}};const Qu=({value:n,characters:e="****",start:t=3,end:r=4})=>{const i=new RegExp("^(.{"+t+"}).*(.{"+r+"})$");return n?n.replace(i,`$1${e}$2`):""},Wp=n=>n>=1e6?(n/1e6).toFixed(1)+"M":n>=1e3?(n/1e3).toFixed(1)+"K":n==null?void 0:n.toString(),d4={class:"text-[13px] flex flex-col space-y-6 -mt-10"},f4=L("p",{class:"text-[24px] text-[#EDEDED]"},"Personal Information",-1),h4={class:"w-full flex items-center justify-between space-x-4"},p4={class:"w-full flex items-center justify-center space-x-2 border border-[#2B2B2B] rounded-full py-1 px-4 hover:text-[#EBEBEB] cursor-pointer"},m4=L("span",{class:"iconfont icon-copy"},null,-1),g4=L("span",{class:"iconfont icon-tuichu"},null,-1),v4=L("span",{class:""},"Disconnect",-1),y4=[g4,v4],B2=tt({__name:"UserProfile",props:{dialogVisible:{type:Boolean,default:!0}},emits:["update:closeDialog"],setup(n,{emit:e}){const t=dr(),r=zr(),i=()=>{e("update:closeDialog")},s=()=>{i(),t.cleaUserInfo(),r.cleaEthersInfo()};return(o,a)=>{const l=N2,c=xT,u=d0("copy");return ge(),cn(c,null,{default:He(()=>[ke(l,{draggable:"","model-value":o.$props.dialogVisible,"show-close":!1,width:"500px",style:{background:"black","border-radius":"10px",padding:"20px 30px",border:"1px solid #2B2B2B"},"align-center":"",onClose:i},{default:He(()=>[L("span",{class:"iconfont icon-del text-sm absolute top-5 right-5 text-[#EDEDED] cursor-pointer",onClick:i}),L("div",d4,[f4,L("div",h4,[vr((ge(),Se("div",p4,[m4,L("span",null,Ze(("stringStar"in o?o.stringStar:P(Qu))({value:P(t).getAccountsWalletAddress,characters:"********",start:4})),1)])),[[u,P(t).getAccountsWalletAddress]]),L("div",{onClick:a[0]||(a[0]=d=>s()),class:"w-full flex items-center justify-center space-x-2 border border-[#2B2B2B] rounded-full py-1 px-4 hover:text-[#EBEBEB] cursor-pointer"},y4)])])]),_:1},8,["model-value"])]),_:1})}}}),L2=""+globalThis.__publicAssetsURL("images/public/logo.png"),_4={class:"w-full fixed top-0 left-0 h-[60px] z-[50] flex items-center justify-between px-20 bg-black"},b4=L("div",{class:"w-[180px] h-[50px] flex items-center justify-center rounded-lg"},[L("img",{src:L2,alt:""})],-1),x4={class:"h-full flex items-center justify-between space-x-12"},w4={class:"flex items-center space-x-12 list-none text-[12p] lg:text-[12p] sm:text-[18px] md:text-[18px]"},A4={class:"cursor-pointer"},E4={class:"cursor-pointer"},S4=tt({__name:"Header",emits:["update:scrollTo"],setup(n,{emit:e}){const t=dr(),r=fe(!1);fe([]);const i=async()=>{t.setWalletSelectionDialogVisible(!0)};return En(async()=>{}),(s,o)=>{const a=Da,l=Da,c=B2;return ge(),Se("div",_4,[b4,L("div",x4,[L("ul",w4,[L("li",{class:"cursor-pointer",onClick:o[0]||(o[0]=u=>("navigateTo"in s?s.navigateTo:P(iT))("/"))},"About"),L("li",A4,[ke(a,{to:"https://x.com/aigaealabs",target:"_blank",rel:"noopener",class:""},{default:He(()=>[Mt(" Community ")]),_:1})]),L("li",E4,[ke(l,{to:"/faqs",target:"_self"},{default:He(()=>[Mt(" FAQs ")]),_:1})]),P(t).getAccountsWalletAddress?(ge(),Se("li",{key:0,onClick:o[1]||(o[1]=u=>r.value=!0),class:"cursor-pointer border border-[#2B2B2B] px-4 py-1 rounded-full"},Ze(("stringStar"in s?s.stringStar:P(Qu))({value:P(t).getAccountsWalletAddress,characters:"********",start:4})),1)):(ge(),Se("li",{key:1,class:"cursor-pointer border border-[#2B2B2B] px-4 py-1 rounded-full",onClick:i}," Connect Wallet "))])]),ke(c,{"dialog-visible":P(r),"onUpdate:closeDialog":o[2]||(o[2]=u=>r.value=!1)},null,8,["dialog-visible"])])}}});/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Mb="171",Kc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Hc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},T4=0,SA=1,M4=2,D2=1,R4=2,yo=3,Oa=0,ei=1,Mo=2,Ca=0,Yc=1,TA=2,MA=3,RA=4,I4=5,fl=100,C4=101,P4=102,N4=103,k4=104,B4=200,L4=201,D4=202,O4=203,my=204,gy=205,F4=206,U4=207,H4=208,z4=209,G4=210,V4=211,$4=212,j4=213,W4=214,vy=0,yy=1,_y=2,gu=3,by=4,xy=5,wy=6,Ay=7,O2=0,q4=1,X4=2,Pa=0,K4=1,Y4=2,Q4=3,Z4=4,J4=5,e6=6,t6=7,F2=300,vu=301,yu=302,Ey=303,Sy=304,_0=306,Ty=1e3,vl=1001,My=1002,as=1003,n6=1004,Th=1005,Us=1006,Eg=1007,yl=1008,Go=1009,U2=1010,H2=1011,cf=1012,Rb=1013,Bl=1014,No=1015,Kf=1016,Ib=1017,Cb=1018,_u=1020,z2=35902,G2=1021,V2=1022,rs=1023,$2=1024,j2=1025,Qc=1026,bu=1027,W2=1028,Pb=1029,q2=1030,Nb=1031,kb=1033,fp=33776,hp=33777,pp=33778,mp=33779,Ry=35840,Iy=35841,Cy=35842,Py=35843,Ny=36196,ky=37492,By=37496,Ly=37808,Dy=37809,Oy=37810,Fy=37811,Uy=37812,Hy=37813,zy=37814,Gy=37815,Vy=37816,$y=37817,jy=37818,Wy=37819,qy=37820,Xy=37821,gp=36492,Ky=36494,Yy=36495,X2=36283,Qy=36284,Zy=36285,Jy=36286,r6=3200,i6=3201,s6=0,o6=1,Ea="",Pi="srgb",xu="srgb-linear",qp="linear",mn="srgb",lc=7680,IA=519,a6=512,l6=513,c6=514,K2=515,u6=516,d6=517,f6=518,h6=519,CA=35044,PA="300 es",ko=2e3,Xp=2001;class ec{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const xr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let NA=1234567;const Vd=Math.PI/180,uf=180/Math.PI;function Zu(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(xr[n&255]+xr[n>>8&255]+xr[n>>16&255]+xr[n>>24&255]+"-"+xr[e&255]+xr[e>>8&255]+"-"+xr[e>>16&15|64]+xr[e>>24&255]+"-"+xr[t&63|128]+xr[t>>8&255]+"-"+xr[t>>16&255]+xr[t>>24&255]+xr[r&255]+xr[r>>8&255]+xr[r>>16&255]+xr[r>>24&255]).toLowerCase()}function Dt(n,e,t){return Math.max(e,Math.min(t,n))}function Bb(n,e){return(n%e+e)%e}function p6(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function m6(n,e,t){return n!==e?(t-n)/(e-n):0}function $d(n,e,t){return(1-t)*n+t*e}function g6(n,e,t,r){return $d(n,e,1-Math.exp(-t*r))}function v6(n,e=1){return e-Math.abs(Bb(n,e*2)-e)}function y6(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function _6(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function b6(n,e){return n+Math.floor(Math.random()*(e-n+1))}function x6(n,e){return n+Math.random()*(e-n)}function w6(n){return n*(.5-Math.random())}function A6(n){n!==void 0&&(NA=n);let e=NA+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function E6(n){return n*Vd}function S6(n){return n*uf}function T6(n){return(n&n-1)===0&&n!==0}function M6(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function R6(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function I6(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+r)/2),u=o((e+r)/2),d=s((e-r)/2),f=o((e-r)/2),p=s((r-e)/2),m=o((r-e)/2);switch(i){case"XYX":n.set(a*u,l*d,l*f,a*c);break;case"YZY":n.set(l*f,a*u,l*d,a*c);break;case"ZXZ":n.set(l*d,l*f,a*u,a*c);break;case"XZX":n.set(a*u,l*m,l*p,a*c);break;case"YXY":n.set(l*p,a*u,l*m,a*c);break;case"ZYZ":n.set(l*m,l*p,a*u,a*c);break;default:}}function kc(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Cr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const C6={DEG2RAD:Vd,RAD2DEG:uf,generateUUID:Zu,clamp:Dt,euclideanModulo:Bb,mapLinear:p6,inverseLerp:m6,lerp:$d,damp:g6,pingpong:v6,smoothstep:y6,smootherstep:_6,randInt:b6,randFloat:x6,randFloatSpread:w6,seededRandom:A6,degToRad:E6,radToDeg:S6,isPowerOfTwo:T6,ceilPowerOfTwo:M6,floorPowerOfTwo:R6,setQuaternionFromProperEuler:I6,normalize:Cr,denormalize:kc};class Lt{constructor(e=0,t=0){Lt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Dt(this.x,e.x,t.x),this.y=Dt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Dt(this.x,e,t),this.y=Dt(this.y,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Dt(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Dt(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Tt{constructor(e,t,r,i,s,o,a,l,c){Tt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c)}set(e,t,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],d=r[7],f=r[2],p=r[5],m=r[8],g=i[0],y=i[3],h=i[6],w=i[1],M=i[4],S=i[7],C=i[2],k=i[5],F=i[8];return s[0]=o*g+a*w+l*C,s[3]=o*y+a*M+l*k,s[6]=o*h+a*S+l*F,s[1]=c*g+u*w+d*C,s[4]=c*y+u*M+d*k,s[7]=c*h+u*S+d*F,s[2]=f*g+p*w+m*C,s[5]=f*y+p*M+m*k,s[8]=f*h+p*S+m*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,f=a*l-u*s,p=c*s-o*l,m=t*d+r*f+i*p;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/m;return e[0]=d*g,e[1]=(i*c-u*r)*g,e[2]=(a*r-i*o)*g,e[3]=f*g,e[4]=(u*t-i*l)*g,e[5]=(i*s-a*t)*g,e[6]=p*g,e[7]=(r*l-c*t)*g,e[8]=(o*t-r*s)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Sg.makeScale(e,t)),this}rotate(e){return this.premultiply(Sg.makeRotation(-e)),this}translate(e,t){return this.premultiply(Sg.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Sg=new Tt;function Y2(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Kp(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function P6(){const n=Kp("canvas");return n.style.display="block",n}const kA={};function Bc(n){n in kA||(kA[n]=!0)}function N6(n,e,t){return new Promise(function(r,i){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:r()}}setTimeout(s,t)})}function k6(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function B6(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const BA=new Tt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),LA=new Tt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function L6(){const n={enabled:!0,workingColorSpace:xu,spaces:{},convert:function(i,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===mn&&(i.r=Oo(i.r),i.g=Oo(i.g),i.b=Oo(i.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===mn&&(i.r=Zc(i.r),i.g=Zc(i.g),i.b=Zc(i.b))),i},fromWorkingColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},toWorkingColorSpace:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Ea?qp:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,o){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],r=[.3127,.329];return n.define({[xu]:{primaries:e,whitePoint:r,transfer:qp,toXYZ:BA,fromXYZ:LA,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Pi},outputColorSpaceConfig:{drawingBufferColorSpace:Pi}},[Pi]:{primaries:e,whitePoint:r,transfer:mn,toXYZ:BA,fromXYZ:LA,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Pi}}}),n}const Jt=L6();function Oo(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Zc(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let cc;class D6{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{cc===void 0&&(cc=Kp("canvas")),cc.width=e.width,cc.height=e.height;const r=cc.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=cc}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Kp("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Oo(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Oo(t[r]/255)*255):t[r]=Oo(t[r]);return{data:t,width:e.width,height:e.height}}else return e}}let O6=0;class Q2{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:O6++}),this.uuid=Zu(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(Tg(i[o].image)):s.push(Tg(i[o]))}else s=Tg(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function Tg(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?D6.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:{}}let F6=0;class Br extends ec{constructor(e=Br.DEFAULT_IMAGE,t=Br.DEFAULT_MAPPING,r=vl,i=vl,s=Us,o=yl,a=rs,l=Go,c=Br.DEFAULT_ANISOTROPY,u=Ea){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:F6++}),this.uuid=Zu(),this.name="",this.source=new Q2(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Lt(0,0),this.repeat=new Lt(1,1),this.center=new Lt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Tt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==F2)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ty:e.x=e.x-Math.floor(e.x);break;case vl:e.x=e.x<0?0:1;break;case My:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ty:e.y=e.y-Math.floor(e.y);break;case vl:e.y=e.y<0?0:1;break;case My:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Br.DEFAULT_IMAGE=null;Br.DEFAULT_MAPPING=F2;Br.DEFAULT_ANISOTROPY=1;class Hn{constructor(e=0,t=0,r=0,i=1){Hn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],u=l[4],d=l[8],f=l[1],p=l[5],m=l[9],g=l[2],y=l[6],h=l[10];if(Math.abs(u-f)<.01&&Math.abs(d-g)<.01&&Math.abs(m-y)<.01){if(Math.abs(u+f)<.1&&Math.abs(d+g)<.1&&Math.abs(m+y)<.1&&Math.abs(c+p+h-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const M=(c+1)/2,S=(p+1)/2,C=(h+1)/2,k=(u+f)/4,F=(d+g)/4,N=(m+y)/4;return M>S&&M>C?M<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(M),i=k/r,s=F/r):S>C?S<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(S),r=k/i,s=N/i):C<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(C),r=F/s,i=N/s),this.set(r,i,s,t),this}let w=Math.sqrt((y-m)*(y-m)+(d-g)*(d-g)+(f-u)*(f-u));return Math.abs(w)<.001&&(w=1),this.x=(y-m)/w,this.y=(d-g)/w,this.z=(f-u)/w,this.w=Math.acos((c+p+h-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Dt(this.x,e.x,t.x),this.y=Dt(this.y,e.y,t.y),this.z=Dt(this.z,e.z,t.z),this.w=Dt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Dt(this.x,e,t),this.y=Dt(this.y,e,t),this.z=Dt(this.z,e,t),this.w=Dt(this.w,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Dt(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class U6 extends ec{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Hn(0,0,e,t),this.scissorTest=!1,this.viewport=new Hn(0,0,e,t);const i={width:e,height:t,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Us,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const s=new Br(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Q2(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ll extends U6{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class Z2 extends Br{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=as,this.minFilter=as,this.wrapR=vl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class H6 extends Br{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=as,this.minFilter=as,this.wrapR=vl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Dl{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const f=s[o+0],p=s[o+1],m=s[o+2],g=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d;return}if(a===1){e[t+0]=f,e[t+1]=p,e[t+2]=m,e[t+3]=g;return}if(d!==g||l!==f||c!==p||u!==m){let y=1-a;const h=l*f+c*p+u*m+d*g,w=h>=0?1:-1,M=1-h*h;if(M>Number.EPSILON){const C=Math.sqrt(M),k=Math.atan2(C,h*w);y=Math.sin(y*k)/C,a=Math.sin(a*k)/C}const S=a*w;if(l=l*y+f*S,c=c*y+p*S,u=u*y+m*S,d=d*y+g*S,y===1-a){const C=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=C,c*=C,u*=C,d*=C}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=s[o],f=s[o+1],p=s[o+2],m=s[o+3];return e[t]=a*m+u*d+l*p-c*f,e[t+1]=l*m+u*f+c*d-a*p,e[t+2]=c*m+u*p+a*f-l*d,e[t+3]=u*m-a*d-l*f-c*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),d=a(s/2),f=l(r/2),p=l(i/2),m=l(s/2);switch(o){case"XYZ":this._x=f*u*d+c*p*m,this._y=c*p*d-f*u*m,this._z=c*u*m+f*p*d,this._w=c*u*d-f*p*m;break;case"YXZ":this._x=f*u*d+c*p*m,this._y=c*p*d-f*u*m,this._z=c*u*m-f*p*d,this._w=c*u*d+f*p*m;break;case"ZXY":this._x=f*u*d-c*p*m,this._y=c*p*d+f*u*m,this._z=c*u*m+f*p*d,this._w=c*u*d-f*p*m;break;case"ZYX":this._x=f*u*d-c*p*m,this._y=c*p*d+f*u*m,this._z=c*u*m-f*p*d,this._w=c*u*d+f*p*m;break;case"YZX":this._x=f*u*d+c*p*m,this._y=c*p*d+f*u*m,this._z=c*u*m-f*p*d,this._w=c*u*d-f*p*m;break;case"XZY":this._x=f*u*d-c*p*m,this._y=c*p*d-f*u*m,this._z=c*u*m+f*p*d,this._w=c*u*d+f*p*m;break;default:}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],f=r+a+d;if(f>0){const p=.5/Math.sqrt(f+1);this._w=.25/p,this._x=(u-l)*p,this._y=(s-c)*p,this._z=(o-i)*p}else if(r>a&&r>d){const p=2*Math.sqrt(1+r-a-d);this._w=(u-l)/p,this._x=.25*p,this._y=(i+o)/p,this._z=(s+c)/p}else if(a>d){const p=2*Math.sqrt(1+a-r-d);this._w=(s-c)/p,this._x=(i+o)/p,this._y=.25*p,this._z=(l+u)/p}else{const p=2*Math.sqrt(1+d-r-a);this._w=(o-i)/p,this._x=(s+c)/p,this._y=(l+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Dt(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const p=1-t;return this._w=p*o+t*this._w,this._x=p*r+t*this._x,this._y=p*i+t*this._y,this._z=p*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,f=Math.sin(t*u)/c;return this._w=o*d+this._w*f,this._x=r*d+this._x*f,this._y=i*d+this._y*f,this._z=s*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class oe{constructor(e=0,t=0,r=0){oe.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(DA.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(DA.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),u=2*(a*t-s*i),d=2*(s*r-o*t);return this.x=t+l*c+o*d-a*u,this.y=r+l*u+a*c-s*d,this.z=i+l*d+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Dt(this.x,e.x,t.x),this.y=Dt(this.y,e.y,t.y),this.z=Dt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Dt(this.x,e,t),this.y=Dt(this.y,e,t),this.z=Dt(this.z,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Dt(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Mg.copy(this).projectOnVector(e),this.sub(Mg)}reflect(e){return this.sub(Mg.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Dt(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Mg=new oe,DA=new Dl;class Yf{constructor(e=new oe(1/0,1/0,1/0),t=new oe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(ji.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(ji.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=ji.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,ji):ji.fromBufferAttribute(s,o),ji.applyMatrix4(e.matrixWorld),this.expandByPoint(ji);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Mh.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Mh.copy(r.boundingBox)),Mh.applyMatrix4(e.matrixWorld),this.union(Mh)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,ji),ji.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(yd),Rh.subVectors(this.max,yd),uc.subVectors(e.a,yd),dc.subVectors(e.b,yd),fc.subVectors(e.c,yd),aa.subVectors(dc,uc),la.subVectors(fc,dc),tl.subVectors(uc,fc);let t=[0,-aa.z,aa.y,0,-la.z,la.y,0,-tl.z,tl.y,aa.z,0,-aa.x,la.z,0,-la.x,tl.z,0,-tl.x,-aa.y,aa.x,0,-la.y,la.x,0,-tl.y,tl.x,0];return!Rg(t,uc,dc,fc,Rh)||(t=[1,0,0,0,1,0,0,0,1],!Rg(t,uc,dc,fc,Rh))?!1:(Ih.crossVectors(aa,la),t=[Ih.x,Ih.y,Ih.z],Rg(t,uc,dc,fc,Rh))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ji).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ji).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ao[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ao[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ao[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ao[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ao[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ao[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ao[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ao[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ao),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ao=[new oe,new oe,new oe,new oe,new oe,new oe,new oe,new oe],ji=new oe,Mh=new Yf,uc=new oe,dc=new oe,fc=new oe,aa=new oe,la=new oe,tl=new oe,yd=new oe,Rh=new oe,Ih=new oe,nl=new oe;function Rg(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){nl.fromArray(n,s);const a=i.x*Math.abs(nl.x)+i.y*Math.abs(nl.y)+i.z*Math.abs(nl.z),l=e.dot(nl),c=t.dot(nl),u=r.dot(nl);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const z6=new Yf,_d=new oe,Ig=new oe;class b0{constructor(e=new oe,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):z6.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;_d.subVectors(e,this.center);const t=_d.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(_d,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Ig.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(_d.copy(e.center).add(Ig)),this.expandByPoint(_d.copy(e.center).sub(Ig))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const lo=new oe,Cg=new oe,Ch=new oe,ca=new oe,Pg=new oe,Ph=new oe,Ng=new oe;class Lb{constructor(e=new oe,t=new oe(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,lo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=lo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(lo.copy(this.origin).addScaledVector(this.direction,t),lo.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){Cg.copy(e).add(t).multiplyScalar(.5),Ch.copy(t).sub(e).normalize(),ca.copy(this.origin).sub(Cg);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Ch),a=ca.dot(this.direction),l=-ca.dot(Ch),c=ca.lengthSq(),u=Math.abs(1-o*o);let d,f,p,m;if(u>0)if(d=o*l-a,f=o*a-l,m=s*u,d>=0)if(f>=-m)if(f<=m){const g=1/u;d*=g,f*=g,p=d*(d+o*f+2*a)+f*(o*d+f+2*l)+c}else f=s,d=Math.max(0,-(o*f+a)),p=-d*d+f*(f+2*l)+c;else f=-s,d=Math.max(0,-(o*f+a)),p=-d*d+f*(f+2*l)+c;else f<=-m?(d=Math.max(0,-(-o*s+a)),f=d>0?-s:Math.min(Math.max(-s,-l),s),p=-d*d+f*(f+2*l)+c):f<=m?(d=0,f=Math.min(Math.max(-s,-l),s),p=f*(f+2*l)+c):(d=Math.max(0,-(o*s+a)),f=d>0?s:Math.min(Math.max(-s,-l),s),p=-d*d+f*(f+2*l)+c);else f=o>0?-s:s,d=Math.max(0,-(o*f+a)),p=-d*d+f*(f+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(Cg).addScaledVector(Ch,f),p}intersectSphere(e,t){lo.subVectors(e.center,this.origin);const r=lo.dot(this.direction),i=lo.dot(lo)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,f=this.origin;return c>=0?(r=(e.min.x-f.x)*c,i=(e.max.x-f.x)*c):(r=(e.max.x-f.x)*c,i=(e.min.x-f.x)*c),u>=0?(s=(e.min.y-f.y)*u,o=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,o=(e.min.y-f.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),d>=0?(a=(e.min.z-f.z)*d,l=(e.max.z-f.z)*d):(a=(e.max.z-f.z)*d,l=(e.min.z-f.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,lo)!==null}intersectTriangle(e,t,r,i,s){Pg.subVectors(t,e),Ph.subVectors(r,e),Ng.crossVectors(Pg,Ph);let o=this.direction.dot(Ng),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;ca.subVectors(this.origin,e);const l=a*this.direction.dot(Ph.crossVectors(ca,Ph));if(l<0)return null;const c=a*this.direction.dot(Pg.cross(ca));if(c<0||l+c>o)return null;const u=-a*ca.dot(Ng);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class zn{constructor(e,t,r,i,s,o,a,l,c,u,d,f,p,m,g,y){zn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c,u,d,f,p,m,g,y)}set(e,t,r,i,s,o,a,l,c,u,d,f,p,m,g,y){const h=this.elements;return h[0]=e,h[4]=t,h[8]=r,h[12]=i,h[1]=s,h[5]=o,h[9]=a,h[13]=l,h[2]=c,h[6]=u,h[10]=d,h[14]=f,h[3]=p,h[7]=m,h[11]=g,h[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new zn().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/hc.setFromMatrixColumn(e,0).length(),s=1/hc.setFromMatrixColumn(e,1).length(),o=1/hc.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const f=o*u,p=o*d,m=a*u,g=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=p+m*c,t[5]=f-g*c,t[9]=-a*l,t[2]=g-f*c,t[6]=m+p*c,t[10]=o*l}else if(e.order==="YXZ"){const f=l*u,p=l*d,m=c*u,g=c*d;t[0]=f+g*a,t[4]=m*a-p,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=p*a-m,t[6]=g+f*a,t[10]=o*l}else if(e.order==="ZXY"){const f=l*u,p=l*d,m=c*u,g=c*d;t[0]=f-g*a,t[4]=-o*d,t[8]=m+p*a,t[1]=p+m*a,t[5]=o*u,t[9]=g-f*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const f=o*u,p=o*d,m=a*u,g=a*d;t[0]=l*u,t[4]=m*c-p,t[8]=f*c+g,t[1]=l*d,t[5]=g*c+f,t[9]=p*c-m,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const f=o*l,p=o*c,m=a*l,g=a*c;t[0]=l*u,t[4]=g-f*d,t[8]=m*d+p,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=p*d+m,t[10]=f-g*d}else if(e.order==="XZY"){const f=o*l,p=o*c,m=a*l,g=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=f*d+g,t[5]=o*u,t[9]=p*d-m,t[2]=m*d-p,t[6]=a*u,t[10]=g*d+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(G6,e,V6)}lookAt(e,t,r){const i=this.elements;return oi.subVectors(e,t),oi.lengthSq()===0&&(oi.z=1),oi.normalize(),ua.crossVectors(r,oi),ua.lengthSq()===0&&(Math.abs(r.z)===1?oi.x+=1e-4:oi.z+=1e-4,oi.normalize(),ua.crossVectors(r,oi)),ua.normalize(),Nh.crossVectors(oi,ua),i[0]=ua.x,i[4]=Nh.x,i[8]=oi.x,i[1]=ua.y,i[5]=Nh.y,i[9]=oi.y,i[2]=ua.z,i[6]=Nh.z,i[10]=oi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],d=r[5],f=r[9],p=r[13],m=r[2],g=r[6],y=r[10],h=r[14],w=r[3],M=r[7],S=r[11],C=r[15],k=i[0],F=i[4],N=i[8],B=i[12],I=i[1],U=i[5],G=i[9],R=i[13],v=i[2],_=i[6],b=i[10],A=i[14],T=i[3],D=i[7],V=i[11],O=i[15];return s[0]=o*k+a*I+l*v+c*T,s[4]=o*F+a*U+l*_+c*D,s[8]=o*N+a*G+l*b+c*V,s[12]=o*B+a*R+l*A+c*O,s[1]=u*k+d*I+f*v+p*T,s[5]=u*F+d*U+f*_+p*D,s[9]=u*N+d*G+f*b+p*V,s[13]=u*B+d*R+f*A+p*O,s[2]=m*k+g*I+y*v+h*T,s[6]=m*F+g*U+y*_+h*D,s[10]=m*N+g*G+y*b+h*V,s[14]=m*B+g*R+y*A+h*O,s[3]=w*k+M*I+S*v+C*T,s[7]=w*F+M*U+S*_+C*D,s[11]=w*N+M*G+S*b+C*V,s[15]=w*B+M*R+S*A+C*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],f=e[10],p=e[14],m=e[3],g=e[7],y=e[11],h=e[15];return m*(+s*l*d-i*c*d-s*a*f+r*c*f+i*a*p-r*l*p)+g*(+t*l*p-t*c*f+s*o*f-i*o*p+i*c*u-s*l*u)+y*(+t*c*d-t*a*p-s*o*d+r*o*p+s*a*u-r*c*u)+h*(-i*a*u-t*l*d+t*a*f+i*o*d-r*o*f+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],p=e[11],m=e[12],g=e[13],y=e[14],h=e[15],w=d*y*c-g*f*c+g*l*p-a*y*p-d*l*h+a*f*h,M=m*f*c-u*y*c-m*l*p+o*y*p+u*l*h-o*f*h,S=u*g*c-m*d*c+m*a*p-o*g*p-u*a*h+o*d*h,C=m*d*l-u*g*l-m*a*f+o*g*f+u*a*y-o*d*y,k=t*w+r*M+i*S+s*C;if(k===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const F=1/k;return e[0]=w*F,e[1]=(g*f*s-d*y*s-g*i*p+r*y*p+d*i*h-r*f*h)*F,e[2]=(a*y*s-g*l*s+g*i*c-r*y*c-a*i*h+r*l*h)*F,e[3]=(d*l*s-a*f*s-d*i*c+r*f*c+a*i*p-r*l*p)*F,e[4]=M*F,e[5]=(u*y*s-m*f*s+m*i*p-t*y*p-u*i*h+t*f*h)*F,e[6]=(m*l*s-o*y*s-m*i*c+t*y*c+o*i*h-t*l*h)*F,e[7]=(o*f*s-u*l*s+u*i*c-t*f*c-o*i*p+t*l*p)*F,e[8]=S*F,e[9]=(m*d*s-u*g*s-m*r*p+t*g*p+u*r*h-t*d*h)*F,e[10]=(o*g*s-m*a*s+m*r*c-t*g*c-o*r*h+t*a*h)*F,e[11]=(u*a*s-o*d*s-u*r*c+t*d*c+o*r*p-t*a*p)*F,e[12]=C*F,e[13]=(u*g*i-m*d*i+m*r*f-t*g*f-u*r*y+t*d*y)*F,e[14]=(m*a*i-o*g*i-m*r*l+t*g*l+o*r*y-t*a*y)*F,e[15]=(o*d*i-u*a*i+u*r*l-t*d*l-o*r*f+t*a*f)*F,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,f=s*c,p=s*u,m=s*d,g=o*u,y=o*d,h=a*d,w=l*c,M=l*u,S=l*d,C=r.x,k=r.y,F=r.z;return i[0]=(1-(g+h))*C,i[1]=(p+S)*C,i[2]=(m-M)*C,i[3]=0,i[4]=(p-S)*k,i[5]=(1-(f+h))*k,i[6]=(y+w)*k,i[7]=0,i[8]=(m+M)*F,i[9]=(y-w)*F,i[10]=(1-(f+g))*F,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=hc.set(i[0],i[1],i[2]).length();const o=hc.set(i[4],i[5],i[6]).length(),a=hc.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Wi.copy(this);const c=1/s,u=1/o,d=1/a;return Wi.elements[0]*=c,Wi.elements[1]*=c,Wi.elements[2]*=c,Wi.elements[4]*=u,Wi.elements[5]*=u,Wi.elements[6]*=u,Wi.elements[8]*=d,Wi.elements[9]*=d,Wi.elements[10]*=d,t.setFromRotationMatrix(Wi),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=ko){const l=this.elements,c=2*s/(t-e),u=2*s/(r-i),d=(t+e)/(t-e),f=(r+i)/(r-i);let p,m;if(a===ko)p=-(o+s)/(o-s),m=-2*o*s/(o-s);else if(a===Xp)p=-o/(o-s),m=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=ko){const l=this.elements,c=1/(t-e),u=1/(r-i),d=1/(o-s),f=(t+e)*c,p=(r+i)*u;let m,g;if(a===ko)m=(o+s)*d,g=-2*d;else if(a===Xp)m=s*d,g=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=g,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const hc=new oe,Wi=new zn,G6=new oe(0,0,0),V6=new oe(1,1,1),ua=new oe,Nh=new oe,oi=new oe,OA=new zn,FA=new Dl;class Vo{constructor(e=0,t=0,r=0,i=Vo.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],d=i[2],f=i[6],p=i[10];switch(t){case"XYZ":this._y=Math.asin(Dt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Dt(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Dt(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Dt(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Dt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-Dt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,p),this._y=0);break;default:}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return OA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(OA,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return FA.setFromEuler(this),this.setFromQuaternion(FA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Vo.DEFAULT_ORDER="XYZ";class J2{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let $6=0;const UA=new oe,pc=new Dl,co=new zn,kh=new oe,bd=new oe,j6=new oe,W6=new Dl,HA=new oe(1,0,0),zA=new oe(0,1,0),GA=new oe(0,0,1),VA={type:"added"},q6={type:"removed"},mc={type:"childadded",child:null},kg={type:"childremoved",child:null};class ti extends ec{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:$6++}),this.uuid=Zu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ti.DEFAULT_UP.clone();const e=new oe,t=new Vo,r=new Dl,i=new oe(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new zn},normalMatrix:{value:new Tt}}),this.matrix=new zn,this.matrixWorld=new zn,this.matrixAutoUpdate=ti.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ti.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new J2,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return pc.setFromAxisAngle(e,t),this.quaternion.multiply(pc),this}rotateOnWorldAxis(e,t){return pc.setFromAxisAngle(e,t),this.quaternion.premultiply(pc),this}rotateX(e){return this.rotateOnAxis(HA,e)}rotateY(e){return this.rotateOnAxis(zA,e)}rotateZ(e){return this.rotateOnAxis(GA,e)}translateOnAxis(e,t){return UA.copy(e).applyQuaternion(this.quaternion),this.position.add(UA.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(HA,e)}translateY(e){return this.translateOnAxis(zA,e)}translateZ(e){return this.translateOnAxis(GA,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(co.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?kh.copy(e):kh.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),bd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?co.lookAt(bd,kh,this.up):co.lookAt(kh,bd,this.up),this.quaternion.setFromRotationMatrix(co),i&&(co.extractRotation(i.matrixWorld),pc.setFromRotationMatrix(co),this.quaternion.premultiply(pc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?this:(e&&e.isObject3D&&(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(VA),mc.child=e,this.dispatchEvent(mc),mc.child=null),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(q6),kg.child=e,this.dispatchEvent(kg),kg.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),co.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),co.multiply(e.parent.matrixWorld)),e.applyMatrix4(co),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(VA),mc.child=e,this.dispatchEvent(mc),mc.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bd,e,j6),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bd,W6,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),f=o(e.skeletons),p=o(e.animations),m=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),f.length>0&&(r.skeletons=f),p.length>0&&(r.animations=p),m.length>0&&(r.nodes=m)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}ti.DEFAULT_UP=new oe(0,1,0);ti.DEFAULT_MATRIX_AUTO_UPDATE=!0;ti.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const qi=new oe,uo=new oe,Bg=new oe,fo=new oe,gc=new oe,vc=new oe,$A=new oe,Lg=new oe,Dg=new oe,Og=new oe,Fg=new Hn,Ug=new Hn,Hg=new Hn;class ts{constructor(e=new oe,t=new oe,r=new oe){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),qi.subVectors(e,t),i.cross(qi);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){qi.subVectors(i,t),uo.subVectors(r,t),Bg.subVectors(e,t);const o=qi.dot(qi),a=qi.dot(uo),l=qi.dot(Bg),c=uo.dot(uo),u=uo.dot(Bg),d=o*c-a*a;if(d===0)return s.set(0,0,0),null;const f=1/d,p=(c*l-a*u)*f,m=(o*u-a*l)*f;return s.set(1-p-m,m,p)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,fo)===null?!1:fo.x>=0&&fo.y>=0&&fo.x+fo.y<=1}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,fo)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,fo.x),l.addScaledVector(o,fo.y),l.addScaledVector(a,fo.z),l)}static getInterpolatedAttribute(e,t,r,i,s,o){return Fg.setScalar(0),Ug.setScalar(0),Hg.setScalar(0),Fg.fromBufferAttribute(e,t),Ug.fromBufferAttribute(e,r),Hg.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(Fg,s.x),o.addScaledVector(Ug,s.y),o.addScaledVector(Hg,s.z),o}static isFrontFacing(e,t,r,i){return qi.subVectors(r,t),uo.subVectors(e,t),qi.cross(uo).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return qi.subVectors(this.c,this.b),uo.subVectors(this.a,this.b),qi.cross(uo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ts.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ts.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return ts.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return ts.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ts.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;gc.subVectors(i,r),vc.subVectors(s,r),Lg.subVectors(e,r);const l=gc.dot(Lg),c=vc.dot(Lg);if(l<=0&&c<=0)return t.copy(r);Dg.subVectors(e,i);const u=gc.dot(Dg),d=vc.dot(Dg);if(u>=0&&d<=u)return t.copy(i);const f=l*d-u*c;if(f<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(r).addScaledVector(gc,o);Og.subVectors(e,s);const p=gc.dot(Og),m=vc.dot(Og);if(m>=0&&p<=m)return t.copy(s);const g=p*c-l*m;if(g<=0&&c>=0&&m<=0)return a=c/(c-m),t.copy(r).addScaledVector(vc,a);const y=u*m-p*d;if(y<=0&&d-u>=0&&p-m>=0)return $A.subVectors(s,i),a=(d-u)/(d-u+(p-m)),t.copy(i).addScaledVector($A,a);const h=1/(y+g+f);return o=g*h,a=f*h,t.copy(r).addScaledVector(gc,o).addScaledVector(vc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const eM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},da={h:0,s:0,l:0},Bh={h:0,s:0,l:0};function zg(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class qt{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Pi){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Jt.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Jt.workingColorSpace){return this.r=e,this.g=t,this.b=r,Jt.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Jt.workingColorSpace){if(e=Bb(e,1),t=Dt(t,0,1),r=Dt(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=zg(o,s,e+1/3),this.g=zg(o,s,e),this.b=zg(o,s,e-1/3)}return Jt.toWorkingColorSpace(this,i),this}setStyle(e,t=Pi){function r(s){s!==void 0&&parseFloat(s)<1}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Pi){const r=eM[e.toLowerCase()];return r!==void 0&&this.setHex(r,t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Oo(e.r),this.g=Oo(e.g),this.b=Oo(e.b),this}copyLinearToSRGB(e){return this.r=Zc(e.r),this.g=Zc(e.g),this.b=Zc(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Pi){return Jt.fromWorkingColorSpace(wr.copy(this),e),Math.round(Dt(wr.r*255,0,255))*65536+Math.round(Dt(wr.g*255,0,255))*256+Math.round(Dt(wr.b*255,0,255))}getHexString(e=Pi){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Jt.workingColorSpace){Jt.fromWorkingColorSpace(wr.copy(this),t);const r=wr.r,i=wr.g,s=wr.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Jt.workingColorSpace){return Jt.fromWorkingColorSpace(wr.copy(this),t),e.r=wr.r,e.g=wr.g,e.b=wr.b,e}getStyle(e=Pi){Jt.fromWorkingColorSpace(wr.copy(this),e);const t=wr.r,r=wr.g,i=wr.b;return e!==Pi?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(da),this.setHSL(da.h+e,da.s+t,da.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(da),e.getHSL(Bh);const r=$d(da.h,Bh.h,t),i=$d(da.s,Bh.s,t),s=$d(da.l,Bh.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const wr=new qt;qt.NAMES=eM;let X6=0;class Qf extends ec{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:X6++}),this.uuid=Zu(),this.name="",this.type="Material",this.blending=Yc,this.side=Oa,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=my,this.blendDst=gy,this.blendEquation=fl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new qt(0,0,0),this.blendAlpha=0,this.depthFunc=gu,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=IA,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=lc,this.stencilZFail=lc,this.stencilZPass=lc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0)continue;const i=this[t];i!==void 0&&(i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r)}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Yc&&(r.blending=this.blending),this.side!==Oa&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==my&&(r.blendSrc=this.blendSrc),this.blendDst!==gy&&(r.blendDst=this.blendDst),this.blendEquation!==fl&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==gu&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==IA&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==lc&&(r.stencilFail=this.stencilFail),this.stencilZFail!==lc&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==lc&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){}}class Db extends Qf{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new qt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vo,this.combine=O2,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Gn=new oe,Lh=new Lt;class Kr{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=CA,this.updateRanges=[],this.gpuType=No,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Lh.fromBufferAttribute(this,t),Lh.applyMatrix3(e),this.setXY(t,Lh.x,Lh.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Gn.fromBufferAttribute(this,t),Gn.applyMatrix3(e),this.setXYZ(t,Gn.x,Gn.y,Gn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Gn.fromBufferAttribute(this,t),Gn.applyMatrix4(e),this.setXYZ(t,Gn.x,Gn.y,Gn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Gn.fromBufferAttribute(this,t),Gn.applyNormalMatrix(e),this.setXYZ(t,Gn.x,Gn.y,Gn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Gn.fromBufferAttribute(this,t),Gn.transformDirection(e),this.setXYZ(t,Gn.x,Gn.y,Gn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=kc(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Cr(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=kc(t,this.array)),t}setX(e,t){return this.normalized&&(t=Cr(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=kc(t,this.array)),t}setY(e,t){return this.normalized&&(t=Cr(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=kc(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Cr(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=kc(t,this.array)),t}setW(e,t){return this.normalized&&(t=Cr(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Cr(t,this.array),r=Cr(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Cr(t,this.array),r=Cr(r,this.array),i=Cr(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Cr(t,this.array),r=Cr(r,this.array),i=Cr(i,this.array),s=Cr(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==CA&&(e.usage=this.usage),e}}class tM extends Kr{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class nM extends Kr{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class $s extends Kr{constructor(e,t,r){super(new Float32Array(e),t,r)}}let K6=0;const Si=new zn,Gg=new ti,yc=new oe,ai=new Yf,xd=new Yf,rr=new oe;class us extends ec{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:K6++}),this.uuid=Zu(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Y2(e)?nM:tM)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Tt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Si.makeRotationFromQuaternion(e),this.applyMatrix4(Si),this}rotateX(e){return Si.makeRotationX(e),this.applyMatrix4(Si),this}rotateY(e){return Si.makeRotationY(e),this.applyMatrix4(Si),this}rotateZ(e){return Si.makeRotationZ(e),this.applyMatrix4(Si),this}translate(e,t,r){return Si.makeTranslation(e,t,r),this.applyMatrix4(Si),this}scale(e,t,r){return Si.makeScale(e,t,r),this.applyMatrix4(Si),this}lookAt(e){return Gg.lookAt(e),Gg.updateMatrix(),this.applyMatrix4(Gg.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(yc).negate(),this.translate(yc.x,yc.y,yc.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const r=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];r.push(o.x,o.y,o.z||0)}this.setAttribute("position",new $s(r,3))}else{const r=Math.min(e.length,t.count);for(let i=0;i<r;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count,t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Yf);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){this.boundingBox.set(new oe(-1/0,-1/0,-1/0),new oe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];ai.setFromBufferAttribute(s),this.morphTargetsRelative?(rr.addVectors(this.boundingBox.min,ai.min),this.boundingBox.expandByPoint(rr),rr.addVectors(this.boundingBox.max,ai.max),this.boundingBox.expandByPoint(rr)):(this.boundingBox.expandByPoint(ai.min),this.boundingBox.expandByPoint(ai.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new b0);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){this.boundingSphere.set(new oe,1/0);return}if(e){const r=this.boundingSphere.center;if(ai.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];xd.setFromBufferAttribute(a),this.morphTargetsRelative?(rr.addVectors(ai.min,xd.min),ai.expandByPoint(rr),rr.addVectors(ai.max,xd.max),ai.expandByPoint(rr)):(ai.expandByPoint(xd.min),ai.expandByPoint(xd.max))}ai.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)rr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(rr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)rr.fromBufferAttribute(a,c),l&&(yc.fromBufferAttribute(e,c),rr.add(yc)),i=Math.max(i,r.distanceToSquared(rr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0)return;const r=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Kr(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let N=0;N<r.count;N++)a[N]=new oe,l[N]=new oe;const c=new oe,u=new oe,d=new oe,f=new Lt,p=new Lt,m=new Lt,g=new oe,y=new oe;function h(N,B,I){c.fromBufferAttribute(r,N),u.fromBufferAttribute(r,B),d.fromBufferAttribute(r,I),f.fromBufferAttribute(s,N),p.fromBufferAttribute(s,B),m.fromBufferAttribute(s,I),u.sub(c),d.sub(c),p.sub(f),m.sub(f);const U=1/(p.x*m.y-m.x*p.y);isFinite(U)&&(g.copy(u).multiplyScalar(m.y).addScaledVector(d,-p.y).multiplyScalar(U),y.copy(d).multiplyScalar(p.x).addScaledVector(u,-m.x).multiplyScalar(U),a[N].add(g),a[B].add(g),a[I].add(g),l[N].add(y),l[B].add(y),l[I].add(y))}let w=this.groups;w.length===0&&(w=[{start:0,count:e.count}]);for(let N=0,B=w.length;N<B;++N){const I=w[N],U=I.start,G=I.count;for(let R=U,v=U+G;R<v;R+=3)h(e.getX(R+0),e.getX(R+1),e.getX(R+2))}const M=new oe,S=new oe,C=new oe,k=new oe;function F(N){C.fromBufferAttribute(i,N),k.copy(C);const B=a[N];M.copy(B),M.sub(C.multiplyScalar(C.dot(B))).normalize(),S.crossVectors(k,B);const U=S.dot(l[N])<0?-1:1;o.setXYZW(N,M.x,M.y,M.z,U)}for(let N=0,B=w.length;N<B;++N){const I=w[N],U=I.start,G=I.count;for(let R=U,v=U+G;R<v;R+=3)F(e.getX(R+0)),F(e.getX(R+1)),F(e.getX(R+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Kr(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let f=0,p=r.count;f<p;f++)r.setXYZ(f,0,0,0);const i=new oe,s=new oe,o=new oe,a=new oe,l=new oe,c=new oe,u=new oe,d=new oe;if(e)for(let f=0,p=e.count;f<p;f+=3){const m=e.getX(f+0),g=e.getX(f+1),y=e.getX(f+2);i.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),o.fromBufferAttribute(t,y),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),a.fromBufferAttribute(r,m),l.fromBufferAttribute(r,g),c.fromBufferAttribute(r,y),a.add(u),l.add(u),c.add(u),r.setXYZ(m,a.x,a.y,a.z),r.setXYZ(g,l.x,l.y,l.z),r.setXYZ(y,c.x,c.y,c.z)}else for(let f=0,p=t.count;f<p;f+=3)i.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),r.setXYZ(f+0,u.x,u.y,u.z),r.setXYZ(f+1,u.x,u.y,u.z),r.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)rr.fromBufferAttribute(e,t),rr.normalize(),e.setXYZ(t,rr.x,rr.y,rr.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,f=new c.constructor(l.length*u);let p=0,m=0;for(let g=0,y=l.length;g<y;g++){a.isInterleavedBufferAttribute?p=l[g]*a.data.stride+a.offset:p=l[g]*u;for(let h=0;h<u;h++)f[m++]=c[p++]}return new Kr(f,u,d)}if(this.index===null)return this;const t=new us,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const f=c[u],p=e(f,r);l.push(p)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,f=c.length;d<f;d++){const p=c[d];u.push(p.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let f=0,p=d.length;f<p;f++)u.push(d[f].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const jA=new zn,rl=new Lb,Dh=new b0,WA=new oe,Oh=new oe,Fh=new oe,Uh=new oe,Vg=new oe,Hh=new oe,qA=new oe,zh=new oe;class Hs extends ti{constructor(e=new us,t=new Db){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){Hh.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],d=s[l];u!==0&&(Vg.fromBufferAttribute(d,e),o?Hh.addScaledVector(Vg,u):Hh.addScaledVector(Vg.sub(t),u))}t.add(Hh)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Dh.copy(r.boundingSphere),Dh.applyMatrix4(s),rl.copy(e.ray).recast(e.near),!(Dh.containsPoint(rl.origin)===!1&&(rl.intersectSphere(Dh,WA)===null||rl.origin.distanceToSquared(WA)>(e.far-e.near)**2))&&(jA.copy(s).invert(),rl.copy(e.ray).applyMatrix4(jA),!(r.boundingBox!==null&&rl.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,rl)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,f=s.groups,p=s.drawRange;if(a!==null)if(Array.isArray(o))for(let m=0,g=f.length;m<g;m++){const y=f[m],h=o[y.materialIndex],w=Math.max(y.start,p.start),M=Math.min(a.count,Math.min(y.start+y.count,p.start+p.count));for(let S=w,C=M;S<C;S+=3){const k=a.getX(S),F=a.getX(S+1),N=a.getX(S+2);i=Gh(this,h,e,r,c,u,d,k,F,N),i&&(i.faceIndex=Math.floor(S/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const m=Math.max(0,p.start),g=Math.min(a.count,p.start+p.count);for(let y=m,h=g;y<h;y+=3){const w=a.getX(y),M=a.getX(y+1),S=a.getX(y+2);i=Gh(this,o,e,r,c,u,d,w,M,S),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let m=0,g=f.length;m<g;m++){const y=f[m],h=o[y.materialIndex],w=Math.max(y.start,p.start),M=Math.min(l.count,Math.min(y.start+y.count,p.start+p.count));for(let S=w,C=M;S<C;S+=3){const k=S,F=S+1,N=S+2;i=Gh(this,h,e,r,c,u,d,k,F,N),i&&(i.faceIndex=Math.floor(S/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const m=Math.max(0,p.start),g=Math.min(l.count,p.start+p.count);for(let y=m,h=g;y<h;y+=3){const w=y,M=y+1,S=y+2;i=Gh(this,o,e,r,c,u,d,w,M,S),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}}}function Y6(n,e,t,r,i,s,o,a){let l;if(e.side===ei?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Oa,a),l===null)return null;zh.copy(a),zh.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(zh);return c<t.near||c>t.far?null:{distance:c,point:zh.clone(),object:n}}function Gh(n,e,t,r,i,s,o,a,l,c){n.getVertexPosition(a,Oh),n.getVertexPosition(l,Fh),n.getVertexPosition(c,Uh);const u=Y6(n,e,t,r,Oh,Fh,Uh,qA);if(u){const d=new oe;ts.getBarycoord(qA,Oh,Fh,Uh,d),i&&(u.uv=ts.getInterpolatedAttribute(i,a,l,c,d,new Lt)),s&&(u.uv1=ts.getInterpolatedAttribute(s,a,l,c,d,new Lt)),o&&(u.normal=ts.getInterpolatedAttribute(o,a,l,c,d,new oe),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new oe,materialIndex:0};ts.getNormal(Oh,Fh,Uh,f.normal),u.face=f,u.barycoord=d}return u}class Zf extends us{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let f=0,p=0;m("z","y","x",-1,-1,r,t,e,o,s,0),m("z","y","x",1,-1,r,t,-e,o,s,1),m("x","z","y",1,1,e,r,t,i,o,2),m("x","z","y",1,-1,e,r,-t,i,o,3),m("x","y","z",1,-1,e,t,r,i,s,4),m("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new $s(c,3)),this.setAttribute("normal",new $s(u,3)),this.setAttribute("uv",new $s(d,2));function m(g,y,h,w,M,S,C,k,F,N,B){const I=S/F,U=C/N,G=S/2,R=C/2,v=k/2,_=F+1,b=N+1;let A=0,T=0;const D=new oe;for(let V=0;V<b;V++){const O=V*U-R;for(let x=0;x<_;x++){const $=x*I-G;D[g]=$*w,D[y]=O*M,D[h]=v,c.push(D.x,D.y,D.z),D[g]=0,D[y]=0,D[h]=k>0?1:-1,u.push(D.x,D.y,D.z),d.push(x/F),d.push(1-V/N),A+=1}}for(let V=0;V<N;V++)for(let O=0;O<F;O++){const x=f+O+_*V,$=f+O+_*(V+1),K=f+(O+1)+_*(V+1),E=f+(O+1)+_*V;l.push(x,$,E),l.push($,K,E),T+=6}a.addGroup(p,T,B),p+=T,f+=A}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function wu(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?e[t][r]=null:e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Pr(n){const e={};for(let t=0;t<n.length;t++){const r=wu(n[t]);for(const i in r)e[i]=r[i]}return e}function Q6(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function rM(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Jt.workingColorSpace}const Z6={clone:wu,merge:Pr};var J6=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,e8=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Fa extends Qf{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=J6,this.fragmentShader=e8,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=wu(e.uniforms),this.uniformsGroups=Q6(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class iM extends ti{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new zn,this.projectionMatrix=new zn,this.projectionMatrixInverse=new zn,this.coordinateSystem=ko}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const fa=new oe,XA=new Lt,KA=new Lt;class Ni extends iM{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=uf*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Vd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return uf*2*Math.atan(Math.tan(Vd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){fa.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(fa.x,fa.y).multiplyScalar(-e/fa.z),fa.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(fa.x,fa.y).multiplyScalar(-e/fa.z)}getViewSize(e,t){return this.getViewBounds(e,XA,KA),t.subVectors(KA,XA)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Vd*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const _c=-90,bc=1;class t8 extends ti{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Ni(_c,bc,e,t);i.layers=this.layers,this.add(i);const s=new Ni(_c,bc,e,t);s.layers=this.layers,this.add(s);const o=new Ni(_c,bc,e,t);o.layers=this.layers,this.add(o);const a=new Ni(_c,bc,e,t);a.layers=this.layers,this.add(a);const l=new Ni(_c,bc,e,t);l.layers=this.layers,this.add(l);const c=new Ni(_c,bc,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===ko)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Xp)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),m=e.xr.enabled;e.xr.enabled=!1;const g=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,c),r.texture.generateMipmaps=g,e.setRenderTarget(r,5,i),e.render(t,u),e.setRenderTarget(d,f,p),e.xr.enabled=m,r.texture.needsPMREMUpdate=!0}}class sM extends Br{constructor(e,t,r,i,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:vu,super(e,t,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class n8 extends Ll{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new sM(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Us}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Zf(5,5,5),s=new Fa({name:"CubemapFromEquirect",uniforms:wu(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ei,blending:Ca});s.uniforms.tEquirect.value=t;const o=new Hs(i,s),a=t.minFilter;return t.minFilter===yl&&(t.minFilter=Us),new t8(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}class r8 extends ti{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Vo,this.environmentIntensity=1,this.environmentRotation=new Vo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}const $g=new oe,i8=new oe,s8=new Tt;class ba{constructor(e=new oe(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=$g.subVectors(r,t).cross(i8.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta($g),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||s8.getNormalMatrix(e),i=this.coplanarPoint($g).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const il=new b0,Vh=new oe;class oM{constructor(e=new ba,t=new ba,r=new ba,i=new ba,s=new ba,o=new ba){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=ko){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],d=i[6],f=i[7],p=i[8],m=i[9],g=i[10],y=i[11],h=i[12],w=i[13],M=i[14],S=i[15];if(r[0].setComponents(l-s,f-c,y-p,S-h).normalize(),r[1].setComponents(l+s,f+c,y+p,S+h).normalize(),r[2].setComponents(l+o,f+u,y+m,S+w).normalize(),r[3].setComponents(l-o,f-u,y-m,S-w).normalize(),r[4].setComponents(l-a,f-d,y-g,S-M).normalize(),t===ko)r[5].setComponents(l+a,f+d,y+g,S+M).normalize();else if(t===Xp)r[5].setComponents(a,d,g,M).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),il.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),il.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(il)}intersectsSprite(e){return il.center.set(0,0,0),il.radius=.7071067811865476,il.applyMatrix4(e.matrixWorld),this.intersectsSphere(il)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Vh.x=i.normal.x>0?e.max.x:e.min.x,Vh.y=i.normal.y>0?e.max.y:e.min.y,Vh.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Vh)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class e_ extends Qf{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new qt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const YA=new zn,t_=new Lb,$h=new b0,jh=new oe;class QA extends ti{constructor(e=new us,t=new e_){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),$h.copy(r.boundingSphere),$h.applyMatrix4(i),$h.radius+=s,e.ray.intersectsSphere($h)===!1)return;YA.copy(i).invert(),t_.copy(e.ray).applyMatrix4(YA);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,d=r.attributes.position;if(c!==null){const f=Math.max(0,o.start),p=Math.min(c.count,o.start+o.count);for(let m=f,g=p;m<g;m++){const y=c.getX(m);jh.fromBufferAttribute(d,y),ZA(jh,y,l,i,e,t,this)}}else{const f=Math.max(0,o.start),p=Math.min(d.count,o.start+o.count);for(let m=f,g=p;m<g;m++)jh.fromBufferAttribute(d,m),ZA(jh,m,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function ZA(n,e,t,r,i,s,o){const a=t_.distanceSqToPoint(n);if(a<t){const l=new oe;t_.closestPointToPoint(n,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class Wh extends ti{constructor(){super(),this.isGroup=!0,this.type="Group"}}class aM extends Br{constructor(e,t,r,i,s,o,a,l,c,u=Qc){if(u!==Qc&&u!==bu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Qc&&(r=Bl),r===void 0&&u===bu&&(r=_u),super(null,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:as,this.minFilter=l!==void 0?l:as,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class x0 extends us{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,d=e/a,f=t/l,p=[],m=[],g=[],y=[];for(let h=0;h<u;h++){const w=h*f-o;for(let M=0;M<c;M++){const S=M*d-s;m.push(S,-w,0),g.push(0,0,1),y.push(M/a),y.push(1-h/l)}}for(let h=0;h<l;h++)for(let w=0;w<a;w++){const M=w+c*h,S=w+c*(h+1),C=w+1+c*(h+1),k=w+1+c*h;p.push(M,S,k),p.push(S,C,k)}this.setIndex(p),this.setAttribute("position",new $s(m,3)),this.setAttribute("normal",new $s(g,3)),this.setAttribute("uv",new $s(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new x0(e.width,e.height,e.widthSegments,e.heightSegments)}}class Ob extends us{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new oe,f=new oe,p=[],m=[],g=[],y=[];for(let h=0;h<=r;h++){const w=[],M=h/r;let S=0;h===0&&o===0?S=.5/t:h===r&&l===Math.PI&&(S=-.5/t);for(let C=0;C<=t;C++){const k=C/t;d.x=-e*Math.cos(i+k*s)*Math.sin(o+M*a),d.y=e*Math.cos(o+M*a),d.z=e*Math.sin(i+k*s)*Math.sin(o+M*a),m.push(d.x,d.y,d.z),f.copy(d).normalize(),g.push(f.x,f.y,f.z),y.push(k+S,1-M),w.push(c++)}u.push(w)}for(let h=0;h<r;h++)for(let w=0;w<t;w++){const M=u[h][w+1],S=u[h][w],C=u[h+1][w],k=u[h+1][w+1];(h!==0||o>0)&&p.push(M,S,k),(h!==r-1||l<Math.PI)&&p.push(S,C,k)}this.setIndex(p),this.setAttribute("position",new $s(m,3)),this.setAttribute("normal",new $s(g,3)),this.setAttribute("uv",new $s(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ob(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class o8 extends Qf{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=r6,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class a8 extends Qf{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class l8 extends iM{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class c8 extends Ni{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class JA{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Dt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Dt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class u8 extends ec{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function e1(n,e,t,r){const i=d8(r);switch(t){case G2:return n*e;case $2:return n*e;case j2:return n*e*2;case W2:return n*e/i.components*i.byteLength;case Pb:return n*e/i.components*i.byteLength;case q2:return n*e*2/i.components*i.byteLength;case Nb:return n*e*2/i.components*i.byteLength;case V2:return n*e*3/i.components*i.byteLength;case rs:return n*e*4/i.components*i.byteLength;case kb:return n*e*4/i.components*i.byteLength;case fp:case hp:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case pp:case mp:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Iy:case Py:return Math.max(n,16)*Math.max(e,8)/4;case Ry:case Cy:return Math.max(n,8)*Math.max(e,8)/2;case Ny:case ky:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case By:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Ly:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Dy:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case Oy:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case Fy:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case Uy:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Hy:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case zy:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Gy:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case Vy:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case $y:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case jy:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case Wy:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case qy:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case Xy:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case gp:case Ky:case Yy:return Math.ceil(n/4)*Math.ceil(e/4)*16;case X2:case Qy:return Math.ceil(n/4)*Math.ceil(e/4)*8;case Zy:case Jy:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function d8(n){switch(n){case Go:case U2:return{byteLength:1,components:1};case cf:case H2:case Kf:return{byteLength:2,components:1};case Ib:case Cb:return{byteLength:2,components:4};case Bl:case Rb:case No:return{byteLength:4,components:1};case z2:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Mb}}));typeof window<"u"&&(window.__THREE__||(window.__THREE__=Mb));/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function lM(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function f8(n){const e=new WeakMap;function t(a,l){const c=a.array,u=a.usage,d=c.byteLength,f=n.createBuffer();n.bindBuffer(l,f),n.bufferData(l,c,u),a.onUploadCallback();let p;if(c instanceof Float32Array)p=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?p=n.HALF_FLOAT:p=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)p=n.SHORT;else if(c instanceof Uint32Array)p=n.UNSIGNED_INT;else if(c instanceof Int32Array)p=n.INT;else if(c instanceof Int8Array)p=n.BYTE;else if(c instanceof Uint8Array)p=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)p=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:f,type:p,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:d}}function r(a,l,c){const u=l.array,d=l.updateRanges;if(n.bindBuffer(c,a),d.length===0)n.bufferSubData(c,0,u);else{d.sort((p,m)=>p.start-m.start);let f=0;for(let p=1;p<d.length;p++){const m=d[f],g=d[p];g.start<=m.start+m.count+1?m.count=Math.max(m.count,g.start+g.count-m.start):(++f,d[f]=g)}d.length=f+1;for(let p=0,m=d.length;p<m;p++){const g=d[p];n.bufferSubData(c,g.start*u.BYTES_PER_ELEMENT,u,g.start,g.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,a,l),c.version=a.version}}return{get:i,remove:s,update:o}}var h8=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,p8=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,m8=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,g8=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,v8=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,y8=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,_8=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,b8=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,x8=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,w8=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,A8=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,E8=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,S8=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,T8=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,M8=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,R8=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,I8=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,C8=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,P8=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,N8=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,k8=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,B8=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,L8=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,D8=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,O8=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,F8=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,U8=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,H8=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,z8=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,G8=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,V8="gl_FragColor = linearToOutputTexel( gl_FragColor );",$8=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,j8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,W8=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,q8=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,X8=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,K8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Y8=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Q8=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Z8=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,J8=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,eH=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,tH=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,nH=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,rH=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,iH=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,sH=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,oH=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,aH=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lH=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,cH=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,uH=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,dH=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,fH=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,hH=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,pH=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,mH=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,gH=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,vH=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,yH=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,_H=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,bH=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,xH=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,wH=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,AH=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,EH=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,SH=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,TH=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,MH=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,RH=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,IH=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,CH=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,PH=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,NH=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,kH=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,BH=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,LH=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,DH=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,OH=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,FH=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,UH=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,HH=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,zH=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,GH=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,VH=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,$H=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,jH=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,WH=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,qH=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,XH=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,KH=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,YH=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,QH=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,ZH=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,JH=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,ez=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,tz=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,nz=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,rz=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,iz=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,sz=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,oz=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,az=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,lz=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,cz=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uz=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,dz=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const fz=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,hz=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,pz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,mz=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,gz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,vz=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,yz=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,_z=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,bz=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,xz=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,wz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Az=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ez=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Sz=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Tz=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Mz=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Rz=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Iz=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Cz=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Pz=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Nz=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,kz=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Bz=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Lz=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Dz=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Oz=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Fz=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Uz=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Hz=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,zz=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Gz=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Vz=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,$z=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,jz=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,It={alphahash_fragment:h8,alphahash_pars_fragment:p8,alphamap_fragment:m8,alphamap_pars_fragment:g8,alphatest_fragment:v8,alphatest_pars_fragment:y8,aomap_fragment:_8,aomap_pars_fragment:b8,batching_pars_vertex:x8,batching_vertex:w8,begin_vertex:A8,beginnormal_vertex:E8,bsdfs:S8,iridescence_fragment:T8,bumpmap_pars_fragment:M8,clipping_planes_fragment:R8,clipping_planes_pars_fragment:I8,clipping_planes_pars_vertex:C8,clipping_planes_vertex:P8,color_fragment:N8,color_pars_fragment:k8,color_pars_vertex:B8,color_vertex:L8,common:D8,cube_uv_reflection_fragment:O8,defaultnormal_vertex:F8,displacementmap_pars_vertex:U8,displacementmap_vertex:H8,emissivemap_fragment:z8,emissivemap_pars_fragment:G8,colorspace_fragment:V8,colorspace_pars_fragment:$8,envmap_fragment:j8,envmap_common_pars_fragment:W8,envmap_pars_fragment:q8,envmap_pars_vertex:X8,envmap_physical_pars_fragment:sH,envmap_vertex:K8,fog_vertex:Y8,fog_pars_vertex:Q8,fog_fragment:Z8,fog_pars_fragment:J8,gradientmap_pars_fragment:eH,lightmap_pars_fragment:tH,lights_lambert_fragment:nH,lights_lambert_pars_fragment:rH,lights_pars_begin:iH,lights_toon_fragment:oH,lights_toon_pars_fragment:aH,lights_phong_fragment:lH,lights_phong_pars_fragment:cH,lights_physical_fragment:uH,lights_physical_pars_fragment:dH,lights_fragment_begin:fH,lights_fragment_maps:hH,lights_fragment_end:pH,logdepthbuf_fragment:mH,logdepthbuf_pars_fragment:gH,logdepthbuf_pars_vertex:vH,logdepthbuf_vertex:yH,map_fragment:_H,map_pars_fragment:bH,map_particle_fragment:xH,map_particle_pars_fragment:wH,metalnessmap_fragment:AH,metalnessmap_pars_fragment:EH,morphinstance_vertex:SH,morphcolor_vertex:TH,morphnormal_vertex:MH,morphtarget_pars_vertex:RH,morphtarget_vertex:IH,normal_fragment_begin:CH,normal_fragment_maps:PH,normal_pars_fragment:NH,normal_pars_vertex:kH,normal_vertex:BH,normalmap_pars_fragment:LH,clearcoat_normal_fragment_begin:DH,clearcoat_normal_fragment_maps:OH,clearcoat_pars_fragment:FH,iridescence_pars_fragment:UH,opaque_fragment:HH,packing:zH,premultiplied_alpha_fragment:GH,project_vertex:VH,dithering_fragment:$H,dithering_pars_fragment:jH,roughnessmap_fragment:WH,roughnessmap_pars_fragment:qH,shadowmap_pars_fragment:XH,shadowmap_pars_vertex:KH,shadowmap_vertex:YH,shadowmask_pars_fragment:QH,skinbase_vertex:ZH,skinning_pars_vertex:JH,skinning_vertex:ez,skinnormal_vertex:tz,specularmap_fragment:nz,specularmap_pars_fragment:rz,tonemapping_fragment:iz,tonemapping_pars_fragment:sz,transmission_fragment:oz,transmission_pars_fragment:az,uv_pars_fragment:lz,uv_pars_vertex:cz,uv_vertex:uz,worldpos_vertex:dz,background_vert:fz,background_frag:hz,backgroundCube_vert:pz,backgroundCube_frag:mz,cube_vert:gz,cube_frag:vz,depth_vert:yz,depth_frag:_z,distanceRGBA_vert:bz,distanceRGBA_frag:xz,equirect_vert:wz,equirect_frag:Az,linedashed_vert:Ez,linedashed_frag:Sz,meshbasic_vert:Tz,meshbasic_frag:Mz,meshlambert_vert:Rz,meshlambert_frag:Iz,meshmatcap_vert:Cz,meshmatcap_frag:Pz,meshnormal_vert:Nz,meshnormal_frag:kz,meshphong_vert:Bz,meshphong_frag:Lz,meshphysical_vert:Dz,meshphysical_frag:Oz,meshtoon_vert:Fz,meshtoon_frag:Uz,points_vert:Hz,points_frag:zz,shadow_vert:Gz,shadow_frag:Vz,sprite_vert:$z,sprite_frag:jz},Fe={common:{diffuse:{value:new qt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Tt},alphaMap:{value:null},alphaMapTransform:{value:new Tt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Tt}},envmap:{envMap:{value:null},envMapRotation:{value:new Tt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Tt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Tt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Tt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Tt},normalScale:{value:new Lt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Tt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Tt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Tt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Tt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new qt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new qt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Tt},alphaTest:{value:0},uvTransform:{value:new Tt}},sprite:{diffuse:{value:new qt(16777215)},opacity:{value:1},center:{value:new Lt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Tt},alphaMap:{value:null},alphaMapTransform:{value:new Tt},alphaTest:{value:0}}},Cs={basic:{uniforms:Pr([Fe.common,Fe.specularmap,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.fog]),vertexShader:It.meshbasic_vert,fragmentShader:It.meshbasic_frag},lambert:{uniforms:Pr([Fe.common,Fe.specularmap,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.fog,Fe.lights,{emissive:{value:new qt(0)}}]),vertexShader:It.meshlambert_vert,fragmentShader:It.meshlambert_frag},phong:{uniforms:Pr([Fe.common,Fe.specularmap,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.fog,Fe.lights,{emissive:{value:new qt(0)},specular:{value:new qt(1118481)},shininess:{value:30}}]),vertexShader:It.meshphong_vert,fragmentShader:It.meshphong_frag},standard:{uniforms:Pr([Fe.common,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.roughnessmap,Fe.metalnessmap,Fe.fog,Fe.lights,{emissive:{value:new qt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:It.meshphysical_vert,fragmentShader:It.meshphysical_frag},toon:{uniforms:Pr([Fe.common,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.gradientmap,Fe.fog,Fe.lights,{emissive:{value:new qt(0)}}]),vertexShader:It.meshtoon_vert,fragmentShader:It.meshtoon_frag},matcap:{uniforms:Pr([Fe.common,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.fog,{matcap:{value:null}}]),vertexShader:It.meshmatcap_vert,fragmentShader:It.meshmatcap_frag},points:{uniforms:Pr([Fe.points,Fe.fog]),vertexShader:It.points_vert,fragmentShader:It.points_frag},dashed:{uniforms:Pr([Fe.common,Fe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:It.linedashed_vert,fragmentShader:It.linedashed_frag},depth:{uniforms:Pr([Fe.common,Fe.displacementmap]),vertexShader:It.depth_vert,fragmentShader:It.depth_frag},normal:{uniforms:Pr([Fe.common,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,{opacity:{value:1}}]),vertexShader:It.meshnormal_vert,fragmentShader:It.meshnormal_frag},sprite:{uniforms:Pr([Fe.sprite,Fe.fog]),vertexShader:It.sprite_vert,fragmentShader:It.sprite_frag},background:{uniforms:{uvTransform:{value:new Tt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:It.background_vert,fragmentShader:It.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Tt}},vertexShader:It.backgroundCube_vert,fragmentShader:It.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:It.cube_vert,fragmentShader:It.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:It.equirect_vert,fragmentShader:It.equirect_frag},distanceRGBA:{uniforms:Pr([Fe.common,Fe.displacementmap,{referencePosition:{value:new oe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:It.distanceRGBA_vert,fragmentShader:It.distanceRGBA_frag},shadow:{uniforms:Pr([Fe.lights,Fe.fog,{color:{value:new qt(0)},opacity:{value:1}}]),vertexShader:It.shadow_vert,fragmentShader:It.shadow_frag}};Cs.physical={uniforms:Pr([Cs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Tt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Tt},clearcoatNormalScale:{value:new Lt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Tt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Tt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Tt},sheen:{value:0},sheenColor:{value:new qt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Tt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Tt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Tt},transmissionSamplerSize:{value:new Lt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Tt},attenuationDistance:{value:0},attenuationColor:{value:new qt(0)},specularColor:{value:new qt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Tt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Tt},anisotropyVector:{value:new Lt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Tt}}]),vertexShader:It.meshphysical_vert,fragmentShader:It.meshphysical_frag};const qh={r:0,b:0,g:0},sl=new Vo,Wz=new zn;function qz(n,e,t,r,i,s,o){const a=new qt(0);let l=s===!0?0:1,c,u,d=null,f=0,p=null;function m(M){let S=M.isScene===!0?M.background:null;return S&&S.isTexture&&(S=(M.backgroundBlurriness>0?t:e).get(S)),S}function g(M){let S=!1;const C=m(M);C===null?h(a,l):C&&C.isColor&&(h(C,1),S=!0);const k=n.xr.getEnvironmentBlendMode();k==="additive"?r.buffers.color.setClear(0,0,0,1,o):k==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||S)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function y(M,S){const C=m(S);C&&(C.isCubeTexture||C.mapping===_0)?(u===void 0&&(u=new Hs(new Zf(1,1,1),new Fa({name:"BackgroundCubeMaterial",uniforms:wu(Cs.backgroundCube.uniforms),vertexShader:Cs.backgroundCube.vertexShader,fragmentShader:Cs.backgroundCube.fragmentShader,side:ei,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(k,F,N){this.matrixWorld.copyPosition(N.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),sl.copy(S.backgroundRotation),sl.x*=-1,sl.y*=-1,sl.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(sl.y*=-1,sl.z*=-1),u.material.uniforms.envMap.value=C,u.material.uniforms.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(Wz.makeRotationFromEuler(sl)),u.material.toneMapped=Jt.getTransfer(C.colorSpace)!==mn,(d!==C||f!==C.version||p!==n.toneMapping)&&(u.material.needsUpdate=!0,d=C,f=C.version,p=n.toneMapping),u.layers.enableAll(),M.unshift(u,u.geometry,u.material,0,0,null)):C&&C.isTexture&&(c===void 0&&(c=new Hs(new x0(2,2),new Fa({name:"BackgroundMaterial",uniforms:wu(Cs.background.uniforms),vertexShader:Cs.background.vertexShader,fragmentShader:Cs.background.fragmentShader,side:Oa,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=C,c.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,c.material.toneMapped=Jt.getTransfer(C.colorSpace)!==mn,C.matrixAutoUpdate===!0&&C.updateMatrix(),c.material.uniforms.uvTransform.value.copy(C.matrix),(d!==C||f!==C.version||p!==n.toneMapping)&&(c.material.needsUpdate=!0,d=C,f=C.version,p=n.toneMapping),c.layers.enableAll(),M.unshift(c,c.geometry,c.material,0,0,null))}function h(M,S){M.getRGB(qh,rM(n)),r.buffers.color.setClear(qh.r,qh.g,qh.b,S,o)}function w(){u!==void 0&&(u.geometry.dispose(),u.material.dispose()),c!==void 0&&(c.geometry.dispose(),c.material.dispose())}return{getClearColor:function(){return a},setClearColor:function(M,S=1){a.set(M),l=S,h(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(M){l=M,h(a,l)},render:g,addToRenderList:y,dispose:w}}function Xz(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=f(null);let s=i,o=!1;function a(I,U,G,R,v){let _=!1;const b=d(R,G,U);s!==b&&(s=b,c(s.object)),_=p(I,R,G,v),_&&m(I,R,G,v),v!==null&&e.update(v,n.ELEMENT_ARRAY_BUFFER),(_||o)&&(o=!1,S(I,U,G,R),v!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(v).buffer))}function l(){return n.createVertexArray()}function c(I){return n.bindVertexArray(I)}function u(I){return n.deleteVertexArray(I)}function d(I,U,G){const R=G.wireframe===!0;let v=r[I.id];v===void 0&&(v={},r[I.id]=v);let _=v[U.id];_===void 0&&(_={},v[U.id]=_);let b=_[R];return b===void 0&&(b=f(l()),_[R]=b),b}function f(I){const U=[],G=[],R=[];for(let v=0;v<t;v++)U[v]=0,G[v]=0,R[v]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:G,attributeDivisors:R,object:I,attributes:{},index:null}}function p(I,U,G,R){const v=s.attributes,_=U.attributes;let b=0;const A=G.getAttributes();for(const T in A)if(A[T].location>=0){const V=v[T];let O=_[T];if(O===void 0&&(T==="instanceMatrix"&&I.instanceMatrix&&(O=I.instanceMatrix),T==="instanceColor"&&I.instanceColor&&(O=I.instanceColor)),V===void 0||V.attribute!==O||O&&V.data!==O.data)return!0;b++}return s.attributesNum!==b||s.index!==R}function m(I,U,G,R){const v={},_=U.attributes;let b=0;const A=G.getAttributes();for(const T in A)if(A[T].location>=0){let V=_[T];V===void 0&&(T==="instanceMatrix"&&I.instanceMatrix&&(V=I.instanceMatrix),T==="instanceColor"&&I.instanceColor&&(V=I.instanceColor));const O={};O.attribute=V,V&&V.data&&(O.data=V.data),v[T]=O,b++}s.attributes=v,s.attributesNum=b,s.index=R}function g(){const I=s.newAttributes;for(let U=0,G=I.length;U<G;U++)I[U]=0}function y(I){h(I,0)}function h(I,U){const G=s.newAttributes,R=s.enabledAttributes,v=s.attributeDivisors;G[I]=1,R[I]===0&&(n.enableVertexAttribArray(I),R[I]=1),v[I]!==U&&(n.vertexAttribDivisor(I,U),v[I]=U)}function w(){const I=s.newAttributes,U=s.enabledAttributes;for(let G=0,R=U.length;G<R;G++)U[G]!==I[G]&&(n.disableVertexAttribArray(G),U[G]=0)}function M(I,U,G,R,v,_,b){b===!0?n.vertexAttribIPointer(I,U,G,v,_):n.vertexAttribPointer(I,U,G,R,v,_)}function S(I,U,G,R){g();const v=R.attributes,_=G.getAttributes(),b=U.defaultAttributeValues;for(const A in _){const T=_[A];if(T.location>=0){let D=v[A];if(D===void 0&&(A==="instanceMatrix"&&I.instanceMatrix&&(D=I.instanceMatrix),A==="instanceColor"&&I.instanceColor&&(D=I.instanceColor)),D!==void 0){const V=D.normalized,O=D.itemSize,x=e.get(D);if(x===void 0)continue;const $=x.buffer,K=x.type,E=x.bytesPerElement,Y=K===n.INT||K===n.UNSIGNED_INT||D.gpuType===Rb;if(D.isInterleavedBufferAttribute){const j=D.data,X=j.stride,ee=D.offset;if(j.isInstancedInterleavedBuffer){for(let le=0;le<T.locationSize;le++)h(T.location+le,j.meshPerAttribute);I.isInstancedMesh!==!0&&R._maxInstanceCount===void 0&&(R._maxInstanceCount=j.meshPerAttribute*j.count)}else for(let le=0;le<T.locationSize;le++)y(T.location+le);n.bindBuffer(n.ARRAY_BUFFER,$);for(let le=0;le<T.locationSize;le++)M(T.location+le,O/T.locationSize,K,V,X*E,(ee+O/T.locationSize*le)*E,Y)}else{if(D.isInstancedBufferAttribute){for(let j=0;j<T.locationSize;j++)h(T.location+j,D.meshPerAttribute);I.isInstancedMesh!==!0&&R._maxInstanceCount===void 0&&(R._maxInstanceCount=D.meshPerAttribute*D.count)}else for(let j=0;j<T.locationSize;j++)y(T.location+j);n.bindBuffer(n.ARRAY_BUFFER,$);for(let j=0;j<T.locationSize;j++)M(T.location+j,O/T.locationSize,K,V,O*E,O/T.locationSize*j*E,Y)}}else if(b!==void 0){const V=b[A];if(V!==void 0)switch(V.length){case 2:n.vertexAttrib2fv(T.location,V);break;case 3:n.vertexAttrib3fv(T.location,V);break;case 4:n.vertexAttrib4fv(T.location,V);break;default:n.vertexAttrib1fv(T.location,V)}}}}w()}function C(){N();for(const I in r){const U=r[I];for(const G in U){const R=U[G];for(const v in R)u(R[v].object),delete R[v];delete U[G]}delete r[I]}}function k(I){if(r[I.id]===void 0)return;const U=r[I.id];for(const G in U){const R=U[G];for(const v in R)u(R[v].object),delete R[v];delete U[G]}delete r[I.id]}function F(I){for(const U in r){const G=r[U];if(G[I.id]===void 0)continue;const R=G[I.id];for(const v in R)u(R[v].object),delete R[v];delete G[I.id]}}function N(){B(),o=!0,s!==i&&(s=i,c(s.object))}function B(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:N,resetDefaultState:B,dispose:C,releaseStatesOfGeometry:k,releaseStatesOfProgram:F,initAttributes:g,enableAttribute:y,disableUnusedAttributes:w}}function Kz(n,e,t){let r;function i(c){r=c}function s(c,u){n.drawArrays(r,c,u),t.update(u,r,1)}function o(c,u,d){d!==0&&(n.drawArraysInstanced(r,c,u,d),t.update(u,r,d))}function a(c,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,c,0,u,0,d);let p=0;for(let m=0;m<d;m++)p+=u[m];t.update(p,r,1)}function l(c,u,d,f){if(d===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let m=0;m<c.length;m++)o(c[m],u[m],f[m]);else{p.multiDrawArraysInstancedWEBGL(r,c,0,u,0,f,0,d);let m=0;for(let g=0;g<d;g++)m+=u[g]*f[g];t.update(m,r,1)}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function Yz(n,e,t,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const F=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(F){return!(F!==rs&&r.convert(F)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(F){const N=F===Kf&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(F!==Go&&r.convert(F)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&F!==No&&!N)}function l(F){if(F==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";F="mediump"}return F==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(c=u);const d=t.logarithmicDepthBuffer===!0,f=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_TEXTURE_SIZE),y=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),h=n.getParameter(n.MAX_VERTEX_ATTRIBS),w=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),M=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),C=m>0,k=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:d,reverseDepthBuffer:f,maxTextures:p,maxVertexTextures:m,maxTextureSize:g,maxCubemapSize:y,maxAttributes:h,maxVertexUniforms:w,maxVaryings:M,maxFragmentUniforms:S,vertexTextures:C,maxSamples:k}}function Qz(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new ba,a=new Tt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){const p=d.length!==0||f||r!==0||i;return i=f,r=d.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,f){t=u(d,f,0)},this.setState=function(d,f,p){const m=d.clippingPlanes,g=d.clipIntersection,y=d.clipShadows,h=n.get(d);if(!i||m===null||m.length===0||s&&!y)s?u(null):c();else{const w=s?0:r,M=w*4;let S=h.clippingState||null;l.value=S,S=u(m,f,M,p);for(let C=0;C!==M;++C)S[C]=t[C];h.clippingState=S,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=w}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,f,p,m){const g=d!==null?d.length:0;let y=null;if(g!==0){if(y=l.value,m!==!0||y===null){const h=p+g*4,w=f.matrixWorldInverse;a.getNormalMatrix(w),(y===null||y.length<h)&&(y=new Float32Array(h));for(let M=0,S=p;M!==g;++M,S+=4)o.copy(d[M]).applyMatrix4(w,a),o.normal.toArray(y,S),y[S+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,y}}function Zz(n){let e=new WeakMap;function t(o,a){return a===Ey?o.mapping=vu:a===Sy&&(o.mapping=yu),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===Ey||a===Sy)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new n8(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",i),t(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}const zc=4,t1=[.125,.215,.35,.446,.526,.582],Gc=20,jg=new l8,n1=new qt;let Wg=null,qg=0,Xg=0,Kg=!1;const ul=(1+Math.sqrt(5))/2,xc=1/ul,r1=[new oe(-ul,xc,0),new oe(ul,xc,0),new oe(-xc,0,ul),new oe(xc,0,ul),new oe(0,ul,-xc),new oe(0,ul,xc),new oe(-1,1,-1),new oe(1,1,-1),new oe(-1,1,1),new oe(1,1,1)];class i1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){Wg=this._renderer.getRenderTarget(),qg=this._renderer.getActiveCubeFace(),Xg=this._renderer.getActiveMipmapLevel(),Kg=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=a1(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=o1(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Wg,qg,Xg),this._renderer.xr.enabled=Kg,e.scissorTest=!1,Xh(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===vu||e.mapping===yu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Wg=this._renderer.getRenderTarget(),qg=this._renderer.getActiveCubeFace(),Xg=this._renderer.getActiveMipmapLevel(),Kg=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Us,minFilter:Us,generateMipmaps:!1,type:Kf,format:rs,colorSpace:xu,depthBuffer:!1},i=s1(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=s1(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Jz(s)),this._blurMaterial=eG(s,e,t)}return i}_compileMaterial(e){const t=new Hs(this._lodPlanes[0],e);this._renderer.compile(t,jg)}_sceneToCubeUV(e,t,r,i){const a=new Ni(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,f=u.toneMapping;u.getClearColor(n1),u.toneMapping=Pa,u.autoClear=!1;const p=new Db({name:"PMREM.Background",side:ei,depthWrite:!1,depthTest:!1}),m=new Hs(new Zf,p);let g=!1;const y=e.background;y?y.isColor&&(p.color.copy(y),e.background=null,g=!0):(p.color.copy(n1),g=!0);for(let h=0;h<6;h++){const w=h%3;w===0?(a.up.set(0,l[h],0),a.lookAt(c[h],0,0)):w===1?(a.up.set(0,0,l[h]),a.lookAt(0,c[h],0)):(a.up.set(0,l[h],0),a.lookAt(0,0,c[h]));const M=this._cubeSize;Xh(i,w*M,h>2?M:0,M,M),u.setRenderTarget(i),g&&u.render(m,a),u.render(e,a)}m.geometry.dispose(),m.material.dispose(),u.toneMapping=f,u.autoClear=d,e.background=y}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===vu||e.mapping===yu;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=a1()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=o1());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Hs(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Xh(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,jg)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=r1[(i-s-1)%r1.length];this._blur(e,s-1,s,o,a)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial,u=3,d=new Hs(this._lodPlanes[i],c),f=c.uniforms,p=this._sizeLods[r]-1,m=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*Gc-1),g=s/m,y=isFinite(s)?1+Math.floor(u*g):Gc;y>Gc;const h=[];let w=0;for(let F=0;F<Gc;++F){const N=F/g,B=Math.exp(-N*N/2);h.push(B),F===0?w+=B:F<y&&(w+=2*B)}for(let F=0;F<h.length;F++)h[F]=h[F]/w;f.envMap.value=e.texture,f.samples.value=y,f.weights.value=h,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:M}=this;f.dTheta.value=m,f.mipInt.value=M-r;const S=this._sizeLods[i],C=3*S*(i>M-zc?i-M+zc:0),k=4*(this._cubeSize-S);Xh(t,C,k,3*S,2*S),l.setRenderTarget(t),l.render(d,jg)}}function Jz(n){const e=[],t=[],r=[];let i=n;const s=n-zc+1+t1.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-zc?l=t1[o-n+zc-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,d=1+c,f=[u,u,d,u,d,d,u,u,d,d,u,d],p=6,m=6,g=3,y=2,h=1,w=new Float32Array(g*m*p),M=new Float32Array(y*m*p),S=new Float32Array(h*m*p);for(let k=0;k<p;k++){const F=k%3*2/3-1,N=k>2?0:-1,B=[F,N,0,F+2/3,N,0,F+2/3,N+1,0,F,N,0,F+2/3,N+1,0,F,N+1,0];w.set(B,g*m*k),M.set(f,y*m*k);const I=[k,k,k,k,k,k];S.set(I,h*m*k)}const C=new us;C.setAttribute("position",new Kr(w,g)),C.setAttribute("uv",new Kr(M,y)),C.setAttribute("faceIndex",new Kr(S,h)),e.push(C),i>zc&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function s1(n,e,t){const r=new Ll(n,e,t);return r.texture.mapping=_0,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Xh(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function eG(n,e,t){const r=new Float32Array(Gc),i=new oe(0,1,0);return new Fa({name:"SphericalGaussianBlur",defines:{n:Gc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Fb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ca,depthTest:!1,depthWrite:!1})}function o1(){return new Fa({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Fb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ca,depthTest:!1,depthWrite:!1})}function a1(){return new Fa({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Fb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ca,depthTest:!1,depthWrite:!1})}function Fb(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function tG(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===Ey||l===Sy,u=l===vu||l===yu;if(c||u){let d=e.get(a);const f=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==f)return t===null&&(t=new i1(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const p=a.image;return c&&p&&p.height>0||u&&p&&i(p)?(t===null&&(t=new i1(n)),d=c?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function nG(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&Bc("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function rG(n,e,t,r){const i={},s=new WeakMap;function o(d){const f=d.target;f.index!==null&&e.remove(f.index);for(const m in f.attributes)e.remove(f.attributes[m]);f.removeEventListener("dispose",o),delete i[f.id];const p=s.get(f);p&&(e.remove(p),s.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function a(d,f){return i[f.id]===!0||(f.addEventListener("dispose",o),i[f.id]=!0,t.memory.geometries++),f}function l(d){const f=d.attributes;for(const p in f)e.update(f[p],n.ARRAY_BUFFER)}function c(d){const f=[],p=d.index,m=d.attributes.position;let g=0;if(p!==null){const w=p.array;g=p.version;for(let M=0,S=w.length;M<S;M+=3){const C=w[M+0],k=w[M+1],F=w[M+2];f.push(C,k,k,F,F,C)}}else if(m!==void 0){const w=m.array;g=m.version;for(let M=0,S=w.length/3-1;M<S;M+=3){const C=M+0,k=M+1,F=M+2;f.push(C,k,k,F,F,C)}}else return;const y=new(Y2(f)?nM:tM)(f,1);y.version=g;const h=s.get(d);h&&e.remove(h),s.set(d,y)}function u(d){const f=s.get(d);if(f){const p=d.index;p!==null&&f.version<p.version&&c(d)}else c(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function iG(n,e,t){let r;function i(f){r=f}let s,o;function a(f){s=f.type,o=f.bytesPerElement}function l(f,p){n.drawElements(r,p,s,f*o),t.update(p,r,1)}function c(f,p,m){m!==0&&(n.drawElementsInstanced(r,p,s,f*o,m),t.update(p,r,m))}function u(f,p,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,p,0,s,f,0,m);let y=0;for(let h=0;h<m;h++)y+=p[h];t.update(y,r,1)}function d(f,p,m,g){if(m===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let h=0;h<f.length;h++)c(f[h]/o,p[h],g[h]);else{y.multiDrawElementsInstancedWEBGL(r,p,0,s,f,0,g,0,m);let h=0;for(let w=0;w<m;w++)h+=p[w]*g[w];t.update(h,r,1)}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function sG(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function oG(n,e,t){const r=new WeakMap,i=new Hn;function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=u!==void 0?u.length:0;let f=r.get(a);if(f===void 0||f.count!==d){let B=function(){F.dispose(),r.delete(a),a.removeEventListener("dispose",B)};f!==void 0&&f.texture.dispose();const p=a.morphAttributes.position!==void 0,m=a.morphAttributes.normal!==void 0,g=a.morphAttributes.color!==void 0,y=a.morphAttributes.position||[],h=a.morphAttributes.normal||[],w=a.morphAttributes.color||[];let M=0;p===!0&&(M=1),m===!0&&(M=2),g===!0&&(M=3);let S=a.attributes.position.count*M,C=1;S>e.maxTextureSize&&(C=Math.ceil(S/e.maxTextureSize),S=e.maxTextureSize);const k=new Float32Array(S*C*4*d),F=new Z2(k,S,C,d);F.type=No,F.needsUpdate=!0;const N=M*4;for(let I=0;I<d;I++){const U=y[I],G=h[I],R=w[I],v=S*C*4*I;for(let _=0;_<U.count;_++){const b=_*N;p===!0&&(i.fromBufferAttribute(U,_),k[v+b+0]=i.x,k[v+b+1]=i.y,k[v+b+2]=i.z,k[v+b+3]=0),m===!0&&(i.fromBufferAttribute(G,_),k[v+b+4]=i.x,k[v+b+5]=i.y,k[v+b+6]=i.z,k[v+b+7]=0),g===!0&&(i.fromBufferAttribute(R,_),k[v+b+8]=i.x,k[v+b+9]=i.y,k[v+b+10]=i.z,k[v+b+11]=R.itemSize===4?i.w:1)}}f={count:d,texture:F,size:new Lt(S,C)},r.set(a,f),a.addEventListener("dispose",B)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let p=0;for(let g=0;g<c.length;g++)p+=c[g];const m=a.morphTargetsRelative?1:1-p;l.getUniforms().setValue(n,"morphTargetBaseInfluence",m),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",f.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",f.size)}return{update:s}}function aG(n,e,t,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,d=e.get(l,u);if(i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;i.get(f)!==c&&(f.update(),i.set(f,c))}return d}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const cM=new Br,l1=new aM(1,1),uM=new Z2,dM=new H6,fM=new sM,c1=[],u1=[],d1=new Float32Array(16),f1=new Float32Array(9),h1=new Float32Array(4);function Ju(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=c1[i];if(s===void 0&&(s=new Float32Array(i),c1[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function tr(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function nr(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function w0(n,e){let t=u1[e];t===void 0&&(t=new Int32Array(e),u1[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function lG(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function cG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(tr(t,e))return;n.uniform2fv(this.addr,e),nr(t,e)}}function uG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(tr(t,e))return;n.uniform3fv(this.addr,e),nr(t,e)}}function dG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(tr(t,e))return;n.uniform4fv(this.addr,e),nr(t,e)}}function fG(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(tr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),nr(t,e)}else{if(tr(t,r))return;h1.set(r),n.uniformMatrix2fv(this.addr,!1,h1),nr(t,r)}}function hG(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(tr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),nr(t,e)}else{if(tr(t,r))return;f1.set(r),n.uniformMatrix3fv(this.addr,!1,f1),nr(t,r)}}function pG(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(tr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),nr(t,e)}else{if(tr(t,r))return;d1.set(r),n.uniformMatrix4fv(this.addr,!1,d1),nr(t,r)}}function mG(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function gG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(tr(t,e))return;n.uniform2iv(this.addr,e),nr(t,e)}}function vG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(tr(t,e))return;n.uniform3iv(this.addr,e),nr(t,e)}}function yG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(tr(t,e))return;n.uniform4iv(this.addr,e),nr(t,e)}}function _G(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function bG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(tr(t,e))return;n.uniform2uiv(this.addr,e),nr(t,e)}}function xG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(tr(t,e))return;n.uniform3uiv(this.addr,e),nr(t,e)}}function wG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(tr(t,e))return;n.uniform4uiv(this.addr,e),nr(t,e)}}function AG(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let s;this.type===n.SAMPLER_2D_SHADOW?(l1.compareFunction=K2,s=l1):s=cM,t.setTexture2D(e||s,i)}function EG(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||dM,i)}function SG(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||fM,i)}function TG(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||uM,i)}function MG(n){switch(n){case 5126:return lG;case 35664:return cG;case 35665:return uG;case 35666:return dG;case 35674:return fG;case 35675:return hG;case 35676:return pG;case 5124:case 35670:return mG;case 35667:case 35671:return gG;case 35668:case 35672:return vG;case 35669:case 35673:return yG;case 5125:return _G;case 36294:return bG;case 36295:return xG;case 36296:return wG;case 35678:case 36198:case 36298:case 36306:case 35682:return AG;case 35679:case 36299:case 36307:return EG;case 35680:case 36300:case 36308:case 36293:return SG;case 36289:case 36303:case 36311:case 36292:return TG}}function RG(n,e){n.uniform1fv(this.addr,e)}function IG(n,e){const t=Ju(e,this.size,2);n.uniform2fv(this.addr,t)}function CG(n,e){const t=Ju(e,this.size,3);n.uniform3fv(this.addr,t)}function PG(n,e){const t=Ju(e,this.size,4);n.uniform4fv(this.addr,t)}function NG(n,e){const t=Ju(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function kG(n,e){const t=Ju(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function BG(n,e){const t=Ju(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function LG(n,e){n.uniform1iv(this.addr,e)}function DG(n,e){n.uniform2iv(this.addr,e)}function OG(n,e){n.uniform3iv(this.addr,e)}function FG(n,e){n.uniform4iv(this.addr,e)}function UG(n,e){n.uniform1uiv(this.addr,e)}function HG(n,e){n.uniform2uiv(this.addr,e)}function zG(n,e){n.uniform3uiv(this.addr,e)}function GG(n,e){n.uniform4uiv(this.addr,e)}function VG(n,e,t){const r=this.cache,i=e.length,s=w0(t,i);tr(r,s)||(n.uniform1iv(this.addr,s),nr(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||cM,s[o])}function $G(n,e,t){const r=this.cache,i=e.length,s=w0(t,i);tr(r,s)||(n.uniform1iv(this.addr,s),nr(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||dM,s[o])}function jG(n,e,t){const r=this.cache,i=e.length,s=w0(t,i);tr(r,s)||(n.uniform1iv(this.addr,s),nr(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||fM,s[o])}function WG(n,e,t){const r=this.cache,i=e.length,s=w0(t,i);tr(r,s)||(n.uniform1iv(this.addr,s),nr(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||uM,s[o])}function qG(n){switch(n){case 5126:return RG;case 35664:return IG;case 35665:return CG;case 35666:return PG;case 35674:return NG;case 35675:return kG;case 35676:return BG;case 5124:case 35670:return LG;case 35667:case 35671:return DG;case 35668:case 35672:return OG;case 35669:case 35673:return FG;case 5125:return UG;case 36294:return HG;case 36295:return zG;case 36296:return GG;case 35678:case 36198:case 36298:case 36306:case 35682:return VG;case 35679:case 36299:case 36307:return $G;case 35680:case 36300:case 36308:case 36293:return jG;case 36289:case 36303:case 36311:case 36292:return WG}}class XG{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=MG(t.type)}}class KG{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=qG(t.type)}}class YG{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const Yg=/(\w+)(\])?(\[|\.)?/g;function p1(n,e){n.seq.push(e),n.map[e.id]=e}function QG(n,e,t){const r=n.name,i=r.length;for(Yg.lastIndex=0;;){const s=Yg.exec(r),o=Yg.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){p1(t,c===void 0?new XG(a,n,e):new KG(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new YG(a),p1(t,d)),t=d}}}class vp{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);QG(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function m1(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const ZG=37297;let JG=0;function e9(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}const g1=new Tt;function t9(n){Jt._getMatrix(g1,Jt.workingColorSpace,n);const e=`mat3( ${g1.elements.map(t=>t.toFixed(4))} )`;switch(Jt.getTransfer(n)){case qp:return[e,"LinearTransferOETF"];case mn:return[e,"sRGBTransferOETF"];default:return[e,"LinearTransferOETF"]}}function v1(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+e9(n.getShaderSource(e),o)}else return i}function n9(n,e){const t=t9(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function r9(n,e){let t;switch(e){case K4:t="Linear";break;case Y4:t="Reinhard";break;case Q4:t="Cineon";break;case Z4:t="ACESFilmic";break;case e6:t="AgX";break;case t6:t="Neutral";break;case J4:t="Custom";break;default:t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Kh=new oe;function i9(){Jt.getLuminanceCoefficients(Kh);const n=Kh.x.toFixed(4),e=Kh.y.toFixed(4),t=Kh.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function s9(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(kd).join(`
`)}function o9(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function a9(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function kd(n){return n!==""}function y1(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function _1(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const l9=/^[ \t]*#include +<([\w\d./]+)>/gm;function n_(n){return n.replace(l9,u9)}const c9=new Map;function u9(n,e){let t=It[e];if(t===void 0){const r=c9.get(e);if(r!==void 0)t=It[r];else throw new Error("Can not resolve #include <"+e+">")}return n_(t)}const d9=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function b1(n){return n.replace(d9,f9)}function f9(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function x1(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function h9(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===D2?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===R4?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===yo&&(e="SHADOWMAP_TYPE_VSM"),e}function p9(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case vu:case yu:e="ENVMAP_TYPE_CUBE";break;case _0:e="ENVMAP_TYPE_CUBE_UV";break}return e}function m9(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case yu:e="ENVMAP_MODE_REFRACTION";break}return e}function g9(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case O2:e="ENVMAP_BLENDING_MULTIPLY";break;case q4:e="ENVMAP_BLENDING_MIX";break;case X4:e="ENVMAP_BLENDING_ADD";break}return e}function v9(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function y9(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=h9(t),c=p9(t),u=m9(t),d=g9(t),f=v9(t),p=s9(t),m=o9(s),g=i.createProgram();let y,h,w=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(kd).join(`
`),y.length>0&&(y+=`
`),h=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(kd).join(`
`),h.length>0&&(h+=`
`)):(y=[x1(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(kd).join(`
`),h=[x1(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Pa?"#define TONE_MAPPING":"",t.toneMapping!==Pa?It.tonemapping_pars_fragment:"",t.toneMapping!==Pa?r9("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",It.colorspace_pars_fragment,n9("linearToOutputTexel",t.outputColorSpace),i9(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(kd).join(`
`)),o=n_(o),o=y1(o,t),o=_1(o,t),a=n_(a),a=y1(a,t),a=_1(a,t),o=b1(o),a=b1(a),t.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,y=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,h=["#define varying in",t.glslVersion===PA?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===PA?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+h);const M=w+y+o,S=w+h+a,C=m1(i,i.VERTEX_SHADER,M),k=m1(i,i.FRAGMENT_SHADER,S);i.attachShader(g,C),i.attachShader(g,k),t.index0AttributeName!==void 0?i.bindAttribLocation(g,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(g,0,"position"),i.linkProgram(g);function F(U){if(n.debug.checkShaderErrors){const G=i.getProgramInfoLog(g).trim(),R=i.getShaderInfoLog(C).trim(),v=i.getShaderInfoLog(k).trim();let _=!0,b=!0;if(i.getProgramParameter(g,i.LINK_STATUS)===!1)if(_=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,g,C,k);else{const A=v1(i,C,"vertex"),T=v1(i,k,"fragment")}else G!==""||(R===""||v==="")&&(b=!1);b&&(U.diagnostics={runnable:_,programLog:G,vertexShader:{log:R,prefix:y},fragmentShader:{log:v,prefix:h}})}i.deleteShader(C),i.deleteShader(k),N=new vp(i,g),B=a9(i,g)}let N;this.getUniforms=function(){return N===void 0&&F(this),N};let B;this.getAttributes=function(){return B===void 0&&F(this),B};let I=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return I===!1&&(I=i.getProgramParameter(g,ZG)),I},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(g),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=JG++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=C,this.fragmentShader=k,this}let _9=0;class b9{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new x9(e),t.set(e,r)),r}}class x9{constructor(e){this.id=_9++,this.code=e,this.usedTimes=0}}function w9(n,e,t,r,i,s,o){const a=new J2,l=new b9,c=new Set,u=[],d=i.logarithmicDepthBuffer,f=i.vertexTextures;let p=i.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(B){return c.add(B),B===0?"uv":`uv${B}`}function y(B,I,U,G,R){const v=G.fog,_=R.geometry,b=B.isMeshStandardMaterial?G.environment:null,A=(B.isMeshStandardMaterial?t:e).get(B.envMap||b),T=A&&A.mapping===_0?A.image.height:null,D=m[B.type];B.precision!==null&&(p=i.getMaxPrecision(B.precision),B.precision);const V=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,O=V!==void 0?V.length:0;let x=0;_.morphAttributes.position!==void 0&&(x=1),_.morphAttributes.normal!==void 0&&(x=2),_.morphAttributes.color!==void 0&&(x=3);let $,K,E,Y;if(D){const st=Cs[D];$=st.vertexShader,K=st.fragmentShader}else $=B.vertexShader,K=B.fragmentShader,l.update(B),E=l.getVertexShaderID(B),Y=l.getFragmentShaderID(B);const j=n.getRenderTarget(),X=n.state.buffers.depth.getReversed(),ee=R.isInstancedMesh===!0,le=R.isBatchedMesh===!0,me=!!B.map,he=!!B.matcap,je=!!A,q=!!B.aoMap,ze=!!B.lightMap,Qe=!!B.bumpMap,We=!!B.normalMap,Pe=!!B.displacementMap,Nt=!!B.emissiveMap,Me=!!B.metalnessMap,W=!!B.roughnessMap,H=B.anisotropy>0,te=B.clearcoat>0,de=B.dispersion>0,Z=B.iridescence>0,ne=B.sheen>0,ye=B.transmission>0,Ce=H&&!!B.anisotropyMap,Ee=te&&!!B.clearcoatMap,nt=te&&!!B.clearcoatNormalMap,Ae=te&&!!B.clearcoatRoughnessMap,Re=Z&&!!B.iridescenceMap,Oe=Z&&!!B.iridescenceThicknessMap,ot=ne&&!!B.sheenColorMap,Ie=ne&&!!B.sheenRoughnessMap,Je=!!B.specularMap,pt=!!B.specularColorMap,lt=!!B.specularIntensityMap,Q=ye&&!!B.transmissionMap,Be=ye&&!!B.thicknessMap,se=!!B.gradientMap,pe=!!B.alphaMap,Le=B.alphaTest>0,xe=!!B.alphaHash,Xe=!!B.extensions;let sn=Pa;B.toneMapped&&(j===null||j.isXRRenderTarget===!0)&&(sn=n.toneMapping);const At={shaderID:D,shaderType:B.type,shaderName:B.name,vertexShader:$,fragmentShader:K,defines:B.defines,customVertexShaderID:E,customFragmentShaderID:Y,isRawShaderMaterial:B.isRawShaderMaterial===!0,glslVersion:B.glslVersion,precision:p,batching:le,batchingColor:le&&R._colorsTexture!==null,instancing:ee,instancingColor:ee&&R.instanceColor!==null,instancingMorph:ee&&R.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:j===null?n.outputColorSpace:j.isXRRenderTarget===!0?j.texture.colorSpace:xu,alphaToCoverage:!!B.alphaToCoverage,map:me,matcap:he,envMap:je,envMapMode:je&&A.mapping,envMapCubeUVHeight:T,aoMap:q,lightMap:ze,bumpMap:Qe,normalMap:We,displacementMap:f&&Pe,emissiveMap:Nt,normalMapObjectSpace:We&&B.normalMapType===o6,normalMapTangentSpace:We&&B.normalMapType===s6,metalnessMap:Me,roughnessMap:W,anisotropy:H,anisotropyMap:Ce,clearcoat:te,clearcoatMap:Ee,clearcoatNormalMap:nt,clearcoatRoughnessMap:Ae,dispersion:de,iridescence:Z,iridescenceMap:Re,iridescenceThicknessMap:Oe,sheen:ne,sheenColorMap:ot,sheenRoughnessMap:Ie,specularMap:Je,specularColorMap:pt,specularIntensityMap:lt,transmission:ye,transmissionMap:Q,thicknessMap:Be,gradientMap:se,opaque:B.transparent===!1&&B.blending===Yc&&B.alphaToCoverage===!1,alphaMap:pe,alphaTest:Le,alphaHash:xe,combine:B.combine,mapUv:me&&g(B.map.channel),aoMapUv:q&&g(B.aoMap.channel),lightMapUv:ze&&g(B.lightMap.channel),bumpMapUv:Qe&&g(B.bumpMap.channel),normalMapUv:We&&g(B.normalMap.channel),displacementMapUv:Pe&&g(B.displacementMap.channel),emissiveMapUv:Nt&&g(B.emissiveMap.channel),metalnessMapUv:Me&&g(B.metalnessMap.channel),roughnessMapUv:W&&g(B.roughnessMap.channel),anisotropyMapUv:Ce&&g(B.anisotropyMap.channel),clearcoatMapUv:Ee&&g(B.clearcoatMap.channel),clearcoatNormalMapUv:nt&&g(B.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ae&&g(B.clearcoatRoughnessMap.channel),iridescenceMapUv:Re&&g(B.iridescenceMap.channel),iridescenceThicknessMapUv:Oe&&g(B.iridescenceThicknessMap.channel),sheenColorMapUv:ot&&g(B.sheenColorMap.channel),sheenRoughnessMapUv:Ie&&g(B.sheenRoughnessMap.channel),specularMapUv:Je&&g(B.specularMap.channel),specularColorMapUv:pt&&g(B.specularColorMap.channel),specularIntensityMapUv:lt&&g(B.specularIntensityMap.channel),transmissionMapUv:Q&&g(B.transmissionMap.channel),thicknessMapUv:Be&&g(B.thicknessMap.channel),alphaMapUv:pe&&g(B.alphaMap.channel),vertexTangents:!!_.attributes.tangent&&(We||H),vertexColors:B.vertexColors,vertexAlphas:B.vertexColors===!0&&!!_.attributes.color&&_.attributes.color.itemSize===4,pointsUvs:R.isPoints===!0&&!!_.attributes.uv&&(me||pe),fog:!!v,useFog:B.fog===!0,fogExp2:!!v&&v.isFogExp2,flatShading:B.flatShading===!0,sizeAttenuation:B.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:X,skinning:R.isSkinnedMesh===!0,morphTargets:_.morphAttributes.position!==void 0,morphNormals:_.morphAttributes.normal!==void 0,morphColors:_.morphAttributes.color!==void 0,morphTargetsCount:O,morphTextureStride:x,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numLightProbes:I.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:B.dithering,shadowMapEnabled:n.shadowMap.enabled&&U.length>0,shadowMapType:n.shadowMap.type,toneMapping:sn,decodeVideoTexture:me&&B.map.isVideoTexture===!0&&Jt.getTransfer(B.map.colorSpace)===mn,decodeVideoTextureEmissive:Nt&&B.emissiveMap.isVideoTexture===!0&&Jt.getTransfer(B.emissiveMap.colorSpace)===mn,premultipliedAlpha:B.premultipliedAlpha,doubleSided:B.side===Mo,flipSided:B.side===ei,useDepthPacking:B.depthPacking>=0,depthPacking:B.depthPacking||0,index0AttributeName:B.index0AttributeName,extensionClipCullDistance:Xe&&B.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Xe&&B.extensions.multiDraw===!0||le)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:B.customProgramCacheKey()};return At.vertexUv1s=c.has(1),At.vertexUv2s=c.has(2),At.vertexUv3s=c.has(3),c.clear(),At}function h(B){const I=[];if(B.shaderID?I.push(B.shaderID):(I.push(B.customVertexShaderID),I.push(B.customFragmentShaderID)),B.defines!==void 0)for(const U in B.defines)I.push(U),I.push(B.defines[U]);return B.isRawShaderMaterial===!1&&(w(I,B),M(I,B),I.push(n.outputColorSpace)),I.push(B.customProgramCacheKey),I.join()}function w(B,I){B.push(I.precision),B.push(I.outputColorSpace),B.push(I.envMapMode),B.push(I.envMapCubeUVHeight),B.push(I.mapUv),B.push(I.alphaMapUv),B.push(I.lightMapUv),B.push(I.aoMapUv),B.push(I.bumpMapUv),B.push(I.normalMapUv),B.push(I.displacementMapUv),B.push(I.emissiveMapUv),B.push(I.metalnessMapUv),B.push(I.roughnessMapUv),B.push(I.anisotropyMapUv),B.push(I.clearcoatMapUv),B.push(I.clearcoatNormalMapUv),B.push(I.clearcoatRoughnessMapUv),B.push(I.iridescenceMapUv),B.push(I.iridescenceThicknessMapUv),B.push(I.sheenColorMapUv),B.push(I.sheenRoughnessMapUv),B.push(I.specularMapUv),B.push(I.specularColorMapUv),B.push(I.specularIntensityMapUv),B.push(I.transmissionMapUv),B.push(I.thicknessMapUv),B.push(I.combine),B.push(I.fogExp2),B.push(I.sizeAttenuation),B.push(I.morphTargetsCount),B.push(I.morphAttributeCount),B.push(I.numDirLights),B.push(I.numPointLights),B.push(I.numSpotLights),B.push(I.numSpotLightMaps),B.push(I.numHemiLights),B.push(I.numRectAreaLights),B.push(I.numDirLightShadows),B.push(I.numPointLightShadows),B.push(I.numSpotLightShadows),B.push(I.numSpotLightShadowsWithMaps),B.push(I.numLightProbes),B.push(I.shadowMapType),B.push(I.toneMapping),B.push(I.numClippingPlanes),B.push(I.numClipIntersection),B.push(I.depthPacking)}function M(B,I){a.disableAll(),I.supportsVertexTextures&&a.enable(0),I.instancing&&a.enable(1),I.instancingColor&&a.enable(2),I.instancingMorph&&a.enable(3),I.matcap&&a.enable(4),I.envMap&&a.enable(5),I.normalMapObjectSpace&&a.enable(6),I.normalMapTangentSpace&&a.enable(7),I.clearcoat&&a.enable(8),I.iridescence&&a.enable(9),I.alphaTest&&a.enable(10),I.vertexColors&&a.enable(11),I.vertexAlphas&&a.enable(12),I.vertexUv1s&&a.enable(13),I.vertexUv2s&&a.enable(14),I.vertexUv3s&&a.enable(15),I.vertexTangents&&a.enable(16),I.anisotropy&&a.enable(17),I.alphaHash&&a.enable(18),I.batching&&a.enable(19),I.dispersion&&a.enable(20),I.batchingColor&&a.enable(21),B.push(a.mask),a.disableAll(),I.fog&&a.enable(0),I.useFog&&a.enable(1),I.flatShading&&a.enable(2),I.logarithmicDepthBuffer&&a.enable(3),I.reverseDepthBuffer&&a.enable(4),I.skinning&&a.enable(5),I.morphTargets&&a.enable(6),I.morphNormals&&a.enable(7),I.morphColors&&a.enable(8),I.premultipliedAlpha&&a.enable(9),I.shadowMapEnabled&&a.enable(10),I.doubleSided&&a.enable(11),I.flipSided&&a.enable(12),I.useDepthPacking&&a.enable(13),I.dithering&&a.enable(14),I.transmission&&a.enable(15),I.sheen&&a.enable(16),I.opaque&&a.enable(17),I.pointsUvs&&a.enable(18),I.decodeVideoTexture&&a.enable(19),I.decodeVideoTextureEmissive&&a.enable(20),I.alphaToCoverage&&a.enable(21),B.push(a.mask)}function S(B){const I=m[B.type];let U;if(I){const G=Cs[I];U=Z6.clone(G.uniforms)}else U=B.uniforms;return U}function C(B,I){let U;for(let G=0,R=u.length;G<R;G++){const v=u[G];if(v.cacheKey===I){U=v,++U.usedTimes;break}}return U===void 0&&(U=new y9(n,I,B,s),u.push(U)),U}function k(B){if(--B.usedTimes===0){const I=u.indexOf(B);u[I]=u[u.length-1],u.pop(),B.destroy()}}function F(B){l.remove(B)}function N(){l.dispose()}return{getParameters:y,getProgramCacheKey:h,getUniforms:S,acquireProgram:C,releaseProgram:k,releaseShaderCache:F,programs:u,dispose:N}}function A9(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function r(o){n.delete(o)}function i(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:r,update:i,dispose:s}}function E9(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function w1(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function A1(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(d,f,p,m,g,y){let h=n[e];return h===void 0?(h={id:d.id,object:d,geometry:f,material:p,groupOrder:m,renderOrder:d.renderOrder,z:g,group:y},n[e]=h):(h.id=d.id,h.object=d,h.geometry=f,h.material=p,h.groupOrder=m,h.renderOrder=d.renderOrder,h.z=g,h.group=y),e++,h}function a(d,f,p,m,g,y){const h=o(d,f,p,m,g,y);p.transmission>0?r.push(h):p.transparent===!0?i.push(h):t.push(h)}function l(d,f,p,m,g,y){const h=o(d,f,p,m,g,y);p.transmission>0?r.unshift(h):p.transparent===!0?i.unshift(h):t.unshift(h)}function c(d,f){t.length>1&&t.sort(d||E9),r.length>1&&r.sort(f||w1),i.length>1&&i.sort(f||w1)}function u(){for(let d=e,f=n.length;d<f;d++){const p=n[d];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function S9(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new A1,n.set(r,[o])):i>=s.length?(o=new A1,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function T9(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new oe,color:new qt};break;case"SpotLight":t={position:new oe,direction:new oe,color:new qt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new oe,color:new qt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new oe,skyColor:new qt,groundColor:new qt};break;case"RectAreaLight":t={color:new qt,position:new oe,halfWidth:new oe,halfHeight:new oe};break}return n[e.id]=t,t}}}function M9(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Lt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Lt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Lt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let R9=0;function I9(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function C9(n){const e=new T9,t=M9(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new oe);const i=new oe,s=new zn,o=new zn;function a(c){let u=0,d=0,f=0;for(let B=0;B<9;B++)r.probe[B].set(0,0,0);let p=0,m=0,g=0,y=0,h=0,w=0,M=0,S=0,C=0,k=0,F=0;c.sort(I9);for(let B=0,I=c.length;B<I;B++){const U=c[B],G=U.color,R=U.intensity,v=U.distance,_=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)u+=G.r*R,d+=G.g*R,f+=G.b*R;else if(U.isLightProbe){for(let b=0;b<9;b++)r.probe[b].addScaledVector(U.sh.coefficients[b],R);F++}else if(U.isDirectionalLight){const b=e.get(U);if(b.color.copy(U.color).multiplyScalar(U.intensity),U.castShadow){const A=U.shadow,T=t.get(U);T.shadowIntensity=A.intensity,T.shadowBias=A.bias,T.shadowNormalBias=A.normalBias,T.shadowRadius=A.radius,T.shadowMapSize=A.mapSize,r.directionalShadow[p]=T,r.directionalShadowMap[p]=_,r.directionalShadowMatrix[p]=U.shadow.matrix,w++}r.directional[p]=b,p++}else if(U.isSpotLight){const b=e.get(U);b.position.setFromMatrixPosition(U.matrixWorld),b.color.copy(G).multiplyScalar(R),b.distance=v,b.coneCos=Math.cos(U.angle),b.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),b.decay=U.decay,r.spot[g]=b;const A=U.shadow;if(U.map&&(r.spotLightMap[C]=U.map,C++,A.updateMatrices(U),U.castShadow&&k++),r.spotLightMatrix[g]=A.matrix,U.castShadow){const T=t.get(U);T.shadowIntensity=A.intensity,T.shadowBias=A.bias,T.shadowNormalBias=A.normalBias,T.shadowRadius=A.radius,T.shadowMapSize=A.mapSize,r.spotShadow[g]=T,r.spotShadowMap[g]=_,S++}g++}else if(U.isRectAreaLight){const b=e.get(U);b.color.copy(G).multiplyScalar(R),b.halfWidth.set(U.width*.5,0,0),b.halfHeight.set(0,U.height*.5,0),r.rectArea[y]=b,y++}else if(U.isPointLight){const b=e.get(U);if(b.color.copy(U.color).multiplyScalar(U.intensity),b.distance=U.distance,b.decay=U.decay,U.castShadow){const A=U.shadow,T=t.get(U);T.shadowIntensity=A.intensity,T.shadowBias=A.bias,T.shadowNormalBias=A.normalBias,T.shadowRadius=A.radius,T.shadowMapSize=A.mapSize,T.shadowCameraNear=A.camera.near,T.shadowCameraFar=A.camera.far,r.pointShadow[m]=T,r.pointShadowMap[m]=_,r.pointShadowMatrix[m]=U.shadow.matrix,M++}r.point[m]=b,m++}else if(U.isHemisphereLight){const b=e.get(U);b.skyColor.copy(U.color).multiplyScalar(R),b.groundColor.copy(U.groundColor).multiplyScalar(R),r.hemi[h]=b,h++}}y>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Fe.LTC_FLOAT_1,r.rectAreaLTC2=Fe.LTC_FLOAT_2):(r.rectAreaLTC1=Fe.LTC_HALF_1,r.rectAreaLTC2=Fe.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=d,r.ambient[2]=f;const N=r.hash;(N.directionalLength!==p||N.pointLength!==m||N.spotLength!==g||N.rectAreaLength!==y||N.hemiLength!==h||N.numDirectionalShadows!==w||N.numPointShadows!==M||N.numSpotShadows!==S||N.numSpotMaps!==C||N.numLightProbes!==F)&&(r.directional.length=p,r.spot.length=g,r.rectArea.length=y,r.point.length=m,r.hemi.length=h,r.directionalShadow.length=w,r.directionalShadowMap.length=w,r.pointShadow.length=M,r.pointShadowMap.length=M,r.spotShadow.length=S,r.spotShadowMap.length=S,r.directionalShadowMatrix.length=w,r.pointShadowMatrix.length=M,r.spotLightMatrix.length=S+C-k,r.spotLightMap.length=C,r.numSpotLightShadowsWithMaps=k,r.numLightProbes=F,N.directionalLength=p,N.pointLength=m,N.spotLength=g,N.rectAreaLength=y,N.hemiLength=h,N.numDirectionalShadows=w,N.numPointShadows=M,N.numSpotShadows=S,N.numSpotMaps=C,N.numLightProbes=F,r.version=R9++)}function l(c,u){let d=0,f=0,p=0,m=0,g=0;const y=u.matrixWorldInverse;for(let h=0,w=c.length;h<w;h++){const M=c[h];if(M.isDirectionalLight){const S=r.directional[d];S.direction.setFromMatrixPosition(M.matrixWorld),i.setFromMatrixPosition(M.target.matrixWorld),S.direction.sub(i),S.direction.transformDirection(y),d++}else if(M.isSpotLight){const S=r.spot[p];S.position.setFromMatrixPosition(M.matrixWorld),S.position.applyMatrix4(y),S.direction.setFromMatrixPosition(M.matrixWorld),i.setFromMatrixPosition(M.target.matrixWorld),S.direction.sub(i),S.direction.transformDirection(y),p++}else if(M.isRectAreaLight){const S=r.rectArea[m];S.position.setFromMatrixPosition(M.matrixWorld),S.position.applyMatrix4(y),o.identity(),s.copy(M.matrixWorld),s.premultiply(y),o.extractRotation(s),S.halfWidth.set(M.width*.5,0,0),S.halfHeight.set(0,M.height*.5,0),S.halfWidth.applyMatrix4(o),S.halfHeight.applyMatrix4(o),m++}else if(M.isPointLight){const S=r.point[f];S.position.setFromMatrixPosition(M.matrixWorld),S.position.applyMatrix4(y),f++}else if(M.isHemisphereLight){const S=r.hemi[g];S.direction.setFromMatrixPosition(M.matrixWorld),S.direction.transformDirection(y),g++}}}return{setup:a,setupView:l,state:r}}function E1(n){const e=new C9(n),t=[],r=[];function i(u){c.camera=u,t.length=0,r.length=0}function s(u){t.push(u)}function o(u){r.push(u)}function a(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function P9(n){let e=new WeakMap;function t(i,s=0){const o=e.get(i);let a;return o===void 0?(a=new E1(n),e.set(i,[a])):s>=o.length?(a=new E1(n),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:t,dispose:r}}const N9=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,k9=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function B9(n,e,t){let r=new oM;const i=new Lt,s=new Lt,o=new Hn,a=new o8({depthPacking:i6}),l=new a8,c={},u=t.maxTextureSize,d={[Oa]:ei,[ei]:Oa,[Mo]:Mo},f=new Fa({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Lt},radius:{value:4}},vertexShader:N9,fragmentShader:k9}),p=f.clone();p.defines.HORIZONTAL_PASS=1;const m=new us;m.setAttribute("position",new Kr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new Hs(m,f),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=D2;let h=this.type;this.render=function(k,F,N){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||k.length===0)return;const B=n.getRenderTarget(),I=n.getActiveCubeFace(),U=n.getActiveMipmapLevel(),G=n.state;G.setBlending(Ca),G.buffers.color.setClear(1,1,1,1),G.buffers.depth.setTest(!0),G.setScissorTest(!1);const R=h!==yo&&this.type===yo,v=h===yo&&this.type!==yo;for(let _=0,b=k.length;_<b;_++){const A=k[_],T=A.shadow;if(T===void 0||T.autoUpdate===!1&&T.needsUpdate===!1)continue;i.copy(T.mapSize);const D=T.getFrameExtents();if(i.multiply(D),s.copy(T.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/D.x),i.x=s.x*D.x,T.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/D.y),i.y=s.y*D.y,T.mapSize.y=s.y)),T.map===null||R===!0||v===!0){const O=this.type!==yo?{minFilter:as,magFilter:as}:{};T.map!==null&&T.map.dispose(),T.map=new Ll(i.x,i.y,O),T.map.texture.name=A.name+".shadowMap",T.camera.updateProjectionMatrix()}n.setRenderTarget(T.map),n.clear();const V=T.getViewportCount();for(let O=0;O<V;O++){const x=T.getViewport(O);o.set(s.x*x.x,s.y*x.y,s.x*x.z,s.y*x.w),G.viewport(o),T.updateMatrices(A,O),r=T.getFrustum(),S(F,N,T.camera,A,this.type)}T.isPointLightShadow!==!0&&this.type===yo&&w(T,N),T.needsUpdate=!1}h=this.type,y.needsUpdate=!1,n.setRenderTarget(B,I,U)};function w(k,F){const N=e.update(g);f.defines.VSM_SAMPLES!==k.blurSamples&&(f.defines.VSM_SAMPLES=k.blurSamples,p.defines.VSM_SAMPLES=k.blurSamples,f.needsUpdate=!0,p.needsUpdate=!0),k.mapPass===null&&(k.mapPass=new Ll(i.x,i.y)),f.uniforms.shadow_pass.value=k.map.texture,f.uniforms.resolution.value=k.mapSize,f.uniforms.radius.value=k.radius,n.setRenderTarget(k.mapPass),n.clear(),n.renderBufferDirect(F,null,N,f,g,null),p.uniforms.shadow_pass.value=k.mapPass.texture,p.uniforms.resolution.value=k.mapSize,p.uniforms.radius.value=k.radius,n.setRenderTarget(k.map),n.clear(),n.renderBufferDirect(F,null,N,p,g,null)}function M(k,F,N,B){let I=null;const U=N.isPointLight===!0?k.customDistanceMaterial:k.customDepthMaterial;if(U!==void 0)I=U;else if(I=N.isPointLight===!0?l:a,n.localClippingEnabled&&F.clipShadows===!0&&Array.isArray(F.clippingPlanes)&&F.clippingPlanes.length!==0||F.displacementMap&&F.displacementScale!==0||F.alphaMap&&F.alphaTest>0||F.map&&F.alphaTest>0){const G=I.uuid,R=F.uuid;let v=c[G];v===void 0&&(v={},c[G]=v);let _=v[R];_===void 0&&(_=I.clone(),v[R]=_,F.addEventListener("dispose",C)),I=_}if(I.visible=F.visible,I.wireframe=F.wireframe,B===yo?I.side=F.shadowSide!==null?F.shadowSide:F.side:I.side=F.shadowSide!==null?F.shadowSide:d[F.side],I.alphaMap=F.alphaMap,I.alphaTest=F.alphaTest,I.map=F.map,I.clipShadows=F.clipShadows,I.clippingPlanes=F.clippingPlanes,I.clipIntersection=F.clipIntersection,I.displacementMap=F.displacementMap,I.displacementScale=F.displacementScale,I.displacementBias=F.displacementBias,I.wireframeLinewidth=F.wireframeLinewidth,I.linewidth=F.linewidth,N.isPointLight===!0&&I.isMeshDistanceMaterial===!0){const G=n.properties.get(I);G.light=N}return I}function S(k,F,N,B,I){if(k.visible===!1)return;if(k.layers.test(F.layers)&&(k.isMesh||k.isLine||k.isPoints)&&(k.castShadow||k.receiveShadow&&I===yo)&&(!k.frustumCulled||r.intersectsObject(k))){k.modelViewMatrix.multiplyMatrices(N.matrixWorldInverse,k.matrixWorld);const R=e.update(k),v=k.material;if(Array.isArray(v)){const _=R.groups;for(let b=0,A=_.length;b<A;b++){const T=_[b],D=v[T.materialIndex];if(D&&D.visible){const V=M(k,D,B,I);k.onBeforeShadow(n,k,F,N,R,V,T),n.renderBufferDirect(N,null,R,V,k,T),k.onAfterShadow(n,k,F,N,R,V,T)}}}else if(v.visible){const _=M(k,v,B,I);k.onBeforeShadow(n,k,F,N,R,_,null),n.renderBufferDirect(N,null,R,_,k,null),k.onAfterShadow(n,k,F,N,R,_,null)}}const G=k.children;for(let R=0,v=G.length;R<v;R++)S(G[R],F,N,B,I)}function C(k){k.target.removeEventListener("dispose",C);for(const N in c){const B=c[N],I=k.target.uuid;I in B&&(B[I].dispose(),delete B[I])}}}const L9={[vy]:yy,[_y]:wy,[by]:Ay,[gu]:xy,[yy]:vy,[wy]:_y,[Ay]:by,[xy]:gu};function D9(n,e){function t(){let Q=!1;const Be=new Hn;let se=null;const pe=new Hn(0,0,0,0);return{setMask:function(Le){se!==Le&&!Q&&(n.colorMask(Le,Le,Le,Le),se=Le)},setLocked:function(Le){Q=Le},setClear:function(Le,xe,Xe,sn,At){At===!0&&(Le*=sn,xe*=sn,Xe*=sn),Be.set(Le,xe,Xe,sn),pe.equals(Be)===!1&&(n.clearColor(Le,xe,Xe,sn),pe.copy(Be))},reset:function(){Q=!1,se=null,pe.set(-1,0,0,0)}}}function r(){let Q=!1,Be=!1,se=null,pe=null,Le=null;return{setReversed:function(xe){if(Be!==xe){const Xe=e.get("EXT_clip_control");Be?Xe.clipControlEXT(Xe.LOWER_LEFT_EXT,Xe.ZERO_TO_ONE_EXT):Xe.clipControlEXT(Xe.LOWER_LEFT_EXT,Xe.NEGATIVE_ONE_TO_ONE_EXT);const sn=Le;Le=null,this.setClear(sn)}Be=xe},getReversed:function(){return Be},setTest:function(xe){xe?j(n.DEPTH_TEST):X(n.DEPTH_TEST)},setMask:function(xe){se!==xe&&!Q&&(n.depthMask(xe),se=xe)},setFunc:function(xe){if(Be&&(xe=L9[xe]),pe!==xe){switch(xe){case vy:n.depthFunc(n.NEVER);break;case yy:n.depthFunc(n.ALWAYS);break;case _y:n.depthFunc(n.LESS);break;case gu:n.depthFunc(n.LEQUAL);break;case by:n.depthFunc(n.EQUAL);break;case xy:n.depthFunc(n.GEQUAL);break;case wy:n.depthFunc(n.GREATER);break;case Ay:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}pe=xe}},setLocked:function(xe){Q=xe},setClear:function(xe){Le!==xe&&(Be&&(xe=1-xe),n.clearDepth(xe),Le=xe)},reset:function(){Q=!1,se=null,pe=null,Le=null,Be=!1}}}function i(){let Q=!1,Be=null,se=null,pe=null,Le=null,xe=null,Xe=null,sn=null,At=null;return{setTest:function(st){Q||(st?j(n.STENCIL_TEST):X(n.STENCIL_TEST))},setMask:function(st){Be!==st&&!Q&&(n.stencilMask(st),Be=st)},setFunc:function(st,Wn,Vt){(se!==st||pe!==Wn||Le!==Vt)&&(n.stencilFunc(st,Wn,Vt),se=st,pe=Wn,Le=Vt)},setOp:function(st,Wn,Vt){(xe!==st||Xe!==Wn||sn!==Vt)&&(n.stencilOp(st,Wn,Vt),xe=st,Xe=Wn,sn=Vt)},setLocked:function(st){Q=st},setClear:function(st){At!==st&&(n.clearStencil(st),At=st)},reset:function(){Q=!1,Be=null,se=null,pe=null,Le=null,xe=null,Xe=null,sn=null,At=null}}}const s=new t,o=new r,a=new i,l=new WeakMap,c=new WeakMap;let u={},d={},f=new WeakMap,p=[],m=null,g=!1,y=null,h=null,w=null,M=null,S=null,C=null,k=null,F=new qt(0,0,0),N=0,B=!1,I=null,U=null,G=null,R=null,v=null;const _=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let b=!1,A=0;const T=n.getParameter(n.VERSION);T.indexOf("WebGL")!==-1?(A=parseFloat(/^WebGL (\d)/.exec(T)[1]),b=A>=1):T.indexOf("OpenGL ES")!==-1&&(A=parseFloat(/^OpenGL ES (\d)/.exec(T)[1]),b=A>=2);let D=null,V={};const O=n.getParameter(n.SCISSOR_BOX),x=n.getParameter(n.VIEWPORT),$=new Hn().fromArray(O),K=new Hn().fromArray(x);function E(Q,Be,se,pe){const Le=new Uint8Array(4),xe=n.createTexture();n.bindTexture(Q,xe),n.texParameteri(Q,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Q,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Xe=0;Xe<se;Xe++)Q===n.TEXTURE_3D||Q===n.TEXTURE_2D_ARRAY?n.texImage3D(Be,0,n.RGBA,1,1,pe,0,n.RGBA,n.UNSIGNED_BYTE,Le):n.texImage2D(Be+Xe,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Le);return xe}const Y={};Y[n.TEXTURE_2D]=E(n.TEXTURE_2D,n.TEXTURE_2D,1),Y[n.TEXTURE_CUBE_MAP]=E(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Y[n.TEXTURE_2D_ARRAY]=E(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Y[n.TEXTURE_3D]=E(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),j(n.DEPTH_TEST),o.setFunc(gu),Qe(!1),We(SA),j(n.CULL_FACE),q(Ca);function j(Q){u[Q]!==!0&&(n.enable(Q),u[Q]=!0)}function X(Q){u[Q]!==!1&&(n.disable(Q),u[Q]=!1)}function ee(Q,Be){return d[Q]!==Be?(n.bindFramebuffer(Q,Be),d[Q]=Be,Q===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=Be),Q===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=Be),!0):!1}function le(Q,Be){let se=p,pe=!1;if(Q){se=f.get(Be),se===void 0&&(se=[],f.set(Be,se));const Le=Q.textures;if(se.length!==Le.length||se[0]!==n.COLOR_ATTACHMENT0){for(let xe=0,Xe=Le.length;xe<Xe;xe++)se[xe]=n.COLOR_ATTACHMENT0+xe;se.length=Le.length,pe=!0}}else se[0]!==n.BACK&&(se[0]=n.BACK,pe=!0);pe&&n.drawBuffers(se)}function me(Q){return m!==Q?(n.useProgram(Q),m=Q,!0):!1}const he={[fl]:n.FUNC_ADD,[C4]:n.FUNC_SUBTRACT,[P4]:n.FUNC_REVERSE_SUBTRACT};he[N4]=n.MIN,he[k4]=n.MAX;const je={[B4]:n.ZERO,[L4]:n.ONE,[D4]:n.SRC_COLOR,[my]:n.SRC_ALPHA,[G4]:n.SRC_ALPHA_SATURATE,[H4]:n.DST_COLOR,[F4]:n.DST_ALPHA,[O4]:n.ONE_MINUS_SRC_COLOR,[gy]:n.ONE_MINUS_SRC_ALPHA,[z4]:n.ONE_MINUS_DST_COLOR,[U4]:n.ONE_MINUS_DST_ALPHA,[V4]:n.CONSTANT_COLOR,[$4]:n.ONE_MINUS_CONSTANT_COLOR,[j4]:n.CONSTANT_ALPHA,[W4]:n.ONE_MINUS_CONSTANT_ALPHA};function q(Q,Be,se,pe,Le,xe,Xe,sn,At,st){if(Q===Ca){g===!0&&(X(n.BLEND),g=!1);return}if(g===!1&&(j(n.BLEND),g=!0),Q!==I4){if(Q!==y||st!==B){if((h!==fl||S!==fl)&&(n.blendEquation(n.FUNC_ADD),h=fl,S=fl),st)switch(Q){case Yc:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case TA:n.blendFunc(n.ONE,n.ONE);break;case MA:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case RA:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:break}else switch(Q){case Yc:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case TA:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case MA:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case RA:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:break}w=null,M=null,C=null,k=null,F.set(0,0,0),N=0,y=Q,B=st}return}Le=Le||Be,xe=xe||se,Xe=Xe||pe,(Be!==h||Le!==S)&&(n.blendEquationSeparate(he[Be],he[Le]),h=Be,S=Le),(se!==w||pe!==M||xe!==C||Xe!==k)&&(n.blendFuncSeparate(je[se],je[pe],je[xe],je[Xe]),w=se,M=pe,C=xe,k=Xe),(sn.equals(F)===!1||At!==N)&&(n.blendColor(sn.r,sn.g,sn.b,At),F.copy(sn),N=At),y=Q,B=!1}function ze(Q,Be){Q.side===Mo?X(n.CULL_FACE):j(n.CULL_FACE);let se=Q.side===ei;Be&&(se=!se),Qe(se),Q.blending===Yc&&Q.transparent===!1?q(Ca):q(Q.blending,Q.blendEquation,Q.blendSrc,Q.blendDst,Q.blendEquationAlpha,Q.blendSrcAlpha,Q.blendDstAlpha,Q.blendColor,Q.blendAlpha,Q.premultipliedAlpha),o.setFunc(Q.depthFunc),o.setTest(Q.depthTest),o.setMask(Q.depthWrite),s.setMask(Q.colorWrite);const pe=Q.stencilWrite;a.setTest(pe),pe&&(a.setMask(Q.stencilWriteMask),a.setFunc(Q.stencilFunc,Q.stencilRef,Q.stencilFuncMask),a.setOp(Q.stencilFail,Q.stencilZFail,Q.stencilZPass)),Nt(Q.polygonOffset,Q.polygonOffsetFactor,Q.polygonOffsetUnits),Q.alphaToCoverage===!0?j(n.SAMPLE_ALPHA_TO_COVERAGE):X(n.SAMPLE_ALPHA_TO_COVERAGE)}function Qe(Q){I!==Q&&(Q?n.frontFace(n.CW):n.frontFace(n.CCW),I=Q)}function We(Q){Q!==T4?(j(n.CULL_FACE),Q!==U&&(Q===SA?n.cullFace(n.BACK):Q===M4?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):X(n.CULL_FACE),U=Q}function Pe(Q){Q!==G&&(b&&n.lineWidth(Q),G=Q)}function Nt(Q,Be,se){Q?(j(n.POLYGON_OFFSET_FILL),(R!==Be||v!==se)&&(n.polygonOffset(Be,se),R=Be,v=se)):X(n.POLYGON_OFFSET_FILL)}function Me(Q){Q?j(n.SCISSOR_TEST):X(n.SCISSOR_TEST)}function W(Q){Q===void 0&&(Q=n.TEXTURE0+_-1),D!==Q&&(n.activeTexture(Q),D=Q)}function H(Q,Be,se){se===void 0&&(D===null?se=n.TEXTURE0+_-1:se=D);let pe=V[se];pe===void 0&&(pe={type:void 0,texture:void 0},V[se]=pe),(pe.type!==Q||pe.texture!==Be)&&(D!==se&&(n.activeTexture(se),D=se),n.bindTexture(Q,Be||Y[Q]),pe.type=Q,pe.texture=Be)}function te(){const Q=V[D];Q!==void 0&&Q.type!==void 0&&(n.bindTexture(Q.type,null),Q.type=void 0,Q.texture=void 0)}function de(){try{n.compressedTexImage2D.apply(n,arguments)}catch{}}function Z(){try{n.compressedTexImage3D.apply(n,arguments)}catch{}}function ne(){try{n.texSubImage2D.apply(n,arguments)}catch{}}function ye(){try{n.texSubImage3D.apply(n,arguments)}catch{}}function Ce(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch{}}function Ee(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch{}}function nt(){try{n.texStorage2D.apply(n,arguments)}catch{}}function Ae(){try{n.texStorage3D.apply(n,arguments)}catch{}}function Re(){try{n.texImage2D.apply(n,arguments)}catch{}}function Oe(){try{n.texImage3D.apply(n,arguments)}catch{}}function ot(Q){$.equals(Q)===!1&&(n.scissor(Q.x,Q.y,Q.z,Q.w),$.copy(Q))}function Ie(Q){K.equals(Q)===!1&&(n.viewport(Q.x,Q.y,Q.z,Q.w),K.copy(Q))}function Je(Q,Be){let se=c.get(Be);se===void 0&&(se=new WeakMap,c.set(Be,se));let pe=se.get(Q);pe===void 0&&(pe=n.getUniformBlockIndex(Be,Q.name),se.set(Q,pe))}function pt(Q,Be){const pe=c.get(Be).get(Q);l.get(Be)!==pe&&(n.uniformBlockBinding(Be,pe,Q.__bindingPointIndex),l.set(Be,pe))}function lt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},D=null,V={},d={},f=new WeakMap,p=[],m=null,g=!1,y=null,h=null,w=null,M=null,S=null,C=null,k=null,F=new qt(0,0,0),N=0,B=!1,I=null,U=null,G=null,R=null,v=null,$.set(0,0,n.canvas.width,n.canvas.height),K.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:j,disable:X,bindFramebuffer:ee,drawBuffers:le,useProgram:me,setBlending:q,setMaterial:ze,setFlipSided:Qe,setCullFace:We,setLineWidth:Pe,setPolygonOffset:Nt,setScissorTest:Me,activeTexture:W,bindTexture:H,unbindTexture:te,compressedTexImage2D:de,compressedTexImage3D:Z,texImage2D:Re,texImage3D:Oe,updateUBOMapping:Je,uniformBlockBinding:pt,texStorage2D:nt,texStorage3D:Ae,texSubImage2D:ne,texSubImage3D:ye,compressedTexSubImage2D:Ce,compressedTexSubImage3D:Ee,scissor:ot,viewport:Ie,reset:lt}}function O9(n,e,t,r,i,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Lt,u=new WeakMap;let d;const f=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(W,H){return p?new OffscreenCanvas(W,H):Kp("canvas")}function g(W,H,te){let de=1;const Z=Me(W);if((Z.width>te||Z.height>te)&&(de=te/Math.max(Z.width,Z.height)),de<1)if(typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&W instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&W instanceof ImageBitmap||typeof VideoFrame<"u"&&W instanceof VideoFrame){const ne=Math.floor(de*Z.width),ye=Math.floor(de*Z.height);d===void 0&&(d=m(ne,ye));const Ce=H?m(ne,ye):d;return Ce.width=ne,Ce.height=ye,Ce.getContext("2d").drawImage(W,0,0,ne,ye),Ce}else return"data"in W,W;return W}function y(W){return W.generateMipmaps}function h(W){n.generateMipmap(W)}function w(W){return W.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:W.isWebGL3DRenderTarget?n.TEXTURE_3D:W.isWebGLArrayRenderTarget||W.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function M(W,H,te,de,Z=!1){if(W!==null&&n[W]!==void 0)return n[W];let ne=H;if(H===n.RED&&(te===n.FLOAT&&(ne=n.R32F),te===n.HALF_FLOAT&&(ne=n.R16F),te===n.UNSIGNED_BYTE&&(ne=n.R8)),H===n.RED_INTEGER&&(te===n.UNSIGNED_BYTE&&(ne=n.R8UI),te===n.UNSIGNED_SHORT&&(ne=n.R16UI),te===n.UNSIGNED_INT&&(ne=n.R32UI),te===n.BYTE&&(ne=n.R8I),te===n.SHORT&&(ne=n.R16I),te===n.INT&&(ne=n.R32I)),H===n.RG&&(te===n.FLOAT&&(ne=n.RG32F),te===n.HALF_FLOAT&&(ne=n.RG16F),te===n.UNSIGNED_BYTE&&(ne=n.RG8)),H===n.RG_INTEGER&&(te===n.UNSIGNED_BYTE&&(ne=n.RG8UI),te===n.UNSIGNED_SHORT&&(ne=n.RG16UI),te===n.UNSIGNED_INT&&(ne=n.RG32UI),te===n.BYTE&&(ne=n.RG8I),te===n.SHORT&&(ne=n.RG16I),te===n.INT&&(ne=n.RG32I)),H===n.RGB_INTEGER&&(te===n.UNSIGNED_BYTE&&(ne=n.RGB8UI),te===n.UNSIGNED_SHORT&&(ne=n.RGB16UI),te===n.UNSIGNED_INT&&(ne=n.RGB32UI),te===n.BYTE&&(ne=n.RGB8I),te===n.SHORT&&(ne=n.RGB16I),te===n.INT&&(ne=n.RGB32I)),H===n.RGBA_INTEGER&&(te===n.UNSIGNED_BYTE&&(ne=n.RGBA8UI),te===n.UNSIGNED_SHORT&&(ne=n.RGBA16UI),te===n.UNSIGNED_INT&&(ne=n.RGBA32UI),te===n.BYTE&&(ne=n.RGBA8I),te===n.SHORT&&(ne=n.RGBA16I),te===n.INT&&(ne=n.RGBA32I)),H===n.RGB&&te===n.UNSIGNED_INT_5_9_9_9_REV&&(ne=n.RGB9_E5),H===n.RGBA){const ye=Z?qp:Jt.getTransfer(de);te===n.FLOAT&&(ne=n.RGBA32F),te===n.HALF_FLOAT&&(ne=n.RGBA16F),te===n.UNSIGNED_BYTE&&(ne=ye===mn?n.SRGB8_ALPHA8:n.RGBA8),te===n.UNSIGNED_SHORT_4_4_4_4&&(ne=n.RGBA4),te===n.UNSIGNED_SHORT_5_5_5_1&&(ne=n.RGB5_A1)}return(ne===n.R16F||ne===n.R32F||ne===n.RG16F||ne===n.RG32F||ne===n.RGBA16F||ne===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ne}function S(W,H){let te;return W?H===null||H===Bl||H===_u?te=n.DEPTH24_STENCIL8:H===No?te=n.DEPTH32F_STENCIL8:H===cf&&(te=n.DEPTH24_STENCIL8):H===null||H===Bl||H===_u?te=n.DEPTH_COMPONENT24:H===No?te=n.DEPTH_COMPONENT32F:H===cf&&(te=n.DEPTH_COMPONENT16),te}function C(W,H){return y(W)===!0||W.isFramebufferTexture&&W.minFilter!==as&&W.minFilter!==Us?Math.log2(Math.max(H.width,H.height))+1:W.mipmaps!==void 0&&W.mipmaps.length>0?W.mipmaps.length:W.isCompressedTexture&&Array.isArray(W.image)?H.mipmaps.length:1}function k(W){const H=W.target;H.removeEventListener("dispose",k),N(H),H.isVideoTexture&&u.delete(H)}function F(W){const H=W.target;H.removeEventListener("dispose",F),I(H)}function N(W){const H=r.get(W);if(H.__webglInit===void 0)return;const te=W.source,de=f.get(te);if(de){const Z=de[H.__cacheKey];Z.usedTimes--,Z.usedTimes===0&&B(W),Object.keys(de).length===0&&f.delete(te)}r.remove(W)}function B(W){const H=r.get(W);n.deleteTexture(H.__webglTexture);const te=W.source,de=f.get(te);delete de[H.__cacheKey],o.memory.textures--}function I(W){const H=r.get(W);if(W.depthTexture&&(W.depthTexture.dispose(),r.remove(W.depthTexture)),W.isWebGLCubeRenderTarget)for(let de=0;de<6;de++){if(Array.isArray(H.__webglFramebuffer[de]))for(let Z=0;Z<H.__webglFramebuffer[de].length;Z++)n.deleteFramebuffer(H.__webglFramebuffer[de][Z]);else n.deleteFramebuffer(H.__webglFramebuffer[de]);H.__webglDepthbuffer&&n.deleteRenderbuffer(H.__webglDepthbuffer[de])}else{if(Array.isArray(H.__webglFramebuffer))for(let de=0;de<H.__webglFramebuffer.length;de++)n.deleteFramebuffer(H.__webglFramebuffer[de]);else n.deleteFramebuffer(H.__webglFramebuffer);if(H.__webglDepthbuffer&&n.deleteRenderbuffer(H.__webglDepthbuffer),H.__webglMultisampledFramebuffer&&n.deleteFramebuffer(H.__webglMultisampledFramebuffer),H.__webglColorRenderbuffer)for(let de=0;de<H.__webglColorRenderbuffer.length;de++)H.__webglColorRenderbuffer[de]&&n.deleteRenderbuffer(H.__webglColorRenderbuffer[de]);H.__webglDepthRenderbuffer&&n.deleteRenderbuffer(H.__webglDepthRenderbuffer)}const te=W.textures;for(let de=0,Z=te.length;de<Z;de++){const ne=r.get(te[de]);ne.__webglTexture&&(n.deleteTexture(ne.__webglTexture),o.memory.textures--),r.remove(te[de])}r.remove(W)}let U=0;function G(){U=0}function R(){const W=U;return W>=i.maxTextures,U+=1,W}function v(W){const H=[];return H.push(W.wrapS),H.push(W.wrapT),H.push(W.wrapR||0),H.push(W.magFilter),H.push(W.minFilter),H.push(W.anisotropy),H.push(W.internalFormat),H.push(W.format),H.push(W.type),H.push(W.generateMipmaps),H.push(W.premultiplyAlpha),H.push(W.flipY),H.push(W.unpackAlignment),H.push(W.colorSpace),H.join()}function _(W,H){const te=r.get(W);if(W.isVideoTexture&&Pe(W),W.isRenderTargetTexture===!1&&W.version>0&&te.__version!==W.version){const de=W.image;if(de!==null){if(de.complete!==!1){K(te,W,H);return}}}t.bindTexture(n.TEXTURE_2D,te.__webglTexture,n.TEXTURE0+H)}function b(W,H){const te=r.get(W);if(W.version>0&&te.__version!==W.version){K(te,W,H);return}t.bindTexture(n.TEXTURE_2D_ARRAY,te.__webglTexture,n.TEXTURE0+H)}function A(W,H){const te=r.get(W);if(W.version>0&&te.__version!==W.version){K(te,W,H);return}t.bindTexture(n.TEXTURE_3D,te.__webglTexture,n.TEXTURE0+H)}function T(W,H){const te=r.get(W);if(W.version>0&&te.__version!==W.version){E(te,W,H);return}t.bindTexture(n.TEXTURE_CUBE_MAP,te.__webglTexture,n.TEXTURE0+H)}const D={[Ty]:n.REPEAT,[vl]:n.CLAMP_TO_EDGE,[My]:n.MIRRORED_REPEAT},V={[as]:n.NEAREST,[n6]:n.NEAREST_MIPMAP_NEAREST,[Th]:n.NEAREST_MIPMAP_LINEAR,[Us]:n.LINEAR,[Eg]:n.LINEAR_MIPMAP_NEAREST,[yl]:n.LINEAR_MIPMAP_LINEAR},O={[a6]:n.NEVER,[h6]:n.ALWAYS,[l6]:n.LESS,[K2]:n.LEQUAL,[c6]:n.EQUAL,[f6]:n.GEQUAL,[u6]:n.GREATER,[d6]:n.NOTEQUAL};function x(W,H){if(H.type===No&&e.has("OES_texture_float_linear")===!1&&(H.magFilter===Us||H.magFilter===Eg||H.magFilter===Th||H.magFilter===yl||H.minFilter===Us||H.minFilter===Eg||H.minFilter===Th||H.minFilter),n.texParameteri(W,n.TEXTURE_WRAP_S,D[H.wrapS]),n.texParameteri(W,n.TEXTURE_WRAP_T,D[H.wrapT]),(W===n.TEXTURE_3D||W===n.TEXTURE_2D_ARRAY)&&n.texParameteri(W,n.TEXTURE_WRAP_R,D[H.wrapR]),n.texParameteri(W,n.TEXTURE_MAG_FILTER,V[H.magFilter]),n.texParameteri(W,n.TEXTURE_MIN_FILTER,V[H.minFilter]),H.compareFunction&&(n.texParameteri(W,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(W,n.TEXTURE_COMPARE_FUNC,O[H.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(H.magFilter===as||H.minFilter!==Th&&H.minFilter!==yl||H.type===No&&e.has("OES_texture_float_linear")===!1)return;if(H.anisotropy>1||r.get(H).__currentAnisotropy){const te=e.get("EXT_texture_filter_anisotropic");n.texParameterf(W,te.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(H.anisotropy,i.getMaxAnisotropy())),r.get(H).__currentAnisotropy=H.anisotropy}}}function $(W,H){let te=!1;W.__webglInit===void 0&&(W.__webglInit=!0,H.addEventListener("dispose",k));const de=H.source;let Z=f.get(de);Z===void 0&&(Z={},f.set(de,Z));const ne=v(H);if(ne!==W.__cacheKey){Z[ne]===void 0&&(Z[ne]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,te=!0),Z[ne].usedTimes++;const ye=Z[W.__cacheKey];ye!==void 0&&(Z[W.__cacheKey].usedTimes--,ye.usedTimes===0&&B(H)),W.__cacheKey=ne,W.__webglTexture=Z[ne].texture}return te}function K(W,H,te){let de=n.TEXTURE_2D;(H.isDataArrayTexture||H.isCompressedArrayTexture)&&(de=n.TEXTURE_2D_ARRAY),H.isData3DTexture&&(de=n.TEXTURE_3D);const Z=$(W,H),ne=H.source;t.bindTexture(de,W.__webglTexture,n.TEXTURE0+te);const ye=r.get(ne);if(ne.version!==ye.__version||Z===!0){t.activeTexture(n.TEXTURE0+te);const Ce=Jt.getPrimaries(Jt.workingColorSpace),Ee=H.colorSpace===Ea?null:Jt.getPrimaries(H.colorSpace),nt=H.colorSpace===Ea||Ce===Ee?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,H.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,H.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,nt);let Ae=g(H.image,!1,i.maxTextureSize);Ae=Nt(H,Ae);const Re=s.convert(H.format,H.colorSpace),Oe=s.convert(H.type);let ot=M(H.internalFormat,Re,Oe,H.colorSpace,H.isVideoTexture);x(de,H);let Ie;const Je=H.mipmaps,pt=H.isVideoTexture!==!0,lt=ye.__version===void 0||Z===!0,Q=ne.dataReady,Be=C(H,Ae);if(H.isDepthTexture)ot=S(H.format===bu,H.type),lt&&(pt?t.texStorage2D(n.TEXTURE_2D,1,ot,Ae.width,Ae.height):t.texImage2D(n.TEXTURE_2D,0,ot,Ae.width,Ae.height,0,Re,Oe,null));else if(H.isDataTexture)if(Je.length>0){pt&&lt&&t.texStorage2D(n.TEXTURE_2D,Be,ot,Je[0].width,Je[0].height);for(let se=0,pe=Je.length;se<pe;se++)Ie=Je[se],pt?Q&&t.texSubImage2D(n.TEXTURE_2D,se,0,0,Ie.width,Ie.height,Re,Oe,Ie.data):t.texImage2D(n.TEXTURE_2D,se,ot,Ie.width,Ie.height,0,Re,Oe,Ie.data);H.generateMipmaps=!1}else pt?(lt&&t.texStorage2D(n.TEXTURE_2D,Be,ot,Ae.width,Ae.height),Q&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ae.width,Ae.height,Re,Oe,Ae.data)):t.texImage2D(n.TEXTURE_2D,0,ot,Ae.width,Ae.height,0,Re,Oe,Ae.data);else if(H.isCompressedTexture)if(H.isCompressedArrayTexture){pt&&lt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Be,ot,Je[0].width,Je[0].height,Ae.depth);for(let se=0,pe=Je.length;se<pe;se++)if(Ie=Je[se],H.format!==rs){if(Re!==null)if(pt){if(Q)if(H.layerUpdates.size>0){const Le=e1(Ie.width,Ie.height,H.format,H.type);for(const xe of H.layerUpdates){const Xe=Ie.data.subarray(xe*Le/Ie.data.BYTES_PER_ELEMENT,(xe+1)*Le/Ie.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,se,0,0,xe,Ie.width,Ie.height,1,Re,Xe)}H.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,se,0,0,0,Ie.width,Ie.height,Ae.depth,Re,Ie.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,se,ot,Ie.width,Ie.height,Ae.depth,0,Ie.data,0,0)}else pt?Q&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,se,0,0,0,Ie.width,Ie.height,Ae.depth,Re,Oe,Ie.data):t.texImage3D(n.TEXTURE_2D_ARRAY,se,ot,Ie.width,Ie.height,Ae.depth,0,Re,Oe,Ie.data)}else{pt&&lt&&t.texStorage2D(n.TEXTURE_2D,Be,ot,Je[0].width,Je[0].height);for(let se=0,pe=Je.length;se<pe;se++)Ie=Je[se],H.format!==rs?Re!==null&&(pt?Q&&t.compressedTexSubImage2D(n.TEXTURE_2D,se,0,0,Ie.width,Ie.height,Re,Ie.data):t.compressedTexImage2D(n.TEXTURE_2D,se,ot,Ie.width,Ie.height,0,Ie.data)):pt?Q&&t.texSubImage2D(n.TEXTURE_2D,se,0,0,Ie.width,Ie.height,Re,Oe,Ie.data):t.texImage2D(n.TEXTURE_2D,se,ot,Ie.width,Ie.height,0,Re,Oe,Ie.data)}else if(H.isDataArrayTexture)if(pt){if(lt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Be,ot,Ae.width,Ae.height,Ae.depth),Q)if(H.layerUpdates.size>0){const se=e1(Ae.width,Ae.height,H.format,H.type);for(const pe of H.layerUpdates){const Le=Ae.data.subarray(pe*se/Ae.data.BYTES_PER_ELEMENT,(pe+1)*se/Ae.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,pe,Ae.width,Ae.height,1,Re,Oe,Le)}H.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ae.width,Ae.height,Ae.depth,Re,Oe,Ae.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,ot,Ae.width,Ae.height,Ae.depth,0,Re,Oe,Ae.data);else if(H.isData3DTexture)pt?(lt&&t.texStorage3D(n.TEXTURE_3D,Be,ot,Ae.width,Ae.height,Ae.depth),Q&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ae.width,Ae.height,Ae.depth,Re,Oe,Ae.data)):t.texImage3D(n.TEXTURE_3D,0,ot,Ae.width,Ae.height,Ae.depth,0,Re,Oe,Ae.data);else if(H.isFramebufferTexture){if(lt)if(pt)t.texStorage2D(n.TEXTURE_2D,Be,ot,Ae.width,Ae.height);else{let se=Ae.width,pe=Ae.height;for(let Le=0;Le<Be;Le++)t.texImage2D(n.TEXTURE_2D,Le,ot,se,pe,0,Re,Oe,null),se>>=1,pe>>=1}}else if(Je.length>0){if(pt&&lt){const se=Me(Je[0]);t.texStorage2D(n.TEXTURE_2D,Be,ot,se.width,se.height)}for(let se=0,pe=Je.length;se<pe;se++)Ie=Je[se],pt?Q&&t.texSubImage2D(n.TEXTURE_2D,se,0,0,Re,Oe,Ie):t.texImage2D(n.TEXTURE_2D,se,ot,Re,Oe,Ie);H.generateMipmaps=!1}else if(pt){if(lt){const se=Me(Ae);t.texStorage2D(n.TEXTURE_2D,Be,ot,se.width,se.height)}Q&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Re,Oe,Ae)}else t.texImage2D(n.TEXTURE_2D,0,ot,Re,Oe,Ae);y(H)&&h(de),ye.__version=ne.version,H.onUpdate&&H.onUpdate(H)}W.__version=H.version}function E(W,H,te){if(H.image.length!==6)return;const de=$(W,H),Z=H.source;t.bindTexture(n.TEXTURE_CUBE_MAP,W.__webglTexture,n.TEXTURE0+te);const ne=r.get(Z);if(Z.version!==ne.__version||de===!0){t.activeTexture(n.TEXTURE0+te);const ye=Jt.getPrimaries(Jt.workingColorSpace),Ce=H.colorSpace===Ea?null:Jt.getPrimaries(H.colorSpace),Ee=H.colorSpace===Ea||ye===Ce?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,H.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,H.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ee);const nt=H.isCompressedTexture||H.image[0].isCompressedTexture,Ae=H.image[0]&&H.image[0].isDataTexture,Re=[];for(let pe=0;pe<6;pe++)!nt&&!Ae?Re[pe]=g(H.image[pe],!0,i.maxCubemapSize):Re[pe]=Ae?H.image[pe].image:H.image[pe],Re[pe]=Nt(H,Re[pe]);const Oe=Re[0],ot=s.convert(H.format,H.colorSpace),Ie=s.convert(H.type),Je=M(H.internalFormat,ot,Ie,H.colorSpace),pt=H.isVideoTexture!==!0,lt=ne.__version===void 0||de===!0,Q=Z.dataReady;let Be=C(H,Oe);x(n.TEXTURE_CUBE_MAP,H);let se;if(nt){pt&&lt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Be,Je,Oe.width,Oe.height);for(let pe=0;pe<6;pe++){se=Re[pe].mipmaps;for(let Le=0;Le<se.length;Le++){const xe=se[Le];H.format!==rs?ot!==null&&(pt?Q&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Le,0,0,xe.width,xe.height,ot,xe.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Le,Je,xe.width,xe.height,0,xe.data)):pt?Q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Le,0,0,xe.width,xe.height,ot,Ie,xe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Le,Je,xe.width,xe.height,0,ot,Ie,xe.data)}}}else{if(se=H.mipmaps,pt&&lt){se.length>0&&Be++;const pe=Me(Re[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Be,Je,pe.width,pe.height)}for(let pe=0;pe<6;pe++)if(Ae){pt?Q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,0,0,Re[pe].width,Re[pe].height,ot,Ie,Re[pe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,Je,Re[pe].width,Re[pe].height,0,ot,Ie,Re[pe].data);for(let Le=0;Le<se.length;Le++){const Xe=se[Le].image[pe].image;pt?Q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Le+1,0,0,Xe.width,Xe.height,ot,Ie,Xe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Le+1,Je,Xe.width,Xe.height,0,ot,Ie,Xe.data)}}else{pt?Q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,0,0,ot,Ie,Re[pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,Je,ot,Ie,Re[pe]);for(let Le=0;Le<se.length;Le++){const xe=se[Le];pt?Q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Le+1,0,0,ot,Ie,xe.image[pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Le+1,Je,ot,Ie,xe.image[pe])}}}y(H)&&h(n.TEXTURE_CUBE_MAP),ne.__version=Z.version,H.onUpdate&&H.onUpdate(H)}W.__version=H.version}function Y(W,H,te,de,Z,ne){const ye=s.convert(te.format,te.colorSpace),Ce=s.convert(te.type),Ee=M(te.internalFormat,ye,Ce,te.colorSpace),nt=r.get(H),Ae=r.get(te);if(Ae.__renderTarget=H,!nt.__hasExternalTextures){const Re=Math.max(1,H.width>>ne),Oe=Math.max(1,H.height>>ne);Z===n.TEXTURE_3D||Z===n.TEXTURE_2D_ARRAY?t.texImage3D(Z,ne,Ee,Re,Oe,H.depth,0,ye,Ce,null):t.texImage2D(Z,ne,Ee,Re,Oe,0,ye,Ce,null)}t.bindFramebuffer(n.FRAMEBUFFER,W),We(H)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,de,Z,Ae.__webglTexture,0,Qe(H)):(Z===n.TEXTURE_2D||Z>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Z<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,de,Z,Ae.__webglTexture,ne),t.bindFramebuffer(n.FRAMEBUFFER,null)}function j(W,H,te){if(n.bindRenderbuffer(n.RENDERBUFFER,W),H.depthBuffer){const de=H.depthTexture,Z=de&&de.isDepthTexture?de.type:null,ne=S(H.stencilBuffer,Z),ye=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ce=Qe(H);We(H)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ce,ne,H.width,H.height):te?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ce,ne,H.width,H.height):n.renderbufferStorage(n.RENDERBUFFER,ne,H.width,H.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,ye,n.RENDERBUFFER,W)}else{const de=H.textures;for(let Z=0;Z<de.length;Z++){const ne=de[Z],ye=s.convert(ne.format,ne.colorSpace),Ce=s.convert(ne.type),Ee=M(ne.internalFormat,ye,Ce,ne.colorSpace),nt=Qe(H);te&&We(H)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,nt,Ee,H.width,H.height):We(H)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,nt,Ee,H.width,H.height):n.renderbufferStorage(n.RENDERBUFFER,Ee,H.width,H.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function X(W,H){if(H&&H.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,W),!(H.depthTexture&&H.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const de=r.get(H.depthTexture);de.__renderTarget=H,(!de.__webglTexture||H.depthTexture.image.width!==H.width||H.depthTexture.image.height!==H.height)&&(H.depthTexture.image.width=H.width,H.depthTexture.image.height=H.height,H.depthTexture.needsUpdate=!0),_(H.depthTexture,0);const Z=de.__webglTexture,ne=Qe(H);if(H.depthTexture.format===Qc)We(H)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Z,0,ne):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Z,0);else if(H.depthTexture.format===bu)We(H)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Z,0,ne):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Z,0);else throw new Error("Unknown depthTexture format")}function ee(W){const H=r.get(W),te=W.isWebGLCubeRenderTarget===!0;if(H.__boundDepthTexture!==W.depthTexture){const de=W.depthTexture;if(H.__depthDisposeCallback&&H.__depthDisposeCallback(),de){const Z=()=>{delete H.__boundDepthTexture,delete H.__depthDisposeCallback,de.removeEventListener("dispose",Z)};de.addEventListener("dispose",Z),H.__depthDisposeCallback=Z}H.__boundDepthTexture=de}if(W.depthTexture&&!H.__autoAllocateDepthBuffer){if(te)throw new Error("target.depthTexture not supported in Cube render targets");X(H.__webglFramebuffer,W)}else if(te){H.__webglDepthbuffer=[];for(let de=0;de<6;de++)if(t.bindFramebuffer(n.FRAMEBUFFER,H.__webglFramebuffer[de]),H.__webglDepthbuffer[de]===void 0)H.__webglDepthbuffer[de]=n.createRenderbuffer(),j(H.__webglDepthbuffer[de],W,!1);else{const Z=W.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ne=H.__webglDepthbuffer[de];n.bindRenderbuffer(n.RENDERBUFFER,ne),n.framebufferRenderbuffer(n.FRAMEBUFFER,Z,n.RENDERBUFFER,ne)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,H.__webglFramebuffer),H.__webglDepthbuffer===void 0)H.__webglDepthbuffer=n.createRenderbuffer(),j(H.__webglDepthbuffer,W,!1);else{const de=W.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Z=H.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Z),n.framebufferRenderbuffer(n.FRAMEBUFFER,de,n.RENDERBUFFER,Z)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function le(W,H,te){const de=r.get(W);H!==void 0&&Y(de.__webglFramebuffer,W,W.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),te!==void 0&&ee(W)}function me(W){const H=W.texture,te=r.get(W),de=r.get(H);W.addEventListener("dispose",F);const Z=W.textures,ne=W.isWebGLCubeRenderTarget===!0,ye=Z.length>1;if(ye||(de.__webglTexture===void 0&&(de.__webglTexture=n.createTexture()),de.__version=H.version,o.memory.textures++),ne){te.__webglFramebuffer=[];for(let Ce=0;Ce<6;Ce++)if(H.mipmaps&&H.mipmaps.length>0){te.__webglFramebuffer[Ce]=[];for(let Ee=0;Ee<H.mipmaps.length;Ee++)te.__webglFramebuffer[Ce][Ee]=n.createFramebuffer()}else te.__webglFramebuffer[Ce]=n.createFramebuffer()}else{if(H.mipmaps&&H.mipmaps.length>0){te.__webglFramebuffer=[];for(let Ce=0;Ce<H.mipmaps.length;Ce++)te.__webglFramebuffer[Ce]=n.createFramebuffer()}else te.__webglFramebuffer=n.createFramebuffer();if(ye)for(let Ce=0,Ee=Z.length;Ce<Ee;Ce++){const nt=r.get(Z[Ce]);nt.__webglTexture===void 0&&(nt.__webglTexture=n.createTexture(),o.memory.textures++)}if(W.samples>0&&We(W)===!1){te.__webglMultisampledFramebuffer=n.createFramebuffer(),te.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,te.__webglMultisampledFramebuffer);for(let Ce=0;Ce<Z.length;Ce++){const Ee=Z[Ce];te.__webglColorRenderbuffer[Ce]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,te.__webglColorRenderbuffer[Ce]);const nt=s.convert(Ee.format,Ee.colorSpace),Ae=s.convert(Ee.type),Re=M(Ee.internalFormat,nt,Ae,Ee.colorSpace,W.isXRRenderTarget===!0),Oe=Qe(W);n.renderbufferStorageMultisample(n.RENDERBUFFER,Oe,Re,W.width,W.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ce,n.RENDERBUFFER,te.__webglColorRenderbuffer[Ce])}n.bindRenderbuffer(n.RENDERBUFFER,null),W.depthBuffer&&(te.__webglDepthRenderbuffer=n.createRenderbuffer(),j(te.__webglDepthRenderbuffer,W,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ne){t.bindTexture(n.TEXTURE_CUBE_MAP,de.__webglTexture),x(n.TEXTURE_CUBE_MAP,H);for(let Ce=0;Ce<6;Ce++)if(H.mipmaps&&H.mipmaps.length>0)for(let Ee=0;Ee<H.mipmaps.length;Ee++)Y(te.__webglFramebuffer[Ce][Ee],W,H,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Ee);else Y(te.__webglFramebuffer[Ce],W,H,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0);y(H)&&h(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ye){for(let Ce=0,Ee=Z.length;Ce<Ee;Ce++){const nt=Z[Ce],Ae=r.get(nt);t.bindTexture(n.TEXTURE_2D,Ae.__webglTexture),x(n.TEXTURE_2D,nt),Y(te.__webglFramebuffer,W,nt,n.COLOR_ATTACHMENT0+Ce,n.TEXTURE_2D,0),y(nt)&&h(n.TEXTURE_2D)}t.unbindTexture()}else{let Ce=n.TEXTURE_2D;if((W.isWebGL3DRenderTarget||W.isWebGLArrayRenderTarget)&&(Ce=W.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Ce,de.__webglTexture),x(Ce,H),H.mipmaps&&H.mipmaps.length>0)for(let Ee=0;Ee<H.mipmaps.length;Ee++)Y(te.__webglFramebuffer[Ee],W,H,n.COLOR_ATTACHMENT0,Ce,Ee);else Y(te.__webglFramebuffer,W,H,n.COLOR_ATTACHMENT0,Ce,0);y(H)&&h(Ce),t.unbindTexture()}W.depthBuffer&&ee(W)}function he(W){const H=W.textures;for(let te=0,de=H.length;te<de;te++){const Z=H[te];if(y(Z)){const ne=w(W),ye=r.get(Z).__webglTexture;t.bindTexture(ne,ye),h(ne),t.unbindTexture()}}}const je=[],q=[];function ze(W){if(W.samples>0){if(We(W)===!1){const H=W.textures,te=W.width,de=W.height;let Z=n.COLOR_BUFFER_BIT;const ne=W.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ye=r.get(W),Ce=H.length>1;if(Ce)for(let Ee=0;Ee<H.length;Ee++)t.bindFramebuffer(n.FRAMEBUFFER,ye.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ee,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,ye.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ee,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,ye.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ye.__webglFramebuffer);for(let Ee=0;Ee<H.length;Ee++){if(W.resolveDepthBuffer&&(W.depthBuffer&&(Z|=n.DEPTH_BUFFER_BIT),W.stencilBuffer&&W.resolveStencilBuffer&&(Z|=n.STENCIL_BUFFER_BIT)),Ce){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,ye.__webglColorRenderbuffer[Ee]);const nt=r.get(H[Ee]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,nt,0)}n.blitFramebuffer(0,0,te,de,0,0,te,de,Z,n.NEAREST),l===!0&&(je.length=0,q.length=0,je.push(n.COLOR_ATTACHMENT0+Ee),W.depthBuffer&&W.resolveDepthBuffer===!1&&(je.push(ne),q.push(ne),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,q)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,je))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ce)for(let Ee=0;Ee<H.length;Ee++){t.bindFramebuffer(n.FRAMEBUFFER,ye.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ee,n.RENDERBUFFER,ye.__webglColorRenderbuffer[Ee]);const nt=r.get(H[Ee]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,ye.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ee,n.TEXTURE_2D,nt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ye.__webglMultisampledFramebuffer)}else if(W.depthBuffer&&W.resolveDepthBuffer===!1&&l){const H=W.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[H])}}}function Qe(W){return Math.min(i.maxSamples,W.samples)}function We(W){const H=r.get(W);return W.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&H.__useRenderToTexture!==!1}function Pe(W){const H=o.render.frame;u.get(W)!==H&&(u.set(W,H),W.update())}function Nt(W,H){const te=W.colorSpace,de=W.format,Z=W.type;return W.isCompressedTexture===!0||W.isVideoTexture===!0||te!==xu&&te!==Ea&&Jt.getTransfer(te),H}function Me(W){return typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement?(c.width=W.naturalWidth||W.width,c.height=W.naturalHeight||W.height):typeof VideoFrame<"u"&&W instanceof VideoFrame?(c.width=W.displayWidth,c.height=W.displayHeight):(c.width=W.width,c.height=W.height),c}this.allocateTextureUnit=R,this.resetTextureUnits=G,this.setTexture2D=_,this.setTexture2DArray=b,this.setTexture3D=A,this.setTextureCube=T,this.rebindTextures=le,this.setupRenderTarget=me,this.updateRenderTargetMipmap=he,this.updateMultisampleRenderTarget=ze,this.setupDepthRenderbuffer=ee,this.setupFrameBufferTexture=Y,this.useMultisampledRTT=We}function F9(n,e){function t(r,i=Ea){let s;const o=Jt.getTransfer(i);if(r===Go)return n.UNSIGNED_BYTE;if(r===Ib)return n.UNSIGNED_SHORT_4_4_4_4;if(r===Cb)return n.UNSIGNED_SHORT_5_5_5_1;if(r===z2)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===U2)return n.BYTE;if(r===H2)return n.SHORT;if(r===cf)return n.UNSIGNED_SHORT;if(r===Rb)return n.INT;if(r===Bl)return n.UNSIGNED_INT;if(r===No)return n.FLOAT;if(r===Kf)return n.HALF_FLOAT;if(r===G2)return n.ALPHA;if(r===V2)return n.RGB;if(r===rs)return n.RGBA;if(r===$2)return n.LUMINANCE;if(r===j2)return n.LUMINANCE_ALPHA;if(r===Qc)return n.DEPTH_COMPONENT;if(r===bu)return n.DEPTH_STENCIL;if(r===W2)return n.RED;if(r===Pb)return n.RED_INTEGER;if(r===q2)return n.RG;if(r===Nb)return n.RG_INTEGER;if(r===kb)return n.RGBA_INTEGER;if(r===fp||r===hp||r===pp||r===mp)if(o===mn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===fp)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===hp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===pp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===mp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===fp)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===hp)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===pp)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===mp)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===Ry||r===Iy||r===Cy||r===Py)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===Ry)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===Iy)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===Cy)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===Py)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===Ny||r===ky||r===By)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===Ny||r===ky)return o===mn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===By)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===Ly||r===Dy||r===Oy||r===Fy||r===Uy||r===Hy||r===zy||r===Gy||r===Vy||r===$y||r===jy||r===Wy||r===qy||r===Xy)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===Ly)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===Dy)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===Oy)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===Fy)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===Uy)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===Hy)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===zy)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===Gy)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===Vy)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===$y)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===jy)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===Wy)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===qy)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===Xy)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===gp||r===Ky||r===Yy)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===gp)return o===mn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===Ky)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===Yy)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===X2||r===Qy||r===Zy||r===Jy)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===gp)return s.COMPRESSED_RED_RGTC1_EXT;if(r===Qy)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===Zy)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===Jy)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===_u?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}const U9={type:"move"};class Qg{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Wh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Wh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new oe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new oe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Wh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new oe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new oe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const g of e.hand.values()){const y=t.getJointPose(g,r),h=this._getHandJoint(c,g);y!==null&&(h.matrix.fromArray(y.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,h.jointRadius=y.radius),h.visible=y!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],f=u.position.distanceTo(d.position),p=.02,m=.005;c.inputState.pinching&&f>p+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=p-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(U9)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Wh;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}const H9=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,z9=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class G9{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){const i=new Br,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!=r.depthNear||t.depthFar!=r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new Fa({vertexShader:H9,fragmentShader:z9,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Hs(new x0(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class V9 extends ec{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,d=null,f=null,p=null,m=null;const g=new G9,y=t.getContextAttributes();let h=null,w=null;const M=[],S=[],C=new Lt;let k=null;const F=new Ni;F.viewport=new Hn;const N=new Ni;N.viewport=new Hn;const B=[F,N],I=new c8;let U=null,G=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(K){let E=M[K];return E===void 0&&(E=new Qg,M[K]=E),E.getTargetRaySpace()},this.getControllerGrip=function(K){let E=M[K];return E===void 0&&(E=new Qg,M[K]=E),E.getGripSpace()},this.getHand=function(K){let E=M[K];return E===void 0&&(E=new Qg,M[K]=E),E.getHandSpace()};function R(K){const E=S.indexOf(K.inputSource);if(E===-1)return;const Y=M[E];Y!==void 0&&(Y.update(K.inputSource,K.frame,c||o),Y.dispatchEvent({type:K.type,data:K.inputSource}))}function v(){i.removeEventListener("select",R),i.removeEventListener("selectstart",R),i.removeEventListener("selectend",R),i.removeEventListener("squeeze",R),i.removeEventListener("squeezestart",R),i.removeEventListener("squeezeend",R),i.removeEventListener("end",v),i.removeEventListener("inputsourceschange",_);for(let K=0;K<M.length;K++){const E=S[K];E!==null&&(S[K]=null,M[K].disconnect(E))}U=null,G=null,g.reset(),e.setRenderTarget(h),p=null,f=null,d=null,i=null,w=null,$.stop(),r.isPresenting=!1,e.setPixelRatio(k),e.setSize(C.width,C.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(K){s=K,r.isPresenting},this.setReferenceSpaceType=function(K){a=K,r.isPresenting},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(K){c=K},this.getBaseLayer=function(){return f!==null?f:p},this.getBinding=function(){return d},this.getFrame=function(){return m},this.getSession=function(){return i},this.setSession=async function(K){if(i=K,i!==null){if(h=e.getRenderTarget(),i.addEventListener("select",R),i.addEventListener("selectstart",R),i.addEventListener("selectend",R),i.addEventListener("squeeze",R),i.addEventListener("squeezestart",R),i.addEventListener("squeezeend",R),i.addEventListener("end",v),i.addEventListener("inputsourceschange",_),y.xrCompatible!==!0&&await t.makeXRCompatible(),k=e.getPixelRatio(),e.getSize(C),i.renderState.layers===void 0){const E={antialias:y.antialias,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(i,t,E),i.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),w=new Ll(p.framebufferWidth,p.framebufferHeight,{format:rs,type:Go,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let E=null,Y=null,j=null;y.depth&&(j=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,E=y.stencil?bu:Qc,Y=y.stencil?_u:Bl);const X={colorFormat:t.RGBA8,depthFormat:j,scaleFactor:s};d=new XRWebGLBinding(i,t),f=d.createProjectionLayer(X),i.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),w=new Ll(f.textureWidth,f.textureHeight,{format:rs,type:Go,depthTexture:new aM(f.textureWidth,f.textureHeight,Y,void 0,void 0,void 0,void 0,void 0,void 0,E),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1})}w.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),$.setContext(i),$.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return g.getDepthTexture()};function _(K){for(let E=0;E<K.removed.length;E++){const Y=K.removed[E],j=S.indexOf(Y);j>=0&&(S[j]=null,M[j].disconnect(Y))}for(let E=0;E<K.added.length;E++){const Y=K.added[E];let j=S.indexOf(Y);if(j===-1){for(let ee=0;ee<M.length;ee++)if(ee>=S.length){S.push(Y),j=ee;break}else if(S[ee]===null){S[ee]=Y,j=ee;break}if(j===-1)break}const X=M[j];X&&X.connect(Y)}}const b=new oe,A=new oe;function T(K,E,Y){b.setFromMatrixPosition(E.matrixWorld),A.setFromMatrixPosition(Y.matrixWorld);const j=b.distanceTo(A),X=E.projectionMatrix.elements,ee=Y.projectionMatrix.elements,le=X[14]/(X[10]-1),me=X[14]/(X[10]+1),he=(X[9]+1)/X[5],je=(X[9]-1)/X[5],q=(X[8]-1)/X[0],ze=(ee[8]+1)/ee[0],Qe=le*q,We=le*ze,Pe=j/(-q+ze),Nt=Pe*-q;if(E.matrixWorld.decompose(K.position,K.quaternion,K.scale),K.translateX(Nt),K.translateZ(Pe),K.matrixWorld.compose(K.position,K.quaternion,K.scale),K.matrixWorldInverse.copy(K.matrixWorld).invert(),X[10]===-1)K.projectionMatrix.copy(E.projectionMatrix),K.projectionMatrixInverse.copy(E.projectionMatrixInverse);else{const Me=le+Pe,W=me+Pe,H=Qe-Nt,te=We+(j-Nt),de=he*me/W*Me,Z=je*me/W*Me;K.projectionMatrix.makePerspective(H,te,de,Z,Me,W),K.projectionMatrixInverse.copy(K.projectionMatrix).invert()}}function D(K,E){E===null?K.matrixWorld.copy(K.matrix):K.matrixWorld.multiplyMatrices(E.matrixWorld,K.matrix),K.matrixWorldInverse.copy(K.matrixWorld).invert()}this.updateCamera=function(K){if(i===null)return;let E=K.near,Y=K.far;g.texture!==null&&(g.depthNear>0&&(E=g.depthNear),g.depthFar>0&&(Y=g.depthFar)),I.near=N.near=F.near=E,I.far=N.far=F.far=Y,(U!==I.near||G!==I.far)&&(i.updateRenderState({depthNear:I.near,depthFar:I.far}),U=I.near,G=I.far),F.layers.mask=K.layers.mask|2,N.layers.mask=K.layers.mask|4,I.layers.mask=F.layers.mask|N.layers.mask;const j=K.parent,X=I.cameras;D(I,j);for(let ee=0;ee<X.length;ee++)D(X[ee],j);X.length===2?T(I,F,N):I.projectionMatrix.copy(F.projectionMatrix),V(K,I,j)};function V(K,E,Y){Y===null?K.matrix.copy(E.matrixWorld):(K.matrix.copy(Y.matrixWorld),K.matrix.invert(),K.matrix.multiply(E.matrixWorld)),K.matrix.decompose(K.position,K.quaternion,K.scale),K.updateMatrixWorld(!0),K.projectionMatrix.copy(E.projectionMatrix),K.projectionMatrixInverse.copy(E.projectionMatrixInverse),K.isPerspectiveCamera&&(K.fov=uf*2*Math.atan(1/K.projectionMatrix.elements[5]),K.zoom=1)}this.getCamera=function(){return I},this.getFoveation=function(){if(!(f===null&&p===null))return l},this.setFoveation=function(K){l=K,f!==null&&(f.fixedFoveation=K),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=K)},this.hasDepthSensing=function(){return g.texture!==null},this.getDepthSensingMesh=function(){return g.getMesh(I)};let O=null;function x(K,E){if(u=E.getViewerPose(c||o),m=E,u!==null){const Y=u.views;p!==null&&(e.setRenderTargetFramebuffer(w,p.framebuffer),e.setRenderTarget(w));let j=!1;Y.length!==I.cameras.length&&(I.cameras.length=0,j=!0);for(let ee=0;ee<Y.length;ee++){const le=Y[ee];let me=null;if(p!==null)me=p.getViewport(le);else{const je=d.getViewSubImage(f,le);me=je.viewport,ee===0&&(e.setRenderTargetTextures(w,je.colorTexture,f.ignoreDepthValues?void 0:je.depthStencilTexture),e.setRenderTarget(w))}let he=B[ee];he===void 0&&(he=new Ni,he.layers.enable(ee),he.viewport=new Hn,B[ee]=he),he.matrix.fromArray(le.transform.matrix),he.matrix.decompose(he.position,he.quaternion,he.scale),he.projectionMatrix.fromArray(le.projectionMatrix),he.projectionMatrixInverse.copy(he.projectionMatrix).invert(),he.viewport.set(me.x,me.y,me.width,me.height),ee===0&&(I.matrix.copy(he.matrix),I.matrix.decompose(I.position,I.quaternion,I.scale)),j===!0&&I.cameras.push(he)}const X=i.enabledFeatures;if(X&&X.includes("depth-sensing")){const ee=d.getDepthInformation(Y[0]);ee&&ee.isValid&&ee.texture&&g.init(e,ee,i.renderState)}}for(let Y=0;Y<M.length;Y++){const j=S[Y],X=M[Y];j!==null&&X!==void 0&&X.update(j,E,c||o)}O&&O(K,E),E.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:E}),m=null}const $=new lM;$.setAnimationLoop(x),this.setAnimationLoop=function(K){O=K},this.dispose=function(){}}}const ol=new Vo,$9=new zn;function j9(n,e){function t(y,h){y.matrixAutoUpdate===!0&&y.updateMatrix(),h.value.copy(y.matrix)}function r(y,h){h.color.getRGB(y.fogColor.value,rM(n)),h.isFog?(y.fogNear.value=h.near,y.fogFar.value=h.far):h.isFogExp2&&(y.fogDensity.value=h.density)}function i(y,h,w,M,S){h.isMeshBasicMaterial||h.isMeshLambertMaterial?s(y,h):h.isMeshToonMaterial?(s(y,h),d(y,h)):h.isMeshPhongMaterial?(s(y,h),u(y,h)):h.isMeshStandardMaterial?(s(y,h),f(y,h),h.isMeshPhysicalMaterial&&p(y,h,S)):h.isMeshMatcapMaterial?(s(y,h),m(y,h)):h.isMeshDepthMaterial?s(y,h):h.isMeshDistanceMaterial?(s(y,h),g(y,h)):h.isMeshNormalMaterial?s(y,h):h.isLineBasicMaterial?(o(y,h),h.isLineDashedMaterial&&a(y,h)):h.isPointsMaterial?l(y,h,w,M):h.isSpriteMaterial?c(y,h):h.isShadowMaterial?(y.color.value.copy(h.color),y.opacity.value=h.opacity):h.isShaderMaterial&&(h.uniformsNeedUpdate=!1)}function s(y,h){y.opacity.value=h.opacity,h.color&&y.diffuse.value.copy(h.color),h.emissive&&y.emissive.value.copy(h.emissive).multiplyScalar(h.emissiveIntensity),h.map&&(y.map.value=h.map,t(h.map,y.mapTransform)),h.alphaMap&&(y.alphaMap.value=h.alphaMap,t(h.alphaMap,y.alphaMapTransform)),h.bumpMap&&(y.bumpMap.value=h.bumpMap,t(h.bumpMap,y.bumpMapTransform),y.bumpScale.value=h.bumpScale,h.side===ei&&(y.bumpScale.value*=-1)),h.normalMap&&(y.normalMap.value=h.normalMap,t(h.normalMap,y.normalMapTransform),y.normalScale.value.copy(h.normalScale),h.side===ei&&y.normalScale.value.negate()),h.displacementMap&&(y.displacementMap.value=h.displacementMap,t(h.displacementMap,y.displacementMapTransform),y.displacementScale.value=h.displacementScale,y.displacementBias.value=h.displacementBias),h.emissiveMap&&(y.emissiveMap.value=h.emissiveMap,t(h.emissiveMap,y.emissiveMapTransform)),h.specularMap&&(y.specularMap.value=h.specularMap,t(h.specularMap,y.specularMapTransform)),h.alphaTest>0&&(y.alphaTest.value=h.alphaTest);const w=e.get(h),M=w.envMap,S=w.envMapRotation;M&&(y.envMap.value=M,ol.copy(S),ol.x*=-1,ol.y*=-1,ol.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(ol.y*=-1,ol.z*=-1),y.envMapRotation.value.setFromMatrix4($9.makeRotationFromEuler(ol)),y.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=h.reflectivity,y.ior.value=h.ior,y.refractionRatio.value=h.refractionRatio),h.lightMap&&(y.lightMap.value=h.lightMap,y.lightMapIntensity.value=h.lightMapIntensity,t(h.lightMap,y.lightMapTransform)),h.aoMap&&(y.aoMap.value=h.aoMap,y.aoMapIntensity.value=h.aoMapIntensity,t(h.aoMap,y.aoMapTransform))}function o(y,h){y.diffuse.value.copy(h.color),y.opacity.value=h.opacity,h.map&&(y.map.value=h.map,t(h.map,y.mapTransform))}function a(y,h){y.dashSize.value=h.dashSize,y.totalSize.value=h.dashSize+h.gapSize,y.scale.value=h.scale}function l(y,h,w,M){y.diffuse.value.copy(h.color),y.opacity.value=h.opacity,y.size.value=h.size*w,y.scale.value=M*.5,h.map&&(y.map.value=h.map,t(h.map,y.uvTransform)),h.alphaMap&&(y.alphaMap.value=h.alphaMap,t(h.alphaMap,y.alphaMapTransform)),h.alphaTest>0&&(y.alphaTest.value=h.alphaTest)}function c(y,h){y.diffuse.value.copy(h.color),y.opacity.value=h.opacity,y.rotation.value=h.rotation,h.map&&(y.map.value=h.map,t(h.map,y.mapTransform)),h.alphaMap&&(y.alphaMap.value=h.alphaMap,t(h.alphaMap,y.alphaMapTransform)),h.alphaTest>0&&(y.alphaTest.value=h.alphaTest)}function u(y,h){y.specular.value.copy(h.specular),y.shininess.value=Math.max(h.shininess,1e-4)}function d(y,h){h.gradientMap&&(y.gradientMap.value=h.gradientMap)}function f(y,h){y.metalness.value=h.metalness,h.metalnessMap&&(y.metalnessMap.value=h.metalnessMap,t(h.metalnessMap,y.metalnessMapTransform)),y.roughness.value=h.roughness,h.roughnessMap&&(y.roughnessMap.value=h.roughnessMap,t(h.roughnessMap,y.roughnessMapTransform)),h.envMap&&(y.envMapIntensity.value=h.envMapIntensity)}function p(y,h,w){y.ior.value=h.ior,h.sheen>0&&(y.sheenColor.value.copy(h.sheenColor).multiplyScalar(h.sheen),y.sheenRoughness.value=h.sheenRoughness,h.sheenColorMap&&(y.sheenColorMap.value=h.sheenColorMap,t(h.sheenColorMap,y.sheenColorMapTransform)),h.sheenRoughnessMap&&(y.sheenRoughnessMap.value=h.sheenRoughnessMap,t(h.sheenRoughnessMap,y.sheenRoughnessMapTransform))),h.clearcoat>0&&(y.clearcoat.value=h.clearcoat,y.clearcoatRoughness.value=h.clearcoatRoughness,h.clearcoatMap&&(y.clearcoatMap.value=h.clearcoatMap,t(h.clearcoatMap,y.clearcoatMapTransform)),h.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=h.clearcoatRoughnessMap,t(h.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),h.clearcoatNormalMap&&(y.clearcoatNormalMap.value=h.clearcoatNormalMap,t(h.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(h.clearcoatNormalScale),h.side===ei&&y.clearcoatNormalScale.value.negate())),h.dispersion>0&&(y.dispersion.value=h.dispersion),h.iridescence>0&&(y.iridescence.value=h.iridescence,y.iridescenceIOR.value=h.iridescenceIOR,y.iridescenceThicknessMinimum.value=h.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=h.iridescenceThicknessRange[1],h.iridescenceMap&&(y.iridescenceMap.value=h.iridescenceMap,t(h.iridescenceMap,y.iridescenceMapTransform)),h.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=h.iridescenceThicknessMap,t(h.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),h.transmission>0&&(y.transmission.value=h.transmission,y.transmissionSamplerMap.value=w.texture,y.transmissionSamplerSize.value.set(w.width,w.height),h.transmissionMap&&(y.transmissionMap.value=h.transmissionMap,t(h.transmissionMap,y.transmissionMapTransform)),y.thickness.value=h.thickness,h.thicknessMap&&(y.thicknessMap.value=h.thicknessMap,t(h.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=h.attenuationDistance,y.attenuationColor.value.copy(h.attenuationColor)),h.anisotropy>0&&(y.anisotropyVector.value.set(h.anisotropy*Math.cos(h.anisotropyRotation),h.anisotropy*Math.sin(h.anisotropyRotation)),h.anisotropyMap&&(y.anisotropyMap.value=h.anisotropyMap,t(h.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=h.specularIntensity,y.specularColor.value.copy(h.specularColor),h.specularColorMap&&(y.specularColorMap.value=h.specularColorMap,t(h.specularColorMap,y.specularColorMapTransform)),h.specularIntensityMap&&(y.specularIntensityMap.value=h.specularIntensityMap,t(h.specularIntensityMap,y.specularIntensityMapTransform))}function m(y,h){h.matcap&&(y.matcap.value=h.matcap)}function g(y,h){const w=e.get(h).light;y.referencePosition.value.setFromMatrixPosition(w.matrixWorld),y.nearDistance.value=w.shadow.camera.near,y.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function W9(n,e,t,r){let i={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(w,M){const S=M.program;r.uniformBlockBinding(w,S)}function c(w,M){let S=i[w.id];S===void 0&&(m(w),S=u(w),i[w.id]=S,w.addEventListener("dispose",y));const C=M.program;r.updateUBOMapping(w,C);const k=e.render.frame;s[w.id]!==k&&(f(w),s[w.id]=k)}function u(w){const M=d();w.__bindingPointIndex=M;const S=n.createBuffer(),C=w.__size,k=w.usage;return n.bindBuffer(n.UNIFORM_BUFFER,S),n.bufferData(n.UNIFORM_BUFFER,C,k),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,M,S),S}function d(){for(let w=0;w<a;w++)if(o.indexOf(w)===-1)return o.push(w),w;return 0}function f(w){const M=i[w.id],S=w.uniforms,C=w.__cache;n.bindBuffer(n.UNIFORM_BUFFER,M);for(let k=0,F=S.length;k<F;k++){const N=Array.isArray(S[k])?S[k]:[S[k]];for(let B=0,I=N.length;B<I;B++){const U=N[B];if(p(U,k,B,C)===!0){const G=U.__offset,R=Array.isArray(U.value)?U.value:[U.value];let v=0;for(let _=0;_<R.length;_++){const b=R[_],A=g(b);typeof b=="number"||typeof b=="boolean"?(U.__data[0]=b,n.bufferSubData(n.UNIFORM_BUFFER,G+v,U.__data)):b.isMatrix3?(U.__data[0]=b.elements[0],U.__data[1]=b.elements[1],U.__data[2]=b.elements[2],U.__data[3]=0,U.__data[4]=b.elements[3],U.__data[5]=b.elements[4],U.__data[6]=b.elements[5],U.__data[7]=0,U.__data[8]=b.elements[6],U.__data[9]=b.elements[7],U.__data[10]=b.elements[8],U.__data[11]=0):(b.toArray(U.__data,v),v+=A.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,G,U.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function p(w,M,S,C){const k=w.value,F=M+"_"+S;if(C[F]===void 0)return typeof k=="number"||typeof k=="boolean"?C[F]=k:C[F]=k.clone(),!0;{const N=C[F];if(typeof k=="number"||typeof k=="boolean"){if(N!==k)return C[F]=k,!0}else if(N.equals(k)===!1)return N.copy(k),!0}return!1}function m(w){const M=w.uniforms;let S=0;const C=16;for(let F=0,N=M.length;F<N;F++){const B=Array.isArray(M[F])?M[F]:[M[F]];for(let I=0,U=B.length;I<U;I++){const G=B[I],R=Array.isArray(G.value)?G.value:[G.value];for(let v=0,_=R.length;v<_;v++){const b=R[v],A=g(b),T=S%C,D=T%A.boundary,V=T+D;S+=D,V!==0&&C-V<A.storage&&(S+=C-V),G.__data=new Float32Array(A.storage/Float32Array.BYTES_PER_ELEMENT),G.__offset=S,S+=A.storage}}}const k=S%C;return k>0&&(S+=C-k),w.__size=S,w.__cache={},this}function g(w){const M={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(M.boundary=4,M.storage=4):w.isVector2?(M.boundary=8,M.storage=8):w.isVector3||w.isColor?(M.boundary=16,M.storage=12):w.isVector4?(M.boundary=16,M.storage=16):w.isMatrix3?(M.boundary=48,M.storage=48):w.isMatrix4?(M.boundary=64,M.storage=64):w.isTexture,M}function y(w){const M=w.target;M.removeEventListener("dispose",y);const S=o.indexOf(M.__bindingPointIndex);o.splice(S,1),n.deleteBuffer(i[M.id]),delete i[M.id],delete s[M.id]}function h(){for(const w in i)n.deleteBuffer(i[w]);o=[],i={},s={}}return{bind:l,update:c,dispose:h}}class q9{constructor(e={}){const{canvas:t=P6(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:f=!1}=e;this.isWebGLRenderer=!0;let p;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=r.getContextAttributes().alpha}else p=o;const m=new Uint32Array(4),g=new Int32Array(4);let y=null,h=null;const w=[],M=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Pi,this.toneMapping=Pa,this.toneMappingExposure=1;const S=this;let C=!1,k=0,F=0,N=null,B=-1,I=null;const U=new Hn,G=new Hn;let R=null;const v=new qt(0);let _=0,b=t.width,A=t.height,T=1,D=null,V=null;const O=new Hn(0,0,b,A),x=new Hn(0,0,b,A);let $=!1;const K=new oM;let E=!1,Y=!1;const j=new zn,X=new zn,ee=new oe,le=new Hn,me={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let he=!1;function je(){return N===null?T:1}let q=r;function ze(z,J){return t.getContext(z,J)}try{const z={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Mb}`),t.addEventListener("webglcontextlost",pe,!1),t.addEventListener("webglcontextrestored",Le,!1),t.addEventListener("webglcontextcreationerror",xe,!1),q===null){const J="webgl2";if(q=ze(J,z),q===null)throw ze(J)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(z){throw z}let Qe,We,Pe,Nt,Me,W,H,te,de,Z,ne,ye,Ce,Ee,nt,Ae,Re,Oe,ot,Ie,Je,pt,lt,Q;function Be(){Qe=new nG(q),Qe.init(),pt=new F9(q,Qe),We=new Yz(q,Qe,e,pt),Pe=new D9(q,Qe),We.reverseDepthBuffer&&f&&Pe.buffers.depth.setReversed(!0),Nt=new sG(q),Me=new A9,W=new O9(q,Qe,Pe,Me,We,pt,Nt),H=new Zz(S),te=new tG(S),de=new f8(q),lt=new Xz(q,de),Z=new rG(q,de,Nt,lt),ne=new aG(q,Z,de,Nt),ot=new oG(q,We,W),Ae=new Qz(Me),ye=new w9(S,H,te,Qe,We,lt,Ae),Ce=new j9(S,Me),Ee=new S9,nt=new P9(Qe),Oe=new qz(S,H,te,Pe,ne,p,l),Re=new B9(S,ne,We),Q=new W9(q,Nt,We,Pe),Ie=new Kz(q,Qe,Nt),Je=new iG(q,Qe,Nt),Nt.programs=ye.programs,S.capabilities=We,S.extensions=Qe,S.properties=Me,S.renderLists=Ee,S.shadowMap=Re,S.state=Pe,S.info=Nt}Be();const se=new V9(S,q);this.xr=se,this.getContext=function(){return q},this.getContextAttributes=function(){return q.getContextAttributes()},this.forceContextLoss=function(){const z=Qe.get("WEBGL_lose_context");z&&z.loseContext()},this.forceContextRestore=function(){const z=Qe.get("WEBGL_lose_context");z&&z.restoreContext()},this.getPixelRatio=function(){return T},this.setPixelRatio=function(z){z!==void 0&&(T=z,this.setSize(b,A,!1))},this.getSize=function(z){return z.set(b,A)},this.setSize=function(z,J,ae=!0){se.isPresenting||(b=z,A=J,t.width=Math.floor(z*T),t.height=Math.floor(J*T),ae===!0&&(t.style.width=z+"px",t.style.height=J+"px"),this.setViewport(0,0,z,J))},this.getDrawingBufferSize=function(z){return z.set(b*T,A*T).floor()},this.setDrawingBufferSize=function(z,J,ae){b=z,A=J,T=ae,t.width=Math.floor(z*ae),t.height=Math.floor(J*ae),this.setViewport(0,0,z,J)},this.getCurrentViewport=function(z){return z.copy(U)},this.getViewport=function(z){return z.copy(O)},this.setViewport=function(z,J,ae,ce){z.isVector4?O.set(z.x,z.y,z.z,z.w):O.set(z,J,ae,ce),Pe.viewport(U.copy(O).multiplyScalar(T).round())},this.getScissor=function(z){return z.copy(x)},this.setScissor=function(z,J,ae,ce){z.isVector4?x.set(z.x,z.y,z.z,z.w):x.set(z,J,ae,ce),Pe.scissor(G.copy(x).multiplyScalar(T).round())},this.getScissorTest=function(){return $},this.setScissorTest=function(z){Pe.setScissorTest($=z)},this.setOpaqueSort=function(z){D=z},this.setTransparentSort=function(z){V=z},this.getClearColor=function(z){return z.copy(Oe.getClearColor())},this.setClearColor=function(){Oe.setClearColor.apply(Oe,arguments)},this.getClearAlpha=function(){return Oe.getClearAlpha()},this.setClearAlpha=function(){Oe.setClearAlpha.apply(Oe,arguments)},this.clear=function(z=!0,J=!0,ae=!0){let ce=0;if(z){let re=!1;if(N!==null){const we=N.texture.format;re=we===kb||we===Nb||we===Pb}if(re){const we=N.texture.type,De=we===Go||we===Bl||we===cf||we===_u||we===Ib||we===Cb,Ve=Oe.getClearColor(),Ke=Oe.getClearAlpha(),ft=Ve.r,mt=Ve.g,it=Ve.b;De?(m[0]=ft,m[1]=mt,m[2]=it,m[3]=Ke,q.clearBufferuiv(q.COLOR,0,m)):(g[0]=ft,g[1]=mt,g[2]=it,g[3]=Ke,q.clearBufferiv(q.COLOR,0,g))}else ce|=q.COLOR_BUFFER_BIT}J&&(ce|=q.DEPTH_BUFFER_BIT),ae&&(ce|=q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),q.clear(ce)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",pe,!1),t.removeEventListener("webglcontextrestored",Le,!1),t.removeEventListener("webglcontextcreationerror",xe,!1),Oe.dispose(),Ee.dispose(),nt.dispose(),Me.dispose(),H.dispose(),te.dispose(),ne.dispose(),lt.dispose(),Q.dispose(),ye.dispose(),se.dispose(),se.removeEventListener("sessionstart",fn),se.removeEventListener("sessionend",vs),Kt.stop()};function pe(z){z.preventDefault(),C=!0}function Le(){C=!1;const z=Nt.autoReset,J=Re.enabled,ae=Re.autoUpdate,ce=Re.needsUpdate,re=Re.type;Be(),Nt.autoReset=z,Re.enabled=J,Re.autoUpdate=ae,Re.needsUpdate=ce,Re.type=re}function xe(z){}function Xe(z){const J=z.target;J.removeEventListener("dispose",Xe),sn(J)}function sn(z){At(z),Me.remove(z)}function At(z){const J=Me.get(z).programs;J!==void 0&&(J.forEach(function(ae){ye.releaseProgram(ae)}),z.isShaderMaterial&&ye.releaseShaderCache(z))}this.renderBufferDirect=function(z,J,ae,ce,re,we){J===null&&(J=me);const De=re.isMesh&&re.matrixWorld.determinant()<0,Ve=vn(z,J,ae,ce,re);Pe.setMaterial(ce,De);let Ke=ae.index,ft=1;if(ce.wireframe===!0){if(Ke=Z.getWireframeAttribute(ae),Ke===void 0)return;ft=2}const mt=ae.drawRange,it=ae.attributes.position;let Ft=mt.start*ft,jt=(mt.start+mt.count)*ft;we!==null&&(Ft=Math.max(Ft,we.start*ft),jt=Math.min(jt,(we.start+we.count)*ft)),Ke!==null?(Ft=Math.max(Ft,0),jt=Math.min(jt,Ke.count)):it!=null&&(Ft=Math.max(Ft,0),jt=Math.min(jt,it.count));const Rn=jt-Ft;if(Rn<0||Rn===1/0)return;lt.setup(re,ce,Ve,ae,Ke);let bn,Qt=Ie;if(Ke!==null&&(bn=de.get(Ke),Qt=Je,Qt.setIndex(bn)),re.isMesh)ce.wireframe===!0?(Pe.setLineWidth(ce.wireframeLinewidth*je()),Qt.setMode(q.LINES)):Qt.setMode(q.TRIANGLES);else if(re.isLine){let ct=ce.linewidth;ct===void 0&&(ct=1),Pe.setLineWidth(ct*je()),re.isLineSegments?Qt.setMode(q.LINES):re.isLineLoop?Qt.setMode(q.LINE_LOOP):Qt.setMode(q.LINE_STRIP)}else re.isPoints?Qt.setMode(q.POINTS):re.isSprite&&Qt.setMode(q.TRIANGLES);if(re.isBatchedMesh)if(re._multiDrawInstances!==null)Qt.renderMultiDrawInstances(re._multiDrawStarts,re._multiDrawCounts,re._multiDrawCount,re._multiDrawInstances);else if(Qe.get("WEBGL_multi_draw"))Qt.renderMultiDraw(re._multiDrawStarts,re._multiDrawCounts,re._multiDrawCount);else{const ct=re._multiDrawStarts,hr=re._multiDrawCounts,ln=re._multiDrawCount,Vi=Ke?de.get(Ke).bytesPerElement:1,sc=Me.get(ce).currentProgram.getUniforms();for(let si=0;si<ln;si++)sc.setValue(q,"_gl_DrawID",si),Qt.render(ct[si]/Vi,hr[si])}else if(re.isInstancedMesh)Qt.renderInstances(Ft,Rn,re.count);else if(ae.isInstancedBufferGeometry){const ct=ae._maxInstanceCount!==void 0?ae._maxInstanceCount:1/0,hr=Math.min(ae.instanceCount,ct);Qt.renderInstances(Ft,Rn,hr)}else Qt.render(Ft,Rn)};function st(z,J,ae){z.transparent===!0&&z.side===Mo&&z.forceSinglePass===!1?(z.side=ei,z.needsUpdate=!0,an(z,J,ae),z.side=Oa,z.needsUpdate=!0,an(z,J,ae),z.side=Mo):an(z,J,ae)}this.compile=function(z,J,ae=null){ae===null&&(ae=z),h=nt.get(ae),h.init(J),M.push(h),ae.traverseVisible(function(re){re.isLight&&re.layers.test(J.layers)&&(h.pushLight(re),re.castShadow&&h.pushShadow(re))}),z!==ae&&z.traverseVisible(function(re){re.isLight&&re.layers.test(J.layers)&&(h.pushLight(re),re.castShadow&&h.pushShadow(re))}),h.setupLights();const ce=new Set;return z.traverse(function(re){if(!(re.isMesh||re.isPoints||re.isLine||re.isSprite))return;const we=re.material;if(we)if(Array.isArray(we))for(let De=0;De<we.length;De++){const Ve=we[De];st(Ve,ae,re),ce.add(Ve)}else st(we,ae,re),ce.add(we)}),M.pop(),h=null,ce},this.compileAsync=function(z,J,ae=null){const ce=this.compile(z,J,ae);return new Promise(re=>{function we(){if(ce.forEach(function(De){Me.get(De).currentProgram.isReady()&&ce.delete(De)}),ce.size===0){re(z);return}setTimeout(we,10)}Qe.get("KHR_parallel_shader_compile")!==null?we():setTimeout(we,10)})};let Wn=null;function Vt(z){Wn&&Wn(z)}function fn(){Kt.stop()}function vs(){Kt.start()}const Kt=new lM;Kt.setAnimationLoop(Vt),typeof self<"u"&&Kt.setContext(self),this.setAnimationLoop=function(z){Wn=z,se.setAnimationLoop(z),z===null?Kt.stop():Kt.start()},se.addEventListener("sessionstart",fn),se.addEventListener("sessionend",vs),this.render=function(z,J){if(J!==void 0&&J.isCamera!==!0||C===!0)return;if(z.matrixWorldAutoUpdate===!0&&z.updateMatrixWorld(),J.parent===null&&J.matrixWorldAutoUpdate===!0&&J.updateMatrixWorld(),se.enabled===!0&&se.isPresenting===!0&&(se.cameraAutoUpdate===!0&&se.updateCamera(J),J=se.getCamera()),z.isScene===!0&&z.onBeforeRender(S,z,J,N),h=nt.get(z,M.length),h.init(J),M.push(h),X.multiplyMatrices(J.projectionMatrix,J.matrixWorldInverse),K.setFromProjectionMatrix(X),Y=this.localClippingEnabled,E=Ae.init(this.clippingPlanes,Y),y=Ee.get(z,w.length),y.init(),w.push(y),se.enabled===!0&&se.isPresenting===!0){const we=S.xr.getDepthSensingMesh();we!==null&&dn(we,J,-1/0,S.sortObjects)}dn(z,J,0,S.sortObjects),y.finish(),S.sortObjects===!0&&y.sort(D,V),he=se.enabled===!1||se.isPresenting===!1||se.hasDepthSensing()===!1,he&&Oe.addToRenderList(y,z),this.info.render.frame++,E===!0&&Ae.beginShadows();const ae=h.state.shadowsArray;Re.render(ae,z,J),E===!0&&Ae.endShadows(),this.info.autoReset===!0&&this.info.reset();const ce=y.opaque,re=y.transmissive;if(h.setupLights(),J.isArrayCamera){const we=J.cameras;if(re.length>0)for(let De=0,Ve=we.length;De<Ve;De++){const Ke=we[De];hn(ce,re,z,Ke)}he&&Oe.render(z);for(let De=0,Ve=we.length;De<Ve;De++){const Ke=we[De];ys(y,z,Ke,Ke.viewport)}}else re.length>0&&hn(ce,re,z,J),he&&Oe.render(z),ys(y,z,J);N!==null&&(W.updateMultisampleRenderTarget(N),W.updateRenderTargetMipmap(N)),z.isScene===!0&&z.onAfterRender(S,z,J),lt.resetDefaultState(),B=-1,I=null,M.pop(),M.length>0?(h=M[M.length-1],E===!0&&Ae.setGlobalState(S.clippingPlanes,h.state.camera)):h=null,w.pop(),w.length>0?y=w[w.length-1]:y=null};function dn(z,J,ae,ce){if(z.visible===!1)return;if(z.layers.test(J.layers)){if(z.isGroup)ae=z.renderOrder;else if(z.isLOD)z.autoUpdate===!0&&z.update(J);else if(z.isLight)h.pushLight(z),z.castShadow&&h.pushShadow(z);else if(z.isSprite){if(!z.frustumCulled||K.intersectsSprite(z)){ce&&le.setFromMatrixPosition(z.matrixWorld).applyMatrix4(X);const De=ne.update(z),Ve=z.material;Ve.visible&&y.push(z,De,Ve,ae,le.z,null)}}else if((z.isMesh||z.isLine||z.isPoints)&&(!z.frustumCulled||K.intersectsObject(z))){const De=ne.update(z),Ve=z.material;if(ce&&(z.boundingSphere!==void 0?(z.boundingSphere===null&&z.computeBoundingSphere(),le.copy(z.boundingSphere.center)):(De.boundingSphere===null&&De.computeBoundingSphere(),le.copy(De.boundingSphere.center)),le.applyMatrix4(z.matrixWorld).applyMatrix4(X)),Array.isArray(Ve)){const Ke=De.groups;for(let ft=0,mt=Ke.length;ft<mt;ft++){const it=Ke[ft],Ft=Ve[it.materialIndex];Ft&&Ft.visible&&y.push(z,De,Ft,ae,le.z,it)}}else Ve.visible&&y.push(z,De,Ve,ae,le.z,null)}}const we=z.children;for(let De=0,Ve=we.length;De<Ve;De++)dn(we[De],J,ae,ce)}function ys(z,J,ae,ce){const re=z.opaque,we=z.transmissive,De=z.transparent;h.setupLightsView(ae),E===!0&&Ae.setGlobalState(S.clippingPlanes,ae),ce&&Pe.viewport(U.copy(ce)),re.length>0&&on(re,J,ae),we.length>0&&on(we,J,ae),De.length>0&&on(De,J,ae),Pe.buffers.depth.setTest(!0),Pe.buffers.depth.setMask(!0),Pe.buffers.color.setMask(!0),Pe.setPolygonOffset(!1)}function hn(z,J,ae,ce){if((ae.isScene===!0?ae.overrideMaterial:null)!==null)return;h.state.transmissionRenderTarget[ce.id]===void 0&&(h.state.transmissionRenderTarget[ce.id]=new Ll(1,1,{generateMipmaps:!0,type:Qe.has("EXT_color_buffer_half_float")||Qe.has("EXT_color_buffer_float")?Kf:Go,minFilter:yl,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Jt.workingColorSpace}));const we=h.state.transmissionRenderTarget[ce.id],De=ce.viewport||U;we.setSize(De.z,De.w);const Ve=S.getRenderTarget();S.setRenderTarget(we),S.getClearColor(v),_=S.getClearAlpha(),_<1&&S.setClearColor(16777215,.5),S.clear(),he&&Oe.render(ae);const Ke=S.toneMapping;S.toneMapping=Pa;const ft=ce.viewport;if(ce.viewport!==void 0&&(ce.viewport=void 0),h.setupLightsView(ce),E===!0&&Ae.setGlobalState(S.clippingPlanes,ce),on(z,ae,ce),W.updateMultisampleRenderTarget(we),W.updateRenderTargetMipmap(we),Qe.has("WEBGL_multisampled_render_to_texture")===!1){let mt=!1;for(let it=0,Ft=J.length;it<Ft;it++){const jt=J[it],Rn=jt.object,bn=jt.geometry,Qt=jt.material,ct=jt.group;if(Qt.side===Mo&&Rn.layers.test(ce.layers)){const hr=Qt.side;Qt.side=ei,Qt.needsUpdate=!0,_s(Rn,ae,ce,bn,Qt,ct),Qt.side=hr,Qt.needsUpdate=!0,mt=!0}}mt===!0&&(W.updateMultisampleRenderTarget(we),W.updateRenderTargetMipmap(we))}S.setRenderTarget(Ve),S.setClearColor(v,_),ft!==void 0&&(ce.viewport=ft),S.toneMapping=Ke}function on(z,J,ae){const ce=J.isScene===!0?J.overrideMaterial:null;for(let re=0,we=z.length;re<we;re++){const De=z[re],Ve=De.object,Ke=De.geometry,ft=ce===null?De.material:ce,mt=De.group;Ve.layers.test(ae.layers)&&_s(Ve,J,ae,Ke,ft,mt)}}function _s(z,J,ae,ce,re,we){z.onBeforeRender(S,J,ae,ce,re,we),z.modelViewMatrix.multiplyMatrices(ae.matrixWorldInverse,z.matrixWorld),z.normalMatrix.getNormalMatrix(z.modelViewMatrix),re.onBeforeRender(S,J,ae,ce,z,we),re.transparent===!0&&re.side===Mo&&re.forceSinglePass===!1?(re.side=ei,re.needsUpdate=!0,S.renderBufferDirect(ae,J,ce,re,z,we),re.side=Oa,re.needsUpdate=!0,S.renderBufferDirect(ae,J,ce,re,z,we),re.side=Mo):S.renderBufferDirect(ae,J,ce,re,z,we),z.onAfterRender(S,J,ae,ce,re,we)}function an(z,J,ae){J.isScene!==!0&&(J=me);const ce=Me.get(z),re=h.state.lights,we=h.state.shadowsArray,De=re.state.version,Ve=ye.getParameters(z,re.state,we,J,ae),Ke=ye.getProgramCacheKey(Ve);let ft=ce.programs;ce.environment=z.isMeshStandardMaterial?J.environment:null,ce.fog=J.fog,ce.envMap=(z.isMeshStandardMaterial?te:H).get(z.envMap||ce.environment),ce.envMapRotation=ce.environment!==null&&z.envMap===null?J.environmentRotation:z.envMapRotation,ft===void 0&&(z.addEventListener("dispose",Xe),ft=new Map,ce.programs=ft);let mt=ft.get(Ke);if(mt!==void 0){if(ce.currentProgram===mt&&ce.lightsStateVersion===De)return bs(z,Ve),mt}else Ve.uniforms=ye.getUniforms(z),z.onBeforeCompile(Ve,S),mt=ye.acquireProgram(Ve,Ke),ft.set(Ke,mt),ce.uniforms=Ve.uniforms;const it=ce.uniforms;return(!z.isShaderMaterial&&!z.isRawShaderMaterial||z.clipping===!0)&&(it.clippingPlanes=Ae.uniform),bs(z,Ve),ce.needsLights=xs(z),ce.lightsStateVersion=De,ce.needsLights&&(it.ambientLightColor.value=re.state.ambient,it.lightProbe.value=re.state.probe,it.directionalLights.value=re.state.directional,it.directionalLightShadows.value=re.state.directionalShadow,it.spotLights.value=re.state.spot,it.spotLightShadows.value=re.state.spotShadow,it.rectAreaLights.value=re.state.rectArea,it.ltc_1.value=re.state.rectAreaLTC1,it.ltc_2.value=re.state.rectAreaLTC2,it.pointLights.value=re.state.point,it.pointLightShadows.value=re.state.pointShadow,it.hemisphereLights.value=re.state.hemi,it.directionalShadowMap.value=re.state.directionalShadowMap,it.directionalShadowMatrix.value=re.state.directionalShadowMatrix,it.spotShadowMap.value=re.state.spotShadowMap,it.spotLightMatrix.value=re.state.spotLightMatrix,it.spotLightMap.value=re.state.spotLightMap,it.pointShadowMap.value=re.state.pointShadowMap,it.pointShadowMatrix.value=re.state.pointShadowMatrix),ce.currentProgram=mt,ce.uniformsList=null,mt}function pn(z){if(z.uniformsList===null){const J=z.currentProgram.getUniforms();z.uniformsList=vp.seqWithValue(J.seq,z.uniforms)}return z.uniformsList}function bs(z,J){const ae=Me.get(z);ae.outputColorSpace=J.outputColorSpace,ae.batching=J.batching,ae.batchingColor=J.batchingColor,ae.instancing=J.instancing,ae.instancingColor=J.instancingColor,ae.instancingMorph=J.instancingMorph,ae.skinning=J.skinning,ae.morphTargets=J.morphTargets,ae.morphNormals=J.morphNormals,ae.morphColors=J.morphColors,ae.morphTargetsCount=J.morphTargetsCount,ae.numClippingPlanes=J.numClippingPlanes,ae.numIntersection=J.numClipIntersection,ae.vertexAlphas=J.vertexAlphas,ae.vertexTangents=J.vertexTangents,ae.toneMapping=J.toneMapping}function vn(z,J,ae,ce,re){J.isScene!==!0&&(J=me),W.resetTextureUnits();const we=J.fog,De=ce.isMeshStandardMaterial?J.environment:null,Ve=N===null?S.outputColorSpace:N.isXRRenderTarget===!0?N.texture.colorSpace:xu,Ke=(ce.isMeshStandardMaterial?te:H).get(ce.envMap||De),ft=ce.vertexColors===!0&&!!ae.attributes.color&&ae.attributes.color.itemSize===4,mt=!!ae.attributes.tangent&&(!!ce.normalMap||ce.anisotropy>0),it=!!ae.morphAttributes.position,Ft=!!ae.morphAttributes.normal,jt=!!ae.morphAttributes.color;let Rn=Pa;ce.toneMapped&&(N===null||N.isXRRenderTarget===!0)&&(Rn=S.toneMapping);const bn=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,Qt=bn!==void 0?bn.length:0,ct=Me.get(ce),hr=h.state.lights;if(E===!0&&(Y===!0||z!==I)){const Ir=z===I&&ce.id===B;Ae.setState(ce,z,Ir)}let ln=!1;ce.version===ct.__version?(ct.needsLights&&ct.lightsStateVersion!==hr.state.version||ct.outputColorSpace!==Ve||re.isBatchedMesh&&ct.batching===!1||!re.isBatchedMesh&&ct.batching===!0||re.isBatchedMesh&&ct.batchingColor===!0&&re.colorTexture===null||re.isBatchedMesh&&ct.batchingColor===!1&&re.colorTexture!==null||re.isInstancedMesh&&ct.instancing===!1||!re.isInstancedMesh&&ct.instancing===!0||re.isSkinnedMesh&&ct.skinning===!1||!re.isSkinnedMesh&&ct.skinning===!0||re.isInstancedMesh&&ct.instancingColor===!0&&re.instanceColor===null||re.isInstancedMesh&&ct.instancingColor===!1&&re.instanceColor!==null||re.isInstancedMesh&&ct.instancingMorph===!0&&re.morphTexture===null||re.isInstancedMesh&&ct.instancingMorph===!1&&re.morphTexture!==null||ct.envMap!==Ke||ce.fog===!0&&ct.fog!==we||ct.numClippingPlanes!==void 0&&(ct.numClippingPlanes!==Ae.numPlanes||ct.numIntersection!==Ae.numIntersection)||ct.vertexAlphas!==ft||ct.vertexTangents!==mt||ct.morphTargets!==it||ct.morphNormals!==Ft||ct.morphColors!==jt||ct.toneMapping!==Rn||ct.morphTargetsCount!==Qt)&&(ln=!0):(ln=!0,ct.__version=ce.version);let Vi=ct.currentProgram;ln===!0&&(Vi=an(ce,J,re));let sc=!1,si=!1,gd=!1;const In=Vi.getUniforms(),Ai=ct.uniforms;if(Pe.useProgram(Vi.program)&&(sc=!0,si=!0,gd=!0),ce.id!==B&&(B=ce.id,si=!0),sc||I!==z){Pe.buffers.depth.getReversed()?(j.copy(z.projectionMatrix),k6(j),B6(j),In.setValue(q,"projectionMatrix",j)):In.setValue(q,"projectionMatrix",z.projectionMatrix),In.setValue(q,"viewMatrix",z.matrixWorldInverse);const Gr=In.map.cameraPosition;Gr!==void 0&&Gr.setValue(q,ee.setFromMatrixPosition(z.matrixWorld)),We.logarithmicDepthBuffer&&In.setValue(q,"logDepthBufFC",2/(Math.log(z.far+1)/Math.LN2)),(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial)&&In.setValue(q,"isOrthographic",z.isOrthographicCamera===!0),I!==z&&(I=z,si=!0,gd=!0)}if(re.isSkinnedMesh){In.setOptional(q,re,"bindMatrix"),In.setOptional(q,re,"bindMatrixInverse");const Ir=re.skeleton;Ir&&(Ir.boneTexture===null&&Ir.computeBoneTexture(),In.setValue(q,"boneTexture",Ir.boneTexture,W))}re.isBatchedMesh&&(In.setOptional(q,re,"batchingTexture"),In.setValue(q,"batchingTexture",re._matricesTexture,W),In.setOptional(q,re,"batchingIdTexture"),In.setValue(q,"batchingIdTexture",re._indirectTexture,W),In.setOptional(q,re,"batchingColorTexture"),re._colorsTexture!==null&&In.setValue(q,"batchingColorTexture",re._colorsTexture,W));const Ei=ae.morphAttributes;if((Ei.position!==void 0||Ei.normal!==void 0||Ei.color!==void 0)&&ot.update(re,ae,Vi),(si||ct.receiveShadow!==re.receiveShadow)&&(ct.receiveShadow=re.receiveShadow,In.setValue(q,"receiveShadow",re.receiveShadow)),ce.isMeshGouraudMaterial&&ce.envMap!==null&&(Ai.envMap.value=Ke,Ai.flipEnvMap.value=Ke.isCubeTexture&&Ke.isRenderTargetTexture===!1?-1:1),ce.isMeshStandardMaterial&&ce.envMap===null&&J.environment!==null&&(Ai.envMapIntensity.value=J.environmentIntensity),si&&(In.setValue(q,"toneMappingExposure",S.toneMappingExposure),ct.needsLights&&yn(Ai,gd),we&&ce.fog===!0&&Ce.refreshFogUniforms(Ai,we),Ce.refreshMaterialUniforms(Ai,ce,T,A,h.state.transmissionRenderTarget[z.id]),vp.upload(q,pn(ct),Ai,W)),ce.isShaderMaterial&&ce.uniformsNeedUpdate===!0&&(vp.upload(q,pn(ct),Ai,W),ce.uniformsNeedUpdate=!1),ce.isSpriteMaterial&&In.setValue(q,"center",re.center),In.setValue(q,"modelViewMatrix",re.modelViewMatrix),In.setValue(q,"normalMatrix",re.normalMatrix),In.setValue(q,"modelMatrix",re.matrixWorld),ce.isShaderMaterial||ce.isRawShaderMaterial){const Ir=ce.uniformsGroups;for(let Gr=0,pg=Ir.length;Gr<pg;Gr++){const el=Ir[Gr];Q.update(el,Vi),Q.bind(el,Vi)}}return Vi}function yn(z,J){z.ambientLightColor.needsUpdate=J,z.lightProbe.needsUpdate=J,z.directionalLights.needsUpdate=J,z.directionalLightShadows.needsUpdate=J,z.pointLights.needsUpdate=J,z.pointLightShadows.needsUpdate=J,z.spotLights.needsUpdate=J,z.spotLightShadows.needsUpdate=J,z.rectAreaLights.needsUpdate=J,z.hemisphereLights.needsUpdate=J}function xs(z){return z.isMeshLambertMaterial||z.isMeshToonMaterial||z.isMeshPhongMaterial||z.isMeshStandardMaterial||z.isShadowMaterial||z.isShaderMaterial&&z.lights===!0}this.getActiveCubeFace=function(){return k},this.getActiveMipmapLevel=function(){return F},this.getRenderTarget=function(){return N},this.setRenderTargetTextures=function(z,J,ae){Me.get(z.texture).__webglTexture=J,Me.get(z.depthTexture).__webglTexture=ae;const ce=Me.get(z);ce.__hasExternalTextures=!0,ce.__autoAllocateDepthBuffer=ae===void 0,ce.__autoAllocateDepthBuffer||Qe.has("WEBGL_multisampled_render_to_texture")===!0&&(ce.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(z,J){const ae=Me.get(z);ae.__webglFramebuffer=J,ae.__useDefaultFramebuffer=J===void 0},this.setRenderTarget=function(z,J=0,ae=0){N=z,k=J,F=ae;let ce=!0,re=null,we=!1,De=!1;if(z){const Ke=Me.get(z);if(Ke.__useDefaultFramebuffer!==void 0)Pe.bindFramebuffer(q.FRAMEBUFFER,null),ce=!1;else if(Ke.__webglFramebuffer===void 0)W.setupRenderTarget(z);else if(Ke.__hasExternalTextures)W.rebindTextures(z,Me.get(z.texture).__webglTexture,Me.get(z.depthTexture).__webglTexture);else if(z.depthBuffer){const it=z.depthTexture;if(Ke.__boundDepthTexture!==it){if(it!==null&&Me.has(it)&&(z.width!==it.image.width||z.height!==it.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");W.setupDepthRenderbuffer(z)}}const ft=z.texture;(ft.isData3DTexture||ft.isDataArrayTexture||ft.isCompressedArrayTexture)&&(De=!0);const mt=Me.get(z).__webglFramebuffer;z.isWebGLCubeRenderTarget?(Array.isArray(mt[J])?re=mt[J][ae]:re=mt[J],we=!0):z.samples>0&&W.useMultisampledRTT(z)===!1?re=Me.get(z).__webglMultisampledFramebuffer:Array.isArray(mt)?re=mt[ae]:re=mt,U.copy(z.viewport),G.copy(z.scissor),R=z.scissorTest}else U.copy(O).multiplyScalar(T).floor(),G.copy(x).multiplyScalar(T).floor(),R=$;if(Pe.bindFramebuffer(q.FRAMEBUFFER,re)&&ce&&Pe.drawBuffers(z,re),Pe.viewport(U),Pe.scissor(G),Pe.setScissorTest(R),we){const Ke=Me.get(z.texture);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_CUBE_MAP_POSITIVE_X+J,Ke.__webglTexture,ae)}else if(De){const Ke=Me.get(z.texture),ft=J||0;q.framebufferTextureLayer(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,Ke.__webglTexture,ae||0,ft)}B=-1},this.readRenderTargetPixels=function(z,J,ae,ce,re,we,De){if(!(z&&z.isWebGLRenderTarget))return;let Ve=Me.get(z).__webglFramebuffer;if(z.isWebGLCubeRenderTarget&&De!==void 0&&(Ve=Ve[De]),Ve){Pe.bindFramebuffer(q.FRAMEBUFFER,Ve);try{const Ke=z.texture,ft=Ke.format,mt=Ke.type;if(!We.textureFormatReadable(ft)||!We.textureTypeReadable(mt))return;J>=0&&J<=z.width-ce&&ae>=0&&ae<=z.height-re&&q.readPixels(J,ae,ce,re,pt.convert(ft),pt.convert(mt),we)}finally{const Ke=N!==null?Me.get(N).__webglFramebuffer:null;Pe.bindFramebuffer(q.FRAMEBUFFER,Ke)}}},this.readRenderTargetPixelsAsync=async function(z,J,ae,ce,re,we,De){if(!(z&&z.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ve=Me.get(z).__webglFramebuffer;if(z.isWebGLCubeRenderTarget&&De!==void 0&&(Ve=Ve[De]),Ve){const Ke=z.texture,ft=Ke.format,mt=Ke.type;if(!We.textureFormatReadable(ft))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!We.textureTypeReadable(mt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(J>=0&&J<=z.width-ce&&ae>=0&&ae<=z.height-re){Pe.bindFramebuffer(q.FRAMEBUFFER,Ve);const it=q.createBuffer();q.bindBuffer(q.PIXEL_PACK_BUFFER,it),q.bufferData(q.PIXEL_PACK_BUFFER,we.byteLength,q.STREAM_READ),q.readPixels(J,ae,ce,re,pt.convert(ft),pt.convert(mt),0);const Ft=N!==null?Me.get(N).__webglFramebuffer:null;Pe.bindFramebuffer(q.FRAMEBUFFER,Ft);const jt=q.fenceSync(q.SYNC_GPU_COMMANDS_COMPLETE,0);return q.flush(),await N6(q,jt,4),q.bindBuffer(q.PIXEL_PACK_BUFFER,it),q.getBufferSubData(q.PIXEL_PACK_BUFFER,0,we),q.deleteBuffer(it),q.deleteSync(jt),we}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(z,J=null,ae=0){z.isTexture!==!0&&(Bc("WebGLRenderer: copyFramebufferToTexture function signature has changed."),J=arguments[0]||null,z=arguments[1]);const ce=Math.pow(2,-ae),re=Math.floor(z.image.width*ce),we=Math.floor(z.image.height*ce),De=J!==null?J.x:0,Ve=J!==null?J.y:0;W.setTexture2D(z,0),q.copyTexSubImage2D(q.TEXTURE_2D,ae,0,0,De,Ve,re,we),Pe.unbindTexture()};const ws=q.createFramebuffer(),As=q.createFramebuffer();this.copyTextureToTexture=function(z,J,ae=null,ce=null,re=0,we=null){z.isTexture!==!0&&(Bc("WebGLRenderer: copyTextureToTexture function signature has changed."),ce=arguments[0]||null,z=arguments[1],J=arguments[2],we=arguments[3]||0,ae=null),we===null&&(re!==0?(Bc("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),we=re,re=0):we=0);let De,Ve,Ke,ft,mt,it,Ft,jt,Rn;const bn=z.isCompressedTexture?z.mipmaps[we]:z.image;if(ae!==null)De=ae.max.x-ae.min.x,Ve=ae.max.y-ae.min.y,Ke=ae.isBox3?ae.max.z-ae.min.z:1,ft=ae.min.x,mt=ae.min.y,it=ae.isBox3?ae.min.z:0;else{const Ei=Math.pow(2,-re);De=Math.floor(bn.width*Ei),Ve=Math.floor(bn.height*Ei),z.isDataArrayTexture?Ke=bn.depth:z.isData3DTexture?Ke=Math.floor(bn.depth*Ei):Ke=1,ft=0,mt=0,it=0}ce!==null?(Ft=ce.x,jt=ce.y,Rn=ce.z):(Ft=0,jt=0,Rn=0);const Qt=pt.convert(J.format),ct=pt.convert(J.type);let hr;J.isData3DTexture?(W.setTexture3D(J,0),hr=q.TEXTURE_3D):J.isDataArrayTexture||J.isCompressedArrayTexture?(W.setTexture2DArray(J,0),hr=q.TEXTURE_2D_ARRAY):(W.setTexture2D(J,0),hr=q.TEXTURE_2D),q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,J.flipY),q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),q.pixelStorei(q.UNPACK_ALIGNMENT,J.unpackAlignment);const ln=q.getParameter(q.UNPACK_ROW_LENGTH),Vi=q.getParameter(q.UNPACK_IMAGE_HEIGHT),sc=q.getParameter(q.UNPACK_SKIP_PIXELS),si=q.getParameter(q.UNPACK_SKIP_ROWS),gd=q.getParameter(q.UNPACK_SKIP_IMAGES);q.pixelStorei(q.UNPACK_ROW_LENGTH,bn.width),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,bn.height),q.pixelStorei(q.UNPACK_SKIP_PIXELS,ft),q.pixelStorei(q.UNPACK_SKIP_ROWS,mt),q.pixelStorei(q.UNPACK_SKIP_IMAGES,it);const In=z.isDataArrayTexture||z.isData3DTexture,Ai=J.isDataArrayTexture||J.isData3DTexture;if(z.isDepthTexture){const Ei=Me.get(z),Ir=Me.get(J),Gr=Me.get(Ei.__renderTarget),pg=Me.get(Ir.__renderTarget);Pe.bindFramebuffer(q.READ_FRAMEBUFFER,Gr.__webglFramebuffer),Pe.bindFramebuffer(q.DRAW_FRAMEBUFFER,pg.__webglFramebuffer);for(let el=0;el<Ke;el++)In&&(q.framebufferTextureLayer(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Me.get(z).__webglTexture,re,it+el),q.framebufferTextureLayer(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Me.get(J).__webglTexture,we,Rn+el)),q.blitFramebuffer(ft,mt,De,Ve,Ft,jt,De,Ve,q.DEPTH_BUFFER_BIT,q.NEAREST);Pe.bindFramebuffer(q.READ_FRAMEBUFFER,null),Pe.bindFramebuffer(q.DRAW_FRAMEBUFFER,null)}else if(re!==0||z.isRenderTargetTexture||Me.has(z)){const Ei=Me.get(z),Ir=Me.get(J);Pe.bindFramebuffer(q.READ_FRAMEBUFFER,ws),Pe.bindFramebuffer(q.DRAW_FRAMEBUFFER,As);for(let Gr=0;Gr<Ke;Gr++)In?q.framebufferTextureLayer(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Ei.__webglTexture,re,it+Gr):q.framebufferTexture2D(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,Ei.__webglTexture,re),Ai?q.framebufferTextureLayer(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Ir.__webglTexture,we,Rn+Gr):q.framebufferTexture2D(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,Ir.__webglTexture,we),re!==0?q.blitFramebuffer(ft,mt,De,Ve,Ft,jt,De,Ve,q.COLOR_BUFFER_BIT,q.NEAREST):Ai?q.copyTexSubImage3D(hr,we,Ft,jt,Rn+Gr,ft,mt,De,Ve):q.copyTexSubImage2D(hr,we,Ft,jt,ft,mt,De,Ve);Pe.bindFramebuffer(q.READ_FRAMEBUFFER,null),Pe.bindFramebuffer(q.DRAW_FRAMEBUFFER,null)}else Ai?z.isDataTexture||z.isData3DTexture?q.texSubImage3D(hr,we,Ft,jt,Rn,De,Ve,Ke,Qt,ct,bn.data):J.isCompressedArrayTexture?q.compressedTexSubImage3D(hr,we,Ft,jt,Rn,De,Ve,Ke,Qt,bn.data):q.texSubImage3D(hr,we,Ft,jt,Rn,De,Ve,Ke,Qt,ct,bn):z.isDataTexture?q.texSubImage2D(q.TEXTURE_2D,we,Ft,jt,De,Ve,Qt,ct,bn.data):z.isCompressedTexture?q.compressedTexSubImage2D(q.TEXTURE_2D,we,Ft,jt,bn.width,bn.height,Qt,bn.data):q.texSubImage2D(q.TEXTURE_2D,we,Ft,jt,De,Ve,Qt,ct,bn);q.pixelStorei(q.UNPACK_ROW_LENGTH,ln),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,Vi),q.pixelStorei(q.UNPACK_SKIP_PIXELS,sc),q.pixelStorei(q.UNPACK_SKIP_ROWS,si),q.pixelStorei(q.UNPACK_SKIP_IMAGES,gd),we===0&&J.generateMipmaps&&q.generateMipmap(hr),Pe.unbindTexture()},this.copyTextureToTexture3D=function(z,J,ae=null,ce=null,re=0){return z.isTexture!==!0&&(Bc("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ae=arguments[0]||null,ce=arguments[1]||null,z=arguments[2],J=arguments[3],re=arguments[4]||0),Bc('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(z,J,ae,ce,re)},this.initRenderTarget=function(z){Me.get(z).__webglFramebuffer===void 0&&W.setupRenderTarget(z)},this.initTexture=function(z){z.isCubeTexture?W.setTextureCube(z,0):z.isData3DTexture?W.setTexture3D(z,0):z.isDataArrayTexture||z.isCompressedArrayTexture?W.setTexture2DArray(z,0):W.setTexture2D(z,0),Pe.unbindTexture()},this.resetState=function(){k=0,F=0,N=null,Pe.reset(),lt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ko}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Jt._getDrawingBufferColorSpace(e),t.unpackColorSpace=Jt._getUnpackColorSpace()}}const S1={type:"change"},Ub={type:"start"},hM={type:"end"},Yh=new Lb,T1=new ba,X9=Math.cos(70*C6.DEG2RAD),qn=new oe,Vr=2*Math.PI,gn={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},Zg=1e-6;class K9 extends u8{constructor(e,t=null){super(e,t),this.state=gn.NONE,this.enabled=!0,this.target=new oe,this.cursor=new oe,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Kc.ROTATE,MIDDLE:Kc.DOLLY,RIGHT:Kc.PAN},this.touches={ONE:Hc.ROTATE,TWO:Hc.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new oe,this._lastQuaternion=new Dl,this._lastTargetPosition=new oe,this._quat=new Dl().setFromUnitVectors(e.up,new oe(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new JA,this._sphericalDelta=new JA,this._scale=1,this._panOffset=new oe,this._rotateStart=new Lt,this._rotateEnd=new Lt,this._rotateDelta=new Lt,this._panStart=new Lt,this._panEnd=new Lt,this._panDelta=new Lt,this._dollyStart=new Lt,this._dollyEnd=new Lt,this._dollyDelta=new Lt,this._dollyDirection=new oe,this._mouse=new Lt,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=Q9.bind(this),this._onPointerDown=Y9.bind(this),this._onPointerUp=Z9.bind(this),this._onContextMenu=s7.bind(this),this._onMouseWheel=t7.bind(this),this._onKeyDown=n7.bind(this),this._onTouchStart=r7.bind(this),this._onTouchMove=i7.bind(this),this._onMouseDown=J9.bind(this),this._onMouseMove=e7.bind(this),this._interceptControlDown=o7.bind(this),this._interceptControlUp=a7.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(S1),this.update(),this.state=gn.NONE}update(e=null){const t=this.object.position;qn.copy(t).sub(this.target),qn.applyQuaternion(this._quat),this._spherical.setFromVector3(qn),this.autoRotate&&this.state===gn.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let r=this.minAzimuthAngle,i=this.maxAzimuthAngle;isFinite(r)&&isFinite(i)&&(r<-Math.PI?r+=Vr:r>Math.PI&&(r-=Vr),i<-Math.PI?i+=Vr:i>Math.PI&&(i-=Vr),r<=i?this._spherical.theta=Math.max(r,Math.min(i,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(r+i)/2?Math.max(r,this._spherical.theta):Math.min(i,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const o=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=o!=this._spherical.radius}if(qn.setFromSpherical(this._spherical),qn.applyQuaternion(this._quatInverse),t.copy(this.target).add(qn),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let o=null;if(this.object.isPerspectiveCamera){const a=qn.length();o=this._clampDistance(a*this._scale);const l=a-o;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),s=!!l}else if(this.object.isOrthographicCamera){const a=new oe(this._mouse.x,this._mouse.y,0);a.unproject(this.object);const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=l!==this.object.zoom;const c=new oe(this._mouse.x,this._mouse.y,0);c.unproject(this.object),this.object.position.sub(c).add(a),this.object.updateMatrixWorld(),o=qn.length()}else this.zoomToCursor=!1;o!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(o).add(this.object.position):(Yh.origin.copy(this.object.position),Yh.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Yh.direction))<X9?this.object.lookAt(this.target):(T1.setFromNormalAndCoplanarPoint(this.object.up,this.target),Yh.intersectPlane(T1,this.target))))}else if(this.object.isOrthographicCamera){const o=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),o!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)>Zg||8*(1-this._lastQuaternion.dot(this.object.quaternion))>Zg||this._lastTargetPosition.distanceToSquared(this.target)>Zg?(this.dispatchEvent(S1),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Vr/60*this.autoRotateSpeed*e:Vr/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){qn.setFromMatrixColumn(t,0),qn.multiplyScalar(-e),this._panOffset.add(qn)}_panUp(e,t){this.screenSpacePanning===!0?qn.setFromMatrixColumn(t,1):(qn.setFromMatrixColumn(t,0),qn.crossVectors(this.object.up,qn)),qn.multiplyScalar(e),this._panOffset.add(qn)}_pan(e,t){const r=this.domElement;if(this.object.isPerspectiveCamera){const i=this.object.position;qn.copy(i).sub(this.target);let s=qn.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/r.clientHeight,this.object.matrix),this._panUp(2*t*s/r.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrix)):this.enablePan=!1}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:this.enableZoom=!1}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:this.enableZoom=!1}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const r=this.domElement.getBoundingClientRect(),i=e-r.left,s=t-r.top,o=r.width,a=r.height;this._mouse.x=i/o*2-1,this._mouse.y=-(s/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Vr*this._rotateDelta.x/t.clientHeight),this._rotateUp(Vr*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(Vr*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-Vr*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(Vr*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-Vr*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._rotateStart.set(r,i)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._panStart.set(r,i)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),r=e.pageX-t.x,i=e.pageY-t.y,s=Math.sqrt(r*r+i*i);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),i=.5*(e.pageX+r.x),s=.5*(e.pageY+r.y);this._rotateEnd.set(i,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Vr*this._rotateDelta.x/t.clientHeight),this._rotateUp(Vr*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._panEnd.set(r,i)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),r=e.pageX-t.x,i=e.pageY-t.y,s=Math.sqrt(r*r+i*i);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const o=(e.pageX+t.x)*.5,a=(e.pageY+t.y)*.5;this._updateZoomParameters(o,a)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new Lt,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,r={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:r.deltaY*=16;break;case 2:r.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(r.deltaY*=10),r}}function Y9(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function Q9(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function Z9(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(hM),this.state=gn.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function J9(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Kc.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=gn.DOLLY;break;case Kc.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=gn.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=gn.ROTATE}break;case Kc.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=gn.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=gn.PAN}break;default:this.state=gn.NONE}this.state!==gn.NONE&&this.dispatchEvent(Ub)}function e7(n){switch(this.state){case gn.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case gn.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case gn.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function t7(n){this.enabled===!1||this.enableZoom===!1||this.state!==gn.NONE||(n.preventDefault(),this.dispatchEvent(Ub),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(hM))}function n7(n){this.enabled!==!1&&this._handleKeyDown(n)}function r7(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case Hc.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=gn.TOUCH_ROTATE;break;case Hc.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=gn.TOUCH_PAN;break;default:this.state=gn.NONE}break;case 2:switch(this.touches.TWO){case Hc.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=gn.TOUCH_DOLLY_PAN;break;case Hc.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=gn.TOUCH_DOLLY_ROTATE;break;default:this.state=gn.NONE}break;default:this.state=gn.NONE}this.state!==gn.NONE&&this.dispatchEvent(Ub)}function i7(n){switch(this._trackPointer(n),this.state){case gn.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case gn.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case gn.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case gn.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=gn.NONE}}function s7(n){this.enabled!==!1&&n.preventDefault()}function o7(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function a7(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const pM=tt({__name:"GridSphere",setup(n){const e=fe(null);let t=()=>{};return Op(()=>{t()}),En(async()=>{if(await Tn(),!e.value)return;const r=e.value.clientWidth,i=e.value.clientHeight,s=new r8,o=new Ni(40,r/i,.5,1e3);o.position.set(0,3,5);const a=new q9({alpha:!0,antialias:!0});a.setPixelRatio(window.devicePixelRatio),a.setSize(r,i),e.value.appendChild(a.domElement);const l=new Ob(2,30,30),c=new Db({color:"#141414",wireframe:!0}),u=new Hs(l,c);s.add(u);const d=[new qt("#A73FF6"),new qt("#8489F7"),new qt("#73AEF8"),new qt("#61D3F8"),new qt("#a259ff")],f=20,p=2,m=new Float32Array(f*3),g=new Float32Array(f*3),y=new Float32Array(f),h=new Float32Array(f),w=new Float32Array(f);for(let K=0;K<f;K++){const E=Math.acos(2*Math.random()-1),Y=2*Math.PI*Math.random();y[K]=E,h[K]=Y,w[K]=Math.random()*Math.PI*2;const j=p*Math.sin(E)*Math.cos(Y),X=p*Math.sin(E)*Math.sin(Y),ee=p*Math.cos(E);m.set([j,X,ee],K*3);const le=d[Math.floor(Math.random()*d.length)];g.set([le.r,le.g,le.b],K*3)}const M=new us;M.setAttribute("position",new Kr(m,3)),M.setAttribute("color",new Kr(g,3));const S=200,C=2.25,k=new Float32Array(S*3),F=new Float32Array(S*3),N=new Float32Array(S*3),B=new Float32Array(S),I=new Float32Array(S),U=new Float32Array(S),G=new Uint16Array(S),R=200;for(let K=0;K<S;K++){const E=Math.acos(2*Math.random()-1),Y=2*Math.PI*Math.random();B[K]=E,I[K]=Y,U[K]=Math.random()*Math.PI*2,G[K]=Math.floor(Math.random()*R);const j=C*Math.sin(E)*Math.cos(Y),X=C*Math.sin(E)*Math.sin(Y),ee=C*Math.cos(E);k.set([j,X,ee],K*3),F.set([j,X,ee],K*3),N.set([1,1,1],K*3)}const v=new us;v.setAttribute("position",new Kr(k,3)),v.setAttribute("color",new Kr(N,3));function _(K=32){const E=document.createElement("canvas");E.width=E.height=K;const Y=E.getContext("2d");Y.clearRect(0,0,K,K),Y.beginPath(),Y.arc(K/2,K/2,K/2,0,Math.PI*2),Y.closePath(),Y.fillStyle="#434242",Y.globalAlpha=1,Y.fill();const j=new Br(E);return j.needsUpdate=!0,j}const b=_(32),A=new e_({vertexColors:!0,opacity:1,sizeAttenuation:!0,size:.15,depthWrite:!1,map:b,alphaTest:.5}),T=new e_({vertexColors:!0,opacity:.85,sizeAttenuation:!0,size:.035,depthWrite:!1,map:b,alphaTest:.5}),D=new QA(M,A),V=new QA(v,T);s.add(D),s.add(V);const O=new K9(o,a.domElement);O.enableZoom=!1,t=()=>{window.removeEventListener("resize",$),a.dispose(),M.dispose(),v.dispose(),b.dispose(),A.dispose(),T.dispose()};function x(){requestAnimationFrame(x),u.rotation.y+=5e-4,O.update();const K=performance.now()*.001;let E=!1,Y=!1,j=!1;for(let X=0;X<f;X++){const ee=y[X]+.15*Math.sin(K*.7+X),le=h[X]+.15*Math.cos(K*.9+X*1.7),me=.12*Math.sin(K*1.1+w[X]),he=p+me,je=he*Math.sin(ee)*Math.cos(le),q=he*Math.sin(ee)*Math.sin(le),ze=he*Math.cos(ee),Qe=X*3;(m[Qe]!==je||m[Qe+1]!==q||m[Qe+2]!==ze)&&(m[Qe]=je,m[Qe+1]=q,m[Qe+2]=ze,E=!0)}E&&(M.attributes.position.needsUpdate=!0);for(let X=0;X<S;X++){if(G[X]++,G[X]>R){const Pe=Math.acos(2*Math.random()-1),Nt=2*Math.PI*Math.random();B[X]=Pe,I[X]=Nt,U[X]=Math.random()*Math.PI*2,G[X]=0}let ee=1;G[X]<R*.1?ee=G[X]/(R*.1):G[X]>R*.9&&(ee=1-(G[X]-R*.9)/(R*.1));const le=X*3;(N[le]!==ee||N[le+1]!==ee||N[le+2]!==ee)&&(N[le]=ee,N[le+1]=ee,N[le+2]=ee,j=!0);const me=B[X]+.08*Math.sin(K*.8+X),he=I[X]+.08*Math.cos(K*1.1+X*1.3),je=.08*Math.sin(K*1.2+U[X]),q=C+je,ze=q*Math.sin(me)*Math.cos(he),Qe=q*Math.sin(me)*Math.sin(he),We=q*Math.cos(me);(k[le]!==ze||k[le+1]!==Qe||k[le+2]!==We)&&(k[le]=ze,k[le+1]=Qe,k[le+2]=We,Y=!0)}Y&&(v.attributes.position.needsUpdate=!0),j&&(v.attributes.color.needsUpdate=!0),a.render(s,o)}x();function $(){var Y,j;const K=((Y=e.value)==null?void 0:Y.clientWidth)||window.innerWidth,E=((j=e.value)==null?void 0:j.clientHeight)||window.innerHeight;o.aspect=K/E,o.updateProjectionMatrix(),a.setSize(K,E,!1),a.domElement.style.width="100%",a.domElement.style.height="100%",a.render(s,o)}window.addEventListener("resize",$)}),(r,i)=>(ge(),Se("div",{class:"w-full aspect-[1/1] absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",ref_key:"container",ref:e,style:{overflow:"hidden"}},null,512))}}),mM=""+globalThis.__publicAssetsURL("images/public/connect.png"),gM=n=>(ja("data-v-ddd3bb73"),n=n(),Wa(),n),l7={class:"w-full h-full flex flex-col items-center justify-around space-y-8 relative z-10"},c7={class:""},u7={class:"slogan uppercase sm:text-[10vw] md:text-[7vw] lg:text-[6.5vw] text-[10vw]"},d7=gM(()=>L("span",null,"GAEA",-1)),f7=gM(()=>L("div",{class:"w-[8vw] absolute -top-5 left-full"},[L("img",{src:mM,alt:""})],-1)),h7=[d7,f7],p7={class:"w-full flex items-center justify-center space-x-3 uppercase mt-[10%] text-[1.2vw]"},m7=tt({__name:"Content",emits:["update:scrollTo"],setup(n,{emit:e}){const t=s=>{e("update:scrollTo",s)},r=fe(!1),i=fe(null);return En(()=>{Tn(()=>{const s=new IntersectionObserver(o=>o.forEach(a=>r.value=a.isIntersecting),{threshold:0});i.value&&s.observe(i.value)})}),(s,o)=>{const a=Da;return ge(),Se("div",l7,[L("div",c7,[L("div",u7,[L("div",{class:qe(["w-fit relative",P(r)?"move-left":""])},h7,2),L("div",{class:qe(["",P(r)?"move-right":""])},"ecological",2),L("div",{class:qe(["nodes-text",P(r)?"move-left":""])},"nodes",2)]),L("div",{class:"text-[1.5vw] font-sans text-[#ebebebee] mt-4",ref_key:"floor1",ref:i}," Becoming the founder of the silicon-based world. ",512),L("div",p7,[L("div",{class:"buy-node-hover text-center",onClick:o[0]||(o[0]=l=>t("floor4"))},"buy node "),ke(a,{to:"https://app.aigaea.net/dashboard",target:"_blank",rel:"noopener",class:"buy-node-hover text-center"},{default:He(()=>[Mt(" join GAEA ")]),_:1}),L("div",{class:"buy-node-hover text-center",onClick:o[1]||(o[1]=l=>t("floor5"))},"my node")])])])}}});const g7=ro(m7,[["__scopeId","data-v-ddd3bb73"]]),v7={class:"w-full max-w-[950px] aspect-[1/1] mx-auto relative mt-[60px]"},y7=tt({__name:"Index",emits:["update:scrollTo"],setup(n,{emit:e}){const t=r=>{e("update:scrollTo",r)};return(r,i)=>{const s=pM,o=g7;return ge(),Se("div",v7,[ke(s),ke(o,{"onUpdate:scrollTo":t})])}}}),Yp=""+globalThis.__publicAssetsURL("video/mobile.mp4"),vM=""+globalThis.__publicAssetsURL("video/mobile.png"),_7=L("div",{class:"w-[25%] aspect-[1/1] pointer-events-none absolute -top-[10%] right-0 transition-all duration-1000 ease-linear z-[30]"},[L("div",{class:"w-full h-full absolute pointer-events-none zoom-element rounded-full bg-primary opacity-50 blur-[100px] transition [transform:translate3d(0,0,0)] md:blur-[150px] lg:blur-[100px] xl:blur-[200px]"})],-1),b7=L("div",{class:"w-[25%] aspect-[1/1] pointer-events-none absolute -bottom-[50%] left-0 transition-all duration-1000 ease-linear z-[30]"},[L("div",{class:"w-full h-full absolute pointer-events-none zoom-element rounded-full bg-primary opacity-50 blur-[100px] transition [transform:translate3d(0,0,0)] md:blur-[150px] lg:blur-[100px] xl:blur-[200px]"})],-1),x7=L("div",{class:"w-[30%] aspect-[1/1.5] border border-[#ebebeb63] rounded-[25px] relative"},[L("video",{class:"w-full h-full object-contain text-[#ebebeb30] absolute top-0 left-0 rounded-[25px] z-20",src:Yp,poster:vM,loop:"",autoplay:"",muted:"",disablePictureInPicture:"",playsinline:"","webkit-playsinline":"",controlsList:"nodownload nofullscreen noremoteplayback",style:{"pointer-events":"none"}},[L("source",{src:Yp,type:"video/mp4"}),L("div",null,"Your browser does not support the video tag.")])],-1),w7={class:"w-[60%] space-y-5 overflow-hidden"},A7=L("p",{class:"uppercase nodes-text text-[4vw] font-bold mb- u-line-2"},"ecological nodes",-1),E7=L("div",{class:"w-[90%] text-[#ebebebbd] text-[20px] font-sans break-words"}," As the key driver of GAEA emotional applications, GAEA nodes automatically participate in network security monitoring and maintenance through globally distributed nodes. This enhances the security, performance, and intelligent network reward allocation of the GAEA network. Committed to achieving large-scale application of AI emotion generalization. ",-1),S7={class:"grid grid-cols-2 gap-y-[10%] gap-x-[120px] mx-auto"},T7={class:"text-[4vw] font-bold"},M7={class:"text-[1.2vw] text-[#ebebebbd] text-center"},R7=tt({__name:"Index",setup(n){const e=fe(!1),t=fe(null);En(()=>{Tn(()=>{const i=new IntersectionObserver(s=>s.forEach(o=>e.value=o.isIntersecting),{threshold:0});t.value&&i.observe(t.value)})});const r=fe([{title:"151",description:"Countries and Regions"},{title:"71M+",description:"GAEA Effective Datasets"},{title:"67%",description:"Al Training Cost Reduction"},{title:"300%",description:"Emotion Model Recognition Speed"}]);return(i,s)=>(ge(),Se("div",{class:qe(["w-full flex items-center justify-between space-x-5 relative",P(e)?"animate-start":""]),ref_key:"floor2",ref:t},[_7,b7,x7,L("div",w7,[A7,E7,L("div",S7,[(ge(!0),Se(mr,null,Uo(P(r),(o,a)=>(ge(),Se("div",{class:"flex flex-col items-center",key:a},[L("span",T7,Ze(o.title),1),L("span",M7,Ze(o.description),1)]))),128))])])],2))}}),Qp=""+globalThis.__publicAssetsURL("video/watch.mp4"),yM=""+globalThis.__publicAssetsURL("video/watch.png"),I7=L("div",{class:"w-[25%] aspect-[1/1] pointer-events-none absolute -bottom-[50%] right-0 transition-all duration-1000 ease-linear z-[30]"},[L("div",{class:"w-full h-full pointer-events-none zoom-element rounded-full bg-primary opacity-50 blur-[100px] transition [transform:translate3d(0,0,0)] md:blur-[150px] lg:blur-[100px] xl:blur-[200px]"})],-1),C7=L("div",{class:"w-[30%] aspect-[1/1.5] relative overflow-hidden"},[L("video",{class:"w-full h-full object-contain scale-[1.2] text-[#ebebeb30] absolute top-0 left-0",src:Qp,poster:yM,loop:"",autoplay:"",muted:"",disablePictureInPicture:"",controlsList:"nodownload nofullscreen noremoteplayback",playsinline:"","webkit-playsinline":"",style:{"pointer-events":"none"}},[L("source",{src:Qp,type:"video/mp4"}),L("div",null,"Your browser does not support the video tag.")]),L("div",{class:"absolute bottom-10 left-10 text-[3.75rem] lg:text-[3.75rem] sm:text-[2.8rem] leading-[4.25rem] font-[600] flex flex-col"},[L("span",null,"THE"),L("span",null,"GAEA"),L("span",{class:"nodes-text"},"Emocoords")])],-1),P7=rb('<div class="w-[60%] space-y-12 overflow-hidden mt-[10%]"><p class="text-[20px] font-sans text-[#ebebebd1] u-line-3"> Purchase GAEA smart hardware devices of the corresponding pre-sale level, bind exclusive NFTs to become authentication nodes. </p><div class="w-fit border border-[#2B2B2B] text-[#ebebeb93] rounded-[25px] pl-6 pr-20 py-6 leading-[25px] u-line-8"> Net weight of the main body: approximately 15.8g<br> Screen: 1.62 inches, AMOLED screen<br> Resolution: 192 * 490<br> Wireless connection: Bluetooth 5.4<br> Waterproof grade: 5ATM<br> Battery type: Lithium ion polymer battery<br> Battery capacity: 233mAh </div><div class="text-[20px] font-sans text-[#ebebebd1] u-line-3"> Nodes are driven and operated by AI node agents, and computers<br> with node keys and Internet access can participate in node mining. </div></div>',1),N7=[I7,C7,P7],k7=tt({__name:"Index",setup(n){const e=fe(!1),t=fe(null);return En(()=>{Tn(()=>{const r=new IntersectionObserver(i=>i.forEach(s=>e.value=s.isIntersecting),{threshold:0});t.value&&r.observe(t.value)})}),(r,i)=>(ge(),Se("div",{class:qe(["w-full flex items-center justify-between relative",P(e)?"animate-start":""]),ref_key:"floor3",ref:t},N7,2))}});const Hb=n=>({nftABI:[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"_fromTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_toTokenId",type:"uint256"}],name:"BatchMetadataUpdate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"MetadataUpdate",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_user",type:"address"}],name:"RemovedWhiteList",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"_mintInfos",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"blockNumber",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint8",name:"level",type:"uint8"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"description",type:"string"},{internalType:"string",name:"image",type:"string"}],name:"addLevelMetadata",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"addWhiteList",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"approveBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getLevel",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"getLevels",outputs:[{internalType:"uint8[]",name:"levels",type:"uint8[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"getOwnerTokenIds",outputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"levelMetadatas",outputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"description",type:"string"},{internalType:"string",name:"image",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxLevel",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint8",name:"level",type:"uint8"}],name:"mint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint8",name:"level",type:"uint8"},{internalType:"uint256",name:"batchSize",type:"uint256"}],name:"mintBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"removeWhiteList",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"transferFromBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"whiteListed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],nftmintABI:[{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"paused",type:"bool"}],name:"NFTMintPaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"buyer",type:"address"},{indexed:!0,internalType:"address",name:"superior",type:"address"},{indexed:!1,internalType:"uint8",name:"level",type:"uint8"},{indexed:!1,internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"NFTPurchased",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_user",type:"address"}],name:"RemovedWhiteList",type:"event"},{inputs:[{internalType:"uint8",name:"level",type:"uint8"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"currentSupply",type:"uint256"}],name:"addMintMetadata",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"addWhiteList",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"buyer",type:"address"},{internalType:"address",name:"superior",type:"address"}],name:"genesis",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserPurchases",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserReferralEarnings",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserReferrales",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxLevel",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint8",name:"",type:"uint8"}],name:"mintMetadatas",outputs:[{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"currentSupply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"mintPaused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"nftContract",outputs:[{internalType:"contract INFT",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint8",name:"level",type:"uint8"},{internalType:"address",name:"superior",type:"address"}],name:"purchase",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint8",name:"level",type:"uint8"},{internalType:"address",name:"superior",type:"address"},{internalType:"uint256",name:"batchSize",type:"uint256"}],name:"purchaseBatch",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"removeWhiteList",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rootSuperior",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bool",name:"state",type:"bool"}],name:"setPurchaseStatus",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_rootSuperior",type:"address"}],name:"setRootSuperior",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"superiors",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userPurchases",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint8",name:"",type:"uint8"}],name:"userPurchasesLevel",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userReferralEarnings",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userReferrales",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint8",name:"",type:"uint8"}],name:"userReferralesLevel",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"whiteListed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],nftstakeABI:[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint8",name:"level",type:"uint8"}],name:"NFTStaked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RewardClaimed",type:"event"},{inputs:[{internalType:"uint8",name:"level",type:"uint8"},{internalType:"uint8",name:"year",type:"uint8"},{internalType:"uint256",name:"yearlyReward",type:"uint256"}],name:"addRewardRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getClaimedRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint8",name:"daysBack",type:"uint8"}],name:"getLevelsRewards",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getStakedCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getStakedLevelCounts",outputs:[{internalType:"uint256[4]",name:"",type:"uint256[4]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getStakedTokenIds",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getTodayRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getTotalRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserStakes",outputs:[{components:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"lastClaimTime",type:"uint256"},{internalType:"uint8",name:"level",type:"uint8"},{internalType:"uint256",name:"totalClaimed",type:"uint256"}],internalType:"struct NodeNFTStake.Stake[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"nftContract",outputs:[{internalType:"contract INFT",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint8",name:"",type:"uint8"},{internalType:"uint256",name:"",type:"uint256"}],name:"rewardRates",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_tokenContract",type:"address"}],name:"setTokenContract",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"stake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"stakeBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"tokenContract",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenStaked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_token",type:"address"},{internalType:"address",name:"_recipient",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"transferToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"userStakes",outputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"lastClaimTime",type:"uint256"},{internalType:"uint8",name:"level",type:"uint8"},{internalType:"uint256",name:"totalClaimed",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}]})[n]||[],Xa=n=>{const e=/"transactionHash":"([^"]+)"/;if(n){const t=n.match(e);return t&&t[1]?t[1]:null}else return null};var Bi;(function(n){n.NUMBER="NUMBER_NUMBER",n.HEX="NUMBER_HEX",n.STR="NUMBER_STR",n.BIGINT="NUMBER_BIGINT"})(Bi||(Bi={}));var $o;(function(n){n.HEX="BYTES_HEX",n.UINT8ARRAY="BYTES_UINT8ARRAY"})($o||($o={}));const Lr={number:Bi.BIGINT,bytes:$o.HEX},_t={number:Bi.HEX,bytes:$o.HEX};var Ro;(function(n){n.EARLIEST="earliest",n.LATEST="latest",n.PENDING="pending",n.SAFE="safe",n.FINALIZED="finalized",n.COMMITTED="committed"})(Ro||(Ro={}));var jd;(function(n){n.chainstart="chainstart",n.frontier="frontier",n.homestead="homestead",n.dao="dao",n.tangerineWhistle="tangerineWhistle",n.spuriousDragon="spuriousDragon",n.byzantium="byzantium",n.constantinople="constantinople",n.petersburg="petersburg",n.istanbul="istanbul",n.muirGlacier="muirGlacier",n.berlin="berlin",n.london="london",n.altair="altair",n.arrowGlacier="arrowGlacier",n.grayGlacier="grayGlacier",n.bellatrix="bellatrix",n.merge="merge",n.capella="capella",n.shanghai="shanghai"})(jd||(jd={}));const zb=Object.getPrototypeOf(Uint8Array);var M1=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const R1=Symbol.for("web3/base-provider");class Jf{static isWeb3Provider(e){return e instanceof Jf||!!(e&&e[R1])}get[R1](){return!0}send(e,t){this.request(e).then(r=>{t(null,r)}).catch(r=>{t(r)})}sendAsync(e){return M1(this,void 0,void 0,function*(){return this.request(e)})}asEIP1193Provider(){const e=Object.create(this),t=e.request;return e.request=function(i){return M1(this,void 0,void 0,function*(){return(yield t(i)).result})},e.asEIP1193Provider=void 0,e}}class B7 extends Array{constructor(e){super(),this._accountProvider=e}}const L7=100,D7=101,O7=201,F7=202,U7=203,H7=204,z7=205,G7=206,V7=207,$7=208,j7=300,W7=301,q7=310,X7=311,K7=400,Y7=402,Q7=405,Z7=407,J7=408,eV=410,tV=411,nV=412,rV=413,iV=414,sV=415,oV=416,aV=417,lV=418,cV=419,uV=420,dV=421,fV=422,hV=423,pV=424,mV=425,gV=426,vV=427,yV=428,_V=429,bV=430,xV=431,wV=432,AV=433,EV=434,SV=435,TV=436,MV=437,RV=438,IV=439,CV=440,PV=441,NV=500,kV=503,BV=505,LV=506,DV=507,OV=600,FV=602,UV=603,HV=604,zV=701,GV=702,VV=703,$V=704,jV=705,WV=706,qV=707,XV=709,KV=801,YV=802,QV=4001,ZV=4100,JV=4200,e$=4900,t$=4901,n$=902,r$=903,i$=1001,s$=1002,o$=1003,a$=1004,l$=1005,c$=1006,u$=1008,d$=1009,f$=1010,h$=1011,p$=1012,m$=1014,g$=1015,v$=1100,_M=1101,y$=1200,Zp=-32700,Jp=-32600,em=-32601,tm=-32602,nm=-32603,rm=-32e3,im=-32001,sm=-32002,om=-32003,am=-32004,lm=-32005,cm=-32006;class vt extends Error{get innerError(){return this.cause instanceof Wd?this.cause.errors:this.cause}set innerError(e){Array.isArray(e)?this.cause=new Wd(e):this.cause=e}constructor(e,t){super(e),Array.isArray(t)?this.cause=new Wd(t):this.cause=t,this.name=this.constructor.name,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(new.target.constructor):this.stack=new Error().stack}static convertToString(e,t=!1){if(e==null)return"undefined";const r=JSON.stringify(e,(i,s)=>typeof s=="bigint"?s.toString():s);return t&&["bigint","string"].includes(typeof e)?r.replace(/['\\"]+/g,""):r}toJSON(){return{name:this.name,code:this.code,message:this.message,cause:this.cause,innerError:this.cause}}}class Wd extends vt{constructor(e){super(`Multiple errors occurred: [${e.map(t=>t.message).join("], [")}]`),this.code=$7,this.errors=e}}class kt extends vt{constructor(e,t){super(`Invalid value given "${vt.convertToString(e,!0)}". Error: ${t}.`),this.name=this.constructor.name}}class I1 extends vt{constructor(){super("Private key must be 32 bytes."),this.code=zV}}class _$ extends vt{constructor(){super("Invalid Private Key, Not a valid string or uint8Array"),this.code=GV}}class b$ extends vt{constructor(e){super(`"${e}"`),this.code=YV}}class bM extends vt{constructor(){super("Invalid key derivation function"),this.code=VV}}class x$ extends vt{constructor(){super("Key derivation failed - possibly wrong password"),this.code=$V}}class w$ extends vt{constructor(){super("Unsupported key store version"),this.code=jV}}class A$ extends vt{constructor(){super("Password cannot be empty"),this.code=WV}}class E$ extends vt{constructor(){super("Initialization vector must be 16 bytes"),this.code=qV}}class S$ extends vt{constructor(){super("c > 1000, pbkdf2 is less secure with less iterations"),this.code=XV}}class eh extends vt{constructor(e,t){super(e),this.code=NV,t&&(this.errorCode=t.code,this.errorReason=t.reason)}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{errorCode:this.errorCode,errorReason:this.errorReason})}}class r_ extends eh{constructor(e){super("Connection not open",e),this.code=kV}}class T$ extends eh{constructor(e){super(`Maximum number of reconnect attempts reached! (${e})`),this.code=BV}}class M$ extends eh{constructor(){super("CONNECTION ERROR: Provider started to reconnect before the response got received!"),this.code=LV}}class R$ extends eh{constructor(e){super(`Request already sent with following id: ${e}`),this.code=DV}}class Dr extends vt{constructor(e,t){super(e),this.code=j7,this.receipt=t}}class C1 extends vt{constructor(e,t){super(`The resolver at ${e} does not implement requested method: "${t}".`),this.address=e,this.name=t,this.code=W7}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{address:this.address,name:this.name})}}class A0 extends Dr{constructor(e){if(super(e.message||"Error"),this.name="name"in e&&e.name||this.constructor.name,this.stack="stack"in e&&e.stack||void 0,this.code=e.code,typeof e.data=="object"){let t;e.data&&"originalError"in e.data?t=e.data.originalError:t=e.data,this.data=t.data,this.cause=new A0(t)}else this.data=e.data}setDecodedProperties(e,t,r){this.errorName=e,this.errorSignature=t,this.errorArgs=r}toJSON(){let e=Object.assign(Object.assign({},super.toJSON()),{data:this.data});return this.errorName&&(e=Object.assign(Object.assign({},e),{errorName:this.errorName,errorSignature:this.errorSignature,errorArgs:this.errorArgs})),e}}class Tl extends Dr{constructor(e){super("Error happened while trying to execute a function inside a smart contract"),this.code=q7,this.cause=new A0(e)}}class I$ extends kt{constructor(e){var t,r;super(`data: ${(t=e.data)!==null&&t!==void 0?t:"undefined"}, input: ${(r=e.input)!==null&&r!==void 0?r:"undefined"}`,`You can't have "data" and "input" as properties of a contract at the same time, please use either "data" or "input" instead.`),this.code=X7}}class C$ extends vt{constructor(e){super(`ENS is not supported on network ${e}`),this.code=n$}}class P$ extends vt{constructor(){super("Network not synced"),this.code=r$}}class P1 extends vt{constructor(e){super(`Invalid parameters passed. "${typeof e<"u"?e:""}"`),this.hint=e,this.code=V7}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{hint:this.hint})}}class i_ extends vt{constructor(){super(...arguments),this.code=O7}}class ho extends vt{constructor(){super("The method you're trying to call is not implemented."),this.code=F7}}class xM extends vt{constructor(){super(...arguments),this.code=U7}}class N$ extends vt{constructor(){super(...arguments),this.code=H7}}class zt extends vt{constructor(e,t){super(e),this.code=z7,this.props=t??{}}}class k$ extends vt{constructor(e){super(`A plugin with the namespace: ${e} has already been registered.`),this.code=G7}}class yp extends vt{constructor(){super(...arguments),this.code=OV}}class s_ extends vt{constructor(e){super(`Client URL "${e}" is invalid.`),this.code=FV}}class xo extends vt{constructor(){super(...arguments),this.code=UV}}class B$ extends vt{constructor(){super(...arguments),this.code=HV}}class L$ extends kt{constructor(){super(...arguments),this.code=KV}}class Gb extends vt{constructor(e,t){super(e),this.receipt=t,this.code=K7}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{receipt:this.receipt})}}class um extends vt{constructor(e,t,r,i){super(`Transaction has been reverted by the EVM${r===void 0?"":`:
 ${vt.convertToString(r)}`}`),this.reason=e,this.signature=t,this.receipt=r,this.data=i,this.code=Y7}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{reason:this.reason,signature:this.signature,receipt:this.receipt,data:this.data})}}class wM extends um{constructor(e,t,r,i,s,o,a){super(e),this.reason=e,this.customErrorName=t,this.customErrorDecodedSignature=r,this.customErrorArguments=i,this.signature=s,this.receipt=o,this.data=a,this.code=RV}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{reason:this.reason,customErrorName:this.customErrorName,customErrorDecodedSignature:this.customErrorDecodedSignature,customErrorArguments:this.customErrorArguments,signature:this.signature,receipt:this.receipt,data:this.data})}}class AM extends Gb{constructor(e){super(`Transaction has been reverted by the EVM${e===void 0?"":`:
 ${vt.convertToString(e)}`}`,e),this.code=Q7}}class D$ extends Gb{constructor(){super("Raw transaction undefined"),this.code=Z7}}class N1 extends Gb{constructor(){super("Transaction not found"),this.code=bV}}class O$ extends kt{constructor(e){super(e,"invalid transaction with invalid sender"),this.code=J7}}class F$ extends kt{constructor(e){super(e,"invalid transaction with invalid receiver"),this.code=MV}}class U$ extends kt{constructor(){super("MissingCustomChainError","If tx.common is provided it must have tx.common.customChain"),this.code=eV}}class H$ extends kt{constructor(){super("MissingCustomChainIdError","If tx.common is provided it must have tx.common.customChain and tx.common.customChain.chainId"),this.code=tV}}class z$ extends kt{constructor(e){super(JSON.stringify(e),"Chain Id doesnt match in tx.chainId tx.common.customChain.chainId"),this.code=nV}}class G$ extends kt{constructor(e){super(JSON.stringify(e),"Chain doesnt match in tx.chain tx.common.basechain"),this.code=SV}}class V$ extends kt{constructor(e){super(JSON.stringify(e),"hardfork doesnt match in tx.hardfork tx.common.hardfork"),this.code=TV}}class $$ extends kt{constructor(){super("CommonOrChainAndHardforkError","Please provide the common object or the chain and hardfork property but not all together."),this.code=rV}}class j$ extends kt{constructor(e){var t,r;super("MissingChainOrHardforkError",`When specifying chain and hardfork, both values must be defined. Received "chain": ${(t=e.chain)!==null&&t!==void 0?t:"undefined"}, "hardfork": ${(r=e.hardfork)!==null&&r!==void 0?r:"undefined"}`),this.code=iV}}class W$ extends vt{constructor(){super('Missing properties in transaction, either define "gas" and "gasPrice" for type 0 transactions or "gas", "maxPriorityFeePerGas" and "maxFeePerGas" for type 2 transactions'),this.code=CV}}class q$ extends kt{constructor(e){var t,r,i,s;super(`gas: ${(t=e.gas)!==null&&t!==void 0?t:"undefined"}, gasPrice: ${(r=e.gasPrice)!==null&&r!==void 0?r:"undefined"}, maxPriorityFeePerGas: ${(i=e.maxPriorityFeePerGas)!==null&&i!==void 0?i:"undefined"}, maxFeePerGas: ${(s=e.maxFeePerGas)!==null&&s!==void 0?s:"undefined"}`,'"gas" is missing'),this.code=sV,this.cause=new W$}}class X$ extends vt{constructor(){super('Missing properties in transaction, either define "gas" and "gasPrice" for type 0 transactions or "gas", "maxPriorityFeePerGas" and "maxFeePerGas" for type 2 transactions, not both'),this.code=PV}}class K$ extends kt{constructor(e){var t,r,i,s;super(`gas: ${(t=e.gas)!==null&&t!==void 0?t:"undefined"}, gasPrice: ${(r=e.gasPrice)!==null&&r!==void 0?r:"undefined"}, maxPriorityFeePerGas: ${(i=e.maxPriorityFeePerGas)!==null&&i!==void 0?i:"undefined"}, maxFeePerGas: ${(s=e.maxFeePerGas)!==null&&s!==void 0?s:"undefined"}`,"transaction must specify legacy or fee market gas properties, not both"),this.code=EV,this.cause=new X$}}class Y$ extends kt{constructor(e){var t,r;super(`gas: ${(t=e.gas)!==null&&t!==void 0?t:"undefined"}, gasPrice: ${(r=e.gasPrice)!==null&&r!==void 0?r:"undefined"}`,"Gas or gasPrice is lower than 0"),this.code=oV}}class Q$ extends kt{constructor(e){var t,r;super(`maxPriorityFeePerGas: ${(t=e.maxPriorityFeePerGas)!==null&&t!==void 0?t:"undefined"}, maxFeePerGas: ${(r=e.maxFeePerGas)!==null&&r!==void 0?r:"undefined"}`,"maxPriorityFeePerGas or maxFeePerGas is lower than 0"),this.code=aV}}class Z$ extends kt{constructor(e){super(e,"eip-1559 transactions don't support gasPrice"),this.code=lV}}class EM extends kt{constructor(e){var t,r;super(`maxPriorityFeePerGas: ${(t=e.maxPriorityFeePerGas)!==null&&t!==void 0?t:"undefined"}, maxFeePerGas: ${(r=e.maxFeePerGas)!==null&&r!==void 0?r:"undefined"}`,"pre-eip-1559 transaction don't support maxFeePerGas/maxPriorityFeePerGas"),this.code=cV}}class J$ extends kt{constructor(e){super(e,"invalid transaction object"),this.code=uV}}class ej extends kt{constructor(e){var t,r;super(`nonce: ${(t=e.nonce)!==null&&t!==void 0?t:"undefined"}, chainId: ${(r=e.chainId)!==null&&r!==void 0?r:"undefined"}`,"Nonce or chainId is lower than 0"),this.code=dV}}class tj extends kt{constructor(){super("UnableToPopulateNonceError","unable to populate nonce, no from address available"),this.code=fV}}class nj extends kt{constructor(){super("Eip1559NotSupportedError","Network doesn't support eip-1559"),this.code=hV}}class k1 extends kt{constructor(e){super(e,"unsupported transaction type"),this.code=pV}}class SM extends kt{constructor(e){var t,r;super(`data: ${(t=e.data)!==null&&t!==void 0?t:"undefined"}, input: ${(r=e.input)!==null&&r!==void 0?r:"undefined"}`,`You can't have "data" and "input" as properties of transactions at the same time, please use either "data" or "input" instead.`),this.code=mV}}class rj extends vt{constructor(e){super(`The connected Ethereum Node did not respond within ${e.numberOfSeconds} seconds, please make sure your transaction was properly sent and you are connected to a healthy Node. Be aware that transaction might still be pending or mined!
	Transaction Hash: ${e.transactionHash?e.transactionHash.toString():"not available"}`),this.code=xV}}function TM(n){return`Please make sure your transaction was properly sent and there are no previous pending transaction for the same account. However, be aware that it might still be mined!
	Transaction Hash: ${n?n.toString():"not available"}`}class MM extends vt{constructor(e){super(`Transaction was not mined within ${e.numberOfSeconds} seconds. ${TM(e.transactionHash)}`),this.code=gV}}class RM extends vt{constructor(e){super(`Transaction started at ${e.starterBlockNumber} but was not mined within ${e.numberOfBlocks} blocks. ${TM(e.transactionHash)}`),this.code=wV}}class ij extends kt{constructor(e){var t,r;super(`receipt: ${JSON.stringify(e.receipt)}, blockHash: ${(t=e.blockHash)===null||t===void 0?void 0:t.toString()}, transactionHash: ${(r=e.transactionHash)===null||r===void 0?void 0:r.toString()}`,"Receipt missing or blockHash null"),this.code=vV}}class sj extends kt{constructor(e){super(`receipt: ${JSON.stringify(e.receipt)}`,"Receipt missing block number"),this.code=yV}}class o_ extends vt{constructor(e){super(`Invalid signature. "${e}"`),this.code=AV}}class B1 extends kt{constructor(){super("LocalWalletNotAvailableError","Attempted to index account in local wallet, but no wallet is available"),this.code=_V}}class oj extends vt{constructor(e,t){const r=[];e.forEach(i=>r.push(i.keyword)),super(`The following properties are invalid for the transaction type ${t}: ${r.join(", ")}`),this.code=IV}}class Jc extends kt{constructor(e){super(e,"can not parse as byte data"),this.code=s$}}class Vb extends kt{constructor(e){super(e,"can not parse as number data"),this.code=o$}}class $b extends kt{constructor(e){super(e,"invalid ethereum address"),this.code=l$}}class aj extends kt{constructor(e){super(e,"not a valid string"),this.code=i$}}class IM extends kt{constructor(e){super(e,"invalid unit"),this.code=a$}}class CM extends kt{constructor(e){super(e,"not a valid unit. Must be a positive integer"),this.code=g$}}class lj extends kt{constructor(e){super(e,"can not be converted to hex"),this.code=c$}}class PM extends kt{constructor(e){super(e,"value greater than the nibble width"),this.code=m$}}class jb extends kt{constructor(e){super(e,"not a valid boolean."),this.code=u$}}class cj extends kt{constructor(e){super(e,"not a valid unsigned integer."),this.code=d$}}class L1 extends kt{constructor(e){super(e,"invalid size given."),this.code=f$}}class D1 extends kt{constructor(e){super(e,"value is larger than size."),this.code=h$}}class uj extends kt{constructor(e){super(e,"invalid string given"),this.code=p$}}const dj=n=>!Array.isArray(n)&&n.jsonrpc==="2.0"&&!!n&&(n.result===void 0||n.result===null)&&"error"in n&&(typeof n.id=="number"||typeof n.id=="string"),O1=n=>dj(n)?n.error.message:"";class ks extends vt{constructor(e,t,r,i){var s;super(t??`Returned error: ${Array.isArray(e)?e.map(a=>O1(a)).join(","):O1(e)}`),this.code=L7,t||(this.data=Array.isArray(e)?e.map(a=>{var l;return(l=a.error)===null||l===void 0?void 0:l.data}):(s=e==null?void 0:e.error)===null||s===void 0?void 0:s.data),this.statusCode=i,this.request=r;let o;"error"in e?o=e.error:e instanceof Array&&(o=e.filter(a=>a.error).map(a=>a.error)),Array.isArray(o)&&o.length>0?this.cause=new Wd(o):this.cause=o}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{data:this.data,request:this.request,statusCode:this.statusCode})}}class E0 extends ks{constructor(e,t){super(e,void 0,t),this.code=D7;let r;"error"in e?r=e.error:e instanceof Array&&(r=e.map(i=>i.error)),Array.isArray(r)?this.cause=new Wd(r):this.cause=r}}class F1 extends vt{constructor(e,t){super(`Web3Config hardfork doesnt match in defaultHardfork ${e} and common.hardfork ${t}`),this.code=_M}}class U1 extends vt{constructor(e,t){super(`Web3Config chain doesnt match in defaultHardfork ${e} and common.hardfork ${t}`),this.code=_M}}const NM="An Rpc error has occured with a code of *code*",Tr={[Zp]:{message:"Parse error",description:"Invalid JSON"},[Jp]:{message:"Invalid request",description:"JSON is not a valid request object	"},[em]:{message:"Method not found",description:"Method does not exist	"},[tm]:{message:"Invalid params",description:"Invalid method parameters"},[nm]:{message:"Internal error",description:"Internal JSON-RPC error"},[rm]:{message:"Invalid input",description:"Missing or invalid parameters"},[im]:{message:"Resource not found",description:"Requested resource not found"},[sm]:{message:"Resource unavailable",description:"Requested resource not available"},[om]:{message:"Transaction rejected",description:"Transaction creation failed"},[am]:{message:"Method not supported",description:"Method is not implemented"},[lm]:{message:"Limit exceeded",description:"Request exceeds defined limit"},[cm]:{message:"JSON-RPC version not supported",description:"Version of JSON-RPC protocol is not supported"},[QV]:{name:"User Rejected Request",message:"The user rejected the request."},[ZV]:{name:"Unauthorized",message:"The requested method and/or account has not been authorized by the user."},[JV]:{name:"Unsupported Method",message:"The Provider does not support the requested method."},[e$]:{name:"Disconnected",message:"The Provider is disconnected from all chains."},[t$]:{name:"Chain Disconnected",message:"The Provider is not connected to the requested chain."},"0-999":{name:"",message:"Not used."},1e3:{name:"Normal Closure",message:"The connection successfully completed the purpose for which it was created."},1001:{name:"Going Away",message:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{name:"Protocol error",message:"The endpoint is terminating the connection due to a protocol error."},1003:{name:"Unsupported Data",message:"The connection is being terminated because the endpoint received data of a type it cannot accept. (For example, a text-only endpoint received binary data.)"},1004:{name:"Reserved",message:"Reserved. A meaning might be defined in the future."},1005:{name:"No Status Rcvd",message:"Reserved. Indicates that no status code was provided even though one was expected."},1006:{name:"Abnormal Closure",message:"Reserved. Indicates that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{name:"Invalid frame payload data",message:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{name:"Policy Violation",message:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{name:"Message Too Big",message:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{name:"Mandatory Ext.",message:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{name:"Internal Error",message:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{name:"Service Restart",message:"The server is terminating the connection because it is restarting."},1013:{name:"Try Again Later",message:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{name:"Bad Gateway",message:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{name:"TLS handshake",message:"Reserved. Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},"1016-2999":{name:"",message:"For definition by future revisions of the WebSocket Protocol specification, and for definition by extension specifications."},"3000-3999":{name:"",message:"For use by libraries, frameworks, and applications. These status codes are registered directly with IANA. The interpretation of these codes is undefined by the WebSocket protocol."},"4000-4999":{name:"",message:"For private use, and thus can't be registered. Such codes can be used by prior agreements between WebSocket applications. The interpretation of these codes is undefined by the WebSocket protocol."}};class xi extends vt{constructor(e,t){super(t??NM.replace("*code*",e.error.code.toString())),this.code=e.error.code,this.id=e.id,this.jsonrpc=e.jsonrpc,this.jsonRpcError=e.error}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{error:this.jsonRpcError,id:this.id,jsonRpc:this.jsonrpc})}}class fj extends vt{constructor(e,t){var r,i,s,o;if(!e)super();else if(!((r=Tr[e])===null||r===void 0)&&r.message)super(Tr[e].message);else{const a=Object.keys(Tr).find(l=>typeof l=="string"&&e>=parseInt(l.split("-")[0],10)&&e<=parseInt(l.split("-")[1],10));super((s=(i=Tr[a??""])===null||i===void 0?void 0:i.message)!==null&&s!==void 0?s:NM.replace("*code*",(o=e==null?void 0:e.toString())!==null&&o!==void 0?o:'""'))}this.code=e,this.data=t}}class hj extends xi{constructor(e){super(e,Tr[Zp].message),this.code=Zp}}class pj extends xi{constructor(e){super(e,Tr[Jp].message),this.code=Jp}}class mj extends xi{constructor(e){super(e,Tr[em].message),this.code=em}}class gj extends xi{constructor(e){super(e,Tr[tm].message),this.code=tm}}class vj extends xi{constructor(e){super(e,Tr[nm].message),this.code=nm}}class yj extends xi{constructor(e){super(e,Tr[rm].message),this.code=rm}}class _j extends xi{constructor(e){super(e,Tr[am].message),this.code=am}}class bj extends xi{constructor(e){super(e,Tr[sm].message),this.code=sm}}class xj extends xi{constructor(e){super(e,Tr[im].message),this.code=im}}class wj extends xi{constructor(e){super(e,Tr[cm].message),this.code=cm}}class Aj extends xi{constructor(e){super(e,Tr[om].message),this.code=om}}class Ej extends xi{constructor(e){super(e,Tr[lm].message),this.code=lm}}const Or=new Map;Or.set(Zp,{error:hj});Or.set(Jp,{error:pj});Or.set(em,{error:mj});Or.set(tm,{error:gj});Or.set(nm,{error:vj});Or.set(rm,{error:yj});Or.set(am,{error:_j});Or.set(sm,{error:bj});Or.set(om,{error:Aj});Or.set(im,{error:xj});Or.set(cm,{error:wj});Or.set(lm,{error:Ej});class Sj extends vt{constructor(e){super(`Format for the type ${e} is unsupported`),this.type=e,this.code=y$}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{type:this.type})}}function Wr(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`positive integer expected, not ${n}`)}function Tj(n){if(typeof n!="boolean")throw new Error(`boolean expected, not ${n}`)}function Mj(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function ed(n,...e){if(!Mj(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${n.length}`)}function Wb(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Wr(n.outputLen),Wr(n.blockLen)}function Ol(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function qb(n,e){ed(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Rj={number:Wr,bool:Tj,bytes:ed,hash:Wb,exists:Ol,output:qb},Xb=Rj,Qh=BigInt(2**32-1),a_=BigInt(32);function kM(n,e=!1){return e?{h:Number(n&Qh),l:Number(n>>a_&Qh)}:{h:Number(n>>a_&Qh)|0,l:Number(n&Qh)|0}}function BM(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:s,l:o}=kM(n[i],e);[t[i],r[i]]=[s,o]}return[t,r]}const Ij=(n,e)=>BigInt(n>>>0)<<a_|BigInt(e>>>0),Cj=(n,e,t)=>n>>>t,Pj=(n,e,t)=>n<<32-t|e>>>t,Nj=(n,e,t)=>n>>>t|e<<32-t,kj=(n,e,t)=>n<<32-t|e>>>t,Bj=(n,e,t)=>n<<64-t|e>>>t-32,Lj=(n,e,t)=>n>>>t-32|e<<64-t,Dj=(n,e)=>e,Oj=(n,e)=>n,LM=(n,e,t)=>n<<t|e>>>32-t,DM=(n,e,t)=>e<<t|n>>>32-t,OM=(n,e,t)=>e<<t-32|n>>>64-t,FM=(n,e,t)=>n<<t-32|e>>>64-t;function Fj(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const Uj=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),Hj=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,zj=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),Gj=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,Vj=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),$j=(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0,Rt={fromBig:kM,split:BM,toBig:Ij,shrSH:Cj,shrSL:Pj,rotrSH:Nj,rotrSL:kj,rotrBH:Bj,rotrBL:Lj,rotr32H:Dj,rotr32L:Oj,rotlSH:LM,rotlSL:DM,rotlBH:OM,rotlBL:FM,add:Fj,add3L:Uj,add3H:Hj,add4L:zj,add4H:Gj,add5H:$j,add5L:Vj},_p=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bp=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),xp=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Es=(n,e)=>n<<32-e|n>>>e,Zt=(n,e)=>n<<e|n>>>32-e>>>0,dm=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,jj=n=>n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255;function fm(n){for(let e=0;e<n.length;e++)n[e]=jj(n[e])}function Au(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Eu(n){return typeof n=="string"&&(n=Au(n)),ed(n),n}function hm(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];ed(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}class Kb{clone(){return this._cloneInto()}}const Wj={}.toString;function UM(n,e){if(e!==void 0&&Wj.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(n,e)}function Yb(n){const e=r=>n().update(Eu(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function HM(n=32){if(_p&&typeof _p.getRandomValues=="function")return _p.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}const zM=[],GM=[],VM=[],qj=BigInt(0),wd=BigInt(1),Xj=BigInt(2),Kj=BigInt(7),Yj=BigInt(256),Qj=BigInt(113);for(let n=0,e=wd,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],zM.push(2*(5*r+t)),GM.push((n+1)*(n+2)/2%64);let i=qj;for(let s=0;s<7;s++)e=(e<<wd^(e>>Kj)*Qj)%Yj,e&Xj&&(i^=wd<<(wd<<BigInt(s))-wd);VM.push(i)}const[Zj,Jj]=BM(VM,!0),H1=(n,e,t)=>t>32?OM(n,e,t):LM(n,e,t),z1=(n,e,t)=>t>32?FM(n,e,t):DM(n,e,t);function eW(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=t[l],u=t[l+1],d=H1(c,u,1)^t[a],f=z1(c,u,1)^t[a+1];for(let p=0;p<50;p+=10)n[o+p]^=d,n[o+p+1]^=f}let i=n[2],s=n[3];for(let o=0;o<24;o++){const a=GM[o],l=H1(i,s,a),c=z1(i,s,a),u=zM[o];i=n[u],s=n[u+1],n[u]=l,n[u+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=n[o+a];for(let a=0;a<10;a++)n[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}n[0]^=Zj[r],n[1]^=Jj[r]}t.fill(0)}class Qb extends Kb{constructor(e,t,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Wr(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=bp(this.state)}keccak(){dm||fm(this.state32),eW(this.state32,this.rounds),dm||fm(this.state32),this.posOut=0,this.pos=0}update(e){Ol(this);const{blockLen:t,state:r}=this;e=Eu(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,t&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Ol(this,!1),ed(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Wr(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(qb(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new Qb(t,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const tW=(n,e,t)=>Yb(()=>new Qb(e,n,t)),G1=tW(1,136,256/8);Xb.bool;const pm=Xb.bytes;function $M(n){if(!(n instanceof Uint8Array))throw new TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof n}`);return new TextDecoder().decode(n)}function nW(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function rW(n){return e=>(Xb.bytes(e),n(e))}(()=>{const n=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,e=typeof module<"u"&&typeof module.require=="function"&&module.require.bind(module);return{node:e&&!n?e("crypto"):void 0,web:n}})();const kr=(()=>{const n=rW(G1);return n.create=G1.create,n})();var Xt;(function(n){n.assertEqual=i=>i;function e(i){}n.assertIs=e;function t(i){throw new Error}n.assertNever=t,n.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},n.getValidEnumValues=i=>{const s=n.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return n.objectValues(o)},n.objectValues=i=>n.objectKeys(i).map(function(s){return i[s]}),n.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},n.find=(i,s)=>{for(const o of i)if(s(o))return o},n.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}n.joinValues=r,n.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Xt||(Xt={}));var l_;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(l_||(l_={}));const $e=Xt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Eo=n=>{switch(typeof n){case"undefined":return $e.undefined;case"string":return $e.string;case"number":return isNaN(n)?$e.nan:$e.number;case"boolean":return $e.boolean;case"function":return $e.function;case"bigint":return $e.bigint;case"symbol":return $e.symbol;case"object":return Array.isArray(n)?$e.array:n===null?$e.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?$e.promise:typeof Map<"u"&&n instanceof Map?$e.map:typeof Set<"u"&&n instanceof Set?$e.set:typeof Date<"u"&&n instanceof Date?$e.date:$e.object;default:return $e.unknown}},be=Xt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),iW=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class vi extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(t(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(t(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return i(this),r}static assert(e){if(!(e instanceof vi))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Xt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}vi.create=n=>new vi(n);const Su=(n,e)=>{let t;switch(n.code){case be.invalid_type:n.received===$e.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case be.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,Xt.jsonStringifyReplacer)}`;break;case be.unrecognized_keys:t=`Unrecognized key(s) in object: ${Xt.joinValues(n.keys,", ")}`;break;case be.invalid_union:t="Invalid input";break;case be.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Xt.joinValues(n.options)}`;break;case be.invalid_enum_value:t=`Invalid enum value. Expected ${Xt.joinValues(n.options)}, received '${n.received}'`;break;case be.invalid_arguments:t="Invalid function arguments";break;case be.invalid_return_type:t="Invalid function return type";break;case be.invalid_date:t="Invalid date";break;case be.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:Xt.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case be.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case be.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case be.custom:t="Invalid input";break;case be.invalid_intersection_types:t="Intersection results could not be merged";break;case be.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case be.not_finite:t="Number must be finite";break;default:t=e.defaultError,Xt.assertNever(n)}return{message:t}};let jM=Su;function sW(n){jM=n}function mm(){return jM}const gm=n=>{const{data:e,path:t,errorMaps:r,issueData:i}=n,s=[...t,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}},oW=[];function Ue(n,e){const t=mm(),r=gm({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===Su?void 0:Su].filter(i=>!!i)});n.common.issues.push(r)}class Rr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const i of t){if(i.status==="aborted")return gt;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const i of t){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return Rr.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const i of t){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return gt;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const gt=Object.freeze({status:"aborted"}),Vc=n=>({status:"dirty",value:n}),Fr=n=>({status:"valid",value:n}),c_=n=>n.status==="aborted",u_=n=>n.status==="dirty",Fl=n=>n.status==="valid",df=n=>typeof Promise<"u"&&n instanceof Promise;function vm(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function WM(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t}var et;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(et||(et={}));var Bd,Ld;class Ys{constructor(e,t,r,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const V1=(n,e)=>{if(Fl(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new vi(n.common.issues);return this._error=t,this._error}}};function Et(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:i}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{var l,c;const{message:u}=n;return o.code==="invalid_enum_value"?{message:u??a.defaultError}:typeof a.data>"u"?{message:(l=u??r)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(c=u??t)!==null&&c!==void 0?c:a.defaultError}},description:i}}class Pt{get description(){return this._def.description}_getType(e){return Eo(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Eo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Rr,ctx:{common:e.parent.common,data:e.data,parsedType:Eo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(df(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const i={common:{issues:[],async:(r=t==null?void 0:t.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Eo(e)},s=this._parseSync({data:e,path:i.path,parent:i});return V1(i,s)}"~validate"(e){var t,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Eo(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:i});return Fl(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((r=(t=s==null?void 0:s.message)===null||t===void 0?void 0:t.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(s=>Fl(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Eo(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(df(i)?i:Promise.resolve(i));return V1(r,s)}refine(e,t){const r=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:be.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof t=="function"?t(r,i):t),!1))}_refinement(e){return new ds({schema:this,typeName:ht.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return js.create(this,this._def)}nullable(){return Ga.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ls.create(this)}promise(){return Mu.create(this,this._def)}or(e){return mf.create([this,e],this._def)}and(e){return gf.create(this,e,this._def)}transform(e){return new ds({...Et(this._def),schema:this,typeName:ht.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new xf({...Et(this._def),innerType:this,defaultValue:t,typeName:ht.ZodDefault})}brand(){return new Zb({typeName:ht.ZodBranded,type:this,...Et(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new wf({...Et(this._def),innerType:this,catchValue:t,typeName:ht.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return th.create(this,e)}readonly(){return Af.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const aW=/^c[^\s-]{8,}$/i,lW=/^[0-9a-z]+$/,cW=/^[0-9A-HJKMNP-TV-Z]{26}$/i,uW=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,dW=/^[a-z0-9_-]{21}$/i,fW=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,hW=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,pW=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,mW="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Jg;const gW=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,vW=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,yW=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,_W=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,bW=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,xW=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,qM="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",wW=new RegExp(`^${qM}$`);function XM(n){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`),e}function AW(n){return new RegExp(`^${XM(n)}$`)}function KM(n){let e=`${qM}T${XM(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function EW(n,e){return!!((e==="v4"||!e)&&gW.test(n)||(e==="v6"||!e)&&yW.test(n))}function SW(n,e){if(!fW.test(n))return!1;try{const[t]=n.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function TW(n,e){return!!((e==="v4"||!e)&&vW.test(n)||(e==="v6"||!e)&&_W.test(n))}class is extends Pt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==$e.string){const s=this._getOrReturnCtx(e);return Ue(s,{code:be.invalid_type,expected:$e.string,received:s.parsedType}),gt}const r=new Rr;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Ue(i,{code:be.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Ue(i,{code:be.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?Ue(i,{code:be.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Ue(i,{code:be.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")pW.test(e.data)||(i=this._getOrReturnCtx(e,i),Ue(i,{validation:"email",code:be.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")Jg||(Jg=new RegExp(mW,"u")),Jg.test(e.data)||(i=this._getOrReturnCtx(e,i),Ue(i,{validation:"emoji",code:be.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")uW.test(e.data)||(i=this._getOrReturnCtx(e,i),Ue(i,{validation:"uuid",code:be.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")dW.test(e.data)||(i=this._getOrReturnCtx(e,i),Ue(i,{validation:"nanoid",code:be.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")aW.test(e.data)||(i=this._getOrReturnCtx(e,i),Ue(i,{validation:"cuid",code:be.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")lW.test(e.data)||(i=this._getOrReturnCtx(e,i),Ue(i,{validation:"cuid2",code:be.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")cW.test(e.data)||(i=this._getOrReturnCtx(e,i),Ue(i,{validation:"ulid",code:be.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Ue(i,{validation:"url",code:be.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Ue(i,{validation:"regex",code:be.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Ue(i,{code:be.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Ue(i,{code:be.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Ue(i,{code:be.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?KM(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Ue(i,{code:be.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?wW.test(e.data)||(i=this._getOrReturnCtx(e,i),Ue(i,{code:be.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?AW(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Ue(i,{code:be.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?hW.test(e.data)||(i=this._getOrReturnCtx(e,i),Ue(i,{validation:"duration",code:be.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?EW(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Ue(i,{validation:"ip",code:be.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?SW(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),Ue(i,{validation:"jwt",code:be.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?TW(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Ue(i,{validation:"cidr",code:be.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?bW.test(e.data)||(i=this._getOrReturnCtx(e,i),Ue(i,{validation:"base64",code:be.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?xW.test(e.data)||(i=this._getOrReturnCtx(e,i),Ue(i,{validation:"base64url",code:be.invalid_string,message:s.message}),r.dirty()):Xt.assertNever(s);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(i=>e.test(i),{validation:t,code:be.invalid_string,...et.errToObj(r)})}_addCheck(e){return new is({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...et.errToObj(e)})}url(e){return this._addCheck({kind:"url",...et.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...et.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...et.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...et.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...et.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...et.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...et.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...et.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...et.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...et.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...et.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...et.errToObj(e)})}datetime(e){var t,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...et.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...et.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...et.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...et.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...et.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...et.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...et.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...et.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...et.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...et.errToObj(t)})}nonempty(e){return this.min(1,et.errToObj(e))}trim(){return new is({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new is({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new is({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}is.create=n=>{var e;return new is({checks:[],typeName:ht.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...Et(n)})};function MW(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=t>r?t:r,s=parseInt(n.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class Ua extends Pt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==$e.number){const s=this._getOrReturnCtx(e);return Ue(s,{code:be.invalid_type,expected:$e.number,received:s.parsedType}),gt}let r;const i=new Rr;for(const s of this._def.checks)s.kind==="int"?Xt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ue(r,{code:be.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Ue(r,{code:be.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Ue(r,{code:be.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?MW(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),Ue(r,{code:be.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ue(r,{code:be.not_finite,message:s.message}),i.dirty()):Xt.assertNever(s);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,et.toString(t))}gt(e,t){return this.setLimit("min",e,!1,et.toString(t))}lte(e,t){return this.setLimit("max",e,!0,et.toString(t))}lt(e,t){return this.setLimit("max",e,!1,et.toString(t))}setLimit(e,t,r,i){return new Ua({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:et.toString(i)}]})}_addCheck(e){return new Ua({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:et.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:et.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:et.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:et.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:et.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:et.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:et.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:et.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:et.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Xt.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ua.create=n=>new Ua({checks:[],typeName:ht.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...Et(n)});class Ha extends Pt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==$e.bigint)return this._getInvalidInput(e);let r;const i=new Rr;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Ue(r,{code:be.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Ue(r,{code:be.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ue(r,{code:be.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Xt.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Ue(t,{code:be.invalid_type,expected:$e.bigint,received:t.parsedType}),gt}gte(e,t){return this.setLimit("min",e,!0,et.toString(t))}gt(e,t){return this.setLimit("min",e,!1,et.toString(t))}lte(e,t){return this.setLimit("max",e,!0,et.toString(t))}lt(e,t){return this.setLimit("max",e,!1,et.toString(t))}setLimit(e,t,r,i){return new Ha({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:et.toString(i)}]})}_addCheck(e){return new Ha({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:et.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:et.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:et.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:et.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:et.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ha.create=n=>{var e;return new Ha({checks:[],typeName:ht.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...Et(n)})};class ff extends Pt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==$e.boolean){const r=this._getOrReturnCtx(e);return Ue(r,{code:be.invalid_type,expected:$e.boolean,received:r.parsedType}),gt}return Fr(e.data)}}ff.create=n=>new ff({typeName:ht.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...Et(n)});class Ul extends Pt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==$e.date){const s=this._getOrReturnCtx(e);return Ue(s,{code:be.invalid_type,expected:$e.date,received:s.parsedType}),gt}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Ue(s,{code:be.invalid_date}),gt}const r=new Rr;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Ue(i,{code:be.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Ue(i,{code:be.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):Xt.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ul({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:et.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:et.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Ul.create=n=>new Ul({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:ht.ZodDate,...Et(n)});class ym extends Pt{_parse(e){if(this._getType(e)!==$e.symbol){const r=this._getOrReturnCtx(e);return Ue(r,{code:be.invalid_type,expected:$e.symbol,received:r.parsedType}),gt}return Fr(e.data)}}ym.create=n=>new ym({typeName:ht.ZodSymbol,...Et(n)});class hf extends Pt{_parse(e){if(this._getType(e)!==$e.undefined){const r=this._getOrReturnCtx(e);return Ue(r,{code:be.invalid_type,expected:$e.undefined,received:r.parsedType}),gt}return Fr(e.data)}}hf.create=n=>new hf({typeName:ht.ZodUndefined,...Et(n)});class pf extends Pt{_parse(e){if(this._getType(e)!==$e.null){const r=this._getOrReturnCtx(e);return Ue(r,{code:be.invalid_type,expected:$e.null,received:r.parsedType}),gt}return Fr(e.data)}}pf.create=n=>new pf({typeName:ht.ZodNull,...Et(n)});class Tu extends Pt{constructor(){super(...arguments),this._any=!0}_parse(e){return Fr(e.data)}}Tu.create=n=>new Tu({typeName:ht.ZodAny,...Et(n)});class Ml extends Pt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Fr(e.data)}}Ml.create=n=>new Ml({typeName:ht.ZodUnknown,...Et(n)});class jo extends Pt{_parse(e){const t=this._getOrReturnCtx(e);return Ue(t,{code:be.invalid_type,expected:$e.never,received:t.parsedType}),gt}}jo.create=n=>new jo({typeName:ht.ZodNever,...Et(n)});class _m extends Pt{_parse(e){if(this._getType(e)!==$e.undefined){const r=this._getOrReturnCtx(e);return Ue(r,{code:be.invalid_type,expected:$e.void,received:r.parsedType}),gt}return Fr(e.data)}}_m.create=n=>new _m({typeName:ht.ZodVoid,...Et(n)});class ls extends Pt{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),i=this._def;if(t.parsedType!==$e.array)return Ue(t,{code:be.invalid_type,expected:$e.array,received:t.parsedType}),gt;if(i.exactLength!==null){const o=t.data.length>i.exactLength.value,a=t.data.length<i.exactLength.value;(o||a)&&(Ue(t,{code:o?be.too_big:be.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(Ue(t,{code:be.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(Ue(t,{code:be.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>i.type._parseAsync(new Ys(t,o,t.path,a)))).then(o=>Rr.mergeArray(r,o));const s=[...t.data].map((o,a)=>i.type._parseSync(new Ys(t,o,t.path,a)));return Rr.mergeArray(r,s)}get element(){return this._def.type}min(e,t){return new ls({...this._def,minLength:{value:e,message:et.toString(t)}})}max(e,t){return new ls({...this._def,maxLength:{value:e,message:et.toString(t)}})}length(e,t){return new ls({...this._def,exactLength:{value:e,message:et.toString(t)}})}nonempty(e){return this.min(1,e)}}ls.create=(n,e)=>new ls({type:n,minLength:null,maxLength:null,exactLength:null,typeName:ht.ZodArray,...Et(e)});function Lc(n){if(n instanceof Ln){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=js.create(Lc(r))}return new Ln({...n._def,shape:()=>e})}else return n instanceof ls?new ls({...n._def,type:Lc(n.element)}):n instanceof js?js.create(Lc(n.unwrap())):n instanceof Ga?Ga.create(Lc(n.unwrap())):n instanceof Qs?Qs.create(n.items.map(e=>Lc(e))):n}class Ln extends Pt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Xt.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==$e.object){const c=this._getOrReturnCtx(e);return Ue(c,{code:be.invalid_type,expected:$e.object,received:c.parsedType}),gt}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof jo&&this._def.unknownKeys==="strip"))for(const c in i.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],d=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Ys(i,d,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof jo){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(c==="strict")a.length>0&&(Ue(i,{code:be.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Ys(i,d,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key,f=await u.value;c.push({key:d,value:f,alwaysSet:u.alwaysSet})}return c}).then(c=>Rr.mergeObjectSync(r,c)):Rr.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return et.errToObj,new Ln({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var i,s,o,a;const l=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,t,r).message)!==null&&o!==void 0?o:r.defaultError;return t.code==="unrecognized_keys"?{message:(a=et.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new Ln({...this._def,unknownKeys:"strip"})}passthrough(){return new Ln({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ln({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ln({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ht.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Ln({...this._def,catchall:e})}pick(e){const t={};return Xt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new Ln({...this._def,shape:()=>t})}omit(e){const t={};return Xt.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new Ln({...this._def,shape:()=>t})}deepPartial(){return Lc(this)}partial(e){const t={};return Xt.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?t[r]=i:t[r]=i.optional()}),new Ln({...this._def,shape:()=>t})}required(e){const t={};return Xt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof js;)s=s._def.innerType;t[r]=s}}),new Ln({...this._def,shape:()=>t})}keyof(){return YM(Xt.objectKeys(this.shape))}}Ln.create=(n,e)=>new Ln({shape:()=>n,unknownKeys:"strip",catchall:jo.create(),typeName:ht.ZodObject,...Et(e)});Ln.strictCreate=(n,e)=>new Ln({shape:()=>n,unknownKeys:"strict",catchall:jo.create(),typeName:ht.ZodObject,...Et(e)});Ln.lazycreate=(n,e)=>new Ln({shape:n,unknownKeys:"strip",catchall:jo.create(),typeName:ht.ZodObject,...Et(e)});class mf extends Pt{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new vi(a.ctx.common.issues));return Ue(t,{code:be.invalid_union,unionErrors:o}),gt}if(t.common.async)return Promise.all(r.map(async s=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await s._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const l of r){const c={...t,common:{...t.common,issues:[]},parent:null},u=l._parseSync({data:t.data,path:t.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new vi(l));return Ue(t,{code:be.invalid_union,unionErrors:a}),gt}}get options(){return this._def.options}}mf.create=(n,e)=>new mf({options:n,typeName:ht.ZodUnion,...Et(e)});const _o=n=>n instanceof yf?_o(n.schema):n instanceof ds?_o(n.innerType()):n instanceof _f?[n.value]:n instanceof za?n.options:n instanceof bf?Xt.objectValues(n.enum):n instanceof xf?_o(n._def.innerType):n instanceof hf?[void 0]:n instanceof pf?[null]:n instanceof js?[void 0,..._o(n.unwrap())]:n instanceof Ga?[null,..._o(n.unwrap())]:n instanceof Zb||n instanceof Af?_o(n.unwrap()):n instanceof wf?_o(n._def.innerType):[];class S0 extends Pt{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==$e.object)return Ue(t,{code:be.invalid_type,expected:$e.object,received:t.parsedType}),gt;const r=this.discriminator,i=t.data[r],s=this.optionsMap.get(i);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(Ue(t,{code:be.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),gt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const i=new Map;for(const s of t){const o=_o(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new S0({typeName:ht.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...Et(r)})}}function d_(n,e){const t=Eo(n),r=Eo(e);if(n===e)return{valid:!0,data:n};if(t===$e.object&&r===$e.object){const i=Xt.objectKeys(e),s=Xt.objectKeys(n).filter(a=>i.indexOf(a)!==-1),o={...n,...e};for(const a of s){const l=d_(n[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(t===$e.array&&r===$e.array){if(n.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<n.length;s++){const o=n[s],a=e[s],l=d_(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return t===$e.date&&r===$e.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class gf extends Pt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(c_(s)||c_(o))return gt;const a=d_(s.value,o.value);return a.valid?((u_(s)||u_(o))&&t.dirty(),{status:t.value,value:a.data}):(Ue(r,{code:be.invalid_intersection_types}),gt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}gf.create=(n,e,t)=>new gf({left:n,right:e,typeName:ht.ZodIntersection,...Et(t)});class Qs extends Pt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==$e.array)return Ue(r,{code:be.invalid_type,expected:$e.array,received:r.parsedType}),gt;if(r.data.length<this._def.items.length)return Ue(r,{code:be.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),gt;!this._def.rest&&r.data.length>this._def.items.length&&(Ue(r,{code:be.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Ys(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>Rr.mergeArray(t,o)):Rr.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new Qs({...this._def,rest:e})}}Qs.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Qs({items:n,typeName:ht.ZodTuple,rest:null,...Et(e)})};class vf extends Pt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==$e.object)return Ue(r,{code:be.invalid_type,expected:$e.object,received:r.parsedType}),gt;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new Ys(r,a,r.path,a)),value:o._parse(new Ys(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?Rr.mergeObjectAsync(t,i):Rr.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof Pt?new vf({keyType:e,valueType:t,typeName:ht.ZodRecord,...Et(r)}):new vf({keyType:is.create(),valueType:e,typeName:ht.ZodRecord,...Et(t)})}}class bm extends Pt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==$e.map)return Ue(r,{code:be.invalid_type,expected:$e.map,received:r.parsedType}),gt;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:i._parse(new Ys(r,a,r.path,[c,"key"])),value:s._parse(new Ys(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return gt;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(c.value,u.value)}return{status:t.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return gt;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(c.value,u.value)}return{status:t.value,value:a}}}}bm.create=(n,e,t)=>new bm({valueType:e,keyType:n,typeName:ht.ZodMap,...Et(t)});class Hl extends Pt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==$e.set)return Ue(r,{code:be.invalid_type,expected:$e.set,received:r.parsedType}),gt;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Ue(r,{code:be.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Ue(r,{code:be.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return gt;u.status==="dirty"&&t.dirty(),c.add(u.value)}return{status:t.value,value:c}}const a=[...r.data.values()].map((l,c)=>s._parse(new Ys(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,t){return new Hl({...this._def,minSize:{value:e,message:et.toString(t)}})}max(e,t){return new Hl({...this._def,maxSize:{value:e,message:et.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Hl.create=(n,e)=>new Hl({valueType:n,minSize:null,maxSize:null,typeName:ht.ZodSet,...Et(e)});class eu extends Pt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==$e.function)return Ue(t,{code:be.invalid_type,expected:$e.function,received:t.parsedType}),gt;function r(a,l){return gm({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,mm(),Su].filter(c=>!!c),issueData:{code:be.invalid_arguments,argumentsError:l}})}function i(a,l){return gm({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,mm(),Su].filter(c=>!!c),issueData:{code:be.invalid_return_type,returnTypeError:l}})}const s={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof Mu){const a=this;return Fr(async function(...l){const c=new vi([]),u=await a._def.args.parseAsync(l,s).catch(p=>{throw c.addIssue(r(l,p)),c}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,s).catch(p=>{throw c.addIssue(i(d,p)),c})})}else{const a=this;return Fr(function(...l){const c=a._def.args.safeParse(l,s);if(!c.success)throw new vi([r(l,c.error)]);const u=Reflect.apply(o,this,c.data),d=a._def.returns.safeParse(u,s);if(!d.success)throw new vi([i(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new eu({...this._def,args:Qs.create(e).rest(Ml.create())})}returns(e){return new eu({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new eu({args:e||Qs.create([]).rest(Ml.create()),returns:t||Ml.create(),typeName:ht.ZodFunction,...Et(r)})}}class yf extends Pt{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}yf.create=(n,e)=>new yf({getter:n,typeName:ht.ZodLazy,...Et(e)});class _f extends Pt{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Ue(t,{received:t.data,code:be.invalid_literal,expected:this._def.value}),gt}return{status:"valid",value:e.data}}get value(){return this._def.value}}_f.create=(n,e)=>new _f({value:n,typeName:ht.ZodLiteral,...Et(e)});function YM(n,e){return new za({values:n,typeName:ht.ZodEnum,...Et(e)})}class za extends Pt{constructor(){super(...arguments),Bd.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return Ue(t,{expected:Xt.joinValues(r),received:t.parsedType,code:be.invalid_type}),gt}if(vm(this,Bd,"f")||WM(this,Bd,new Set(this._def.values),"f"),!vm(this,Bd,"f").has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return Ue(t,{received:t.data,code:be.invalid_enum_value,options:r}),gt}return Fr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return za.create(e,{...this._def,...t})}exclude(e,t=this._def){return za.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}Bd=new WeakMap;za.create=YM;class bf extends Pt{constructor(){super(...arguments),Ld.set(this,void 0)}_parse(e){const t=Xt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==$e.string&&r.parsedType!==$e.number){const i=Xt.objectValues(t);return Ue(r,{expected:Xt.joinValues(i),received:r.parsedType,code:be.invalid_type}),gt}if(vm(this,Ld,"f")||WM(this,Ld,new Set(Xt.getValidEnumValues(this._def.values)),"f"),!vm(this,Ld,"f").has(e.data)){const i=Xt.objectValues(t);return Ue(r,{received:r.data,code:be.invalid_enum_value,options:i}),gt}return Fr(e.data)}get enum(){return this._def.values}}Ld=new WeakMap;bf.create=(n,e)=>new bf({values:n,typeName:ht.ZodNativeEnum,...Et(e)});class Mu extends Pt{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==$e.promise&&t.common.async===!1)return Ue(t,{code:be.invalid_type,expected:$e.promise,received:t.parsedType}),gt;const r=t.parsedType===$e.promise?t.data:Promise.resolve(t.data);return Fr(r.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Mu.create=(n,e)=>new Mu({type:n,typeName:ht.ZodPromise,...Et(e)});class ds extends Pt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ht.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{Ue(r,o),o.fatal?t.abort():t.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(t.value==="aborted")return gt;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?gt:l.status==="dirty"||t.value==="dirty"?Vc(l.value):l});{if(t.value==="aborted")return gt;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?gt:a.status==="dirty"||t.value==="dirty"?Vc(a.value):a}}if(i.type==="refinement"){const o=a=>{const l=i.refinement(a,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?gt:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?gt:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Fl(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Fl(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:t.value,value:a})):o);Xt.assertNever(i)}}ds.create=(n,e,t)=>new ds({schema:n,typeName:ht.ZodEffects,effect:e,...Et(t)});ds.createWithPreprocess=(n,e,t)=>new ds({schema:e,effect:{type:"preprocess",transform:n},typeName:ht.ZodEffects,...Et(t)});class js extends Pt{_parse(e){return this._getType(e)===$e.undefined?Fr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}js.create=(n,e)=>new js({innerType:n,typeName:ht.ZodOptional,...Et(e)});class Ga extends Pt{_parse(e){return this._getType(e)===$e.null?Fr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ga.create=(n,e)=>new Ga({innerType:n,typeName:ht.ZodNullable,...Et(e)});class xf extends Pt{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===$e.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}xf.create=(n,e)=>new xf({innerType:n,typeName:ht.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Et(e)});class wf extends Pt{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return df(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new vi(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new vi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}wf.create=(n,e)=>new wf({innerType:n,typeName:ht.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Et(e)});class xm extends Pt{_parse(e){if(this._getType(e)!==$e.nan){const r=this._getOrReturnCtx(e);return Ue(r,{code:be.invalid_type,expected:$e.nan,received:r.parsedType}),gt}return{status:"valid",value:e.data}}}xm.create=n=>new xm({typeName:ht.ZodNaN,...Et(n)});const RW=Symbol("zod_brand");class Zb extends Pt{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class th extends Pt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?gt:s.status==="dirty"?(t.dirty(),Vc(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?gt:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,t){return new th({in:e,out:t,typeName:ht.ZodPipeline})}}class Af extends Pt{_parse(e){const t=this._def.innerType._parse(e),r=i=>(Fl(i)&&(i.value=Object.freeze(i.value)),i);return df(t)?t.then(i=>r(i)):r(t)}unwrap(){return this._def.innerType}}Af.create=(n,e)=>new Af({innerType:n,typeName:ht.ZodReadonly,...Et(e)});function QM(n,e={},t){return n?Tu.create().superRefine((r,i)=>{var s,o;if(!n(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,l=(o=(s=a.fatal)!==null&&s!==void 0?s:t)!==null&&o!==void 0?o:!0,c=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...c,fatal:l})}}):Tu.create()}const IW={object:Ln.lazycreate};var ht;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(ht||(ht={}));const CW=(n,e={message:`Input not instance of ${n.name}`})=>QM(t=>t instanceof n,e),ZM=is.create,JM=Ua.create,PW=xm.create,NW=Ha.create,eR=ff.create,kW=Ul.create,BW=ym.create,LW=hf.create,DW=pf.create,OW=Tu.create,FW=Ml.create,UW=jo.create,HW=_m.create,zW=ls.create,GW=Ln.create,VW=Ln.strictCreate,$W=mf.create,jW=S0.create,WW=gf.create,qW=Qs.create,XW=vf.create,KW=bm.create,YW=Hl.create,QW=eu.create,ZW=yf.create,JW=_f.create,eq=za.create,tq=bf.create,nq=Mu.create,$1=ds.create,rq=js.create,iq=Ga.create,sq=ds.createWithPreprocess,oq=th.create,aq=()=>ZM().optional(),lq=()=>JM().optional(),cq=()=>eR().optional(),uq={string:n=>is.create({...n,coerce:!0}),number:n=>Ua.create({...n,coerce:!0}),boolean:n=>ff.create({...n,coerce:!0}),bigint:n=>Ha.create({...n,coerce:!0}),date:n=>Ul.create({...n,coerce:!0})},dq=gt;var Ss=Object.freeze({__proto__:null,defaultErrorMap:Su,setErrorMap:sW,getErrorMap:mm,makeIssue:gm,EMPTY_PATH:oW,addIssueToContext:Ue,ParseStatus:Rr,INVALID:gt,DIRTY:Vc,OK:Fr,isAborted:c_,isDirty:u_,isValid:Fl,isAsync:df,get util(){return Xt},get objectUtil(){return l_},ZodParsedType:$e,getParsedType:Eo,ZodType:Pt,datetimeRegex:KM,ZodString:is,ZodNumber:Ua,ZodBigInt:Ha,ZodBoolean:ff,ZodDate:Ul,ZodSymbol:ym,ZodUndefined:hf,ZodNull:pf,ZodAny:Tu,ZodUnknown:Ml,ZodNever:jo,ZodVoid:_m,ZodArray:ls,ZodObject:Ln,ZodUnion:mf,ZodDiscriminatedUnion:S0,ZodIntersection:gf,ZodTuple:Qs,ZodRecord:vf,ZodMap:bm,ZodSet:Hl,ZodFunction:eu,ZodLazy:yf,ZodLiteral:_f,ZodEnum:za,ZodNativeEnum:bf,ZodPromise:Mu,ZodEffects:ds,ZodTransformer:ds,ZodOptional:js,ZodNullable:Ga,ZodDefault:xf,ZodCatch:wf,ZodNaN:xm,BRAND:RW,ZodBranded:Zb,ZodPipeline:th,ZodReadonly:Af,custom:QM,Schema:Pt,ZodSchema:Pt,late:IW,get ZodFirstPartyTypeKind(){return ht},coerce:uq,any:OW,array:zW,bigint:NW,boolean:eR,date:kW,discriminatedUnion:jW,effect:$1,enum:eq,function:QW,instanceof:CW,intersection:WW,lazy:ZW,literal:JW,map:KW,nan:PW,nativeEnum:tq,never:UW,null:DW,nullable:iq,number:JM,object:GW,oboolean:cq,onumber:lq,optional:rq,ostring:aq,pipeline:oq,preprocess:sq,promise:nq,record:XW,set:YW,strictObject:VW,string:ZM,symbol:BW,transformer:$1,tuple:qW,undefined:LW,union:$W,unknown:FW,void:HW,NEVER:dq,ZodIssueCode:be,quotelessJson:iW,ZodError:vi});const fq=n=>n.message?n.message:"unspecified error";class Ru extends vt{constructor(e){super(),this.code=v$,this.errors=e,super.message=`Web3 validator found ${e.length} error[s]:
${this._compileErrors().join(`
`)}`}_compileErrors(){return this.errors.map(fq)}}const hq=["bool","int","uint","bytes","string","address","tuple"],tR=n=>typeof n=="object"&&"type"in n&&"name"in n,Jb=n=>typeof n=="string",rn=n=>typeof n=="string"&&/^((-)?0x[0-9a-f]+|(0x))$/i.test(n);function nR(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof e<"u"&&e>0&&n.length!==2+2*e)}const wm=n=>typeof n=="number"||typeof n=="bigint"||typeof n=="string"&&/^((-0x|0x|-)?[0-9a-f]+|(0x))$/i.test(n);function ex(n){if(typeof n!="string")throw new Error(`[isHexPrefixed] input must be type 'string', received type ${typeof n}`);return n.startsWith("0x")}const tx=function(n){for(const[e,t]of Object.entries(n))if(t!==void 0&&t.length>0&&t[0]===0)throw new Error(`${e} cannot have leading zeroes, received: ${t.toString()}`)},pq=["hex","number","blockNumber","blockNumberOrTag","filter","bloom"],tc=n=>{let e=n.replace(/ /,""),t,r=!1,i=[];if(n.includes("[")&&(e=e.slice(0,e.indexOf("[")),i=[...n.matchAll(/(?:\[(\d*)\])/g)].map(s=>parseInt(s[1],10)).map(s=>Number.isNaN(s)?-1:s),r=i.length>0),hq.includes(e))return{baseType:e,isArray:r,baseTypeSize:t,arraySizes:i};if(e.startsWith("int"))t=parseInt(e.substring(3),10),e="int";else if(e.startsWith("uint"))t=parseInt(n.substring(4),10),e="uint";else if(e.startsWith("bytes"))t=parseInt(e.substring(5),10),e="bytes";else return{baseType:void 0,isArray:!1,baseTypeSize:void 0,arraySizes:i};return{baseType:e,isArray:r,baseTypeSize:t,arraySizes:i}},ev=(n,e={})=>{if(Object.keys(e).includes("type"))throw new Ru([{keyword:"eth",message:'Either "eth" or "type" can be presented in schema',params:{eth:n},instancePath:"",schemaPath:""}]);const{baseType:r,baseTypeSize:i}=tc(n);if(!r&&!pq.includes(n))throw new Ru([{keyword:"eth",message:`Eth data type "${n}" is not valid`,params:{eth:n},instancePath:"",schemaPath:""}]);if(r){if(r==="tuple")throw new Error('"tuple" type is not implemented directly.');return{format:`${r}${i??""}`,required:!0}}return n?{format:n,required:!0}:{}},Am=(n,e="/0")=>{const t={type:"array",items:[],maxItems:n.length,minItems:n.length};for(const[r,i]of n.entries()){let s,o,a=[];tR(i)?(s=i.type,o=i.name||`${e}/${r}`,a=i.components):typeof i=="string"?(s=i,o=`${e}/${r}`):Array.isArray(i)&&(i[0]&&typeof i[0]=="string"&&i[0].startsWith("tuple")&&!Array.isArray(i[0])&&i[1]&&Array.isArray(i[1])?(s=i[0],o=`${e}/${r}`,a=i[1]):(s="tuple",o=`${e}/${r}`,a=i));const{baseType:l,isArray:c,arraySizes:u}=tc(s);let d,f=t;for(let p=u.length-1;p>0;p-=1)d={type:"array",$id:o,items:[],maxItems:u[p],minItems:u[p]},u[p]<0&&(delete d.maxItems,delete d.minItems),Array.isArray(f.items)?f.items.length===0?f.items=[d]:f.items.push(d):f.items=[f.items,d],f=d;if(l==="tuple"&&!c){const p=Am(a,o);p.$id=o,f.items.push(p)}else if(l==="tuple"&&c){const p=u[0],m=Object.assign({type:"array",$id:o,items:Am(a,o)},p>=0&&{minItems:p,maxItems:p});f.items.push(m)}else if(c){const p=u[0],m=Object.assign({type:"array",$id:o,items:ev(s)},p>=0&&{minItems:p,maxItems:p});f.items.push(m)}else Array.isArray(f.items)?f.items.push(Object.assign({$id:o},ev(s))):f.items.push(Object.assign({$id:o},ev(s)));f=t}return t},nx=n=>Am(n),rx=(n,e)=>e===1?n:rx(n[0],e-1),qd=(n,e,t)=>{const r=[];for(const[i,s]of n.entries()){let o,a,l=[];tR(s)?(o=s.type,a=s.name,l=s.components):typeof s=="string"?o=s:Array.isArray(s)&&(s[1]&&Array.isArray(s[1])?(o=s[0],l=s[1]):(o="tuple",l=s));const{baseType:c,isArray:u,arraySizes:d}=tc(o),f=Array.isArray(e)?e[i]:e[a];if(c==="tuple"&&!u)r.push(qd(l,f,t));else if(c==="tuple"&&u){const p=[];for(const m of f)if(d.length>1){const g=rx(m,d.length-1),y=[];for(const h of g)y.push(qd(l,h,t));p.push(y)}else p.push(qd(l,m,t));r.push(p)}else r.push(f)}return t=t??[],t.push(...r),t},rR=n=>{if(n>=48&&n<=57)return n-48;if(n>=65&&n<=70)return n-55;if(n>=97&&n<=102)return n-87;throw new Error(`Invalid code point: ${n}`)},T0=n=>{if(!rn(n))throw new Error("Invalid hex string");const[e,t]=n.startsWith("-")?[!0,n.slice(1)]:[!1,n],r=BigInt(t);return r>Number.MAX_SAFE_INTEGER?e?-r:r:r<Number.MIN_SAFE_INTEGER?r:e?-1*Number(r):Number(r)},M0=n=>{if((typeof n=="number"||typeof n=="bigint")&&n<0)return`-0x${n.toString(16).slice(1)}`;if((typeof n=="number"||typeof n=="bigint")&&n>=0)return`0x${n.toString(16)}`;if(typeof n=="string"&&rn(n)){const[e,t]=n.startsWith("-")?[!0,n.slice(1)]:[!1,n],r=t.split(/^(-)?0(x|X)/).slice(-1)[0];return`${e?"-":""}0x${r.replace(/^0+/,"").toLowerCase()}`}if(typeof n=="string"&&!rn(n))return M0(BigInt(n));throw new Vb(n)},Em=(n,e,t="0")=>{if(typeof n=="string"&&!rn(n))return n.padStart(e,t);const r=typeof n=="string"&&rn(n)?n:M0(n),[i,s]=r.startsWith("-")?["-0x",r.slice(3)]:["0x",r.slice(2)];return`${i}${s.padStart(e,t)}`};function Jo(n){let e="0x";for(const t of n){const r=t.toString(16);e+=r.length===1?`0${r}`:r}return e}const po={zero:48,nine:57,A:65,F:70,a:97,f:102};function j1(n){if(n>=po.zero&&n<=po.nine)return n-po.zero;if(n>=po.A&&n<=po.F)return n-(po.A-10);if(n>=po.a&&n<=po.f)return n-(po.a-10)}function nc(n){let e=0;if(n.startsWith("0")&&(n[1]==="x"||n[1]==="X")&&(e=2),n.length%2!==0)throw new Jc(`hex string has odd length: ${n}`);const t=(n.length-e)/2,r=new Uint8Array(t);for(let i=0,s=e;i<t;i+=1){const o=j1(n.charCodeAt(s++)),a=j1(n.charCodeAt(s++));if(o===void 0||a===void 0)throw new Jc(`Invalid byte sequence ("${n[s-2]}${n[s-1]}" in "${n}").`);r[i]=o*16+a}return r}function R0(n){var e;return!(n instanceof Uint8Array)&&((e=n==null?void 0:n.constructor)===null||e===void 0?void 0:e.name)==="Uint8Array"?Uint8Array.from(n):n}const iR=Object.freeze(Object.defineProperty({__proto__:null,abiSchemaToJsonSchema:Am,codePointToInt:rR,ensureIfUint8Array:R0,ethAbiToJsonSchema:nx,fetchArrayElement:rx,hexToNumber:T0,hexToUint8Array:nc,numberToHex:M0,padLeft:Em,parseBaseType:tc,transformJsonDataToAbiFormat:qd,uint8ArrayToHexString:Jo},Symbol.toStringTag,{value:"Module"})),f_=n=>{var e,t;return n instanceof Uint8Array||((e=n==null?void 0:n.constructor)===null||e===void 0?void 0:e.name)==="Uint8Array"||((t=n==null?void 0:n.constructor)===null||t===void 0?void 0:t.name)==="Buffer"},Ka=(n,e={abiType:"bytes"})=>{if(typeof n!="string"&&!Array.isArray(n)&&!f_(n)||typeof n=="string"&&rn(n)&&n.startsWith("-")||typeof n=="string"&&!rn(n))return!1;let t;if(typeof n=="string"){if(n.length%2!==0)return!1;t=nc(n)}else if(Array.isArray(n)){if(n.some(r=>r<0||r>255||!Number.isInteger(r)))return!1;t=new Uint8Array(n)}else t=n;if(e!=null&&e.abiType){const{baseTypeSize:r}=tc(e.abiType);return r?t.length===r:!0}return e!=null&&e.size?t.length===(e==null?void 0:e.size):!0},sR=n=>{if(!/^(0x)?[0-9a-f]{40}$/i.test(n))return!1;const e=n.slice(2),t=Au(e.toLowerCase()),r=Jo(kr(R0(t))).slice(2);for(let i=0;i<40;i+=1)if(parseInt(r[i],16)>7&&e[i].toUpperCase()!==e[i]||parseInt(r[i],16)<=7&&e[i].toLowerCase()!==e[i])return!1;return!0},_i=(n,e=!0)=>{if(typeof n!="string"&&!f_(n))return!1;let t;return f_(n)?t=Jo(n):typeof n=="string"&&!rn(n)?t=n.toLowerCase().startsWith("0x")?n:`0x${n}`:t=n,/^(0x)?[0-9a-f]{40}$/i.test(t)?/^(0x|0X)?[0-9a-f]{40}$/.test(t)||/^(0x|0X)?[0-9A-F]{40}$/.test(t)?!0:e?sR(t):!0:!1},zl=(n,e)=>{if(e===BigInt(0))return BigInt(1);let t=n;for(let r=1;r<e;r+=1)t*=n;return t},Wo=(n,e={abiType:"uint"})=>{if(!["number","string","bigint"].includes(typeof n)||typeof n=="string"&&n.length===0)return!1;let t;if(e!=null&&e.abiType){const{baseTypeSize:i}=tc(e.abiType);i&&(t=i)}else e.bitSize&&(t=e.bitSize);const r=zl(BigInt(2),BigInt(t??256))-BigInt(1);try{const i=typeof n=="string"&&rn(n)?BigInt(T0(n)):BigInt(n);return i>=0&&i<=r}catch{return!1}},Ef=(n,e={abiType:"int"})=>{if(!["number","string","bigint"].includes(typeof n)||typeof n=="number"&&n>Number.MAX_SAFE_INTEGER)return!1;let t;if(e!=null&&e.abiType){const{baseTypeSize:s,baseType:o}=tc(e.abiType);if(o!=="int")return!1;s&&(t=s)}else e.bitSize&&(t=e.bitSize);const r=zl(BigInt(2),BigInt((t??256)-1)),i=BigInt(-1)*zl(BigInt(2),BigInt((t??256)-1));try{const s=typeof n=="string"&&rn(n)?BigInt(T0(n)):BigInt(n);return s>=i&&s<=r}catch{return!1}},oR=n=>!!(Ef(n)||typeof n=="string"&&/[0-9.]/.test(n)&&n.indexOf(".")===n.lastIndexOf(".")||typeof n=="number"),aR=n=>Wo(n),lr=n=>Object.values(Ro).includes(n),h_=n=>lr(n)||aR(n),td=n=>typeof n!="string"||!/^(0x)?[0-9a-f]{512}$/i.test(n)?!1:!!(/^(0x)?[0-9a-f]{512}$/.test(n)||/^(0x)?[0-9A-F]{512}$/.test(n)),I0=(n,e)=>{if(typeof e=="string"&&!rn(e)||!td(n))return!1;const t=typeof e=="string"?nc(e):e,r=Jo(kr(t)).slice(2);for(let i=0;i<12;i+=4){const s=(parseInt(r.slice(i,i+2),16)<<8)+parseInt(r.slice(i+2,i+4),16)&2047,o=rR(n.charCodeAt(n.length-1-Math.floor(s/4))),a=1<<s%4;if((o&a)!==a)return!1}return!0},mq=(n,e)=>{if(!td(n)||!_i(e))return!1;const t=Em(e,64);return I0(n,t)},gq=(n,e)=>!td(n)||!_i(e)?!1:I0(n,e),vq=n=>["number","string","boolean"].includes(typeof n)?typeof n=="boolean"?!0:typeof n=="string"&&!rn(n)?n==="1"||n==="0":typeof n=="string"&&rn(n)?n==="0x1"||n==="0x0":n===1||n===0:!1,ue=n=>n==null,Iu=n=>typeof n=="object"&&!ue(n)&&!Array.isArray(n)&&!(n instanceof zb),Sm=n=>typeof n!="string"||!/^(0x)?[0-9a-f]{64}$/i.test(n)?!1:!!(/^(0x)?[0-9a-f]{64}$/.test(n)||/^(0x)?[0-9A-F]{64}$/.test(n)),yq=(n,e)=>!td(n)||!Sm(e)?!1:I0(n,e),_q=n=>{const e=["fromBlock","toBlock","address","topics","blockHash"];if(ue(n)||typeof n!="object"||!Object.keys(n).every(t=>e.includes(t))||!ue(n.fromBlock)&&!h_(n.fromBlock)||!ue(n.toBlock)&&!h_(n.toBlock))return!1;if(!ue(n.address)){if(Array.isArray(n.address)){if(!n.address.every(t=>_i(t)))return!1}else if(!_i(n.address))return!1}return!(!ue(n.topics)&&!n.topics.every(t=>ue(t)?!0:Array.isArray(t)?t.every(r=>Sm(r)):!!Sm(t)))},Gl={address:n=>_i(n),bloom:n=>td(n),blockNumber:n=>aR(n),blockTag:n=>lr(n),blockNumberOrTag:n=>h_(n),bool:n=>vq(n),bytes:n=>Ka(n),filter:n=>_q(n),hex:n=>rn(n),uint:n=>Wo(n),int:n=>Ef(n),number:n=>oR(n),string:n=>Jb(n)};for(let n=8;n<=256;n+=8)Gl[`int${n}`]=e=>Ef(e,{bitSize:n}),Gl[`uint${n}`]=e=>Wo(e,{bitSize:n});for(let n=1;n<=32;n+=1)Gl[`bytes${n}`]=e=>Ka(e,{size:n});Gl.bytes256=Gl.bytes;const Dd=n=>{if((!(n!=null&&n.type)||(n==null?void 0:n.type)==="object")&&(n!=null&&n.properties)){const e={};for(const t of Object.keys(n.properties)){const r=Dd(n.properties[t]);r&&(e[t]=r)}return Array.isArray(n.required)?Ss.object(e).partial().required(n.required.reduce((t,r)=>Object.assign(Object.assign({},t),{[r]:!0}),{})):Ss.object(e).partial()}if((n==null?void 0:n.type)==="array"&&(n!=null&&n.items)){if(Array.isArray(n.items)&&n.items.length>1&&n.maxItems!==void 0&&new Set(n.items.map(r=>r.$id)).size===n.items.length){const r=[];for(const i of n.items){const s=Dd(i);s&&r.push(s)}return Ss.tuple(r)}const e=Array.isArray(n.items)?n.items[0]:n.items;let t=Ss.array(Dd(e));return t=n.minItems!==void 0?t.min(n.minItems):t,t=n.maxItems!==void 0?t.max(n.maxItems):t,t}if(n.oneOf&&Array.isArray(n.oneOf))return Ss.union(n.oneOf.map(e=>Dd(e)));if(n!=null&&n.format){if(!Gl[n.format])throw new Sj(n.format);return Ss.any().refine(Gl[n.format],e=>({params:{value:e,format:n.format}}))}return n!=null&&n.type&&(n==null?void 0:n.type)!=="object"&&typeof Ss[String(n.type)]=="function"?Ss[String(n.type)]():Ss.object({data:Ss.any()}).partial()};class $c{static factory(){return $c.validatorInstance||($c.validatorInstance=new $c),$c.validatorInstance}validate(e,t,r){var i,s;const a=Dd(e).safeParse(t);if(!a.success){const l=this.convertErrors((s=(i=a.error)===null||i===void 0?void 0:i.issues)!==null&&s!==void 0?s:[]);if(l){if(r!=null&&r.silent)return l;throw new Ru(l)}}}convertErrors(e){if(e&&Array.isArray(e)&&e.length>0)return e.map(t=>{var r;let i,s,o,a;a=t.path.join("/");const l=String(t.path[t.path.length-1]),c=t.path.join("/");if(t.code===be.too_big)s="maxItems",a=`${c}/maxItems`,o={limit:t.maximum},i=`must NOT have more than ${t.maximum} items`;else if(t.code===be.too_small)s="minItems",a=`${c}/minItems`,o={limit:t.minimum},i=`must NOT have fewer than ${t.minimum} items`;else if(t.code===be.custom){const{value:u,format:d}=(r=t.params)!==null&&r!==void 0?r:{};typeof u>"u"?i=`value at "/${a}" is required`:i=`value "${typeof u=="object"?JSON.stringify(u):u}" at "/${a}" must pass "${d}" validation`,o={value:u}}return{keyword:s??l,instancePath:c?`/${c}`:"",schemaPath:a?`#${a}`:"#",params:o??{value:t.message},message:i??t.message}})}}class bq{constructor(){this._validator=$c.factory()}validateJSONSchema(e,t,r){return this._validator.validate(e,t,r)}validate(e,t,r={silent:!1}){var i,s;const o=nx(e);if(!(Array.isArray(o.items)&&((i=o.items)===null||i===void 0?void 0:i.length)===0&&t.length===0)){if(Array.isArray(o.items)&&((s=o.items)===null||s===void 0?void 0:s.length)===0&&t.length!==0)throw new Ru([{instancePath:"/0",schemaPath:"/",keyword:"required",message:"empty schema against data can not be validated",params:t}]);return this._validator.validate(o,t,r)}}}const at=new bq;function Ya(n){var e,t;return n instanceof Uint8Array||((e=n==null?void 0:n.constructor)===null||e===void 0?void 0:e.name)==="Uint8Array"||((t=n==null?void 0:n.constructor)===null||t===void 0?void 0:t.name)==="Buffer"}function Ur(...n){const e=n.reduce((i,s)=>i+s.length,0),t=new Uint8Array(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return t}function C0(n,e){if(n===e)return!0;if(n.byteLength!==e.byteLength)return!1;for(let t=0;t<n.byteLength;t+=1)if(n[t]!==e[t])return!1;return!0}const P0={noether:BigInt(0),wei:BigInt(1),kwei:BigInt(1e3),Kwei:BigInt(1e3),babbage:BigInt(1e3),femtoether:BigInt(1e3),mwei:BigInt(1e6),Mwei:BigInt(1e6),lovelace:BigInt(1e6),picoether:BigInt(1e6),gwei:BigInt(1e9),Gwei:BigInt(1e9),shannon:BigInt(1e9),nanoether:BigInt(1e9),nano:BigInt(1e9),szabo:BigInt(1e12),microether:BigInt(1e12),micro:BigInt(1e12),finney:BigInt(1e15),milliether:BigInt(1e15),milli:BigInt(1e15),ether:BigInt("1000000000000000000"),kether:BigInt("1000000000000000000000"),grand:BigInt("1000000000000000000000"),mether:BigInt("1000000000000000000000000"),gether:BigInt("1000000000000000000000000000"),tether:BigInt("1000000000000000000000000000000")};const Zs=n=>{if(at.validate(["bytes"],[n]),Ya(n))return n;if(Array.isArray(n))return new Uint8Array(n);if(typeof n=="string")return nc(n);throw new Jc(n)},{uint8ArrayToHexString:xq}=iR,Ot=n=>xq(Zs(n)),An=n=>typeof n=="string"&&n.slice(0,2).toLowerCase()!=="0x"?Zs(`0x${n}`):Zs(n),nh=n=>(at.validate(["hex"],[n]),T0(n)),wq=nh,Yn=(n,e)=>{typeof n!="bigint"&&at.validate(["int"],[n]);let t=M0(n);return e&&(!t.startsWith("-")&&t.length%2===1?t="0x0".concat(t.slice(2)):t.length%2===0&&t.startsWith("-")&&(t="-0x0".concat(t.slice(3)))),t},Aq=Yn,Eq=n=>nh(n).toString(),fs=n=>{at.validate(["string"],[n]);let e=n.replace(/^(?:\u0000)/,"");return e=e.replace(/(?:\u0000)$/,""),Ot(new TextEncoder().encode(e))},lR=fs,Sq=fs,N0=n=>$M(An(n)),Tq=n=>typeof n=="string"?N0(n):(at.validate(["bytes"],[n]),$M(n)),ix=Au,Mq=N0,cR=n=>{at.validate(["string"],[n]);let e="";for(let t=0;t<n.length;t+=1){const r=n.charCodeAt(t).toString(16);e+=r.length%2!==0?`0${r}`:r}return`0x${e}`},Rq=cR,uR=n=>new TextDecoder("ascii").decode(An(n)),Iq=uR,qo=(n,e)=>{if(typeof n=="string"&&_i(n))return e?"address":`0x${n.toLowerCase().replace(/^0x/i,"")}`;if(typeof n=="boolean")return e?"bool":n?"0x01":"0x00";if(typeof n=="number")return e?n<0?"int256":"uint256":Yn(n);if(typeof n=="bigint")return e?"bigint":Yn(n);if(Ya(n))return e?"bytes":Ot(n);if(typeof n=="object"&&n)return e?"string":fs(JSON.stringify(n));if(typeof n=="string"){if(n.startsWith("-0x")||n.startsWith("-0X"))return e?"int256":Yn(n);if(rn(n))return e?"bytes":n;if(wm(n)&&!Ef(n)&&!Wo(n))return e?"bytes":`0x${n}`;if(wm(n)&&!Ef(n)&&Wo(n))return e?"uint":Yn(n);if(!Number.isFinite(n))return e?"string":fs(n)}throw new lj(n)},Yr=n=>{if(typeof n=="number")return n>1e20?BigInt(n):n;if(typeof n=="bigint")return n>=Number.MIN_SAFE_INTEGER&&n<=Number.MAX_SAFE_INTEGER?Number(n):n;if(typeof n=="string"&&rn(n))return nh(n);try{return Yr(BigInt(n))}catch{throw new Vb(n)}},_l=n=>{if(typeof n=="number")return BigInt(n);if(typeof n=="bigint")return n;if(typeof n=="string"&&wm(n))return n.startsWith("-")?-BigInt(n.substring(1)):BigInt(n);throw new Vb(n)},Cq=(n,e)=>{let t;if(typeof e=="string"){if(t=P0[e],!t)throw new IM(e)}else{if(e<0||!Number.isInteger(e))throw new CM(e);t=zl(BigInt(10),BigInt(e))}const r=String(Yr(n)),i=t.toString().length-1;if(i<=0)return r.toString();const s=r.padStart(i,"0"),o=s.slice(0,-i),a=s.slice(-i).replace(/\.?0+$/,"");return o===""?a?`0.${a}`:"0":a===""?o:`${o}.${a}`.slice(0,o.length+i+1)},Pq=(n,e)=>{at.validate(["number"],[n]);let t;if(typeof e=="string"){if(t=P0[e],!t)throw new IM(e)}else{if(e<0||!Number.isInteger(e))throw new CM(e);t=zl(BigInt(10),BigInt(e))}let r=n;typeof r=="number"&&(r<1e-15,r>1e20?r=BigInt(r):r=r.toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}));const[i,s]=String(typeof r=="string"&&!rn(r)?r:Yr(r)).split(".").concat(""),a=BigInt(`${i}${s}`)*t,l=s.length;return l===0?a.toString():a.toString().slice(0,-l)},io=n=>{if(!_i(n,!1))throw new $b(n);const e=n.toLowerCase().replace(/^0x/i,""),t=Jo(kr(R0(ix(e))));if(ue(t)||t==="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470")return"";let r="0x";const i=t.replace(/^0x/i,"");for(let s=0;s<e.length;s+=1)parseInt(i[s],16)>7?r+=e[s].toUpperCase():r+=e[s];return r},dR=n=>{if(typeof n=="boolean")return n;if(typeof n=="number"&&(n===0||n===1)||typeof n=="bigint"&&(n===BigInt(0)||n===BigInt(1)))return!!n;if(typeof n=="string"&&!rn(n)&&(n==="1"||n==="0"||n==="false"||n==="true"))return n==="true"?!0:n==="false"?!1:!!Number(n);if(typeof n=="string"&&rn(n)&&(n==="0x1"||n==="0x0"))return!!Yr(n);throw new jb(n)};class sx extends yT{constructor(){super(...arguments),this.maxListeners=Number.MAX_SAFE_INTEGER}setMaxListeners(e){return this.maxListeners=e,this}getMaxListeners(){return this.maxListeners}}const Nq=rn,kq=wm,Bq=sR,Lq=_i,Dq=td,Oq=I0,Fq=mq,Uq=gq,Hq=Sm,zq=yq,Gq=(n,e)=>{const t=typeof n=="string"&&lr(n),r=typeof e=="string"&&lr(e);if(n===e||(n==="earliest"||n===0)&&(e==="earliest"||e===0))return 0;if(n==="earliest")return-1;if(e==="earliest")return 1;if(t&&r){const o={[Ro.EARLIEST]:1,[Ro.FINALIZED]:2,[Ro.SAFE]:3,[Ro.LATEST]:4,[Ro.PENDING]:5};return o[n]<o[e]?-1:1}if(t&&!r||!t&&r)throw new uj("Cannot compare blocktag with provided non-blocktag input.");const i=BigInt(n),s=BigInt(e);return i<s?-1:i===s?0:1},Ma=n=>typeof n=="object"&&!ue(n)&&Object.keys(n).length!==0&&["input","data","from","gas","gasPrice","gasLimit","address","jsonInterface","syncWithContext","dataInputFill"].some(e=>e in n),dt=ue,W1=n=>typeof n=="object"&&!ue(n)&&!Array.isArray(n)&&!(n instanceof zb),Qa=(n,...e)=>{if(!W1(n))return n;const t=Object.assign({},n);for(const r of e)for(const i in r)W1(r[i])?(t[i]||(t[i]={}),t[i]=Qa(t[i],r[i])):!ue(r[i])&&Object.hasOwnProperty.call(r,i)&&(Array.isArray(r[i])||r[i]instanceof zb?t[i]=r[i].slice(0):t[i]=r[i]);return t},Cu=(n,e,t="0")=>typeof n=="string"?rn(n)?Em(n,e,t):n.padStart(e,t):(at.validate(["int"],[n]),Em(n,e,t)),fR=(n,e,t="0")=>{if(typeof n=="string"&&!rn(n))return n.padEnd(e,t);const r=typeof n=="string"&&rn(n)?n:Yn(n),i=r.startsWith("-")?3:2;return at.validate([r.startsWith("-")?"int":"uint"],[n]),r.padEnd(e+i,t)},hR=fR,Sf=Cu,pR=(n,e=64)=>{at.validate(["int"],[n]);const t=Yr(n);if(t>=0)return Cu(qo(t),e);const r=zl(BigInt(2),BigInt(e*4));if(-t>=r)throw new PM(`value: ${n}, nibbleWidth: ${e}`);const s=BigInt(t)+r;return Cu(Yn(s),e)},Vq=(n,e=64)=>{at.validate(["int"],[n]);const t=Yr(n);if(t<0)return t;const r=Math.ceil(Math.log(Number(t))/Math.log(2));if(r>e*4)throw new PM(`value: "${n}", nibbleWidth: "${e}"`);if(e*4!==r)return t;const i=zl(BigInt(2),BigInt(e)*BigInt(4));return Yr(BigInt(t)-i)},{parseBaseType:$q}=iR,So=n=>typeof n=="object"&&!ue(n)&&"number"in n&&"bytes"in n,jq=(n,e,t=[])=>{let r=Object.assign({},n),i;for(const s of e){if(r.oneOf&&i){const o=i,a=t.find(([l])=>l===o);a&&a[0]===i&&(r=r.oneOf[a[1]])}if(!r.properties&&!r.items)return;r.properties?r=r.properties[s]:r.items&&r.items.properties?r=r.items.properties[s]:r.items&&Iu(r.items)?r=r.items:r.items&&Array.isArray(r.items)&&(r=r.items[parseInt(s,10)]),r&&s&&(i=s)}return r},Tf=(n,e,t)=>{try{const{baseType:r,baseTypeSize:i}=$q(e);if(r==="int"||r==="uint")switch(t.number){case Bi.NUMBER:return Number(_l(n));case Bi.HEX:return Yn(_l(n));case Bi.STR:return _l(n).toString();case Bi.BIGINT:return _l(n);default:throw new i_(`Invalid format: ${String(t.number)}`)}if(r==="bytes"){let s;switch(i?typeof n=="string"?s=Cu(n,i*2):Ya(n)&&(s=Ur(new Uint8Array(i-n.length),n)):s=n,t.bytes){case $o.HEX:return Ot(Zs(s));case $o.UINT8ARRAY:return Zs(s);default:throw new i_(`Invalid format: ${String(t.bytes)}`)}}if(r==="string")return String(n)}catch{return n}return n},q1=({value:n,schemaProp:e,schema:t,object:r,key:i,dataPath:s,format:o,oneOfPath:a=[]})=>{var l,c;if(Array.isArray(n)){let u=e;if((e==null?void 0:e.oneOf)!==void 0&&e.oneOf.forEach((d,f)=>{var p,m;!Array.isArray(e==null?void 0:e.items)&&(typeof n[0]=="object"&&((p=d==null?void 0:d.items)===null||p===void 0?void 0:p.type)==="object"||typeof n[0]=="string"&&((m=d==null?void 0:d.items)===null||m===void 0?void 0:m.type)!=="object")&&(u=d,a.push([i,f]))}),ue(u==null?void 0:u.items))return delete r[i],s.pop(),!0;if(Iu(u.items)&&!ue(u.items.format)){for(let d=0;d<n.length;d+=1)r[i][d]=Tf(n[d],(l=u==null?void 0:u.items)===null||l===void 0?void 0:l.format,o);return s.pop(),!0}if(!Array.isArray(u==null?void 0:u.items)&&((c=u==null?void 0:u.items)===null||c===void 0?void 0:c.type)==="object"){for(const d of n)k0(d,t,s,o,a);return s.pop(),!0}if(Array.isArray(u==null?void 0:u.items)){for(let d=0;d<n.length;d+=1)r[i][d]=Tf(n[d],u.items[d].format,o);return s.pop(),!0}}return!1},k0=(n,e,t,r,i=[])=>{var s;if(!Iu(n)&&!Array.isArray(n))return Tf(n,e==null?void 0:e.format,r);const o=n;if(Array.isArray(o)&&(e==null?void 0:e.type)==="array"&&((s=e==null?void 0:e.items)===null||s===void 0?void 0:s.type)==="object")q1({value:o,schemaProp:e,schema:e,object:o,key:"",dataPath:t,format:r,oneOfPath:i});else for(const[a,l]of Object.entries(o)){t.push(a);let c=jq(e,t,i);if(ue(c)){delete o[a],t.pop();continue}if(Iu(l)){k0(l,e,t,r,i),t.pop();continue}if(!q1({value:l,schemaProp:c,schema:e,object:o,key:a,dataPath:t,format:r,oneOfPath:i})){if((c==null?void 0:c.format)===void 0&&(c==null?void 0:c.oneOf)!==void 0){for(const[u,d]of c.oneOf.entries())if((d==null?void 0:d.format)!==void 0){c=d;break}}o[a]=Tf(l,c.format,r),t.pop()}}return o},_e=(n,e,t=Lr)=>{let r;Iu(e)?r=Qa({},e):Array.isArray(e)?r=[...e]:r=e;const i=Iu(n)?n:nx(n);if(!i.properties&&!i.items&&!i.format)throw new i_("Invalid json schema for formatting");return k0(r,i,[],t)},mR="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",Pu=n=>{let e;return typeof n=="bigint"||typeof n=="number"?e=Au(n.toString()):Array.isArray(n)?e=new Uint8Array(n):typeof n=="string"&&!rn(n)?e=Au(n):e=Zs(n),Ot(kr(R0(e)))},rh=n=>{let e;typeof n=="string"?n.startsWith("0x")&&rn(n)?e=An(n):e=Au(n):e=n;const t=Pu(e);return t===mR?void 0:t},bi=n=>{const e=rh(n);return ue(e)?mR:e},Wq=n=>{if(Array.isArray(n))throw new Error("Autodetection of array types is not supported.");let e,t;if(typeof n=="object"&&("t"in n||"type"in n)&&("v"in n||"value"in n))e="t"in n?n.t:n.type,t="v"in n?n.v:n.value,e=e.toLowerCase()==="bigint"?"int":e;else{if(typeof n=="bigint")return["int",n];e=qo(n,!0),t=qo(n),!e.startsWith("int")&&!e.startsWith("uint")&&(e="bytes")}return(e.startsWith("int")||e.startsWith("uint"))&&typeof t=="string"&&!/^(-)?0x/i.test(t)&&(t=_l(t)),[e,t]},qq=n=>n.startsWith("int[")?`int256${n.slice(3)}`:n==="int"?"int256":n.startsWith("uint[")?`uint256'${n.slice(4)}`:n==="uint"?"uint256":n,tv=(n,e)=>{const t=/^(\d+).*$/.exec(n.slice(e));return t?parseInt(t[1],10):0},X1=n=>n.toString(2).length,K1=(n,e)=>{const t=e.toString();if(n==="string"){if(typeof e=="string")return fs(e);throw new aj(e)}if(n==="bool"||n==="boolean"){if(typeof e=="boolean")return e?"01":"00";throw new jb(e)}if(n==="address"){if(!_i(t))throw new $b(t);return t}const r=qq(n);if(n.startsWith("uint")){const i=tv(r,4);if(i%8||i<8||i>256)throw new L1(t);const s=Yr(t);if(X1(s)>i)throw new D1(t);if(s<BigInt(0))throw new cj(t);return i?Sf(s.toString(16),i/8*2):s.toString(16)}if(n.startsWith("int")){const i=tv(r,3);if(i%8||i<8||i>256)throw new L1(n);const s=Yr(t);if(X1(s)>i)throw new D1(t);return s<BigInt(0)?pR(s.toString(),i/8*2):i?Sf(s.toString(16),i/4):s.toString(16)}if(r==="bytes"){if(t.replace(/^0x/i,"").length%2!==0)throw new Jc(t);return t}if(n.startsWith("bytes")){if(t.replace(/^0x/i,"").length%2!==0)throw new Jc(t);const i=tv(n,5);if(!i||i<1||i>64||i<t.replace(/^0x/i,"").length/2)throw new Jc(t);return hR(t,i*2)}return""},gR=n=>{const[e,t]=Wq(n);return Array.isArray(t)?t.map(s=>K1(e,s).replace("0x","")).join(""):K1(e,t).replace("0x","")},ox=(...n)=>`0x${n.map(gR).join("").toLowerCase()}`,Xq=(...n)=>rh(ox(...n)),Kq=(...n)=>bi(ox(...n)),Yq=n=>rh(`0x${(typeof n=="number"?n.toString():n).padStart(64,"0")}`);function Qq(n){return HM(n)}const Mf=n=>Qq(n),Zq=n=>Ot(Mf(n));var B0=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};function vR(n){return(typeof n=="object"||typeof n=="function")&&typeof n.then=="function"}function yR(n,e,t){return B0(this,void 0,void 0,function*(){let r;const i=yield Promise.race([n instanceof Promise?n:n(),new Promise((s,o)=>{r=setTimeout(()=>t?o(t):s(void 0),e)})]);if(r&&clearTimeout(r),i instanceof Error)throw i;return i})}function ax(n,e){let t;return[new Promise((i,s)=>{t=setInterval(function o(){return B0(this,void 0,void 0,function*(){try{const a=yield yR(n,e);ue(a)||(clearInterval(t),i(a))}catch(a){clearInterval(t),s(a)}}),o}(),e)}),t]}function Jq(n,e){return B0(this,void 0,void 0,function*(){return ax(n,e)[0]})}function lx(n,e){let t;const r=new Promise((i,s)=>{t=setTimeout(()=>{s(e)},n)});return[t,r]}function _R(n,e){let t;const r=new Promise((i,s)=>{t=setInterval(()=>{B0(this,void 0,void 0,function*(){const o=yield n();o&&(clearInterval(t),s(o))})},e)});return[t,r]}const cx=()=>{const n=Mf(16);n[6]=n[6]&15|64,n[8]=n[8]&63|128;const e=Ot(n);return[e.substring(2,10),e.substring(10,14),e.substring(14,18),e.substring(18,22),e.substring(22,34)].join("-")},ux=n=>{const e=n.error.code;return Or.has(e)||e>=-32099&&e<=-32e3},Na=n=>!Array.isArray(n)&&!!n&&n.jsonrpc==="2.0"&&"result"in n&&ue(n.error)&&(typeof n.id=="number"||typeof n.id=="string"),ka=n=>!Array.isArray(n)&&n.jsonrpc==="2.0"&&!!n&&ue(n.result)&&"error"in n&&(typeof n.id=="number"||typeof n.id=="string"),L0=n=>!Array.isArray(n)&&!!n&&n.jsonrpc==="2.0"&&!ue(n.params)&&!ue(n.method),bR=n=>!Array.isArray(n)&&!!n&&n.jsonrpc==="2.0"&&"id"in n&&"result"in n,Tm=n=>Na(n)||ka(n),dx=n=>Array.isArray(n)?n.every(Tm):Tm(n),Rf=n=>Array.isArray(n)&&n.length>0&&dx(n);let wp;const xR=n=>{wp=n},Vl=n=>{var e,t,r,i;return typeof wp<"u"&&(wp+=1),{jsonrpc:(e=n.jsonrpc)!==null&&e!==void 0?e:"2.0",id:(r=(t=n.id)!==null&&t!==void 0?t:wp)!==null&&r!==void 0?r:cx(),method:n.method,params:(i=n.params)!==null&&i!==void 0?i:void 0}},fx=n=>n.map(e=>Vl(e)),Rs=n=>Array.isArray(n)&&n.length>0,eX=Object.freeze(Object.defineProperty({__proto__:null,isBatchRequest:Rs,isBatchResponse:Rf,isResponseRpcError:ux,isResponseWithError:ka,isResponseWithNotification:L0,isResponseWithResult:Na,isSubscriptionResult:bR,isValidResponse:dx,setRequestIdStart:xR,toBatchPayload:fx,toPayload:Vl,validateResponse:Tm},Symbol.toStringTag,{value:"Module"}));var nv=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},wR;class Mm{constructor({timeout:e,eagerStart:t,timeoutMessage:r}={timeout:0,eagerStart:!1,timeoutMessage:"DeferredPromise timed out"}){this[wR]="Promise",this._state="pending",this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s}),this._timeoutMessage=r,this._timeoutInterval=e,t&&this.startTimer()}get state(){return this._state}then(e,t){return nv(this,void 0,void 0,function*(){return this._promise.then(e,t)})}catch(e){return nv(this,void 0,void 0,function*(){return this._promise.catch(e)})}finally(e){return nv(this,void 0,void 0,function*(){return this._promise.finally(e)})}resolve(e){this._resolve(e),this._state="fulfilled",this._clearTimeout()}reject(e){this._reject(e),this._state="rejected",this._clearTimeout()}startTimer(){this._timeoutInterval&&this._timeoutInterval>0&&(this._timeoutId=setTimeout(this._checkTimeout.bind(this),this._timeoutInterval))}_checkTimeout(){this._state==="pending"&&this._timeoutId&&this.reject(new xM(this._timeoutMessage))}_clearTimeout(){this._timeoutId&&clearTimeout(this._timeoutId)}}wR=Symbol.toStringTag;class AR{constructor(e,t){this.eventEmitter=e,this.autoReconnect=t,this.chunkTimeout=1e3*15}clearQueues(){typeof this._clearQueues=="function"&&this._clearQueues()}onError(e){this._clearQueues=e}parseResponse(e){const t=[];return e.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach(i=>{let s=i;this.lastChunk&&(s=this.lastChunk+s);let o;try{o=JSON.parse(s)}catch{this.lastChunk=s,this.lastChunkTimeout&&clearTimeout(this.lastChunkTimeout),this.lastChunkTimeout=setTimeout(()=>{this.autoReconnect||(this.clearQueues(),this.eventEmitter.emit("error",new E0({id:1,jsonrpc:"2.0",error:{code:2,message:"Chunk timeout"}})))},this.chunkTimeout);return}clearTimeout(this.lastChunkTimeout),this.lastChunk=void 0,o&&t.push(o)}),t}}var Y1=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class hx extends Jf{constructor(){super(...arguments),this._eventEmitter=new yT,this._chainId="",this._accounts=[]}_getChainId(){return Y1(this,void 0,void 0,function*(){var e;const t=yield this.request(Vl({method:"eth_chainId",params:[]}));return(e=t==null?void 0:t.result)!==null&&e!==void 0?e:""})}_getAccounts(){return Y1(this,void 0,void 0,function*(){var e;const t=yield this.request(Vl({method:"eth_accounts",params:[]}));return(e=t==null?void 0:t.result)!==null&&e!==void 0?e:[]})}_onConnect(){Promise.all([this._getChainId().then(e=>{e!==this._chainId&&(this._chainId=e,this._eventEmitter.emit("chainChanged",this._chainId))}).catch(e=>{}),this._getAccounts().then(e=>{this._accounts.length===e.length&&e.every(t=>e.includes(t))||(this._accounts=e,this._onAccountsChanged())}).catch(e=>{})]).then(()=>this._eventEmitter.emit("connect",{chainId:this._chainId})).catch(e=>{})}_onDisconnect(e,t){this._eventEmitter.emit("disconnect",new fj(e,t))}_onAccountsChanged(){this._eventEmitter.emit("accountsChanged",this._accounts)}}var rv=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const tX={autoReconnect:!0,delay:5e3,maxAttempts:5},nX=1e3;class ER extends hx{get SocketConnection(){return this._socketConnection}constructor(e,t,r){if(super(),this._connectionStatus="connecting",this._onMessageHandler=this._onMessage.bind(this),this._onOpenHandler=this._onConnect.bind(this),this._onCloseHandler=this._onCloseEvent.bind(this),this._onErrorHandler=this._onError.bind(this),!this._validateProviderPath(e))throw new s_(e);this._socketPath=e,this._socketOptions=t,this._reconnectOptions=Object.assign(Object.assign({},tX),r??{}),this._pendingRequestsQueue=new Map,this._sentRequestsQueue=new Map,this._init(),this.connect(),this.chunkResponseParser=new AR(this._eventEmitter,this._reconnectOptions.autoReconnect),this.chunkResponseParser.onError(()=>{this._clearQueues()}),this.isReconnecting=!1}_init(){this._reconnectAttempts=0}connect(){try{this._openSocketConnection(),this._connectionStatus="connecting",this._addSocketListeners()}catch(e){if(this.isReconnecting)setImmediate(()=>{this._reconnect()});else throw this._connectionStatus="disconnected",e&&e.message?new eh(`Error while connecting to ${this._socketPath}. Reason: ${e.message}`):new s_(this._socketPath)}}_validateProviderPath(e){return!!e}getPendingRequestQueueSize(){return this._pendingRequestsQueue.size}getSentRequestsQueueSize(){return this._sentRequestsQueue.size}supportsSubscriptions(){return!0}on(e,t){this._eventEmitter.on(e,t)}once(e,t){this._eventEmitter.once(e,t)}removeListener(e,t){this._eventEmitter.removeListener(e,t)}_onDisconnect(e,t){this._connectionStatus="disconnected",super._onDisconnect(e,t)}disconnect(e,t){const r=e??nX;this._removeSocketListeners(),this.getStatus()!=="disconnected"&&this._closeSocketConnection(r,t),this._onDisconnect(r,t)}safeDisconnect(e,t){return rv(this,arguments,void 0,function*(r,i,s=!1,o=1e3){let a=0;yield(()=>rv(this,void 0,void 0,function*(){return new Promise(c=>{const u=setInterval(()=>{s&&a>=5&&this.clearQueues(),this.getPendingRequestQueueSize()===0&&this.getSentRequestsQueueSize()===0&&(clearInterval(u),c(!0)),a+=1},o)})}))(),this.disconnect(r,i)})}removeAllListeners(e){this._eventEmitter.removeAllListeners(e)}_onError(e){this.isReconnecting?this._reconnect():this._eventEmitter.emit("error",e)}reset(){this._sentRequestsQueue.clear(),this._pendingRequestsQueue.clear(),this._init(),this._removeSocketListeners(),this._addSocketListeners()}_reconnect(){this.isReconnecting||(this.isReconnecting=!0,this._sentRequestsQueue.size>0&&this._sentRequestsQueue.forEach((e,t)=>{e.deferredPromise.reject(new M$),this._sentRequestsQueue.delete(t)}),this._reconnectAttempts<this._reconnectOptions.maxAttempts?(this._reconnectAttempts+=1,setTimeout(()=>{this._removeSocketListeners(),this.connect(),this.isReconnecting=!1},this._reconnectOptions.delay)):(this.isReconnecting=!1,this._clearQueues(),this._removeSocketListeners(),this._eventEmitter.emit("error",new T$(this._reconnectOptions.maxAttempts))))}request(e){return rv(this,void 0,void 0,function*(){if(dt(this._socketConnection))throw new Error("Connection is undefined");this.getStatus()==="disconnected"&&this.connect();const t=Rs(e)?e[0].id:e.id;if(!t)throw new B$("Request Id not defined");if(this._sentRequestsQueue.has(t))throw new R$(t);const r=new Mm;r.catch(s=>{this._eventEmitter.emit("error",s)});const i={payload:e,deferredPromise:r};if(this.getStatus()==="connecting")return this._pendingRequestsQueue.set(t,i),i.deferredPromise;this._sentRequestsQueue.set(t,i);try{this._sendToSocket(i.payload)}catch(s){this._sentRequestsQueue.delete(t),this._eventEmitter.emit("error",s)}return r})}_onConnect(){this._connectionStatus="connected",this._reconnectAttempts=0,super._onConnect(),this._sendPendingRequests()}_sendPendingRequests(){for(const[e,t]of this._pendingRequestsQueue.entries())try{this._sendToSocket(t.payload),this._pendingRequestsQueue.delete(e),this._sentRequestsQueue.set(e,t)}catch(r){this._pendingRequestsQueue.delete(e),this._eventEmitter.emit("error",r)}}_onMessage(e){const t=this._parseResponses(e);if(!(dt(t)||t.length===0))for(const r of t){if(L0(r)&&r.method.endsWith("_subscription")){this._eventEmitter.emit("message",r);return}const i=Rf(r)?r[0].id:r.id,s=this._sentRequestsQueue.get(i);if(!s)return;(Rf(r)||Na(r)||ka(r))&&(this._eventEmitter.emit("message",r),s.deferredPromise.resolve(r)),this._sentRequestsQueue.delete(i)}}clearQueues(e){this._clearQueues(e)}_clearQueues(e){this._pendingRequestsQueue.size>0&&this._pendingRequestsQueue.forEach((t,r)=>{t.deferredPromise.reject(new r_(e)),this._pendingRequestsQueue.delete(r)}),this._sentRequestsQueue.size>0&&this._sentRequestsQueue.forEach((t,r)=>{t.deferredPromise.reject(new r_(e)),this._sentRequestsQueue.delete(r)}),this._removeSocketListeners()}}const SR=Object.freeze(Object.defineProperty({__proto__:null,ChunkResponseParser:AR,Eip1193Provider:hx,EventEmitter:sx,SocketProvider:ER,Web3DeferredPromise:Mm,asciiToHex:cR,bytesToHex:Ot,bytesToUint8Array:Zs,checkAddressCheckSum:Bq,compareBlockNumbers:Gq,convert:k0,convertScalarValue:Tf,encodePacked:ox,ethUnitMap:P0,format:_e,fromAscii:Rq,fromDecimal:Aq,fromTwosComplement:Vq,fromUtf8:lR,fromWei:Cq,getStorageSlotNumForLongString:Yq,hexToAscii:uR,hexToBytes:An,hexToNumber:nh,hexToNumberString:Eq,hexToString:Mq,hexToUtf8:N0,isAddress:Lq,isBatchRequest:Rs,isBatchResponse:Rf,isBloom:Dq,isContractAddressInBloom:Uq,isContractInitOptions:Ma,isDataFormat:So,isHex:kq,isHexStrict:Nq,isInBloom:Oq,isNullish:dt,isPromise:vR,isResponseRpcError:ux,isResponseWithError:ka,isResponseWithNotification:L0,isResponseWithResult:Na,isSubscriptionResult:bR,isTopic:Hq,isTopicInBloom:zq,isUint8Array:Ya,isUserEthereumAddressInBloom:Fq,isValidResponse:dx,jsonRpc:eX,keccak256:Pu,keccak256Wrapper:Pu,leftPad:Sf,mergeDeep:Qa,numberToHex:Yn,padLeft:Cu,padRight:fR,pollTillDefined:Jq,pollTillDefinedAndReturnIntervalId:ax,processSolidityEncodePackedArgs:gR,randomBytes:Mf,randomHex:Zq,rejectIfConditionAtInterval:_R,rejectIfTimeout:lx,rightPad:hR,setRequestIdStart:xR,sha3:rh,sha3Raw:bi,soliditySha3:Xq,soliditySha3Raw:Kq,stringToHex:Sq,toAscii:Iq,toBatchPayload:fx,toBigInt:_l,toBool:dR,toChecksumAddress:io,toDecimal:wq,toHex:qo,toNumber:Yr,toPayload:Vl,toTwosComplement:pR,toUtf8:Tq,toWei:Pq,uint8ArrayConcat:Ur,uint8ArrayEquals:C0,utf8ToBytes:ix,utf8ToHex:fs,uuidV4:cx,validateResponse:Tm,waitWithTimeout:yR},Symbol.toStringTag,{value:"Module"}));class D0{constructor(){this._emitter=new sx}on(e,t){this._emitter.on(e,t)}once(e,t){this._emitter.once(e,t)}off(e,t){this._emitter.off(e,t)}emit(e,t){this._emitter.emit(e,t)}listenerCount(e){return this._emitter.listenerCount(e)}listeners(e){return this._emitter.listeners(e)}eventNames(){return this._emitter.eventNames()}removeAllListeners(){return this._emitter.removeAllListeners()}setMaxListenerWarningThreshold(e){this._emitter.setMaxListeners(e)}getMaxListeners(){return this._emitter.getMaxListeners()}}var $l;(function(n){n.CONFIG_CHANGE="CONFIG_CHANGE"})($l||($l={}));class rX extends D0{constructor(e){super(),this.config={handleRevert:!1,defaultAccount:void 0,defaultBlock:"latest",transactionBlockTimeout:50,transactionConfirmationBlocks:24,transactionPollingInterval:1e3,transactionPollingTimeout:750*1e3,transactionReceiptPollingInterval:void 0,transactionSendTimeout:750*1e3,transactionConfirmationPollingInterval:void 0,blockHeaderTimeout:10,maxListenersWarningThreshold:100,contractDataInputFill:"data",defaultNetworkId:void 0,defaultChain:"mainnet",defaultHardfork:"london",defaultCommon:void 0,defaultTransactionType:"0x2",defaultMaxPriorityFeePerGas:qo(25e8),enableExperimentalFeatures:{useSubscriptionWhenCheckingBlockTimeout:!1,useRpcCallSpecification:!1},transactionBuilder:void 0,transactionTypeParser:void 0,customTransactionSchema:void 0,defaultReturnFormat:Lr,ignoreGasPricing:!1},this.setConfig(e??{})}setConfig(e){const t=Object.keys(e);for(const r of t)this._triggerConfigChange(r,e[r]),!dt(e[r])&&typeof e[r]=="number"&&r==="maxListenersWarningThreshold"&&this.setMaxListenerWarningThreshold(Number(e[r]));Object.assign(this.config,e)}get handleRevert(){return this.config.handleRevert}set handleRevert(e){this._triggerConfigChange("handleRevert",e),this.config.handleRevert=e}get contractDataInputFill(){return this.config.contractDataInputFill}set contractDataInputFill(e){this._triggerConfigChange("contractDataInputFill",e),this.config.contractDataInputFill=e}get defaultAccount(){return this.config.defaultAccount}set defaultAccount(e){this._triggerConfigChange("defaultAccount",e),this.config.defaultAccount=e}get defaultBlock(){return this.config.defaultBlock}set defaultBlock(e){this._triggerConfigChange("defaultBlock",e),this.config.defaultBlock=e}get transactionSendTimeout(){return this.config.transactionSendTimeout}set transactionSendTimeout(e){this._triggerConfigChange("transactionSendTimeout",e),this.config.transactionSendTimeout=e}get transactionBlockTimeout(){return this.config.transactionBlockTimeout}set transactionBlockTimeout(e){this._triggerConfigChange("transactionBlockTimeout",e),this.config.transactionBlockTimeout=e}get transactionConfirmationBlocks(){return this.config.transactionConfirmationBlocks}set transactionConfirmationBlocks(e){this._triggerConfigChange("transactionConfirmationBlocks",e),this.config.transactionConfirmationBlocks=e}get transactionPollingInterval(){return this.config.transactionPollingInterval}set transactionPollingInterval(e){this._triggerConfigChange("transactionPollingInterval",e),this.config.transactionPollingInterval=e,this.transactionReceiptPollingInterval=e,this.transactionConfirmationPollingInterval=e}get transactionPollingTimeout(){return this.config.transactionPollingTimeout}set transactionPollingTimeout(e){this._triggerConfigChange("transactionPollingTimeout",e),this.config.transactionPollingTimeout=e}get transactionReceiptPollingInterval(){return this.config.transactionReceiptPollingInterval}set transactionReceiptPollingInterval(e){this._triggerConfigChange("transactionReceiptPollingInterval",e),this.config.transactionReceiptPollingInterval=e}get transactionConfirmationPollingInterval(){return this.config.transactionConfirmationPollingInterval}set transactionConfirmationPollingInterval(e){this._triggerConfigChange("transactionConfirmationPollingInterval",e),this.config.transactionConfirmationPollingInterval=e}get blockHeaderTimeout(){return this.config.blockHeaderTimeout}set blockHeaderTimeout(e){this._triggerConfigChange("blockHeaderTimeout",e),this.config.blockHeaderTimeout=e}get enableExperimentalFeatures(){return this.config.enableExperimentalFeatures}set enableExperimentalFeatures(e){this._triggerConfigChange("enableExperimentalFeatures",e),this.config.enableExperimentalFeatures=e}get maxListenersWarningThreshold(){return this.config.maxListenersWarningThreshold}set maxListenersWarningThreshold(e){this._triggerConfigChange("maxListenersWarningThreshold",e),this.setMaxListenerWarningThreshold(e),this.config.maxListenersWarningThreshold=e}get defaultReturnFormat(){return this.config.defaultReturnFormat}set defaultReturnFormat(e){this._triggerConfigChange("defaultReturnFormat",e),this.config.defaultReturnFormat=e}get defaultNetworkId(){return this.config.defaultNetworkId}set defaultNetworkId(e){this._triggerConfigChange("defaultNetworkId",e),this.config.defaultNetworkId=e}get defaultChain(){return this.config.defaultChain}set defaultChain(e){if(!dt(this.config.defaultCommon)&&!dt(this.config.defaultCommon.baseChain)&&e!==this.config.defaultCommon.baseChain)throw new U1(this.config.defaultChain,e);this._triggerConfigChange("defaultChain",e),this.config.defaultChain=e}get defaultHardfork(){return this.config.defaultHardfork}set defaultHardfork(e){if(!dt(this.config.defaultCommon)&&!dt(this.config.defaultCommon.hardfork)&&e!==this.config.defaultCommon.hardfork)throw new F1(this.config.defaultCommon.hardfork,e);this._triggerConfigChange("defaultHardfork",e),this.config.defaultHardfork=e}get defaultCommon(){return this.config.defaultCommon}set defaultCommon(e){if(!dt(this.config.defaultHardfork)&&!dt(e)&&!dt(e.hardfork)&&this.config.defaultHardfork!==e.hardfork)throw new F1(this.config.defaultHardfork,e.hardfork);if(!dt(this.config.defaultChain)&&!dt(e)&&!dt(e.baseChain)&&this.config.defaultChain!==e.baseChain)throw new U1(this.config.defaultChain,e.baseChain);this._triggerConfigChange("defaultCommon",e),this.config.defaultCommon=e}get ignoreGasPricing(){return this.config.ignoreGasPricing}set ignoreGasPricing(e){this._triggerConfigChange("ignoreGasPricing",e),this.config.ignoreGasPricing=e}get defaultTransactionType(){return this.config.defaultTransactionType}set defaultTransactionType(e){this._triggerConfigChange("defaultTransactionType",e),this.config.defaultTransactionType=e}get defaultMaxPriorityFeePerGas(){return this.config.defaultMaxPriorityFeePerGas}set defaultMaxPriorityFeePerGas(e){this._triggerConfigChange("defaultMaxPriorityFeePerGas",e),this.config.defaultMaxPriorityFeePerGas=e}get transactionBuilder(){return this.config.transactionBuilder}set transactionBuilder(e){this._triggerConfigChange("transactionBuilder",e),this.config.transactionBuilder=e}get transactionTypeParser(){return this.config.transactionTypeParser}set transactionTypeParser(e){this._triggerConfigChange("transactionTypeParser",e),this.config.transactionTypeParser=e}get customTransactionSchema(){return this.config.customTransactionSchema}set customTransactionSchema(e){this._triggerConfigChange("customTransactionSchema",e),this.config.customTransactionSchema=e}_triggerConfigChange(e,t){this.emit($l.CONFIG_CHANGE,{name:e,oldValue:this.config[e],newValue:t})}}var p_={exports:{}};(function(n,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Po<"u"&&Po,r=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof Po<"u"&&Po||{},l={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function c(_){return _&&DataView.prototype.isPrototypeOf(_)}if(l.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(_){return _&&u.indexOf(Object.prototype.toString.call(_))>-1};function f(_){if(typeof _!="string"&&(_=String(_)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(_)||_==="")throw new TypeError('Invalid character in header field name: "'+_+'"');return _.toLowerCase()}function p(_){return typeof _!="string"&&(_=String(_)),_}function m(_){var b={next:function(){var A=_.shift();return{done:A===void 0,value:A}}};return l.iterable&&(b[Symbol.iterator]=function(){return b}),b}function g(_){this.map={},_ instanceof g?_.forEach(function(b,A){this.append(A,b)},this):Array.isArray(_)?_.forEach(function(b){if(b.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+b.length);this.append(b[0],b[1])},this):_&&Object.getOwnPropertyNames(_).forEach(function(b){this.append(b,_[b])},this)}g.prototype.append=function(_,b){_=f(_),b=p(b);var A=this.map[_];this.map[_]=A?A+", "+b:b},g.prototype.delete=function(_){delete this.map[f(_)]},g.prototype.get=function(_){return _=f(_),this.has(_)?this.map[_]:null},g.prototype.has=function(_){return this.map.hasOwnProperty(f(_))},g.prototype.set=function(_,b){this.map[f(_)]=p(b)},g.prototype.forEach=function(_,b){for(var A in this.map)this.map.hasOwnProperty(A)&&_.call(b,this.map[A],A,this)},g.prototype.keys=function(){var _=[];return this.forEach(function(b,A){_.push(A)}),m(_)},g.prototype.values=function(){var _=[];return this.forEach(function(b){_.push(b)}),m(_)},g.prototype.entries=function(){var _=[];return this.forEach(function(b,A){_.push([A,b])}),m(_)},l.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function y(_){if(!_._noBody){if(_.bodyUsed)return Promise.reject(new TypeError("Already read"));_.bodyUsed=!0}}function h(_){return new Promise(function(b,A){_.onload=function(){b(_.result)},_.onerror=function(){A(_.error)}})}function w(_){var b=new FileReader,A=h(b);return b.readAsArrayBuffer(_),A}function M(_){var b=new FileReader,A=h(b),T=/charset=([A-Za-z0-9_-]+)/.exec(_.type),D=T?T[1]:"utf-8";return b.readAsText(_,D),A}function S(_){for(var b=new Uint8Array(_),A=new Array(b.length),T=0;T<b.length;T++)A[T]=String.fromCharCode(b[T]);return A.join("")}function C(_){if(_.slice)return _.slice(0);var b=new Uint8Array(_.byteLength);return b.set(new Uint8Array(_)),b.buffer}function k(){return this.bodyUsed=!1,this._initBody=function(_){this.bodyUsed=this.bodyUsed,this._bodyInit=_,_?typeof _=="string"?this._bodyText=_:l.blob&&Blob.prototype.isPrototypeOf(_)?this._bodyBlob=_:l.formData&&FormData.prototype.isPrototypeOf(_)?this._bodyFormData=_:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)?this._bodyText=_.toString():l.arrayBuffer&&l.blob&&c(_)?(this._bodyArrayBuffer=C(_.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(_)||d(_))?this._bodyArrayBuffer=C(_):this._bodyText=_=Object.prototype.toString.call(_):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof _=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var _=y(this);if(_)return _;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var _=y(this);return _||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(l.blob)return this.blob().then(w);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var _=y(this);if(_)return _;if(this._bodyBlob)return M(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(S(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(I)}),this.json=function(){return this.text().then(JSON.parse)},this}var F=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function N(_){var b=_.toUpperCase();return F.indexOf(b)>-1?b:_}function B(_,b){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');b=b||{};var A=b.body;if(_ instanceof B){if(_.bodyUsed)throw new TypeError("Already read");this.url=_.url,this.credentials=_.credentials,b.headers||(this.headers=new g(_.headers)),this.method=_.method,this.mode=_.mode,this.signal=_.signal,!A&&_._bodyInit!=null&&(A=_._bodyInit,_.bodyUsed=!0)}else this.url=String(_);if(this.credentials=b.credentials||this.credentials||"same-origin",(b.headers||!this.headers)&&(this.headers=new g(b.headers)),this.method=N(b.method||this.method||"GET"),this.mode=b.mode||this.mode||null,this.signal=b.signal||this.signal||function(){if("AbortController"in a){var V=new AbortController;return V.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&A)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(A),(this.method==="GET"||this.method==="HEAD")&&(b.cache==="no-store"||b.cache==="no-cache")){var T=/([?&])_=[^&]*/;if(T.test(this.url))this.url=this.url.replace(T,"$1_="+new Date().getTime());else{var D=/\?/;this.url+=(D.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}B.prototype.clone=function(){return new B(this,{body:this._bodyInit})};function I(_){var b=new FormData;return _.trim().split("&").forEach(function(A){if(A){var T=A.split("="),D=T.shift().replace(/\+/g," "),V=T.join("=").replace(/\+/g," ");b.append(decodeURIComponent(D),decodeURIComponent(V))}}),b}function U(_){var b=new g,A=_.replace(/\r?\n[\t ]+/g," ");return A.split("\r").map(function(T){return T.indexOf(`
`)===0?T.substr(1,T.length):T}).forEach(function(T){var D=T.split(":"),V=D.shift().trim();if(V){var O=D.join(":").trim();try{b.append(V,O)}catch{}}}),b}k.call(B.prototype);function G(_,b){if(!(this instanceof G))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(b||(b={}),this.type="default",this.status=b.status===void 0?200:b.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=b.statusText===void 0?"":""+b.statusText,this.headers=new g(b.headers),this.url=b.url||"",this._initBody(_)}k.call(G.prototype),G.prototype.clone=function(){return new G(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},G.error=function(){var _=new G(null,{status:200,statusText:""});return _.ok=!1,_.status=0,_.type="error",_};var R=[301,302,303,307,308];G.redirect=function(_,b){if(R.indexOf(b)===-1)throw new RangeError("Invalid status code");return new G(null,{status:b,headers:{location:_}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(b,A){this.message=b,this.name=A;var T=Error(b);this.stack=T.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function v(_,b){return new Promise(function(A,T){var D=new B(_,b);if(D.signal&&D.signal.aborted)return T(new o.DOMException("Aborted","AbortError"));var V=new XMLHttpRequest;function O(){V.abort()}V.onload=function(){var K={statusText:V.statusText,headers:U(V.getAllResponseHeaders()||"")};D.url.indexOf("file://")===0&&(V.status<200||V.status>599)?K.status=200:K.status=V.status,K.url="responseURL"in V?V.responseURL:K.headers.get("X-Request-URL");var E="response"in V?V.response:V.responseText;setTimeout(function(){A(new G(E,K))},0)},V.onerror=function(){setTimeout(function(){T(new TypeError("Network request failed"))},0)},V.ontimeout=function(){setTimeout(function(){T(new TypeError("Network request timed out"))},0)},V.onabort=function(){setTimeout(function(){T(new o.DOMException("Aborted","AbortError"))},0)};function x(K){try{return K===""&&a.location.href?a.location.href:K}catch{return K}}if(V.open(D.method,x(D.url),!0),D.credentials==="include"?V.withCredentials=!0:D.credentials==="omit"&&(V.withCredentials=!1),"responseType"in V&&(l.blob?V.responseType="blob":l.arrayBuffer&&(V.responseType="arraybuffer")),b&&typeof b.headers=="object"&&!(b.headers instanceof g||a.Headers&&b.headers instanceof a.Headers)){var $=[];Object.getOwnPropertyNames(b.headers).forEach(function(K){$.push(f(K)),V.setRequestHeader(K,p(b.headers[K]))}),D.headers.forEach(function(K,E){$.indexOf(E)===-1&&V.setRequestHeader(E,K)})}else D.headers.forEach(function(K,E){V.setRequestHeader(E,K)});D.signal&&(D.signal.addEventListener("abort",O),V.onreadystatechange=function(){V.readyState===4&&D.signal.removeEventListener("abort",O)}),V.send(typeof D._bodyInit>"u"?null:D._bodyInit)})}return v.polyfill=!0,a.fetch||(a.fetch=v,a.Headers=g,a.Request=B,a.Response=G),o.Headers=g,o.Request=B,o.Response=G,o.fetch=v,o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=t.fetch?t:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,n.exports=e})(p_,p_.exports);var iX=p_.exports;const sX=Jl(iX);var oX=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class O0 extends Jf{constructor(e,t){if(super(),!O0.validateClientUrl(e))throw new s_(e);this.clientUrl=e,this.httpProviderOptions=t}static validateClientUrl(e){return typeof e=="string"?/^http(s)?:\/\//i.test(e):!1}getStatus(){throw new ho}supportsSubscriptions(){return!1}request(e,t){var r;return oX(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},(r=this.httpProviderOptions)===null||r===void 0?void 0:r.providerOptions),t),s=yield sX(this.clientUrl,Object.assign(Object.assign({},i),{method:"POST",headers:Object.assign(Object.assign({},i.headers),{"Content-Type":"application/json"}),body:JSON.stringify(e)}));if(!s.ok)throw new ks(yield s.json(),void 0,void 0,s.status);return yield s.json()})}on(){throw new ho}removeListener(){throw new ho}once(){throw new ho}removeAllListeners(){throw new ho}connect(){throw new ho}disconnect(){throw new ho}reset(){throw new ho}reconnect(){throw new ho}}var Dc=null;typeof WebSocket<"u"?Dc=WebSocket:typeof MozWebSocket<"u"?Dc=MozWebSocket:typeof global<"u"?Dc=global.WebSocket||global.MozWebSocket:typeof window<"u"?Dc=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Dc=self.WebSocket||self.MozWebSocket);const aX=Dc;class TR extends ER{constructor(e,t,r){super(e,t,r)}_validateProviderPath(e){return typeof e=="string"?/^ws(s)?:\/\//i.test(e):!1}getStatus(){if(this._socketConnection&&!dt(this._socketConnection))switch(this._socketConnection.readyState){case this._socketConnection.CONNECTING:return"connecting";case this._socketConnection.OPEN:return"connected";default:return"disconnected"}return"disconnected"}_openSocketConnection(){this._socketConnection=new aX(this._socketPath,void 0,this._socketOptions&&Object.keys(this._socketOptions).length===0?void 0:this._socketOptions)}_closeSocketConnection(e,t){var r;(r=this._socketConnection)===null||r===void 0||r.close(e,t)}_sendToSocket(e){var t;if(this.getStatus()==="disconnected")throw new r_;(t=this._socketConnection)===null||t===void 0||t.send(JSON.stringify(e))}_parseResponses(e){return this.chunkResponseParser.parseResponse(e.data)}_addSocketListeners(){var e,t,r,i;(e=this._socketConnection)===null||e===void 0||e.addEventListener("open",this._onOpenHandler),(t=this._socketConnection)===null||t===void 0||t.addEventListener("message",this._onMessageHandler),(r=this._socketConnection)===null||r===void 0||r.addEventListener("close",s=>this._onCloseHandler(s)),(i=this._socketConnection)===null||i===void 0||i.addEventListener("error",this._onErrorHandler)}_removeSocketListeners(){var e,t,r;(e=this._socketConnection)===null||e===void 0||e.removeEventListener("message",this._onMessageHandler),(t=this._socketConnection)===null||t===void 0||t.removeEventListener("open",this._onOpenHandler),(r=this._socketConnection)===null||r===void 0||r.removeEventListener("close",this._onCloseHandler)}_onCloseEvent(e){var t;if(this._reconnectOptions.autoReconnect&&(![1e3,1001].includes(e.code)||!e.wasClean)){this._reconnect();return}this._clearQueues(e),this._removeSocketListeners(),this._onDisconnect(e.code,e.reason),(t=this._socketConnection)===null||t===void 0||t.removeEventListener("error",this._onErrorHandler)}}const MR=n=>Jf.isWeb3Provider(n),RR=n=>typeof n!="string"&&"request"in n&&n.request.constructor.name==="Function",IR=n=>typeof n!="string"&&"request"in n&&n.request.constructor.name==="AsyncFunction",CR=n=>typeof n!="string"&&"send"in n,PR=n=>typeof n!="string"&&"sendAsync"in n,Rm=n=>n&&(MR(n)||IR(n)||RR(n)||PR(n)||CR(n)),lX=n=>n&&"supportsSubscriptions"in n?n.supportsSubscriptions():!!(n&&typeof n!="string"&&"on"in n);var iv=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},Nu;(function(n){n.PROVIDER_CHANGED="PROVIDER_CHANGED",n.BEFORE_PROVIDER_CHANGE="BEFORE_PROVIDER_CHANGE"})(Nu||(Nu={}));const Q1={HttpProvider:O0,WebsocketProvider:TR};class Rl extends D0{constructor(e,t,r){super(),dt(e)||this.setProvider(e),this.useRpcCallSpecification=t,dt(r)||(this.middleware=r)}static get providers(){return Q1}get provider(){return this._provider}get providers(){return Q1}setProvider(e){let t;if(e&&typeof e=="string"&&this.providers)if(/^http(s)?:\/\//i.test(e))t=new this.providers.HttpProvider(e);else if(/^ws(s)?:\/\//i.test(e))t=new this.providers.WebsocketProvider(e);else throw new yp(`Can't autodetect provider for "${e}"`);else dt(e)?t=void 0:t=e;return this.emit(Nu.BEFORE_PROVIDER_CHANGE,this._provider),this._provider=t,this.emit(Nu.PROVIDER_CHANGED,this._provider),!0}setMiddleware(e){this.middleware=e}send(e){return iv(this,void 0,void 0,function*(){const t=Object.assign({},e);let r=yield this._sendRequest(t);if(dt(this.middleware)||(r=yield this.middleware.processResponse(r)),Na(r))return r.result;throw new ks(r)})}sendBatch(e){return iv(this,void 0,void 0,function*(){return yield this._sendRequest(e)})}_sendRequest(e){return iv(this,void 0,void 0,function*(){const{provider:t}=this;if(dt(t))throw new yp("Provider not available. Use `.setProvider` or `.provider=` to initialize the provider.");let r=Rs(e)?fx(e):Vl(e);if(dt(this.middleware)||(r=yield this.middleware.processRequest(r)),MR(t)){let i;try{i=yield t.request(r)}catch(s){i=s}return this._processJsonRpcResponse(r,i,{legacy:!1,error:!1})}if(IR(t))return t.request(r).then(i=>this._processJsonRpcResponse(r,i,{legacy:!0,error:!1})).catch(i=>this._processJsonRpcResponse(r,i,{legacy:!0,error:!0}));if(RR(t))return new Promise((i,s)=>{const o=c=>{s(this._processJsonRpcResponse(r,c,{legacy:!0,error:!0}))},a=c=>i(this._processJsonRpcResponse(r,c,{legacy:!0,error:!1})),l=t.request(r,(c,u)=>c?o(c):a(u));vR(l)&&l.then(a).catch(u=>{try{const d=this._processJsonRpcResponse(r,u,{legacy:!0,error:!0});s(d)}catch(d){s(d)}})});if(CR(t))return new Promise((i,s)=>{t.send(r,(o,a)=>{if(o)return s(this._processJsonRpcResponse(r,o,{legacy:!0,error:!0}));if(dt(a))throw new ks({},'Got a "nullish" response from provider.');return i(this._processJsonRpcResponse(r,a,{legacy:!0,error:!1}))})});if(PR(t))return t.sendAsync(r).then(i=>this._processJsonRpcResponse(r,i,{legacy:!0,error:!1})).catch(i=>this._processJsonRpcResponse(r,i,{legacy:!0,error:!0}));throw new yp("Provider does not have a request or send method to use.")})}_processJsonRpcResponse(e,t,{legacy:r,error:i}){if(dt(t))return this._buildResponse(e,null,i);if(ka(t)){if(this.useRpcCallSpecification&&ux(t)){const s=t;if(Or.get(s.error.code)){const o=Or.get(s.error.code).error;throw new o(s)}else throw new xi(s)}else if(!Rl._isReverted(t))throw new E0(t,e)}if(Na(t))return t;if(t instanceof Error)throw Rl._isReverted(t),t;if(!r&&Rs(e)&&Rf(t)||r&&!i&&Rs(e))return t;if(r&&i&&Rs(e))throw t;if(r&&!ka(t)&&!Na(t))return this._buildResponse(e,t,i);throw Rs(e)&&!Array.isArray(t)?new ks(t,"Got normal response for a batch request."):!Rs(e)&&Array.isArray(t)?new ks(t,"Got batch response for a normal request."):new ks(t,"Invalid response")}static _isReverted(e){let t;if(ka(e)?t=e.error:e instanceof Error&&(t=e),t!=null&&t.message.includes("revert"))throw new Tl(t);return!1}_buildResponse(e,t,r){const i={jsonrpc:"2.0",id:Rs(e)?e[0].id:"id"in e?e.id:null};return r?Object.assign(Object.assign({},i),{error:t}):Object.assign(Object.assign({},i),{result:t})}}var Ad=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class Im{constructor(e,t,r=!1){this.requestManager=e,this.registeredSubscriptions=t,this.tolerateUnlinkedSubscription=r,this._subscriptions=new Map,this.requestManager.on(Nu.BEFORE_PROVIDER_CHANGE,()=>Ad(this,void 0,void 0,function*(){yield this.unsubscribe()})),this.requestManager.on(Nu.PROVIDER_CHANGED,()=>{this.clear(),this.listenToProviderEvents()}),this.listenToProviderEvents()}listenToProviderEvents(){const e=this.requestManager.provider;!this.requestManager.provider||typeof(e==null?void 0:e.supportsSubscriptions)=="function"&&!(e!=null&&e.supportsSubscriptions())||typeof this.requestManager.provider.on=="function"&&(typeof this.requestManager.provider.request=="function"?this.requestManager.provider.on("message",t=>this.messageListener(t)):e.on("data",t=>this.messageListener(t)))}messageListener(e){var t,r,i;if(!e)throw new xo("Should not call messageListener with no data. Type was");const s=((t=e.params)===null||t===void 0?void 0:t.subscription)||((r=e.data)===null||r===void 0?void 0:r.subscription)||((i=e.id)===null||i===void 0?void 0:i.toString(16));if(s){const o=this._subscriptions.get(s);o==null||o.processSubscriptionData(e)}}subscribe(e,t){return Ad(this,arguments,void 0,function*(r,i,s=Lr){const o=this.registeredSubscriptions[r];if(!o)throw new xo("Invalid subscription type");const a=new o(i??void 0,{subscriptionManager:this,returnFormat:s});return yield this.addSubscription(a),a})}get subscriptions(){return this._subscriptions}addSubscription(e){return Ad(this,void 0,void 0,function*(){if(!this.requestManager.provider)throw new yp("Provider not available");if(!this.supportsSubscriptions())throw new xo("The current provider does not support subscriptions");if(e.id&&this._subscriptions.has(e.id))throw new xo(`Subscription with id "${e.id}" already exists`);if(yield e.sendSubscriptionRequest(),dt(e.id))throw new xo("Subscription is not subscribed yet.");return this._subscriptions.set(e.id,e),e.id})}removeSubscription(e){return Ad(this,void 0,void 0,function*(){const{id:t}=e;if(dt(t))throw new xo("Subscription is not subscribed yet. Or, had already been unsubscribed but not through the Subscription Manager.");if(!this._subscriptions.has(t)&&!this.tolerateUnlinkedSubscription)throw new xo(`Subscription with id "${t.toString()}" does not exists`);return yield e.sendUnsubscribeRequest(),this._subscriptions.delete(t),t})}unsubscribe(e){return Ad(this,void 0,void 0,function*(){const t=[];for(const[r,i]of this.subscriptions.entries())(!e||typeof e=="function"&&e({id:r,sub:i}))&&t.push(this.removeSubscription(i));return Promise.all(t)})}clear(){this._subscriptions.clear()}supportsSubscriptions(){return dt(this.requestManager.provider)?!1:lX(this.requestManager.provider)}}var Ed=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class ih extends D0{constructor(e,t){var r;super(),this.args=e;const{requestManager:i}=t,{subscriptionManager:s}=t;i?this._subscriptionManager=new Im(i,{},!0):this._subscriptionManager=s,this._returnFormat=(r=t==null?void 0:t.returnFormat)!==null&&r!==void 0?r:Lr}get id(){return this._id}get lastBlock(){return this._lastBlock}subscribe(){return Ed(this,void 0,void 0,function*(){return this._subscriptionManager.addSubscription(this)})}processSubscriptionData(e){var t,r;e!=null&&e.data?this._processSubscriptionResult((r=(t=e==null?void 0:e.data)===null||t===void 0?void 0:t.result)!==null&&r!==void 0?r:e==null?void 0:e.data):e&&L0(e)&&this._processSubscriptionResult(e==null?void 0:e.params.result)}sendSubscriptionRequest(){return Ed(this,void 0,void 0,function*(){return this._id=yield this._subscriptionManager.requestManager.send({method:"eth_subscribe",params:this._buildSubscriptionParams()}),this.emit("connected",this._id),this._id})}get returnFormat(){return this._returnFormat}get subscriptionManager(){return this._subscriptionManager}resubscribe(){return Ed(this,void 0,void 0,function*(){yield this.unsubscribe(),yield this.subscribe()})}unsubscribe(){return Ed(this,void 0,void 0,function*(){this.id&&(yield this._subscriptionManager.removeSubscription(this))})}sendUnsubscribeRequest(){return Ed(this,void 0,void 0,function*(){yield this._subscriptionManager.requestManager.send({method:"eth_unsubscribe",params:[this.id]}),this._id=void 0})}formatSubscriptionResult(e){return e}_processSubscriptionResult(e){this.emit("data",this.formatSubscriptionResult(e))}_processSubscriptionError(e){this.emit("error",e)}_buildSubscriptionParams(){throw new Error("Implement in the child class")}}var wc=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class Cm extends B7{constructor(){super(...arguments),this._addressMap=new Map,this._defaultKeyName="web3js_wallet"}static getStorage(){let e;try{e=window.localStorage;const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch(t){return t&&(t.code===22||t.code===1014||t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED")&&!ue(e)&&e.length!==0?e:void 0}}create(e){for(let t=0;t<e;t+=1)this.add(this._accountProvider.create());return this}add(e){var t;if(typeof e=="string")return this.add(this._accountProvider.privateKeyToAccount(e));let r=this.length;return this.get(e.address)&&(r=(t=this._addressMap.get(e.address.toLowerCase()))!==null&&t!==void 0?t:r),this._addressMap.set(e.address.toLowerCase(),r),this[r]=e,this}get(e){if(typeof e=="string"){const t=this._addressMap.get(e.toLowerCase());return ue(t)?void 0:this[t]}return this[e]}remove(e){if(typeof e=="string"){const t=this._addressMap.get(e.toLowerCase());return ue(t)?!1:(this._addressMap.delete(e.toLowerCase()),this.splice(t,1),!0)}return this[e]?(this.splice(e,1),!0):!1}clear(){return this._addressMap.clear(),this.length=0,this}encrypt(e,t){return wc(this,void 0,void 0,function*(){return Promise.all(this.map(r=>wc(this,void 0,void 0,function*(){return r.encrypt(e,t)})))})}decrypt(e,t,r){return wc(this,void 0,void 0,function*(){const i=yield Promise.all(e.map(s=>wc(this,void 0,void 0,function*(){return this._accountProvider.decrypt(s,t,r)})));for(const s of i)this.add(s);return this})}save(e,t){return wc(this,void 0,void 0,function*(){const r=Cm.getStorage();if(!r)throw new Error("Local storage not available.");return r.setItem(t??this._defaultKeyName,JSON.stringify(yield this.encrypt(e))),!0})}load(e,t){return wc(this,void 0,void 0,function*(){const r=Cm.getStorage();if(!r)throw new Error("Local storage not available.");const i=r.getItem(t??this._defaultKeyName);return i&&(yield this.decrypt(JSON.parse(i)||[],e)),this})}}const zs={web:_p};function NR(n,e,t){if(!t.startsWith("aes-"))throw new Error(`AES submodule doesn't support mode ${t}`);if(e.length!==16)throw new Error("AES: wrong IV length");if(t.startsWith("aes-128")&&n.length!==16||t.startsWith("aes-256")&&n.length!==32)throw new Error("AES: wrong key length")}async function kR(n,e,t){if(!zs.web)throw new Error("Browser crypto not available.");let r;if(["aes-128-cbc","aes-256-cbc"].includes(n)&&(r="cbc"),["aes-128-ctr","aes-256-ctr"].includes(n)&&(r="ctr"),!r)throw new Error("AES: unsupported mode");return[await zs.web.subtle.importKey("raw",e,{name:`AES-${r.toUpperCase()}`,length:e.length*8},!0,["encrypt","decrypt"]),{name:`aes-${r}`,iv:t,counter:t,length:128}]}async function px(n,e,t,r="aes-128-ctr",i=!0){if(NR(e,t,r),zs.web){const[s,o]=await kR(r,e,t),a=await zs.web.subtle.encrypt(o,s,n);let l=new Uint8Array(a);return!i&&o.name==="aes-cbc"&&!(n.length%16)&&(l=l.slice(0,-16)),l}else if(zs.node){const s=zs.node.createCipheriv(r,e,t);return s.setAutoPadding(i),hm(s.update(n),s.final())}else throw new Error("The environment doesn't have AES module")}async function cX(n,e,t,r){const i=n.slice(-16);for(let o=0;o<16;o++)i[o]^=t[o]^16;return(await px(i,e,t,r)).slice(0,16)}async function uX(n,e,t,r="aes-128-ctr",i=!0){if(NR(e,t,r),zs.web){const[s,o]=await kR(r,e,t);if(!i&&o.name==="aes-cbc"){const c=await cX(n,e,t,r);n=hm(n,c)}const a=await zs.web.subtle.decrypt(o,s,n),l=new Uint8Array(a);if(o.name==="aes-cbc"){const c=await px(l,e,t,r);if(!nW(c,n))throw new Error("AES: wrong padding")}return l}else if(zs.node){const s=zs.node.createDecipheriv(r,e,t);return s.setAutoPadding(i),hm(s.update(n),s.final())}else throw new Error("The environment doesn't have AES module")}class BR extends Kb{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Wb(e);const r=Eu(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Ol(this),this.iHash.update(e),this}digestInto(e){Ol(this),ed(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const mx=(n,e,t)=>new BR(n,e).update(t).digest();mx.create=(n,e)=>new BR(n,e);function dX(n,e,t,r){Wb(n);const i=UM({dkLen:32,asyncTick:10},r),{c:s,dkLen:o,asyncTick:a}=i;if(Wr(s),Wr(o),Wr(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=Eu(e),c=Eu(t),u=new Uint8Array(o),d=mx.create(n,l),f=d._cloneInto().update(c);return{c:s,dkLen:o,asyncTick:a,DK:u,PRF:d,PRFSalt:f}}function fX(n,e,t,r,i){return n.destroy(),e.destroy(),r&&r.destroy(),i.fill(0),t}function gx(n,e,t,r){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:l}=dX(n,e,t,r);let c;const u=new Uint8Array(4),d=xp(u),f=new Uint8Array(a.outputLen);for(let p=1,m=0;m<s;p++,m+=a.outputLen){const g=o.subarray(m,m+a.outputLen);d.setInt32(0,p,!1),(c=l._cloneInto(c)).update(u).digestInto(f),g.set(f.subarray(0,g.length));for(let y=1;y<i;y++){a._cloneInto(c).update(f).digestInto(f);for(let h=0;h<g.length;h++)g[h]^=f[h]}}return fX(a,l,o,c,f)}function hX(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=r?4:0,c=r?0:4;n.setUint32(e+l,o,r),n.setUint32(e+c,a,r)}const pX=(n,e,t)=>n&e^~n&t,mX=(n,e,t)=>n&e^n&t^e&t;class LR extends Kb{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=xp(this.buffer)}update(e){Ol(this);const{view:t,buffer:r,blockLen:i}=this;e=Eu(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=xp(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ol(this),qb(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)t[d]=0;hX(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=xp(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<c;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(r),e}}const gX=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ha=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),pa=new Uint32Array(64);let vX=class extends LR{constructor(){super(64,32,8,!1),this.A=ha[0]|0,this.B=ha[1]|0,this.C=ha[2]|0,this.D=ha[3]|0,this.E=ha[4]|0,this.F=ha[5]|0,this.G=ha[6]|0,this.H=ha[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,t,r,i,s,o,a,l]}set(e,t,r,i,s,o,a,l){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,t){for(let d=0;d<16;d++,t+=4)pa[d]=e.getUint32(t,!1);for(let d=16;d<64;d++){const f=pa[d-15],p=pa[d-2],m=Es(f,7)^Es(f,18)^f>>>3,g=Es(p,17)^Es(p,19)^p>>>10;pa[d]=g+pa[d-7]+m+pa[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:c,H:u}=this;for(let d=0;d<64;d++){const f=Es(a,6)^Es(a,11)^Es(a,25),p=u+f+pX(a,l,c)+gX[d]+pa[d]|0,g=(Es(r,2)^Es(r,13)^Es(r,22))+mX(r,i,s)|0;u=c,c=l,l=a,a=o+p|0,o=s,s=i,i=r,r=p+g|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,l,c,u)}roundClean(){pa.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const F0=Yb(()=>new vX),[yX,_X]=(()=>Rt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))))(),ma=new Uint32Array(80),ga=new Uint32Array(80);let bX=class extends LR{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:d,Fl:f,Gh:p,Gl:m,Hh:g,Hl:y}=this;return[e,t,r,i,s,o,a,l,c,u,d,f,p,m,g,y]}set(e,t,r,i,s,o,a,l,c,u,d,f,p,m,g,y){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=u|0,this.Fh=d|0,this.Fl=f|0,this.Gh=p|0,this.Gl=m|0,this.Hh=g|0,this.Hl=y|0}process(e,t){for(let M=0;M<16;M++,t+=4)ma[M]=e.getUint32(t),ga[M]=e.getUint32(t+=4);for(let M=16;M<80;M++){const S=ma[M-15]|0,C=ga[M-15]|0,k=Rt.rotrSH(S,C,1)^Rt.rotrSH(S,C,8)^Rt.shrSH(S,C,7),F=Rt.rotrSL(S,C,1)^Rt.rotrSL(S,C,8)^Rt.shrSL(S,C,7),N=ma[M-2]|0,B=ga[M-2]|0,I=Rt.rotrSH(N,B,19)^Rt.rotrBH(N,B,61)^Rt.shrSH(N,B,6),U=Rt.rotrSL(N,B,19)^Rt.rotrBL(N,B,61)^Rt.shrSL(N,B,6),G=Rt.add4L(F,U,ga[M-7],ga[M-16]),R=Rt.add4H(G,k,I,ma[M-7],ma[M-16]);ma[M]=R|0,ga[M]=G|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:d,El:f,Fh:p,Fl:m,Gh:g,Gl:y,Hh:h,Hl:w}=this;for(let M=0;M<80;M++){const S=Rt.rotrSH(d,f,14)^Rt.rotrSH(d,f,18)^Rt.rotrBH(d,f,41),C=Rt.rotrSL(d,f,14)^Rt.rotrSL(d,f,18)^Rt.rotrBL(d,f,41),k=d&p^~d&g,F=f&m^~f&y,N=Rt.add5L(w,C,F,_X[M],ga[M]),B=Rt.add5H(N,h,S,k,yX[M],ma[M]),I=N|0,U=Rt.rotrSH(r,i,28)^Rt.rotrBH(r,i,34)^Rt.rotrBH(r,i,39),G=Rt.rotrSL(r,i,28)^Rt.rotrBL(r,i,34)^Rt.rotrBL(r,i,39),R=r&s^r&a^s&a,v=i&o^i&l^o&l;h=g|0,w=y|0,g=p|0,y=m|0,p=d|0,m=f|0,{h:d,l:f}=Rt.add(c|0,u|0,B|0,I|0),c=a|0,u=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const _=Rt.add3L(I,G,v);r=Rt.add3H(_,B,U,R),i=_|0}({h:r,l:i}=Rt.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Rt.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=Rt.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:u}=Rt.add(this.Dh|0,this.Dl|0,c|0,u|0),{h:d,l:f}=Rt.add(this.Eh|0,this.El|0,d|0,f|0),{h:p,l:m}=Rt.add(this.Fh|0,this.Fl|0,p|0,m|0),{h:g,l:y}=Rt.add(this.Gh|0,this.Gl|0,g|0,y|0),{h,l:w}=Rt.add(this.Hh|0,this.Hl|0,h|0,w|0),this.set(r,i,s,o,a,l,c,u,d,f,p,m,g,y,h,w)}roundClean(){ma.fill(0),ga.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const xX=Yb(()=>new bX);function DR(n,e,t,r,i){if(!["sha256","sha512"].includes(i))throw new Error("Only sha256 and sha512 are supported");return pm(n),pm(e),gx(i==="sha256"?F0:xX,n,e,{c:t,dkLen:r})}function Z1(n,e,t,r,i,s){let o=n[e++]^t[r++],a=n[e++]^t[r++],l=n[e++]^t[r++],c=n[e++]^t[r++],u=n[e++]^t[r++],d=n[e++]^t[r++],f=n[e++]^t[r++],p=n[e++]^t[r++],m=n[e++]^t[r++],g=n[e++]^t[r++],y=n[e++]^t[r++],h=n[e++]^t[r++],w=n[e++]^t[r++],M=n[e++]^t[r++],S=n[e++]^t[r++],C=n[e++]^t[r++],k=o,F=a,N=l,B=c,I=u,U=d,G=f,R=p,v=m,_=g,b=y,A=h,T=w,D=M,V=S,O=C;for(let x=0;x<8;x+=2)I^=Zt(k+T|0,7),v^=Zt(I+k|0,9),T^=Zt(v+I|0,13),k^=Zt(T+v|0,18),_^=Zt(U+F|0,7),D^=Zt(_+U|0,9),F^=Zt(D+_|0,13),U^=Zt(F+D|0,18),V^=Zt(b+G|0,7),N^=Zt(V+b|0,9),G^=Zt(N+V|0,13),b^=Zt(G+N|0,18),B^=Zt(O+A|0,7),R^=Zt(B+O|0,9),A^=Zt(R+B|0,13),O^=Zt(A+R|0,18),F^=Zt(k+B|0,7),N^=Zt(F+k|0,9),B^=Zt(N+F|0,13),k^=Zt(B+N|0,18),G^=Zt(U+I|0,7),R^=Zt(G+U|0,9),I^=Zt(R+G|0,13),U^=Zt(I+R|0,18),A^=Zt(b+_|0,7),v^=Zt(A+b|0,9),_^=Zt(v+A|0,13),b^=Zt(_+v|0,18),T^=Zt(O+V|0,7),D^=Zt(T+O|0,9),V^=Zt(D+T|0,13),O^=Zt(V+D|0,18);i[s++]=o+k|0,i[s++]=a+F|0,i[s++]=l+N|0,i[s++]=c+B|0,i[s++]=u+I|0,i[s++]=d+U|0,i[s++]=f+G|0,i[s++]=p+R|0,i[s++]=m+v|0,i[s++]=g+_|0,i[s++]=y+b|0,i[s++]=h+A|0,i[s++]=w+T|0,i[s++]=M+D|0,i[s++]=S+V|0,i[s++]=C+O|0}function sv(n,e,t,r,i){let s=r+0,o=r+16*i;for(let a=0;a<16;a++)t[o+a]=n[e+(2*i-1)*16+a];for(let a=0;a<i;a++,s+=16,e+=16)Z1(t,o,n,e,t,s),a>0&&(o+=16),Z1(t,s,n,e+=16,t,o)}function wX(n,e,t){const r=UM({dkLen:32,asyncTick:10,maxmem:1073742848},t),{N:i,r:s,p:o,dkLen:a,asyncTick:l,maxmem:c,onProgress:u}=r;if(Wr(i),Wr(s),Wr(o),Wr(a),Wr(l),Wr(c),u!==void 0&&typeof u!="function")throw new Error("progressCb should be function");const d=128*s,f=d/4;if(i<=1||i&i-1||i>=2**(d/8)||i>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>(2**32-1)*32/d)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const p=d*(i+o);if(p>c)throw new Error(`Scrypt: parameters too large, ${p} (128 * r * (N + p)) > ${c} (maxmem)`);const m=gx(F0,n,e,{c:1,dkLen:d*o}),g=bp(m),y=bp(new Uint8Array(d*i)),h=bp(new Uint8Array(d));let w=()=>{};if(u){const M=2*i*o,S=Math.max(Math.floor(M/1e4),1);let C=0;w=()=>{C++,u&&(!(C%S)||C===M)&&u(C/M)}}return{N:i,r:s,p:o,dkLen:a,blockSize32:f,V:y,B32:g,B:m,tmp:h,blockMixCb:w,asyncTick:l}}function AX(n,e,t,r,i){const s=gx(F0,n,t,{c:1,dkLen:e});return t.fill(0),r.fill(0),i.fill(0),s}function EX(n,e,t){const{N:r,r:i,p:s,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:d,blockMixCb:f}=wX(n,e,t);dm||fm(c);for(let p=0;p<s;p++){const m=a*p;for(let g=0;g<a;g++)l[g]=c[m+g];for(let g=0,y=0;g<r-1;g++)sv(l,y,l,y+=a,i),f();sv(l,(r-1)*a,c,m,i),f();for(let g=0;g<r;g++){const y=c[m+a-16]%r;for(let h=0;h<a;h++)d[h]=c[m+h]^l[y*a+h];sv(d,0,c,m,i),f()}}return dm||fm(c),AX(n,o,u,l,d)}function OR(n,e,t,r,i,s,o){return pm(n),pm(e),EX(n,e,{N:t,r:i,p:r,dkLen:s,onProgress:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const FR=BigInt(0),U0=BigInt(1),SX=BigInt(2);function jl(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function sh(n){if(!jl(n))throw new Error("Uint8Array expected")}const TX=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function ku(n){sh(n);let e="";for(let t=0;t<n.length;t++)e+=TX[n[t]];return e}function UR(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function vx(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}const mo={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function J1(n){if(n>=mo._0&&n<=mo._9)return n-mo._0;if(n>=mo._A&&n<=mo._F)return n-(mo._A-10);if(n>=mo._a&&n<=mo._f)return n-(mo._a-10)}function Bu(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length,t=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=J1(n.charCodeAt(s)),a=J1(n.charCodeAt(s+1));if(o===void 0||a===void 0){const l=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}r[i]=o*16+a}return r}function Il(n){return vx(ku(n))}function yx(n){return sh(n),vx(ku(Uint8Array.from(n).reverse()))}function Lu(n,e){return Bu(n.toString(16).padStart(e*2,"0"))}function _x(n,e){return Lu(n,e).reverse()}function MX(n){return Bu(UR(n))}function Ji(n,e,t){let r;if(typeof e=="string")try{r=Bu(e)}catch(s){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${s}`)}else if(jl(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(`${n} expected ${t} bytes, got ${i}`);return r}function If(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];sh(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}function RX(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}function IX(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function CX(n){let e;for(e=0;n>FR;n>>=U0,e+=1);return e}function PX(n,e){return n>>BigInt(e)&U0}function NX(n,e,t){return n|(t?U0:FR)<<BigInt(e)}const bx=n=>(SX<<BigInt(n-1))-U0,ov=n=>new Uint8Array(n),eE=n=>Uint8Array.from(n);function HR(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=ov(n),i=ov(n),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...d)=>t(i,r,...d),l=(d=ov())=>{i=a(eE([0]),d),r=a(),d.length!==0&&(i=a(eE([1]),d),r=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){r=a();const p=r.slice();f.push(p),d+=r.length}return If(...f)};return(d,f)=>{o(),l(d);let p;for(;!(p=f(c()));)l();return o(),p}}const kX={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||jl(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function oh(n,e,t={}){const r=(i,s,o)=>{const a=kX[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=n[i];if(!(o&&l===void 0)&&!a(l,n))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(t))r(i,s,!0);return n}const BX=Object.freeze(Object.defineProperty({__proto__:null,abytes:sh,bitGet:PX,bitLen:CX,bitMask:bx,bitSet:NX,bytesToHex:ku,bytesToNumberBE:Il,bytesToNumberLE:yx,concatBytes:If,createHmacDrbg:HR,ensureBytes:Ji,equalBytes:RX,hexToBytes:Bu,hexToNumber:vx,isBytes:jl,numberToBytesBE:Lu,numberToBytesLE:_x,numberToHexUnpadded:UR,numberToVarBytesBE:MX,utf8ToBytes:IX,validateObject:oh},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ar=BigInt(0),Un=BigInt(1),hl=BigInt(2),LX=BigInt(3),m_=BigInt(4),tE=BigInt(5),nE=BigInt(8);BigInt(9);BigInt(16);function jr(n,e){const t=n%e;return t>=ar?t:e+t}function DX(n,e,t){if(t<=ar||e<ar)throw new Error("Expected power/modulo > 0");if(t===Un)return ar;let r=Un;for(;e>ar;)e&Un&&(r=r*n%t),n=n*n%t,e>>=Un;return r}function Ti(n,e,t){let r=n;for(;e-- >ar;)r*=r,r%=t;return r}function g_(n,e){if(n===ar||e<=ar)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=jr(n,e),r=e,i=ar,s=Un;for(;t!==ar;){const a=r/t,l=r%t,c=i-s*a;r=t,t=l,i=s,s=c}if(r!==Un)throw new Error("invert: does not exist");return jr(i,e)}function OX(n){const e=(n-Un)/hl;let t,r,i;for(t=n-Un,r=0;t%hl===ar;t/=hl,r++);for(i=hl;i<n&&DX(i,e,n)!==n-Un;i++);if(r===1){const o=(n+Un)/m_;return function(l,c){const u=l.pow(c,o);if(!l.eql(l.sqr(u),c))throw new Error("Cannot find square root");return u}}const s=(t+Un)/hl;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=r,u=a.pow(a.mul(a.ONE,i),t),d=a.pow(l,s),f=a.pow(l,t);for(;!a.eql(f,a.ONE);){if(a.eql(f,a.ZERO))return a.ZERO;let p=1;for(let g=a.sqr(f);p<c&&!a.eql(g,a.ONE);p++)g=a.sqr(g);const m=a.pow(u,Un<<BigInt(c-p-1));u=a.sqr(m),d=a.mul(d,m),f=a.mul(f,u),c=p}return d}}function FX(n){if(n%m_===LX){const e=(n+Un)/m_;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(n%nE===tE){const e=(n-tE)/nE;return function(r,i){const s=r.mul(i,hl),o=r.pow(s,e),a=r.mul(i,o),l=r.mul(r.mul(a,hl),o),c=r.mul(a,r.sub(l,r.ONE));if(!r.eql(r.sqr(c),i))throw new Error("Cannot find square root");return c}}return OX(n)}const UX=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function HX(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=UX.reduce((r,i)=>(r[i]="function",r),e);return oh(n,t)}function zX(n,e,t){if(t<ar)throw new Error("Expected power > 0");if(t===ar)return n.ONE;if(t===Un)return e;let r=n.ONE,i=e;for(;t>ar;)t&Un&&(r=n.mul(r,i)),i=n.sqr(i),t>>=Un;return r}function GX(n,e){const t=new Array(e.length),r=e.reduce((s,o,a)=>n.is0(o)?s:(t[a]=s,n.mul(s,o)),n.ONE),i=n.inv(r);return e.reduceRight((s,o,a)=>n.is0(o)?s:(t[a]=n.mul(s,t[a]),n.mul(s,o)),i),t}function zR(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function VX(n,e,t=!1,r={}){if(n<=ar)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:i,nByteLength:s}=zR(n,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=FX(n),a=Object.freeze({ORDER:n,BITS:i,BYTES:s,MASK:bx(i),ZERO:ar,ONE:Un,create:l=>jr(l,n),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return ar<=l&&l<n},is0:l=>l===ar,isOdd:l=>(l&Un)===Un,neg:l=>jr(-l,n),eql:(l,c)=>l===c,sqr:l=>jr(l*l,n),add:(l,c)=>jr(l+c,n),sub:(l,c)=>jr(l-c,n),mul:(l,c)=>jr(l*c,n),pow:(l,c)=>zX(a,l,c),div:(l,c)=>jr(l*g_(c,n),n),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>g_(l,n),sqrt:r.sqrt||(l=>o(a,l)),invertBatch:l=>GX(a,l),cmov:(l,c,u)=>u?c:l,toBytes:l=>t?_x(l,s):Lu(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return t?yx(l):Il(l)}});return Object.freeze(a)}function GR(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function VR(n){const e=GR(n);return e+Math.ceil(e/2)}function $X(n,e,t=!1){const r=n.length,i=GR(e),s=VR(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=t?Il(n):yx(n),a=jr(o,e-Un)+Un;return t?_x(a,i):Lu(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jX=BigInt(0),av=BigInt(1);function WX(n,e){const t=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=n.ZERO,a=i;for(;s>jX;)s&av&&(o=o.add(a)),a=a.double(),s>>=av;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),l=[];let c=i,u=c;for(let d=0;d<o;d++){u=c,l.push(u);for(let f=1;f<a;f++)u=u.add(c),l.push(u);c=u.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=r(i);let c=n.ZERO,u=n.BASE;const d=BigInt(2**i-1),f=2**i,p=BigInt(i);for(let m=0;m<a;m++){const g=m*l;let y=Number(o&d);o>>=p,y>l&&(y-=f,o+=av);const h=g,w=g+Math.abs(y)-1,M=m%2!==0,S=y<0;y===0?u=u.add(t(M,s[h])):c=c.add(t(S,s[w]))}return{p:c,f:u}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let c=s.get(i);return c||(c=this.precomputeWindow(i,l),l!==1&&s.set(i,a(c))),this.wNAF(l,c,o)}}}function $R(n){return HX(n.Fp),oh(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...zR(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function qX(n){const e=$R(n);oh(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:i}=e;if(t){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:XX,hexToBytes:KX}=BX,bl={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=bl;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:XX(r),l:n.subarray(t+2)}},toSig(n){const{Err:e}=bl,t=typeof n=="string"?KX(n):n;sh(t);let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=bl._parseInt(t.subarray(2)),{d:o,l:a}=bl._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(n){const e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,t=c=>{const u=c.toString(16);return u.length&1?`0${u}`:u},r=e(t(n.s)),i=e(t(n.r)),s=r.length/2,o=i.length/2,a=t(s),l=t(o);return`30${t(o+s+4)}02${l}${i}02${a}${r}`}},Io=BigInt(0),Ci=BigInt(1);BigInt(2);const rE=BigInt(3);BigInt(4);function YX(n){const e=qX(n),{Fp:t}=e,r=e.toBytes||((m,g,y)=>{const h=g.toAffine();return If(Uint8Array.from([4]),t.toBytes(h.x),t.toBytes(h.y))}),i=e.fromBytes||(m=>{const g=m.subarray(1),y=t.fromBytes(g.subarray(0,t.BYTES)),h=t.fromBytes(g.subarray(t.BYTES,2*t.BYTES));return{x:y,y:h}});function s(m){const{a:g,b:y}=e,h=t.sqr(m),w=t.mul(h,m);return t.add(t.add(w,t.mul(m,g)),y)}if(!t.eql(t.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(m){return typeof m=="bigint"&&Io<m&&m<e.n}function a(m){if(!o(m))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(m){const{allowedPrivateKeyLengths:g,nByteLength:y,wrapPrivateKey:h,n:w}=e;if(g&&typeof m!="bigint"){if(jl(m)&&(m=ku(m)),typeof m!="string"||!g.includes(m.length))throw new Error("Invalid key");m=m.padStart(y*2,"0")}let M;try{M=typeof m=="bigint"?m:Il(Ji("private key",m,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof m}`)}return h&&(M=jr(M,w)),a(M),M}const c=new Map;function u(m){if(!(m instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,y,h){if(this.px=g,this.py=y,this.pz=h,g==null||!t.isValid(g))throw new Error("x required");if(y==null||!t.isValid(y))throw new Error("y required");if(h==null||!t.isValid(h))throw new Error("z required")}static fromAffine(g){const{x:y,y:h}=g||{};if(!g||!t.isValid(y)||!t.isValid(h))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const w=M=>t.eql(M,t.ZERO);return w(y)&&w(h)?d.ZERO:new d(y,h,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const y=t.invertBatch(g.map(h=>h.pz));return g.map((h,w)=>h.toAffine(y[w])).map(d.fromAffine)}static fromHex(g){const y=d.fromAffine(i(Ji("pointHex",g)));return y.assertValidity(),y}static fromPrivateKey(g){return d.BASE.multiply(l(g))}_setWindowSize(g){this._WINDOW_SIZE=g,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y}=this.toAffine();if(!t.isValid(g)||!t.isValid(y))throw new Error("bad point: x or y not FE");const h=t.sqr(y),w=s(g);if(!t.eql(h,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(t.isOdd)return!t.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:y,py:h,pz:w}=this,{px:M,py:S,pz:C}=g,k=t.eql(t.mul(y,C),t.mul(M,w)),F=t.eql(t.mul(h,C),t.mul(S,w));return k&&F}negate(){return new d(this.px,t.neg(this.py),this.pz)}double(){const{a:g,b:y}=e,h=t.mul(y,rE),{px:w,py:M,pz:S}=this;let C=t.ZERO,k=t.ZERO,F=t.ZERO,N=t.mul(w,w),B=t.mul(M,M),I=t.mul(S,S),U=t.mul(w,M);return U=t.add(U,U),F=t.mul(w,S),F=t.add(F,F),C=t.mul(g,F),k=t.mul(h,I),k=t.add(C,k),C=t.sub(B,k),k=t.add(B,k),k=t.mul(C,k),C=t.mul(U,C),F=t.mul(h,F),I=t.mul(g,I),U=t.sub(N,I),U=t.mul(g,U),U=t.add(U,F),F=t.add(N,N),N=t.add(F,N),N=t.add(N,I),N=t.mul(N,U),k=t.add(k,N),I=t.mul(M,S),I=t.add(I,I),N=t.mul(I,U),C=t.sub(C,N),F=t.mul(I,B),F=t.add(F,F),F=t.add(F,F),new d(C,k,F)}add(g){u(g);const{px:y,py:h,pz:w}=this,{px:M,py:S,pz:C}=g;let k=t.ZERO,F=t.ZERO,N=t.ZERO;const B=e.a,I=t.mul(e.b,rE);let U=t.mul(y,M),G=t.mul(h,S),R=t.mul(w,C),v=t.add(y,h),_=t.add(M,S);v=t.mul(v,_),_=t.add(U,G),v=t.sub(v,_),_=t.add(y,w);let b=t.add(M,C);return _=t.mul(_,b),b=t.add(U,R),_=t.sub(_,b),b=t.add(h,w),k=t.add(S,C),b=t.mul(b,k),k=t.add(G,R),b=t.sub(b,k),N=t.mul(B,_),k=t.mul(I,R),N=t.add(k,N),k=t.sub(G,N),N=t.add(G,N),F=t.mul(k,N),G=t.add(U,U),G=t.add(G,U),R=t.mul(B,R),_=t.mul(I,_),G=t.add(G,R),R=t.sub(U,R),R=t.mul(B,R),_=t.add(_,R),U=t.mul(G,_),F=t.add(F,U),U=t.mul(b,_),k=t.mul(v,k),k=t.sub(k,U),U=t.mul(v,G),N=t.mul(b,N),N=t.add(N,U),new d(k,F,N)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return p.wNAFCached(this,c,g,y=>{const h=t.invertBatch(y.map(w=>w.pz));return y.map((w,M)=>w.toAffine(h[M])).map(d.fromAffine)})}multiplyUnsafe(g){const y=d.ZERO;if(g===Io)return y;if(a(g),g===Ci)return this;const{endo:h}=e;if(!h)return p.unsafeLadder(this,g);let{k1neg:w,k1:M,k2neg:S,k2:C}=h.splitScalar(g),k=y,F=y,N=this;for(;M>Io||C>Io;)M&Ci&&(k=k.add(N)),C&Ci&&(F=F.add(N)),N=N.double(),M>>=Ci,C>>=Ci;return w&&(k=k.negate()),S&&(F=F.negate()),F=new d(t.mul(F.px,h.beta),F.py,F.pz),k.add(F)}multiply(g){a(g);let y=g,h,w;const{endo:M}=e;if(M){const{k1neg:S,k1:C,k2neg:k,k2:F}=M.splitScalar(y);let{p:N,f:B}=this.wNAF(C),{p:I,f:U}=this.wNAF(F);N=p.constTimeNegate(S,N),I=p.constTimeNegate(k,I),I=new d(t.mul(I.px,M.beta),I.py,I.pz),h=N.add(I),w=B.add(U)}else{const{p:S,f:C}=this.wNAF(y);h=S,w=C}return d.normalizeZ([h,w])[0]}multiplyAndAddUnsafe(g,y,h){const w=d.BASE,M=(C,k)=>k===Io||k===Ci||!C.equals(w)?C.multiplyUnsafe(k):C.multiply(k),S=M(this,y).add(M(g,h));return S.is0()?void 0:S}toAffine(g){const{px:y,py:h,pz:w}=this,M=this.is0();g==null&&(g=M?t.ONE:t.inv(w));const S=t.mul(y,g),C=t.mul(h,g),k=t.mul(w,g);if(M)return{x:t.ZERO,y:t.ZERO};if(!t.eql(k,t.ONE))throw new Error("invZ was invalid");return{x:S,y:C}}isTorsionFree(){const{h:g,isTorsionFree:y}=e;if(g===Ci)return!0;if(y)return y(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:y}=e;return g===Ci?this:y?y(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return ku(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,t.ONE),d.ZERO=new d(t.ZERO,t.ONE,t.ZERO);const f=e.nBitLength,p=WX(d,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function QX(n){const e=$R(n);return oh(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function ZX(n){const e=QX(n),{Fp:t,n:r}=e,i=t.BYTES+1,s=2*t.BYTES+1;function o(_){return Io<_&&_<t.ORDER}function a(_){return jr(_,r)}function l(_){return g_(_,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:f}=YX({...e,toBytes(_,b,A){const T=b.toAffine(),D=t.toBytes(T.x),V=If;return A?V(Uint8Array.from([b.hasEvenY()?2:3]),D):V(Uint8Array.from([4]),D,t.toBytes(T.y))},fromBytes(_){const b=_.length,A=_[0],T=_.subarray(1);if(b===i&&(A===2||A===3)){const D=Il(T);if(!o(D))throw new Error("Point is not on curve");const V=d(D);let O;try{O=t.sqrt(V)}catch(K){const E=K instanceof Error?": "+K.message:"";throw new Error("Point is not on curve"+E)}const x=(O&Ci)===Ci;return(A&1)===1!==x&&(O=t.neg(O)),{x:D,y:O}}else if(b===s&&A===4){const D=t.fromBytes(T.subarray(0,t.BYTES)),V=t.fromBytes(T.subarray(t.BYTES,2*t.BYTES));return{x:D,y:V}}else throw new Error(`Point of length ${b} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),p=_=>ku(Lu(_,e.nByteLength));function m(_){const b=r>>Ci;return _>b}function g(_){return m(_)?a(-_):_}const y=(_,b,A)=>Il(_.slice(b,A));class h{constructor(b,A,T){this.r=b,this.s=A,this.recovery=T,this.assertValidity()}static fromCompact(b){const A=e.nByteLength;return b=Ji("compactSignature",b,A*2),new h(y(b,0,A),y(b,A,2*A))}static fromDER(b){const{r:A,s:T}=bl.toSig(Ji("DER",b));return new h(A,T)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(b){return new h(this.r,this.s,b)}recoverPublicKey(b){const{r:A,s:T,recovery:D}=this,V=F(Ji("msgHash",b));if(D==null||![0,1,2,3].includes(D))throw new Error("recovery id invalid");const O=D===2||D===3?A+e.n:A;if(O>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const x=D&1?"03":"02",$=c.fromHex(x+p(O)),K=l(O),E=a(-V*K),Y=a(T*K),j=c.BASE.multiplyAndAddUnsafe($,E,Y);if(!j)throw new Error("point at infinify");return j.assertValidity(),j}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Bu(this.toDERHex())}toDERHex(){return bl.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Bu(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const w={isValidPrivateKey(_){try{return u(_),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const _=VR(e.n);return $X(e.randomBytes(_),e.n)},precompute(_=8,b=c.BASE){return b._setWindowSize(_),b.multiply(BigInt(3)),b}};function M(_,b=!0){return c.fromPrivateKey(_).toRawBytes(b)}function S(_){const b=jl(_),A=typeof _=="string",T=(b||A)&&_.length;return b?T===i||T===s:A?T===2*i||T===2*s:_ instanceof c}function C(_,b,A=!0){if(S(_))throw new Error("first arg must be private key");if(!S(b))throw new Error("second arg must be public key");return c.fromHex(b).multiply(u(_)).toRawBytes(A)}const k=e.bits2int||function(_){const b=Il(_),A=_.length*8-e.nBitLength;return A>0?b>>BigInt(A):b},F=e.bits2int_modN||function(_){return a(k(_))},N=bx(e.nBitLength);function B(_){if(typeof _!="bigint")throw new Error("bigint expected");if(!(Io<=_&&_<N))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Lu(_,e.nByteLength)}function I(_,b,A=U){if(["recovered","canonical"].some(ee=>ee in A))throw new Error("sign() legacy options not supported");const{hash:T,randomBytes:D}=e;let{lowS:V,prehash:O,extraEntropy:x}=A;V==null&&(V=!0),_=Ji("msgHash",_),O&&(_=Ji("prehashed msgHash",T(_)));const $=F(_),K=u(b),E=[B(K),B($)];if(x!=null&&x!==!1){const ee=x===!0?D(t.BYTES):x;E.push(Ji("extraEntropy",ee))}const Y=If(...E),j=$;function X(ee){const le=k(ee);if(!f(le))return;const me=l(le),he=c.BASE.multiply(le).toAffine(),je=a(he.x);if(je===Io)return;const q=a(me*a(j+je*K));if(q===Io)return;let ze=(he.x===je?0:2)|Number(he.y&Ci),Qe=q;return V&&m(q)&&(Qe=g(q),ze^=1),new h(je,Qe,ze)}return{seed:Y,k2sig:X}}const U={lowS:e.lowS,prehash:!1},G={lowS:e.lowS,prehash:!1};function R(_,b,A=U){const{seed:T,k2sig:D}=I(_,b,A),V=e;return HR(V.hash.outputLen,V.nByteLength,V.hmac)(T,D)}c.BASE._setWindowSize(8);function v(_,b,A,T=G){var he;const D=_;if(b=Ji("msgHash",b),A=Ji("publicKey",A),"strict"in T)throw new Error("options.strict was renamed to lowS");const{lowS:V,prehash:O}=T;let x,$;try{if(typeof D=="string"||jl(D))try{x=h.fromDER(D)}catch(je){if(!(je instanceof bl.Err))throw je;x=h.fromCompact(D)}else if(typeof D=="object"&&typeof D.r=="bigint"&&typeof D.s=="bigint"){const{r:je,s:q}=D;x=new h(je,q)}else throw new Error("PARSE");$=c.fromHex(A)}catch(je){if(je.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(V&&x.hasHighS())return!1;O&&(b=e.hash(b));const{r:K,s:E}=x,Y=F(b),j=l(E),X=a(Y*j),ee=a(K*j),le=(he=c.BASE.multiplyAndAddUnsafe($,X,ee))==null?void 0:he.toAffine();return le?a(le.x)===K:!1}return{CURVE:e,getPublicKey:M,getSharedSecret:C,sign:R,verify:v,ProjectivePoint:c,Signature:h,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function JX(n){return{hash:n,hmac:(e,...t)=>mx(n,e,hm(...t)),randomBytes:HM}}function eK(n,e){const t=r=>ZX({...n,...JX(r)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jR=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),iE=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),tK=BigInt(1),v_=BigInt(2),sE=(n,e)=>(n+e/v_)/e;function nK(n){const e=jR,t=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=n*n*n%e,u=c*c*n%e,d=Ti(u,t,e)*u%e,f=Ti(d,t,e)*u%e,p=Ti(f,v_,e)*c%e,m=Ti(p,i,e)*p%e,g=Ti(m,s,e)*m%e,y=Ti(g,a,e)*g%e,h=Ti(y,l,e)*y%e,w=Ti(h,a,e)*g%e,M=Ti(w,t,e)*u%e,S=Ti(M,o,e)*m%e,C=Ti(S,r,e)*c%e,k=Ti(C,v_,e);if(!y_.eql(y_.sqr(k),n))throw new Error("Cannot find square root");return k}const y_=VX(jR,void 0,void 0,{sqrt:nK}),xx=eK({a:BigInt(0),b:BigInt(7),Fp:y_,n:iE,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=iE,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-tK*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=sE(s*n,e),l=sE(-r*n,e);let c=jr(n-a*t-l*i,e),u=jr(-a*r-l*s,e);const d=c>o,f=u>o;if(d&&(c=e-c),f&&(u=e-u),c>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:d,k1:c,k2neg:f,k2:u}}}},F0);BigInt(0);xx.ProjectivePoint;const rK=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:xx},Symbol.toStringTag,{value:"Module"}));var lv;const ea=(lv=xx)!==null&&lv!==void 0?lv:rK,oE=BigInt("0xffffffffffffffff"),Cf=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),iK=ea.CURVE.n,sK=iK/BigInt(2),oK={type:"object",required:["crypto","id","version","address"],properties:{crypto:{type:"object",required:["cipher","ciphertext","cipherparams","kdf","kdfparams","mac"],properties:{cipher:{type:"string"},ciphertext:{type:"string"},cipherparams:{type:"object"},kdf:{type:"string"},kdfparams:{type:"object"},salt:{type:"string"},mac:{type:"string"}}},id:{type:"string"},version:{type:"number"},address:{type:"string"}}};var Pm;(function(n){n[n.Mainnet=1]="Mainnet",n[n.Goerli=5]="Goerli",n[n.Sepolia=11155111]="Sepolia"})(Pm||(Pm={}));var wn;(function(n){n.Chainstart="chainstart",n.Homestead="homestead",n.Dao="dao",n.TangerineWhistle="tangerineWhistle",n.SpuriousDragon="spuriousDragon",n.Byzantium="byzantium",n.Constantinople="constantinople",n.Petersburg="petersburg",n.Istanbul="istanbul",n.MuirGlacier="muirGlacier",n.Berlin="berlin",n.London="london",n.ArrowGlacier="arrowGlacier",n.GrayGlacier="grayGlacier",n.MergeForkIdTransition="mergeForkIdTransition",n.Merge="merge",n.Shanghai="shanghai",n.ShardingForkDev="shardingFork"})(wn||(wn={}));var aE;(function(n){n.ProofOfStake="pos",n.ProofOfWork="pow",n.ProofOfAuthority="poa"})(aE||(aE={}));var lE;(function(n){n.Ethash="ethash",n.Clique="clique",n.Casper="casper"})(lE||(lE={}));var Ar;(function(n){n.PolygonMainnet="polygon-mainnet",n.PolygonMumbai="polygon-mumbai",n.ArbitrumRinkebyTestnet="arbitrum-rinkeby-testnet",n.ArbitrumOne="arbitrum-one",n.xDaiChain="x-dai-chain",n.OptimisticKovan="optimistic-kovan",n.OptimisticEthereum="optimistic-ethereum"})(Ar||(Ar={}));var ki;(function(n){n[n.Number=0]="Number",n[n.BigInt=1]="BigInt",n[n.Uint8Array=2]="Uint8Array",n[n.PrefixedHexString=3]="PrefixedHexString"})(ki||(ki={}));const WR=n=>{if(typeof n!="string")throw new Error(`[stripHexPrefix] input must be type 'string', received ${typeof n}`);return ex(n)?n.slice(2):n};function aK(n){return!n||n==="0x0"?"0x0000000000000000":ex(n)?`0x${WR(n).padStart(16,"0")}`:`0x${n.padStart(16,"0")}`}const qR=function(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Received an invalid integer type: ${n}`);return`0x${n.toString(16)}`};function lK(n,e=!0){var t,r;const{name:i,config:s,difficulty:o,mixHash:a,gasLimit:l,coinbase:c,baseFeePerGas:u}=n;let{extraData:d,timestamp:f,nonce:p}=n;const m=Number(f),{chainId:g}=s;if(d===""&&(d="0x"),ex(f)||(f=qR(parseInt(f))),p.length!==18&&(p=aK(p)),s.eip155Block!==s.eip158Block)throw new Error("EIP155 block number must equal EIP 158 block number since both are part of SpuriousDragon hardfork and the client only supports activating the full hardfork");const y={name:i,chainId:g,networkId:g,genesis:{timestamp:f,gasLimit:parseInt(l),difficulty:parseInt(o),nonce:p,extraData:d,mixHash:a,coinbase:c,baseFeePerGas:u},hardfork:void 0,hardforks:[],bootstrapNodes:[],consensus:s.clique!==void 0?{type:"poa",algorithm:"clique",clique:{period:(t=s.clique.period)!==null&&t!==void 0?t:s.clique.blockperiodseconds,epoch:(r=s.clique.epoch)!==null&&r!==void 0?r:s.clique.epochlength}}:{type:"pow",algorithm:"ethash",ethash:{}}},h={[wn.Homestead]:{name:"homesteadBlock"},[wn.Dao]:{name:"daoForkBlock"},[wn.TangerineWhistle]:{name:"eip150Block"},[wn.SpuriousDragon]:{name:"eip155Block"},[wn.Byzantium]:{name:"byzantiumBlock"},[wn.Constantinople]:{name:"constantinopleBlock"},[wn.Petersburg]:{name:"petersburgBlock"},[wn.Istanbul]:{name:"istanbulBlock"},[wn.MuirGlacier]:{name:"muirGlacierBlock"},[wn.Berlin]:{name:"berlinBlock"},[wn.London]:{name:"londonBlock"},[wn.MergeForkIdTransition]:{name:"mergeForkBlock",postMerge:e},[wn.Shanghai]:{name:"shanghaiTime",postMerge:!0,isTimestamp:!0},[wn.ShardingForkDev]:{name:"shardingForkTime",postMerge:!0,isTimestamp:!0}},w=Object.keys(h).reduce((C,k)=>(C[h[k].name]=k,C),{}),M=Object.keys(s).filter(C=>w[C]!==void 0&&s[C]!==void 0&&s[C]!==null);if(y.hardforks=M.map(C=>({name:w[C],block:h[w[C]].isTimestamp===!0||typeof s[C]!="number"?null:s[C],timestamp:h[w[C]].isTimestamp===!0&&typeof s[C]=="number"?s[C]:void 0})).filter(C=>C.block!==null||C.timestamp!==void 0),y.hardforks.sort((C,k)=>{var F,N;return((F=C.block)!==null&&F!==void 0?F:1/0)-((N=k.block)!==null&&N!==void 0?N:1/0)}),y.hardforks.sort((C,k)=>{var F,N;return((F=C.timestamp)!==null&&F!==void 0?F:m)-((N=k.timestamp)!==null&&N!==void 0?N:m)}),s.terminalTotalDifficulty!==void 0){const C={name:wn.Merge,ttd:s.terminalTotalDifficulty,block:null},k=y.hardforks.findIndex(F=>{var N;return((N=h[F.name])===null||N===void 0?void 0:N.postMerge)===!0});k!==-1?y.hardforks.splice(k,0,C):y.hardforks.push(C)}const S=y.hardforks.length>0?y.hardforks.slice(-1)[0]:void 0;return y.hardfork=S==null?void 0:S.name,y.hardforks.unshift({name:wn.Chainstart,block:0}),y}function cK(n,e,t){try{if(["config","difficulty","gasLimit","alloc"].some(r=>!(r in n)))throw new Error("Invalid format, expected geth genesis fields missing");return e!==void 0&&(n.name=e),lK(n,t)}catch(r){throw new Error(`Error parsing parameters file: ${r.message}`)}}function XR(n){let e=n;if(typeof e!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof e}`);return e.length%2&&(e=`0${e}`),e}const uK=function(n){const e=qR(n);return An(`0x${XR(e.slice(2))}`)},Cn=function(n){var e;if(n==null)return new Uint8Array;if(n instanceof Uint8Array)return n;if(((e=n==null?void 0:n.constructor)===null||e===void 0?void 0:e.name)==="Uint8Array"||Array.isArray(n))return Uint8Array.from(n);if(typeof n=="string"){if(!nR(n))throw new Error(`Cannot convert string to Uint8Array. only supports 0x-prefixed hex strings and this string was given: ${n}`);return An(XR(WR(n)))}if(typeof n=="number")return Cn(Yn(n));if(typeof n=="bigint"){if(n<BigInt(0))throw new Error(`Cannot convert negative bigint to Uint8Array. Given: ${n}`);let t=n.toString(16);return t.length%2&&(t=`0${t}`),Cn(`0x${t}`)}if(n.toArray)return Uint8Array.from(n.toArray());throw new Error("invalid type")};function _n(n){const e=Ot(n);return BigInt(e==="0x"?0:e)}function dK(n){return Cn(`0x${n.toString(16)}`)}const KR=function(n){return new Uint8Array(n).fill(0)},fK=function(n,e,t){const r=KR(e);return t?n.length<e?(r.set(n),r):n.subarray(0,e):n.length<e?(r.set(n,e-n.length),r):n.subarray(-e)};function wx(n){if(!Ya(n)){const e=`This method only supports Uint8Array but input was: ${n}`;throw new Error(e)}}const cE=function(n,e){return wx(n),fK(n,e,!1)};function hK(n){let e=n[0];for(;n.length>0&&e.toString()==="0";)n=n.slice(1),e=n[0];return n}const Nm=function(n){return wx(n),hK(n)},Pn=n=>`0x${n.toString(16)}`;function Wt(n){return Nm(dK(n))}function pK(n,e){return n===BigInt(0)||n===BigInt(1)?n:e===void 0?n-BigInt(27):n-(e*BigInt(2)+BigInt(35))}function mK(n){return n===BigInt(0)||n===BigInt(1)}const Ax=function(n,e,t,r,i){const s=pK(e,i);if(!mK(s))throw new Error("Invalid signature v value");return new ea.Signature(_n(t),_n(r)).addRecoveryBit(Number(s)).recoverPublicKey(n).toRawBytes(!1).slice(1)};function Ac(n,e){if(n===null)return null;if(n===void 0)return;if(typeof n=="string"&&!nR(n))throw new Error(`A string must be provided with a 0x-prefix, given: ${n}`);if(typeof n=="number"&&!Number.isSafeInteger(n))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const t=Cn(n);switch(e){case ki.Uint8Array:return t;case ki.BigInt:return _n(t);case ki.Number:{const r=_n(t);if(r>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(r)}case ki.PrefixedHexString:return Ot(t);default:throw new Error("unknown outputType")}}var Bo={};Object.defineProperty(Bo,"__esModule",{value:!0});var hi=Bo.RLP=Bo.utils=Bo.decode=Bo.encode=void 0;function Ex(n){if(Array.isArray(n)){const t=[];let r=0;for(let i=0;i<n.length;i++){const s=Ex(n[i]);t.push(s),r+=s.length}return b_(dE(r,192),...t)}const e=tI(n);return e.length===1&&e[0]<128?e:b_(dE(e.length,128),e)}Bo.encode=Ex;function Ec(n,e,t){if(t>n.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return n.slice(e,t)}function uE(n){if(n[0]===0)throw new Error("invalid RLP: extra zeros");return ZR(QR(n))}function dE(n,e){if(n<56)return Uint8Array.from([n+e]);const t=x_(n),r=t.length/2,i=x_(e+55+r);return Uint8Array.from(km(i+t))}function YR(n,e=!1){if(typeof n>"u"||n===null||n.length===0)return Uint8Array.from([]);const t=tI(n),r=__(t);if(e)return r;if(r.remainder.length!==0)throw new Error("invalid RLP: remainder must be zero");return r.data}Bo.decode=YR;function __(n){let e,t,r,i,s;const o=[],a=n[0];if(a<=127)return{data:n.slice(0,1),remainder:n.slice(1)};if(a<=183){if(e=a-127,a===128?r=Uint8Array.from([]):r=Ec(n,1,e),e===2&&r[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:r,remainder:n.slice(e)}}else if(a<=191){if(t=a-182,n.length-1<t)throw new Error("invalid RLP: not enough bytes for string length");if(e=uE(Ec(n,1,t)),e<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return r=Ec(n,t,e+t),{data:r,remainder:n.slice(e+t)}}else if(a<=247){for(e=a-191,i=Ec(n,1,e);i.length;)s=__(i),o.push(s.data),i=s.remainder;return{data:o,remainder:n.slice(e)}}else{if(t=a-246,e=uE(Ec(n,1,t)),e<56)throw new Error("invalid RLP: encoded list too short");const l=t+e;if(l>n.length)throw new Error("invalid RLP: total length is larger than the data");for(i=Ec(n,t,l);i.length;)s=__(i),o.push(s.data),i=s.remainder;return{data:o,remainder:n.slice(l)}}}const gK=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function QR(n){let e="";for(let t=0;t<n.length;t++)e+=gK[n[t]];return e}function ZR(n){const e=Number.parseInt(n,16);if(Number.isNaN(e))throw new Error("Invalid byte sequence");return e}function km(n){if(typeof n!="string")throw new TypeError("hexToBytes: expected string, got "+typeof n);if(n.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(n.length/2);for(let t=0;t<e.length;t++){const r=t*2;e[t]=ZR(n.slice(r,r+2))}return e}function b_(...n){if(n.length===1)return n[0];const e=n.reduce((r,i)=>r+i.length,0),t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}function JR(n){return new TextEncoder().encode(n)}function x_(n){if(n<0)throw new Error("Invalid integer as argument, must be unsigned!");const e=n.toString(16);return e.length%2?`0${e}`:e}function vK(n){return n.length%2?`0${n}`:n}function eI(n){return n.length>=2&&n[0]==="0"&&n[1]==="x"}function yK(n){return typeof n!="string"?n:eI(n)?n.slice(2):n}function tI(n){if(n instanceof Uint8Array)return n;if(typeof n=="string")return eI(n)?km(vK(yK(n))):JR(n);if(typeof n=="number"||typeof n=="bigint")return n?km(x_(n)):Uint8Array.from([]);if(n==null)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof n)}Bo.utils={bytesToHex:QR,concatBytes:b_,hexToBytes:km,utf8ToBytes:JR};hi=Bo.RLP={encode:Ex,decode:YR};var nI={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */(function(n){(function(e){e(typeof DO_NOT_EXPORT_CRC>"u"?n:{})})(function(e){e.version="1.2.2";function t(){for(var N=0,B=new Array(256),I=0;I!=256;++I)N=I,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,B[I]=N;return typeof Int32Array<"u"?new Int32Array(B):B}var r=t();function i(N){var B=0,I=0,U=0,G=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(U=0;U!=256;++U)G[U]=N[U];for(U=0;U!=256;++U)for(I=N[U],B=256+U;B<4096;B+=256)I=G[B]=I>>>8^N[I&255];var R=[];for(U=1;U!=16;++U)R[U-1]=typeof Int32Array<"u"?G.subarray(U*256,U*256+256):G.slice(U*256,U*256+256);return R}var s=i(r),o=s[0],a=s[1],l=s[2],c=s[3],u=s[4],d=s[5],f=s[6],p=s[7],m=s[8],g=s[9],y=s[10],h=s[11],w=s[12],M=s[13],S=s[14];function C(N,B){for(var I=B^-1,U=0,G=N.length;U<G;)I=I>>>8^r[(I^N.charCodeAt(U++))&255];return~I}function k(N,B){for(var I=B^-1,U=N.length-15,G=0;G<U;)I=S[N[G++]^I&255]^M[N[G++]^I>>8&255]^w[N[G++]^I>>16&255]^h[N[G++]^I>>>24]^y[N[G++]]^g[N[G++]]^m[N[G++]]^p[N[G++]]^f[N[G++]]^d[N[G++]]^u[N[G++]]^c[N[G++]]^l[N[G++]]^a[N[G++]]^o[N[G++]]^r[N[G++]];for(U+=15;G<U;)I=I>>>8^r[(I^N[G++])&255];return~I}function F(N,B){for(var I=B^-1,U=0,G=N.length,R=0,v=0;U<G;)R=N.charCodeAt(U++),R<128?I=I>>>8^r[(I^R)&255]:R<2048?(I=I>>>8^r[(I^(192|R>>6&31))&255],I=I>>>8^r[(I^(128|R&63))&255]):R>=55296&&R<57344?(R=(R&1023)+64,v=N.charCodeAt(U++)&1023,I=I>>>8^r[(I^(240|R>>8&7))&255],I=I>>>8^r[(I^(128|R>>2&63))&255],I=I>>>8^r[(I^(128|v>>6&15|(R&3)<<4))&255],I=I>>>8^r[(I^(128|v&63))&255]):(I=I>>>8^r[(I^(224|R>>12&15))&255],I=I>>>8^r[(I^(128|R>>6&63))&255],I=I>>>8^r[(I^(128|R&63))&255]);return~I}e.table=r,e.bstr=C,e.buf=k,e.str=F})})(nI);const _K=Jl(nI),bK={name:"goerli",chainId:5,networkId:5,defaultHardfork:"merge",consensus:{type:"poa",algorithm:"clique",clique:{period:15,epoch:3e4}},comment:"Cross-client PoA test network",url:"https://github.com/goerli/testnet",genesis:{timestamp:"0x5c51a607",gasLimit:10485760,difficulty:1,nonce:"0x0000000000000000",extraData:"0x22466c6578692069732061207468696e6722202d204166726900000000000000e0a2bd4258d2768837baa26a28fe71dc079f84c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"},hardforks:[{name:"chainstart",block:0,forkHash:"0xa3f5ab08"},{name:"homestead",block:0,forkHash:"0xa3f5ab08"},{name:"tangerineWhistle",block:0,forkHash:"0xa3f5ab08"},{name:"spuriousDragon",block:0,forkHash:"0xa3f5ab08"},{name:"byzantium",block:0,forkHash:"0xa3f5ab08"},{name:"constantinople",block:0,forkHash:"0xa3f5ab08"},{name:"petersburg",block:0,forkHash:"0xa3f5ab08"},{name:"istanbul",block:1561651,forkHash:"0xc25efa5c"},{name:"berlin",block:4460644,forkHash:"0x757a1c47"},{name:"london",block:5062605,forkHash:"0xb8c6299d"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://goerli.etherscan.io/block/7382818",name:"merge",ttd:"10790000",block:7382819,forkHash:"0xb8c6299d"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,forkHash:null}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.goerli.ethdisco.net"]},xK={name:"mainnet",chainId:1,networkId:1,defaultHardfork:"merge",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"The Ethereum main chain",url:"https://ethstats.net/",genesis:{gasLimit:5e3,difficulty:17179869184,nonce:"0x0000000000000042",extraData:"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfc64ec04"},{name:"homestead",block:115e4,forkHash:"0x97c2c34c"},{name:"dao",block:192e4,forkHash:"0x91d1f948"},{name:"tangerineWhistle",block:2463e3,forkHash:"0x7a64da13"},{name:"spuriousDragon",block:2675e3,forkHash:"0x3edd5b10"},{name:"byzantium",block:437e4,forkHash:"0xa00bc324"},{name:"constantinople",block:728e4,forkHash:"0x668db0af"},{name:"petersburg",block:728e4,forkHash:"0x668db0af"},{name:"istanbul",block:9069e3,forkHash:"0x879d6e30"},{name:"muirGlacier",block:92e5,forkHash:"0xe029e991"},{name:"berlin",block:12244e3,forkHash:"0x0eb440f6"},{name:"london",block:12965e3,forkHash:"0xb715077d"},{name:"arrowGlacier",block:13773e3,forkHash:"0x20c327fc"},{name:"grayGlacier",block:1505e4,forkHash:"0xf0afd0e3"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://etherscan.io/block/15537393",name:"merge",ttd:"58750000000000000000000",block:15537394,forkHash:"0xf0afd0e3"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,forkHash:null}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net"]},wK={name:"sepolia",chainId:11155111,networkId:11155111,defaultHardfork:"merge",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"PoW test network to replace Ropsten",url:"https://github.com/ethereum/go-ethereum/pull/23730",genesis:{timestamp:"0x6159af19",gasLimit:3e7,difficulty:131072,nonce:"0x0000000000000000",extraData:"0x5365706f6c69612c20417468656e732c204174746963612c2047726565636521"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfe3366e7"},{name:"homestead",block:0,forkHash:"0xfe3366e7"},{name:"tangerineWhistle",block:0,forkHash:"0xfe3366e7"},{name:"spuriousDragon",block:0,forkHash:"0xfe3366e7"},{name:"byzantium",block:0,forkHash:"0xfe3366e7"},{name:"constantinople",block:0,forkHash:"0xfe3366e7"},{name:"petersburg",block:0,forkHash:"0xfe3366e7"},{name:"istanbul",block:0,forkHash:"0xfe3366e7"},{name:"muirGlacier",block:0,forkHash:"0xfe3366e7"},{name:"berlin",block:0,forkHash:"0xfe3366e7"},{name:"london",block:0,forkHash:"0xfe3366e7"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://sepolia.etherscan.io/block/1450408",name:"merge",ttd:"17000000000000000",block:1450409,forkHash:"0xfe3366e7"},{name:"mergeForkIdTransition",block:1735371,forkHash:"0xb96cbd13"},{name:"shanghai",block:null,timestamp:"1677557088",forkHash:"0xf7f9bc08"}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.sepolia.ethdisco.net"]},AK={name:"EIP-1153",number:1153,comment:"Transient Storage",url:"https://eips.ethereum.org/EIPS/eip-1153",status:"Review",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{tstore:{v:100,d:"Base fee of the TSTORE opcode"},tload:{v:100,d:"Base fee of the TLOAD opcode"}},vm:{},pow:{}},EK={name:"EIP-1559",number:1559,comment:"Fee market change for ETH 1.0 chain",url:"https://eips.ethereum.org/EIPS/eip-1559",status:"Final",minimumHardfork:"berlin",requiredEIPs:[2930],gasConfig:{baseFeeMaxChangeDenominator:{v:8,d:"Maximum base fee change denominator"},elasticityMultiplier:{v:2,d:"Maximum block gas target elasticity"},initialBaseFee:{v:1e9,d:"Initial base fee on first EIP1559 block"}},gasPrices:{},vm:{},pow:{}},SK={name:"EIP-2315",number:2315,comment:"Simple subroutines for the EVM",url:"https://eips.ethereum.org/EIPS/eip-2315",status:"Draft",minimumHardfork:"istanbul",gasConfig:{},gasPrices:{beginsub:{v:2,d:"Base fee of the BEGINSUB opcode"},returnsub:{v:5,d:"Base fee of the RETURNSUB opcode"},jumpsub:{v:10,d:"Base fee of the JUMPSUB opcode"}},vm:{},pow:{}},TK={name:"EIP-2537",number:2537,comment:"BLS12-381 precompiles",url:"https://eips.ethereum.org/EIPS/eip-2537",status:"Draft",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{Bls12381G1AddGas:{v:600,d:"Gas cost of a single BLS12-381 G1 addition precompile-call"},Bls12381G1MulGas:{v:12e3,d:"Gas cost of a single BLS12-381 G1 multiplication precompile-call"},Bls12381G2AddGas:{v:4500,d:"Gas cost of a single BLS12-381 G2 addition precompile-call"},Bls12381G2MulGas:{v:55e3,d:"Gas cost of a single BLS12-381 G2 multiplication precompile-call"},Bls12381PairingBaseGas:{v:115e3,d:"Base gas cost of BLS12-381 pairing check"},Bls12381PairingPerPairGas:{v:23e3,d:"Per-pair gas cost of BLS12-381 pairing check"},Bls12381MapG1Gas:{v:5500,d:"Gas cost of BLS12-381 map field element to G1"},Bls12381MapG2Gas:{v:11e4,d:"Gas cost of BLS12-381 map field element to G2"},Bls12381MultiExpGasDiscount:{v:[[1,1200],[2,888],[3,764],[4,641],[5,594],[6,547],[7,500],[8,453],[9,438],[10,423],[11,408],[12,394],[13,379],[14,364],[15,349],[16,334],[17,330],[18,326],[19,322],[20,318],[21,314],[22,310],[23,306],[24,302],[25,298],[26,294],[27,289],[28,285],[29,281],[30,277],[31,273],[32,269],[33,268],[34,266],[35,265],[36,263],[37,262],[38,260],[39,259],[40,257],[41,256],[42,254],[43,253],[44,251],[45,250],[46,248],[47,247],[48,245],[49,244],[50,242],[51,241],[52,239],[53,238],[54,236],[55,235],[56,233],[57,232],[58,231],[59,229],[60,228],[61,226],[62,225],[63,223],[64,222],[65,221],[66,220],[67,219],[68,219],[69,218],[70,217],[71,216],[72,216],[73,215],[74,214],[75,213],[76,213],[77,212],[78,211],[79,211],[80,210],[81,209],[82,208],[83,208],[84,207],[85,206],[86,205],[87,205],[88,204],[89,203],[90,202],[91,202],[92,201],[93,200],[94,199],[95,199],[96,198],[97,197],[98,196],[99,196],[100,195],[101,194],[102,193],[103,193],[104,192],[105,191],[106,191],[107,190],[108,189],[109,188],[110,188],[111,187],[112,186],[113,185],[114,185],[115,184],[116,183],[117,182],[118,182],[119,181],[120,180],[121,179],[122,179],[123,178],[124,177],[125,176],[126,176],[127,175],[128,174]],d:"Discount gas costs of calls to the MultiExp precompiles with `k` (point, scalar) pair"}},vm:{},pow:{}},MK={name:"EIP-2565",number:2565,comment:"ModExp gas cost",url:"https://eips.ethereum.org/EIPS/eip-2565",status:"Final",minimumHardfork:"byzantium",gasConfig:{},gasPrices:{modexpGquaddivisor:{v:3,d:"Gquaddivisor from modexp precompile for gas calculation"}},vm:{},pow:{}},RK={name:"EIP-2718",comment:"Typed Transaction Envelope",url:"https://eips.ethereum.org/EIPS/eip-2718",status:"Final",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{},vm:{},pow:{}},IK={name:"EIP-2929",comment:"Gas cost increases for state access opcodes",url:"https://eips.ethereum.org/EIPS/eip-2929",status:"Final",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{coldsload:{v:2100,d:"Gas cost of the first read of storage from a given location (per transaction)"},coldaccountaccess:{v:2600,d:"Gas cost of the first read of a given address (per transaction)"},warmstorageread:{v:100,d:"Gas cost of reading storage locations which have already loaded 'cold'"},sstoreCleanGasEIP2200:{v:2900,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreNoopGasEIP2200:{v:100,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:100,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitRefundEIP2200:{v:19900,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanRefundEIP2200:{v:4900,d:"Once per SSTORE operation for resetting to the original non-zero value"},call:{v:0,d:"Base fee of the CALL opcode"},callcode:{v:0,d:"Base fee of the CALLCODE opcode"},delegatecall:{v:0,d:"Base fee of the DELEGATECALL opcode"},staticcall:{v:0,d:"Base fee of the STATICCALL opcode"},balance:{v:0,d:"Base fee of the BALANCE opcode"},extcodesize:{v:0,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:0,d:"Base fee of the EXTCODECOPY opcode"},extcodehash:{v:0,d:"Base fee of the EXTCODEHASH opcode"},sload:{v:0,d:"Base fee of the SLOAD opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"}},vm:{},pow:{}},CK={name:"EIP-2930",comment:"Optional access lists",url:"https://eips.ethereum.org/EIPS/eip-2930",status:"Final",minimumHardfork:"istanbul",requiredEIPs:[2718,2929],gasConfig:{},gasPrices:{accessListStorageKeyCost:{v:1900,d:"Gas cost per storage key in an Access List transaction"},accessListAddressCost:{v:2400,d:"Gas cost per storage key in an Access List transaction"}},vm:{},pow:{}},PK={name:"EIP-3198",number:3198,comment:"BASEFEE opcode",url:"https://eips.ethereum.org/EIPS/eip-3198",status:"Final",minimumHardfork:"london",gasConfig:{},gasPrices:{basefee:{v:2,d:"Gas cost of the BASEFEE opcode"}},vm:{},pow:{}},NK={name:"EIP-3529",comment:"Reduction in refunds",url:"https://eips.ethereum.org/EIPS/eip-3529",status:"Final",minimumHardfork:"berlin",requiredEIPs:[2929],gasConfig:{maxRefundQuotient:{v:5,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{selfdestructRefund:{v:0,d:"Refunded following a selfdestruct operation"},sstoreClearRefundEIP2200:{v:4800,d:"Once per SSTORE operation for clearing an originally existing storage slot"}},vm:{},pow:{}},kK={name:"EIP-3540",number:3540,comment:"EVM Object Format (EOF) v1",url:"https://eips.ethereum.org/EIPS/eip-3540",status:"Review",minimumHardfork:"london",requiredEIPs:[3541],gasConfig:{},gasPrices:{},vm:{},pow:{}},BK={name:"EIP-3541",comment:"Reject new contracts starting with the 0xEF byte",url:"https://eips.ethereum.org/EIPS/eip-3541",status:"Final",minimumHardfork:"berlin",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},LK={name:"EIP-3554",comment:"Reduction in refunds",url:"Difficulty Bomb Delay to December 1st 2021",status:"Final",minimumHardfork:"muirGlacier",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:95e5,d:"the amount of blocks to delay the difficulty bomb with"}}},DK={name:"EIP-3607",number:3607,comment:"Reject transactions from senders with deployed code",url:"https://eips.ethereum.org/EIPS/eip-3607",status:"Final",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},OK={name:"EIP-3651",number:3198,comment:"Warm COINBASE",url:"https://eips.ethereum.org/EIPS/eip-3651",status:"Review",minimumHardfork:"london",requiredEIPs:[2929],gasConfig:{},gasPrices:{},vm:{},pow:{}},FK={name:"EIP-3670",number:3670,comment:"EOF - Code Validation",url:"https://eips.ethereum.org/EIPS/eip-3670",status:"Review",minimumHardfork:"london",requiredEIPs:[3540],gasConfig:{},gasPrices:{},vm:{},pow:{}},UK={name:"EIP-3675",number:3675,comment:"Upgrade consensus to Proof-of-Stake",url:"https://eips.ethereum.org/EIPS/eip-3675",status:"Final",minimumHardfork:"london",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},HK={name:"EIP-3855",number:3855,comment:"PUSH0 instruction",url:"https://eips.ethereum.org/EIPS/eip-3855",status:"Review",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{push0:{v:2,d:"Base fee of the PUSH0 opcode"}},vm:{},pow:{}},zK={name:"EIP-3860",number:3860,comment:"Limit and meter initcode",url:"https://eips.ethereum.org/EIPS/eip-3860",status:"Review",minimumHardfork:"spuriousDragon",requiredEIPs:[],gasConfig:{},gasPrices:{initCodeWordCost:{v:2,d:"Gas to pay for each word (32 bytes) of initcode when creating a contract"}},vm:{maxInitCodeSize:{v:49152,d:"Maximum length of initialization code when creating a contract"}},pow:{}},GK={name:"EIP-4345",number:4345,comment:"Difficulty Bomb Delay to June 2022",url:"https://eips.ethereum.org/EIPS/eip-4345",status:"Final",minimumHardfork:"london",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:107e5,d:"the amount of blocks to delay the difficulty bomb with"}}},VK={name:"EIP-4399",number:4399,comment:"Supplant DIFFICULTY opcode with PREVRANDAO",url:"https://eips.ethereum.org/EIPS/eip-4399",status:"Review",minimumHardfork:"london",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},$K={name:"EIP-5133",number:5133,comment:"Delaying Difficulty Bomb to mid-September 2022",url:"https://eips.ethereum.org/EIPS/eip-5133",status:"Draft",minimumHardfork:"grayGlacier",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:114e5,d:"the amount of blocks to delay the difficulty bomb with"}}},Sc={1153:AK,1559:EK,2315:SK,2537:TK,2565:MK,2718:RK,2929:IK,2930:CK,3198:PK,3529:NK,3540:kK,3541:BK,3554:LK,3607:DK,3651:OK,3670:FK,3675:UK,3855:HK,3860:zK,4345:GK,4399:VK,5133:$K},jK={name:"chainstart",comment:"Start of the Ethereum main chain",url:"",status:"",gasConfig:{minGasLimit:{v:5e3,d:"Minimum the gas limit may ever be"},gasLimitBoundDivisor:{v:1024,d:"The bound divisor of the gas limit, used in update calculations"},maxRefundQuotient:{v:2,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{base:{v:2,d:"Gas base cost, used e.g. for ChainID opcode (Istanbul)"},tierStep:{v:[0,2,3,5,8,10,20],d:"Once per operation, for a selection of them"},exp:{v:10,d:"Base fee of the EXP opcode"},expByte:{v:10,d:"Times ceil(log256(exponent)) for the EXP instruction"},sha3:{v:30,d:"Base fee of the SHA3 opcode"},sha3Word:{v:6,d:"Once per word of the SHA3 operation's data"},sload:{v:50,d:"Base fee of the SLOAD opcode"},sstoreSet:{v:2e4,d:"Once per SSTORE operation if the zeroness changes from zero"},sstoreReset:{v:5e3,d:"Once per SSTORE operation if the zeroness does not change from zero"},sstoreRefund:{v:15e3,d:"Once per SSTORE operation if the zeroness changes to zero"},jumpdest:{v:1,d:"Base fee of the JUMPDEST opcode"},log:{v:375,d:"Base fee of the LOG opcode"},logData:{v:8,d:"Per byte in a LOG* operation's data"},logTopic:{v:375,d:"Multiplied by the * of the LOG*, per LOG transaction. e.g. LOG0 incurs 0 * c_txLogTopicGas, LOG4 incurs 4 * c_txLogTopicGas"},create:{v:32e3,d:"Base fee of the CREATE opcode"},call:{v:40,d:"Base fee of the CALL opcode"},callStipend:{v:2300,d:"Free gas given at beginning of call"},callValueTransfer:{v:9e3,d:"Paid for CALL when the value transfor is non-zero"},callNewAccount:{v:25e3,d:"Paid for CALL when the destination address didn't exist prior"},selfdestructRefund:{v:24e3,d:"Refunded following a selfdestruct operation"},memory:{v:3,d:"Times the address of the (highest referenced byte in memory + 1). NOTE: referencing happens on read, write and in instructions such as RETURN and CALL"},quadCoeffDiv:{v:512,d:"Divisor for the quadratic particle of the memory cost equation"},createData:{v:200,d:""},tx:{v:21e3,d:"Per transaction. NOTE: Not payable on data of calls between transactions"},txCreation:{v:32e3,d:"The cost of creating a contract via tx"},txDataZero:{v:4,d:"Per byte of data attached to a transaction that equals zero. NOTE: Not payable on data of calls between transactions"},txDataNonZero:{v:68,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},copy:{v:3,d:"Multiplied by the number of 32-byte words that are copied (round up) for any *COPY operation and added"},ecRecover:{v:3e3,d:""},sha256:{v:60,d:""},sha256Word:{v:12,d:""},ripemd160:{v:600,d:""},ripemd160Word:{v:120,d:""},identity:{v:15,d:""},identityWord:{v:3,d:""},stop:{v:0,d:"Base fee of the STOP opcode"},add:{v:3,d:"Base fee of the ADD opcode"},mul:{v:5,d:"Base fee of the MUL opcode"},sub:{v:3,d:"Base fee of the SUB opcode"},div:{v:5,d:"Base fee of the DIV opcode"},sdiv:{v:5,d:"Base fee of the SDIV opcode"},mod:{v:5,d:"Base fee of the MOD opcode"},smod:{v:5,d:"Base fee of the SMOD opcode"},addmod:{v:8,d:"Base fee of the ADDMOD opcode"},mulmod:{v:8,d:"Base fee of the MULMOD opcode"},signextend:{v:5,d:"Base fee of the SIGNEXTEND opcode"},lt:{v:3,d:"Base fee of the LT opcode"},gt:{v:3,d:"Base fee of the GT opcode"},slt:{v:3,d:"Base fee of the SLT opcode"},sgt:{v:3,d:"Base fee of the SGT opcode"},eq:{v:3,d:"Base fee of the EQ opcode"},iszero:{v:3,d:"Base fee of the ISZERO opcode"},and:{v:3,d:"Base fee of the AND opcode"},or:{v:3,d:"Base fee of the OR opcode"},xor:{v:3,d:"Base fee of the XOR opcode"},not:{v:3,d:"Base fee of the NOT opcode"},byte:{v:3,d:"Base fee of the BYTE opcode"},address:{v:2,d:"Base fee of the ADDRESS opcode"},balance:{v:20,d:"Base fee of the BALANCE opcode"},origin:{v:2,d:"Base fee of the ORIGIN opcode"},caller:{v:2,d:"Base fee of the CALLER opcode"},callvalue:{v:2,d:"Base fee of the CALLVALUE opcode"},calldataload:{v:3,d:"Base fee of the CALLDATALOAD opcode"},calldatasize:{v:2,d:"Base fee of the CALLDATASIZE opcode"},calldatacopy:{v:3,d:"Base fee of the CALLDATACOPY opcode"},codesize:{v:2,d:"Base fee of the CODESIZE opcode"},codecopy:{v:3,d:"Base fee of the CODECOPY opcode"},gasprice:{v:2,d:"Base fee of the GASPRICE opcode"},extcodesize:{v:20,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:20,d:"Base fee of the EXTCODECOPY opcode"},blockhash:{v:20,d:"Base fee of the BLOCKHASH opcode"},coinbase:{v:2,d:"Base fee of the COINBASE opcode"},timestamp:{v:2,d:"Base fee of the TIMESTAMP opcode"},number:{v:2,d:"Base fee of the NUMBER opcode"},difficulty:{v:2,d:"Base fee of the DIFFICULTY opcode"},gaslimit:{v:2,d:"Base fee of the GASLIMIT opcode"},pop:{v:2,d:"Base fee of the POP opcode"},mload:{v:3,d:"Base fee of the MLOAD opcode"},mstore:{v:3,d:"Base fee of the MSTORE opcode"},mstore8:{v:3,d:"Base fee of the MSTORE8 opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"},jump:{v:8,d:"Base fee of the JUMP opcode"},jumpi:{v:10,d:"Base fee of the JUMPI opcode"},pc:{v:2,d:"Base fee of the PC opcode"},msize:{v:2,d:"Base fee of the MSIZE opcode"},gas:{v:2,d:"Base fee of the GAS opcode"},push:{v:3,d:"Base fee of the PUSH opcode"},dup:{v:3,d:"Base fee of the DUP opcode"},swap:{v:3,d:"Base fee of the SWAP opcode"},callcode:{v:40,d:"Base fee of the CALLCODE opcode"},return:{v:0,d:"Base fee of the RETURN opcode"},invalid:{v:0,d:"Base fee of the INVALID opcode"},selfdestruct:{v:0,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{stackLimit:{v:1024,d:"Maximum size of VM stack allowed"},callCreateDepth:{v:1024,d:"Maximum depth of call/create stack"},maxExtraDataSize:{v:32,d:"Maximum size extra data may be after Genesis"}},pow:{minimumDifficulty:{v:131072,d:"The minimum that the difficulty may ever be"},difficultyBoundDivisor:{v:2048,d:"The bound divisor of the difficulty, used in the update calculations"},durationLimit:{v:13,d:"The decision boundary on the blocktime duration used to determine whether difficulty should go up or not"},epochDuration:{v:3e4,d:"Duration between proof-of-work epochs"},timebombPeriod:{v:1e5,d:"Exponential difficulty timebomb period"},minerReward:{v:"5000000000000000000",d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:0,d:"the amount of blocks to delay the difficulty bomb with"}}},WK={name:"dao",comment:"DAO rescue hardfork",url:"https://eips.ethereum.org/EIPS/eip-779",status:"Final",gasConfig:{},gasPrices:{},vm:{},pow:{}},qK={name:"homestead",comment:"Homestead hardfork with protocol and network changes",url:"https://eips.ethereum.org/EIPS/eip-606",status:"Final",gasConfig:{},gasPrices:{delegatecall:{v:40,d:"Base fee of the DELEGATECALL opcode"}},vm:{},pow:{}},XK={name:"tangerineWhistle",comment:"Hardfork with gas cost changes for IO-heavy operations",url:"https://eips.ethereum.org/EIPS/eip-608",status:"Final",gasConfig:{},gasPrices:{sload:{v:200,d:"Once per SLOAD operation"},call:{v:700,d:"Once per CALL operation & message call transaction"},extcodesize:{v:700,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:700,d:"Base fee of the EXTCODECOPY opcode"},balance:{v:400,d:"Base fee of the BALANCE opcode"},delegatecall:{v:700,d:"Base fee of the DELEGATECALL opcode"},callcode:{v:700,d:"Base fee of the CALLCODE opcode"},selfdestruct:{v:5e3,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{},pow:{}},KK={name:"spuriousDragon",comment:"HF with EIPs for simple replay attack protection, EXP cost increase, state trie clearing, contract code size limit",url:"https://eips.ethereum.org/EIPS/eip-607",status:"Final",gasConfig:{},gasPrices:{expByte:{v:50,d:"Times ceil(log256(exponent)) for the EXP instruction"}},vm:{maxCodeSize:{v:24576,d:"Maximum length of contract code"}},pow:{}},YK={name:"byzantium",comment:"Hardfork with new precompiles, instructions and other protocol changes",url:"https://eips.ethereum.org/EIPS/eip-609",status:"Final",gasConfig:{},gasPrices:{modexpGquaddivisor:{v:20,d:"Gquaddivisor from modexp precompile for gas calculation"},ecAdd:{v:500,d:"Gas costs for curve addition precompile"},ecMul:{v:4e4,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:1e5,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:8e4,d:"Gas costs regarding curve pairing precompile input length"},revert:{v:0,d:"Base fee of the REVERT opcode"},staticcall:{v:700,d:"Base fee of the STATICCALL opcode"},returndatasize:{v:2,d:"Base fee of the RETURNDATASIZE opcode"},returndatacopy:{v:3,d:"Base fee of the RETURNDATACOPY opcode"}},vm:{},pow:{minerReward:{v:"3000000000000000000",d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:3e6,d:"the amount of blocks to delay the difficulty bomb with"}}},QK={name:"constantinople",comment:"Postponed hardfork including EIP-1283 (SSTORE gas metering changes)",url:"https://eips.ethereum.org/EIPS/eip-1013",status:"Final",gasConfig:{},gasPrices:{netSstoreNoopGas:{v:200,d:"Once per SSTORE operation if the value doesn't change"},netSstoreInitGas:{v:2e4,d:"Once per SSTORE operation from clean zero"},netSstoreCleanGas:{v:5e3,d:"Once per SSTORE operation from clean non-zero"},netSstoreDirtyGas:{v:200,d:"Once per SSTORE operation from dirty"},netSstoreClearRefund:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},netSstoreResetRefund:{v:4800,d:"Once per SSTORE operation for resetting to the original non-zero value"},netSstoreResetClearRefund:{v:19800,d:"Once per SSTORE operation for resetting to the original zero value"},shl:{v:3,d:"Base fee of the SHL opcode"},shr:{v:3,d:"Base fee of the SHR opcode"},sar:{v:3,d:"Base fee of the SAR opcode"},extcodehash:{v:400,d:"Base fee of the EXTCODEHASH opcode"},create2:{v:32e3,d:"Base fee of the CREATE2 opcode"}},vm:{},pow:{minerReward:{v:"2000000000000000000",d:"The amount a miner gets rewarded for mining a block"},difficultyBombDelay:{v:5e6,d:"the amount of blocks to delay the difficulty bomb with"}}},ZK={name:"petersburg",comment:"Aka constantinopleFix, removes EIP-1283, activate together with or after constantinople",url:"https://eips.ethereum.org/EIPS/eip-1716",status:"Final",gasConfig:{},gasPrices:{netSstoreNoopGas:{v:null,d:"Removed along EIP-1283"},netSstoreInitGas:{v:null,d:"Removed along EIP-1283"},netSstoreCleanGas:{v:null,d:"Removed along EIP-1283"},netSstoreDirtyGas:{v:null,d:"Removed along EIP-1283"},netSstoreClearRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetClearRefund:{v:null,d:"Removed along EIP-1283"}},vm:{},pow:{}},JK={name:"istanbul",comment:"HF targeted for December 2019 following the Constantinople/Petersburg HF",url:"https://eips.ethereum.org/EIPS/eip-1679",status:"Final",gasConfig:{},gasPrices:{blake2Round:{v:1,d:"Gas cost per round for the Blake2 F precompile"},ecAdd:{v:150,d:"Gas costs for curve addition precompile"},ecMul:{v:6e3,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:45e3,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:34e3,d:"Gas costs regarding curve pairing precompile input length"},txDataNonZero:{v:16,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},sstoreSentryGasEIP2200:{v:2300,d:"Minimum gas required to be present for an SSTORE call, not consumed"},sstoreNoopGasEIP2200:{v:800,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:800,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitGasEIP2200:{v:2e4,d:"Once per SSTORE operation from clean zero to non-zero"},sstoreInitRefundEIP2200:{v:19200,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanGasEIP2200:{v:5e3,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreCleanRefundEIP2200:{v:4200,d:"Once per SSTORE operation for resetting to the original non-zero value"},sstoreClearRefundEIP2200:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},balance:{v:700,d:"Base fee of the BALANCE opcode"},extcodehash:{v:700,d:"Base fee of the EXTCODEHASH opcode"},chainid:{v:2,d:"Base fee of the CHAINID opcode"},selfbalance:{v:5,d:"Base fee of the SELFBALANCE opcode"},sload:{v:800,d:"Base fee of the SLOAD opcode"}},vm:{},pow:{}},eY={name:"muirGlacier",comment:"HF to delay the difficulty bomb",url:"https://eips.ethereum.org/EIPS/eip-2384",status:"Final",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:9e6,d:"the amount of blocks to delay the difficulty bomb with"}}},tY={name:"berlin",comment:"HF targeted for July 2020 following the Muir Glacier HF",url:"https://eips.ethereum.org/EIPS/eip-2070",status:"Final",eips:[2565,2929,2718,2930]},nY={name:"london",comment:"HF targeted for July 2021 following the Berlin fork",url:"https://github.com/ethereum/eth1.0-specs/blob/master/network-upgrades/mainnet-upgrades/london.md",status:"Final",eips:[1559,3198,3529,3541]},rY={name:"shanghai",comment:"Next feature hardfork after the merge hardfork having withdrawals, warm coinbase, push0, limit/meter initcode",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/shanghai.md",status:"Final",eips:[3651,3855,3860,4895]},iY={name:"arrowGlacier",comment:"HF to delay the difficulty bomb",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/arrow-glacier.md",status:"Final",eips:[4345],gasConfig:{},gasPrices:{},vm:{},pow:{}},sY={name:"grayGlacier",comment:"Delaying the difficulty bomb to Mid September 2022",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/gray-glacier.md",status:"Draft",eips:[5133],gasConfig:{},gasPrices:{},vm:{},pow:{}},oY={name:"mergeForkIdTransition",comment:"Pre-merge hardfork to fork off non-upgraded clients",url:"https://eips.ethereum.org/EIPS/eip-3675",status:"Draft",eips:[]},aY={name:"merge",comment:"Hardfork to upgrade the consensus mechanism to Proof-of-Stake",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/merge.md",status:"Final",consensus:{type:"pos",algorithm:"casper",casper:{}},eips:[3675,4399]},lY={chainstart:jK,homestead:qK,dao:WK,tangerineWhistle:XK,spuriousDragon:KK,byzantium:YK,constantinople:QK,petersburg:ZK,istanbul:JK,muirGlacier:eY,berlin:tY,london:nY,shanghai:rY,arrowGlacier:iY,grayGlacier:sY,mergeForkIdTransition:oY,merge:aY},{buf:cY}=_K;class Xn extends sx{static custom(e,t={}){var r;const i=(r=t.baseChain)!==null&&r!==void 0?r:"mainnet",s=Object.assign({},Xn._getChainParams(i));if(s.name="custom-chain",typeof e!="string")return new Xn(Object.assign({chain:Object.assign(Object.assign({},s),e)},t));if(e===Ar.PolygonMainnet)return Xn.custom({name:Ar.PolygonMainnet,chainId:137,networkId:137},t);if(e===Ar.PolygonMumbai)return Xn.custom({name:Ar.PolygonMumbai,chainId:80001,networkId:80001},t);if(e===Ar.ArbitrumRinkebyTestnet)return Xn.custom({name:Ar.ArbitrumRinkebyTestnet,chainId:421611,networkId:421611},t);if(e===Ar.ArbitrumOne)return Xn.custom({name:Ar.ArbitrumOne,chainId:42161,networkId:42161},t);if(e===Ar.xDaiChain)return Xn.custom({name:Ar.xDaiChain,chainId:100,networkId:100},t);if(e===Ar.OptimisticKovan)return Xn.custom({name:Ar.OptimisticKovan,chainId:69,networkId:69},Object.assign({hardfork:wn.Berlin},t));if(e===Ar.OptimisticEthereum)return Xn.custom({name:Ar.OptimisticEthereum,chainId:10,networkId:10},Object.assign({hardfork:wn.Berlin},t));throw new Error(`Custom chain ${e} not supported`)}static fromGethGenesis(e,{chain:t,eips:r,genesisHash:i,hardfork:s,mergeForkIdPostMerge:o}){var a;const l=cK(e,t,o),c=new Xn({chain:(a=l.name)!==null&&a!==void 0?a:"custom",customChains:[l],eips:r,hardfork:s??l.hardfork});return i!==void 0&&c.setForkHashes(i),c}static isSupportedChainId(e){return!!this._getInitializedChains().names[e.toString()]}static _getChainParams(e,t){let r=e;const i=this._getInitializedChains(t);if(typeof r=="number"||typeof r=="bigint"){if(r=r.toString(),i.names[r]){const s=i.names[r];return i[s]}throw new Error(`Chain with ID ${r} not supported`)}if(i[r]!==void 0)return i[r];throw new Error(`Chain with name ${r} not supported`)}constructor(e){var t,r;super(),this._eips=[],this._customChains=(t=e.customChains)!==null&&t!==void 0?t:[],this._chainParams=this.setChain(e.chain),this.DEFAULT_HARDFORK=(r=this._chainParams.defaultHardfork)!==null&&r!==void 0?r:wn.Merge,this.HARDFORK_CHANGES=this.hardforks().map(i=>[i.name,lY[i.name]]),this._hardfork=this.DEFAULT_HARDFORK,e.hardfork!==void 0&&this.setHardfork(e.hardfork),e.eips&&this.setEIPs(e.eips)}setChain(e){if(typeof e=="number"||typeof e=="bigint"||typeof e=="string")this._chainParams=Xn._getChainParams(e,this._customChains);else if(typeof e=="object"){if(this._customChains.length>0)throw new Error("Chain must be a string, number, or bigint when initialized with customChains passed in");const t=["networkId","genesis","hardforks","bootstrapNodes"];for(const r of t)if(!(r in e))throw new Error(`Missing required chain parameter: ${r}`);this._chainParams=e}else throw new Error("Wrong input format");for(const t of this.hardforks())if(t.block===void 0)throw new Error("Hardfork cannot have undefined block number");return this._chainParams}setHardfork(e){let t=!1;for(const r of this.HARDFORK_CHANGES)r[0]===e&&(this._hardfork!==e&&(this._hardfork=e,this.emit("hardforkChanged",e)),t=!0);if(!t)throw new Error(`Hardfork with name ${e} not supported`)}getHardforkByBlockNumber(e,t,r){const i=Ac(e,ki.BigInt),s=Ac(t,ki.BigInt),o=Ac(r,ki.Number),a=this.hardforks().filter(p=>p.block!==null||p.ttd!==null&&p.ttd!==void 0||p.timestamp!==void 0),l=a.findIndex(p=>p.ttd!==null&&p.ttd!==void 0);if(a.slice(l+1).findIndex(p=>p.ttd!==null&&p.ttd!==void 0)>=0)throw Error("More than one merge hardforks found with ttd specified");let u=a.findIndex(p=>p.block!==null&&p.block>i||o!==void 0&&Number(p.timestamp)>o);if(u===-1)u=a.length;else if(u===0)throw Error("Must have at least one hardfork at block 0");if(o===void 0){const p=a.slice(0,u).reverse().findIndex(m=>m.block!==null||m.ttd!==void 0);u-=p}if(u-=1,a[u].block===null&&a[u].timestamp===void 0)(s==null||BigInt(a[u].ttd)>s)&&(u-=1);else if(l>=0&&s!==void 0&&s!==null){if(u>=l&&BigInt(a[l].ttd)>s)throw Error("Maximum HF determined by total difficulty is lower than the block number HF");if(u<l&&BigInt(a[l].ttd)<=s)throw Error("HF determined by block number is lower than the minimum total difficulty HF")}const d=u;for(;u<a.length-1&&!(a[u].block!==a[u+1].block||a[u].timestamp!==a[u+1].timestamp);u+=1);if(o){if(a.slice(0,d).reduce((g,y)=>{var h;return Math.max(Number((h=y.timestamp)!==null&&h!==void 0?h:"0"),g)},0)>o)throw Error("Maximum HF determined by timestamp is lower than the block number/ttd HF");if(a.slice(u+1).reduce((g,y)=>{var h;return Math.min(Number((h=y.timestamp)!==null&&h!==void 0?h:o),g)},o)<o)throw Error("Maximum HF determined by block number/ttd is lower than timestamp HF")}return a[u].name}setHardforkByBlockNumber(e,t,r){const i=this.getHardforkByBlockNumber(e,t,r);return this.setHardfork(i),i}_getHardfork(e){const t=this.hardforks();for(const r of t)if(r.name===e)return r;return null}setEIPs(e=[]){for(const t of e){if(!(t in Sc))throw new Error(`${t} not supported`);const r=this.gteHardfork(Sc[t].minimumHardfork);if(!r)throw new Error(`${t} cannot be activated on hardfork ${this.hardfork()}, minimumHardfork: ${r}`);if(Sc[t].requiredEIPs!==void 0){for(const i of Sc[t].requiredEIPs)if(!(e.includes(i)||this.isActivatedEIP(i)))throw new Error(`${t} requires EIP ${i}, but is not included in the EIP list`)}}this._eips=e}param(e,t){let r;for(const i of this._eips)if(r=this.paramByEIP(e,t,i),r!==void 0)return r;return this.paramByHardfork(e,t,this._hardfork)}paramByHardfork(e,t,r){let i=null;for(const s of this.HARDFORK_CHANGES){if("eips"in s[1]){const o=s[1].eips;for(const a of o){const l=this.paramByEIP(e,t,a);i=typeof l=="bigint"?l:i}}else{if(s[1][e]===void 0)throw new Error(`Topic ${e} not defined`);s[1][e][t]!==void 0&&(i=s[1][e][t].v)}if(s[0]===r)break}return BigInt(i??0)}paramByEIP(e,t,r){if(!(r in Sc))throw new Error(`${r} not supported`);const i=Sc[r];if(!(e in i))throw new Error(`Topic ${e} not defined`);if(i[e][t]===void 0)return;const s=i[e][t].v;return BigInt(s)}paramByBlock(e,t,r,i,s){const o=this.getHardforkByBlockNumber(r,i,s);return this.paramByHardfork(e,t,o)}isActivatedEIP(e){if(this.eips().includes(e))return!0;for(const t of this.HARDFORK_CHANGES){const r=t[1];if(this.gteHardfork(r.name)&&"eips"in r&&r.eips.includes(e))return!0}return!1}hardforkIsActiveOnBlock(e,t){const r=Ac(t,ki.BigInt),i=e??this._hardfork,s=this.hardforkBlock(i);return typeof s=="bigint"&&s!==BigInt(0)&&r>=s}activeOnBlock(e){return this.hardforkIsActiveOnBlock(null,e)}hardforkGteHardfork(e,t){const r=e??this._hardfork,i=this.hardforks();let s=-1,o=-1,a=0;for(const l of i)l.name===r&&(s=a),l.name===t&&(o=a),a+=1;return s>=o&&o!==-1}gteHardfork(e){return this.hardforkGteHardfork(null,e)}hardforkBlock(e){var t;const r=e??this._hardfork,i=(t=this._getHardfork(r))===null||t===void 0?void 0:t.block;return i==null?null:BigInt(i)}hardforkTimestamp(e){var t;const r=e??this._hardfork,i=(t=this._getHardfork(r))===null||t===void 0?void 0:t.timestamp;return i==null?null:BigInt(i)}eipBlock(e){for(const t of this.HARDFORK_CHANGES){const r=t[1];if("eips"in r&&r.eips.includes(e))return this.hardforkBlock(typeof t[0]=="number"?String(t[0]):t[0])}return null}hardforkTTD(e){var t;const r=e??this._hardfork,i=(t=this._getHardfork(r))===null||t===void 0?void 0:t.ttd;return i==null?null:BigInt(i)}isHardforkBlock(e,t){const r=Ac(e,ki.BigInt),i=t??this._hardfork,s=this.hardforkBlock(i);return typeof s=="bigint"&&s!==BigInt(0)?s===r:!1}nextHardforkBlockOrTimestamp(e){var t,r,i;const s=(t=e)!==null&&t!==void 0?t:this._hardfork,o=this.hardforks();let a=o.findIndex(d=>d.name===s);if(s===wn.Merge&&(a-=1),a<0)return null;let l=(r=o[a].timestamp)!==null&&r!==void 0?r:o[a].block;l=l!=null?Number(l):null;const c=o.slice(a+1).find(d=>{var f;let p=(f=d.timestamp)!==null&&f!==void 0?f:d.block;return p=p!=null?Number(p):null,d.name!==wn.Merge&&p!==null&&p!==void 0&&p!==l});if(c===void 0)return null;const u=(i=c.timestamp)!==null&&i!==void 0?i:c.block;return u==null?null:BigInt(u)}nextHardforkBlock(e){var t;const r=(t=e)!==null&&t!==void 0?t:this._hardfork;let i=this.hardforkBlock(r);if(i===null&&r===wn.Merge){const o=this.hardforks(),a=o.findIndex(l=>l.ttd!==null&&l.ttd!==void 0);if(a<0)throw Error("Merge hardfork should have been found");i=this.hardforkBlock(o[a-1].name)}return i===null?null:this.hardforks().reduce((o,a)=>{const l=BigInt(a.block===null||a.ttd!==void 0&&a.ttd!==null?0:a.block);return l>i&&o===null?l:o},null)}isNextHardforkBlock(e,t){const r=Ac(e,ki.BigInt),i=t??this._hardfork,s=this.nextHardforkBlock(i);return s===null?!1:s===r}_calcForkHash(e,t){let r=new Uint8Array,i=0;for(const a of this.hardforks()){const{block:l,timestamp:c,name:u}=a;let d=c??l;if(d=d!==null?Number(d):null,typeof d=="number"&&d!==0&&d!==i&&u!==wn.Merge){const f=An(d.toString(16).padStart(16,"0"));r=Ur(r,f),i=d}if(a.name===e)break}const s=Ur(t,r);return Ot(uK(cY(s)>>>0))}forkHash(e,t){const r=e??this._hardfork,i=this._getHardfork(r);if(i===null||(i==null?void 0:i.block)===null&&(i==null?void 0:i.timestamp)===void 0&&(i==null?void 0:i.ttd)===void 0){const s="No fork hash calculation possible for future hardfork";throw new Error(s)}if((i==null?void 0:i.forkHash)!==null&&(i==null?void 0:i.forkHash)!==void 0)return i.forkHash;if(!t)throw new Error("genesisHash required for forkHash calculation");return this._calcForkHash(r,t)}hardforkForForkHash(e){const t=this.hardforks().filter(r=>r.forkHash===e);return t.length>=1?t[t.length-1]:null}setForkHashes(e){var t;for(const r of this.hardforks()){const i=(t=r.timestamp)!==null&&t!==void 0?t:r.block;(r.forkHash===null||r.forkHash===void 0)&&(i!=null||typeof r.ttd<"u")&&(r.forkHash=this.forkHash(r.name,e))}}genesis(){return this._chainParams.genesis}hardforks(){return this._chainParams.hardforks}bootstrapNodes(){return this._chainParams.bootstrapNodes}dnsNetworks(){return this._chainParams.dnsNetworks}hardfork(){return this._hardfork}chainId(){return BigInt(this._chainParams.chainId)}chainName(){return this._chainParams.name}networkId(){return BigInt(this._chainParams.networkId)}eips(){return this._eips}consensusType(){const e=this.hardfork();let t;for(const r of this.HARDFORK_CHANGES)if("consensus"in r[1]&&(t=r[1].consensus.type),r[0]===e)break;return t??this._chainParams.consensus.type}consensusAlgorithm(){const e=this.hardfork();let t;for(const r of this.HARDFORK_CHANGES)if("consensus"in r[1]&&(t=r[1].consensus.algorithm),r[0]===e)break;return t??this._chainParams.consensus.algorithm}consensusConfig(){var e;const t=this.hardfork();let r;for(const i of this.HARDFORK_CHANGES)if("consensus"in i[1]&&(r=i[1].consensus[i[1].consensus.algorithm]),i[0]===t)break;return(e=r??this._chainParams.consensus[this.consensusAlgorithm()])!==null&&e!==void 0?e:{}}copy(){const e=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return e.removeAllListeners(),e}static _getInitializedChains(e){const t={};for(const[i,s]of Object.entries(Pm))t[s]=i.toLowerCase();const r={mainnet:xK,goerli:bK,sepolia:wK};if(e)for(const i of e){const{name:s}=i;t[i.chainId.toString()]=s,r[s]=i}return r.names=t,r}}var Bs;(function(n){n[n.EIP155ReplayProtection=155]="EIP155ReplayProtection",n[n.EIP1559FeeMarket=1559]="EIP1559FeeMarket",n[n.EIP2718TypedTransaction=2718]="EIP2718TypedTransaction",n[n.EIP2930AccessLists=2930]="EIP2930AccessLists"})(Bs||(Bs={}));function uY(n){if(n.length===0)return!0;const e=n[0];return!!Array.isArray(e)}function dY(n){return!uY(n)}class tu{constructor(e){if(e.length!==20)throw new Error("Invalid address length");this.buf=e}static zero(){return new tu(KR(20))}equals(e){return C0(this.buf,e.buf)}isZero(){return this.equals(tu.zero())}toString(){return Ot(this.buf)}toArray(){return this.buf}static publicToAddress(e,t=!1){let r=e;if(wx(r),t&&r.length!==64&&(r=ea.ProjectivePoint.fromHex(r).toRawBytes(!1).slice(1)),r.length!==64)throw new Error("Expected pubKey to be of length 64");return kr(r).slice(-20)}}const fY=(n,e)=>{const t=n.param("vm","maxInitCodeSize");if(t&&BigInt(e)>t)throw new Error(`the initcode size of this transaction is too large: it is ${e} while the max is ${n.param("vm","maxInitCodeSize")}`)},rI=n=>{let e,t;if(dY(n)){e=n;const r=[];for(let i=0;i<n.length;i+=1){const s=n[i],o=Cn(s.address),a=[];for(let l=0;l<s.storageKeys.length;l+=1)a.push(Cn(s.storageKeys[l]));r.push([o,a])}t=r}else{t=n??[];const r=[];for(let i=0;i<t.length;i+=1){const s=t[i],o=Ot(s[0]),a=[];for(let c=0;c<s[1].length;c+=1)a.push(Ot(s[1][c]));const l={address:o,storageKeys:a};r.push(l)}e=r}return{AccessListJSON:e,accessList:t}},iI=n=>{for(let e=0;e<n.length;e+=1){const t=n[e],r=t[0],i=t[1];if(t[2]!==void 0)throw new Error("Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.");if(r.length!==20)throw new Error("Invalid EIP-2930 transaction: address length should be 20 bytes");for(let s=0;s<i.length;s+=1)if(i[s].length!==32)throw new Error("Invalid EIP-2930 transaction: storage slot length should be 32 bytes")}},sI=n=>{const e=[];for(let t=0;t<n.length;t+=1){const r=n[t],i={address:Ot(cE(r[0],20)),storageKeys:[]},s=r&&r[1];for(let o=0;o<s.length;o+=1){const a=s[o];i.storageKeys.push(Ot(cE(a,32)))}e.push(i)}return e},oI=(n,e)=>{const t=e.param("gasPrices","accessListStorageKeyCost"),r=e.param("gasPrices","accessListAddressCost");let i=0;for(let o=0;o<n.length;o+=1){const l=n[o][1];i+=l.length}return n.length*Number(r)+i*Number(t)};class Du{constructor(e,t){var r,i;this.cache={hash:void 0,dataFee:void 0},this.activeCapabilities=[],this.DEFAULT_CHAIN=Pm.Mainnet,this.DEFAULT_HARDFORK=wn.Merge;const{nonce:s,gasLimit:o,to:a,value:l,data:c,v:u,r:d,s:f,type:p}=e;this._type=Number(_n(Cn(p))),this.txOptions=t;const m=Cn(a===""?"0x":a),g=Cn(u===""?"0x":u),y=Cn(d===""?"0x":d),h=Cn(f===""?"0x":f);this.nonce=_n(Cn(s===""?"0x":s)),this.gasLimit=_n(Cn(o===""?"0x":o)),this.to=m.length>0?new tu(m):void 0,this.value=_n(Cn(l===""?"0x":l)),this.data=Cn(c===""?"0x":c),this.v=g.length>0?_n(g):void 0,this.r=y.length>0?_n(y):void 0,this.s=h.length>0?_n(h):void 0,this._validateCannotExceedMaxInteger({value:this.value,r:this.r,s:this.s}),this._validateCannotExceedMaxInteger({gasLimit:this.gasLimit},64),this._validateCannotExceedMaxInteger({nonce:this.nonce},64,!0);const w=this.to===void 0||this.to===null,M=(r=t.allowUnlimitedInitCodeSize)!==null&&r!==void 0?r:!1,S=(i=t.common)!==null&&i!==void 0?i:this._getCommon();w&&S.isActivatedEIP(3860)&&!M&&fY(S,this.data.length)}get type(){return this._type}supports(e){return this.activeCapabilities.includes(e)}validate(e=!1){const t=[];return this.getBaseFee()>this.gasLimit&&t.push(`gasLimit is too low. given ${this.gasLimit}, need at least ${this.getBaseFee()}`),this.isSigned()&&!this.verifySignature()&&t.push("Invalid Signature"),e?t:t.length===0}_validateYParity(){const{v:e}=this;if(e!==void 0&&e!==BigInt(0)&&e!==BigInt(1)){const t=this._errorMsg("The y-parity of the transaction should either be 0 or 1");throw new Error(t)}}_validateHighS(){const{s:e}=this;if(this.common.gteHardfork("homestead")&&e!==void 0&&e>sK){const t=this._errorMsg("Invalid Signature: s-values greater than secp256k1n/2 are considered invalid");throw new Error(t)}}getBaseFee(){const e=this.common.param("gasPrices","tx");let t=this.getDataFee();if(e&&(t+=e),this.common.gteHardfork("homestead")&&this.toCreationAddress()){const r=this.common.param("gasPrices","txCreation");r&&(t+=r)}return t}getDataFee(){const e=this.common.param("gasPrices","txDataZero"),t=this.common.param("gasPrices","txDataNonZero");let r=BigInt(0);for(let i=0;i<this.data.length;i+=1)this.data[i]===0?r+=e:r+=t;if((this.to===void 0||this.to===null)&&this.common.isActivatedEIP(3860)){const i=BigInt(Math.ceil(this.data.length/32)),s=this.common.param("gasPrices","initCodeWordCost")*i;r+=s}return r}toCreationAddress(){return this.to===void 0||this.to.buf.length===0}isSigned(){const{v:e,r:t,s:r}=this;return!(e===void 0||t===void 0||r===void 0)}verifySignature(){try{const e=this.getSenderPublicKey();return Nm(e).length!==0}catch{return!1}}getSenderAddress(){return new tu(tu.publicToAddress(this.getSenderPublicKey()))}sign(e){if(e.length!==32){const l=this._errorMsg("Private key must be 32 bytes in length.");throw new Error(l)}let t=!1;this.type===0&&this.common.gteHardfork("spuriousDragon")&&!this.supports(Bs.EIP155ReplayProtection)&&(this.activeCapabilities.push(Bs.EIP155ReplayProtection),t=!0);const r=this.getMessageToSign(!0),{v:i,r:s,s:o}=this._ecsign(r,e),a=this._processSignature(i,s,o);if(t){const l=this.activeCapabilities.indexOf(Bs.EIP155ReplayProtection);l>-1&&this.activeCapabilities.splice(l,1)}return a}_getCommon(e,t){var r,i,s,o;if(t!==void 0){const a=_n(Cn(t));if(e){if(e.chainId()!==a){const l=this._errorMsg("The chain ID does not match the chain ID of Common");throw new Error(l)}return e.copy()}return Xn.isSupportedChainId(a)?new Xn({chain:a,hardfork:this.DEFAULT_HARDFORK}):Xn.custom({name:"custom-chain",networkId:a,chainId:a},{baseChain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}if(e!=null&&e.copy&&typeof(e==null?void 0:e.copy)=="function")return e.copy();if(e){const a=typeof e.hardfork=="function"?e.hardfork():e.hardfork;return Xn.custom({name:"custom-chain",networkId:e.networkId?e.networkId():(i=BigInt((r=e.customChain)===null||r===void 0?void 0:r.networkId))!==null&&i!==void 0?i:void 0,chainId:e.chainId?e.chainId():(o=BigInt((s=e.customChain)===null||s===void 0?void 0:s.chainId))!==null&&o!==void 0?o:void 0},{baseChain:this.DEFAULT_CHAIN,hardfork:a||this.DEFAULT_HARDFORK})}return new Xn({chain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}_validateCannotExceedMaxInteger(e,t=256,r=!1){for(const[i,s]of Object.entries(e))switch(t){case 64:if(r){if(s!==void 0&&s>=oE){const o=this._errorMsg(`${i} cannot equal or exceed MAX_UINT64 (2^64-1), given ${s}`);throw new Error(o)}}else if(s!==void 0&&s>oE){const o=this._errorMsg(`${i} cannot exceed MAX_UINT64 (2^64-1), given ${s}`);throw new Error(o)}break;case 256:if(r){if(s!==void 0&&s>=Cf){const o=this._errorMsg(`${i} cannot equal or exceed MAX_INTEGER (2^256-1), given ${s}`);throw new Error(o)}}else if(s!==void 0&&s>Cf){const o=this._errorMsg(`${i} cannot exceed MAX_INTEGER (2^256-1), given ${s}`);throw new Error(o)}break;default:{const o=this._errorMsg("unimplemented bits value");throw new Error(o)}}}static _validateNotArray(e){const t=["nonce","gasPrice","gasLimit","to","value","data","v","r","s","type","baseFee","maxFeePerGas","chainId"];for(const[r,i]of Object.entries(e))if(t.includes(r)&&Array.isArray(i))throw new Error(`${r} cannot be an array`)}_getSharedErrorPostfix(){let e="";try{e=this.isSigned()?Ot(this.hash()):"not available (unsigned)"}catch{e="error"}let t="";try{t=this.isSigned().toString()}catch{e="error"}let r="";try{r=this.common.hardfork()}catch{r="error"}let i=`tx type=${this.type} hash=${e} nonce=${this.nonce} value=${this.value} `;return i+=`signed=${t} hf=${r}`,i}_ecsign(e,t,r){const i=ea.sign(e,t),s=i.toCompactRawBytes(),o=s.subarray(0,32),a=s.subarray(32,64),l=r===void 0?BigInt(i.recovery+27):BigInt(i.recovery+35)+BigInt(r)*BigInt(2);return{r:o,s:a,v:l}}static fromSerializedTx(e,t={}){}static fromTxData(e,t={}){}}const w_=2,cv=An(w_.toString(16).padStart(2,"0"));class xl extends Du{static fromTxData(e,t={}){return new xl(e,t)}static fromSerializedTx(e,t={}){if(!C0(e.subarray(0,1),cv))throw new Error(`Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: ${w_}, received: ${Ot(e.subarray(0,1))}`);const r=hi.decode(e.subarray(1));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return xl.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(e.length!==9&&e.length!==12)throw new Error("Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).");const[r,i,s,o,a,l,c,u,d,f,p,m]=e;return this._validateNotArray({chainId:r,v:f}),tx({nonce:i,maxPriorityFeePerGas:s,maxFeePerGas:o,gasLimit:a,value:c,v:f,r:p,s:m}),new xl({chainId:_n(r),nonce:i,maxPriorityFeePerGas:s,maxFeePerGas:o,gasLimit:a,to:l,value:c,data:u,accessList:d??[],v:f!==void 0?_n(f):void 0,r:p,s:m},t)}constructor(e,t={}){var r;super(Object.assign(Object.assign({},e),{type:w_}),t),this.DEFAULT_HARDFORK="london";const{chainId:i,accessList:s,maxFeePerGas:o,maxPriorityFeePerGas:a}=e;if(this.common=this._getCommon(t.common,i),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(1559))throw new Error("EIP-1559 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);const l=rI(s??[]);if(this.accessList=l.accessList,this.AccessListJSON=l.AccessListJSON,iI(this.accessList),this.maxFeePerGas=_n(Cn(o===""?"0x":o)),this.maxPriorityFeePerGas=_n(Cn(a===""?"0x":a)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),Du._validateNotArray(e),this.gasLimit*this.maxFeePerGas>Cf){const u=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(u)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const u=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(u)}this._validateYParity(),this._validateHighS(),((r=t==null?void 0:t.freeze)!==null&&r!==void 0?r:!0)&&Object.freeze(this)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(oI(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(e=BigInt(0)){const t=this.maxPriorityFeePerGas,r=this.maxFeePerGas-e,s=(t<r?t:r)+e;return this.gasLimit*s+this.value}raw(){return[Wt(this.chainId),Wt(this.nonce),Wt(this.maxPriorityFeePerGas),Wt(this.maxFeePerGas),Wt(this.gasLimit),this.to!==void 0?this.to.buf:Uint8Array.from([]),Wt(this.value),this.data,this.accessList,this.v!==void 0?Wt(this.v):Uint8Array.from([]),this.r!==void 0?Wt(this.r):Uint8Array.from([]),this.s!==void 0?Wt(this.s):Uint8Array.from([])]}serialize(){const e=this.raw();return Ur(cv,hi.encode(e))}getMessageToSign(e=!0){const t=this.raw().slice(0,9),r=Ur(cv,hi.encode(t));return e?kr(r):r}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=kr(this.serialize())),this.cache.hash):kr(this.serialize())}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const s=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(s)}const e=this.getMessageToVerifySignature(),{v:t,r,s:i}=this;this._validateHighS();try{return Ax(e,t+BigInt(27),Wt(r),Wt(i))}catch{const o=this._errorMsg("Invalid Signature");throw new Error(o)}}_processSignature(e,t,r){const i=Object.assign(Object.assign({},this.txOptions),{common:this.common});return xl.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:_n(t),s:_n(r)},i)}toJSON(){const e=sI(this.accessList);return{chainId:Pn(this.chainId),nonce:Pn(this.nonce),maxPriorityFeePerGas:Pn(this.maxPriorityFeePerGas),maxFeePerGas:Pn(this.maxFeePerGas),gasLimit:Pn(this.gasLimit),to:this.to!==void 0?this.to.toString():void 0,value:Pn(this.value),data:Ot(this.data),accessList:e,v:this.v!==void 0?Pn(this.v):void 0,r:this.r!==void 0?Pn(this.r):void 0,s:this.s!==void 0?Pn(this.s):void 0}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}const A_=1,uv=An(A_.toString(16).padStart(2,"0"));class wl extends Du{static fromTxData(e,t={}){return new wl(e,t)}static fromSerializedTx(e,t={}){if(!C0(e.subarray(0,1),uv))throw new Error(`Invalid serialized tx input: not an EIP-2930 transaction (wrong tx type, expected: ${A_}, received: ${Ot(e.subarray(0,1))}`);const r=hi.decode(Uint8Array.from(e.subarray(1)));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return wl.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(e.length!==8&&e.length!==11)throw new Error("Invalid EIP-2930 transaction. Only expecting 8 values (for unsigned tx) or 11 values (for signed tx).");const[r,i,s,o,a,l,c,u,d,f,p]=e;this._validateNotArray({chainId:r,v:d}),tx({nonce:i,gasPrice:s,gasLimit:o,value:l,v:d,r:f,s:p});const m=[];return new wl({chainId:_n(r),nonce:i,gasPrice:s,gasLimit:o,to:a,value:l,data:c,accessList:u??m,v:d!==void 0?_n(d):void 0,r:f,s:p},t)}constructor(e,t={}){var r;super(Object.assign(Object.assign({},e),{type:A_}),t),this.DEFAULT_HARDFORK="berlin";const{chainId:i,accessList:s,gasPrice:o}=e;if(this.common=this._getCommon(t.common,i),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(2930))throw new Error("EIP-2930 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([2718,2930]);const a=rI(s??[]);if(this.accessList=a.accessList,this.AccessListJSON=a.AccessListJSON,iI(this.accessList),this.gasPrice=_n(Cn(o===""?"0x":o)),this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),Du._validateNotArray(e),this.gasPrice*this.gasLimit>Cf){const c=this._errorMsg("gasLimit * gasPrice cannot exceed MAX_INTEGER");throw new Error(c)}this._validateYParity(),this._validateHighS(),((r=t==null?void 0:t.freeze)!==null&&r!==void 0?r:!0)&&Object.freeze(this)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(oI(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}raw(){return[Wt(this.chainId),Wt(this.nonce),Wt(this.gasPrice),Wt(this.gasLimit),this.to!==void 0?this.to.buf:Uint8Array.from([]),Wt(this.value),this.data,this.accessList,this.v!==void 0?Wt(this.v):Uint8Array.from([]),this.r!==void 0?Wt(this.r):Uint8Array.from([]),this.s!==void 0?Wt(this.s):Uint8Array.from([])]}serialize(){const e=this.raw();return Ur(uv,hi.encode(e))}getMessageToSign(e=!0){const t=this.raw().slice(0,8),r=Ur(uv,hi.encode(t));return e?kr(r):r}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=kr(this.serialize())),this.cache.hash):kr(this.serialize())}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const s=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(s)}const e=this.getMessageToVerifySignature(),{v:t,r,s:i}=this;this._validateHighS();try{return Ax(e,t+BigInt(27),Wt(r),Wt(i))}catch{const o=this._errorMsg("Invalid Signature");throw new Error(o)}}_processSignature(e,t,r){const i=Object.assign(Object.assign({},this.txOptions),{common:this.common});return wl.fromTxData({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:_n(t),s:_n(r)},i)}toJSON(){const e=sI(this.accessList);return{chainId:Pn(this.chainId),nonce:Pn(this.nonce),gasPrice:Pn(this.gasPrice),gasLimit:Pn(this.gasLimit),to:this.to!==void 0?this.to.toString():void 0,value:Pn(this.value),data:Ot(this.data),accessList:e,v:this.v!==void 0?Pn(this.v):void 0,r:this.r!==void 0?Pn(this.r):void 0,s:this.s!==void 0?Pn(this.s):void 0}}errorStr(){var e,t;let r=this._getSharedErrorPostfix();return r+=` gasPrice=${this.gasPrice} accessListCount=${(t=(e=this.accessList)===null||e===void 0?void 0:e.length)!==null&&t!==void 0?t:0}`,r}_errorMsg(e){return`${e} (${this.errorStr()})`}}const hY=0;function fE(n,e){const t=Number(n),r=Number(e)*2;return t===r+35||t===r+36}class Ra extends Du{static fromTxData(e,t={}){return new Ra(e,t)}static fromSerializedTx(e,t={}){const r=hi.decode(e);if(!Array.isArray(r))throw new Error("Invalid serialized tx input. Must be array");return this.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(e.length!==6&&e.length!==9)throw new Error("Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).");const[r,i,s,o,a,l,c,u,d]=e;return tx({nonce:r,gasPrice:i,gasLimit:s,value:a,v:c,r:u,s:d}),new Ra({nonce:r,gasPrice:i,gasLimit:s,to:o,value:a,data:l,v:c,r:u,s:d},t)}constructor(e,t={}){var r;if(super(Object.assign(Object.assign({},e),{type:hY}),t),this.common=this._validateTxV(this.v,t.common),this.gasPrice=_n(Cn(e.gasPrice===""?"0x":e.gasPrice)),this.gasPrice*this.gasLimit>Cf){const s=this._errorMsg("gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)");throw new Error(s)}this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),Du._validateNotArray(e),this.common.gteHardfork("spuriousDragon")&&(this.isSigned()?fE(this.v,this.common.chainId())&&this.activeCapabilities.push(Bs.EIP155ReplayProtection):this.activeCapabilities.push(Bs.EIP155ReplayProtection)),((r=t==null?void 0:t.freeze)!==null&&r!==void 0?r:!0)&&Object.freeze(this)}raw(){return[Wt(this.nonce),Wt(this.gasPrice),Wt(this.gasLimit),this.to!==void 0?this.to.buf:Uint8Array.from([]),Wt(this.value),this.data,this.v!==void 0?Wt(this.v):Uint8Array.from([]),this.r!==void 0?Wt(this.r):Uint8Array.from([]),this.s!==void 0?Wt(this.s):Uint8Array.from([])]}serialize(){return hi.encode(this.raw())}_getMessageToSign(){const e=[Wt(this.nonce),Wt(this.gasPrice),Wt(this.gasLimit),this.to!==void 0?this.to.buf:Uint8Array.from([]),Wt(this.value),this.data];return this.supports(Bs.EIP155ReplayProtection)&&(e.push(Cn(this.common.chainId())),e.push(Nm(Cn(0))),e.push(Nm(Cn(0)))),e}getMessageToSign(e=!0){const t=this._getMessageToSign();return e?kr(hi.encode(t)):t}getDataFee(){return this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork()?this.cache.dataFee.value:(Object.isFrozen(this)&&(this.cache.dataFee={value:super.getDataFee(),hardfork:this.common.hardfork()}),super.getDataFee())}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=kr(hi.encode(this.raw()))),this.cache.hash):kr(hi.encode(this.raw()))}getMessageToVerifySignature(){if(!this.isSigned()){const t=this._errorMsg("This transaction is not signed");throw new Error(t)}const e=this._getMessageToSign();return kr(hi.encode(e))}getSenderPublicKey(){const e=this.getMessageToVerifySignature(),{v:t,r,s:i}=this;this._validateHighS();try{return Ax(e,t,Wt(r),Wt(i),this.supports(Bs.EIP155ReplayProtection)?this.common.chainId():void 0)}catch{const o=this._errorMsg("Invalid Signature");throw new Error(o)}}_processSignature(e,t,r){let i=e;this.supports(Bs.EIP155ReplayProtection)&&(i+=this.common.chainId()*BigInt(2)+BigInt(8));const s=Object.assign(Object.assign({},this.txOptions),{common:this.common});return Ra.fromTxData({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,v:i,r:_n(t),s:_n(r)},s)}toJSON(){return{nonce:Pn(this.nonce),gasPrice:Pn(this.gasPrice),gasLimit:Pn(this.gasLimit),to:this.to!==void 0?this.to.toString():void 0,value:Pn(this.value),data:Ot(this.data),v:this.v!==void 0?Pn(this.v):void 0,r:this.r!==void 0?Pn(this.r):void 0,s:this.s!==void 0?Pn(this.s):void 0}}_validateTxV(e,t){let r;const i=e!==void 0?Number(e):void 0;if(i!==void 0&&i<37&&i!==27&&i!==28)throw new Error(`Legacy txs need either v = 27/28 or v >= 37 (EIP-155 replay protection), got v = ${i}`);if(i!==void 0&&i!==0&&(!t||t.gteHardfork("spuriousDragon"))&&i!==27&&i!==28)if(t){if(!fE(BigInt(i),t.chainId()))throw new Error(`Incompatible EIP155-based V ${i} and chain id ${t.chainId()}. See the Common parameter of the Transaction constructor to set the chain id.`)}else{let s;(i-35)%2===0?s=35:s=36,r=BigInt(i-s)/BigInt(2)}return this._getCommon(t,r)}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}const dv=new Map;class Wl{constructor(){}static typeToInt(e){return Number(_n(Cn(e)))}static registerTransactionType(e,t){const r=Wl.typeToInt(e);dv.set(r,t)}static fromTxData(e,t={}){if(!("type"in e)||e.type===void 0)return Ra.fromTxData(e,t);const r=Wl.typeToInt(e.type);if(r===0)return Ra.fromTxData(e,t);if(r===1)return wl.fromTxData(e,t);if(r===2)return xl.fromTxData(e,t);const i=dv.get(r);if(i!=null&&i.fromTxData)return i.fromTxData(e,t);throw new Error(`Tx instantiation with type ${r} not supported`)}static fromSerializedData(e,t={}){if(e[0]<=127)switch(e[0]){case 1:return wl.fromSerializedTx(e,t);case 2:return xl.fromSerializedTx(e,t);default:{const r=dv.get(Number(e[0]));if(r!=null&&r.fromSerializedTx)return r.fromSerializedTx(e,t);throw new Error(`TypedTransaction with ID ${e[0]} unknown`)}}else return Ra.fromSerializedTx(e,t)}static fromBlockBodyData(e,t={}){if(Ya(e))return this.fromSerializedData(e,t);if(Array.isArray(e))return Ra.fromValuesArray(e,t);throw new Error("Cannot decode transaction: unknown type input")}}var H0=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const nd=(n,e)=>{let t;if(!e&&typeof n=="string"&&rn(n)&&n.length!==66)throw new I1;try{t=Ya(n)?n:Zs(n)}catch{throw new _$}if(!e&&t.byteLength!==32)throw new I1;return t},Sx=(n,e=!1)=>{const t=rn(n)?n:fs(n),r=An(t),i=An(lR(`Ethereum Signed Message:
${r.byteLength}`)),s=e?r:Ur(i,r);return bi(s)},pY=(n,e)=>{const t=nd(e),r=ea.sign(n.substring(2),t),i=r.toCompactRawBytes(),s=r.r.toString(16).padStart(64,"0"),o=r.s.toString(16).padStart(64,"0"),a=r.recovery+27;return{messageHash:n,v:Yn(a),r:`0x${s}`,s:`0x${o}`,signature:`${Ot(i)}${a.toString(16)}`}},aI=(n,e)=>{const t=Sx(n),{messageHash:r,v:i,r:s,s:o,signature:a}=pY(t,e);return{message:n,messageHash:r,v:i,r:s,s:o,signature:a}},mY=(n,e)=>H0(void 0,void 0,void 0,function*(){const t=n.sign(An(e));if(ue(t.v)||ue(t.r)||ue(t.s))throw new o_("Signer Error");const r=t.validate(!0);if(r.length>0){let o="Signer Error ";for(const a of r)o+=`${o} ${a}.`;throw new o_(o)}const i=Ot(t.serialize()),s=bi(i);return{messageHash:Ot(t.getMessageToSign(!0)),v:`0x${t.v.toString(16)}`,r:`0x${t.r.toString(16).padStart(64,"0")}`,s:`0x${t.s.toString(16).padStart(64,"0")}`,rawTransaction:i,transactionHash:Ot(s)}}),gY=n=>{if(ue(n))throw new D$;const e=Wl.fromSerializedData(An(n));return io(e.getSenderAddress().toString())},E_=(n,e,t,r,i)=>{if(typeof n=="object"){const d=`${n.r}${n.s.slice(2)}${n.v.slice(2)}`;return E_(n.messageHash,d,t)}if(typeof e=="string"&&typeof t=="string"&&!ue(r)){const d=`${t}${r.slice(2)}${e.slice(2)}`;return E_(n,d,i)}if(ue(e))throw new b$("signature string undefined");const s=130,o=t?n:Sx(n);let a=parseInt(e.substring(s),16);a>26&&(a-=27);const l=ea.Signature.fromCompact(e.slice(2,s)).addRecoveryBit(a).recoverPublicKey(o.replace("0x","")).toRawBytes(!1),c=bi(l.subarray(1));return io(`0x${c.slice(-40)}`)},z0=n=>{const e=nd(n),t=ea.getPublicKey(e,!1),i=bi(t.slice(1)).slice(-40);return io(`0x${i}`)},vY=(n,e)=>{const t=nd(n);return`0x${Ot(ea.getPublicKey(t,e)).slice(4)}`},lI=(n,e,t)=>H0(void 0,void 0,void 0,function*(){var r,i,s,o,a,l,c;const u=nd(n);let d;if(t!=null&&t.salt?d=typeof t.salt=="string"?An(t.salt):t.salt:d=Mf(32),!(Jb(e)||Ya(e)))throw new A$;const f=typeof e=="string"?An(fs(e)):e;let p;if(t!=null&&t.iv){if(p=typeof t.iv=="string"?An(t.iv):t.iv,p.length!==16)throw new E$}else p=Mf(16);const m=(r=t==null?void 0:t.kdf)!==null&&r!==void 0?r:"scrypt";let g,y;if(m==="pbkdf2"){if(y={dklen:(i=t==null?void 0:t.dklen)!==null&&i!==void 0?i:32,salt:Ot(d).replace("0x",""),c:(s=t==null?void 0:t.c)!==null&&s!==void 0?s:262144,prf:"hmac-sha256"},y.c<1e3)throw new S$;g=DR(f,d,y.c,y.dklen,"sha256")}else if(m==="scrypt")y={n:(o=t==null?void 0:t.n)!==null&&o!==void 0?o:8192,r:(a=t==null?void 0:t.r)!==null&&a!==void 0?a:8,p:(l=t==null?void 0:t.p)!==null&&l!==void 0?l:1,dklen:(c=t==null?void 0:t.dklen)!==null&&c!==void 0?c:32,salt:Ot(d).replace("0x","")},g=OR(f,d,y.n,y.p,y.r,y.dklen);else throw new bM;const h=yield px(u,g.slice(0,16),p,"aes-128-ctr"),w=Ot(h).slice(2),M=bi(Ur(g.slice(16,32),h)).replace("0x","");return{version:3,id:cx(),address:z0(u).toLowerCase().replace("0x",""),crypto:{ciphertext:w,cipherparams:{iv:Ot(p).replace("0x","")},cipher:"aes-128-ctr",kdf:m,kdfparams:y,mac:M}}}),Tx=(n,e)=>{const t=nd(n,e);return{address:z0(t),privateKey:Ot(t),signTransaction:r=>{throw new o_("Do not have network access to sign the transaction")},sign:r=>aI(typeof r=="string"?r:JSON.stringify(r),t),encrypt:(r,i)=>H0(void 0,void 0,void 0,function*(){return lI(t,r,i)})}},yY=()=>{const n=ea.utils.randomPrivateKey();return Tx(`${Ot(n)}`)},_Y=(n,e,t)=>H0(void 0,void 0,void 0,function*(){const r=typeof n=="object"?n:JSON.parse(t?n.toLowerCase():n);if(at.validateJSONSchema(oK,r),r.version!==3)throw new w$;const i=typeof e=="string"?An(fs(e)):e;at.validate(["bytes"],[i]);let s;if(r.crypto.kdf==="scrypt"){const c=r.crypto.kdfparams,u=typeof c.salt=="string"?An(c.salt):c.salt;s=OR(i,u,c.n,c.p,c.r,c.dklen)}else if(r.crypto.kdf==="pbkdf2"){const c=r.crypto.kdfparams,u=typeof c.salt=="string"?An(c.salt):c.salt;s=DR(i,u,c.c,c.dklen,"sha256")}else throw new bM;const o=An(r.crypto.ciphertext);if(bi(Ur(s.slice(16,32),o)).replace("0x","")!==r.crypto.mac)throw new x$;const l=yield uX(An(r.crypto.ciphertext),s.slice(0,16),An(r.crypto.cipherparams.iv));return Tx(l)});var hE=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const bY=1e3;class xY{constructor(e){this._requestManager=e,this._requests=new Map}get requests(){return[...this._requests.values()].map(e=>e.payload)}add(e){const t=Vl(e),r=new Mm;return this._requests.set(t.id,{payload:t,promise:r}),r}execute(e){return hE(this,void 0,void 0,function*(){var t;if(this.requests.length===0)return Promise.resolve([]);const r=new Mm({timeout:(t=e==null?void 0:e.timeout)!==null&&t!==void 0?t:bY,eagerStart:!0,timeoutMessage:"Batch request timeout"});return this._processBatchRequest(r).catch(i=>r.reject(i)),r.catch(i=>{i instanceof xM&&this._abortAllRequests("Batch request timeout"),r.reject(i)}),r})}_processBatchRequest(e){return hE(this,void 0,void 0,function*(){var t,r;const i=yield this._requestManager.sendBatch([...this._requests.values()].map(a=>a.payload));if(i.length!==this._requests.size)throw this._abortAllRequests("Invalid batch response"),new ks(i,`Batch request size mismatch the results size. Requests: ${this._requests.size}, Responses: ${i.length}`);const s=this.requests.map(a=>a.id).map(Number).sort((a,l)=>a-l),o=i.map(a=>a.id).map(Number).sort((a,l)=>a-l);if(JSON.stringify(s)!==JSON.stringify(o))throw this._abortAllRequests("Invalid batch response"),new ks(i,`Batch request mismatch the results. Requests: [${s.join()}], Responses: [${o.join()}]`);for(const a of i)Na(a)?(t=this._requests.get(a.id))===null||t===void 0||t.promise.resolve(a.result):ka(a)&&((r=this._requests.get(a.id))===null||r===void 0||r.promise.reject(a.error));e.resolve(i)})}_abortAllRequests(e){for(const{promise:t}of this._requests.values())t.reject(new N$(e))}}var wY=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class Qr extends rX{constructor(e){var t;if(super(),this.providers=Rl.providers,dt(e)||typeof e=="string"&&e.trim()!==""||Rm(e)){this._requestManager=new Rl(e),this._subscriptionManager=new Im(this._requestManager,{});return}const{config:r,provider:i,requestManager:s,subscriptionManager:o,registeredSubscriptions:a,accountProvider:l,wallet:c,requestManagerMiddleware:u}=e;this.setConfig(r??{}),this._requestManager=s??new Rl(i,(t=r==null?void 0:r.enableExperimentalFeatures)===null||t===void 0?void 0:t.useSubscriptionWhenCheckingBlockTimeout,u),o?this._subscriptionManager=o:this._subscriptionManager=new Im(this.requestManager,a??{}),l&&(this._accountProvider=l),c&&(this._wallet=c)}get requestManager(){return this._requestManager}get subscriptionManager(){return this._subscriptionManager}get wallet(){return this._wallet}get accountProvider(){return this._accountProvider}static fromContextObject(...e){return new this(...e.reverse())}getContextObject(){var e;return{config:this.config,provider:this.provider,requestManager:this.requestManager,subscriptionManager:this.subscriptionManager,registeredSubscriptions:(e=this.subscriptionManager)===null||e===void 0?void 0:e.registeredSubscriptions,providers:this.providers,wallet:this.wallet,accountProvider:this.accountProvider}}use(e,...t){const r=new e(...t,this.getContextObject());return this.on($l.CONFIG_CHANGE,i=>{r.setConfig({[i.name]:i.newValue})}),this[e.name]=r,r}link(e){this.setConfig(e.config),this._requestManager=e.requestManager,this.provider=e.provider,this._subscriptionManager=e.subscriptionManager,this._wallet=e.wallet,this._accountProvider=e._accountProvider,e.on($l.CONFIG_CHANGE,t=>{this.setConfig({[t.name]:t.newValue})})}registerPlugin(e){if(this[e.pluginNamespace]!==void 0)throw new k$(e.pluginNamespace);const t={[e.pluginNamespace]:e};t[e.pluginNamespace].link(this),Object.assign(this,t)}get provider(){return this.currentProvider}set provider(e){this.requestManager.setProvider(e)}get currentProvider(){return this.requestManager.provider}set currentProvider(e){this.requestManager.setProvider(e)}get givenProvider(){return Qr.givenProvider}setProvider(e){return this.provider=e,!0}setRequestManagerMiddleware(e){this.requestManager.setMiddleware(e)}get BatchRequest(){return xY.bind(void 0,this._requestManager)}extend(e){var t;return e.property&&!this[e.property]&&(this[e.property]={}),(t=e.methods)===null||t===void 0||t.forEach(r=>{const i=(...s)=>wY(this,void 0,void 0,function*(){return this.requestManager.send({method:r.call,params:s})});e.property?this[e.property][r.name]=i:this[r.name]=i}),this}}Qr.providers=Rl.providers;class Vn{constructor(e){if(this.toAddress=()=>{if(this.isDirect()){const t=this._iban.slice(4),r=Vn._parseInt(t,36),i=Sf(r,40);return io(i)}throw new Error("Iban is indirect and cannot be converted. Must be length of 34 or 35")},Vn.isIndirect(e)||Vn.isDirect(e))this._iban=e;else throw new Error("Invalid IBAN was provided")}static isDirect(e){return e.length===34||e.length===35}isDirect(){return Vn.isDirect(this._iban)}static isIndirect(e){return e.length===20}isIndirect(){return Vn.isIndirect(this._iban)}static isValid(e){return/^XE[0-9]{2}(ETH[0-9A-Z]{13}|[0-9A-Z]{30,31})$/.test(e)&&Vn._mod9710(Vn._iso13616Prepare(e))===1}isValid(){return Vn.isValid(this._iban)}static fromBban(e){const t="XE",i=`0${(98-this._mod9710(this._iso13616Prepare(`${t}00${e}`))).toString()}`.slice(-2);return new Vn(`${t}${i}${e}`)}static createIndirect(e){return Vn.fromBban(`ETH${e.institution}${e.identifier}`)}static fromAddress(e){if(!_i(e))throw new $b(e);const r=BigInt(nh(e)).toString(36),i=Sf(r,15);return Vn.fromBban(i.toUpperCase())}static toIban(e){return Vn.fromAddress(e).toString()}client(){return this.isIndirect()?this._iban.slice(11):""}checksum(){return this._iban.slice(2,4)}institution(){return this.isIndirect()?this._iban.slice(7,11):""}toString(){return this._iban}}Vn._iso13616Prepare=n=>{const e="A".charCodeAt(0),t="Z".charCodeAt(0),r=n.toUpperCase();return`${r.slice(4)}${r.slice(0,4)}`.split("").map(s=>{const o=s.charCodeAt(0);return o>=e&&o<=t?o-e+10:s}).join("")};Vn._parseInt=(n,e)=>[...n].reduce((t,r)=>BigInt(parseInt(r,e))+BigInt(e)*t,BigInt(0));Vn._mod9710=n=>{let e=n,t;for(;e.length>2;)t=e.slice(0,9),e=`${(parseInt(t,10)%97).toString()}${e.slice(t.length)}`;return parseInt(e,10)%97};Vn.toAddress=n=>new Vn(n).toAddress();var fv=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},cI;class uI extends D0{constructor(e){super(),this[cI]="Promise",this._promise=new Promise(e)}then(e,t){return fv(this,void 0,void 0,function*(){return this._promise.then(e,t)})}catch(e){return fv(this,void 0,void 0,function*(){return this._promise.catch(e)})}finally(e){return fv(this,void 0,void 0,function*(){return this._promise.finally(e)})}on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}}cI=Symbol.toStringTag;(function(n,e){if(n.setImmediate)return;var t=1,r={},i=!1,s=n.document,o;function a(w){typeof w!="function"&&(w=new Function(""+w));for(var M=new Array(arguments.length-1),S=0;S<M.length;S++)M[S]=arguments[S+1];var C={callback:w,args:M};return r[t]=C,o(t),t++}function l(w){delete r[w]}function c(w){var M=w.callback,S=w.args;switch(S.length){case 0:M();break;case 1:M(S[0]);break;case 2:M(S[0],S[1]);break;case 3:M(S[0],S[1],S[2]);break;default:M.apply(e,S);break}}function u(w){if(i)setTimeout(u,0,w);else{var M=r[w];if(M){i=!0;try{c(M)}finally{l(w),i=!1}}}}function d(){o=function(w){process.nextTick(function(){u(w)})}}function f(){if(n.postMessage&&!n.importScripts){var w=!0,M=n.onmessage;return n.onmessage=function(){w=!1},n.postMessage("","*"),n.onmessage=M,w}}function p(){var w="setImmediate$"+Math.random()+"$",M=function(S){S.source===n&&typeof S.data=="string"&&S.data.indexOf(w)===0&&u(+S.data.slice(w.length))};n.addEventListener?n.addEventListener("message",M,!1):n.attachEvent("onmessage",M),o=function(S){n.postMessage(w+S,"*")}}function m(){var w=new MessageChannel;w.port1.onmessage=function(M){var S=M.data;u(S)},o=function(M){w.port2.postMessage(M)}}function g(){var w=s.documentElement;o=function(M){var S=s.createElement("script");S.onreadystatechange=function(){u(M),S.onreadystatechange=null,w.removeChild(S),S=null},w.appendChild(S)}}function y(){o=function(w){setTimeout(u,0,w)}}var h=Object.getPrototypeOf&&Object.getPrototypeOf(n);h=h&&h.setTimeout?h:n,{}.toString.call(globalThis.process)==="[object process]"?d():f()?p():n.MessageChannel?m():s&&"onreadystatechange"in s.createElement("script")?g():y(),h.setImmediate=a,h.clearImmediate=l})(typeof self>"u"?typeof Po>"u"?Po:Po:self);var yt=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};function AY(n){return yt(this,void 0,void 0,function*(){return n.send({method:"eth_protocolVersion",params:[]})})}function dI(n){return yt(this,void 0,void 0,function*(){return n.send({method:"eth_syncing",params:[]})})}function EY(n){return yt(this,void 0,void 0,function*(){return n.send({method:"eth_coinbase",params:[]})})}function SY(n){return yt(this,void 0,void 0,function*(){return n.send({method:"eth_mining",params:[]})})}function TY(n){return yt(this,void 0,void 0,function*(){return n.send({method:"eth_hashrate",params:[]})})}function MY(n){return yt(this,void 0,void 0,function*(){return n.send({method:"eth_gasPrice",params:[]})})}function RY(n){return yt(this,void 0,void 0,function*(){return n.send({method:"eth_maxPriorityFeePerGas",params:[]})})}function IY(n){return yt(this,void 0,void 0,function*(){return n.send({method:"eth_accounts",params:[]})})}function CY(n){return yt(this,void 0,void 0,function*(){return n.send({method:"eth_blockNumber",params:[]})})}function PY(n,e,t){return yt(this,void 0,void 0,function*(){return at.validate(["address","blockNumberOrTag"],[e,t]),n.send({method:"eth_getBalance",params:[e,t]})})}function NY(n,e,t,r){return yt(this,void 0,void 0,function*(){return at.validate(["address","hex","blockNumberOrTag"],[e,t,r]),n.send({method:"eth_getStorageAt",params:[e,t,r]})})}function kY(n,e,t){return yt(this,void 0,void 0,function*(){return at.validate(["address","blockNumberOrTag"],[e,t]),n.send({method:"eth_getTransactionCount",params:[e,t]})})}function BY(n,e){return yt(this,void 0,void 0,function*(){return at.validate(["bytes32"],[e]),n.send({method:"eth_getBlockTransactionCountByHash",params:[e]})})}function LY(n,e){return yt(this,void 0,void 0,function*(){return at.validate(["blockNumberOrTag"],[e]),n.send({method:"eth_getBlockTransactionCountByNumber",params:[e]})})}function DY(n,e){return yt(this,void 0,void 0,function*(){return at.validate(["bytes32"],[e]),n.send({method:"eth_getUncleCountByBlockHash",params:[e]})})}function OY(n,e){return yt(this,void 0,void 0,function*(){return at.validate(["blockNumberOrTag"],[e]),n.send({method:"eth_getUncleCountByBlockNumber",params:[e]})})}function FY(n,e,t){return yt(this,void 0,void 0,function*(){return at.validate(["address","blockNumberOrTag"],[e,t]),n.send({method:"eth_getCode",params:[e,t]})})}function UY(n,e,t){return yt(this,void 0,void 0,function*(){return at.validate(["address","hex"],[e,t]),n.send({method:"eth_sign",params:[e,t]})})}function HY(n,e){return yt(this,void 0,void 0,function*(){return n.send({method:"eth_signTransaction",params:[e]})})}function zY(n,e){return yt(this,void 0,void 0,function*(){return n.send({method:"eth_sendTransaction",params:[e]})})}function fI(n,e){return yt(this,void 0,void 0,function*(){return at.validate(["hex"],[e]),n.send({method:"eth_sendRawTransaction",params:[e]})})}function GY(n,e,t){return yt(this,void 0,void 0,function*(){return at.validate(["blockNumberOrTag"],[t]),n.send({method:"eth_call",params:[e,t]})})}function VY(n,e,t){return yt(this,void 0,void 0,function*(){return at.validate(["blockNumberOrTag"],[t]),n.send({method:"eth_estimateGas",params:[e,t]})})}function $Y(n,e,t){return yt(this,void 0,void 0,function*(){return at.validate(["bytes32","bool"],[e,t]),n.send({method:"eth_getBlockByHash",params:[e,t]})})}function hI(n,e,t){return yt(this,void 0,void 0,function*(){return at.validate(["blockNumberOrTag","bool"],[e,t]),n.send({method:"eth_getBlockByNumber",params:[e,t]})})}function jY(n,e){return yt(this,void 0,void 0,function*(){return at.validate(["bytes32"],[e]),n.send({method:"eth_getTransactionByHash",params:[e]})})}function WY(n,e,t){return yt(this,void 0,void 0,function*(){return at.validate(["bytes32","hex"],[e,t]),n.send({method:"eth_getTransactionByBlockHashAndIndex",params:[e,t]})})}function qY(n,e,t){return yt(this,void 0,void 0,function*(){return at.validate(["blockNumberOrTag","hex"],[e,t]),n.send({method:"eth_getTransactionByBlockNumberAndIndex",params:[e,t]})})}function XY(n,e){return yt(this,void 0,void 0,function*(){return at.validate(["bytes32"],[e]),n.send({method:"eth_getTransactionReceipt",params:[e]})})}function KY(n,e,t){return yt(this,void 0,void 0,function*(){return at.validate(["bytes32","hex"],[e,t]),n.send({method:"eth_getUncleByBlockHashAndIndex",params:[e,t]})})}function YY(n,e,t){return yt(this,void 0,void 0,function*(){return at.validate(["blockNumberOrTag","hex"],[e,t]),n.send({method:"eth_getUncleByBlockNumberAndIndex",params:[e,t]})})}function QY(n,e){return yt(this,void 0,void 0,function*(){return at.validate(["filter"],[e]),n.send({method:"eth_newFilter",params:[e]})})}function ZY(n){return yt(this,void 0,void 0,function*(){return n.send({method:"eth_newBlockFilter",params:[]})})}function JY(n){return yt(this,void 0,void 0,function*(){return n.send({method:"eth_newPendingTransactionFilter",params:[]})})}function eQ(n,e){return yt(this,void 0,void 0,function*(){return at.validate(["hex"],[e]),n.send({method:"eth_uninstallFilter",params:[e]})})}function tQ(n,e){return yt(this,void 0,void 0,function*(){return at.validate(["hex"],[e]),n.send({method:"eth_getFilterChanges",params:[e]})})}function nQ(n,e){return yt(this,void 0,void 0,function*(){return at.validate(["hex"],[e]),n.send({method:"eth_getFilterLogs",params:[e]})})}function rQ(n,e){return yt(this,void 0,void 0,function*(){return at.validate(["filter"],[e]),n.send({method:"eth_getLogs",params:[e]})})}function iQ(n){return yt(this,void 0,void 0,function*(){return n.send({method:"eth_getWork",params:[]})})}function sQ(n,e,t,r){return yt(this,void 0,void 0,function*(){return at.validate(["bytes8","bytes32","bytes32"],[e,t,r]),n.send({method:"eth_submitWork",params:[e,t,r]})})}function oQ(n,e,t,r){return yt(this,void 0,void 0,function*(){at.validate(["hex","blockNumberOrTag"],[e,t]);for(const i of r)at.validate(["number"],[i]);return n.send({method:"eth_feeHistory",params:[e,t,r]})})}function aQ(n){return yt(this,void 0,void 0,function*(){return n.send({method:"eth_pendingTransactions",params:[]})})}function lQ(n){return yt(this,void 0,void 0,function*(){return n.send({method:"eth_requestAccounts",params:[]})})}function cQ(n){return yt(this,void 0,void 0,function*(){return n.send({method:"eth_chainId",params:[]})})}function uQ(n,e,t,r){return yt(this,void 0,void 0,function*(){return at.validate(["address","bytes32[]","blockNumberOrTag"],[e,t,r]),n.send({method:"eth_getProof",params:[e,t,r]})})}function dQ(n){return yt(this,void 0,void 0,function*(){return n.send({method:"web3_clientVersion",params:[]})})}function fQ(n,e,t){return yt(this,void 0,void 0,function*(){return at.validate(["blockNumberOrTag"],[t]),n.send({method:"eth_createAccessList",params:[e,t]})})}function hQ(n,e,t,r=!1){return yt(this,void 0,void 0,function*(){return at.validate(["address"],[e]),n.send({method:`eth_signTypedData${r?"":"_v4"}`,params:[e,t]})})}var Mx=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};function pQ(n){return Mx(this,void 0,void 0,function*(){return n.send({method:"net_version",params:[]})})}function mQ(n){return Mx(this,void 0,void 0,function*(){return n.send({method:"net_peerCount",params:[]})})}function gQ(n){return Mx(this,void 0,void 0,function*(){return n.send({method:"net_listening",params:[]})})}var ta=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const vQ=n=>ta(void 0,void 0,void 0,function*(){return n.send({method:"personal_listAccounts",params:[]})}),yQ=(n,e)=>ta(void 0,void 0,void 0,function*(){return n.send({method:"personal_newAccount",params:[e]})}),_Q=(n,e,t,r)=>ta(void 0,void 0,void 0,function*(){return n.send({method:"personal_unlockAccount",params:[e,t,r]})}),bQ=(n,e)=>ta(void 0,void 0,void 0,function*(){return n.send({method:"personal_lockAccount",params:[e]})}),xQ=(n,e,t)=>ta(void 0,void 0,void 0,function*(){return n.send({method:"personal_importRawKey",params:[e,t]})}),wQ=(n,e,t)=>ta(void 0,void 0,void 0,function*(){return n.send({method:"personal_sendTransaction",params:[e,t]})}),AQ=(n,e,t)=>ta(void 0,void 0,void 0,function*(){return n.send({method:"personal_signTransaction",params:[e,t]})}),EQ=(n,e,t,r)=>ta(void 0,void 0,void 0,function*(){return n.send({method:"personal_sign",params:[e,t,r]})}),SQ=(n,e,t)=>ta(void 0,void 0,void 0,function*(){return n.send({method:"personal_ecRecover",params:[e,t]})}),pE={type:"object",properties:{accessList:{type:"null"},maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},mE={type:"object",properties:{maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},gE={type:"object",properties:{gasPrice:{type:"null"}}},Zh=(n,e,t)=>{try{at.validateJSONSchema(n,e)}catch(r){throw r instanceof Ru?new oj(r.errors,t):r}},TQ=n=>{var e,t;const r=n;if(!ue(r.type)){let s;switch(r.type){case"0x0":s=pE;break;case"0x1":s=mE;break;case"0x2":s=gE;break;default:return _e({format:"uint"},r.type,_t)}return Zh(s,r,r.type),_e({format:"uint"},r.type,_t)}if(!ue(r.maxFeePerGas)||!ue(r.maxPriorityFeePerGas))return Zh(gE,r,"0x2"),"0x2";if(!ue(r.accessList))return Zh(mE,r,"0x1"),"0x1";const i=(e=r.hardfork)!==null&&e!==void 0?e:(t=r.common)===null||t===void 0?void 0:t.hardfork;if(!ue(i)){const s=Object.keys(jd).indexOf(i);if(s>=Object.keys(jd).indexOf("london"))return ue(r.gasPrice)?"0x2":"0x0";if(s===Object.keys(jd).indexOf("berlin"))return"0x0"}if(!ue(r.gasPrice))return Zh(pE,r,"0x0"),"0x0"},MQ=(n,e)=>{var t;return((t=e==null?void 0:e.transactionTypeParser)!==null&&t!==void 0?t:TQ)(n)},RQ=n=>n[0]>127?"0x0":qo(n[0]),IQ={type:"object",properties:{address:{format:"address"},storageKeys:{type:"array",items:{format:"bytes32"}}}},Rx={type:"array",items:Object.assign({},IQ)},CQ={type:"object",properties:{accessList:Object.assign({},Rx),gasUsed:{type:"string"}}},vE={type:"string",enum:["goerli","kovan","mainnet","rinkeby","ropsten","sepolia"]},yE={type:"string",enum:["arrowGlacier","berlin","byzantium","chainstart","constantinople","dao","homestead","istanbul","london","merge","muirGlacier","petersburg","shanghai","spuriousDragon","tangerineWhistle"]},PQ={type:"object",properties:{name:{format:"string"},networkId:{format:"uint"},chainId:{format:"uint"}}},pI={type:"object",properties:{from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},Rx),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},chain:Object.assign({},vE),hardfork:Object.assign({},yE),chainId:{format:"uint"},networkId:{format:"uint"},common:{type:"object",properties:{customChain:Object.assign({},PQ),baseChain:Object.assign({},vE),hardfork:Object.assign({},yE)}},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}}},S_={type:"object",properties:Object.assign(Object.assign({},pI.properties),{blockHash:{format:"bytes32"},blockNumber:{format:"uint"},hash:{format:"bytes32"},transactionIndex:{format:"uint"},from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},Rx),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}})},mI={type:"object",properties:{index:{format:"uint"},validatorIndex:{format:"uint"},address:{format:"address"},amount:{format:"uint"}}},Bm={type:"object",properties:{baseFeePerGas:{format:"uint"},blobGasUsed:{format:"uint"},difficulty:{format:"uint"},excessBlobGas:{format:"uint"},extraData:{format:"bytes"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},hash:{format:"bytes32"},logsBloom:{format:"bytes256"},miner:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},number:{format:"uint"},parentBeaconBlockRoot:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},stateRoot:{format:"bytes32"},timestamp:{format:"uint"},totalDifficulty:{format:"uint"},transactions:{oneOf:[{type:"array",items:Object.assign({},S_)},{type:"array",items:{format:"bytes32"}}]},transactionsRoot:{format:"bytes32"},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},mI)},withdrawalsRoot:{format:"bytes32"}}},NQ={type:"object",properties:{author:{format:"bytes32"},excessDataGas:{format:"uint"},baseFeePerGas:{format:"uint"},blobGasUsed:{format:"uint"},difficulty:{format:"uint"},excessBlobGas:{format:"uint"},extraData:{format:"bytes"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},hash:{format:"bytes32"},logsBloom:{format:"bytes256"},miner:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},number:{format:"uint"},parentBeaconBlockRoot:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},stateRoot:{format:"bytes32"},timestamp:{format:"uint"},totalDifficulty:{format:"uint"},transactions:{type:"array",items:{format:"bytes32"}},transactionsRoot:{format:"bytes32"},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},mI)},withdrawalsRoot:{format:"bytes32"}}},rd={type:"object",properties:{removed:{format:"bool"},logIndex:{format:"uint"},transactionIndex:{format:"uint"},transactionHash:{format:"bytes32"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},address:{format:"address"},data:{format:"bytes"},topics:{type:"array",items:{format:"bytes32"}}}},kQ={type:"object",properties:{startingBlock:{format:"string"},currentBlock:{format:"string"},highestBlock:{format:"string"},knownStates:{format:"string"},pulledStates:{format:"string"}}},id={type:"object",properties:{transactionHash:{format:"bytes32"},transactionIndex:{format:"uint"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},from:{format:"address"},to:{format:"address"},cumulativeGasUsed:{format:"uint"},gasUsed:{format:"uint"},effectiveGasPrice:{format:"uint"},contractAddress:{format:"address"},logs:{type:"array",items:Object.assign({},rd)},logsBloom:{format:"bytes"},root:{format:"bytes"},status:{format:"uint"},type:{format:"uint"}}},BQ={type:"object",properties:{messageHash:{format:"bytes"},r:{format:"bytes32"},s:{format:"bytes32"},v:{format:"bytes"},message:{format:"bytes"},signature:{format:"bytes"}}},LQ={type:"object",properties:{oldestBlock:{format:"uint"},baseFeePerGas:{type:"array",items:{format:"uint"}},reward:{type:"array",items:{type:"array",items:{format:"uint"}}},gasUsedRatio:{type:"array",items:{type:"number"}}}},DQ={type:"object",properties:{key:{format:"bytes32"},value:{format:"uint"},proof:{type:"array",items:{format:"bytes32"}}}},OQ={type:"object",properties:{balance:{format:"uint"},codeHash:{format:"bytes32"},nonce:{format:"uint"},storageHash:{format:"bytes32"},accountProof:{type:"array",items:{format:"bytes32"}},storageProof:{type:"array",items:Object.assign({},DQ)}}};function ni(n,e=Lr,t={transactionSchema:S_,fillInputAndData:!1}){var r,i;let s=Qa({},n);if(ue(n==null?void 0:n.common)||(s.common=Object.assign({},n.common),ue((r=n.common)===null||r===void 0?void 0:r.customChain)||(s.common.customChain=Object.assign({},n.common.customChain))),s=_e((i=t.transactionSchema)!==null&&i!==void 0?i:S_,s,e),!ue(s.data)&&!ue(s.input)&&qo(s.data)!==qo(s.input))throw new SM({data:Ot(s.data),input:Ot(s.input)});return t.fillInputAndData&&(ue(s.data)?ue(s.input)||(s.data=s.input):s.input=s.data),ue(s.gasLimit)||(s.gas=s.gasLimit,delete s.gasLimit),s}function FQ(n,e,t={fillInputAndData:!1}){return{raw:_e({format:"bytes"},n,e),tx:ni(Object.assign(Object.assign({},Wl.fromSerializedData(An(n)).toJSON()),{hash:Ot(Pu(An(n))),type:RQ(An(n))}),e,{fillInputAndData:t.fillInputAndData,transactionSchema:t.transactionSchema})}}var Ix=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};function Cx(n,e){return Ix(this,void 0,void 0,function*(){const t=yield pQ(n.requestManager);return _e({format:"uint"},t,e)})}function UQ(n,e){return Ix(this,void 0,void 0,function*(){const t=yield mQ(n.requestManager);return _e({format:"uint"},t,e)})}const HQ=n=>Ix(void 0,void 0,void 0,function*(){return gQ(n.requestManager)});var hv=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class gI extends Qr{getId(e=this.defaultReturnFormat){return hv(this,void 0,void 0,function*(){return Cx(this,e)})}getPeerCount(e=this.defaultReturnFormat){return hv(this,void 0,void 0,function*(){return UQ(this,e)})}isListening(){return hv(this,void 0,void 0,function*(){return HQ(this)})}}const Ou="ALLEVENTS",T_={name:Ou,signature:"",type:"event",inputs:[]},G0={bytes:$o.HEX,number:Bi.NUMBER};var vI=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};function zQ(n,e,t){return vI(this,void 0,void 0,function*(){var r,i,s,o;const a=yield qI(e,e.defaultBlock,!1,_t);if(ue(a.baseFeePerGas))throw new nj;let l;if(ue(n.gasPrice)&&BigInt(a.baseFeePerGas)===BigInt(0)&&(l=yield Ux(e,t)),!ue(n.gasPrice)||!ue(l)){const c=_e({format:"uint"},(r=n.gasPrice)!==null&&r!==void 0?r:l,t);return{maxPriorityFeePerGas:c,maxFeePerGas:c}}return{maxPriorityFeePerGas:_e({format:"uint"},(i=n.maxPriorityFeePerGas)!==null&&i!==void 0?i:e.defaultMaxPriorityFeePerGas,t),maxFeePerGas:_e({format:"uint"},(s=n.maxFeePerGas)!==null&&s!==void 0?s:BigInt(a.baseFeePerGas)*BigInt(2)+BigInt((o=n.maxPriorityFeePerGas)!==null&&o!==void 0?o:e.defaultMaxPriorityFeePerGas),t)}})}function yI(n,e,t){return vI(this,void 0,void 0,function*(){const r=_I(n,e);if(!ue(r)){if(r.startsWith("-"))throw new k1(r);if(Number(r)<0||Number(r)>127)throw new k1(r);if(ue(n.gasPrice)&&(r==="0x0"||r==="0x1"))return{gasPrice:yield Ux(e,t),maxPriorityFeePerGas:void 0,maxFeePerGas:void 0};if(r==="0x2")return Object.assign({gasPrice:void 0},yield zQ(n,e,t))}})}var Px=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const M_=(n,e,t,r)=>{if(t!==void 0&&n in t&&t[n]!==void 0){if(typeof t[n]=="string"&&_i(t[n]))return t[n];if(!rn(t[n])&&oR(t[n])){if(e.wallet){const i=e.wallet.get(_e({format:"uint"},t[n],G0));if(!ue(i))return i.address;throw new B1}throw new B1}else throw n==="from"?new O$(t.from):new F$(t.to)}if(n==="from"){if(!ue(r))return z0(r);if(!ue(e.defaultAccount))return e.defaultAccount}},GQ=(n,e,...t)=>Px(void 0,[n,e,...t],void 0,function*(r,i,s=r.defaultReturnFormat){if(ue(i))throw new tj;return KI(r,i,r.defaultBlock,s)}),_I=(n,e)=>{const t=MQ(n,e);if(!ue(t))return t;if(!ue(e.defaultTransactionType))return _e({format:"uint"},e.defaultTransactionType,_t)};function VQ(n){return Px(this,void 0,void 0,function*(){var e,t;let r=_e(pI,n.transaction,n.web3Context.defaultReturnFormat);if(ue(r.from)&&(r.from=M_("from",n.web3Context,void 0,n.privateKey)),ue(r.nonce)&&(r.nonce=yield GQ(n.web3Context,r.from,_t)),ue(r.value)&&(r.value="0x0"),ue(r.data))ue(r.input)?r.input="0x":r.input.startsWith("0x")||(r.input=`0x${r.input}`);else{if(!ue(r.input)&&r.data!==r.input)throw new SM({data:Ot(r.data),input:Ot(r.input)});r.data.startsWith("0x")||(r.data=`0x${r.data}`)}if(ue(r.common)){if(n.web3Context.defaultCommon){const i=n.web3Context.defaultCommon,s=i.customChain.chainId,o=i.customChain.networkId,a=i.customChain.name;r.common=Object.assign(Object.assign({},i),{customChain:{chainId:s,networkId:o,name:a}})}ue(r.chain)&&(r.chain=n.web3Context.defaultChain),ue(r.hardfork)&&(r.hardfork=n.web3Context.defaultHardfork)}if(ue(r.chainId)&&ue((e=r.common)===null||e===void 0?void 0:e.customChain.chainId)&&(r.chainId=yield QI(n.web3Context,_t)),ue(r.networkId)&&(r.networkId=(t=n.web3Context.defaultNetworkId)!==null&&t!==void 0?t:yield Cx(n.web3Context,_t)),ue(r.gasLimit)&&!ue(r.gas)&&(r.gasLimit=r.gas),r.type=_I(r,n.web3Context),ue(r.accessList)&&(r.type==="0x1"||r.type==="0x2")&&(r.accessList=[]),n.fillGasPrice&&(r=Object.assign(Object.assign({},r),yield yI(r,n.web3Context,_t))),ue(r.gas)&&ue(r.gasLimit)&&n.fillGasLimit){const i=yield Gx(n.web3Context,r,"latest",_t);r=Object.assign(Object.assign({},r),{gas:_e({format:"uint"},i,_t)})}return r})}const $Q=n=>Px(void 0,void 0,void 0,function*(){var e;return((e=n.web3Context.transactionBuilder)!==null&&e!==void 0?e:VQ)(Object.assign(Object.assign({},n),{transaction:n.transaction}))});var Nx=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};function R_(n,e,t){const r=n.transactionPollingInterval,[i,s]=_R(()=>Nx(this,void 0,void 0,function*(){let a;try{a=yield Hx(n,G0)}catch{return}const l=a-e;if(l>=n.transactionBlockTimeout)return new RM({starterBlockNumber:e,numberOfBlocks:l,transactionHash:t})}),r);return[s,{clean:()=>{clearInterval(i)}}]}function jQ(n,e,t){return Nx(this,void 0,void 0,function*(){var r;let i=!0,s,o;function a(c,u){o.clean(),i=!1;const[d,f]=R_(n,e,t);o.clean=f.clean,d.catch(p=>c(p))}try{s=yield(r=n.subscriptionManager)===null||r===void 0?void 0:r.subscribe("newHeads"),o={clean:()=>{var c;s.id&&((c=n.subscriptionManager)===null||c===void 0||c.removeSubscription(s).then(()=>{}).catch(()=>{}))}}}catch{return R_(n,e,t)}return[new Promise((c,u)=>{try{s.on("data",d=>{if(i=!1,!(d!=null&&d.number))return;const f=Number(BigInt(d.number)-BigInt(e));f>=n.transactionBlockTimeout&&u(new RM({starterBlockNumber:e,numberOfBlocks:f,transactionHash:t}))}),s.on("error",d=>{a(u,d)})}catch(d){a(u,d)}setTimeout(()=>{i&&a(u)},n.blockHeaderTimeout*1e3)}),o]})}function bI(n,e){return Nx(this,void 0,void 0,function*(){var t,r;const{provider:i}=n.requestManager;let s;const o=yield Hx(n,G0);return!((r=(t=i).supportsSubscriptions)===null||r===void 0)&&r.call(t)&&n.enableExperimentalFeatures.useSubscriptionWhenCheckingBlockTimeout?s=yield jQ(n,o,e):s=R_(n,o,e),s})}var WQ=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};function I_(n,e,t){return WQ(this,void 0,void 0,function*(){const[r,i]=lx(n.transactionSendTimeout,new rj({numberOfSeconds:n.transactionSendTimeout/1e3,transactionHash:t})),[s,o]=yield bI(n,t);try{return yield Promise.race([e(),i,s])}finally{clearTimeout(r),o.clean()}})}var _E=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};function xI(n,e,t,r){return _E(this,void 0,void 0,function*(){var i;const s=(i=n.transactionReceiptPollingInterval)!==null&&i!==void 0?i:n.transactionPollingInterval,[o,a]=ax(()=>_E(this,void 0,void 0,function*(){try{return(r??XI)(n,e,t)}catch{return}}),s),[l,c]=lx(n.transactionPollingTimeout,new MM({numberOfSeconds:n.transactionPollingTimeout/1e3,transactionHash:e})),[u,d]=yield bI(n,e);try{return yield Promise.race([o,c,u])}finally{l&&clearTimeout(l),a&&clearInterval(a),d.clean()}})}var qQ=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Ap=({web3Context:n,transactionReceipt:e,transactionPromiEvent:t,customTransactionReceiptSchema:r,returnFormat:i})=>{var s;let o=1;const a=setInterval(()=>{qQ(void 0,void 0,void 0,function*(){if(o>=n.transactionConfirmationBlocks){clearInterval(a);return}const l=yield hI(n.requestManager,Yn(BigInt(e.blockNumber)+BigInt(o)),!1);l!=null&&l.hash&&(o+=1,t.emit("confirmation",{confirmations:_e({format:"uint"},o,i),receipt:_e(r??id,e,i),latestBlockHash:_e({format:"bytes32"},l.hash,i)}))})},(s=n.transactionReceiptPollingInterval)!==null&&s!==void 0?s:n.transactionPollingInterval)};var bE=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const XQ=({web3Context:n,transactionReceipt:e,transactionPromiEvent:t,customTransactionReceiptSchema:r,returnFormat:i})=>{let s=!0,o;setImmediate(()=>{var a;(a=n.subscriptionManager)===null||a===void 0||a.subscribe("newHeads").then(l=>{l.on("data",c=>bE(void 0,void 0,void 0,function*(){var u;if(s=!1,!(c!=null&&c.number)||o===(c==null?void 0:c.parentHash))return;o=c==null?void 0:c.parentHash;const d=BigInt(c.number)-BigInt(e.blockNumber)+BigInt(1);t.emit("confirmation",{confirmations:_e({format:"uint"},d,i),receipt:_e(r??id,e,i),latestBlockHash:_e({format:"bytes32"},c.parentHash,i)}),d>=n.transactionConfirmationBlocks&&(yield(u=n.subscriptionManager)===null||u===void 0?void 0:u.removeSubscription(l))})),l.on("error",()=>bE(void 0,void 0,void 0,function*(){var c;yield(c=n.subscriptionManager)===null||c===void 0?void 0:c.removeSubscription(l),s=!1,Ap({web3Context:n,transactionReceipt:e,transactionPromiEvent:t,customTransactionReceiptSchema:r,returnFormat:i})}))}).catch(()=>{s=!1,Ap({web3Context:n,transactionReceipt:e,customTransactionReceiptSchema:r,transactionPromiEvent:t,returnFormat:i})})}),setTimeout(()=>{s&&Ap({web3Context:n,transactionReceipt:e,transactionPromiEvent:t,returnFormat:i})},n.blockHeaderTimeout*1e3)};function KQ(n,e,t,r,i,s){if(ue(t)||ue(t.blockHash))throw new ij({receipt:t,blockHash:_e({format:"bytes32"},t==null?void 0:t.blockHash,i),transactionHash:_e({format:"bytes32"},r,i)});if(!t.blockNumber)throw new sj({receipt:t});e.emit("confirmation",{confirmations:_e({format:"uint"},1,i),receipt:_e(s??id,t,i),latestBlockHash:_e({format:"bytes32"},t.blockHash,i)});const o=n.requestManager.provider;o&&"supportsSubscriptions"in o&&o.supportsSubscriptions()?XQ({web3Context:n,transactionReceipt:t,transactionPromiEvent:e,customTransactionReceiptSchema:s,returnFormat:i}):Ap({web3Context:n,transactionReceipt:t,transactionPromiEvent:e,customTransactionReceiptSchema:s,returnFormat:i})}const V0=n=>!dt(n)&&typeof n=="object"&&!dt(n.type)&&n.type==="error",kx=n=>!dt(n)&&typeof n=="object"&&!dt(n.type)&&n.type==="event",$0=n=>!dt(n)&&typeof n=="object"&&!dt(n.type)&&n.type==="function",YQ=n=>!dt(n)&&typeof n=="object"&&!dt(n.type)&&n.type==="constructor",QQ=n=>typeof n=="object"&&typeof n.components>"u"&&typeof n.name>"u",wI=n=>n.includes("[]")?{type:"tuple[]",name:n.slice(0,-2)}:{type:"tuple",name:n},AI=n=>{const e=[];for(const t of Object.keys(n)){const r=n[t];typeof r=="object"?e.push(Object.assign(Object.assign({},wI(t)),{components:AI(r)})):e.push({name:t,type:n[t]})}return e},C_=(n,e)=>{const t=[];return e.forEach(r=>{if(typeof r.components=="object"){if(!r.type.startsWith("tuple"))throw new zt(`Invalid value given "${r.type}". Error: components found but type is not tuple.`);const i=r.type.indexOf("["),s=i>=0?r.type.substring(i):"",o=C_(n,r.components);Array.isArray(o)&&n?t.push(`tuple(${o.join(",")})${s}`):n?t.push(`(${o.join()})`):t.push(`(${o.join(",")})${s}`)}else t.push(r.type)}),t},Fo=n=>{var e,t,r,i;return V0(n)||kx(n)||$0(n)?!((e=n.name)===null||e===void 0)&&e.includes("(")?n.name:`${(t=n.name)!==null&&t!==void 0?t:""}(${C_(!1,(r=n.inputs)!==null&&r!==void 0?r:[]).join(",")})`:`(${C_(!1,(i=n.inputs)!==null&&i!==void 0?i:[]).join(",")})`},ZQ=n=>{if(typeof n!="string"&&!V0(n))throw new zt("Invalid parameter value in encodeErrorSignature");let e;return n&&(typeof n=="function"||typeof n=="object")?e=Fo(n):e=n,bi(e)},Bx=n=>{if(typeof n!="string"&&!kx(n))throw new zt("Invalid parameter value in encodeEventSignature");let e;return n&&(typeof n=="function"||typeof n=="object")?e=Fo(n):e=n,bi(e)};function Lx(n,e){const t=n.exec(e);return t==null?void 0:t.groups}var EI=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,SI=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,TI=/^\(.+?\).*?$/,JQ=Object.defineProperty,eZ=(n,e,t)=>e in n?JQ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Sd=(n,e,t)=>(eZ(n,typeof e!="symbol"?e+"":e,t),t),tZ="abitype",nZ="0.7.1",qr=class extends Error{constructor(n,e={}){var s;const t=e.cause instanceof qr?e.cause.details:(s=e.cause)!=null&&s.message?e.cause.message:e.details,r=e.cause instanceof qr&&e.cause.docsPath||e.docsPath,i=[n||"An error occurred.","",...e.metaMessages?[...e.metaMessages,""]:[],...r?[`Docs: https://abitype.dev${r}`]:[],...t?[`Details: ${t}`]:[],`Version: ${tZ}@${nZ}`].join(`
`);super(i),Sd(this,"details"),Sd(this,"docsPath"),Sd(this,"metaMessages"),Sd(this,"shortMessage"),Sd(this,"name","AbiTypeError"),e.cause&&(this.cause=e.cause),this.details=t,this.docsPath=r,this.metaMessages=e.metaMessages,this.shortMessage=n}},MI=/^struct (?<name>[a-zA-Z0-9_]+) \{(?<properties>.*?)\}$/;function RI(n){return MI.test(n)}function rZ(n){return Lx(MI,n)}var xE=new Set(["memory","indexed","storage","calldata"]),iZ=new Set(["calldata","memory","storage"]);function sZ(n,e){return e?`${e}:${n}`:n}var pv=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]),oZ=/^(?<type>[a-zA-Z0-9_]+?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z0-9_]+))?$/,aZ=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z0-9_]+))?$/,lZ=/^u?int$/;function Lm(n,e){var d,f;const t=sZ(n,e==null?void 0:e.type);if(pv.has(t))return pv.get(t);const r=TI.test(n),i=Lx(r?aZ:oZ,n);if(!i)throw new qr("Invalid ABI parameter.",{details:n});if(i.name&&uZ(i.name))throw new qr("Invalid ABI parameter.",{details:n,metaMessages:[`"${i.name}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]});const s=i.name?{name:i.name}:{},o=i.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let l,c={};if(r){l="tuple";const p=Oc(i.type),m=[],g=p.length;for(let y=0;y<g;y++)m.push(Lm(p[y],{structs:a}));c={components:m}}else if(i.type in a)l="tuple",c={components:a[i.type]};else if(lZ.test(i.type))l=`${i.type}256`;else if(l=i.type,(e==null?void 0:e.type)!=="struct"&&!II(l))throw new qr("Unknown type.",{metaMessages:[`Type "${l}" is not a valid ABI type.`]});if(i.modifier){if(!((f=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&f.call(d,i.modifier)))throw new qr("Invalid ABI parameter.",{details:n,metaMessages:[`Modifier "${i.modifier}" not allowed${e!=null&&e.type?` in "${e.type}" type`:""}.`]});if(iZ.has(i.modifier)&&!dZ(l,!!i.array))throw new qr("Invalid ABI parameter.",{details:n,metaMessages:[`Modifier "${i.modifier}" not allowed${e!=null&&e.type?` in "${e.type}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${i.modifier}" was given.`]})}const u={type:`${l}${i.array??""}`,...s,...o,...c};return pv.set(t,u),u}function Oc(n,e=[],t="",r=0){if(n===""){if(t==="")return e;if(r!==0)throw new qr("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${r>0?"opening":"closing"} parentheses.`],details:`Depth "${r}"`});return[...e,t.trim()]}const i=n.length;for(let s=0;s<i;s++){const o=n[s],a=n.slice(s+1);switch(o){case",":return r===0?Oc(a,[...e,t.trim()]):Oc(a,e,`${t}${o}`,r);case"(":return Oc(a,e,`${t}${o}`,r+1);case")":return Oc(a,e,`${t}${o}`,r-1);default:return Oc(a,e,`${t}${o}`,r)}}return[]}function II(n){return n==="address"||n==="bool"||n==="function"||n==="string"||EI.test(n)||SI.test(n)}var cZ=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function uZ(n){return n==="address"||n==="bool"||n==="function"||n==="string"||n==="tuple"||EI.test(n)||SI.test(n)||cZ.test(n)}function dZ(n,e){return e||n==="bytes"||n==="string"||n==="tuple"}function fZ(n){const e={},t=n.length;for(let o=0;o<t;o++){const a=n[o];if(!RI(a))continue;const l=rZ(a);if(!l)throw new qr("Invalid struct signature.",{details:a});const c=l.properties.split(";"),u=[],d=c.length;for(let f=0;f<d;f++){const m=c[f].trim();if(!m)continue;const g=Lm(m,{type:"struct"});u.push(g)}if(!u.length)throw new qr("Invalid struct signature.",{details:a,metaMessages:["No properties exist."]});e[l.name]=u}const r={},i=Object.entries(e),s=i.length;for(let o=0;o<s;o++){const[a,l]=i[o];r[a]=CI(l,e)}return r}var hZ=/^(?<type>[a-zA-Z0-9_]+?)(?<array>(?:\[\d*?\])+?)?$/;function CI(n,e,t=new Set){const r=[],i=n.length;for(let s=0;s<i;s++){const o=n[s];if(TI.test(o.type))r.push(o);else{const l=Lx(hZ,o.type);if(!(l!=null&&l.type))throw new qr("Invalid ABI parameter.",{details:JSON.stringify(o,null,2),metaMessages:["ABI parameter type is invalid."]});const{array:c,type:u}=l;if(u in e){if(t.has(u))throw new qr("Circular reference detected.",{metaMessages:[`Struct "${u}" is a circular reference.`]});r.push({...o,type:`tuple${c??""}`,components:CI(e[u]??[],e,new Set([...t,u]))})}else if(II(u))r.push(o);else throw new qr("Unknown type.",{metaMessages:[`Type "${u}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]})}}return r}function pZ(n){let e;if(typeof n=="string")e=Lm(n,{modifiers:xE});else{const t=fZ(n),r=n.length;for(let i=0;i<r;i++){const s=n[i];if(!RI(s)){e=Lm(s,{modifiers:xE,structs:t});break}}}if(!e)throw new qr("Failed to parse ABI parameter.",{details:`parseAbiParameter(${JSON.stringify(n,null,2)})`,docsPath:"/api/human.html#parseabiparameter-1"});return e}const On=32;function P_(n=0){var e;if(((e=globalThis.Buffer)===null||e===void 0?void 0:e.alloc)!==void 0){const t=globalThis.Buffer.alloc(n);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}return new Uint8Array(n)}function PI(n){var e,t;return Object.assign(Object.assign({},n),{name:(e=n.name)!==null&&e!==void 0?e:"",components:(t=n.components)===null||t===void 0?void 0:t.map(r=>PI(r))})}function mZ(n){return!dt(n)&&typeof n=="object"&&!dt(n.type)&&typeof n.type=="string"}function NI(n){return n.map(e=>{var t;if(mZ(e))return e;if(typeof e=="string")return PI(pZ(e.replace(/tuple/,"")));if(QQ(e)){const r=Object.keys(e)[0],i=wI(r);return i.name=(t=i.name)!==null&&t!==void 0?t:"",Object.assign(Object.assign({},i),{components:AI(e[r])})}throw new zt("Invalid abi")})}function Dx(n){const e=n.type.lastIndexOf("["),t=n.type.substring(0,e),r=n.type.substring(e);let i=-1;if(r!=="[]"&&(i=Number(r.slice(1,-1)),isNaN(i)))throw new zt("Invalid fixed array size",{size:r});return{param:{type:t,name:"",components:n.components},size:i}}function Dm(n){var e,t;return n.type==="string"||n.type==="bytes"||n.type.endsWith("[]")?!0:n.type==="tuple"?(t=(e=n.components)===null||e===void 0?void 0:e.some(Dm))!==null&&t!==void 0?t:!1:n.type.endsWith("]")?Dm(Dx(n).param):!1}const kI=20,BI=On-kI;function gZ(n,e){if(typeof e!="string")throw new zt("address type expects string as input type",{value:e,name:n.name,type:n.type});let t=e.toLowerCase();if(t.startsWith("0x")||(t=`0x${t}`),!_i(t))throw new zt("provided input is not valid address",{value:e,name:n.name,type:n.type});const r=nc(t),i=P_(On);return i.set(r,BI),{dynamic:!1,encoded:i}}function vZ(n,e){const t=e.subarray(BI,On);if(t.length!==kI)throw new zt("Invalid decoding input, not enough bytes to decode address",{bytes:e});const r=Jo(t);return{result:io(r),encoded:e.subarray(On),consumed:On}}const Va=new Map;let Jh=BigInt(256);for(let n=8;n<=256;n+=8)Va.set(`uint${n}`,{min:BigInt(0),max:Jh-BigInt(1)}),Va.set(`int${n}`,{min:-Jh/BigInt(2),max:Jh/BigInt(2)-BigInt(1)}),Jh*=BigInt(256);Va.set("int",Va.get("int256"));Va.set("uint",Va.get("uint256"));const LI=BigInt(1)<<BigInt(256);function yZ(n,e=On){let t;return n<0?t=(LI+n).toString(16):t=n.toString(16),t=Cu(t,e*2),nc(t)}function _Z(n,e){const t=Jo(n),r=BigInt(t);return r<=e?r:r-LI}function ah(n,e){let t;try{t=_l(e)}catch{throw new zt("provided input is not number value",{type:n.type,value:e,name:n.name})}const r=Va.get(n.type);if(!r)throw new zt("provided abi contains invalid number datatype",{type:n.type});if(t<r.min)throw new zt("provided input is less then minimum for given type",{type:n.type,value:e,name:n.name,minimum:r.min.toString()});if(t>r.max)throw new zt("provided input is greater then maximum for given type",{type:n.type,value:e,name:n.name,maximum:r.max.toString()});return{dynamic:!1,encoded:yZ(t)}}function Fu(n,e){if(e.length<On)throw new zt("Not enough bytes left to decode",{param:n,bytesLeft:e.length});const t=e.subarray(0,On),r=Va.get(n.type);if(!r)throw new zt("provided abi contains invalid number datatype",{type:n.type});const i=_Z(t,r.max);if(i<r.min)throw new zt("decoded value is less then minimum for given type",{type:n.type,value:i,name:n.name,minimum:r.min.toString()});if(i>r.max)throw new zt("decoded value is greater then maximum for given type",{type:n.type,value:i,name:n.name,maximum:r.max.toString()});return{result:i,encoded:e.subarray(On),consumed:On}}function bZ(n,e){let t;try{t=dR(e)}catch(r){if(r instanceof jb)throw new zt("provided input is not valid boolean value",{type:n.type,value:e,name:n.name})}return ah({type:"uint8",name:""},Number(t))}function xZ(n,e){const t=Fu({type:"uint8",name:""},e);if(t.result>1||t.result<0)throw new zt("Invalid boolean value encoded",{boolBytes:e.subarray(0,On),numberResult:t});return{result:t.result===BigInt(1),encoded:t.encoded,consumed:On}}const wZ=32;function DI(n,e){if(typeof e=="string"&&e.length%2!==0&&(e+="0"),!Ka(e))throw new zt("provided input is not valid bytes value",{type:n.type,value:e,name:n.name});const t=Zs(e),[,r]=n.type.split("bytes");if(r){if(Number(r)>wZ||Number(r)<1)throw new zt("invalid bytes type. Static byte type can have between 1 and 32 bytes",{type:n.type});if(Number(r)<t.length)throw new zt("provided input size is different than type size",{type:n.type,value:e,name:n.name});const o=P_(On);return o.set(t),{dynamic:!1,encoded:o}}const i=Math.ceil(t.length/On),s=P_(On+i*On);return s.set(ah({type:"uint32",name:""},t.length).encoded),s.set(t,On),{dynamic:!0,encoded:s}}function OI(n,e){const[,t]=n.type.split("bytes");let r=Number(t),i=e,s=1,o=0;if(!r){const a=Fu({type:"uint32",name:""},i);r=Number(a.result),o+=a.consumed,i=a.encoded,s=Math.ceil(r/On)}if(r>e.length)throw new zt("there is not enough data to decode",{type:n.type,encoded:e,size:r});return{result:Ot(i.subarray(0,r)),encoded:i.subarray(s*On),consumed:o+s*On}}function AZ(n,e){if(typeof e!="string")throw new zt("invalid input, should be string",{input:e});const t=ix(e);return DI({type:"bytes",name:""},t)}function EZ(n,e){const t=OI({type:"bytes",name:""},e);return{result:N0(t.result),encoded:t.encoded,consumed:t.consumed}}function FI(n){let e=0,t=0;const r=[],i=[];for(const s of n)s.dynamic?e+=On:e+=s.encoded.length;for(const s of n)s.dynamic?(r.push(ah({type:"uint256",name:""},e+t)),i.push(s),t+=s.encoded.length):r.push(s);return Ur(...r.map(s=>s.encoded),...i.map(s=>s.encoded))}function SZ(n,e){if(!Array.isArray(e))throw new zt("Expected value to be array",{abi:n,values:e});const{size:t,param:r}=Dx(n),i=e.map(a=>N_(r,a)),s=t===-1,o=i.length>0&&i[0].dynamic;if(!s&&e.length!==t)throw new zt("Given arguments count doesn't match array length",{arrayLength:t,argumentsLength:e.length});if(s||o){const a=FI(i);if(s){const l=ah({type:"uint256",name:""},i.length).encoded;return{dynamic:!0,encoded:i.length>0?Ur(l,a):l}}return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:Ur(...i.map(a=>a.encoded))}}function TZ(n,e){let{size:t,param:r}=Dx(n);const i=t===-1;let s=0;const o=[];let a=e;if(i){const c=Fu({type:"uint32",name:""},e);t=Number(c.result),s=c.consumed,a=c.encoded}if(Dm(r)){for(let c=0;c<t;c+=1){const u=Fu({type:"uint32",name:""},a.subarray(c*On));s+=u.consumed;const d=Om(r,a.subarray(Number(u.result)));s+=d.consumed,o.push(d.result)}return{result:o,encoded:a.subarray(s),consumed:s}}for(let c=0;c<t;c+=1){const u=Om(r,e.subarray(s));s+=u.consumed,o.push(u.result)}return{result:o,encoded:e.subarray(s),consumed:s}}function N_(n,e){if(n.type==="string")return AZ(n,e);if(n.type==="bool")return bZ(n,e);if(n.type==="address")return gZ(n,e);if(n.type==="tuple")return Ox(n,e);if(n.type.endsWith("]"))return SZ(n,e);if(n.type.startsWith("bytes"))return DI(n,e);if(n.type.startsWith("uint")||n.type.startsWith("int"))return ah(n,e);throw new zt("Unsupported",{param:n,value:e})}function Om(n,e){if(n.type==="string")return EZ(n,e);if(n.type==="bool")return xZ(n,e);if(n.type==="address")return vZ(n,e);if(n.type==="tuple")return UI(n,e);if(n.type.endsWith("]"))return TZ(n,e);if(n.type.startsWith("bytes"))return OI(n,e);if(n.type.startsWith("uint")||n.type.startsWith("int"))return Fu(n,e);throw new zt("Unsupported",{param:n,bytes:e})}function Ox(n,e){var t,r,i;let s=!1;if(!Array.isArray(e)&&typeof e!="object")throw new zt("param must be either Array or Object",{param:n,input:e});const o=e,a=[];for(let l=0;l<((r=(t=n.components)===null||t===void 0?void 0:t.length)!==null&&r!==void 0?r:0);l+=1){const c=n.components[l];let u;if(Array.isArray(o)){if(l>=o.length)throw new zt("input param length missmatch",{param:n,input:e});u=N_(c,o[l])}else{const d=o[(i=c.name)!==null&&i!==void 0?i:""];if(d==null)throw new zt("missing input defined in abi",{param:n,input:e,paramName:c.name});u=N_(c,d)}u.dynamic&&(s=!0),a.push(u)}return s?{dynamic:!0,encoded:FI(a)}:{dynamic:!1,encoded:Ur(...a.map(l=>l.encoded))}}function UI(n,e){const t={__length__:0};let r=0;if(!n.components)return{result:t,encoded:e,consumed:r};let i=0;for(const[s,o]of n.components.entries()){let a;if(Dm(o)){const l=Fu({type:"uint32",name:""},e.subarray(r));a=Om(o,e.subarray(Number(l.result))),r+=l.consumed,i+=a.consumed}else a=Om(o,e.subarray(r)),r+=a.consumed;t.__length__+=1,t[s]=a.result,o.name&&o.name!==""&&(t[o.name]=a.result)}return{encoded:e.subarray(r+i),result:t,consumed:r+i}}function MZ(n,e,t){const r=NI(n),i=nc(e);return UI({type:"tuple",name:"",components:r},i).result}function HI(n){const e=[];return n.forEach(t=>{if(Array.isArray(t)){const r=HI(t);e.push({type:"tuple",components:r,name:""})}else e.push({type:qo(t,!0)})}),e}function j0(n,e){if((n==null?void 0:n.length)!==e.length)throw new zt("Invalid number of values received for given ABI",{expected:n==null?void 0:n.length,received:e.length});const t=NI(n);return Jo(Ox({type:"tuple",name:"",components:t},e).encoded)}function RZ(n){try{const e=HI(n);return Jo(Ox({type:"tuple",name:"",components:e},n).encoded)}catch{throw new zt("Could not infer types from given params",{params:n})}}const k_=(n,e)=>j0([n],[e]),zI=(n,e,t)=>{try{if(n.length>0&&(!e||e==="0x"||e==="0X"))throw new zt("Returned values aren't valid, did it run Out of Gas? You might also see this error if you are not using the correct ABI for the contract you are retrieving data from, requesting data from a block number that does not exist, or querying a node which is not fully synced.");return MZ(n,`0x${e.replace(/0x/i,"")}`,t)}catch(r){throw new zt(`Parameter decoding error: ${r.message}`,{internalErr:r})}},Cl=(n,e)=>zI(n,e,!1),GI=(n,e)=>Cl([n],e)[0],Pf=n=>{if(typeof n!="string"&&!$0(n))throw new zt("Invalid parameter value in encodeFunctionSignature");let e;return n&&(typeof n=="function"||typeof n=="object")?e=Fo(n):e=n,bi(e).slice(0,10)},IZ=(n,e)=>{var t;if(!$0(n))throw new zt("Invalid parameter value in encodeFunctionCall");return`${Pf(n)}${j0((t=n.inputs)!==null&&t!==void 0?t:[],e??[]).replace("0x","")}`},B_=(n,e,t=!0)=>{const r=t&&e&&e.length>=10&&e.startsWith("0x")?e.slice(10):e;if(!n.inputs)throw new Dr("No inputs found in the ABI");const i=Cl([...n.inputs],r);return Object.assign(Object.assign({},i),{__method__:Fo(n)})},CZ=(n,e)=>{if(n.type==="constructor")return e;if(!e)return null;const t=e.length>=2?e.slice(2):e;if(!n.outputs)return null;const r=Cl([...n.outputs],t);return r.__length__===1?r[0]:r},PZ=["bool","string","int","uint","address","fixed","ufixed"],NZ=(n,e)=>n==="string"?e:GI(n,e),VI=(n,e,t)=>{const r=Array.isArray(t)?t:[t],i={},s={};for(const[f,p]of n.entries())p.indexed?i[f]=p:s[f]=p;const o=e?zI(Object.values(s),e,!0):{__length__:0},a=r.length-Object.keys(i).length,l=Object.values(i).map((f,p)=>PZ.some(m=>f.type.startsWith(m))?NZ(f.type,r[p+a]):r[p+a]),c={__length__:0};let u=0,d=0;for(const[f,p]of n.entries())c[f]=p.type==="string"?"":void 0,i[f]&&(c[f]=l[u],u+=1),s[f]&&(c[f]=o[String(d)],d+=1),p.name&&(c[p.name]=c[f]),c.__length__+=1;return c},Ep=(n,e)=>{if(e!=null&&e.data){let t,r,i;try{const s=e.data.slice(0,10),o=n.find(a=>ZQ(a).startsWith(s));o!=null&&o.inputs?(t=o.name,r=Fo(o),i=Cl([...o.inputs],e.data.substring(10))):e.data.startsWith("0x08c379a0")?(t="Error",r="Error(string)",i=Cl([{name:"message",type:"string"}],e.data.substring(10))):e.data.startsWith("0x4e487b71")&&(t="Panic",r="Panic(uint256)",i=Cl([{name:"code",type:"uint256"}],e.data.substring(10)))}catch{}t&&e.setDecodedProperties(t,r,i)}};var kZ=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const $I=(n,e)=>{var t,r,i,s,o;if(n instanceof Tl&&n.cause instanceof A0){if(e!==void 0){const a=e.filter(l=>V0(l));return Ep(a,n.cause),{reason:n.cause.message,signature:(t=n.cause.data)===null||t===void 0?void 0:t.slice(0,10),data:(r=n.cause.data)===null||r===void 0?void 0:r.substring(10),customErrorName:n.cause.errorName,customErrorDecodedSignature:n.cause.errorSignature,customErrorArguments:n.cause.errorArgs}}return{reason:n.cause.message,signature:(i=n.cause.data)===null||i===void 0?void 0:i.slice(0,10),data:(s=n.cause.data)===null||s===void 0?void 0:s.substring(10)}}if(n instanceof E0&&!Array.isArray((o=n.cause)===null||o===void 0?void 0:o.errors)&&n.cause!==void 0)return n.cause.message;throw n};function jI(n,e,t){return kZ(this,arguments,void 0,function*(r,i,s,o=r.defaultReturnFormat){try{yield zx(r,i,r.defaultBlock,o);return}catch(a){return $I(a,s)}})}var BZ=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};function mv(n,e,t,r,i,s){return BZ(this,void 0,void 0,function*(){let o=s;o===void 0&&(r!==void 0?o=$I(r):n.handleRevert&&e!==void 0&&(o=yield jI(n,e,i)));let a;if(o===void 0)a=new AM(t);else if(typeof o=="string")a=new um(o,void 0,t);else if(o.customErrorName!==void 0&&o.customErrorDecodedSignature!==void 0&&o.customErrorArguments!==void 0){const l=o;a=new wM(l.reason,l.customErrorName,l.customErrorDecodedSignature,l.customErrorArguments,l.signature,t,l.data)}else a=new um(o.reason,o.signature,t,o.data);return a})}const Fx=(n,e,t,r=Lr)=>{var i,s,o,a,l,c;let u=Object.assign({},n);const d=_e(rd,e,r);if([Ou,"allEvents"].includes(u.name)){const p=t.find(m=>m.signature===e.topics[0]);p?u=p:u={anonymous:!0}}if(u.inputs=(s=(i=u.inputs)!==null&&i!==void 0?i:n.inputs)!==null&&s!==void 0?s:[],!u.anonymous){let p=0;((o=u.inputs)!==null&&o!==void 0?o:[]).forEach(m=>{m.indexed&&(p+=1)}),p>0&&(e!=null&&e.topics)&&(e==null?void 0:e.topics.length)!==p+1&&(u=Object.assign(Object.assign({},u),{anonymous:!0,inputs:[]}))}const f=u.anonymous?e.topics:((a=e.topics)!==null&&a!==void 0?a:[]).slice(1);return Object.assign(Object.assign({},d),{returnValues:VI([...(l=u.inputs)!==null&&l!==void 0?l:[]],e.data,f),event:u.name,signature:!u.anonymous&&((c=e.topics)===null||c===void 0?void 0:c.length)>0&&e.topics[0]?e.topics[0]:void 0,raw:{data:e.data,topics:e.topics}})};var al=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class WI{constructor({options:e,web3Context:t,promiEvent:r,returnFormat:i}){this.options={checkRevertBeforeSending:!0},this.options=e,this.web3Context=t,this.promiEvent=r,this.returnFormat=i}getReceiptWithEvents(e){var t,r;const i=Object.assign({},e??{});if(!((t=this.options)===null||t===void 0)&&t.contractAbi&&i.logs&&i.logs.length>0){i.events={};for(const s of i.logs){const o=Fx(T_,s,(r=this.options)===null||r===void 0?void 0:r.contractAbi,this.returnFormat);o.event&&(i.events[o.event]=o)}}return i}checkRevertBeforeSending(e){return al(this,void 0,void 0,function*(){if(this.options.checkRevertBeforeSending!==!1){let t=e;ue(e.data)&&ue(e.input)&&ue(e.gas)&&(t=Object.assign(Object.assign({},e),{gas:21e3}));const r=yield jI(this.web3Context,t,this.options.contractAbi);if(r!==void 0)throw yield mv(this.web3Context,e,void 0,void 0,this.options.contractAbi,r)}})}emitSending(e){this.promiEvent.listenerCount("sending")>0&&this.promiEvent.emit("sending",e)}populateGasPrice(e){return al(this,arguments,void 0,function*({transactionFormatted:t,transaction:r}){var i;let s=t;return!this.web3Context.config.ignoreGasPricing&&!(!((i=this.options)===null||i===void 0)&&i.ignoreGasPricing)&&ue(t.gasPrice)&&(ue(r.maxPriorityFeePerGas)||ue(r.maxFeePerGas))&&(s=Object.assign(Object.assign({},t),yield yI(t,this.web3Context,_t))),s})}signAndSend(e){return al(this,arguments,void 0,function*({wallet:t,tx:r}){if(t){const i=yield t.signTransaction(r);return I_(this.web3Context,()=>al(this,void 0,void 0,function*(){return fI(this.web3Context.requestManager,i.rawTransaction)}),i.transactionHash)}return I_(this.web3Context,()=>al(this,void 0,void 0,function*(){return zY(this.web3Context.requestManager,r)}))})}emitSent(e){this.promiEvent.listenerCount("sent")>0&&this.promiEvent.emit("sent",e)}emitTransactionHash(e){this.promiEvent.listenerCount("transactionHash")>0&&this.promiEvent.emit("transactionHash",e)}emitReceipt(e){this.promiEvent.listenerCount("receipt")>0&&this.promiEvent.emit("receipt",e)}handleError(e){return al(this,arguments,void 0,function*({error:t,tx:r}){var i;let s=t;return s instanceof Tl&&this.web3Context.handleRevert&&(s=yield mv(this.web3Context,r,void 0,void 0,(i=this.options)===null||i===void 0?void 0:i.contractAbi)),(s instanceof E0||s instanceof Tl||s instanceof wM||s instanceof AM||s instanceof um||s instanceof MM)&&this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",s),s})}emitConfirmation({receipt:e,transactionHash:t,customTransactionReceiptSchema:r}){this.promiEvent.listenerCount("confirmation")>0&&KQ(this.web3Context,this.promiEvent,e,t,this.returnFormat,r)}handleResolve(e){return al(this,arguments,void 0,function*({receipt:t,tx:r}){var i,s,o;if(!((i=this.options)===null||i===void 0)&&i.transactionResolver)return(s=this.options)===null||s===void 0?void 0:s.transactionResolver(t);if(t.status===BigInt(0)){const a=yield mv(this.web3Context,r,t,void 0,(o=this.options)===null||o===void 0?void 0:o.contractAbi);throw this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",a),a}else return t})}}var un=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},LZ=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const DZ=n=>un(void 0,void 0,void 0,function*(){return dI(n.requestManager)});function OZ(n,e){return un(this,void 0,void 0,function*(){const t=yield TY(n.requestManager);return _e({format:"uint"},t,e??n.defaultReturnFormat)})}function Ux(n,e){return un(this,void 0,void 0,function*(){const t=yield MY(n.requestManager);return _e({format:"uint"},t,e??n.defaultReturnFormat)})}function FZ(n,e){return un(this,void 0,void 0,function*(){const t=yield RY(n.requestManager);return _e({format:"uint"},t,e??n.defaultReturnFormat)})}function Hx(n,e){return un(this,void 0,void 0,function*(){const t=yield CY(n.requestManager);return _e({format:"uint"},t,e??n.defaultReturnFormat)})}function UZ(n,e){return un(this,arguments,void 0,function*(t,r,i=t.defaultBlock,s){const o=lr(i)?i:_e({format:"uint"},i,_t),a=yield PY(t.requestManager,r,o);return _e({format:"uint"},a,s??t.defaultReturnFormat)})}function HZ(n,e,t){return un(this,arguments,void 0,function*(r,i,s,o=r.defaultBlock,a){const l=_e({format:"uint"},s,_t),c=lr(o)?o:_e({format:"uint"},o,_t),u=yield NY(r.requestManager,i,l,c);return _e({format:"bytes"},u,a??r.defaultReturnFormat)})}function zZ(n,e){return un(this,arguments,void 0,function*(t,r,i=t.defaultBlock,s){const o=lr(i)?i:_e({format:"uint"},i,_t),a=yield FY(t.requestManager,r,o);return _e({format:"bytes"},a,s??t.defaultReturnFormat)})}function qI(n){return un(this,arguments,void 0,function*(e,t=e.defaultBlock,r=!1,i){var s;let o;if(Ka(t)){const l=_e({format:"bytes32"},t,_t);o=yield $Y(e.requestManager,l,r)}else{const l=lr(t)?t:_e({format:"uint"},t,_t);o=yield hI(e.requestManager,l,r)}const a=_e(Bm,o,i??e.defaultReturnFormat);return ue(a)?a:Object.assign(Object.assign({},a),{transactions:(s=a.transactions)!==null&&s!==void 0?s:[]})})}function GZ(n){return un(this,arguments,void 0,function*(e,t=e.defaultBlock,r){let i;if(Ka(t)){const s=_e({format:"bytes32"},t,_t);i=yield BY(e.requestManager,s)}else{const s=lr(t)?t:_e({format:"uint"},t,_t);i=yield LY(e.requestManager,s)}return _e({format:"uint"},i,r??e.defaultReturnFormat)})}function VZ(n){return un(this,arguments,void 0,function*(e,t=e.defaultBlock,r){let i;if(Ka(t)){const s=_e({format:"bytes32"},t,_t);i=yield DY(e.requestManager,s)}else{const s=lr(t)?t:_e({format:"uint"},t,_t);i=yield OY(e.requestManager,s)}return _e({format:"uint"},i,r??e.defaultReturnFormat)})}function $Z(n){return un(this,arguments,void 0,function*(e,t=e.defaultBlock,r,i){const s=_e({format:"uint"},r,_t);let o;if(Ka(t)){const a=_e({format:"bytes32"},t,_t);o=yield KY(e.requestManager,a,s)}else{const a=lr(t)?t:_e({format:"uint"},t,_t);o=yield YY(e.requestManager,a,s)}return _e(Bm,o,i??e.defaultReturnFormat)})}function jZ(n,e){return un(this,arguments,void 0,function*(t,r,i=t.defaultReturnFormat){const s=_e({format:"bytes32"},r,Lr),o=yield jY(t.requestManager,s);return ue(o)?o:ni(o,i,{transactionSchema:t.config.customTransactionSchema,fillInputAndData:!0})})}function WZ(n,e){return un(this,void 0,void 0,function*(){return(yield aQ(n.requestManager)).map(r=>ni(r,e??n.defaultReturnFormat,{transactionSchema:n.config.customTransactionSchema,fillInputAndData:!0}))})}function qZ(n){return un(this,arguments,void 0,function*(e,t=e.defaultBlock,r,i){const s=_e({format:"uint"},r,_t);let o;if(Ka(t)){const a=_e({format:"bytes32"},t,_t);o=yield WY(e.requestManager,a,s)}else{const a=lr(t)?t:_e({format:"uint"},t,_t);o=yield qY(e.requestManager,a,s)}return ue(o)?o:ni(o,i??e.defaultReturnFormat,{transactionSchema:e.config.customTransactionSchema,fillInputAndData:!0})})}function XI(n,e,t){return un(this,void 0,void 0,function*(){const r=_e({format:"bytes32"},e,Lr);let i;try{i=yield XY(n.requestManager,r)}catch(s){if(!(typeof s=="object"&&!ue(s)&&"message"in s&&s.message==="transaction indexing is in progress"))throw s}return ue(i)?i:_e(id,i,t??n.defaultReturnFormat)})}function KI(n,e){return un(this,arguments,void 0,function*(t,r,i=t.defaultBlock,s){const o=lr(i)?i:_e({format:"uint"},i,_t),a=yield kY(t.requestManager,r,o);return _e({format:"uint"},a,s??t.defaultReturnFormat)})}function Nf(n,e,t,r={checkRevertBeforeSending:!0},i){const s=new uI((o,a)=>{setImmediate(()=>{un(this,void 0,void 0,function*(){const l=new WI({web3Context:n,promiEvent:s,options:r,returnFormat:t});let c=Object.assign({},e);ue(i)||(c=yield i.processTransaction(c));let u=ni(Object.assign(Object.assign({},c),{from:M_("from",n,c),to:M_("to",n,c)}),_t,{transactionSchema:n.config.customTransactionSchema});try{u=yield l.populateGasPrice({transaction:c,transactionFormatted:u}),yield l.checkRevertBeforeSending(u),l.emitSending(u);let d;n.wallet&&!ue(u.from)&&(d=n.wallet.get(u.from));const f=yield l.signAndSend({wallet:d,tx:u}),p=_e({format:"bytes32"},f,t??n.defaultReturnFormat);l.emitSent(u),l.emitTransactionHash(p);const m=yield xI(n,f,t??n.defaultReturnFormat),g=l.getReceiptWithEvents(_e(id,m,t??n.defaultReturnFormat));l.emitReceipt(g),o(yield l.handleResolve({receipt:g,tx:u})),l.emitConfirmation({receipt:g,transactionHash:f})}catch(d){a(yield l.handleError({error:d,tx:u}))}})})});return s}function XZ(n,e,t,r={checkRevertBeforeSending:!0}){const i=new uI((s,o)=>{setImmediate(()=>{un(this,void 0,void 0,function*(){const a=new WI({web3Context:n,promiEvent:i,options:r,returnFormat:t}),l=_e({format:"bytes"},e,_t),c=Wl.fromSerializedData(Zs(An(l))),u=Object.assign(Object.assign({},c.toJSON()),{from:c.getSenderAddress().toString()});try{const{v:d,r:f,s:p}=u,m=LZ(u,["v","r","s"]);yield a.checkRevertBeforeSending(m),a.emitSending(l);const g=yield I_(n,()=>un(this,void 0,void 0,function*(){return fI(n.requestManager,l)}));a.emitSent(l);const y=_e({format:"bytes32"},g,t??n.defaultReturnFormat);a.emitTransactionHash(y);const h=yield xI(n,g,t??n.defaultReturnFormat),w=a.getReceiptWithEvents(_e(id,h,t??n.defaultReturnFormat));a.emitReceipt(w),s(yield a.handleResolve({receipt:w,tx:u})),a.emitConfirmation({receipt:w,transactionHash:g})}catch(d){o(yield a.handleError({error:d,tx:u}))}})})});return i}function KZ(n,e,t){return un(this,arguments,void 0,function*(r,i,s,o=r.defaultReturnFormat){var a;const l=_e({format:"bytes"},i,Lr);if(!((a=r.wallet)===null||a===void 0)&&a.get(s)){const d=r.wallet.get(s).sign(l);return _e(BQ,d,o)}if(typeof s=="number")throw new L$(i,'RPC method "eth_sign" does not support index signatures');const c=yield UY(r.requestManager,s,l);return _e({format:"bytes"},c,o)})}function YZ(n,e){return un(this,arguments,void 0,function*(t,r,i=t.defaultReturnFormat){const s=yield HY(t.requestManager,ni(r,_t,{transactionSchema:t.config.customTransactionSchema}));return Jb(s)?FQ(s,i,{fillInputAndData:!0}):{raw:_e({format:"bytes"},s.raw,i),tx:ni(s.tx,i,{transactionSchema:t.config.customTransactionSchema,fillInputAndData:!0})}})}function zx(n,e){return un(this,arguments,void 0,function*(t,r,i=t.defaultBlock,s=t.defaultReturnFormat){const o=lr(i)?i:_e({format:"uint"},i,_t),a=yield GY(t.requestManager,ni(r,_t,{transactionSchema:t.config.customTransactionSchema}),o);return _e({format:"bytes"},a,s)})}function Gx(n,e){return un(this,arguments,void 0,function*(t,r,i=t.defaultBlock,s){const o=ni(r,_t,{transactionSchema:t.config.customTransactionSchema}),a=lr(i)?i:_e({format:"uint"},i,_t),l=yield VY(t.requestManager,o,a);return _e({format:"uint"},l,s??t.defaultReturnFormat)})}function YI(n,e,t){return un(this,void 0,void 0,function*(){let{toBlock:r,fromBlock:i}=e;ue(r)||(typeof r=="number"||typeof r=="bigint")&&(r=Yn(r)),ue(i)||(typeof i=="number"||typeof i=="bigint")&&(i=Yn(i));const s=Object.assign(Object.assign({},e),{fromBlock:i,toBlock:r});return(yield rQ(n.requestManager,s)).map(l=>typeof l=="string"?l:_e(rd,l,t??n.defaultReturnFormat))})}function QI(n,e){return un(this,void 0,void 0,function*(){const t=yield cQ(n.requestManager);return _e({format:"uint"},t,e??n.defaultReturnFormat)})}function QZ(n,e,t){return un(this,arguments,void 0,function*(r,i,s,o=r.defaultBlock,a){const l=s.map(d=>_e({format:"bytes"},d,_t)),c=lr(o)?o:_e({format:"uint"},o,_t),u=yield uQ(r.requestManager,i,l,c);return _e(OQ,u,a??r.defaultReturnFormat)})}function ZZ(n,e){return un(this,arguments,void 0,function*(t,r,i=t.defaultBlock,s,o){const a=_e({format:"uint"},r,_t),l=lr(i)?i:_e({format:"uint"},i,_t),c=_e({type:"array",items:{format:"uint"}},s,G0),u=yield oQ(t.requestManager,a,l,c);return _e(LQ,u,o??t.defaultReturnFormat)})}function ZI(n,e){return un(this,arguments,void 0,function*(t,r,i=t.defaultBlock,s){const o=lr(i)?i:_e({format:"uint"},i,_t),a=yield fQ(t.requestManager,ni(r,_t,{transactionSchema:t.config.customTransactionSchema}),o);return _e(CQ,a,s??t.defaultReturnFormat)})}function JZ(n,e,t,r,i){return un(this,void 0,void 0,function*(){const s=yield hQ(n.requestManager,e,t,r);return _e({format:"bytes"},s,i??n.defaultReturnFormat)})}var sd=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};function eJ(n,e){return sd(this,void 0,void 0,function*(){const t=yield JY(n.requestManager);return _e({format:"uint"},t,e??n.defaultReturnFormat)})}function tJ(n,e,t){return sd(this,void 0,void 0,function*(){let{toBlock:r,fromBlock:i}=e;ue(r)||(typeof r=="number"||typeof r=="bigint")&&(r=Yn(r)),ue(i)||(typeof i=="number"||typeof i=="bigint")&&(i=Yn(i));const s=Object.assign(Object.assign({},e),{fromBlock:i,toBlock:r}),o=yield QY(n.requestManager,s);return _e({format:"uint"},o,t??n.defaultReturnFormat)})}function nJ(n,e){return sd(this,void 0,void 0,function*(){const t=yield ZY(n.requestManager);return _e({format:"uint"},t,e??n.defaultReturnFormat)})}function rJ(n,e){return sd(this,void 0,void 0,function*(){return yield eQ(n.requestManager,Yn(e))})}function iJ(n,e,t){return sd(this,void 0,void 0,function*(){return(yield tQ(n.requestManager,Yn(e))).map(s=>typeof s=="string"?s:_e(rd,s,t??n.defaultReturnFormat))})}function sJ(n,e,t){return sd(this,void 0,void 0,function*(){return(yield nQ(n.requestManager,Yn(e))).map(s=>typeof s=="string"?s:_e(rd,s,t??n.defaultReturnFormat))})}class JI extends ih{_buildSubscriptionParams(){return["logs",this.args]}formatSubscriptionResult(e){return _e(rd,e,super.returnFormat)}}class wE extends ih{_buildSubscriptionParams(){return["newPendingTransactions"]}formatSubscriptionResult(e){return _e({format:"string"},e,super.returnFormat)}}class Fm extends ih{_buildSubscriptionParams(){return["newHeads"]}formatSubscriptionResult(e){return _e(NQ,e,super.returnFormat)}}class eC extends ih{_buildSubscriptionParams(){return["syncing"]}_processSubscriptionResult(e){if(typeof e=="boolean")this.emit("changed",e);else{const t=Object.fromEntries(Object.entries((e==null?void 0:e.status)||e).map(([r,i])=>[r.charAt(0).toLowerCase()+r.substring(1),i]));this.emit("changed",e.syncing),this.emit("data",_e(kQ,t,super.returnFormat))}}}var bt=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const L_={logs:JI,newPendingTransactions:wE,newHeads:Fm,syncing:eC,pendingTransactions:wE,newBlockHeaders:Fm};class W0 extends Qr{constructor(e){if(typeof e=="string"||Rm(e)){super({provider:e,registeredSubscriptions:L_});return}if(e.registeredSubscriptions){super(e);return}super(Object.assign(Object.assign({},e),{registeredSubscriptions:L_})),this.getFeeData=this.calculateFeeData}setTransactionMiddleware(e){this.transactionMiddleware=e}getTransactionMiddleware(){return this.transactionMiddleware}getProtocolVersion(){return bt(this,void 0,void 0,function*(){return AY(this.requestManager)})}isSyncing(){return bt(this,void 0,void 0,function*(){return dI(this.requestManager)})}getCoinbase(){return bt(this,void 0,void 0,function*(){return EY(this.requestManager)})}isMining(){return bt(this,void 0,void 0,function*(){return SY(this.requestManager)})}getHashrate(e){return bt(this,void 0,void 0,function*(){var t;return e===void 0&&(e=(t=this.defaultReturnFormat)!==null&&t!==void 0?t:Lr),this.getHashRate(e)})}getHashRate(){return bt(this,arguments,void 0,function*(e=this.defaultReturnFormat){return OZ(this,e)})}getGasPrice(){return bt(this,arguments,void 0,function*(e=this.defaultReturnFormat){return Ux(this,e)})}getMaxPriorityFeePerGas(){return bt(this,arguments,void 0,function*(e=this.defaultReturnFormat){return FZ(this,e)})}calculateFeeData(){return bt(this,arguments,void 0,function*(e=BigInt(2),t=P0.Gwei){var r;const i=yield this.getBlock(void 0,!1),s=(r=i==null?void 0:i.baseFeePerGas)!==null&&r!==void 0?r:void 0;let o;try{o=yield this.getGasPrice()}catch{}let a;try{a=yield this.getMaxPriorityFeePerGas()}catch{}let l;if(s){a=a??t;let c;typeof e=="number"?c=BigInt(Math.floor(e*1e3))/BigInt(1e3):c=e,l=s*c+a}return{gasPrice:o,maxFeePerGas:l,maxPriorityFeePerGas:a,baseFeePerGas:s}})}getAccounts(){return bt(this,void 0,void 0,function*(){var e;return((e=yield IY(this.requestManager))!==null&&e!==void 0?e:[]).map(r=>io(r))})}getBlockNumber(){return bt(this,arguments,void 0,function*(e=this.defaultReturnFormat){return Hx(this,e)})}getBalance(e){return bt(this,arguments,void 0,function*(t,r=this.defaultBlock,i=this.defaultReturnFormat){return UZ(this,t,r,i)})}getStorageAt(e,t){return bt(this,arguments,void 0,function*(r,i,s=this.defaultBlock,o=this.defaultReturnFormat){return HZ(this,r,i,s,o)})}getCode(e){return bt(this,arguments,void 0,function*(t,r=this.defaultBlock,i=this.defaultReturnFormat){return zZ(this,t,r,i)})}getBlock(){return bt(this,arguments,void 0,function*(e=this.defaultBlock,t=!1,r=this.defaultReturnFormat){return qI(this,e,t,r)})}getBlockTransactionCount(){return bt(this,arguments,void 0,function*(e=this.defaultBlock,t=this.defaultReturnFormat){return GZ(this,e,t)})}getBlockUncleCount(){return bt(this,arguments,void 0,function*(e=this.defaultBlock,t=this.defaultReturnFormat){return VZ(this,e,t)})}getUncle(){return bt(this,arguments,void 0,function*(e=this.defaultBlock,t,r=this.defaultReturnFormat){return $Z(this,e,t,r)})}getTransaction(e){return bt(this,arguments,void 0,function*(t,r=this.defaultReturnFormat){const i=yield jZ(this,t,r);if(!i)throw new N1;return i})}getPendingTransactions(){return bt(this,arguments,void 0,function*(e=this.defaultReturnFormat){return WZ(this,e)})}getTransactionFromBlock(){return bt(this,arguments,void 0,function*(e=this.defaultBlock,t,r=this.defaultReturnFormat){return qZ(this,e,t,r)})}getTransactionReceipt(e){return bt(this,arguments,void 0,function*(t,r=this.defaultReturnFormat){const i=yield XI(this,t,r);if(!i)throw new N1;return i})}getTransactionCount(e){return bt(this,arguments,void 0,function*(t,r=this.defaultBlock,i=this.defaultReturnFormat){return KI(this,t,r,i)})}sendTransaction(e,t=this.defaultReturnFormat,r){return Nf(this,e,t,r,this.transactionMiddleware)}sendSignedTransaction(e,t=this.defaultReturnFormat,r){return XZ(this,e,t,r)}sign(e,t){return bt(this,arguments,void 0,function*(r,i,s=this.defaultReturnFormat){return KZ(this,r,i,s)})}signTransaction(e){return bt(this,arguments,void 0,function*(t,r=this.defaultReturnFormat){return YZ(this,t,r)})}call(e){return bt(this,arguments,void 0,function*(t,r=this.defaultBlock,i=this.defaultReturnFormat){return zx(this,t,r,i)})}estimateGas(e){return bt(this,arguments,void 0,function*(t,r=this.defaultBlock,i=this.defaultReturnFormat){return Gx(this,t,r,i)})}getPastLogs(e){return bt(this,arguments,void 0,function*(t,r=this.defaultReturnFormat){return YI(this,t,r)})}getWork(){return bt(this,void 0,void 0,function*(){return iQ(this.requestManager)})}submitWork(e,t,r){return bt(this,void 0,void 0,function*(){return sQ(this.requestManager,e,t,r)})}requestAccounts(){return bt(this,void 0,void 0,function*(){return lQ(this.requestManager)})}getChainId(){return bt(this,arguments,void 0,function*(e=this.defaultReturnFormat){return QI(this,e)})}getNodeInfo(){return bt(this,void 0,void 0,function*(){return dQ(this.requestManager)})}getProof(e,t){return bt(this,arguments,void 0,function*(r,i,s=this.defaultBlock,o=this.defaultReturnFormat){return QZ(this,r,i,s,o)})}getFeeHistory(e){return bt(this,arguments,void 0,function*(t,r=this.defaultBlock,i,s=this.defaultReturnFormat){return ZZ(this,t,r,i,s)})}createAccessList(e){return bt(this,arguments,void 0,function*(t,r=this.defaultBlock,i=this.defaultReturnFormat){return ZI(this,t,r,i)})}signTypedData(e,t,r,i){return bt(this,void 0,void 0,function*(){var s;return r===void 0&&(r=!1),i===void 0&&(i=(s=this.defaultReturnFormat)!==null&&s!==void 0?s:Lr),JZ(this,e,t,r,i)})}subscribe(e,t,r){return bt(this,void 0,void 0,function*(){var i,s;r===void 0&&(r=(i=this.defaultReturnFormat)!==null&&i!==void 0?i:Lr);const o=yield(s=this.subscriptionManager)===null||s===void 0?void 0:s.subscribe(e,t,r);return o instanceof JI&&e==="logs"&&typeof t=="object"&&!dt(t.fromBlock)&&Number.isFinite(Number(t.fromBlock))&&setImmediate(()=>{this.getPastLogs(t).then(a=>{for(const l of a)o._processSubscriptionResult(l)}).catch(a=>{o._processSubscriptionError(a)})}),o})}static shouldClearSubscription({sub:e}){return!(e instanceof eC)}clearSubscriptions(e=!1){var t;return(t=this.subscriptionManager)===null||t===void 0?void 0:t.unsubscribe(e?W0.shouldClearSubscription:void 0)}createNewPendingTransactionFilter(){return bt(this,arguments,void 0,function*(e=this.defaultReturnFormat){return eJ(this,e)})}createNewFilter(e){return bt(this,arguments,void 0,function*(t,r=this.defaultReturnFormat){return tJ(this,t,r)})}createNewBlockFilter(){return bt(this,arguments,void 0,function*(e=this.defaultReturnFormat){return nJ(this,e)})}uninstallFilter(e){return bt(this,void 0,void 0,function*(){return rJ(this,e)})}getFilterChanges(e){return bt(this,arguments,void 0,function*(t,r=this.defaultReturnFormat){return iJ(this,t,r)})}getFilterLogs(e){return bt(this,arguments,void 0,function*(t,r=this.defaultReturnFormat){return sJ(this,t,r)})}}const oJ=n=>{if(!ue(n.common)){if(ue(n.common.customChain))throw new U$;if(ue(n.common.customChain.chainId))throw new H$;if(!ue(n.chainId)&&n.chainId!==n.common.customChain.chainId)throw new z$({txChainId:n.chainId,customChainId:n.common.customChain.chainId})}},aJ=n=>{if(!ue(n.common)&&!ue(n.chain)&&!ue(n.hardfork))throw new $$;if(!ue(n.chain)&&ue(n.hardfork)||!ue(n.hardfork)&&ue(n.chain))throw new j$({chain:n.chain,hardfork:n.hardfork})},lJ=n=>{if(!ue(n.common)&&!ue(n.common.baseChain)&&!ue(n.chain)&&n.chain!==n.common.baseChain)throw new G$({txChain:n.chain,baseChain:n.common.baseChain})},cJ=n=>{if(!ue(n.common)&&!ue(n.common.hardfork)&&!ue(n.hardfork)&&n.hardfork!==n.common.hardfork)throw new V$({txHardfork:n.hardfork,commonHardfork:n.common.hardfork})},AE=n=>{if(ue(n.gas)||!Wo(n.gas)||ue(n.gasPrice)||!Wo(n.gasPrice))throw new Y$({gas:n.gas,gasPrice:n.gasPrice});if(!ue(n.maxFeePerGas)||!ue(n.maxPriorityFeePerGas))throw new EM({maxFeePerGas:n.maxFeePerGas,maxPriorityFeePerGas:n.maxPriorityFeePerGas})},EE=n=>{if(!ue(n.gasPrice)&&n.type==="0x2")throw new Z$(n.gasPrice);if(n.type==="0x0"||n.type==="0x1")throw new EM({maxFeePerGas:n.maxFeePerGas,maxPriorityFeePerGas:n.maxPriorityFeePerGas});if(ue(n.maxFeePerGas)||!Wo(n.maxFeePerGas)||ue(n.maxPriorityFeePerGas)||!Wo(n.maxPriorityFeePerGas))throw new Q$({maxPriorityFeePerGas:n.maxPriorityFeePerGas,maxFeePerGas:n.maxFeePerGas})},uJ=n=>{const e=!ue(n.gas)||!ue(n.gasLimit),t=e&&!ue(n.gasPrice),r=e&&!ue(n.maxPriorityFeePerGas)&&!ue(n.maxFeePerGas);if(!t&&!r)throw new q$({gas:n.gas,gasPrice:n.gasPrice,maxPriorityFeePerGas:n.maxPriorityFeePerGas,maxFeePerGas:n.maxFeePerGas});if(t&&r)throw new K$({gas:n.gas,gasPrice:n.gasPrice,maxPriorityFeePerGas:n.maxPriorityFeePerGas,maxFeePerGas:n.maxFeePerGas});(t?AE:EE)(n),(!ue(n.type)&&n.type>"0x1"?EE:AE)(n)},dJ=(n,e,t={transactionSchema:void 0})=>{if(!ue(e)){e(n);return}if(typeof n!="object"||ue(n))throw new J$(n);oJ(n),aJ(n),lJ(n),cJ(n);const r=ni(n,_t,{transactionSchema:t.transactionSchema});if(uJ(r),ue(r.nonce)||ue(r.chainId)||r.nonce.startsWith("-")||r.chainId.startsWith("-"))throw new ej({nonce:n.nonce,chainId:n.chainId})};var fJ=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const hJ=n=>{var e,t;return Object.assign(Object.assign({},n),{nonce:n.nonce,gasPrice:n.gasPrice,gasLimit:(e=n.gasLimit)!==null&&e!==void 0?e:n.gas,to:n.to,value:n.value,data:(t=n.data)!==null&&t!==void 0?t:n.input,type:n.type,chainId:n.chainId,accessList:n.accessList,maxPriorityFeePerGas:n.maxPriorityFeePerGas,maxFeePerGas:n.maxFeePerGas})},pJ=(n,e)=>{var t,r,i,s,o,a,l,c,u,d,f,p,m,g,y,h,w,M;const S=!ue(n.chain)&&!ue(n.hardfork)||!ue(n.common);let C;if(!S)e.defaultCommon?(C=Object.assign({},e.defaultCommon),ue(C.hardfork)&&(C.hardfork=(t=n.hardfork)!==null&&t!==void 0?t:e.defaultHardfork),ue(C.baseChain)&&(C.baseChain=e.defaultChain)):C=Xn.custom({name:"custom-network",chainId:Yr(n.chainId),networkId:ue(n.networkId)?void 0:Yr(n.networkId),defaultHardfork:(r=n.hardfork)!==null&&r!==void 0?r:e.defaultHardfork},{baseChain:e.defaultChain});else{const k=(a=(o=(s=(i=n==null?void 0:n.common)===null||i===void 0?void 0:i.customChain)===null||s===void 0?void 0:s.name)!==null&&o!==void 0?o:n.chain)!==null&&a!==void 0?a:"custom-network",F=Yr((u=(c=(l=n==null?void 0:n.common)===null||l===void 0?void 0:l.customChain)===null||c===void 0?void 0:c.chainId)!==null&&u!==void 0?u:n==null?void 0:n.chainId),N=Yr((p=(f=(d=n==null?void 0:n.common)===null||d===void 0?void 0:d.customChain)===null||f===void 0?void 0:f.networkId)!==null&&p!==void 0?p:n==null?void 0:n.networkId),B=(y=(g=(m=n==null?void 0:n.common)===null||m===void 0?void 0:m.hardfork)!==null&&g!==void 0?g:n==null?void 0:n.hardfork)!==null&&y!==void 0?y:e.defaultHardfork,I=(M=(w=(h=n.common)===null||h===void 0?void 0:h.baseChain)!==null&&w!==void 0?w:n.chain)!==null&&M!==void 0?M:e.defaultChain;F&&N&&k&&(C=Xn.custom({name:k,chainId:F,networkId:N,defaultHardfork:B},{baseChain:I}))}return{common:C}},mJ=(n,e,t,...r)=>fJ(void 0,[n,e,t,...r],void 0,function*(i,s,o,a=!1,l=!0){const c=yield $Q({transaction:i,web3Context:s,privateKey:o,fillGasPrice:a,fillGasLimit:l}),u=ni(c,_t,{transactionSchema:s.config.customTransactionSchema});return dJ(u,void 0,{transactionSchema:s.config.customTransactionSchema}),Wl.fromTxData(hJ(u),pJ(u,s))}),SE=({address:n},e,t)=>{var r,i;const s=t==null?void 0:t.topics,o=(r=t==null?void 0:t.filter)!==null&&r!==void 0?r:{},a={};if(dt(t==null?void 0:t.fromBlock)||(a.fromBlock=_e(Bm.properties.number,t==null?void 0:t.fromBlock,{number:Bi.HEX,bytes:$o.HEX})),dt(t==null?void 0:t.toBlock)||(a.toBlock=_e(Bm.properties.number,t==null?void 0:t.toBlock,{number:Bi.HEX,bytes:$o.HEX})),s&&Array.isArray(s))a.topics=[...s];else if(a.topics=[],e&&!e.anonymous&&![Ou,"allEvents"].includes(e.name)&&a.topics.push((i=e.signature)!==null&&i!==void 0?i:Bx(Fo(e))),![Ou,"allEvents"].includes(e.name)&&e.inputs)for(const l of e.inputs){if(!l.indexed)continue;const c=o[l.name];if(!c){a.topics.push(null);continue}Array.isArray(c)?a.topics.push(c.map(u=>k_(l.type,u))):l.type==="string"?a.topics.push(Pu(c)):a.topics.push(k_(l.type,c))}return a.topics.length||delete a.topics,n&&(a.address=n.toLowerCase()),a},Xd=(n,e,t)=>{const r=Array.isArray(n.inputs)?n.inputs.length:0;if(n.inputs&&r!==e.length)throw new Dr(`The number of arguments is not matching the methods required number. You need to pass ${r} arguments.`);let i;if(n.inputs?i=j0(Array.isArray(n.inputs)?n.inputs:[],e).replace("0x",""):i=RZ(e).replace("0x",""),YQ(n)){if(!t)throw new Dr("The contract has no contract data option set. This is necessary to append the constructor parameters.");return t.startsWith("0x")?`${t}${i}`:`0x${t}${i}`}return`${Pf(n)}${i}`};class tC extends ih{constructor(e,t){super(e,t),this.address=e.address,this.topics=e.topics,this.abi=e.abi,this.jsonInterface=e.jsonInterface}_buildSubscriptionParams(){return["logs",{address:this.address,topics:this.topics}]}formatSubscriptionResult(e){return Fx(this.abi,e,this.jsonInterface,super.returnFormat)}}Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));const q0=(n,e,t,r)=>{var i,s;const o={};return(!dt(n.data)||r==="both")&&(o.data=Xd(e,t,(i=n.data)!==null&&i!==void 0?i:n.input)),(!dt(n.input)||r==="both")&&(o.input=Xd(e,t,(s=n.input)!==null&&s!==void 0?s:n.data)),dt(o.input)&&dt(o.data)&&(o[r]=Xd(e,t)),{data:o.data,input:o.input}},D_=({abi:n,params:e,options:t,contractOptions:r})=>{var i,s,o;if(!((o=(s=(i=t==null?void 0:t.input)!==null&&i!==void 0?i:t==null?void 0:t.data)!==null&&s!==void 0?s:r.input)!==null&&o!==void 0?o:r.data)&&!(t!=null&&t.to)&&!r.address)throw new Dr("Contract address not specified");if(!(t!=null&&t.from)&&!r.from)throw new Dr('Contract "from" address not specified');let l=Qa({to:r.address,gas:r.gas,gasPrice:r.gasPrice,from:r.from,input:r.input,maxPriorityFeePerGas:r.maxPriorityFeePerGas,maxFeePerGas:r.maxFeePerGas,data:r.data},t);const c=q0(l,n,e,t==null?void 0:t.dataInputFill);return l=Object.assign(Object.assign({},l),{data:c.data,input:c.input}),l},gJ=({abi:n,params:e,options:t,contractOptions:r})=>{if(!(t!=null&&t.to)&&!r.address)throw new Dr("Contract address not specified");let i=Qa({to:r.address,gas:r.gas,gasPrice:r.gasPrice,from:r.from,input:r.input,maxPriorityFeePerGas:r.maxPriorityFeePerGas,maxFeePerGas:r.maxFeePerGas,data:r.data},t);const s=q0(i,n,e,t==null?void 0:t.dataInputFill);return i=Object.assign(Object.assign({},i),{data:s.data,input:s.input}),i},vJ=({abi:n,params:e,options:t,contractOptions:r})=>{let i=Qa({to:r.address,gas:r.gas,gasPrice:r.gasPrice,from:r.from,input:r.input,data:r.data},t);const s=q0(i,n,e,t==null?void 0:t.dataInputFill);return i=Object.assign(Object.assign({},i),{data:s.data,input:s.input}),i},TE=n=>typeof n=="object"&&!dt(n)&&Object.keys(n).length!==0&&!Ma(n),yJ=({abi:n,params:e,options:t,contractOptions:r})=>{if(!(t!=null&&t.to)&&!r.address)throw new Dr("Contract address not specified");if(!(t!=null&&t.from)&&!r.from)throw new Dr('Contract "from" address not specified');let i=Qa({to:r.address,gas:r.gas,gasPrice:r.gasPrice,from:r.from,input:r.input,maxPriorityFeePerGas:r.maxPriorityFeePerGas,maxFeePerGas:r.maxFeePerGas,data:r.data},t);const s=q0(i,n,e,t==null?void 0:t.dataInputFill);return i=Object.assign(Object.assign({},i),{data:s.data,input:s.input}),i};var _J=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class bJ{_contractMethodDeploySend(e){const t={transactionResolver:r=>{if(r.status===BigInt(0))throw new Dr("code couldn't be stored",r);const i=this.parent.clone();return i.options.address=r.contractAddress,i},contractAbi:this.parent.options.jsonInterface,checkRevertBeforeSending:!1};return ue(this.parent.getTransactionMiddleware())?Nf(this.parent,e,this.parent.defaultReturnFormat,t):Nf(this.parent,e,this.parent.defaultReturnFormat,t,this.parent.getTransactionMiddleware())}constructor(e,t){this.parent=e,this.deployOptions=t;const{args:r,abi:i,contractOptions:s,deployData:o}=this.calculateDeployParams();this.args=r,this.constructorAbi=i,this.contractOptions=s,this.deployData=o}send(e){const t=Object.assign({},e),r=this.populateTransaction(t);return this._contractMethodDeploySend(r)}populateTransaction(e){var t,r;const i=Object.assign(Object.assign({},this.contractOptions),{from:(r=(t=this.contractOptions.from)!==null&&t!==void 0?t:this.parent.defaultAccount)!==null&&r!==void 0?r:void 0}),s=D_({abi:this.constructorAbi,params:this.args,options:Object.assign(Object.assign({},e),{dataInputFill:this.parent.contractDataInputFill}),contractOptions:i});return s.dataInputFill&&delete s.dataInputFill,s}calculateDeployParams(){var e,t,r,i,s,o;let a=this.parent.options.jsonInterface.find(p=>p.type==="constructor");a||(a={type:"constructor",stateMutability:""});const l=_e({format:"bytes"},(t=(e=this.deployOptions)===null||e===void 0?void 0:e.input)!==null&&t!==void 0?t:this.parent.options.input,Lr),c=_e({format:"bytes"},(i=(r=this.deployOptions)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:this.parent.options.data,Lr);if((!l||l.trim()==="0x")&&(!c||c.trim()==="0x"))throw new Dr("contract creation without any data provided.");const u=(o=(s=this.deployOptions)===null||s===void 0?void 0:s.arguments)!==null&&o!==void 0?o:[],d=Object.assign(Object.assign({},this.parent.options),{input:l,data:c});return{args:u,abi:a,contractOptions:d,deployData:l??c}}estimateGas(e){return _J(this,arguments,void 0,function*(t,r=this.parent.defaultReturnFormat){const i=Object.assign({},t);return this.parent.contractMethodEstimateGas({abi:this.constructorAbi,params:this.args,returnFormat:r,options:i,contractOptions:this.contractOptions})})}encodeABI(){return Xd(this.constructorAbi,this.args,_e({format:"bytes"},this.deployData,this.parent.defaultReturnFormat))}decodeData(e){return Object.assign(Object.assign({},B_(this.constructorAbi,e.replace(this.deployData,""),!1)),{__method__:this.constructorAbi.type})}}var xJ=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class wJ extends Im{constructor(e,t){super(e.requestManager,e.registeredSubscriptions),this.parentContract=t}subscribe(e,t){const r=Object.create(null,{subscribe:{get:()=>super.subscribe}});return xJ(this,arguments,void 0,function*(i,s,o=Lr){return r.subscribe.call(this,i,s??this.parentContract.options,o)})}}var ll=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const AJ={logs:tC,newHeads:Fm,newBlockHeaders:Fm};let O_=class Sp extends Qr{get subscriptionManager(){return this._subscriptionManager}constructor(e,t,r,i,s){var o,a,l;const c=Ma(t)?t:Ma(r)?r:void 0;let u;TE(t)?u=t:TE(r)?u=r:u=i;let d;if(typeof t=="object"&&"provider"in t?d=t.provider:typeof r=="object"&&"provider"in r?d=r.provider:typeof i=="object"&&"provider"in i?d=i.provider:d=Sp.givenProvider,super(Object.assign(Object.assign({},u),{provider:d,registeredSubscriptions:AJ})),this.syncWithContext=!1,this._functions={},this._subscriptionManager=new wJ(super.subscriptionManager,this),u!=null&&u.wallet&&(this._wallet=u.wallet),u!=null&&u.accountProvider&&(this._accountProvider=u.accountProvider),!ue(c)&&!ue(c.data)&&!ue(c.input)&&this.config.contractDataInputFill!=="both")throw new I$({data:c.data,input:c.input});this._overloadedMethodAbis=new Map;const f=So(i)?i:So(r)?r:s??this.defaultReturnFormat,p=typeof t=="string"?t:void 0;this.config.contractDataInputFill=(o=c==null?void 0:c.dataInputFill)!==null&&o!==void 0?o:this.config.contractDataInputFill,this._parseAndSetJsonInterface(e,f),this.defaultReturnFormat!==f&&(this.defaultReturnFormat=f),ue(p)||this._parseAndSetAddress(p,f),this.options={address:p,jsonInterface:this._jsonInterface,gas:(a=c==null?void 0:c.gas)!==null&&a!==void 0?a:c==null?void 0:c.gasLimit,gasPrice:c==null?void 0:c.gasPrice,from:c==null?void 0:c.from,input:c==null?void 0:c.input,data:c==null?void 0:c.data},this.syncWithContext=(l=c==null?void 0:c.syncWithContext)!==null&&l!==void 0?l:!1,u instanceof Qr&&this.subscribeToContextEvents(u),Object.defineProperty(this.options,"address",{set:m=>this._parseAndSetAddress(m,f),get:()=>this._address}),Object.defineProperty(this.options,"jsonInterface",{set:m=>this._parseAndSetJsonInterface(m,f),get:()=>this._jsonInterface}),u instanceof Qr&&u.on($l.CONFIG_CHANGE,m=>{this.setConfig({[m.name]:m.newValue})})}setTransactionMiddleware(e){this.transactionMiddleware=e}getTransactionMiddleware(){return this.transactionMiddleware}get events(){return this._events}get methods(){return this._methods}clone(){let e;return this.options.address?e=new Sp([...this._jsonInterface,...this._errorsInterface],this.options.address,{gas:this.options.gas,gasPrice:this.options.gasPrice,from:this.options.from,input:this.options.input,data:this.options.data,provider:this.currentProvider,syncWithContext:this.syncWithContext,dataInputFill:this.config.contractDataInputFill},this.getContextObject()):e=new Sp([...this._jsonInterface,...this._errorsInterface],{gas:this.options.gas,gasPrice:this.options.gasPrice,from:this.options.from,input:this.options.input,data:this.options.data,provider:this.currentProvider,syncWithContext:this.syncWithContext,dataInputFill:this.config.contractDataInputFill},this.getContextObject()),this.context&&e.subscribeToContextEvents(this.context),e}deploy(e){return new bJ(this,e)}getPastEvents(e,t,r){return ll(this,void 0,void 0,function*(){var i;const s=typeof e=="string"?e:Ou,o=typeof e!="string"&&!So(e)?e:So(t)?{}:t,a=So(e)?e:So(t)?t:r??this.defaultReturnFormat,l=s==="allEvents"||s===Ou?T_:this._jsonInterface.find(h=>"name"in h&&h.name===s);if(!l)throw new Dr(`Event ${String(s)} not found.`);const{fromBlock:c,toBlock:u,topics:d,address:f}=SE(this.options,l,o??{}),p=yield YI(this,{fromBlock:c,toBlock:u,topics:d,address:f},a),m=p?p.map(h=>typeof h=="string"?h:Fx(l,h,this._jsonInterface,a)):[],g=(i=o==null?void 0:o.filter)!==null&&i!==void 0?i:{},y=Object.keys(g);return y.length>0?m.filter(h=>typeof h=="string"?!0:y.every(w=>{var M;if(Array.isArray(g[w]))return g[w].some(C=>String(h.returnValues[w]).toUpperCase()===String(C).toUpperCase());const S=(M=l.inputs)===null||M===void 0?void 0:M.filter(C=>C.name===w)[0];return S!=null&&S.indexed&&S.type==="string"&&Pu(g[w])===String(h.returnValues[w])?!0:String(h.returnValues[w]).toUpperCase()===String(g[w]).toUpperCase()})):m})}_parseAndSetAddress(e,t=this.defaultReturnFormat){this._address=e&&io(_e({format:"address"},e,t))}decodeMethodData(e){const t=e.slice(0,10),i=this._jsonInterface.filter(s=>s.type!=="error").find(s=>t===Pf(Fo(s)));if(!i)throw new Dr(`The ABI for the provided method signature ${t} was not found.`);return B_(i,e)}_parseAndSetJsonInterface(e,t=this.defaultReturnFormat){var r,i;this._functions={},this._methods={},this._events={};let s=[];const o=e.filter(l=>l.type!=="error"),a=e.filter(l=>V0(l));for(const l of o){const c=Object.assign(Object.assign({},l),{signature:""});if($0(c)){const u=Fo(c),d=Pf(u);c.methodNameWithInputs=u,c.signature=d,c.constant=c.stateMutability==="view"||c.stateMutability==="pure"||c.constant,c.payable=c.stateMutability==="payable"||c.payable,this._overloadedMethodAbis.set(c.name,[...(r=this._overloadedMethodAbis.get(c.name))!==null&&r!==void 0?r:[],c]);const f=(i=this._overloadedMethodAbis.get(c.name))!==null&&i!==void 0?i:[],p=this._createContractMethod(f,a),m=this._createContractMethod(f,a,!0);this._functions[u]={signature:d,method:m},this._methods[c.name]=p,this._methods[u]=m,this._methods[d]=m}else if(kx(c)){const u=Fo(c),d=Bx(u),f=this._createContractEvent(c,t);c.signature=d,(!(u in this._events)||c.name==="bound")&&(this._events[u]=f),this._events[c.name]=f,this._events[d]=f}s=[...s,c]}this._events.allEvents=this._createContractEvent(T_,t),this._jsonInterface=[...s],this._errorsInterface=a}_getAbiParams(e,t){var r;try{return qd((r=e.inputs)!==null&&r!==void 0?r:[],t)}catch(i){throw new Dr(`Invalid parameters for method ${e.name}: ${i.message}`)}}_createContractMethod(e,t,r=!1){const i=e[e.length-1];return(...s)=>{var o,a,l;let c;const u=(a=r?(o=this._overloadedMethodAbis.get(i.name))===null||o===void 0?void 0:o.filter(g=>g.signature===i.signature):this._overloadedMethodAbis.get(i.name))!==null&&a!==void 0?a:[];let d=u[0];const f=t,p=u.filter(g=>{var y;return((y=g.inputs)!==null&&y!==void 0?y:[]).length===s.length});if(u.length===1||p.length===0)c=this._getAbiParams(d,s),at.validate((l=i.inputs)!==null&&l!==void 0?l:[],c);else{const g=[],y=[];for(const h of p)try{c=this._getAbiParams(h,s),at.validate(h.inputs,c),y.push(h)}catch(w){g.push(w)}if(y.length===1?[d]=y:y.length>1&&([d]=y),g.length===p.length)throw new Ru(g)}const m={arguments:c,call:(g,y)=>ll(this,void 0,void 0,function*(){return this._contractMethodCall(d,c,f,g,y)}),send:g=>this._contractMethodSend(d,c,f,g),populateTransaction:(g,y)=>{var h,w;let M=y??this.options;M=Object.assign(Object.assign({},M),{input:void 0,from:(w=(h=M==null?void 0:M.from)!==null&&h!==void 0?h:this.defaultAccount)!==null&&w!==void 0?w:void 0});const S=D_({abi:i,params:s,options:Object.assign(Object.assign({},g),{dataInputFill:this.config.contractDataInputFill}),contractOptions:M});return S.dataInputFill&&delete S.dataInputFill,S},estimateGas:(g,...y)=>ll(this,[g,...y],void 0,function*(h,w=this.defaultReturnFormat){return this.contractMethodEstimateGas({abi:d,params:c,returnFormat:w,options:h})}),encodeABI:()=>Xd(d,c),decodeData:g=>B_(d,g),createAccessList:(g,y)=>ll(this,void 0,void 0,function*(){return this._contractMethodCreateAccessList(d,c,f,g,y)})};return d.stateMutability==="payable",m}}_contractMethodCall(e,t,r,i,s){return ll(this,void 0,void 0,function*(){var o;const a=gJ({abi:e,params:t,options:Object.assign(Object.assign({},i),{dataInputFill:this.config.contractDataInputFill}),contractOptions:Object.assign(Object.assign({},this.options),{from:(o=this.options.from)!==null&&o!==void 0?o:this.config.defaultAccount})});try{const l=yield zx(this,a,s,this.defaultReturnFormat);return CZ(e,l)}catch(l){throw l instanceof Tl&&Ep(r,l.cause),l}})}_contractMethodCreateAccessList(e,t,r,i,s){return ll(this,void 0,void 0,function*(){var o;const a=yJ({abi:e,params:t,options:Object.assign(Object.assign({},i),{dataInputFill:this.config.contractDataInputFill}),contractOptions:Object.assign(Object.assign({},this.options),{from:(o=this.options.from)!==null&&o!==void 0?o:this.config.defaultAccount})});try{return ZI(this,a,s,this.defaultReturnFormat)}catch(l){throw l instanceof Tl&&Ep(r,l.cause),l}})}_contractMethodSend(e,t,r,i,s){var o,a;let l=s??this.options;l=Object.assign(Object.assign({},l),{input:void 0,from:(a=(o=l.from)!==null&&o!==void 0?o:this.defaultAccount)!==null&&a!==void 0?a:void 0});const c=D_({abi:e,params:t,options:Object.assign(Object.assign({},i),{dataInputFill:this.config.contractDataInputFill}),contractOptions:l}),u=ue(this.transactionMiddleware)?Nf(this,c,this.defaultReturnFormat,{checkRevertBeforeSending:!1,contractAbi:this._jsonInterface}):Nf(this,c,this.defaultReturnFormat,{checkRevertBeforeSending:!1,contractAbi:this._jsonInterface},this.transactionMiddleware);return u.on("error",d=>{d instanceof Tl&&Ep(r,d.cause)}),u}contractMethodEstimateGas(e){return ll(this,arguments,void 0,function*({abi:t,params:r,returnFormat:i,options:s,contractOptions:o}){const a=vJ({abi:t,params:r,options:Object.assign(Object.assign({},s),{dataInputFill:this.config.contractDataInputFill}),contractOptions:o??this.options});return Gx(this,a,Ro.LATEST,i??this.defaultReturnFormat)})}_createContractEvent(e,t=this.defaultReturnFormat){return(...r)=>{var i;const{topics:s,fromBlock:o}=SE(this.options,e,r[0]),a=new tC({address:this.options.address,topics:s,abi:e,jsonInterface:this._jsonInterface},{subscriptionManager:this.subscriptionManager,returnFormat:t});return ue(o)||this.getPastEvents(e.name,{fromBlock:o,topics:s},t).then(l=>{l&&l.forEach(c=>a.emit("data",c))}).catch(l=>{a.emit("error",new xo("Failed to get past events.",l))}),(i=this.subscriptionManager)===null||i===void 0||i.addSubscription(a).catch(l=>{a.emit("error",new xo("Failed to subscribe.",l))}),a}}subscribeToContextEvents(e){const t=this;this.context=e,t.syncWithContext&&e.on($l.CONFIG_CHANGE,r=>{t.setConfig({[r.name]:r.newValue})})}};const ME={addr:"0x3b3b57de",name:"0x691f3431",abi:"0x2203ab56",pubkey:"0xc8690233",text:"0x59d1d43c",contenthash:"0xbc1c58d1"},Tc={setAddr:"addr",addr:"addr",setPubkey:"pubkey",pubkey:"pubkey",setContenthash:"contenthash",contenthash:"contenthash",text:"text",name:"name"},Um={main:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",goerli:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},EJ={"0x1":"main","0x5":"goerli"},SJ=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"label",type:"bytes32"},{indexed:!1,internalType:"address",name:"owner",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"resolver",type:"address"}],name:"NewResolver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"owner",type:"address"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"recordExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"resolver",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"ttl",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"}],TJ=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"a",type:"address"}],name:"AddrChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"coinType",type:"uint256"},{indexed:!1,internalType:"bytes",name:"newAddress",type:"bytes"}],name:"AddressChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"hash",type:"bytes"}],name:"ContenthashChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"name",type:"bytes"},{indexed:!1,internalType:"uint16",name:"resource",type:"uint16"},{indexed:!1,internalType:"bytes",name:"record",type:"bytes"}],name:"DNSRecordChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"name",type:"bytes"},{indexed:!1,internalType:"uint16",name:"resource",type:"uint16"}],name:"DNSRecordDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"}],name:"DNSZoneCleared",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"lastzonehash",type:"bytes"},{indexed:!1,internalType:"bytes",name:"zonehash",type:"bytes"}],name:"DNSZonehashChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"bytes4",name:"interfaceID",type:"bytes4"},{indexed:!1,internalType:"address",name:"implementer",type:"address"}],name:"InterfaceChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"string",name:"name",type:"string"}],name:"NameChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"x",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"y",type:"bytes32"}],name:"PubkeyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"string",name:"indexedKey",type:"string"},{indexed:!1,internalType:"string",name:"key",type:"string"}],name:"TextChanged",type:"event"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"uint256",name:"contentTypes",type:"uint256"}],name:"ABI",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"addr",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"uint256",name:"coinType",type:"uint256"}],name:"addr",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"contenthash",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"},{internalType:"uint16",name:"resource",type:"uint16"}],name:"dnsRecord",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"}],name:"hasDNSRecords",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes4",name:"interfaceID",type:"bytes4"}],name:"interfaceImplementer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"pubkey",outputs:[{internalType:"bytes32",name:"x",type:"bytes32"},{internalType:"bytes32",name:"y",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"string",name:"key",type:"string"}],name:"text",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"zonehash",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"address",name:"a",type:"address"}],name:"setAddr",outputs:[],stateMutability:"nonpayable",type:"function"}];var MJ="AEkU4AngDVgB0QKRAQYBOwDqATEAnwDbAIUApABsAOAAbwCRAEYAiQBPAHYAPgA+ACsANwAlAGMAHwAvACsAJQAWAC8AGwAiACIALwAUACsAEQAiAAsAGwARABcAGAA6ACkALAAsADUAFgAsABEAHQAhAA8AGwAdABUAFgAZAA0ADQAXABAAGQAUABIEqgYJAR4UFjfDBdMAsQCuPwFnAKUBA10jAK5/Ly8vLwE/pwUJ6/0HPwbkMQVXBVgAPSs5APa2EQbIwQuUCkEDyJ4zAsUKLwKOoQKG2D+Ob4kCxcsCg/IBH98JAPKtAUECLY0KP48A4wDiChUAF9S5yAwLPZ0EG3cA/QI5GL0P6wkGKekFBIFnDRsHLQCrAGmR76WcfwBbBpMjBukAGwA7DJMAWxVbqfu75wzbIM8IuykDsRQ7APcta6MAoX0YABcEJdcWAR0AuRnNBPoJIEw3CZcJiB4bVllM44NCABMADAAVAA5rVAAhAA4AR+4V2D3zOVjKleYuChAdX01YPewAEwAMABUADmsgXECXAMPrABsAOQzFABsVW6n7Adq4HB0FWwXiAtCfAsSwCkwcpGUUcxptTPUAuw1nAuEACy00iRfJkQKBewETGwC9DWcC4QALLQFIUCWRTAoDLfsFMgnXaRetAddDAEkrEncCMRYhAusnuTdrADnhAfUlAMcOy7UBG2OBALEFAAUAitNJBRvDHwcXAKgn0QGhKy0DmwBnAQoZPu03dAQYFwCqAccCIQDTKxJzOvNQsAWQOncnNUgF+icFWQVYr7gFaTtdQhI6WEGXe5NmX6H4CxMDxQcl8XcjBKNLAlNTAnUbqycBj6OlNVsDRRcEg2EJANEGqz8vIwcpAjldAGsBYR9xAIMdGQCVAUm3ACdpFwGvxQM3LSFDUwFvWQZlAmUA8UkXAykBBQBJQQCrAF0AcwArtQYH8+8ZjX8ACSEAKQCzG0cB0QHbBwsxl3iB6AAKABEANAA9ADgzd3nTwBBfEFwBTQlMbDoVCwKsD6YL5REVDNEqy9PYADSpB+sDUwfrA1MDUwfrB+sDUwfrA1MDUwNTA1McCvAa08AQXw9IBG0FjgWLBNYIgyZJEYEHKAjSVA10HhxHA0UA/CMlSRw7kzMLJUJMDE0DB/w2QmynfTgDRzGrVPWQogPLMk85bAEecRKgACoPcxw1tU5+ekdxoApLT661f0liTmcCvjqoP/gKIQmTb7t3TgY9EBcnoRDzDC8BsQE3DelL1ATtBjcExR95GRUPyZWYCKEt2QzpJt8unYBWI/EqfwXpS/A82QtJUWQPVQthCd86X4FKAx0BCSKHCtkNNQhpEO8KxWcN4RFBBzUD0UmWAKEG/QsNHTEVsSYMYqgLBTlzBvca8guLJqsTJXr4Bc8aHQZJASUa+wDLLuOFrFotXBhPWwX/CyEjwxSkUBwNIUCzeEQaFwcRJaUCjUNsSoNRMh6PIfI8OQ1iLg9ReAfxPAEZSwt9PJpGp0UKEc4+iT1EIkVMKAQxeywrJ4cJyw+BDLV8bgFVCR0JrQxtEy0REzfBCDUHFSmXICcRCB1GkWCWBPObA+8TzQMHBTsJPQcPA7EcKRMqFSUFCYEg0wLvNtEurwKLVnwBEwXHDyEf2xBMR9wO5QiXAmEDfyXnACkVHQATIpcIP18AW4/UUwEuxwjDamgjcANjFONdEW8HjQ5TB6McLxW7HN1wxF4HhgQon6sJVwFxCZUBWwTfCAU1V4ycID1nT4tUGJcgXUE7XfgCLQxhFZtEuYd0AocPZxIXATEBbwc1DP0CcxHpEWcQkQjnhgA1sTP0OiEESyF/IA0KIwNLbMoLIyb1DPRlAZ8SXgMINDl36menYLIgF/kHFTLBQVwh7QuOT8kMmBq9GD5UKhngB7sD7xrvJ+ZBUwX7A58POkkz6gS5C2UIhwk7AEUOnxMH0xhmCm2MzAEthwGzlQNTjX8Ca4sGMwcHAGMHgwV14QAZAqMInwABAMsDUwA1AqkHmQAVAIE9ATkDIysBHeECiwOPCC3HAZErAe8lBBe/DBEA8zNuRgLDrQKAZmaeBdlUAooCRTEBSSEEAUpDTQOrbd0A1wBHBg/bQwERp0bHFt8/AdtrJwDDAPcAATEHAT0ByQHvaQCzAVsLLQmer7EBSeUlAH8AEWcB0wKFANkAMQB77QFPAEkFVfUFzwJLRQENLRQnU10BtwMbAS8BCQB1BseJocUDGwRpB88CEBcV3QLvKgexAyLbE8lCwQK92lEAMhIKNAq1CrQfX/NcLwItbj1MAAofpD7DP0oFTTtPO1Q7TztUO087VDtPO1Q7TztUA5O73rveCmhfQWHnDKIN0ETEOkUT12BNYC4TxC2zFL0VyiVSGTkauCcBJeBVBQ8ALc9mLAgoNHEXuAA7KWSDPWOCHiwKRxzjU41U9C0XAK1LnjOrDagbEUQ8BUN16WImFgoKHgJkfQJiPldJq1c3HAKh8wJolAJmBQKfgDgXBwJmNwJmIgRqBHsDfw8Dfo45AjlzEzl+Oh8fAmwZAjIyOAYCbcMCbarrhi9jQScBYwDaAN0ARgEHlAyJAPoHvgAJsQJ3KwJ2njsCeUc/Ani2GVjXRapG0wJ8OwJ6xAJ9BQJ87AVVBRxH/Eh5XyAAJxFJVEpXERNKyALQ/QLQyEsjA4hLA4fiRMGRLgLynVz/AwOqS8pMKSHLTUhNqwKLOwKK1L0XAxk/YwGzAo4zAo5YPJN9Ao7VAo5YdFGwUzEGUtBUgQKT9wKTCADlABhVGlWrVcwCLBcpkYIy3XhiRTc1ApebAu+uWB2kAFUhApaLApZ4mAClWahaBX1JADcClrEClkpcQFzNApnHAplgXMZdAxUCnJc5vjqZApwSAp+XAp60hgAZCy0mCwKd7QKejgCxOWEwYesCns8CoGoBpQKemxsCnkqhY8RkIyEnAierAiZ6AqD3AqBIAqLZAqHAAqYrAqXKAqf7AHkCp+5oeGit/0VqGGrNAqzfAqyqAq1jAqz+AlcZAlXYArHd0wMfSmyTArK5CQKy5BNs3G1fbURbAyXJArZYNztujAMpQQK4WgK5QxECuSZzcDJw3QK9FQK71nCSAzINAr6Ecf4DM20CvhZzHnNLAsPHAsMAc350RzFBdNwDPKMDPJYDPbsCxXgCxkMCxgyFAshlTQLIQALJSwLJKgJkmQLdznh1XXiqeSFLzAMYn2b+AmHwGe+VIHsHXo5etw0Cz2cCz2grR0/O7w+bAMKpAs9vASXmA04OfkcBAtwjAtuGAtJLA1JYA1NbAP0DVYiAhTvHEulcQYIYgs+CyoOJAtrDAtnahAyERac4A4ahACsDZAqGbVX1AFEC32EC3rRvcwLiK+0QAfMsIwH0lwHyzoMC6+8C6Wx1Aur1AurgAPVDAbUC7oUC65iWppb/Au47A4XcmHVw3HGdAvL/AGUDjhKZjwL3DwORagOSgwL3lAL51QL4YpoYmqe3M5saA51/Av72ARcANZ8Yn68DBYkDpmYDptUAzcEDBmahhKIBBQMMRQELARsHaQZdtWMBALcEZ7sNhx6vCQATcTUAHwMvEkkDhXsBXyMdAIzrAB0A5p8Dm40IswYbn8EApwURu+kdPT4WeAVoNz5AK0IhQrRfcRFfvACWxQUyAJBMGZu5OyZgMhG6zw4vGMYYicn2BVcFWAVXBVgFYwVYBVcFWAVXBVgFVwVYBVcFWEYVCNeFZwICAgpkXukrBMkDsQYvu7sAuwSnuwDnQCkWsgVGPmk+cEI/QrZfdTdf6ABYETOrAIz+zGvL/KbnRno9JiMEKxYnNjV+bd9qwfEZwixpAWvXbjAXBV8FasnBybgIz0lbAAAACnxefYu+ADM/gQADFtEG5a0jBQCMwwsDAQ0A5WUdPSQfSkKxQrxBOCNfJ2A2JzgjCcE9CkQ/Qz54PoE+cD5xAolCvElCO1/LTk9qTQosa1QvagtuH1/gMzobCWebCmIjKzwdJkKrQrwrzAHL/F/JDh8uCQgJIn6d32o6LUoXyavJrAllwcvMCmBBXw/lEKMRAJONHUVCJRupbTnOOAozP0M+cEI/HAcKHUxHbFssLVrhvBIKfe0dK0I/HF0ISgkOM1RDQjcEO0OcLAqBGy1CPxv1CFMiIxgwMQAFj2HwXgpxZMlgC2AtI25DYBk5AhseYLMGAmsQZU5gTREBZOdgFWCVYH1gs2BLYJFoFhcGtQ7cVam8WgtDFqsBuyvNwQIfFQAcAx4BeQJsLzCVUoABigq4RxoA5CN0jgrKDaZN6gGbAoecTwVAXwD39wkANBZXDAulDCQfuq9HAE8MNAAVE58rggh6AtILS2URGwDYTgZ1BAoeWgAxALa4AZonCxZvqyQ4nxkBWwGGCfwD2e0PBqoGSga5AB3LValaCbthE4kLLT8OuwG7ASICR1ooKCggHh8hLBImBiEMjQBUAm5XkEmVAW4fD3FHAdN1D85RIBmpsE3qBxEFTF8A9/cKAHoGJGwKKwulODAtx69WDQsAX7wLAGNAlQh6AOpN7yIbvwAxALa4AZonLTsOzgKQGHtQu1jIdHKO16WbDvWZFT0b7AEpEFwSBg8bAccJOhCTBRArDDYLABEAs84BAgCkAOEAmIIABWtXLwAUAFsbxi5sdioNwRACOyQz0+EcHgsbfQJ7Ls6hHATBCqrxbAA3OS0Opge7CQAQOi7OERkAfavaHA+7GkcczaF3HgE9Kl8cAuugCAHCAULz5B9lAb4Jtwz6CDwKPgAFwAs9AksNuwi8DTwKvC7OoSoJPA67BZgBG2sKD4sa4QHDARELuxY7AKALOxC7BBige9wAO2sMPAACpgm8BRvQ9QUBvgH6bsoGewAHuwG7D00RErwBAQDqAQAAdBVbBhbLFPxvF7sYOwAuuwLrDlaouwAeuwJVICp/AAG7AALjAAg7FTwVuwAbuwG9KOClWw6/xAD0AGj7L7ZtvgNIo7vIqDsDAbuVJ0sAAlsACrsEAOfdGbsIGnsIoQUK/3AA37unuxjbGruji3lyBvupm4MAErsGGwsBvAAAhgBtuwYAC7unOwEaO7oIoZzKAbsL7QfAqTsA4XsBvwAA5QAVuwAG+wAJuwBpiwAauwAOuwIYu45pFfsAAVsADmsALkseAAa7ABe7CCEADUoBwgC3ryYBwAAAtAAOmwG+J+QAsloAHBsBv/7hCqEABcYLFRXbAAebAEK7AQIAabsAC3sAHbsACLsJoQAFygBunxnVAJEIIQAFygABOwAH2wAdmwghAAaaAAl7ABsrAG0bAOa7gAAIWwAUuwkhAAbKAOOLAAk7C6EOxPtfAAc7AG6cQEgARwADOwAJrQM3AAcbABl7Abv/Aab7AAobAAo7AAn7p+sGuwAJGwADCwAQOwAAFDsAEWsAD4sADesADbsAGQsGFhsAFTsAbpsWswG7ALoAEzsDAGkrCgDhSwACOwAEUgAXewUbAAbQABi7AAv7AF+7AGv7AOSLAbsAF3YBvAABcguhAAVKHgF7KFIAOUUA/gcNDHIAKCpwAaQFCF4BvF4jDAkHb0tsXyqJHzwUYi02A6EKtAHYABYC0QNuAXZyR1IUIQNPAhU+ASwGA3NGvHtSekAAKQAxAfsAUwrbAHuQLAErAHblDREyRgFKAFcFAAFQAQeKzAB4OwQgpQBaANYVAJVoNx+LAM1rsQDP1BYIwnVzGxhWHQnRAYiQqyJTU01IEjzCifkAfxw3QCkr4BGXTwByASksMClCGQ8DMFUE98XuAEtl3ABqAnECPxF6Osd4LjXVBgUAEBsdCggMKgQfHSlOU04IuboAChLNACYAARoAhgCJAI41AO4AtADgAJ08ALsAqwCmAKEA8gCfANMAnADrAQwBBwDAAHkAWgDLAM0BBwDXAOsAiACiATUA4wDYANUDAQcqM9TU1NS2wNzN0M5DMhcBTQFXL0cBVQFkAWMBVgFHS0NFaA0BThUHCAMyNgwHACINJCYpLDg6Oj09PT4/DkAeUVFRUVNTUlMpVFVXVlYcXWFhYGJhI2ZocG9ycnJycnJ0dHR0dHR0dHR0dHZ2d3Z1WwBA7ABFAJYAdAAuAGLyAIoAUwBTADMCc+kAh//y8gBgAI/sAJsASwBeAGD5+aoAgQCBAGUAUgCtAB4AsgB/AjwCPwD4AOMA+gD6AOQA+wDlAOUA5ADiACkCdwFNATwBOgFQAToBOgE6ATUBNAE0ATQBGAFUDwArCAAATRcKFgMVFg4AigCSAKIASwBkGAItAHAAaQCRAxIDJCoDHkE+RykAiwJLAMMCUwKgALoCkgKSApICkgKSApIChwKSApICkgKSApICkgKRApEClAKcApMCkgKSApACkAKQApACjgKRAnEB0AKTApsCkgKSApEWeQsA+gUDpwJdAjYXAVAQNQLeEQorEwFKNxNNkQF3pDwBZVkA/wM9RwEAAJMpHhiPagApYABpAC4AiQOUzIvwroRaBborDsIRAZ3VdCoLBCMxbAEzWmwBsgDdfoB/foB+gYKCfoOGhH6FiIaAh4KIgol+in6LfoyKjX6Ofo+CkH6RfpJ+k36Ug5WIloKXftoC2WzhAtdsAIJsJGygAINsbARCBD8EQQREBEIESARFBEAERgRIBEcEQwRFBEgAlmZsAKMDh2wAtGYBBWwAyVFsbADPbAIMbAD2WmwA9gEZAPYA9AD0APUA9AN8XmzUhCNlvwD2APQA9AD1APQcbGwAiVpsAPYAiQEZAPYAiQLsAPYAiQN8XmzUhCNlvxxsAPdabAEZAPYA9gD0APQA9QD0APcA9AD0APUA9AN8XmzUhCNlvxxsbACJWmwBGQD2AIkA9gCJAuwA9gCJA3xebNSEI2W/HGwCQwE2bAJKATlsAkvBbGwCV2xsA54C7AOeA54DnwOfA58DnwN8XmzUhCNlvxxsbACJWmwBGQOeAIkDngCJAuwDngCJA3xebNSEI2W/HGwEN2wAiQQ4AIkGjTFtIC9s1m4DJmwA/QDGWgJsbABVWv4UMgJsbACJAmwAVAEAuV5sAmxebGwAiV5sAmxebD3YAEls1gJsbEZFNiJ9FGVAe8xvEZKvxVfKZszAVTBzYBH2d1iyUXEHH7twNw7eZF5JJRHI5EgaRr5D20/3dfONrFLSq5qSrrgd2CEUq722WBQ/LzpA+bx1oREI5xy4BDSZNun0ZWORUJqInZSyMaioyvfSI0l5uFDzbWaQ28/zdB0hwR4OQZ0/jn9ALSLNikjFYGfqR389qtFlhD3a6KdIh97rhZYpywuLc7o8ql5/X8KCbPU3L/QlmCowhRXhsGDvg6wUNprA9bM/49uxlAj7ZVy3ouEY/BgFXBNyK0TLrSjZWeJm/T4nz6QGLT3cJNtWRZVZTvIdtaxMMJRHgig9+S11LjBh7Inr06ykoch1U097Rw0hvgmOrydQyaWcEQDg0RavuMuT0zYabUZl1e33HNSK1oNUCS03eh+9C2EvF3fq9h+XBaAMFuoWeZf+mfZgL4HzyiKDIUtfNU4oFu0aE9qt3VA3U4D3fOSrAcYVnjG3cSkp1vhXZnp3JQm4JknKdBitO2NVnGCYQwU3YMWHWB87NEd+4AHuOKI8BSIH92reW0pfs+kWCTJxDCbRjFv8Cfc4/DSBYJScJYTeAEgg9wTEvcwd/QuHRHqGzAQ4fXf5FUI1lPrO+fvEcPl4JInM1z9AtBT2bL4QYEREe7KiSnnxTwtmAFjn8lqT3mND8qTktX2F16Ae9cakqJ6/pEQsHURqyqWlRMCzKXRKfCHT7sYHWx9/T/ugYTFY6iVN3Btm58ATJR5alYZybKMWojwOw3HbFn23NFyeLl7+Er82RchyYuBoGQ3j7SAWNxiYvp5U+Fq/DEzB9cG5DlJWsqkosRze92OVlCtQEYo1S1lF72Z8xWc4ld/+fFcfTEDTFb9d8tJGQ75dpJEvcWyGmGBiTbiWDdGOcw93Dmxq5ISUrmasygONfHLvhgo83HQZenbdBtSzBkvYrCEQ/xEDMhMZsN6gqplx5jGG9mSQLhM81UEdEeJ59sdNJDAFy/gPyJoKlwPZgB/MkC/kICLiCB8va+nCdO2ry4aDfkmPFpF/H/SGQ3LJ6aAv9dtJ8DniHtLOckZix0BVb0iR5V3LAp521LBSIi6AtV7r2ZB/hQEvAw54EFNOQcFnl1xGUIc67tqK1INNwD2n/RbwgzO9h45LM6VMuN8V1ZNIQ6t+Xy3lTqyVCD5kqLy/t3/b8MLbgDg8JIWDkSZ+LrGhhr+gYpH+pr1TnCUnZPjpUdw6bSL6MWVXoDDciQDWECwU2e6VEpfrcOBbrSOijqGkEIoJPbpmeJLkcwbvA0yWIixQVjo0HnYh7fji+Dfdq1mtV1lG2Zz9R7eFMHS+FK7nybutu2fwzDpFldO2pZBshsHJWaltn3PWOoGJpCT2jE8EHOuC6FkejNWcfsWCqNqMLP9xTwcWArj2EiiI7D+EaDi7/2cqHL1gPiF6C/J7aUo7RQqogPZ11WqbyP97nsoMxPOC78wZMF7B1Y0g7JNXJV/nN1m4xx8hbqWz07KSaqr5hE4icB326DMR/vUKX9LoNjle/ZWtbUhrTAcsdgrLlG5Ne8aiR0bS/2ZhpNOVVxavWIZsEM/rd68EB4vjbbD13NkMK1qvMk74vGbSkL7ULO0sZ9R6APSCo6KH+Xn98wEdw1bCPAnDTaBsD6sidAGN58uiH4a3ovG1KyZAu2XtyGgF/vgWKGxw9R1lfAVcfuYE71DHuxtTzfGZnHaDpDGWmfEq0N4GawE7yIkaoz8jcmVmzJe1ydM8q0p08YIxFcY1YcqQc1djWBEoNETDFcgk5waRftEJasPREkrV++N/TOKkERF1fCLrXS8DFGYGRBeECMQRNEs0ES3FzUtXCcNxpYEM3Uei6XodZruXUIRnn+UXf2b/r7n1vQutoi6WoIbW7svDNWBbUWcDUc7F9SJK3bvSy9KIqhgyJHoW2Kpvv0J4ob14HFXGWWVsYXJzjwxS+SADShTgCRjhoDgjAYRGxwJ1Vonw+cpnCKhz8NQPrb0SFxHIRbmG95Q2hlC4mDxvPBRbkFa60cvWakd7f0kVBxxktzZ9agPJEWyA63RSHYVqt8cPrs2uFJ3rS3k9ETGKn5+A6F9IOrdZHfT1biEyUJKEvwzuscwshGCBJvd16TrefW03xVnJf4xvs72PdxrMidjJO8EiWyN/VWyB3fv9kc34YIuZTFtXGo9DuG3H1Uka5FgBMwDPEvRcSabi3WakNQkXFecJlFk6buLVk5YHpuKWTw6oF632FPPSVIVl5hgUAeHhj0t/sw/PEEvThLQDDFE34eCg/rLOyXT3r+L98oRKrlTO0MdALYQ3rRQqC7d822dJPGxF1K4J2TtfPSMFaCAg0n0NGk9yiaKKOJD1v2aBX9HUOIawjjfvwCmjHZJTR62R9c9x33JnBjWrN4QYEOmehy0oZMP9XM9Zyi6TYoe07PaLceRXcCWZiY/imRUWW6+mci7+wMxSdwMdbXckXtvhJH8sc4iQcTwm7yp+3f7CaesTTQB2qkgeXh+wFiSMXfMlH7Yil0OoZ2QTtRLTip2O0cLZ4SstqWHZ6H+8A2kZXhpm0kPbL9dUanTOvziqIUh6Ambwa3WrCb2eWbuCN3L1hgWUmjRC3JoL3dBhR3imSQI8xuCMfsszlji7cSShNSYdqCXPxEVwbqO9i5B6hf93YI7aeyI8jxgcVXK0I/klbvhSXjkjOIwZgPdVwmsFW7HGPLUAvDRuKm+itybRg7c8+Yqqjg824Qf+/NxsBSUNAK9KCoJpauFqK0XQULrWYj4FnxeKDuvr54iokpi+D57e6Y1zxRJJdsHnDR3JyraCUufHBRTKODWBVzthjm4k3/Hv+Q990XDVR+KW+TcJX045LW86EKhz/97aqj89A8ZvTk1//tczosU90loIPVaHuWegJU3wP//7XHcO7c0yQM2jM/IhQKrf8hiObHWiWDZManF8Uf/HzbmDfC2wT//aiZ4hGTv/xzgKwdb1sD6cGEkceow0s3b89/zg+3plyRm0HlZi886j5wUwFhdHiDTaBidZRo5cx/tMeLyguOATbzq17ydhzbrpxunuHx6lbFGiO97gsd4dk//7iCIo+Ew+hG2so5kvv+ITG4c1fzHPtu1Xn5QfUnqY3/uByVmB7gmnE/E+5zdm+6nDmoews5fr+NzThdSHzK4bBQOL9c4O8OI0xLSqjJ4lbniLJg1aFpQRLwaSMZmpkC9e/j6FOVrTQ6a/a4alGgfrl2ZL1sbHUQ3DOI7ntq9diHFfm3t1mul3rdJEJCHnlW/hlQntipMrpeMs7fUr6wK370D7VbXH0DUHzdYfRg/6Z11Ult1sffJS+heHbco15Sxy3+rDnPesqH1lajk0yu02hPUvEUqvcUXWXL7Ad0wNGMx5gOle4XJxq/r/YY0xdco2wRSEGwcT7YADlBrHc9ZbvzOL0QwyWCWWChB9Obg800v7tyBWaNvdwz+fL7Ph9i2irEeJkRgOzeEDw+JiD/V93vH9FgMEoFIJMoIuogmicZohf94SBuPn6hXaV9jP4VVVA/bu+Wg8S88GLtmEPSNRLdtlXx2XL/nuM8nKkhnlnjaropiKKLIH94pLIASci0pDBfj9Hi5BfaTSXQg5+PMjQX91Ktk4MOqK1K99l4BRPv5+vNovGZ3IxQv8ICvjV4/diThpoaM8uvd3D9d/DE477w3yAbW3IDm2i73pZ9aEj38JqS6h/s8/xgmUIVcuq2JTgefAyuoafzQxAuRASeg3NtG3ach/JEkyuX+JDt2PnDZTShUhyHHG3ttBg/6lhAchGjLJBtopj4e01MlCp2yqQRTr4sBBXru+lKaoanwYX8y2aWCJiR3KnhCOkYVFSvsO0oDRujUFOEptiNDTYrJoUbvOyvl4AhC9h3wORiTXK1MrpMfnvdnndnR/HRVSusMBgIxwrLdn3vq1VcncPiD0SquTx/kNmxeFyCT4uXVUd9AL+rSGmuq7OOCzDKeVPjiNWVaoP5KOFqYq5Xcuf/xW9S+u9eIq9GAtZWtQlgkRecjRtvG1NR4WXXpn+pwsTBTIy079Ikg8rSef1aVapIFcXCd6C2wHVjLXR+N0tw4Taw6x6H90BFRgNrtlq2up6hHKuV3inM5RJaQWZHd84e6RsKkk9po3dk9by54tpPw7cBkFas/G+GbHwuG+AwP55BZyXILTHCIVrPpXHEaUPYfL6nphJP1Rc10xG4UaCeY4IHCwuur8xmSQDgY4aVwhzWhjbtSHG8JO6P2i2nC9/0Bfx0zk6dYQq3aw7k5vIObD7SEKrxhz0fQ0+YTOfHW23CBNeZci1qNsUDhoeqmfyP6PvjoEjHk8QbrFyQVZPHVWijnb8YCM65iYNoEbvnchStZ/9cKg5Vd45j8KnB6UjzXl/bkyZx7VoD47ocUUi117WwgySSb4rXgLJ52Mv5XJbp3I+uBP81BUvOjy4Cacgi+GWWlC/8dwgqwiojjUBDnEOxyRyowwLQfytFra1OZS4XvRYr4uoamAfG3I/p2bA7G90yqKThH8Ke00Tqd+3l3dmJpaCZelBMYjGqNLVa3SM4+LQeL56gY6Bymy2LQPVOxjWfj5tq4o74swcxhyGJPynkS5xAjOXZP1/FAYcBT3u6qLoIkEfErwo4gozmyI1YCvM0oyI3ghjGPQSsof2sKUhq91WsKy9cYWN+4A2v4pG/Mxpdc6w6kI/HX7Xb0TuihmsiOy2wQIsrZbUmr3OBSUo6oDJNgQp+YqYkgTgYcWZDgawJw3DFfdzT//PhVUidgB2qa8uw/j9ToHBAS33iT8YLhhAfyXG0bQUFp7QmH7oQ3i6Flf4OTZLvJdh8pfuflmWu2ohm5pTiSg1pl3vq9uluTJwqXfh1hqy8e2iHoD+Y35gCIViTo6VOtK5dD8HYClucJucXASzwe2kPj4S4eYQtmkYHagXhAzp/F541xE8YFYqSPszDuz3soWzHy0p3E2jwZNQaIcGU9FNQwQxeDw0ZlK9dxXrj9IUHGUPTOyib8CqXmbZ7Ex54bn1rLx3qqAavu/gh6XjV0GmN1p+yyMK9HN5uYEvxgbAk43tsheREhyI+Q5WLIneKTGPmYiM/lxOp8fvqHy8YgXK0TlMiX0tliLI2JtfmWZP8eVV732sdYm+pcWzDzEmKLJZyeelyaZKkjPnnUO9keDwtgiLnmd5+t+Sr5y8brRnlvxcWEWfCqIALQYHvaXx6jTg4dAlye469uGwwOZVZCILLfGjaMg4LUCNMTtMSp1aC2y/3wR2t1v3w/iNBRQ+bNbtDqL2NAr7K4rUcyqbSpNrXZgAWXvjxBBtfYLK1uRYt3q2pfXJOAL0HtWcEwJLddOSJKV1SwvcvEuzg/4MPnA8MIUJOLqm3qI6wFyN99Ck6zYaV/zGSAzF/PGsaNa4vPLe5QnyuqVUnVQ6xELA6gbe53aGgeke+R/ycb2LJVyc7BhuzI90zA+c6wUDTb7NH//gdDSl2u/aW7lRJm8m1fLtPxcNuEM5JbkOCZKPM88HUsLRoC1pmKKlvWyeAXuxILbu0snpSxf8N+RgtLUSe5n2gdjOjoSTaN7mMZ7bF+cWk/MS8mFD4pcyl5UN7CbpFZH2a+Pm1VAnUTVfbw8qrmz1G9m5aKmRzY1SMhhPrlCn2t4uNUXNA3IFe6NOjSC1DEaAFZAfDlEkQCsbNhsZPj6NQPDSB3tLiTo0ZYoEbIeEIaKtU3Wk60rEszawTFuyHVd365LA/c/uarABN5M5rGq/dqTG3Ilye/5EKiYisisuzqNaZjmWv0z9TORc0CKbaTea214oNM9u2sXUZub/eqM3Pi/PjRSyQiOSwPWif2asTgu6hS6fb5UGosCWxdedMqdViIUUSSdIJx+qQ4KShfTT39VAWZbi+mB+iKICNwpt6cflY57Rcbs6d1kA26Iru73cuxYVlSvuJdcR5VfDYZRk8X0AXePROyw3Le6LaUdmTLzYsoNhhgQpd67xVNiHgk3pakmndeIAtTC4DCXy9oS6eU4CWxDdVmY53pKNbdAKmQsP37lrJZC6iDXMELGKcHjNuuZgcDyY8W/yv6ha3DX7OWm/35fpvhw55oitf4V+GULlcPWYyGGuVBdro19c8u0RDddDun40W7G5cSIzHLh/qZxb59R+EPY+wZ2XerkUim92hhXpKyW6WtAh6zQS97DrPyjCvKi3pCw96LeKynOpyjtsMQc2RmI/20zFOZcSa2AK++PoRcT6zeJyxlBZ7kk5mhqXGkLlM2hFKc+/T544xXP0Ua38Q6xdPTLTeG1PHnLMaOvksUQMrEFTB/lizCirmFQL8zYVU+OTeYQEFaITsBSMMYexS9HkajO2gGIf2micvntCZJsZQEwIH3/4JGJQGflBuH5rNXmnRRYXDQs3ZoEQoMtYDr1kFKUS/siiQSUxcTH9XYeBZiKDDFQoExREO9dddKQLO3BwMHvymCSTFyY+vxn3D27NDx6OlU092D5EDUwilttqVHpjJQDUceJYCLsK2swfXeNUVrBJT/w/sk+7si8rPtiMFis+oxvGdGQxirMBID700T39mULuNHzOyN+xBfcFACZcyngF1aSpv0JPkNUrAZTqfplv509cGXFUiEEm5dZb+OsP/blizqdK45/dSsIrufYTrCPY2lgJD6k6QljTfXVlHfYKSq+MsagyUcaMintyr95bD8kdTAeYNLNsMmo/Wdd8a2nStBP49ARIjqqpUHWY4q4mvO5Cq/CgCP+4/B+5zutGwX5pssgVLr1+fIM7WWLfiUQDk4c6ZdHZOWv5hG3g2dgQ5NXnpIY+BWwJpaouf25bXnjDzbHnQNofH/c6m+dEAS9Gs2h7pFRPKOBDnqswZ8KZjhId1ytHUTs533KwBoSiImoxKQUgZ7z6pA9QB3sZ8Cq0vwutJTTkfbX8AzCpm2cFXx/P22niUMHauU8IGc+78R6TsutoonoqFuoNA3l80t387YHMoL5KGAT1JO4zmx+vJ0LbLHlicHraSVYvJjnO9p++qnWgKw9OwFVVUagvZuf9qfiuum+hIicxP1q4zDnzkHsCNriLxBpxY9N+UOmqzdY1MunLMDgkMyi3uvnN3UBXJeZ8YLs5xr8QrOhimYoKuGBebZHAiBIkViv3DG8k2oNpp5OIgX6ulqaRN8V62QUPjn5tl1kPXhT9bcd8qIm8gi4or/FGbvQ6pgGSHmnayrugmf5E0upGxPRf/3xOtitGMaHLKJVm5zhglmVfI91o0yxhJZVS/5wQ8zfxK8Ylw0WmHXoGfRkoBRx9Hsnl/6sgTjAVwpmNuSeZtBwlX4qB8Bh8lxjqBDIuFGJ4I1wxN0XRlAAslzqMKwQfyA7OkuivCXfv+i+3XmhcBFM2n4jdT+NyUmBnQJPV3F2sZfKvJhUlXzSosFR4VevVVcOkFnnjdiRWc0TeSYxj41sJGYMbZTeLI3GvyZ8/gAAudQ1+4oFX+enX5V49MczGCYVBuoC4kHjp7ZVxj+clBwPr9k+v05SsezQK3enxLs1Nt/N7c7AImVUysjGou4iOohHo83Zs9/MI/OWB+OyXzOBD93NbApGHXrv8CVRHp2bwH+xB55cfNrdqFD35HSMx4iVmtzYAmSCIV8kXsHoq3DIb93riTWbubnjxbBW5zConVtbxLRStXHkIyAByaozME952Gc9aAdAbBpZSVCH88Uwb/4bPTVOVl+WoMYD7JIvK8VcMrJ8zHV4bbG0Dg7Kx17A4ej/ZcZ2Z5pVuVLUH1E/AccUTKm81SE+LQ6STTUDscUk0x2OWIbEORhg69tdoTGNkA1RfkGIRZHr5mCXOpLC55WWzCZoGPFUVtZRHwh0nq039CDdjEPo+JyaxSQAvDgR6Iqvxy0frrtEG1A385N81l05SSzN+IDm9bypF9m92EUqblnauZ5sjc37wRykOdl7w4o8WMgQsjii3EE/aJYDfHs1cH6DNBEujjcCc8qAefYFyIAURDcDnzun5UmkbBQsU4eu/W8I9nBE0qJKTdg2hwjq0+XV7a3TJ7R+alvJZCRia9lJ+grNB9dbrOmWEvUotMjvDhq4wV/kq4fvIBkzUGpDeYH74rne8uU3dgoNZdR9pUL6q9YDNRfOiF6Dyk+SYXQIghTjm9qR4tBHh0gnmF/9q3Qv22EzaLhSvDlDOxMrrCNRmLCl1jApzLrBCPn2mjn5zqK7OYK7VxOfQ5GfBfoPdyQwqFEgCVHkJ9oTnagRM3R0+rsuN5jQv9icCav/p1WqiEXSzCdLd/WEA6z6dDP7tPqPbeDYKAkVcz1lLGbFOC9b7cBd3MV0Ve8dZ89oR7OnxGS7uVpSry8banVZwpJg+nkH1jRBYa2BvBMY2xITH9ERXCjHzdZxs+ipdXP2DY7X+eWiBhtT2L0RRGTLPeazn5tpl4tu8iE2rWig731iuJDRbCHHy+g/Mb9+miAyVqfIpXT/iZeOxOxODO0hEpLM78I1+G2Z45yi3lS1K3m4WMQ559Lp4UML5vZUjYGJuxl+OPpUH5klpyBujkjprhei0TmUik10gjvNUp8mDkWlNKikmYspaVTqewbnOzJrmz8FLIpsT67EJLHIIfeDcWEfiP+DJrZ1jfxpoAb2abeMqLx+9RuZGzQoYtYVGgAWwEM9Kek2vPIeBNAKD6ao7nw6sgvfeLZPoXkbYO/tStHJdKzk+WFSFEU2NcALJAEP6S8pcnqqBBt57dwTrzQNCIdk2SocK4dLRbD/pu/VryKnm65ZYXiJCfHJk3mx9MRSl+nSK6OqEBSoGjz0/LADddwF/HqcfK3K3O+6YUGQcmj8pZL4PhZ6KrGkb8B38FmDvvLd3XQXbvS/FQmrXFTvJNkaN/FGo83KuS43BK1UfVnIqigGkCoP5fBda2MwAGTGNKX9K9t4Bx83pMFc5KSORmWKv+8VoVggWxoaBz3/9IBh6RwLd1tebwy89xvE5z6EEpXpDfrXWfRsMs6+ekUHH6idVosno55+xQ8Zqzelh0bxtJTgCcH3Z3/Cxlx9eNIS4JIFKOAVrDqbrXRszmY55a5+niJGHtkO3b6mnIDxLa1WXc7BAe33mt2KyM4Fbc3R6/WVTQN8QhlqAtave2WsQTqzWeSlKuGUVIJRqtObpv294rS0kDN1RKzdstZTXJebR2HlzsQ4P3NbMHUqFZMZw+/IKXnh4t+lY8qocp/B1oMszR03EFs3bPeND8QkItMvllObeCz3SZAjqZrobmLcrpFyQV7mwBjg3C3C8/bc5goQhv8j/IXMLGnt4mF7tybRDG5G0polxoUScQkPvmnga2/K+aapKeqSL0BTmo1Cm5g+booNOtdyKva2KoefRURaBk7113QKo3y+WTuFKtgETIK8HRluYS9DvlcciCDvnG8UaJRfZE2siZsiTHvRmN80xkUIInHeRZl5Re/+ATL6VhKFi8CZ/n/jbFV6T5pZ+Uoppvsi3qjacVFOJgWWfdlwVHKPW/TJO3na9hRM9bS2yo2rEsC6IBzRReVO6IesJU7PItzOamr+ROFfwGZmZ7ue8HNxAgLJKb7P3p8dMqk6Be5PJaT/5Rdc1deYVihWH9cjVKc9uz5EnfHqxLUkOO8iJUENBNVf5LyNy8zjLu/78k5WNTywiPfYeX3CPk7yc6CI3lum/CEZwfUaNpcI3KsPqfn2lmz3kd/acQjKA1ebkJaiuLD+epQ/Fc1llHXXMzofWzz/Kd29SNmOhcjMWw1jq1g3YfrXZ9rzXDYW4ZttfgfMi6oCUtBs0PkMVuxmq5lxEoCaSXPSqCJJ7MlKdRDidVt0AFlxk5cTdX++sBF2+E35mjwfm8ERVxH0FvuAQtsfA4V2G0TKTUxeyRGVjd/u6F1SvuAiU2/WaQjcNCU4Ep7VunXCYSbZj3U3wzu/LWM5MPlYuyQ3FOOCD/zt7K295hY2JhwF+ODDIZ676vGQFKveEQYkWj7lkK7rVmD7MhU0Y/tF8EcTTpo4/yqOufbd/zWIpMajnbDuWK2vn6OPPtz2rc9MIBNlPd8tt+yf+7SC4wqEPbozKMCwY5Bygx4JmoIEDsixWRDcdHd6S3/dZMHXOJAAv7+NIstl00crgSqHZKAEe4g3G4dzIV51EeZB01r7p8GNlfUnG/GjZgNGsqXZdYMBVtAtFNv3hJWPve4GvqZ2XxuiNkHTz5kxWgr0PjQdJlVywJ9Zf2ZvqeeTbolKtvK54re2Lq5BoyzfsRtvDfyao3kmyFzDQ88nM+qx83w74RDlkngtYiArI05Epre3GgBeSlMig0pE6RGQaFznKkGeb0SozLCyiOtxh7hgwZlbKbClzUUfC8ntMiHUOZE375RhTy9c4DA+oMLkUDkztSybZbdmP1xpaIbjUpPAHBq3cIq+CBFzbMlMMCCkUQ6d9LGV6GYCsYiEWZIy3nBnuxOYXeU4YTGDSin9e4/pCjPtQSHlg5LMEvIlF0ElthqrF129iK2RPBEWd3XWOl3SWV5uz5VUyZYp5kEFmz7QfP/B1W1BBzQ2iTGbSVT79lUHzcGXz3PJceSgz4uknETUwo0xffpr2KUvZF0i/r2sL3IFIClYx8CbIZE6Qt7MDJbOPB3xMScwaOcWG66IJfCnDkb0D2Mb+PHzX+oiCbxeTIogtyN+s2NJirNACk/OACSOTtV6vscwbzW4M168xqaI+RzR47S1nlV/rOoZnid87n/Ima2XYa3un3BuGAisNjb8eLMT9OnMtazQROFCuO1HiZXaOc0oUDbNC4eKLToOx8DzVhMgGA8XIAQ2x3b6I0uEyLssQjJX3QphcUMx4KsMgJ+72km4N2aqkBF2coKmUEt1eqIMGn+5txMT4kYVGd3ALO+y9Z4PP3d3l48JQK8s9ZZ/Qx/+NBKgBEJFlQ32psoJiihGO7FSYM5L81q72kaAYcilEFMG+ZK1BcMqELkflyCV7v8JEXLO4Rf/oZYNZHZVjJhfL6fnpP9Tio3Euue5uS7FMkfGOeRCTrBZ06Caev7tgufeTrX34Ur/Vvc+b8ksiIShNJtuF9WmYxOZ4xg8y6zTdy3KAB2y5kYkcRnXsptWwAFyKZ2I/QGySNeoQLkINUMloC+5L3WuMMx297Q1xUYLKqZ9XHavaobo6QQv4auMm+i84IhxRpPt9nUmcav9NcjCcP+TcMmxsQZ/F3mgeoA0fQgwvTsyXuuTaM3Sqtv2jaaajmaFQpK9W6uIbeqwvSDo34ZrY6elDUHwSCjHRRmlwmyy+eOra64Ssq0XSXYljMHtKY+FShcMkHsEUY/4Bw63dJ6KpwDaxmthlDdbdE+TvYF3v33cGSKqO+1H1pKYhJMvZD5ckQcHyNF8zrtiR5b0ko6NPGoRexUZTYP6VbUdn3zzxGBOi8Z0OqHjGqYxRXwN3mYi0GYEEZYq+Q3QvdKcEHILLLj8S+VFepSfErtmfZCdvxbfIifFSpEzKi+7VJsLMT+zEFeyp1OdwRC1VZrfTLIyR7xTPUcZFYPD9qI7D70uTb4hdpqPXsJIRNYbZtNwch1OI3trh3u2ScoQyM9POnInsUa+OovcwkUP1UfIzPb95n4BaF2ev57NHAej0+BVMF9/Cj9663HN2/JN3SQgslL914bKfiTTDFAz9PlQEL/dSv1H8xl3mtWxh1McFO9EJXlRDaKQDsyKO4vOJW90NFE6yw2tjbc2GeF95sbs0I9enAa6QwQVf/kJQhAD2BzUDKggOyjy1TEhED6sfk+418lQy3c/uj8aw8UEzZ6hIMCd8RohAkumMtIj9m73l2yPWoGHVTPaywkC7Yj9tBM1NxMgcrDwRtk4RO2WHT7Ql5kQCKdJj6kNuOTeyEBYBjLMhGz+O5/YGa84HEiTYEpZ6fFzy26GG2hWtTyteuYrhSyG56BjsT/wQeLRytpTY3D7sIMqZnJ9z1FDrfyjFlGl2TNw9BQysbaxOuwYYZs/7I6BANgkqCknWZC7/BBXvaeKwAmC959I+G39BUE9bExkNlbRoFRyEtNzv+NJ91FuisG3JCS6uYBeRnfv8AkAfKTeg9EYamqnsGfAV7d0f9DghHEQ5IsPGDIUhgoSj7obM4Bu5uhQ3/CYEDTHc92AsFvDK4XGrwUeGBWBHPlS+f4x+CxmmHz2sAGmSFNt65kwZC64mnaoWlu2310laYn8r62AqsR5dfjyK18MEdurdagldzfJtjFXlZs7St4QhdPiye6TPh2/ZAQLU/Fip5s7TDEM16KtRWrK9hmxnQ7bmfa/+7pa10Z8WDPK3NuJ+NN/RAbQ5vHx2uX0Lm7/w7cAEH/hvZA+mt7J7zGw7YtQYwnNN6dpgwkGjjrS3yQoeoYt1EnczmtmJfQZWzUlP3Hlg9Wzlr9IH23q3thGth+QNEANFettxKfskkGOlLk8AqoKJwDqOxAa6UzAx07plSSyNBJSGco9zjnC5gGbDoKvsMDuBR6bGRlGzJ+hFsGa/Izt78aI+WZ6dJlZKp4pGISuv9rV0sAS0MWEwCmfauO7oQZMiakHU35LBxiyJoOMddhUWgcZuC8r4Ksvn75TTcQXLJ7kWtYhGuGqPd9dZuFjBWQHNwosXY5snbHFQq72CvHXhIg+shQxycuLOuWYErwCLZeF24b7F78pO7xw4X6lIAR02hUOf5087Rl0nOaeb6CK4i/KA/EZv76ftOWZtjwxslNr0E/u8rWUmnf3amfg6UZmBAluuoj3Dd7UV+9IAJ6iYcDfSJlgmIImohjfIUMJ27z+opj50Ak9af2LCNrWrBJvMovA1OeNO+MF/MwZvnaCxTgG7Cw4QfSPF6AYCGFt21M8PySZFeV3t2Rqqs5JMzMYzGRgq4o+UaKRgBf9GHi/9X9HXA3wxkCsd/UhnHSh2zUVDiraio/6nP4y3XJqs8ABfALAtCYU7DHPMPRjgcM6Ad/HiSXDAbOdSMkvGZPAkHs8wuQTy6X2Ov/JFvcPuKfV3/r9Q28";const RE=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),IE=4;function RJ(n){let e=0;function t(){return n[e++]<<8|n[e++]}let r=t(),i=1,s=[0,1];for(let C=1;C<r;C++)s.push(i+=t());let o=t(),a=e;e+=o;let l=0,c=0;function u(){return l==0&&(c=c<<8|n[e++],l=8),c>>--l&1}const d=31,f=2**d,p=f>>>1,m=p>>1,g=f-1;let y=0;for(let C=0;C<d;C++)y=y<<1|u();let h=[],w=0,M=f;for(;;){let C=Math.floor(((y-w+1)*i-1)/M),k=0,F=r;for(;F-k>1;){let I=k+F>>>1;C<s[I]?F=I:k=I}if(k==0)break;h.push(k);let N=w+Math.floor(M*s[k]/i),B=w+Math.floor(M*s[k+1]/i)-1;for(;!((N^B)&p);)y=y<<1&g|u(),N=N<<1&g,B=B<<1&g|1;for(;N&~B&m;)y=y&p|y<<1&g>>>1|u(),N=N<<1^p,B=(B^p)<<1|p|1;w=N,M=1+B-N}let S=r-4;return h.map(C=>{switch(C-S){case 3:return S+65792+(n[a++]<<16|n[a++]<<8|n[a++]);case 2:return S+256+(n[a++]<<8|n[a++]);case 1:return S+n[a++];default:return C-1}})}function IJ(n){let e=0;return()=>n[e++]}function nC(n){return IJ(RJ(CJ(n)))}function CJ(n){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let t=n.length,r=new Uint8Array(6*t>>3);for(let i=0,s=0,o=0,a=0;i<t;i++)a=a<<6|e[n.charCodeAt(i)],o+=6,o>=8&&(r[s++]=a>>(o-=8));return r}function PJ(n){return n&1?~n>>1:n>>1}function NJ(n,e){let t=Array(n);for(let r=0,i=0;r<n;r++)t[r]=i+=PJ(e());return t}function kf(n,e=0){let t=[];for(;;){let r=n(),i=n();if(!i)break;e+=r;for(let s=0;s<i;s++)t.push(e+s);e+=i+1}return t}function rC(n){return Bf(()=>{let e=kf(n);if(e.length)return e})}function iC(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(kJ(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(BJ(t,n))}return e.flat()}function Bf(n){let e=[];for(;;){let t=n(e.length);if(!t)break;e.push(t)}return e}function sC(n,e,t){let r=Array(n).fill().map(()=>[]);for(let i=0;i<e;i++)NJ(n,t).forEach((s,o)=>r[o].push(s));return r}function kJ(n,e){let t=1+e(),r=e(),i=Bf(e);return sC(i.length,1+n,e).flatMap((o,a)=>{let[l,...c]=o;return Array(i[a]).fill().map((u,d)=>{let f=d*r;return[l+d*t,c.map(p=>p+f)]})})}function BJ(n,e){let t=1+e();return sC(t,1+n,e).map(i=>[i[0],i.slice(1)])}function LJ(n){let e=[],t=kf(n);return i(r([]),[]),e;function r(s){let o=n(),a=Bf(()=>{let l=kf(n).map(c=>t[c]);if(l.length)return r(l)});return{S:o,B:a,Q:s}}function i({S:s,B:o},a,l){if(!(s&4&&l===a[a.length-1])){s&2&&(l=a[a.length-1]),s&1&&e.push(a);for(let c of o)for(let u of c.Q)i(c,[...a,u],l)}}}function DJ(n){return n.toString(16).toUpperCase().padStart(2,"0")}function oC(n){return`{${DJ(n)}}`}function OJ(n){let e=[];for(let t=0,r=n.length;t<r;){let i=n.codePointAt(t);t+=i<65536?1:2,e.push(i)}return e}function Uu(n){let t=n.length;if(t<4096)return String.fromCodePoint(...n);let r=[];for(let i=0;i<t;)r.push(String.fromCodePoint(...n.slice(i,i+=4096)));return r.join("")}function FJ(n,e){let t=n.length,r=t-e.length;for(let i=0;r==0&&i<t;i++)r=n[i]-e[i];return r}var UJ="AEUDVgHLCGMATwDUADIAdAAhADQAFAAtABQAIQAPACcADQASAAoAGAAJABIACQARAAUACwAFAAwABQAQAAMABwAEAAoABQAJAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACwANAA0AAwAKAAkABAAdAAYAZwDTAeYDMwCxCl8B8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgPi89uj00MsvBXxEPAGPCDwBnQKoEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiC+AZ4EWRJJFbEu7QDQLARtEbgECxDwAb/RyAk1AV4nD2cEQQKTAzsAGpobWgAahAGPCrysdy0OAKwAfFIcBAQFUmoA/PtZADkBIadVj2UMUgx5Il4ANQC9vAITAdQZWxDzALN9AhsZVwIcGSkCBAgXOhG7AqMZ4M7+1M0UAPDNAWsC+mcJDe8AAQA99zkEXLICyQozAo6lAobcP5JvjQLFzwKD9gU/OD8FEQCtEQL6bW+nAKUEvzjDHsuRyUvOFHcacUz5AqIFRSE2kzsBEQCuaQL5DQTlcgO6twSpTiUgCwIFCAUXBHQEqQV6swAVxUlmTmsCwjqsP/wKJQmXb793UgZBEBsnpRD3DDMBtQE7De1L2ATxBjsEyR99GRkPzZWcCKUt3QztJuMuoYBaI/UqgwXtS/Q83QtNUWgPWQtlCeM6Y4FOAyEBDSKLCt0NOQhtEPMKyWsN5RFFBzkD1UmaAKUHAQsRHTUVtSYQYqwLCTl3Bvsa9guPJq8TKXr8BdMaIQZNASka/wDPLueFsFoxXBxPXwYDCyUjxxSoUCANJUC3eEgaGwcVJakCkUNwSodRNh6TIfY8PQ1mLhNRfAf1PAUZTwuBPJ5Gq0UOEdI+jT1IIklMLAQ1fywvJ4sJzw+FDLl8cgFZCSEJsQxxEzERFzfFCDkHGS2XJCcVCCFGlWCaBPefA/MT0QMLBT8JQQcTA7UcLRMuFSkFDYEk1wLzNtUuswKPVoABFwXLDyUf3xBQR+AO6QibAmUDgyXrAC0VIQAXIpsIQ2MAX4/YUwUuywjHamwjdANnFOdhEXMHkQ5XB6ccMxW/HOFwyF4Lhggoo68JWwF1CZkBXwTjCAk1W4ygIEFnU4tYGJsgYUE/XfwCMQxlFZ9EvYd4AosPaxIbATUBcwc5DQECdxHtEWsQlQjrhgQ1tTP4OiUETyGDIBEKJwNPbM4LJyb5DPhpAaMSYgMMND137merYLYkF/0HGTLFQWAh8QuST80MnBrBGEJULhnkB78D8xrzJ+pBVwX/A6MDEzpNM+4EvQtpCIsJPwBJDqMXB9cYagpxjNABMYsBt5kDV5GDAm+PBjcHCwBnC4cFeeUAHQKnCKMABQDPA1cAOQKtB50AGQCFQQE9AycvASHlAo8DkwgxywGVLwHzKQQbwwwVAPc3bkoCw7ECgGpmogXdWAKOAkk1AU0lBAVOR1EDr3HhANsASwYT30cBFatKyxrjQwHfbysAxwD7AAU1BwVBAc0B820AtwFfCzEJorO1AU3pKQCDABVrAdcCiQDdADUAf/EBUwBNBVn5BdMCT0kBETEYK1dhAbsDHwEzAQ0AeQbLjaXJBx8EbQfTAhAbFeEC7y4HtQEDIt8TzULFAr3eVaFgAmSBAmJCW02vWzcgAqH3AmiYAmYJAp+EOBsLAmY7AmYmBG4EfwN/EwN+kjkGOXcXOYI6IyMCbB0CMjY4CgJtxwJtru+KM2dFKwFnAN4A4QBKBQeYDI0A/gvCAA21AncvAnaiPwJ5S0MCeLodXNtFrkbXAnw/AnrIAn0JAnzwBVkFIEgASH1jJAKBbQKAAAKABQJ/rklYSlsVF0rMAtEBAtDMSycDiE8Dh+ZExZEyAvKhXQMDA65LzkwtJQPPTUxNrwKLPwKK2MEbBx1DZwW3Ao43Ao5cQJeBAo7ZAo5ceFG0UzUKUtRUhQKT+wKTDADpABxVHlWvVdAGLBsplYYy4XhmRTs5ApefAu+yWCGoAFklApaPApZ8nACpWaxaCYFNADsClrUClk5cRFzRApnLAplkXMpdBxkCnJs5wjqdApwWAp+bAp64igAdDzEqDwKd8QKekgC1PWE0Ye8CntMCoG4BqQKenx8Cnk6lY8hkJyUrAievAiZ+AqD7AqBMAqLdAqHEAqYvAqXOAqf/AH0Cp/JofGixAANJahxq0QKs4wKsrgKtZwKtAgJXHQJV3AKx4dcDH05slwKyvQ0CsugXbOBtY21IXwMlzQK2XDs/bpADKUUCuF4CuUcVArkqd3A2cOECvRkCu9pwlgMyEQK+iHICAzNxAr4acyJzTwLDywLDBHOCdEs1RXTgAzynAzyaAz2/AsV8AsZHAsYQiQLIaVECyEQCyU8CyS4CZJ0C3dJ4eWF4rnklS9ADGKNnAgJh9BnzlSR7C16SXrsRAs9rAs9sL0tT0vMTnwDGrQLPcwEp6gNOEn5LBQLcJwLbigLSTwNSXANTXwEBA1WMgIk/AMsW7WBFghyC04LOg40C2scC2d6EEIRJpzwDhqUALwNkDoZxWfkAVQLfZQLeuHN3AuIv7RQB8zAnAfSbAfLShwLr8wLpcHkC6vkC6uQA+UcBuQLuiQLrnJaqlwMC7j8DheCYeXDgcaEC8wMAaQOOFpmTAvcTA5FuA5KHAveYAvnZAvhmmhyaq7s3mx4DnYMC/voBGwA5nxyfswMFjQOmagOm2QDRxQMGaqGIogUJAwxJAtQAPwMA4UEXUwER8wNrB5dnBQCTLSu3r73bAYmZFH8RBDkB+ykFIQ6dCZ8Akv0TtRQrxQL3LScApQC3BbmOkRc/xqdtQS4UJo0uAUMBgPwBtSYAdQMOBG0ALAIWDKEAAAoCPQJqA90DfgSRASBFBSF8CgAFAEQAEwA2EgJ3AQAF1QNr7wrFAgD3Cp8nv7G35QGRIUFCAekUfxE0wIkABAAbAFoCRQKEiwAGOlM6lI1tALg6jzrQAI04wTrcAKUA6ADLATqBOjs5/Dn5O3aJOls7nok6bzkYAVYBMwFsBS81XTWeNa01ZjV1NbY1xTWCNZE10jXhNZ41rTXuNf01sjXBNgI2ETXGNdU2FjYnNd417TYuNj02LjUtITY6Nj02PDbJNwgEkDxXNjg23TcgNw82yiA3iTcwCgSwPGc2JDcZN2w6jTchQtRDB0LgQwscDw8JmyhtKFFVBgDpfwDpsAD+mxQ91wLpNSMArQC9BbeOkRdLxptzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgELgEaJZkC7aMAoQCjBcGOmxdNxrsBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUHqSvAj5Gqwr7YrMUACT9AN3rlr3JG9m8w9lIAXltp/v8kfWaIaaR9OwpAES/I3ZVamDXSgB/UsOgAG6D0tq+5CIqE15FiAhV3yA2VhCQ7tj+m6xXaF53FIfGi/IAZIskMGAi2MU7MDVJNCbMzERyHZi+osdPtnFVbvq653O8rwaCy4IAf9OOok65AqJUtUriUfYsGPPVbe6jm0s9lbKlPCUKjdkHsFsEhvX4kT39ZCtAAbwQdn/h4TpO5hTByWAmr5n+Wuwhdegv6bmvX4LyOes3z2+cuHv2JFYwVMNuq2gzn8YHTjlUQd39osyWei4NKl3LAdfxlO876hh5ENp/cOvpuI9bF55guEthLLPOXjD4dktTH04P5TvZrWTM0e4+BHJxj7MLApXIFOs0sWKhNkG8iwuM5wR83my6V3wW06abhDzTXYfOr/ZpFXgXzmv4d12FFyP00/dPGbIVGV5ao8UufGzUwp/IHx6v/wDWJr9iaoCulhWwlZ7A8q/NMoD12+mBdNRgJYnThRLtMx1Bgwttn8/4Qn2CDfOSup9GVXEvA21ILgp0owHYxNOkpwLWz0G7K+WREIDjIzUzSn8I99CuJSmSpPyH0Ke6/NERYiNx+3dncSebPnOUnnWD61AhJ1n/tSLZmU5wYO5GfgzyAYJm6VL91LxZ8hL1lfximQxIDMRhIecQZBmeE5R0XlrpvwplVrJwpa8BBCdp93GPP9lyBeZ2zkRr920CR3cYbKpKHfogvm0nV7XdDz6EbjzlxADCMjSLXuXpIpyuizy39yY+I+H9rmpoIF3YwEjlH9MgGgWcCNTjHEWMqAbprn2Ox7rOHupaVE3lNyg3nt5XaZID6Y+uml5Ja+aOPu+BI+DZbiJVfaspUadakWUX6TA4dETkIqdJJHYnU4Z4yKpt5y8rVIahoMUf8A8kWtAQNCTbjp71gx3/zVdqNz1Sutkw0gFIMVm2BF4Xdv/0olw+NaDIR9Bb3DPweZA2K/cw+/b+AwyWl9ZOP67A9nexmeTNjfdzPGf9J6E6BMPKa5lJh+qNsdUz3HBUevU71eQFCqOcxiIYhacAhh/8PX0J5DdSViZ6WazDDx7cukJNpMfEkYLJ5Ao4vLoVd3d25Pg4qaVa2p2D2L3WvYPJ5Yf/A/MSxptjlgXL/KJtP2U0cRv2I09ATAiWCJYuRwiapeKFsqmi18yMMulDp3HdcIldq+7jkwsJUOHLHCzzzBw5XFvL0CAmo1ub456z7zb7shk3KPGCLZzr47oT1k/j06XNnJvG3Udv6XrP+wsqTBlZ5MaNPt9FOs/4Bt/ja/vbVhTNpBFl9Gq7MqINvGlWKOAwQzwOZy+EzSdjAqKJVV2YcskTuM94aIK+kc/AZaXiZLPREUDpkXIV947IFfj+85TrqPqLfkGcxgboMQjosf+az+odLNXdyp1mDNGsqSdK/pJ2Ca04mt/4d6s1X+lncOEYaGBBeW4pApGcjf7/XJCFbj3N3mFb+BtlIcw8ZiDKoClFX9Rf0bxCqtLpicObKJzBVVHr/6u4siH2hK75RNv7w9GfTbhJOQBYiFUZAByY4rn37tZBHT//kqKsNi3ryL9AqXJRzqiMIJMhILjoi/i8LVEsbu+Ih9bsyW16sgQqjYLO0qda6KaCPKj3DQcu6CfV5lKtjS3ZCdqLAZkOey9MR+QutJBGiz/r15GVD6rCVwJR4UUKC4GNJkfDf00OMW8aQtLSAGLXV8MIi9mbbl/qQEpxCm2L5hutFX4ekeLH4QgBWUFKs/2VVMKy46WtFE6AbwgmYm/Z0yHk5veDIrcl2HpVqb/rSE0PC9EbDzJEWqeaPhh7vF369Umq2kSiB3s5rBI6c/7N9bkRu4h2n+/h5nSwy+7n+/I+6oXQVANo2Jb5zDwtiBPf1ySCzHdT6yJShMzqSRZfnykX49CaFaxhoVF4PBhEuECJ1PrFYSpmHuyYsl14DTAV9ZxRms1XiR/kBrjhZjidOt0UNe+GSml7XNgpVw8YsUTmZXLTK+6iYnyW/wYR1W4UXwOi14xpFROHb6HcZzksgF5DbL2AFXzKNwHU2adjdAY+KCyM/cwRTBkkq/a227NI0q6DR2MkMCRu620t79bGcYUmACtqN3mk/0uNwd3JSXHqE1kzf6Yyj0W2083JNDRnIXDlgBxJ6uf58NN1f6FQiRCWB4egF8QDx74AixV8oTyw7PluIjr3/rj/WzgwPSq4xPojaF7V0xqG2u5ti2L1h6yYHv73Isrukr0kURDIEjClBsBx7kdcXUxaYMS0syT3ymLzDzslNDWQOT1Tao1YNmJHARUenhCkmV9tqCPGI5GqZaRpkiPxyjoncWjyOHYGqvbvRX+Bn1pn7EhRNXa1lqJPmoeN5VqdqIDPhEVhFsyG0d4iQEIYX0wZUbY2XbZWYlpZ/l66IrDDY0q1C1YzBDpHC4h05YqHQLqS9anyl22JQ6lEvjvdBwMHfE7z0luCXD34/rFeDa2TmSeEAykSpYO5j1G/nsgpR3qn0qaQEmLjnnLfcz+veoYqPnRqmRGwCJ6FJ3Gm/Z1/aVX5PSb03MMnjAf41ww54sD5k8FrkfBP+K0b1MrYpapWjtpZfve2HVf4ickX3LKSOhu7qI1Vd4c1kNrn2ajy1t4y93JhV4fnWCKq7OmFpcr7FjdJCXPTql0Drr14Ho3Z87+GPQ4Z/DcTiGqtvZxlRYi8cNuhXABveZIwNl/BX1huhVLaFax5OqypUrQRyb9OE3SSkPlDdy5uo5XGg2EIGEjLY1MO5cr1ibfiFWV7zspcTgkBKkwo5jPyAin04LqizZXb2tDRgwKJjGx4cVk3ngAQixwcxjYAg2Q7vmUR/hpwInMdw7OhC2qyf41vTPkudQAORS0DdLtOGQxb4fH2VYGsvJCkeWPeUwtf1/tuIhzXEThoCZzzSJqqjUtbaPI3ntHm3T5uf849hGUA0zU8ni5W+EEn3/0Y6oUhQFw9z0aGjkljBbAlFXc0y82G2wkd7VdgWa5KTgJJNjNwZMfmdnUIUn1JU5LiWX5UZEZbVlKSN76mlmjUR2ku+fucTNlO4IAAahnLjBhlvQNR9pe9swGBgq0YR7P3VCyI/seYwQ4QBzy9X+HPePgoF8WfKaJ4MBOhLCGHae6Z8xkNXwni9QAKvTNtVA56x8YJflZ/VvONRSlsSLmiSyNMnTjTaE1ko81zkzGEnVwEhjCzlwIqpxmpDAqwsEmtpdr3xpc7i/ZX3f2TzT3M0FdxIEQvO1jgmmiN+D1YpMduAzEhBtj2OBkMN/rv6p7Th4pSH6f5aH3aTvwFTl7EOSgGASI7ttyMehzpm4AVyK+bFEaFg9gnZsSUPpsbAe/0RFhrH+EXZ12Z7thf4dzN1+Sn+G8QrDA1VKaN4IFxD1rQz9Xq9Coii9S9/hPbTGjyBwFH3H1UdQuz5KsgPDEHua4/kPg2Gp/IIItsaLWBqiT9XH45MiQxSosGJ56H/0F2cjcCFd72l1665RNHURdC3lspI77esfJsl+rXXabkAy7vxDXG/XGGcKpwiKDPFfvMEgjkAHil4Za1F36RnyxxvdIAzvgfH8knukYDck07tc++DP4TdWeI7HXuq5Yl6VVFrUQtf64/dkXewlKZSHQo6YvCSpREB0GDrz+Ys2GfO8nw2SwrYwaf88AifzlPvP17bf1mI3AuccJvAjZIpBmqvharKFAebEjVKfGAwpQjWoXlm9LROsq9bCk1UeQ3CJxJqprzssS/Q04JeS1ReCCubL3J7sx86spkP4eNpp95UF+8K748icIs8vdILFklk9skQqi1So6cx3X906pvy1vz+KipTJ8fiVJxsV5MmT0XwA";const Lf=44032,Hm=4352,zm=4449,Gm=4519,aC=19,lC=21,Hu=28,Vm=lC*Hu,HJ=aC*Vm,zJ=Lf+HJ,GJ=Hm+aC,VJ=zm+lC,$J=Gm+Hu;function Od(n){return n>>24&255}function cC(n){return n&16777215}let F_,CE,U_,Tp;function jJ(){let n=nC(UJ);F_=new Map(rC(n).flatMap((e,t)=>e.map(r=>[r,t+1<<24]))),CE=new Set(kf(n)),U_=new Map,Tp=new Map;for(let[e,t]of iC(n)){if(!CE.has(e)&&t.length==2){let[r,i]=t,s=Tp.get(r);s||(s=new Map,Tp.set(r,s)),s.set(i,e)}U_.set(e,t.reverse())}}function uC(n){return n>=Lf&&n<zJ}function WJ(n,e){if(n>=Hm&&n<GJ&&e>=zm&&e<VJ)return Lf+(n-Hm)*Vm+(e-zm)*Hu;if(uC(n)&&e>Gm&&e<$J&&(n-Lf)%Hu==0)return n+(e-Gm);{let t=Tp.get(n);return t&&(t=t.get(e),t)?t:-1}}function dC(n){F_||jJ();let e=[],t=[],r=!1;function i(s){let o=F_.get(s);o&&(r=!0,s|=o),e.push(s)}for(let s of n)for(;;){if(s<128)e.push(s);else if(uC(s)){let o=s-Lf,a=o/Vm|0,l=o%Vm/Hu|0,c=o%Hu;i(Hm+a),i(zm+l),c>0&&i(Gm+c)}else{let o=U_.get(s);o?t.push(...o):i(s)}if(!t.length)break;s=t.pop()}if(r&&e.length>1){let s=Od(e[0]);for(let o=1;o<e.length;o++){let a=Od(e[o]);if(a==0||s<=a){s=a;continue}let l=o-1;for(;;){let c=e[l+1];if(e[l+1]=e[l],e[l]=c,!l||(s=Od(e[--l]),s<=a))break}s=Od(e[o])}}return e}function qJ(n){let e=[],t=[],r=-1,i=0;for(let s of n){let o=Od(s),a=cC(s);if(r==-1)o==0?r=a:e.push(a);else if(i>0&&i>=o)o==0?(e.push(r,...t),t.length=0,r=a):t.push(a),i=o;else{let l=WJ(r,a);l>=0?r=l:i==0&&o==0?(e.push(r),r=a):(t.push(a),i=o)}}return r>=0&&e.push(r,...t),e}function fC(n){return dC(n).map(cC)}function XJ(n){return qJ(dC(n))}const PE=45,hC=".",pC=65039,mC=1,$m=n=>Array.from(n);function Df(n,e){return n.P.has(e)||n.Q.has(e)}class KJ extends Array{get is_emoji(){return!0}}let H_,gC,Al,jm,vC,nu,gv,Fc,dl,NE,z_;function Vx(){if(H_)return;let n=nC(MJ);const e=()=>kf(n),t=()=>new Set(e()),r=(u,d)=>d.forEach(f=>u.add(f));H_=new Map(iC(n)),gC=t(),Al=e(),jm=new Set(e().map(u=>Al[u])),Al=new Set(Al),vC=t(),t();let i=rC(n),s=n();const o=()=>{let u=new Set;return e().forEach(d=>r(u,i[d])),r(u,e()),u};nu=Bf(u=>{let d=Bf(n).map(f=>f+96);if(d.length){let f=u>=s;d[0]-=32,d=Uu(d),f&&(d=`Restricted[${d}]`);let p=o(),m=o(),g=!n();return{N:d,P:p,Q:m,M:g,R:f}}}),gv=t(),Fc=new Map;let a=e().concat($m(gv)).sort((u,d)=>u-d);a.forEach((u,d)=>{let f=n(),p=a[d]=f?a[d-f]:{V:[],M:new Map};p.V.push(u),gv.has(u)||Fc.set(u,p)});for(let{V:u,M:d}of new Set(Fc.values())){let f=[];for(let m of u){let g=nu.filter(h=>Df(h,m)),y=f.find(({G:h})=>g.some(w=>h.has(w)));y||(y={G:new Set,V:[]},f.push(y)),y.V.push(m),r(y.G,g)}let p=f.flatMap(m=>$m(m.G));for(let{G:m,V:g}of f){let y=new Set(p.filter(h=>!m.has(h)));for(let h of g)d.set(h,y)}}dl=new Set;let l=new Set;const c=u=>dl.has(u)?l.add(u):dl.add(u);for(let u of nu){for(let d of u.P)c(d);for(let d of u.Q)c(d)}for(let u of dl)!Fc.has(u)&&!l.has(u)&&Fc.set(u,mC);r(dl,fC(dl)),NE=LJ(n).map(u=>KJ.from(u)).sort(FJ),z_=new Map;for(let u of NE){let d=[z_];for(let f of u){let p=d.map(m=>{let g=m.get(f);return g||(g=new Map,m.set(f,g)),g});f===pC?d.push(...p):d=p}for(let f of d)f.V=u}}function $x(n){return(yC(n)?"":`${jx(X0([n]))} `)+oC(n)}function jx(n){return`"${n}"‎`}function YJ(n){if(n.length>=4&&n[2]==PE&&n[3]==PE)throw new Error(`invalid label extension: "${Uu(n.slice(0,4))}"`)}function QJ(n){for(let t=n.lastIndexOf(95);t>0;)if(n[--t]!==95)throw new Error("underscore allowed only at start")}function ZJ(n){let e=n[0],t=RE.get(e);if(t)throw Kd(`leading ${t}`);let r=n.length,i=-1;for(let s=1;s<r;s++){e=n[s];let o=RE.get(e);if(o){if(i==s)throw Kd(`${t} + ${o}`);i=s+1,t=o}}if(i==r)throw Kd(`trailing ${t}`)}function X0(n,e=1/0,t=oC){let r=[];JJ(n[0])&&r.push("◌"),n.length>e&&(e>>=1,n=[...n.slice(0,e),8230,...n.slice(-e)]);let i=0,s=n.length;for(let o=0;o<s;o++){let a=n[o];yC(a)&&(r.push(Uu(n.slice(i,o))),r.push(t(a)),i=o+1)}return r.push(Uu(n.slice(i,s))),r.join("")}function JJ(n,e){return Vx(),e?jm.has(n):Al.has(n)}function yC(n){return Vx(),vC.has(n)}function eee(n){return iee(tee(n,XJ,aee))}function tee(n,e,t){if(!n)return[];Vx();let r=0;return n.split(hC).map(i=>{let s=OJ(i),o={input:s,offset:r};r+=s.length+1;try{let a=o.tokens=oee(s,e,t),l=a.length,c;if(!l)throw new Error("empty label");let u=o.output=a.flat();if(QJ(u),!(o.emoji=l>1||a[0].is_emoji)&&u.every(f=>f<128))YJ(u),c="ASCII";else{let f=a.flatMap(p=>p.is_emoji?[]:p);if(!f.length)c="Emoji";else{if(Al.has(u[0]))throw Kd("leading combining mark");for(let g=1;g<l;g++){let y=a[g];if(!y.is_emoji&&Al.has(y[0]))throw Kd(`emoji + combining mark: "${Uu(a[g-1])} + ${X0([y[0]])}"`)}ZJ(u);let p=$m(new Set(f)),[m]=ree(p);see(m,f),nee(m,p),c=m.N}}o.type=c}catch(a){o.error=a}return o})}function nee(n,e){let t,r=[];for(let i of e){let s=Fc.get(i);if(s===mC)return;if(s){let o=s.M.get(i);if(t=t?t.filter(a=>o.has(a)):$m(o),!t.length)return}else r.push(i)}if(t){for(let i of t)if(r.every(s=>Df(i,s)))throw new Error(`whole-script confusable: ${n.N}/${i.N}`)}}function ree(n){let e=nu;for(let t of n){let r=e.filter(i=>Df(i,t));if(!r.length)throw nu.some(i=>Df(i,t))?bC(e[0],t):_C(t);if(e=r,r.length==1)break}return e}function iee(n){return n.map(({input:e,error:t,output:r})=>{if(t){let i=t.message;throw new Error(n.length==1?i:`Invalid label ${jx(X0(e,63))}: ${i}`)}return Uu(r)}).join(hC)}function _C(n){return new Error(`disallowed character: ${$x(n)}`)}function bC(n,e){let t=$x(e),r=nu.find(i=>i.P.has(e));return r&&(t=`${r.N} ${t}`),new Error(`illegal mixture: ${n.N} + ${t}`)}function Kd(n){return new Error(`illegal placement: ${n}`)}function see(n,e){for(let t of e)if(!Df(n,t))throw bC(n,t);if(n.M){let t=fC(e);for(let r=1,i=t.length;r<i;r++)if(jm.has(t[r])){let s=r+1;for(let o;s<i&&jm.has(o=t[s]);s++)for(let a=r;a<s;a++)if(t[a]==o)throw new Error(`duplicate non-spacing marks: ${$x(o)}`);if(s-r>IE)throw new Error(`excessive non-spacing marks: ${jx(X0(t.slice(r-1,s)))} (${s-r}/${IE})`);r=s}}}function oee(n,e,t){let r=[],i=[];for(n=n.slice().reverse();n.length;){let s=lee(n);if(s)i.length&&(r.push(e(i)),i=[]),r.push(t(s));else{let o=n.pop();if(dl.has(o))i.push(o);else{let a=H_.get(o);if(a)i.push(...a);else if(!gC.has(o))throw _C(o)}}}return i.length&&r.push(e(i)),r}function aee(n){return n.filter(e=>e!=pC)}function lee(n,e){let t=z_,r,i=n.length;for(;i&&(t=t.get(n[--i]),!!t);){let{V:s}=t;s&&(r=s,e&&e.push(...n.slice(i).reverse()),n.length=i)}return r}const cee=n=>eee(n),Ps=n=>{let e="";for(let t=0;t<32;t+=1)e+="00";if(n){const r=cee(n).split(".");for(let i=r.length-1;i>=0;i-=1){const s=bi(r[i]).slice(2);e=bi(`0x${e}${s}`).slice(2)}}return`0x${e}`};var ep=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class uee{constructor(e,t){this.contract=new O_(SJ,t??Um.main,e),this.context=e}getOwner(e){return ep(this,void 0,void 0,function*(){try{return this.contract.methods.owner(Ps(e)).call()}catch{throw new Error}})}getTTL(e){return ep(this,void 0,void 0,function*(){try{return this.contract.methods.ttl(Ps(e)).call()}catch{throw new Error}})}recordExists(e){return ep(this,void 0,void 0,function*(){try{return this.contract.methods.recordExists(Ps(e)).call()}catch{throw new Error}})}getResolver(e){return ep(this,void 0,void 0,function*(){try{return this.contract.methods.resolver(Ps(e)).call().then(t=>{if(typeof t=="string")return new O_(TJ,t,this.context);throw new Error})}catch{throw new Error}})}get events(){return this.contract.events}}var go=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};let dee=class{constructor(e){this.registry=e}getResolverContractAdapter(e){return go(this,void 0,void 0,function*(){return this.registry.getResolver(e)})}checkInterfaceSupport(e,t){var r,i;return go(this,void 0,void 0,function*(){if(dt(ME[t]))throw new C1((r=e.options.address)!==null&&r!==void 0?r:"",t);if(!(yield e.methods.supportsInterface(ME[t]).call()))throw new C1((i=e.options.address)!==null&&i!==void 0?i:"",t)})}supportsInterface(e,t){var r;return go(this,void 0,void 0,function*(){const i=yield this.getResolverContractAdapter(e);let s=t;if(!rn(s)){if(s=(r=rh(t))!==null&&r!==void 0?r:"",t==="")throw new Error("Invalid interface Id");s=s.slice(0,10)}return i.methods.supportsInterface(s).call()})}getAddress(e,t=60){return go(this,void 0,void 0,function*(){const r=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(r,Tc.addr),r.methods.addr(Ps(e),t).call()})}getPubkey(e){return go(this,void 0,void 0,function*(){const t=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(t,Tc.pubkey),t.methods.pubkey(Ps(e)).call()})}getContenthash(e){return go(this,void 0,void 0,function*(){const t=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(t,Tc.contenthash),t.methods.contenthash(Ps(e)).call()})}setAddress(e,t,r){return go(this,void 0,void 0,function*(){const i=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(i,Tc.setAddr),i.methods.setAddr(Ps(e),t).send(r)})}getText(e,t){return go(this,void 0,void 0,function*(){const r=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(r,Tc.text),r.methods.text(Ps(e),t).call()})}getName(e,t=!0){return go(this,void 0,void 0,function*(){const r=`${e.toLowerCase().substring(2)}.addr.reverse`,i=yield this.getResolverContractAdapter(r);return t&&(yield this.checkInterfaceSupport(i,Tc.name)),i.methods.name(Ps(r)).call()})}};var Mi=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class xC extends Qr{constructor(e,t){super(t??""),this.registryAddress=e??Um.main,this._registry=new uee(this.getContextObject(),e),this._resolver=new dee(this._registry)}getResolver(e){return Mi(this,void 0,void 0,function*(){return this._registry.getResolver(e)})}recordExists(e){return Mi(this,void 0,void 0,function*(){return this._registry.recordExists(e)})}getTTL(e){return Mi(this,void 0,void 0,function*(){return this._registry.getTTL(e)})}getOwner(e){return Mi(this,void 0,void 0,function*(){return this._registry.getOwner(e)})}getAddress(e,t=60){return Mi(this,void 0,void 0,function*(){return this._resolver.getAddress(e,t)})}getText(e,t){return Mi(this,void 0,void 0,function*(){return _i(e)?this._resolver.getText(yield this._resolver.getName(e,!1),t):this._resolver.getText(e,t)})}getName(e,t=!0){return Mi(this,void 0,void 0,function*(){return this._resolver.getName(e,t)})}getPubkey(e){return Mi(this,void 0,void 0,function*(){return this._resolver.getPubkey(e)})}getContenthash(e){return Mi(this,void 0,void 0,function*(){return this._resolver.getContenthash(e)})}checkNetwork(){return Mi(this,void 0,void 0,function*(){const e=Date.now()/1e3;if(!this._lastSyncCheck||e-this._lastSyncCheck>3600){const i=yield DZ(this);if(!(typeof i=="boolean"&&!i))throw new P$;this._lastSyncCheck=e}if(this._detectedAddress)return this._detectedAddress;const t=yield Cx(this,Object.assign(Object.assign({},this.defaultReturnFormat),{number:Bi.HEX})),r=Um[EJ[t]];if(typeof r>"u")throw new C$(t);return this._detectedAddress=r,this._detectedAddress})}supportsInterface(e,t){return Mi(this,void 0,void 0,function*(){return this._resolver.supportsInterface(e,t)})}get events(){return this._registry.events}setAddress(e,t,r){return Mi(this,void 0,void 0,function*(){return this._resolver.setAddress(e,t,r)})}}var na=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const fee=n=>na(void 0,void 0,void 0,function*(){return(yield vQ(n)).map(io)}),hee=(n,e)=>na(void 0,void 0,void 0,function*(){at.validate(["string"],[e]);const t=yield yQ(n,e);return io(t)}),pee=(n,e,t,r)=>na(void 0,void 0,void 0,function*(){return at.validate(["address","string","uint"],[e,t,r]),_Q(n,e,t,r)}),mee=(n,e)=>na(void 0,void 0,void 0,function*(){return at.validate(["address"],[e]),bQ(n,e)}),gee=(n,e,t)=>na(void 0,void 0,void 0,function*(){return at.validate(["string","string"],[e,t]),xQ(n,e,t)}),vee=(n,e,t,r)=>na(void 0,void 0,void 0,function*(){const i=ni(e,_t,{transactionSchema:r==null?void 0:r.customTransactionSchema});return wQ(n,i,t)}),yee=(n,e,t,r)=>na(void 0,void 0,void 0,function*(){const i=ni(e,_t,{transactionSchema:r==null?void 0:r.customTransactionSchema});return AQ(n,i,t)}),_ee=(n,e,t,r)=>na(void 0,void 0,void 0,function*(){at.validate(["string","address","string"],[e,t,r]);const i=rn(e)?e:fs(e);return EQ(n,i,t,r)}),bee=(n,e,t)=>na(void 0,void 0,void 0,function*(){at.validate(["string","string"],[e,t]);const r=rn(e)?e:fs(e);return SQ(n,r,t)});var vo=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class wC extends Qr{getAccounts(){return vo(this,void 0,void 0,function*(){return fee(this.requestManager)})}newAccount(e){return vo(this,void 0,void 0,function*(){return hee(this.requestManager,e)})}unlockAccount(e,t,r){return vo(this,void 0,void 0,function*(){return pee(this.requestManager,e,t,r)})}lockAccount(e){return vo(this,void 0,void 0,function*(){return mee(this.requestManager,e)})}importRawKey(e,t){return vo(this,void 0,void 0,function*(){return gee(this.requestManager,e,t)})}sendTransaction(e,t){return vo(this,void 0,void 0,function*(){return vee(this.requestManager,e,t,this.config)})}signTransaction(e,t){return vo(this,void 0,void 0,function*(){return yee(this.requestManager,e,t,this.config)})}sign(e,t,r){return vo(this,void 0,void 0,function*(){return _ee(this.requestManager,e,t,r)})}ecRecover(e,t){return vo(this,void 0,void 0,function*(){return bee(this.requestManager,e,t)})}}var Ls;(function(n){n.HTTPS="https",n.WebSocket="wss"})(Ls||(Ls={}));var Ge;(function(n){n.ETH_MAINNET="eth_mainnet",n.ETH_SEPOLIA="eth_sepolia",n.ETH_HOLESKY="eth_holesky",n.POLYGON_MAINNET="polygon_mainnet",n.POLYGON_AMOY="polygon_amoy",n.AVALANCHE_C_MAINNET="avalanche_c_mainnet",n.AVALANCHE_P_MAINNET="avalanche_p_mainnet",n.AVALANCHE_X_MAINNET="avalanche_x_mainnet",n.ARBITRUM_MAINNET="arbitrum_mainnet",n.ARBITRUM_SEPOLIA="arbitrum_sepolia",n.BASE_MAINNET="base_mainnet",n.BASE_SEPOLIA="base_sepolia",n.OPTIMISM_MAINNET="optimism_mainnet",n.OPTIMISM_SEPOLIA="optimism_sepolia",n.FANTOM_MAINNET="fantom_mainnet",n.FANTOM_TESTNET="fantom_testnet",n.DYMENSION_MAINNET="dymension_mainnet",n.DYMENSION_TESTNET="dymension_testnet",n.BNB_MAINNET="bnb_mainnet",n.BNB_TESTNET="bnb_testnet",n.BSC_MAINNET="bsc_mainnet",n.BSC_TESTNET="bsc_testnet",n.ARBITRUM_ONE="arbitrum_one",n.ARBITRUM_NOVA="arbitrum_nova",n.AVALANCHE_FUJI_C="avalanche_fuji_c",n.AVALANCHE_FUJI_P="avalanche_fuji_p",n.AVALANCHE_FUJI_X="avalanche_fuji_x",n.BLAST_MAINNET="blast_mainnet",n.OPBNB_MAINNET="opbnb_mainnet",n.OPBNB_TESTNET="opbnb_testnet",n.GNOSIS_MAINNET="gnosis_mainnet",n.GNOSIS_CHIADO="gnosis_chiado",n.PULSECHAIN_MAINNET="pulsechain_mainnet",n.PULSECHAIN_TESTNET="pulsechain_testnet",n.KAVA_MAINNET="kava_mainnet",n.CRONOS_MAINNET="cronos_mainnet",n.MANTLE_MAINNET="mantle_mainnet",n.CHILIZ_MAINNET="chiliz_mainnet",n.CHILIZ_SPICY="chiliz_spicy",n.MOONBEAM_MAINNET="moonbeam_mainnet",n.TAIKO_MAINNET="taiko_mainnet",n.TAIKO_HEKLA="taiko_hekla",n.LINEA_MAINNET="linea_mainnet",n.LINEA_SEPOLIA="linea_sepolia",n.BAHAMUT_MAINNET="bahamut_mainnet",n.SCROLL_MAINNET="scroll_mainnet",n.SCROLL_SEPOLIA="scroll_sepolia",n.TRON_MAINNET="tron_mainnet",n.SYSCOIN_MAINNET="syscoin_mainnet",n.SYSCOIN_TANENBAUM="syscoin_tanenbaum",n.MOONRIVER_MAINNET="moonriver_mainnet",n.HAQQ_MAINNET="haqq_mainnet",n.EVMOS_MAINNET="evmos_mainnet",n.EVMOS_TESTNET="evmos_testnet",n.BERACHAIN_TESTNET="berachain_testnet"})(Ge||(Ge={}));const xee=1300;class wee extends vt{constructor(e){super("You've reach the rate limit of free RPC calls from our Partner Quick Nodes. There are two options you can either create a paid Quick Nodes account and get 20% off for 2 months using WEB3JS referral code, or use Free public RPC endpoint.",e),this.code=xee}}const Aee=1301;class kE extends vt{constructor(e){super(`Invalid provider config options given for ${e}`),this.code=Aee}}var Eee=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class AC extends hx{constructor(e,t,r,i,s){if(super(),s!==void 0&&t===Ls.HTTPS&&!("providerOptions"in s))throw new kE("HTTP Provider");if(s!==void 0&&t===Ls.WebSocket&&!("socketOptions"in s||"reconnectOptions"in s))throw new kE("Websocket Provider");this.transport=t,t===Ls.HTTPS?this.provider=new O0(this.getRPCURL(e,t,r,i),s):t===Ls.WebSocket&&(this.provider=new TR(this.getRPCURL(e,t,r,i),s==null?void 0:s.socketOptions,s==null?void 0:s.reconnectOptions))}request(e,t){return Eee(this,void 0,void 0,function*(){return this.transport===Ls.HTTPS?yield this.provider.request(e,t):this.provider.request(e)})}getStatus(){return this.provider.getStatus()}supportsSubscriptions(){return this.provider.supportsSubscriptions()}once(e,t){var r;!((r=this.provider)===null||r===void 0)&&r.once&&this.provider.once(e,t)}removeAllListeners(e){var t;!((t=this.provider)===null||t===void 0)&&t.removeAllListeners&&this.provider.removeAllListeners(e)}connect(){var e;!((e=this.provider)===null||e===void 0)&&e.connect&&this.provider.connect()}disconnect(e,t){var r;!((r=this.provider)===null||r===void 0)&&r.disconnect&&this.provider.disconnect(e,t)}reset(){var e;!((e=this.provider)===null||e===void 0)&&e.reset&&this.provider.reset()}on(e,t){this.provider&&this.provider.on(e,t)}removeListener(e,t){this.provider&&this.provider.removeListener(e,t)}}var See=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const ir=n=>n!==void 0&&n.trim().length>0;class Tee extends AC{constructor(e=Ge.ETH_MAINNET,t=Ls.HTTPS,r="",i="",s){super(e,t,r,i,s)}request(e,t){const r=Object.create(null,{request:{get:()=>super.request}});return See(this,void 0,void 0,function*(){try{return yield r.request.call(this,e,t)}catch(i){throw i instanceof ks&&i.statusCode===429?new wee(i):i}})}getRPCURL(e,t,r,i){let s="",o="";switch(e){case Ge.ETH_MAINNET:s=ir(i)?i:"powerful-holy-bush.quiknode.pro",o=ir(r)?r:"3240624a343867035925ff7561eb60dfdba2a668";break;case Ge.ETH_SEPOLIA:s=ir(i)?i:"dimensional-fabled-glitter.ethereum-sepolia.quiknode.pro",o=ir(r)?r:"382a3b5a4b938f2d6e8686c19af4b22921fde2cd";break;case Ge.ETH_HOLESKY:s=ir(i)?i:"yolo-morning-card.ethereum-holesky.quiknode.pro",o=ir(r)?r:"481ebe70638c4dcf176af617a16d02ab866b9af9";break;case Ge.ARBITRUM_MAINNET:s=ir(i)?i:"autumn-divine-dinghy.arbitrum-mainnet.quiknode.pro",o=ir(r)?r:"a5d7bfbf60b5ae9ce3628e53d69ef50d529e9a8c";break;case Ge.ARBITRUM_SEPOLIA:s=ir(i)?i:"few-patient-pond.arbitrum-sepolia.quiknode.pro",o=ir(r)?r:"3be985450970628c860b959c65cd2642dcafe53c";break;case Ge.BNB_MAINNET:s=ir(i)?i:"purple-empty-reel.bsc.quiknode.pro",o=ir(r)?r:"ebf6c532961e21f092ff2facce1ec4c89c540158";break;case Ge.BNB_TESTNET:s=ir(i)?i:"floral-rough-scion.bsc-testnet.quiknode.pro",o=ir(r)?r:"5b297e5acff5f81f4c37ebf6f235f7299b6f9d28";break;case Ge.POLYGON_MAINNET:s=ir(i)?i:"small-chaotic-moon.matic.quiknode.pro",o=ir(r)?r:"847569f8a017e84d985e10d0f44365d965a951f1";break;case Ge.POLYGON_AMOY:s=ir(i)?i:"prettiest-side-shape.matic-amoy.quiknode.pro",o=ir(r)?r:"79a9476eea661d4f82de614db1d8a895b14b881c";break;default:throw new Error("Network info not avalible.")}return`${t}://${s}/${o}`}}const Mee=n=>n!==void 0&&n.trim().length>0,Ree=[Ge.DYMENSION_MAINNET,Ge.DYMENSION_TESTNET,Ge.KAVA_MAINNET,Ge.CRONOS_MAINNET,Ge.POLYGON_MAINNET];class Wm extends AC{constructor(e=Ge.ETH_MAINNET,t=Ls.HTTPS,r="",i){super(e,t,"",r,i)}getRPCURL(e,t,r,i){if(!Wm.networkHostMap[e])throw new Error("Network info not avalible.");const s=`${Wm.networkHostMap[e]}.publicnode.com`,o=Mee(i)?i:s;return Ree.includes(e)&&t===Ls.WebSocket?`${t}://${o}/websocket`:`${t}://${o}`}}Wm.networkHostMap={[Ge.POLYGON_AMOY]:"polygon-amoy-bor-rpc",[Ge.DYMENSION_MAINNET]:"dymension-evm-rpc",[Ge.DYMENSION_TESTNET]:"dymension-testnet-evm-rpc",[Ge.BLAST_MAINNET]:"blast-rpc",[Ge.GNOSIS_MAINNET]:"gnosis-rpc",[Ge.PULSECHAIN_MAINNET]:"pulsechain-rpc",[Ge.PULSECHAIN_TESTNET]:"pulsechain-testnet-rpc",[Ge.KAVA_MAINNET]:"kava-evm-rpc",[Ge.CRONOS_MAINNET]:"cronos-evm-rpc",[Ge.MANTLE_MAINNET]:"mantle-rpc",[Ge.TAIKO_MAINNET]:"taiko-rpc",[Ge.TAIKO_HEKLA]:"taiko-hekla-rpc",[Ge.LINEA_MAINNET]:"linea-rpc",[Ge.LINEA_SEPOLIA]:"linea-sepolia-rpc",[Ge.SCROLL_MAINNET]:"scroll-rpc",[Ge.SCROLL_SEPOLIA]:"scroll-sepolia-rpc",[Ge.SYSCOIN_MAINNET]:"syscoin-evm-rpc",[Ge.SYSCOIN_TANENBAUM]:"syscoin-tanenbaum-evm-rpc",[Ge.HAQQ_MAINNET]:"haqq-evm-rpc",[Ge.EVMOS_MAINNET]:"evmos-evm-rpc",[Ge.EVMOS_TESTNET]:"evmos-testnet-evm-rpc",[Ge.BERACHAIN_TESTNET]:"berachain-testnet-evm-rpc",[Ge.ETH_MAINNET]:"ethereum-rpc",[Ge.ETH_SEPOLIA]:"ethereum-sepolia-rpc",[Ge.ETH_HOLESKY]:"ethereum-holesky-rpc",[Ge.BSC_MAINNET]:"bsc-rpc",[Ge.BSC_TESTNET]:"bsc-testnet-rpc",[Ge.POLYGON_MAINNET]:"polygon-bor-rpc",[Ge.BASE_MAINNET]:"base-rpc",[Ge.BASE_SEPOLIA]:"base-sepolia-rpc",[Ge.ARBITRUM_ONE]:"arbitrum-one-rpc",[Ge.ARBITRUM_NOVA]:"arbitrum-nova-rpc",[Ge.ARBITRUM_SEPOLIA]:"arbitrum-sepolia-rpc",[Ge.AVALANCHE_C_MAINNET]:"avalanche-c-chain-rpc",[Ge.AVALANCHE_P_MAINNET]:"avalanche-p-chain-rpc",[Ge.AVALANCHE_X_MAINNET]:"avalanche-x-chain-rpc",[Ge.AVALANCHE_FUJI_C]:"avalanche-fuji-c-chain-rpc",[Ge.AVALANCHE_FUJI_P]:"avalanche-fuji-p-chain-rpc",[Ge.AVALANCHE_FUJI_X]:"avalanche-fuji-x-chain-rpc",[Ge.OPTIMISM_MAINNET]:"optimism-rpc",[Ge.OPTIMISM_SEPOLIA]:"optimism-sepolia-rpc",[Ge.FANTOM_MAINNET]:"fantom-rpc",[Ge.FANTOM_TESTNET]:"fantom-testnet-rpc",[Ge.OPBNB_MAINNET]:"opbnb-rpc",[Ge.OPBNB_TESTNET]:"opbnb-testnet-rpc",[Ge.GNOSIS_CHIADO]:"gnosis-chiado-rpc",[Ge.CHILIZ_MAINNET]:"chiliz-rpc",[Ge.CHILIZ_SPICY]:"chiliz-spicy-rpc",[Ge.MOONBEAM_MAINNET]:"moonbeam-rpc",[Ge.BAHAMUT_MAINNET]:"bahamut-rpc",[Ge.TRON_MAINNET]:"tron-evm-rpc",[Ge.MOONRIVER_MAINNET]:"moonriver-rpc"};const Iee=new Tee,Cee={encodeEventSignature:Bx,encodeFunctionCall:IZ,encodeFunctionSignature:Pf,encodeParameter:k_,encodeParameters:j0,decodeParameter:GI,decodeParameters:Cl,decodeLog:VI};var Td=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Pee=n=>{const e=(o,a)=>Td(void 0,void 0,void 0,function*(){const l=yield mJ(o,n),c=_e({format:"bytes"},a,_t);return mY(l,c)}),t=o=>{const a=Tx(o);return Object.assign(Object.assign({},a),{signTransaction:l=>Td(void 0,void 0,void 0,function*(){return e(l,a.privateKey)})})},r=(o,a,l)=>Td(void 0,void 0,void 0,function*(){var c;const u=yield _Y(o,a,(c=l==null?void 0:l.nonStrict)!==null&&c!==void 0?c:!0);return Object.assign(Object.assign({},u),{signTransaction:d=>Td(void 0,void 0,void 0,function*(){return e(d,u.privateKey)})})}),i=()=>{const o=yY();return Object.assign(Object.assign({},o),{signTransaction:a=>Td(void 0,void 0,void 0,function*(){return e(a,o.privateKey)})})},s=new Cm({create:i,privateKeyToAccount:t,decrypt:r});return{signTransaction:e,create:i,privateKeyToAccount:t,decrypt:r,recoverTransaction:gY,hashMessage:Sx,sign:aI,recover:E_,encrypt:lI,wallet:s,privateKeyToAddress:z0,parseAndValidatePrivateKey:nd,privateKeyToPublicKey:vY}},Nee={version:"4.16.0"};var kee=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},qm;(function(n){n.eip6963announceProvider="eip6963:announceProvider",n.eip6963requestProvider="eip6963:requestProvider"})(qm||(qm={}));const vv=new Map,EC="web3:providersMapUpdated",Bee=()=>kee(void 0,void 0,void 0,function*(){return new Promise((n,e)=>{typeof window>"u"&&e(new Error("window object not available, EIP-6963 is intended to be used within a browser")),window.addEventListener(qm.eip6963announceProvider,t=>{vv.set(t.detail.info.uuid,t.detail);const r=new CustomEvent(EC,{detail:vv});window.dispatchEvent(r),n(vv)}),window.dispatchEvent(new Event(qm.eip6963requestProvider))})}),Lee=n=>{if(typeof window>"u")throw new Error("window object not available, EIP-6963 is intended to be used within a browser");window.addEventListener(EC,n)};class od extends Qr{constructor(e=Iee){var t;dt(e)||typeof e=="string"&&e.trim()===""||typeof e!="string"&&!Rm(e)&&e.provider;let r={};typeof e=="string"||Rm(e)?r.provider=e:e?r=e:r={},r.registeredSubscriptions=Object.assign(Object.assign({},L_),(t=r.registeredSubscriptions)!==null&&t!==void 0?t:{}),super(r);const i=Pee(this);this._wallet=i.wallet,this._accountProvider=i,this.utils=SR;const s=this;class o extends O_{constructor(c,u,d,f,p){if(Ma(u)&&Ma(d))throw new P1("Should not provide options at both 2nd and 3rd parameters");let m,g={},y,h;if(!dt(u)&&typeof u!="object"&&typeof u!="string")throw new P1;if(typeof u=="string"&&(m=u),Ma(u)?g=u:Ma(d)?g=d:g={},u instanceof Qr?y=u:d instanceof Qr?y=d:f instanceof Qr?y=f:y=s.getContextObject(),p?h=p:So(d)?h=d:So(f)&&(h=f),super(c,m,g,y,h),super.subscribeToContextEvents(s),!dt(a)){const w=a.getTransactionMiddleware();dt(w)||super.setTransactionMiddleware(w)}}}const a=s.use(W0);this.eth=Object.assign(a,{ens:s.use(xC,Um.main),Iban:Vn,net:s.use(gI),personal:s.use(wC),Contract:o,abi:Cee,accounts:i})}}od.version=Nee.version;od.utils=SR;od.requestEIP6963Providers=Bee;od.onNewProviderDiscovered=Lee;od.modules={Web3Eth:W0,Iban:Vn,Net:gI,ENS:xC,Personal:wC};var Wx={exports:{}},SC=function(e,t){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(t,i)}},Dee=SC,qx=Object.prototype.toString,Xx=function(n){return function(e){var t=qx.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())}}(Object.create(null));function rc(n){return n=n.toLowerCase(),function(t){return Xx(t)===n}}function Kx(n){return Array.isArray(n)}function Xm(n){return typeof n>"u"}function Oee(n){return n!==null&&!Xm(n)&&n.constructor!==null&&!Xm(n.constructor)&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}var TC=rc("ArrayBuffer");function Fee(n){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&TC(n.buffer),e}function Uee(n){return typeof n=="string"}function Hee(n){return typeof n=="number"}function MC(n){return n!==null&&typeof n=="object"}function Mp(n){if(Xx(n)!=="object")return!1;var e=Object.getPrototypeOf(n);return e===null||e===Object.prototype}var zee=rc("Date"),Gee=rc("File"),Vee=rc("Blob"),$ee=rc("FileList");function Yx(n){return qx.call(n)==="[object Function]"}function jee(n){return MC(n)&&Yx(n.pipe)}function Wee(n){var e="[object FormData]";return n&&(typeof FormData=="function"&&n instanceof FormData||qx.call(n)===e||Yx(n.toString)&&n.toString()===e)}var qee=rc("URLSearchParams");function Xee(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function Kee(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Qx(n,e){if(!(n===null||typeof n>"u"))if(typeof n!="object"&&(n=[n]),Kx(n))for(var t=0,r=n.length;t<r;t++)e.call(null,n[t],t,n);else for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.call(null,n[i],i,n)}function G_(){var n={};function e(i,s){Mp(n[s])&&Mp(i)?n[s]=G_(n[s],i):Mp(i)?n[s]=G_({},i):Kx(i)?n[s]=i.slice():n[s]=i}for(var t=0,r=arguments.length;t<r;t++)Qx(arguments[t],e);return n}function Yee(n,e,t){return Qx(e,function(i,s){t&&typeof i=="function"?n[s]=Dee(i,t):n[s]=i}),n}function Qee(n){return n.charCodeAt(0)===65279&&(n=n.slice(1)),n}function Zee(n,e,t,r){n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,t&&Object.assign(n.prototype,t)}function Jee(n,e,t){var r,i,s,o={};e=e||{};do{for(r=Object.getOwnPropertyNames(n),i=r.length;i-- >0;)s=r[i],o[s]||(e[s]=n[s],o[s]=!0);n=Object.getPrototypeOf(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e}function ete(n,e,t){n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;var r=n.indexOf(e,t);return r!==-1&&r===t}function tte(n){if(!n)return null;var e=n.length;if(Xm(e))return null;for(var t=new Array(e);e-- >0;)t[e]=n[e];return t}var nte=function(n){return function(e){return n&&e instanceof n}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),_r={isArray:Kx,isArrayBuffer:TC,isBuffer:Oee,isFormData:Wee,isArrayBufferView:Fee,isString:Uee,isNumber:Hee,isObject:MC,isPlainObject:Mp,isUndefined:Xm,isDate:zee,isFile:Gee,isBlob:Vee,isFunction:Yx,isStream:jee,isURLSearchParams:qee,isStandardBrowserEnv:Kee,forEach:Qx,merge:G_,extend:Yee,trim:Xee,stripBOM:Qee,inherits:Zee,toFlatObject:Jee,kindOf:Xx,kindOfTest:rc,endsWith:ete,toArray:tte,isTypedArray:nte,isFileList:$ee},Mc=_r;function BE(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var RC=function(e,t,r){if(!t)return e;var i;if(r)i=r(t);else if(Mc.isURLSearchParams(t))i=t.toString();else{var s=[];Mc.forEach(t,function(l,c){l===null||typeof l>"u"||(Mc.isArray(l)?c=c+"[]":l=[l],Mc.forEach(l,function(d){Mc.isDate(d)?d=d.toISOString():Mc.isObject(d)&&(d=JSON.stringify(d)),s.push(BE(c)+"="+BE(d))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},rte=_r;function K0(){this.handlers=[]}K0.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};K0.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};K0.prototype.forEach=function(e){rte.forEach(this.handlers,function(r){r!==null&&e(r)})};var ite=K0,ste=_r,ote=function(e,t){ste.forEach(e,function(i,s){s!==t&&s.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[s])})},IC=_r;function zu(n,e,t,r,i){Error.call(this),this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i)}IC.inherits(zu,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var CC=zu.prototype,PC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(n){PC[n]={value:n}});Object.defineProperties(zu,PC);Object.defineProperty(CC,"isAxiosError",{value:!0});zu.from=function(n,e,t,r,i,s){var o=Object.create(CC);return IC.toFlatObject(n,o,function(l){return l!==Error.prototype}),zu.call(o,n.message,e,t,r,i),o.name=n.name,s&&Object.assign(o,s),o};var ad=zu,NC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Xi=_r;function ate(n,e){e=e||new FormData;var t=[];function r(s){return s===null?"":Xi.isDate(s)?s.toISOString():Xi.isArrayBuffer(s)||Xi.isTypedArray(s)?typeof Blob=="function"?new Blob([s]):Buffer.from(s):s}function i(s,o){if(Xi.isPlainObject(s)||Xi.isArray(s)){if(t.indexOf(s)!==-1)throw Error("Circular reference detected in "+o);t.push(s),Xi.forEach(s,function(l,c){if(!Xi.isUndefined(l)){var u=o?o+"."+c:c,d;if(l&&!o&&typeof l=="object"){if(Xi.endsWith(c,"{}"))l=JSON.stringify(l);else if(Xi.endsWith(c,"[]")&&(d=Xi.toArray(l))){d.forEach(function(f){!Xi.isUndefined(f)&&e.append(u,r(f))});return}}i(l,u)}}),t.pop()}else e.append(o,r(s))}return i(n),e}var kC=ate,yv,LE;function lte(){if(LE)return yv;LE=1;var n=ad;return yv=function(t,r,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?t(i):r(new n("Request failed with status code "+i.status,[n.ERR_BAD_REQUEST,n.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},yv}var _v,DE;function cte(){if(DE)return _v;DE=1;var n=_r;return _v=n.isStandardBrowserEnv()?function(){return{write:function(r,i,s,o,a,l){var c=[];c.push(r+"="+encodeURIComponent(i)),n.isNumber(s)&&c.push("expires="+new Date(s).toGMTString()),n.isString(o)&&c.push("path="+o),n.isString(a)&&c.push("domain="+a),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){var i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),_v}var ute=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},dte=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},fte=ute,hte=dte,BC=function(e,t){return e&&!fte(t)?hte(e,t):t},bv,OE;function pte(){if(OE)return bv;OE=1;var n=_r,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return bv=function(r){var i={},s,o,a;return r&&n.forEach(r.split(`
`),function(c){if(a=c.indexOf(":"),s=n.trim(c.substr(0,a)).toLowerCase(),o=n.trim(c.substr(a+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([o]):i[s]=i[s]?i[s]+", "+o:o}}),i},bv}var xv,FE;function mte(){if(FE)return xv;FE=1;var n=_r;return xv=n.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),i;function s(o){var a=o;return t&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=s(window.location.href),function(a){var l=n.isString(a)?s(a):a;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}(),xv}var wv,UE;function Y0(){if(UE)return wv;UE=1;var n=ad,e=_r;function t(r){n.call(this,r??"canceled",n.ERR_CANCELED),this.name="CanceledError"}return e.inherits(t,n,{__CANCEL__:!0}),wv=t,wv}var Av,HE;function gte(){return HE||(HE=1,Av=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}),Av}var Ev,zE;function GE(){if(zE)return Ev;zE=1;var n=_r,e=lte(),t=cte(),r=RC,i=BC,s=pte(),o=mte(),a=NC,l=ad,c=Y0(),u=gte();return Ev=function(f){return new Promise(function(m,g){var y=f.data,h=f.headers,w=f.responseType,M;function S(){f.cancelToken&&f.cancelToken.unsubscribe(M),f.signal&&f.signal.removeEventListener("abort",M)}n.isFormData(y)&&n.isStandardBrowserEnv()&&delete h["Content-Type"];var C=new XMLHttpRequest;if(f.auth){var k=f.auth.username||"",F=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";h.Authorization="Basic "+btoa(k+":"+F)}var N=i(f.baseURL,f.url);C.open(f.method.toUpperCase(),r(N,f.params,f.paramsSerializer),!0),C.timeout=f.timeout;function B(){if(C){var G="getAllResponseHeaders"in C?s(C.getAllResponseHeaders()):null,R=!w||w==="text"||w==="json"?C.responseText:C.response,v={data:R,status:C.status,statusText:C.statusText,headers:G,config:f,request:C};e(function(b){m(b),S()},function(b){g(b),S()},v),C=null}}if("onloadend"in C?C.onloadend=B:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(B)},C.onabort=function(){C&&(g(new l("Request aborted",l.ECONNABORTED,f,C)),C=null)},C.onerror=function(){g(new l("Network Error",l.ERR_NETWORK,f,C,C)),C=null},C.ontimeout=function(){var R=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded",v=f.transitional||a;f.timeoutErrorMessage&&(R=f.timeoutErrorMessage),g(new l(R,v.clarifyTimeoutError?l.ETIMEDOUT:l.ECONNABORTED,f,C)),C=null},n.isStandardBrowserEnv()){var I=(f.withCredentials||o(N))&&f.xsrfCookieName?t.read(f.xsrfCookieName):void 0;I&&(h[f.xsrfHeaderName]=I)}"setRequestHeader"in C&&n.forEach(h,function(R,v){typeof y>"u"&&v.toLowerCase()==="content-type"?delete h[v]:C.setRequestHeader(v,R)}),n.isUndefined(f.withCredentials)||(C.withCredentials=!!f.withCredentials),w&&w!=="json"&&(C.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&C.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",f.onUploadProgress),(f.cancelToken||f.signal)&&(M=function(G){C&&(g(!G||G&&G.type?new c:G),C.abort(),C=null)},f.cancelToken&&f.cancelToken.subscribe(M),f.signal&&(f.signal.aborted?M():f.signal.addEventListener("abort",M))),y||(y=null);var U=u(N);if(U&&["http","https","file"].indexOf(U)===-1){g(new l("Unsupported protocol "+U+":",l.ERR_BAD_REQUEST,f));return}C.send(y)})},Ev}var Sv,VE;function vte(){return VE||(VE=1,Sv=null),Sv}var sr=_r,$E=ote,jE=ad,yte=NC,_te=kC,bte={"Content-Type":"application/x-www-form-urlencoded"};function WE(n,e){!sr.isUndefined(n)&&sr.isUndefined(n["Content-Type"])&&(n["Content-Type"]=e)}function xte(){var n;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(n=GE()),n}function wte(n,e,t){if(sr.isString(n))try{return(e||JSON.parse)(n),sr.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}var Q0={transitional:yte,adapter:xte(),transformRequest:[function(e,t){if($E(t,"Accept"),$E(t,"Content-Type"),sr.isFormData(e)||sr.isArrayBuffer(e)||sr.isBuffer(e)||sr.isStream(e)||sr.isFile(e)||sr.isBlob(e))return e;if(sr.isArrayBufferView(e))return e.buffer;if(sr.isURLSearchParams(e))return WE(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var r=sr.isObject(e),i=t&&t["Content-Type"],s;if((s=sr.isFileList(e))||r&&i==="multipart/form-data"){var o=this.env&&this.env.FormData;return _te(s?{"files[]":e}:e,o&&new o)}else if(r||i==="application/json")return WE(t,"application/json"),wte(e);return e}],transformResponse:[function(e){var t=this.transitional||Q0.transitional,r=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,s=!r&&this.responseType==="json";if(s||i&&sr.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?jE.from(o,jE.ERR_BAD_RESPONSE,this,null,this.response):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vte()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};sr.forEach(["delete","get","head"],function(e){Q0.headers[e]={}});sr.forEach(["post","put","patch"],function(e){Q0.headers[e]=sr.merge(bte)});var Zx=Q0,Ate=_r,Ete=Zx,Ste=function(e,t,r){var i=this||Ete;return Ate.forEach(r,function(o){e=o.call(i,e,t)}),e},Tv,qE;function LC(){return qE||(qE=1,Tv=function(e){return!!(e&&e.__CANCEL__)}),Tv}var XE=_r,Mv=Ste,Tte=LC(),Mte=Zx,Rte=Y0();function Rv(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Rte}var Ite=function(e){Rv(e),e.headers=e.headers||{},e.data=Mv.call(e,e.data,e.headers,e.transformRequest),e.headers=XE.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),XE.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var t=e.adapter||Mte.adapter;return t(e).then(function(i){return Rv(e),i.data=Mv.call(e,i.data,i.headers,e.transformResponse),i},function(i){return Tte(i)||(Rv(e),i&&i.response&&(i.response.data=Mv.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},li=_r,DC=function(e,t){t=t||{};var r={};function i(u,d){return li.isPlainObject(u)&&li.isPlainObject(d)?li.merge(u,d):li.isPlainObject(d)?li.merge({},d):li.isArray(d)?d.slice():d}function s(u){if(li.isUndefined(t[u])){if(!li.isUndefined(e[u]))return i(void 0,e[u])}else return i(e[u],t[u])}function o(u){if(!li.isUndefined(t[u]))return i(void 0,t[u])}function a(u){if(li.isUndefined(t[u])){if(!li.isUndefined(e[u]))return i(void 0,e[u])}else return i(void 0,t[u])}function l(u){if(u in t)return i(e[u],t[u]);if(u in e)return i(void 0,e[u])}var c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l};return li.forEach(Object.keys(e).concat(Object.keys(t)),function(d){var f=c[d]||s,p=f(d);li.isUndefined(p)&&f!==l||(r[d]=p)}),r},Iv,KE;function OC(){return KE||(KE=1,Iv={version:"0.27.2"}),Iv}var Cte=OC().version,xa=ad,Jx={};["object","boolean","number","function","string","symbol"].forEach(function(n,e){Jx[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});var YE={};Jx.transitional=function(e,t,r){function i(s,o){return"[Axios v"+Cte+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return function(s,o,a){if(e===!1)throw new xa(i(o," has been removed"+(t?" in "+t:"")),xa.ERR_DEPRECATED);return t&&!YE[o]&&(YE[o]=!0),e?e(s,o,a):!0}};function Pte(n,e,t){if(typeof n!="object")throw new xa("options must be an object",xa.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(n),i=r.length;i-- >0;){var s=r[i],o=e[s];if(o){var a=n[s],l=a===void 0||o(a,s,n);if(l!==!0)throw new xa("option "+s+" must be "+l,xa.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new xa("Unknown option "+s,xa.ERR_BAD_OPTION)}}var Nte={assertOptions:Pte,validators:Jx},FC=_r,kte=RC,QE=ite,ZE=Ite,Z0=DC,Bte=BC,UC=Nte,Rc=UC.validators;function Gu(n){this.defaults=n,this.interceptors={request:new QE,response:new QE}}Gu.prototype.request=function(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Z0(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&UC.assertOptions(r,{silentJSONParsing:Rc.transitional(Rc.boolean),forcedJSONParsing:Rc.transitional(Rc.boolean),clarifyTimeoutError:Rc.transitional(Rc.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(t)===!1||(s=s&&p.synchronous,i.unshift(p.fulfilled,p.rejected))});var o=[];this.interceptors.response.forEach(function(p){o.push(p.fulfilled,p.rejected)});var a;if(!s){var l=[ZE,void 0];for(Array.prototype.unshift.apply(l,i),l=l.concat(o),a=Promise.resolve(t);l.length;)a=a.then(l.shift(),l.shift());return a}for(var c=t;i.length;){var u=i.shift(),d=i.shift();try{c=u(c)}catch(f){d(f);break}}try{a=ZE(c)}catch(f){return Promise.reject(f)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};Gu.prototype.getUri=function(e){e=Z0(this.defaults,e);var t=Bte(e.baseURL,e.url);return kte(t,e.params,e.paramsSerializer)};FC.forEach(["delete","get","head","options"],function(e){Gu.prototype[e]=function(t,r){return this.request(Z0(r||{},{method:e,url:t,data:(r||{}).data}))}});FC.forEach(["post","put","patch"],function(e){function t(r){return function(s,o,a){return this.request(Z0(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Gu.prototype[e]=t(),Gu.prototype[e+"Form"]=t(!0)});var Lte=Gu,Cv,JE;function Dte(){if(JE)return Cv;JE=1;var n=Y0();function e(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(o){r=o});var i=this;this.promise.then(function(s){if(i._listeners){var o,a=i._listeners.length;for(o=0;o<a;o++)i._listeners[o](s);i._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(l){i.subscribe(l),o=l}).then(s);return a.cancel=function(){i.unsubscribe(o)},a},t(function(o){i.reason||(i.reason=new n(o),r(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]},e.prototype.unsubscribe=function(r){if(this._listeners){var i=this._listeners.indexOf(r);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var r,i=new e(function(o){r=o});return{token:i,cancel:r}},Cv=e,Cv}var Pv,eS;function Ote(){return eS||(eS=1,Pv=function(e){return function(r){return e.apply(null,r)}}),Pv}var Nv,tS;function Fte(){if(tS)return Nv;tS=1;var n=_r;return Nv=function(t){return n.isObject(t)&&t.isAxiosError===!0},Nv}var nS=_r,Ute=SC,Rp=Lte,Hte=DC,zte=Zx;function HC(n){var e=new Rp(n),t=Ute(Rp.prototype.request,e);return nS.extend(t,Rp.prototype,e),nS.extend(t,e),t.create=function(i){return HC(Hte(n,i))},t}var ri=HC(zte);ri.Axios=Rp;ri.CanceledError=Y0();ri.CancelToken=Dte();ri.isCancel=LC();ri.VERSION=OC().version;ri.toFormData=kC;ri.AxiosError=ad;ri.Cancel=ri.CanceledError;ri.all=function(e){return Promise.all(e)};ri.spread=Ote();ri.isAxiosError=Fte();Wx.exports=ri;Wx.exports.default=ri;var Gte=Wx.exports,Vte=Gte;const zC=Jl(Vte);var ew={exports:{}};const $te={},jte=Object.freeze(Object.defineProperty({__proto__:null,default:$te},Symbol.toStringTag,{value:"Module"})),Wte=EN(jte);ew.exports;(function(n){(function(e,t){function r(R,v){if(!R)throw new Error(v||"Assertion failed")}function i(R,v){R.super_=v;var _=function(){};_.prototype=v.prototype,R.prototype=new _,R.prototype.constructor=R}function s(R,v,_){if(s.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,R!==null&&((v==="le"||v==="be")&&(_=v,v=10),this._init(R||0,v||10,_||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Wte.Buffer}catch{}s.isBN=function(v){return v instanceof s?!0:v!==null&&typeof v=="object"&&v.constructor.wordSize===s.wordSize&&Array.isArray(v.words)},s.max=function(v,_){return v.cmp(_)>0?v:_},s.min=function(v,_){return v.cmp(_)<0?v:_},s.prototype._init=function(v,_,b){if(typeof v=="number")return this._initNumber(v,_,b);if(typeof v=="object")return this._initArray(v,_,b);_==="hex"&&(_=16),r(_===(_|0)&&_>=2&&_<=36),v=v.toString().replace(/\s+/g,"");var A=0;v[0]==="-"&&(A++,this.negative=1),A<v.length&&(_===16?this._parseHex(v,A,b):(this._parseBase(v,_,A),b==="le"&&this._initArray(this.toArray(),_,b)))},s.prototype._initNumber=function(v,_,b){v<0&&(this.negative=1,v=-v),v<67108864?(this.words=[v&67108863],this.length=1):v<4503599627370496?(this.words=[v&67108863,v/67108864&67108863],this.length=2):(r(v<9007199254740992),this.words=[v&67108863,v/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),_,b)},s.prototype._initArray=function(v,_,b){if(r(typeof v.length=="number"),v.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(v.length/3),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var T,D,V=0;if(b==="be")for(A=v.length-1,T=0;A>=0;A-=3)D=v[A]|v[A-1]<<8|v[A-2]<<16,this.words[T]|=D<<V&67108863,this.words[T+1]=D>>>26-V&67108863,V+=24,V>=26&&(V-=26,T++);else if(b==="le")for(A=0,T=0;A<v.length;A+=3)D=v[A]|v[A+1]<<8|v[A+2]<<16,this.words[T]|=D<<V&67108863,this.words[T+1]=D>>>26-V&67108863,V+=24,V>=26&&(V-=26,T++);return this._strip()};function a(R,v){var _=R.charCodeAt(v);if(_>=48&&_<=57)return _-48;if(_>=65&&_<=70)return _-55;if(_>=97&&_<=102)return _-87;r(!1,"Invalid character in "+R)}function l(R,v,_){var b=a(R,_);return _-1>=v&&(b|=a(R,_-1)<<4),b}s.prototype._parseHex=function(v,_,b){this.length=Math.ceil((v.length-_)/6),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var T=0,D=0,V;if(b==="be")for(A=v.length-1;A>=_;A-=2)V=l(v,_,A)<<T,this.words[D]|=V&67108863,T>=18?(T-=18,D+=1,this.words[D]|=V>>>26):T+=8;else{var O=v.length-_;for(A=O%2===0?_+1:_;A<v.length;A+=2)V=l(v,_,A)<<T,this.words[D]|=V&67108863,T>=18?(T-=18,D+=1,this.words[D]|=V>>>26):T+=8}this._strip()};function c(R,v,_,b){for(var A=0,T=0,D=Math.min(R.length,_),V=v;V<D;V++){var O=R.charCodeAt(V)-48;A*=b,O>=49?T=O-49+10:O>=17?T=O-17+10:T=O,r(O>=0&&T<b,"Invalid character"),A+=T}return A}s.prototype._parseBase=function(v,_,b){this.words=[0],this.length=1;for(var A=0,T=1;T<=67108863;T*=_)A++;A--,T=T/_|0;for(var D=v.length-b,V=D%A,O=Math.min(D,D-V)+b,x=0,$=b;$<O;$+=A)x=c(v,$,$+A,_),this.imuln(T),this.words[0]+x<67108864?this.words[0]+=x:this._iaddn(x);if(V!==0){var K=1;for(x=c(v,$,v.length,_),$=0;$<V;$++)K*=_;this.imuln(K),this.words[0]+x<67108864?this.words[0]+=x:this._iaddn(x)}this._strip()},s.prototype.copy=function(v){v.words=new Array(this.length);for(var _=0;_<this.length;_++)v.words[_]=this.words[_];v.length=this.length,v.negative=this.negative,v.red=this.red};function u(R,v){R.words=v.words,R.length=v.length,R.negative=v.negative,R.red=v.red}if(s.prototype._move=function(v){u(v,this)},s.prototype.clone=function(){var v=new s(null);return this.copy(v),v},s.prototype._expand=function(v){for(;this.length<v;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch{s.prototype.inspect=d}else s.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(v,_){v=v||10,_=_|0||1;var b;if(v===16||v==="hex"){b="";for(var A=0,T=0,D=0;D<this.length;D++){var V=this.words[D],O=((V<<A|T)&16777215).toString(16);T=V>>>24-A&16777215,A+=2,A>=26&&(A-=26,D--),T!==0||D!==this.length-1?b=f[6-O.length]+O+b:b=O+b}for(T!==0&&(b=T.toString(16)+b);b.length%_!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(v===(v|0)&&v>=2&&v<=36){var x=p[v],$=m[v];b="";var K=this.clone();for(K.negative=0;!K.isZero();){var E=K.modrn($).toString(v);K=K.idivn($),K.isZero()?b=E+b:b=f[x-E.length]+E+b}for(this.isZero()&&(b="0"+b);b.length%_!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var v=this.words[0];return this.length===2?v+=this.words[1]*67108864:this.length===3&&this.words[2]===1?v+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-v:v},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(v,_){return this.toArrayLike(o,v,_)}),s.prototype.toArray=function(v,_){return this.toArrayLike(Array,v,_)};var g=function(v,_){return v.allocUnsafe?v.allocUnsafe(_):new v(_)};s.prototype.toArrayLike=function(v,_,b){this._strip();var A=this.byteLength(),T=b||Math.max(1,A);r(A<=T,"byte array longer than desired length"),r(T>0,"Requested array length <= 0");var D=g(v,T),V=_==="le"?"LE":"BE";return this["_toArrayLike"+V](D,A),D},s.prototype._toArrayLikeLE=function(v,_){for(var b=0,A=0,T=0,D=0;T<this.length;T++){var V=this.words[T]<<D|A;v[b++]=V&255,b<v.length&&(v[b++]=V>>8&255),b<v.length&&(v[b++]=V>>16&255),D===6?(b<v.length&&(v[b++]=V>>24&255),A=0,D=0):(A=V>>>24,D+=2)}if(b<v.length)for(v[b++]=A;b<v.length;)v[b++]=0},s.prototype._toArrayLikeBE=function(v,_){for(var b=v.length-1,A=0,T=0,D=0;T<this.length;T++){var V=this.words[T]<<D|A;v[b--]=V&255,b>=0&&(v[b--]=V>>8&255),b>=0&&(v[b--]=V>>16&255),D===6?(b>=0&&(v[b--]=V>>24&255),A=0,D=0):(A=V>>>24,D+=2)}if(b>=0)for(v[b--]=A;b>=0;)v[b--]=0},Math.clz32?s.prototype._countBits=function(v){return 32-Math.clz32(v)}:s.prototype._countBits=function(v){var _=v,b=0;return _>=4096&&(b+=13,_>>>=13),_>=64&&(b+=7,_>>>=7),_>=8&&(b+=4,_>>>=4),_>=2&&(b+=2,_>>>=2),b+_},s.prototype._zeroBits=function(v){if(v===0)return 26;var _=v,b=0;return _&8191||(b+=13,_>>>=13),_&127||(b+=7,_>>>=7),_&15||(b+=4,_>>>=4),_&3||(b+=2,_>>>=2),_&1||b++,b},s.prototype.bitLength=function(){var v=this.words[this.length-1],_=this._countBits(v);return(this.length-1)*26+_};function y(R){for(var v=new Array(R.bitLength()),_=0;_<v.length;_++){var b=_/26|0,A=_%26;v[_]=R.words[b]>>>A&1}return v}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var v=0,_=0;_<this.length;_++){var b=this._zeroBits(this.words[_]);if(v+=b,b!==26)break}return v},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(v){return this.negative!==0?this.abs().inotn(v).iaddn(1):this.clone()},s.prototype.fromTwos=function(v){return this.testn(v-1)?this.notn(v).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(v){for(;this.length<v.length;)this.words[this.length++]=0;for(var _=0;_<v.length;_++)this.words[_]=this.words[_]|v.words[_];return this._strip()},s.prototype.ior=function(v){return r((this.negative|v.negative)===0),this.iuor(v)},s.prototype.or=function(v){return this.length>v.length?this.clone().ior(v):v.clone().ior(this)},s.prototype.uor=function(v){return this.length>v.length?this.clone().iuor(v):v.clone().iuor(this)},s.prototype.iuand=function(v){var _;this.length>v.length?_=v:_=this;for(var b=0;b<_.length;b++)this.words[b]=this.words[b]&v.words[b];return this.length=_.length,this._strip()},s.prototype.iand=function(v){return r((this.negative|v.negative)===0),this.iuand(v)},s.prototype.and=function(v){return this.length>v.length?this.clone().iand(v):v.clone().iand(this)},s.prototype.uand=function(v){return this.length>v.length?this.clone().iuand(v):v.clone().iuand(this)},s.prototype.iuxor=function(v){var _,b;this.length>v.length?(_=this,b=v):(_=v,b=this);for(var A=0;A<b.length;A++)this.words[A]=_.words[A]^b.words[A];if(this!==_)for(;A<_.length;A++)this.words[A]=_.words[A];return this.length=_.length,this._strip()},s.prototype.ixor=function(v){return r((this.negative|v.negative)===0),this.iuxor(v)},s.prototype.xor=function(v){return this.length>v.length?this.clone().ixor(v):v.clone().ixor(this)},s.prototype.uxor=function(v){return this.length>v.length?this.clone().iuxor(v):v.clone().iuxor(this)},s.prototype.inotn=function(v){r(typeof v=="number"&&v>=0);var _=Math.ceil(v/26)|0,b=v%26;this._expand(_),b>0&&_--;for(var A=0;A<_;A++)this.words[A]=~this.words[A]&67108863;return b>0&&(this.words[A]=~this.words[A]&67108863>>26-b),this._strip()},s.prototype.notn=function(v){return this.clone().inotn(v)},s.prototype.setn=function(v,_){r(typeof v=="number"&&v>=0);var b=v/26|0,A=v%26;return this._expand(b+1),_?this.words[b]=this.words[b]|1<<A:this.words[b]=this.words[b]&~(1<<A),this._strip()},s.prototype.iadd=function(v){var _;if(this.negative!==0&&v.negative===0)return this.negative=0,_=this.isub(v),this.negative^=1,this._normSign();if(this.negative===0&&v.negative!==0)return v.negative=0,_=this.isub(v),v.negative=1,_._normSign();var b,A;this.length>v.length?(b=this,A=v):(b=v,A=this);for(var T=0,D=0;D<A.length;D++)_=(b.words[D]|0)+(A.words[D]|0)+T,this.words[D]=_&67108863,T=_>>>26;for(;T!==0&&D<b.length;D++)_=(b.words[D]|0)+T,this.words[D]=_&67108863,T=_>>>26;if(this.length=b.length,T!==0)this.words[this.length]=T,this.length++;else if(b!==this)for(;D<b.length;D++)this.words[D]=b.words[D];return this},s.prototype.add=function(v){var _;return v.negative!==0&&this.negative===0?(v.negative=0,_=this.sub(v),v.negative^=1,_):v.negative===0&&this.negative!==0?(this.negative=0,_=v.sub(this),this.negative=1,_):this.length>v.length?this.clone().iadd(v):v.clone().iadd(this)},s.prototype.isub=function(v){if(v.negative!==0){v.negative=0;var _=this.iadd(v);return v.negative=1,_._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(v),this.negative=1,this._normSign();var b=this.cmp(v);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var A,T;b>0?(A=this,T=v):(A=v,T=this);for(var D=0,V=0;V<T.length;V++)_=(A.words[V]|0)-(T.words[V]|0)+D,D=_>>26,this.words[V]=_&67108863;for(;D!==0&&V<A.length;V++)_=(A.words[V]|0)+D,D=_>>26,this.words[V]=_&67108863;if(D===0&&V<A.length&&A!==this)for(;V<A.length;V++)this.words[V]=A.words[V];return this.length=Math.max(this.length,V),A!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(v){return this.clone().isub(v)};function h(R,v,_){_.negative=v.negative^R.negative;var b=R.length+v.length|0;_.length=b,b=b-1|0;var A=R.words[0]|0,T=v.words[0]|0,D=A*T,V=D&67108863,O=D/67108864|0;_.words[0]=V;for(var x=1;x<b;x++){for(var $=O>>>26,K=O&67108863,E=Math.min(x,v.length-1),Y=Math.max(0,x-R.length+1);Y<=E;Y++){var j=x-Y|0;A=R.words[j]|0,T=v.words[Y]|0,D=A*T+K,$+=D/67108864|0,K=D&67108863}_.words[x]=K|0,O=$|0}return O!==0?_.words[x]=O|0:_.length--,_._strip()}var w=function(v,_,b){var A=v.words,T=_.words,D=b.words,V=0,O,x,$,K=A[0]|0,E=K&8191,Y=K>>>13,j=A[1]|0,X=j&8191,ee=j>>>13,le=A[2]|0,me=le&8191,he=le>>>13,je=A[3]|0,q=je&8191,ze=je>>>13,Qe=A[4]|0,We=Qe&8191,Pe=Qe>>>13,Nt=A[5]|0,Me=Nt&8191,W=Nt>>>13,H=A[6]|0,te=H&8191,de=H>>>13,Z=A[7]|0,ne=Z&8191,ye=Z>>>13,Ce=A[8]|0,Ee=Ce&8191,nt=Ce>>>13,Ae=A[9]|0,Re=Ae&8191,Oe=Ae>>>13,ot=T[0]|0,Ie=ot&8191,Je=ot>>>13,pt=T[1]|0,lt=pt&8191,Q=pt>>>13,Be=T[2]|0,se=Be&8191,pe=Be>>>13,Le=T[3]|0,xe=Le&8191,Xe=Le>>>13,sn=T[4]|0,At=sn&8191,st=sn>>>13,Wn=T[5]|0,Vt=Wn&8191,fn=Wn>>>13,vs=T[6]|0,Kt=vs&8191,dn=vs>>>13,ys=T[7]|0,hn=ys&8191,on=ys>>>13,_s=T[8]|0,an=_s&8191,pn=_s>>>13,bs=T[9]|0,vn=bs&8191,yn=bs>>>13;b.negative=v.negative^_.negative,b.length=19,O=Math.imul(E,Ie),x=Math.imul(E,Je),x=x+Math.imul(Y,Ie)|0,$=Math.imul(Y,Je);var xs=(V+O|0)+((x&8191)<<13)|0;V=($+(x>>>13)|0)+(xs>>>26)|0,xs&=67108863,O=Math.imul(X,Ie),x=Math.imul(X,Je),x=x+Math.imul(ee,Ie)|0,$=Math.imul(ee,Je),O=O+Math.imul(E,lt)|0,x=x+Math.imul(E,Q)|0,x=x+Math.imul(Y,lt)|0,$=$+Math.imul(Y,Q)|0;var ws=(V+O|0)+((x&8191)<<13)|0;V=($+(x>>>13)|0)+(ws>>>26)|0,ws&=67108863,O=Math.imul(me,Ie),x=Math.imul(me,Je),x=x+Math.imul(he,Ie)|0,$=Math.imul(he,Je),O=O+Math.imul(X,lt)|0,x=x+Math.imul(X,Q)|0,x=x+Math.imul(ee,lt)|0,$=$+Math.imul(ee,Q)|0,O=O+Math.imul(E,se)|0,x=x+Math.imul(E,pe)|0,x=x+Math.imul(Y,se)|0,$=$+Math.imul(Y,pe)|0;var As=(V+O|0)+((x&8191)<<13)|0;V=($+(x>>>13)|0)+(As>>>26)|0,As&=67108863,O=Math.imul(q,Ie),x=Math.imul(q,Je),x=x+Math.imul(ze,Ie)|0,$=Math.imul(ze,Je),O=O+Math.imul(me,lt)|0,x=x+Math.imul(me,Q)|0,x=x+Math.imul(he,lt)|0,$=$+Math.imul(he,Q)|0,O=O+Math.imul(X,se)|0,x=x+Math.imul(X,pe)|0,x=x+Math.imul(ee,se)|0,$=$+Math.imul(ee,pe)|0,O=O+Math.imul(E,xe)|0,x=x+Math.imul(E,Xe)|0,x=x+Math.imul(Y,xe)|0,$=$+Math.imul(Y,Xe)|0;var z=(V+O|0)+((x&8191)<<13)|0;V=($+(x>>>13)|0)+(z>>>26)|0,z&=67108863,O=Math.imul(We,Ie),x=Math.imul(We,Je),x=x+Math.imul(Pe,Ie)|0,$=Math.imul(Pe,Je),O=O+Math.imul(q,lt)|0,x=x+Math.imul(q,Q)|0,x=x+Math.imul(ze,lt)|0,$=$+Math.imul(ze,Q)|0,O=O+Math.imul(me,se)|0,x=x+Math.imul(me,pe)|0,x=x+Math.imul(he,se)|0,$=$+Math.imul(he,pe)|0,O=O+Math.imul(X,xe)|0,x=x+Math.imul(X,Xe)|0,x=x+Math.imul(ee,xe)|0,$=$+Math.imul(ee,Xe)|0,O=O+Math.imul(E,At)|0,x=x+Math.imul(E,st)|0,x=x+Math.imul(Y,At)|0,$=$+Math.imul(Y,st)|0;var J=(V+O|0)+((x&8191)<<13)|0;V=($+(x>>>13)|0)+(J>>>26)|0,J&=67108863,O=Math.imul(Me,Ie),x=Math.imul(Me,Je),x=x+Math.imul(W,Ie)|0,$=Math.imul(W,Je),O=O+Math.imul(We,lt)|0,x=x+Math.imul(We,Q)|0,x=x+Math.imul(Pe,lt)|0,$=$+Math.imul(Pe,Q)|0,O=O+Math.imul(q,se)|0,x=x+Math.imul(q,pe)|0,x=x+Math.imul(ze,se)|0,$=$+Math.imul(ze,pe)|0,O=O+Math.imul(me,xe)|0,x=x+Math.imul(me,Xe)|0,x=x+Math.imul(he,xe)|0,$=$+Math.imul(he,Xe)|0,O=O+Math.imul(X,At)|0,x=x+Math.imul(X,st)|0,x=x+Math.imul(ee,At)|0,$=$+Math.imul(ee,st)|0,O=O+Math.imul(E,Vt)|0,x=x+Math.imul(E,fn)|0,x=x+Math.imul(Y,Vt)|0,$=$+Math.imul(Y,fn)|0;var ae=(V+O|0)+((x&8191)<<13)|0;V=($+(x>>>13)|0)+(ae>>>26)|0,ae&=67108863,O=Math.imul(te,Ie),x=Math.imul(te,Je),x=x+Math.imul(de,Ie)|0,$=Math.imul(de,Je),O=O+Math.imul(Me,lt)|0,x=x+Math.imul(Me,Q)|0,x=x+Math.imul(W,lt)|0,$=$+Math.imul(W,Q)|0,O=O+Math.imul(We,se)|0,x=x+Math.imul(We,pe)|0,x=x+Math.imul(Pe,se)|0,$=$+Math.imul(Pe,pe)|0,O=O+Math.imul(q,xe)|0,x=x+Math.imul(q,Xe)|0,x=x+Math.imul(ze,xe)|0,$=$+Math.imul(ze,Xe)|0,O=O+Math.imul(me,At)|0,x=x+Math.imul(me,st)|0,x=x+Math.imul(he,At)|0,$=$+Math.imul(he,st)|0,O=O+Math.imul(X,Vt)|0,x=x+Math.imul(X,fn)|0,x=x+Math.imul(ee,Vt)|0,$=$+Math.imul(ee,fn)|0,O=O+Math.imul(E,Kt)|0,x=x+Math.imul(E,dn)|0,x=x+Math.imul(Y,Kt)|0,$=$+Math.imul(Y,dn)|0;var ce=(V+O|0)+((x&8191)<<13)|0;V=($+(x>>>13)|0)+(ce>>>26)|0,ce&=67108863,O=Math.imul(ne,Ie),x=Math.imul(ne,Je),x=x+Math.imul(ye,Ie)|0,$=Math.imul(ye,Je),O=O+Math.imul(te,lt)|0,x=x+Math.imul(te,Q)|0,x=x+Math.imul(de,lt)|0,$=$+Math.imul(de,Q)|0,O=O+Math.imul(Me,se)|0,x=x+Math.imul(Me,pe)|0,x=x+Math.imul(W,se)|0,$=$+Math.imul(W,pe)|0,O=O+Math.imul(We,xe)|0,x=x+Math.imul(We,Xe)|0,x=x+Math.imul(Pe,xe)|0,$=$+Math.imul(Pe,Xe)|0,O=O+Math.imul(q,At)|0,x=x+Math.imul(q,st)|0,x=x+Math.imul(ze,At)|0,$=$+Math.imul(ze,st)|0,O=O+Math.imul(me,Vt)|0,x=x+Math.imul(me,fn)|0,x=x+Math.imul(he,Vt)|0,$=$+Math.imul(he,fn)|0,O=O+Math.imul(X,Kt)|0,x=x+Math.imul(X,dn)|0,x=x+Math.imul(ee,Kt)|0,$=$+Math.imul(ee,dn)|0,O=O+Math.imul(E,hn)|0,x=x+Math.imul(E,on)|0,x=x+Math.imul(Y,hn)|0,$=$+Math.imul(Y,on)|0;var re=(V+O|0)+((x&8191)<<13)|0;V=($+(x>>>13)|0)+(re>>>26)|0,re&=67108863,O=Math.imul(Ee,Ie),x=Math.imul(Ee,Je),x=x+Math.imul(nt,Ie)|0,$=Math.imul(nt,Je),O=O+Math.imul(ne,lt)|0,x=x+Math.imul(ne,Q)|0,x=x+Math.imul(ye,lt)|0,$=$+Math.imul(ye,Q)|0,O=O+Math.imul(te,se)|0,x=x+Math.imul(te,pe)|0,x=x+Math.imul(de,se)|0,$=$+Math.imul(de,pe)|0,O=O+Math.imul(Me,xe)|0,x=x+Math.imul(Me,Xe)|0,x=x+Math.imul(W,xe)|0,$=$+Math.imul(W,Xe)|0,O=O+Math.imul(We,At)|0,x=x+Math.imul(We,st)|0,x=x+Math.imul(Pe,At)|0,$=$+Math.imul(Pe,st)|0,O=O+Math.imul(q,Vt)|0,x=x+Math.imul(q,fn)|0,x=x+Math.imul(ze,Vt)|0,$=$+Math.imul(ze,fn)|0,O=O+Math.imul(me,Kt)|0,x=x+Math.imul(me,dn)|0,x=x+Math.imul(he,Kt)|0,$=$+Math.imul(he,dn)|0,O=O+Math.imul(X,hn)|0,x=x+Math.imul(X,on)|0,x=x+Math.imul(ee,hn)|0,$=$+Math.imul(ee,on)|0,O=O+Math.imul(E,an)|0,x=x+Math.imul(E,pn)|0,x=x+Math.imul(Y,an)|0,$=$+Math.imul(Y,pn)|0;var we=(V+O|0)+((x&8191)<<13)|0;V=($+(x>>>13)|0)+(we>>>26)|0,we&=67108863,O=Math.imul(Re,Ie),x=Math.imul(Re,Je),x=x+Math.imul(Oe,Ie)|0,$=Math.imul(Oe,Je),O=O+Math.imul(Ee,lt)|0,x=x+Math.imul(Ee,Q)|0,x=x+Math.imul(nt,lt)|0,$=$+Math.imul(nt,Q)|0,O=O+Math.imul(ne,se)|0,x=x+Math.imul(ne,pe)|0,x=x+Math.imul(ye,se)|0,$=$+Math.imul(ye,pe)|0,O=O+Math.imul(te,xe)|0,x=x+Math.imul(te,Xe)|0,x=x+Math.imul(de,xe)|0,$=$+Math.imul(de,Xe)|0,O=O+Math.imul(Me,At)|0,x=x+Math.imul(Me,st)|0,x=x+Math.imul(W,At)|0,$=$+Math.imul(W,st)|0,O=O+Math.imul(We,Vt)|0,x=x+Math.imul(We,fn)|0,x=x+Math.imul(Pe,Vt)|0,$=$+Math.imul(Pe,fn)|0,O=O+Math.imul(q,Kt)|0,x=x+Math.imul(q,dn)|0,x=x+Math.imul(ze,Kt)|0,$=$+Math.imul(ze,dn)|0,O=O+Math.imul(me,hn)|0,x=x+Math.imul(me,on)|0,x=x+Math.imul(he,hn)|0,$=$+Math.imul(he,on)|0,O=O+Math.imul(X,an)|0,x=x+Math.imul(X,pn)|0,x=x+Math.imul(ee,an)|0,$=$+Math.imul(ee,pn)|0,O=O+Math.imul(E,vn)|0,x=x+Math.imul(E,yn)|0,x=x+Math.imul(Y,vn)|0,$=$+Math.imul(Y,yn)|0;var De=(V+O|0)+((x&8191)<<13)|0;V=($+(x>>>13)|0)+(De>>>26)|0,De&=67108863,O=Math.imul(Re,lt),x=Math.imul(Re,Q),x=x+Math.imul(Oe,lt)|0,$=Math.imul(Oe,Q),O=O+Math.imul(Ee,se)|0,x=x+Math.imul(Ee,pe)|0,x=x+Math.imul(nt,se)|0,$=$+Math.imul(nt,pe)|0,O=O+Math.imul(ne,xe)|0,x=x+Math.imul(ne,Xe)|0,x=x+Math.imul(ye,xe)|0,$=$+Math.imul(ye,Xe)|0,O=O+Math.imul(te,At)|0,x=x+Math.imul(te,st)|0,x=x+Math.imul(de,At)|0,$=$+Math.imul(de,st)|0,O=O+Math.imul(Me,Vt)|0,x=x+Math.imul(Me,fn)|0,x=x+Math.imul(W,Vt)|0,$=$+Math.imul(W,fn)|0,O=O+Math.imul(We,Kt)|0,x=x+Math.imul(We,dn)|0,x=x+Math.imul(Pe,Kt)|0,$=$+Math.imul(Pe,dn)|0,O=O+Math.imul(q,hn)|0,x=x+Math.imul(q,on)|0,x=x+Math.imul(ze,hn)|0,$=$+Math.imul(ze,on)|0,O=O+Math.imul(me,an)|0,x=x+Math.imul(me,pn)|0,x=x+Math.imul(he,an)|0,$=$+Math.imul(he,pn)|0,O=O+Math.imul(X,vn)|0,x=x+Math.imul(X,yn)|0,x=x+Math.imul(ee,vn)|0,$=$+Math.imul(ee,yn)|0;var Ve=(V+O|0)+((x&8191)<<13)|0;V=($+(x>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,O=Math.imul(Re,se),x=Math.imul(Re,pe),x=x+Math.imul(Oe,se)|0,$=Math.imul(Oe,pe),O=O+Math.imul(Ee,xe)|0,x=x+Math.imul(Ee,Xe)|0,x=x+Math.imul(nt,xe)|0,$=$+Math.imul(nt,Xe)|0,O=O+Math.imul(ne,At)|0,x=x+Math.imul(ne,st)|0,x=x+Math.imul(ye,At)|0,$=$+Math.imul(ye,st)|0,O=O+Math.imul(te,Vt)|0,x=x+Math.imul(te,fn)|0,x=x+Math.imul(de,Vt)|0,$=$+Math.imul(de,fn)|0,O=O+Math.imul(Me,Kt)|0,x=x+Math.imul(Me,dn)|0,x=x+Math.imul(W,Kt)|0,$=$+Math.imul(W,dn)|0,O=O+Math.imul(We,hn)|0,x=x+Math.imul(We,on)|0,x=x+Math.imul(Pe,hn)|0,$=$+Math.imul(Pe,on)|0,O=O+Math.imul(q,an)|0,x=x+Math.imul(q,pn)|0,x=x+Math.imul(ze,an)|0,$=$+Math.imul(ze,pn)|0,O=O+Math.imul(me,vn)|0,x=x+Math.imul(me,yn)|0,x=x+Math.imul(he,vn)|0,$=$+Math.imul(he,yn)|0;var Ke=(V+O|0)+((x&8191)<<13)|0;V=($+(x>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,O=Math.imul(Re,xe),x=Math.imul(Re,Xe),x=x+Math.imul(Oe,xe)|0,$=Math.imul(Oe,Xe),O=O+Math.imul(Ee,At)|0,x=x+Math.imul(Ee,st)|0,x=x+Math.imul(nt,At)|0,$=$+Math.imul(nt,st)|0,O=O+Math.imul(ne,Vt)|0,x=x+Math.imul(ne,fn)|0,x=x+Math.imul(ye,Vt)|0,$=$+Math.imul(ye,fn)|0,O=O+Math.imul(te,Kt)|0,x=x+Math.imul(te,dn)|0,x=x+Math.imul(de,Kt)|0,$=$+Math.imul(de,dn)|0,O=O+Math.imul(Me,hn)|0,x=x+Math.imul(Me,on)|0,x=x+Math.imul(W,hn)|0,$=$+Math.imul(W,on)|0,O=O+Math.imul(We,an)|0,x=x+Math.imul(We,pn)|0,x=x+Math.imul(Pe,an)|0,$=$+Math.imul(Pe,pn)|0,O=O+Math.imul(q,vn)|0,x=x+Math.imul(q,yn)|0,x=x+Math.imul(ze,vn)|0,$=$+Math.imul(ze,yn)|0;var ft=(V+O|0)+((x&8191)<<13)|0;V=($+(x>>>13)|0)+(ft>>>26)|0,ft&=67108863,O=Math.imul(Re,At),x=Math.imul(Re,st),x=x+Math.imul(Oe,At)|0,$=Math.imul(Oe,st),O=O+Math.imul(Ee,Vt)|0,x=x+Math.imul(Ee,fn)|0,x=x+Math.imul(nt,Vt)|0,$=$+Math.imul(nt,fn)|0,O=O+Math.imul(ne,Kt)|0,x=x+Math.imul(ne,dn)|0,x=x+Math.imul(ye,Kt)|0,$=$+Math.imul(ye,dn)|0,O=O+Math.imul(te,hn)|0,x=x+Math.imul(te,on)|0,x=x+Math.imul(de,hn)|0,$=$+Math.imul(de,on)|0,O=O+Math.imul(Me,an)|0,x=x+Math.imul(Me,pn)|0,x=x+Math.imul(W,an)|0,$=$+Math.imul(W,pn)|0,O=O+Math.imul(We,vn)|0,x=x+Math.imul(We,yn)|0,x=x+Math.imul(Pe,vn)|0,$=$+Math.imul(Pe,yn)|0;var mt=(V+O|0)+((x&8191)<<13)|0;V=($+(x>>>13)|0)+(mt>>>26)|0,mt&=67108863,O=Math.imul(Re,Vt),x=Math.imul(Re,fn),x=x+Math.imul(Oe,Vt)|0,$=Math.imul(Oe,fn),O=O+Math.imul(Ee,Kt)|0,x=x+Math.imul(Ee,dn)|0,x=x+Math.imul(nt,Kt)|0,$=$+Math.imul(nt,dn)|0,O=O+Math.imul(ne,hn)|0,x=x+Math.imul(ne,on)|0,x=x+Math.imul(ye,hn)|0,$=$+Math.imul(ye,on)|0,O=O+Math.imul(te,an)|0,x=x+Math.imul(te,pn)|0,x=x+Math.imul(de,an)|0,$=$+Math.imul(de,pn)|0,O=O+Math.imul(Me,vn)|0,x=x+Math.imul(Me,yn)|0,x=x+Math.imul(W,vn)|0,$=$+Math.imul(W,yn)|0;var it=(V+O|0)+((x&8191)<<13)|0;V=($+(x>>>13)|0)+(it>>>26)|0,it&=67108863,O=Math.imul(Re,Kt),x=Math.imul(Re,dn),x=x+Math.imul(Oe,Kt)|0,$=Math.imul(Oe,dn),O=O+Math.imul(Ee,hn)|0,x=x+Math.imul(Ee,on)|0,x=x+Math.imul(nt,hn)|0,$=$+Math.imul(nt,on)|0,O=O+Math.imul(ne,an)|0,x=x+Math.imul(ne,pn)|0,x=x+Math.imul(ye,an)|0,$=$+Math.imul(ye,pn)|0,O=O+Math.imul(te,vn)|0,x=x+Math.imul(te,yn)|0,x=x+Math.imul(de,vn)|0,$=$+Math.imul(de,yn)|0;var Ft=(V+O|0)+((x&8191)<<13)|0;V=($+(x>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,O=Math.imul(Re,hn),x=Math.imul(Re,on),x=x+Math.imul(Oe,hn)|0,$=Math.imul(Oe,on),O=O+Math.imul(Ee,an)|0,x=x+Math.imul(Ee,pn)|0,x=x+Math.imul(nt,an)|0,$=$+Math.imul(nt,pn)|0,O=O+Math.imul(ne,vn)|0,x=x+Math.imul(ne,yn)|0,x=x+Math.imul(ye,vn)|0,$=$+Math.imul(ye,yn)|0;var jt=(V+O|0)+((x&8191)<<13)|0;V=($+(x>>>13)|0)+(jt>>>26)|0,jt&=67108863,O=Math.imul(Re,an),x=Math.imul(Re,pn),x=x+Math.imul(Oe,an)|0,$=Math.imul(Oe,pn),O=O+Math.imul(Ee,vn)|0,x=x+Math.imul(Ee,yn)|0,x=x+Math.imul(nt,vn)|0,$=$+Math.imul(nt,yn)|0;var Rn=(V+O|0)+((x&8191)<<13)|0;V=($+(x>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,O=Math.imul(Re,vn),x=Math.imul(Re,yn),x=x+Math.imul(Oe,vn)|0,$=Math.imul(Oe,yn);var bn=(V+O|0)+((x&8191)<<13)|0;return V=($+(x>>>13)|0)+(bn>>>26)|0,bn&=67108863,D[0]=xs,D[1]=ws,D[2]=As,D[3]=z,D[4]=J,D[5]=ae,D[6]=ce,D[7]=re,D[8]=we,D[9]=De,D[10]=Ve,D[11]=Ke,D[12]=ft,D[13]=mt,D[14]=it,D[15]=Ft,D[16]=jt,D[17]=Rn,D[18]=bn,V!==0&&(D[19]=V,b.length++),b};Math.imul||(w=h);function M(R,v,_){_.negative=v.negative^R.negative,_.length=R.length+v.length;for(var b=0,A=0,T=0;T<_.length-1;T++){var D=A;A=0;for(var V=b&67108863,O=Math.min(T,v.length-1),x=Math.max(0,T-R.length+1);x<=O;x++){var $=T-x,K=R.words[$]|0,E=v.words[x]|0,Y=K*E,j=Y&67108863;D=D+(Y/67108864|0)|0,j=j+V|0,V=j&67108863,D=D+(j>>>26)|0,A+=D>>>26,D&=67108863}_.words[T]=V,b=D,D=A}return b!==0?_.words[T]=b:_.length--,_._strip()}function S(R,v,_){return M(R,v,_)}s.prototype.mulTo=function(v,_){var b,A=this.length+v.length;return this.length===10&&v.length===10?b=w(this,v,_):A<63?b=h(this,v,_):A<1024?b=M(this,v,_):b=S(this,v,_),b},s.prototype.mul=function(v){var _=new s(null);return _.words=new Array(this.length+v.length),this.mulTo(v,_)},s.prototype.mulf=function(v){var _=new s(null);return _.words=new Array(this.length+v.length),S(this,v,_)},s.prototype.imul=function(v){return this.clone().mulTo(v,this)},s.prototype.imuln=function(v){var _=v<0;_&&(v=-v),r(typeof v=="number"),r(v<67108864);for(var b=0,A=0;A<this.length;A++){var T=(this.words[A]|0)*v,D=(T&67108863)+(b&67108863);b>>=26,b+=T/67108864|0,b+=D>>>26,this.words[A]=D&67108863}return b!==0&&(this.words[A]=b,this.length++),_?this.ineg():this},s.prototype.muln=function(v){return this.clone().imuln(v)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(v){var _=y(v);if(_.length===0)return new s(1);for(var b=this,A=0;A<_.length&&_[A]===0;A++,b=b.sqr());if(++A<_.length)for(var T=b.sqr();A<_.length;A++,T=T.sqr())_[A]!==0&&(b=b.mul(T));return b},s.prototype.iushln=function(v){r(typeof v=="number"&&v>=0);var _=v%26,b=(v-_)/26,A=67108863>>>26-_<<26-_,T;if(_!==0){var D=0;for(T=0;T<this.length;T++){var V=this.words[T]&A,O=(this.words[T]|0)-V<<_;this.words[T]=O|D,D=V>>>26-_}D&&(this.words[T]=D,this.length++)}if(b!==0){for(T=this.length-1;T>=0;T--)this.words[T+b]=this.words[T];for(T=0;T<b;T++)this.words[T]=0;this.length+=b}return this._strip()},s.prototype.ishln=function(v){return r(this.negative===0),this.iushln(v)},s.prototype.iushrn=function(v,_,b){r(typeof v=="number"&&v>=0);var A;_?A=(_-_%26)/26:A=0;var T=v%26,D=Math.min((v-T)/26,this.length),V=67108863^67108863>>>T<<T,O=b;if(A-=D,A=Math.max(0,A),O){for(var x=0;x<D;x++)O.words[x]=this.words[x];O.length=D}if(D!==0)if(this.length>D)for(this.length-=D,x=0;x<this.length;x++)this.words[x]=this.words[x+D];else this.words[0]=0,this.length=1;var $=0;for(x=this.length-1;x>=0&&($!==0||x>=A);x--){var K=this.words[x]|0;this.words[x]=$<<26-T|K>>>T,$=K&V}return O&&$!==0&&(O.words[O.length++]=$),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(v,_,b){return r(this.negative===0),this.iushrn(v,_,b)},s.prototype.shln=function(v){return this.clone().ishln(v)},s.prototype.ushln=function(v){return this.clone().iushln(v)},s.prototype.shrn=function(v){return this.clone().ishrn(v)},s.prototype.ushrn=function(v){return this.clone().iushrn(v)},s.prototype.testn=function(v){r(typeof v=="number"&&v>=0);var _=v%26,b=(v-_)/26,A=1<<_;if(this.length<=b)return!1;var T=this.words[b];return!!(T&A)},s.prototype.imaskn=function(v){r(typeof v=="number"&&v>=0);var _=v%26,b=(v-_)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(_!==0&&b++,this.length=Math.min(b,this.length),_!==0){var A=67108863^67108863>>>_<<_;this.words[this.length-1]&=A}return this._strip()},s.prototype.maskn=function(v){return this.clone().imaskn(v)},s.prototype.iaddn=function(v){return r(typeof v=="number"),r(v<67108864),v<0?this.isubn(-v):this.negative!==0?this.length===1&&(this.words[0]|0)<=v?(this.words[0]=v-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(v),this.negative=1,this):this._iaddn(v)},s.prototype._iaddn=function(v){this.words[0]+=v;for(var _=0;_<this.length&&this.words[_]>=67108864;_++)this.words[_]-=67108864,_===this.length-1?this.words[_+1]=1:this.words[_+1]++;return this.length=Math.max(this.length,_+1),this},s.prototype.isubn=function(v){if(r(typeof v=="number"),r(v<67108864),v<0)return this.iaddn(-v);if(this.negative!==0)return this.negative=0,this.iaddn(v),this.negative=1,this;if(this.words[0]-=v,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var _=0;_<this.length&&this.words[_]<0;_++)this.words[_]+=67108864,this.words[_+1]-=1;return this._strip()},s.prototype.addn=function(v){return this.clone().iaddn(v)},s.prototype.subn=function(v){return this.clone().isubn(v)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(v,_,b){var A=v.length+b,T;this._expand(A);var D,V=0;for(T=0;T<v.length;T++){D=(this.words[T+b]|0)+V;var O=(v.words[T]|0)*_;D-=O&67108863,V=(D>>26)-(O/67108864|0),this.words[T+b]=D&67108863}for(;T<this.length-b;T++)D=(this.words[T+b]|0)+V,V=D>>26,this.words[T+b]=D&67108863;if(V===0)return this._strip();for(r(V===-1),V=0,T=0;T<this.length;T++)D=-(this.words[T]|0)+V,V=D>>26,this.words[T]=D&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(v,_){var b=this.length-v.length,A=this.clone(),T=v,D=T.words[T.length-1]|0,V=this._countBits(D);b=26-V,b!==0&&(T=T.ushln(b),A.iushln(b),D=T.words[T.length-1]|0);var O=A.length-T.length,x;if(_!=="mod"){x=new s(null),x.length=O+1,x.words=new Array(x.length);for(var $=0;$<x.length;$++)x.words[$]=0}var K=A.clone()._ishlnsubmul(T,1,O);K.negative===0&&(A=K,x&&(x.words[O]=1));for(var E=O-1;E>=0;E--){var Y=(A.words[T.length+E]|0)*67108864+(A.words[T.length+E-1]|0);for(Y=Math.min(Y/D|0,67108863),A._ishlnsubmul(T,Y,E);A.negative!==0;)Y--,A.negative=0,A._ishlnsubmul(T,1,E),A.isZero()||(A.negative^=1);x&&(x.words[E]=Y)}return x&&x._strip(),A._strip(),_!=="div"&&b!==0&&A.iushrn(b),{div:x||null,mod:A}},s.prototype.divmod=function(v,_,b){if(r(!v.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var A,T,D;return this.negative!==0&&v.negative===0?(D=this.neg().divmod(v,_),_!=="mod"&&(A=D.div.neg()),_!=="div"&&(T=D.mod.neg(),b&&T.negative!==0&&T.iadd(v)),{div:A,mod:T}):this.negative===0&&v.negative!==0?(D=this.divmod(v.neg(),_),_!=="mod"&&(A=D.div.neg()),{div:A,mod:D.mod}):this.negative&v.negative?(D=this.neg().divmod(v.neg(),_),_!=="div"&&(T=D.mod.neg(),b&&T.negative!==0&&T.isub(v)),{div:D.div,mod:T}):v.length>this.length||this.cmp(v)<0?{div:new s(0),mod:this}:v.length===1?_==="div"?{div:this.divn(v.words[0]),mod:null}:_==="mod"?{div:null,mod:new s(this.modrn(v.words[0]))}:{div:this.divn(v.words[0]),mod:new s(this.modrn(v.words[0]))}:this._wordDiv(v,_)},s.prototype.div=function(v){return this.divmod(v,"div",!1).div},s.prototype.mod=function(v){return this.divmod(v,"mod",!1).mod},s.prototype.umod=function(v){return this.divmod(v,"mod",!0).mod},s.prototype.divRound=function(v){var _=this.divmod(v);if(_.mod.isZero())return _.div;var b=_.div.negative!==0?_.mod.isub(v):_.mod,A=v.ushrn(1),T=v.andln(1),D=b.cmp(A);return D<0||T===1&&D===0?_.div:_.div.negative!==0?_.div.isubn(1):_.div.iaddn(1)},s.prototype.modrn=function(v){var _=v<0;_&&(v=-v),r(v<=67108863);for(var b=(1<<26)%v,A=0,T=this.length-1;T>=0;T--)A=(b*A+(this.words[T]|0))%v;return _?-A:A},s.prototype.modn=function(v){return this.modrn(v)},s.prototype.idivn=function(v){var _=v<0;_&&(v=-v),r(v<=67108863);for(var b=0,A=this.length-1;A>=0;A--){var T=(this.words[A]|0)+b*67108864;this.words[A]=T/v|0,b=T%v}return this._strip(),_?this.ineg():this},s.prototype.divn=function(v){return this.clone().idivn(v)},s.prototype.egcd=function(v){r(v.negative===0),r(!v.isZero());var _=this,b=v.clone();_.negative!==0?_=_.umod(v):_=_.clone();for(var A=new s(1),T=new s(0),D=new s(0),V=new s(1),O=0;_.isEven()&&b.isEven();)_.iushrn(1),b.iushrn(1),++O;for(var x=b.clone(),$=_.clone();!_.isZero();){for(var K=0,E=1;!(_.words[0]&E)&&K<26;++K,E<<=1);if(K>0)for(_.iushrn(K);K-- >0;)(A.isOdd()||T.isOdd())&&(A.iadd(x),T.isub($)),A.iushrn(1),T.iushrn(1);for(var Y=0,j=1;!(b.words[0]&j)&&Y<26;++Y,j<<=1);if(Y>0)for(b.iushrn(Y);Y-- >0;)(D.isOdd()||V.isOdd())&&(D.iadd(x),V.isub($)),D.iushrn(1),V.iushrn(1);_.cmp(b)>=0?(_.isub(b),A.isub(D),T.isub(V)):(b.isub(_),D.isub(A),V.isub(T))}return{a:D,b:V,gcd:b.iushln(O)}},s.prototype._invmp=function(v){r(v.negative===0),r(!v.isZero());var _=this,b=v.clone();_.negative!==0?_=_.umod(v):_=_.clone();for(var A=new s(1),T=new s(0),D=b.clone();_.cmpn(1)>0&&b.cmpn(1)>0;){for(var V=0,O=1;!(_.words[0]&O)&&V<26;++V,O<<=1);if(V>0)for(_.iushrn(V);V-- >0;)A.isOdd()&&A.iadd(D),A.iushrn(1);for(var x=0,$=1;!(b.words[0]&$)&&x<26;++x,$<<=1);if(x>0)for(b.iushrn(x);x-- >0;)T.isOdd()&&T.iadd(D),T.iushrn(1);_.cmp(b)>=0?(_.isub(b),A.isub(T)):(b.isub(_),T.isub(A))}var K;return _.cmpn(1)===0?K=A:K=T,K.cmpn(0)<0&&K.iadd(v),K},s.prototype.gcd=function(v){if(this.isZero())return v.abs();if(v.isZero())return this.abs();var _=this.clone(),b=v.clone();_.negative=0,b.negative=0;for(var A=0;_.isEven()&&b.isEven();A++)_.iushrn(1),b.iushrn(1);do{for(;_.isEven();)_.iushrn(1);for(;b.isEven();)b.iushrn(1);var T=_.cmp(b);if(T<0){var D=_;_=b,b=D}else if(T===0||b.cmpn(1)===0)break;_.isub(b)}while(!0);return b.iushln(A)},s.prototype.invm=function(v){return this.egcd(v).a.umod(v)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(v){return this.words[0]&v},s.prototype.bincn=function(v){r(typeof v=="number");var _=v%26,b=(v-_)/26,A=1<<_;if(this.length<=b)return this._expand(b+1),this.words[b]|=A,this;for(var T=A,D=b;T!==0&&D<this.length;D++){var V=this.words[D]|0;V+=T,T=V>>>26,V&=67108863,this.words[D]=V}return T!==0&&(this.words[D]=T,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(v){var _=v<0;if(this.negative!==0&&!_)return-1;if(this.negative===0&&_)return 1;this._strip();var b;if(this.length>1)b=1;else{_&&(v=-v),r(v<=67108863,"Number is too big");var A=this.words[0]|0;b=A===v?0:A<v?-1:1}return this.negative!==0?-b|0:b},s.prototype.cmp=function(v){if(this.negative!==0&&v.negative===0)return-1;if(this.negative===0&&v.negative!==0)return 1;var _=this.ucmp(v);return this.negative!==0?-_|0:_},s.prototype.ucmp=function(v){if(this.length>v.length)return 1;if(this.length<v.length)return-1;for(var _=0,b=this.length-1;b>=0;b--){var A=this.words[b]|0,T=v.words[b]|0;if(A!==T){A<T?_=-1:A>T&&(_=1);break}}return _},s.prototype.gtn=function(v){return this.cmpn(v)===1},s.prototype.gt=function(v){return this.cmp(v)===1},s.prototype.gten=function(v){return this.cmpn(v)>=0},s.prototype.gte=function(v){return this.cmp(v)>=0},s.prototype.ltn=function(v){return this.cmpn(v)===-1},s.prototype.lt=function(v){return this.cmp(v)===-1},s.prototype.lten=function(v){return this.cmpn(v)<=0},s.prototype.lte=function(v){return this.cmp(v)<=0},s.prototype.eqn=function(v){return this.cmpn(v)===0},s.prototype.eq=function(v){return this.cmp(v)===0},s.red=function(v){return new U(v)},s.prototype.toRed=function(v){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),v.convertTo(this)._forceRed(v)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(v){return this.red=v,this},s.prototype.forceRed=function(v){return r(!this.red,"Already a number in reduction context"),this._forceRed(v)},s.prototype.redAdd=function(v){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,v)},s.prototype.redIAdd=function(v){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,v)},s.prototype.redSub=function(v){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,v)},s.prototype.redISub=function(v){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,v)},s.prototype.redShl=function(v){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,v)},s.prototype.redMul=function(v){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.mul(this,v)},s.prototype.redIMul=function(v){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.imul(this,v)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(v){return r(this.red&&!v.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,v)};var C={k256:null,p224:null,p192:null,p25519:null};function k(R,v){this.name=R,this.p=new s(v,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}k.prototype._tmp=function(){var v=new s(null);return v.words=new Array(Math.ceil(this.n/13)),v},k.prototype.ireduce=function(v){var _=v,b;do this.split(_,this.tmp),_=this.imulK(_),_=_.iadd(this.tmp),b=_.bitLength();while(b>this.n);var A=b<this.n?-1:_.ucmp(this.p);return A===0?(_.words[0]=0,_.length=1):A>0?_.isub(this.p):_.strip!==void 0?_.strip():_._strip(),_},k.prototype.split=function(v,_){v.iushrn(this.n,0,_)},k.prototype.imulK=function(v){return v.imul(this.k)};function F(){k.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(F,k),F.prototype.split=function(v,_){for(var b=4194303,A=Math.min(v.length,9),T=0;T<A;T++)_.words[T]=v.words[T];if(_.length=A,v.length<=9){v.words[0]=0,v.length=1;return}var D=v.words[9];for(_.words[_.length++]=D&b,T=10;T<v.length;T++){var V=v.words[T]|0;v.words[T-10]=(V&b)<<4|D>>>22,D=V}D>>>=22,v.words[T-10]=D,D===0&&v.length>10?v.length-=10:v.length-=9},F.prototype.imulK=function(v){v.words[v.length]=0,v.words[v.length+1]=0,v.length+=2;for(var _=0,b=0;b<v.length;b++){var A=v.words[b]|0;_+=A*977,v.words[b]=_&67108863,_=A*64+(_/67108864|0)}return v.words[v.length-1]===0&&(v.length--,v.words[v.length-1]===0&&v.length--),v};function N(){k.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(N,k);function B(){k.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(B,k);function I(){k.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(I,k),I.prototype.imulK=function(v){for(var _=0,b=0;b<v.length;b++){var A=(v.words[b]|0)*19+_,T=A&67108863;A>>>=26,v.words[b]=T,_=A}return _!==0&&(v.words[v.length++]=_),v},s._prime=function(v){if(C[v])return C[v];var _;if(v==="k256")_=new F;else if(v==="p224")_=new N;else if(v==="p192")_=new B;else if(v==="p25519")_=new I;else throw new Error("Unknown prime "+v);return C[v]=_,_};function U(R){if(typeof R=="string"){var v=s._prime(R);this.m=v.p,this.prime=v}else r(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}U.prototype._verify1=function(v){r(v.negative===0,"red works only with positives"),r(v.red,"red works only with red numbers")},U.prototype._verify2=function(v,_){r((v.negative|_.negative)===0,"red works only with positives"),r(v.red&&v.red===_.red,"red works only with red numbers")},U.prototype.imod=function(v){return this.prime?this.prime.ireduce(v)._forceRed(this):(u(v,v.umod(this.m)._forceRed(this)),v)},U.prototype.neg=function(v){return v.isZero()?v.clone():this.m.sub(v)._forceRed(this)},U.prototype.add=function(v,_){this._verify2(v,_);var b=v.add(_);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},U.prototype.iadd=function(v,_){this._verify2(v,_);var b=v.iadd(_);return b.cmp(this.m)>=0&&b.isub(this.m),b},U.prototype.sub=function(v,_){this._verify2(v,_);var b=v.sub(_);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},U.prototype.isub=function(v,_){this._verify2(v,_);var b=v.isub(_);return b.cmpn(0)<0&&b.iadd(this.m),b},U.prototype.shl=function(v,_){return this._verify1(v),this.imod(v.ushln(_))},U.prototype.imul=function(v,_){return this._verify2(v,_),this.imod(v.imul(_))},U.prototype.mul=function(v,_){return this._verify2(v,_),this.imod(v.mul(_))},U.prototype.isqr=function(v){return this.imul(v,v.clone())},U.prototype.sqr=function(v){return this.mul(v,v)},U.prototype.sqrt=function(v){if(v.isZero())return v.clone();var _=this.m.andln(3);if(r(_%2===1),_===3){var b=this.m.add(new s(1)).iushrn(2);return this.pow(v,b)}for(var A=this.m.subn(1),T=0;!A.isZero()&&A.andln(1)===0;)T++,A.iushrn(1);r(!A.isZero());var D=new s(1).toRed(this),V=D.redNeg(),O=this.m.subn(1).iushrn(1),x=this.m.bitLength();for(x=new s(2*x*x).toRed(this);this.pow(x,O).cmp(V)!==0;)x.redIAdd(V);for(var $=this.pow(x,A),K=this.pow(v,A.addn(1).iushrn(1)),E=this.pow(v,A),Y=T;E.cmp(D)!==0;){for(var j=E,X=0;j.cmp(D)!==0;X++)j=j.redSqr();r(X<Y);var ee=this.pow($,new s(1).iushln(Y-X-1));K=K.redMul(ee),$=ee.redSqr(),E=E.redMul($),Y=X}return K},U.prototype.invm=function(v){var _=v._invmp(this.m);return _.negative!==0?(_.negative=0,this.imod(_).redNeg()):this.imod(_)},U.prototype.pow=function(v,_){if(_.isZero())return new s(1).toRed(this);if(_.cmpn(1)===0)return v.clone();var b=4,A=new Array(1<<b);A[0]=new s(1).toRed(this),A[1]=v;for(var T=2;T<A.length;T++)A[T]=this.mul(A[T-1],v);var D=A[0],V=0,O=0,x=_.bitLength()%26;for(x===0&&(x=26),T=_.length-1;T>=0;T--){for(var $=_.words[T],K=x-1;K>=0;K--){var E=$>>K&1;if(D!==A[0]&&(D=this.sqr(D)),E===0&&V===0){O=0;continue}V<<=1,V|=E,O++,!(O!==b&&(T!==0||K!==0))&&(D=this.mul(D,A[V]),O=0,V=0)}x=26}return D},U.prototype.convertTo=function(v){var _=v.umod(this.m);return _===v?_.clone():_},U.prototype.convertFrom=function(v){var _=v.clone();return _.red=null,_},s.mont=function(v){return new G(v)};function G(R){U.call(this,R),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(G,U),G.prototype.convertTo=function(v){return this.imod(v.ushln(this.shift))},G.prototype.convertFrom=function(v){var _=this.imod(v.mul(this.rinv));return _.red=null,_},G.prototype.imul=function(v,_){if(v.isZero()||_.isZero())return v.words[0]=0,v.length=1,v;var b=v.imul(_),A=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=b.isub(A).iushrn(this.shift),D=T;return T.cmp(this.m)>=0?D=T.isub(this.m):T.cmpn(0)<0&&(D=T.iadd(this.m)),D._forceRed(this)},G.prototype.mul=function(v,_){if(v.isZero()||_.isZero())return new s(0)._forceRed(this);var b=v.mul(_),A=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=b.isub(A).iushrn(this.shift),D=T;return T.cmp(this.m)>=0?D=T.isub(this.m):T.cmpn(0)<0&&(D=T.iadd(this.m)),D._forceRed(this)},G.prototype.invm=function(v){var _=this.imod(v._invmp(this.m).mul(this.r2));return _._forceRed(this)}})(n,Po)})(ew);var qte=ew.exports;const wt=Jl(qte),Xte="logger/5.7.0";let rS=!1,iS=!1;const Ip={debug:1,default:2,info:2,warning:3,error:4,off:5};let sS=Ip.default,kv=null;function Kte(){try{const n=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{n.push(e)}}),n.length)throw new Error("missing "+n.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(n){return n.message}return null}const oS=Kte();var V_;(function(n){n.DEBUG="DEBUG",n.INFO="INFO",n.WARNING="WARNING",n.ERROR="ERROR",n.OFF="OFF"})(V_||(V_={}));var es;(function(n){n.UNKNOWN_ERROR="UNKNOWN_ERROR",n.NOT_IMPLEMENTED="NOT_IMPLEMENTED",n.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.TIMEOUT="TIMEOUT",n.BUFFER_OVERRUN="BUFFER_OVERRUN",n.NUMERIC_FAULT="NUMERIC_FAULT",n.MISSING_NEW="MISSING_NEW",n.INVALID_ARGUMENT="INVALID_ARGUMENT",n.MISSING_ARGUMENT="MISSING_ARGUMENT",n.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",n.CALL_EXCEPTION="CALL_EXCEPTION",n.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",n.NONCE_EXPIRED="NONCE_EXPIRED",n.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",n.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",n.TRANSACTION_REPLACED="TRANSACTION_REPLACED",n.ACTION_REJECTED="ACTION_REJECTED"})(es||(es={}));const aS="0123456789abcdef";class ie{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();Ip[r]==null&&this.throwArgumentError("invalid log level name","logLevel",e),sS>Ip[r]}debug(...e){this._log(ie.levels.DEBUG,e)}info(...e){this._log(ie.levels.INFO,e)}warn(...e){this._log(ie.levels.WARNING,e)}makeError(e,t,r){if(iS)return this.makeError("censored error",t,{});t||(t=ie.errors.UNKNOWN_ERROR),r||(r={});const i=[];Object.keys(r).forEach(l=>{const c=r[l];try{if(c instanceof Uint8Array){let u="";for(let d=0;d<c.length;d++)u+=aS[c[d]>>4],u+=aS[c[d]&15];i.push(l+"=Uint8Array(0x"+u+")")}else i.push(l+"="+JSON.stringify(c))}catch{i.push(l+"="+JSON.stringify(r[l].toString()))}}),i.push(`code=${t}`),i.push(`version=${this.version}`);const s=e;let o="";switch(t){case es.NUMERIC_FAULT:{o="NUMERIC_FAULT";const l=e;switch(l){case"overflow":case"underflow":case"division-by-zero":o+="-"+l;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case es.CALL_EXCEPTION:case es.INSUFFICIENT_FUNDS:case es.MISSING_NEW:case es.NONCE_EXPIRED:case es.REPLACEMENT_UNDERPRICED:case es.TRANSACTION_REPLACED:case es.UNPREDICTABLE_GAS_LIMIT:o=t;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const a=new Error(e);return a.reason=s,a.code=t,Object.keys(r).forEach(function(l){a[l]=r[l]}),a}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,ie.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,i){e||this.throwError(t,r,i)}assertArgument(e,t,r,i){e||this.throwArgumentError(t,r,i)}checkNormalize(e){oS&&this.throwError("platform missing String.prototype.normalize",ie.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:oS})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,ie.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,ie.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r?r=": "+r:r="",e<t&&this.throwError("missing argument"+r,ie.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,ie.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",ie.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",ie.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",ie.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return kv||(kv=new ie(Xte)),kv}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",ie.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),rS){if(!e)return;this.globalLogger().throwError("error censorship permanent",ie.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}iS=!!e,rS=!!t}static setLogLevel(e){const t=Ip[e.toLowerCase()];if(t==null){ie.globalLogger().warn("invalid log level - "+e);return}sS=t}static from(e){return new ie(e)}}ie.errors=es;ie.levels=V_;const Yte="bytes/5.7.0",Dn=new ie(Yte);function GC(n){return!!n.toHexString}function ru(n){return n.slice||(n.slice=function(){const e=Array.prototype.slice.call(arguments);return ru(new Uint8Array(Array.prototype.slice.apply(n,e)))}),n}function tw(n){return tn(n)&&!(n.length%2)||ld(n)}function lS(n){return typeof n=="number"&&n==n&&n%1===0}function ld(n){if(n==null)return!1;if(n.constructor===Uint8Array)return!0;if(typeof n=="string"||!lS(n.length)||n.length<0)return!1;for(let e=0;e<n.length;e++){const t=n[e];if(!lS(t)||t<0||t>=256)return!1}return!0}function ut(n,e){if(e||(e={}),typeof n=="number"){Dn.checkSafeUint53(n,"invalid arrayify value");const t=[];for(;n;)t.unshift(n&255),n=parseInt(String(n/256));return t.length===0&&t.push(0),ru(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),GC(n)&&(n=n.toHexString()),tn(n)){let t=n.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":Dn.throwArgumentError("hex data is odd-length","value",n));const r=[];for(let i=0;i<t.length;i+=2)r.push(parseInt(t.substring(i,i+2),16));return ru(new Uint8Array(r))}return ld(n)?ru(new Uint8Array(n)):Dn.throwArgumentError("invalid arrayify value","value",n)}function mi(n){const e=n.map(i=>ut(i)),t=e.reduce((i,s)=>i+s.length,0),r=new Uint8Array(t);return e.reduce((i,s)=>(r.set(s,i),i+s.length),0),ru(r)}function Vu(n){let e=ut(n);if(e.length===0)return e;let t=0;for(;t<e.length&&e[t]===0;)t++;return t&&(e=e.slice(t)),e}function Qte(n,e){n=ut(n),n.length>e&&Dn.throwArgumentError("value out of range","value",arguments[0]);const t=new Uint8Array(e);return t.set(n,e-n.length),ru(t)}function tn(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||e&&n.length!==2+2*e)}const Bv="0123456789abcdef";function rt(n,e){if(e||(e={}),typeof n=="number"){Dn.checkSafeUint53(n,"invalid hexlify value");let t="";for(;n;)t=Bv[n&15]+t,n=Math.floor(n/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof n=="bigint")return n=n.toString(16),n.length%2?"0x0"+n:"0x"+n;if(e.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),GC(n))return n.toHexString();if(tn(n))return n.length%2&&(e.hexPad==="left"?n="0x0"+n.substring(2):e.hexPad==="right"?n+="0":Dn.throwArgumentError("hex data is odd-length","value",n)),n.toLowerCase();if(ld(n)){let t="0x";for(let r=0;r<n.length;r++){let i=n[r];t+=Bv[(i&240)>>4]+Bv[i&15]}return t}return Dn.throwArgumentError("invalid hexlify value","value",n)}function ql(n){if(typeof n!="string")n=rt(n);else if(!tn(n)||n.length%2)return null;return(n.length-2)/2}function Er(n,e,t){return typeof n!="string"?n=rt(n):(!tn(n)||n.length%2)&&Dn.throwArgumentError("invalid hexData","value",n),e=2+2*e,t!=null?"0x"+n.substring(e,2+2*t):"0x"+n.substring(e)}function Xr(n){let e="0x";return n.forEach(t=>{e+=rt(t).substring(2)}),e}function nw(n){const e=Zte(rt(n,{hexPad:"left"}));return e==="0x"?"0x0":e}function Zte(n){typeof n!="string"&&(n=rt(n)),tn(n)||Dn.throwArgumentError("invalid hex string","value",n),n=n.substring(2);let e=0;for(;e<n.length&&n[e]==="0";)e++;return"0x"+n.substring(e)}function Nn(n,e){for(typeof n!="string"?n=rt(n):tn(n)||Dn.throwArgumentError("invalid hex string","value",n),n.length>2*e+2&&Dn.throwArgumentError("value out of range","value",arguments[1]);n.length<2*e+2;)n="0x0"+n.substring(2);return n}function J0(n){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(tw(n)){let t=ut(n);t.length===64?(e.v=27+(t[32]>>7),t[32]&=127,e.r=rt(t.slice(0,32)),e.s=rt(t.slice(32,64))):t.length===65?(e.r=rt(t.slice(0,32)),e.s=rt(t.slice(32,64)),e.v=t[64]):Dn.throwArgumentError("invalid signature string","signature",n),e.v<27&&(e.v===0||e.v===1?e.v+=27:Dn.throwArgumentError("signature invalid v byte","signature",n)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=rt(t.slice(32,64))}else{if(e.r=n.r,e.s=n.s,e.v=n.v,e.recoveryParam=n.recoveryParam,e._vs=n._vs,e._vs!=null){const i=Qte(ut(e._vs),32);e._vs=rt(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&Dn.throwArgumentError("signature recoveryParam mismatch _vs","signature",n),i[0]&=127;const o=rt(i);e.s==null?e.s=o:e.s!==o&&Dn.throwArgumentError("signature v mismatch _vs","signature",n)}if(e.recoveryParam==null)e.v==null?Dn.throwArgumentError("signature missing v and recoveryParam","signature",n):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&Dn.throwArgumentError("signature recoveryParam mismatch v","signature",n)}e.r==null||!tn(e.r)?Dn.throwArgumentError("signature missing or invalid r","signature",n):e.r=Nn(e.r,32),e.s==null||!tn(e.s)?Dn.throwArgumentError("signature missing or invalid s","signature",n):e.s=Nn(e.s,32);const t=ut(e.s);t[0]>=128&&Dn.throwArgumentError("signature s out of range","signature",n),e.recoveryParam&&(t[0]|=128);const r=rt(t);e._vs&&(tn(e._vs)||Dn.throwArgumentError("signature invalid _vs","signature",n),e._vs=Nn(e._vs,32)),e._vs==null?e._vs=r:e._vs!==r&&Dn.throwArgumentError("signature _vs mismatch v and s","signature",n)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}const VC="bignumber/5.7.0";var Km=wt.BN;const wo=new ie(VC),Lv={},cS=9007199254740991;function Jte(n){return n!=null&&(Ne.isBigNumber(n)||typeof n=="number"&&n%1===0||typeof n=="string"&&!!n.match(/^-?[0-9]+$/)||tn(n)||typeof n=="bigint"||ld(n))}let uS=!1;class Ne{constructor(e,t){e!==Lv&&wo.throwError("cannot call constructor directly; use BigNumber.from",ie.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return $r(Ut(this).fromTwos(e))}toTwos(e){return $r(Ut(this).toTwos(e))}abs(){return this._hex[0]==="-"?Ne.from(this._hex.substring(1)):this}add(e){return $r(Ut(this).add(Ut(e)))}sub(e){return $r(Ut(this).sub(Ut(e)))}div(e){return Ne.from(e).isZero()&&Ri("division-by-zero","div"),$r(Ut(this).div(Ut(e)))}mul(e){return $r(Ut(this).mul(Ut(e)))}mod(e){const t=Ut(e);return t.isNeg()&&Ri("division-by-zero","mod"),$r(Ut(this).umod(t))}pow(e){const t=Ut(e);return t.isNeg()&&Ri("negative-power","pow"),$r(Ut(this).pow(t))}and(e){const t=Ut(e);return(this.isNegative()||t.isNeg())&&Ri("unbound-bitwise-result","and"),$r(Ut(this).and(t))}or(e){const t=Ut(e);return(this.isNegative()||t.isNeg())&&Ri("unbound-bitwise-result","or"),$r(Ut(this).or(t))}xor(e){const t=Ut(e);return(this.isNegative()||t.isNeg())&&Ri("unbound-bitwise-result","xor"),$r(Ut(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&Ri("negative-width","mask"),$r(Ut(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Ri("negative-width","shl"),$r(Ut(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Ri("negative-width","shr"),$r(Ut(this).shrn(e))}eq(e){return Ut(this).eq(Ut(e))}lt(e){return Ut(this).lt(Ut(e))}lte(e){return Ut(this).lte(Ut(e))}gt(e){return Ut(this).gt(Ut(e))}gte(e){return Ut(this).gte(Ut(e))}isNegative(){return this._hex[0]==="-"}isZero(){return Ut(this).isZero()}toNumber(){try{return Ut(this).toNumber()}catch{Ri("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return wo.throwError("this platform does not support BigInt",ie.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?uS||(uS=!0,wo.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?wo.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",ie.errors.UNEXPECTED_ARGUMENT,{}):wo.throwError("BigNumber.toString does not accept parameters",ie.errors.UNEXPECTED_ARGUMENT,{})),Ut(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof Ne)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new Ne(Lv,Of(e)):e.match(/^-?[0-9]+$/)?new Ne(Lv,Of(new Km(e))):wo.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Ri("underflow","BigNumber.from",e),(e>=cS||e<=-cS)&&Ri("overflow","BigNumber.from",e),Ne.from(String(e));const t=e;if(typeof t=="bigint")return Ne.from(t.toString());if(ld(t))return Ne.from(rt(t));if(t)if(t.toHexString){const r=t.toHexString();if(typeof r=="string")return Ne.from(r)}else{let r=t._hex;if(r==null&&t.type==="BigNumber"&&(r=t.hex),typeof r=="string"&&(tn(r)||r[0]==="-"&&tn(r.substring(1))))return Ne.from(r)}return wo.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function Of(n){if(typeof n!="string")return Of(n.toString(16));if(n[0]==="-")return n=n.substring(1),n[0]==="-"&&wo.throwArgumentError("invalid hex","value",n),n=Of(n),n==="0x00"?n:"-"+n;if(n.substring(0,2)!=="0x"&&(n="0x"+n),n==="0x")return"0x00";for(n.length%2&&(n="0x0"+n.substring(2));n.length>4&&n.substring(0,4)==="0x00";)n="0x"+n.substring(4);return n}function $r(n){return Ne.from(Of(n))}function Ut(n){const e=Ne.from(n).toHexString();return e[0]==="-"?new Km("-"+e.substring(3),16):new Km(e.substring(2),16)}function Ri(n,e,t){const r={fault:n,operation:e};return t!=null&&(r.value=t),wo.throwError(n,ie.errors.NUMERIC_FAULT,r)}function ene(n){return new Km(n,36).toString(16)}const Nr=new ie(VC),Yd={},$C=Ne.from(0),jC=Ne.from(-1);function WC(n,e,t,r){const i={fault:e,operation:t};return r!==void 0&&(i.value=r),Nr.throwError(n,ie.errors.NUMERIC_FAULT,i)}let Qd="0";for(;Qd.length<256;)Qd+=Qd;function rw(n){if(typeof n!="number")try{n=Ne.from(n).toNumber()}catch{}return typeof n=="number"&&n>=0&&n<=256&&!(n%1)?"1"+Qd.substring(0,n):Nr.throwArgumentError("invalid decimal size","decimals",n)}function Cp(n,e){e==null&&(e=0);const t=rw(e);n=Ne.from(n);const r=n.lt($C);r&&(n=n.mul(jC));let i=n.mod(t).toString();for(;i.length<t.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=n.div(t).toString();return t.length===1?n=s:n=s+"."+i,r&&(n="-"+n),n}function Ts(n,e){e==null&&(e=0);const t=rw(e);(typeof n!="string"||!n.match(/^-?[0-9.]+$/))&&Nr.throwArgumentError("invalid decimal value","value",n);const r=n.substring(0,1)==="-";r&&(n=n.substring(1)),n==="."&&Nr.throwArgumentError("missing value","value",n);const i=n.split(".");i.length>2&&Nr.throwArgumentError("too many decimal points","value",n);let s=i[0],o=i[1];for(s||(s="0"),o||(o="0");o[o.length-1]==="0";)o=o.substring(0,o.length-1);for(o.length>t.length-1&&WC("fractional component exceeds decimals","underflow","parseFixed"),o===""&&(o="0");o.length<t.length-1;)o+="0";const a=Ne.from(s),l=Ne.from(o);let c=a.mul(t).add(l);return r&&(c=c.mul(jC)),c}class iu{constructor(e,t,r,i){e!==Yd&&Nr.throwError("cannot use FixedFormat constructor; use FixedFormat.from",ie.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=r,this.decimals=i,this.name=(t?"":"u")+"fixed"+String(r)+"x"+String(i),this._multiplier=rw(i),Object.freeze(this)}static from(e){if(e instanceof iu)return e;typeof e=="number"&&(e=`fixed128x${e}`);let t=!0,r=128,i=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")t=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);s||Nr.throwArgumentError("invalid fixed format","format",e),t=s[1]!=="u",r=parseInt(s[2]),i=parseInt(s[3])}}else if(e){const s=(o,a,l)=>e[o]==null?l:(typeof e[o]!==a&&Nr.throwArgumentError("invalid fixed format ("+o+" not "+a+")","format."+o,e[o]),e[o]);t=s("signed","boolean",t),r=s("width","number",r),i=s("decimals","number",i)}return r%8&&Nr.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",r),i>80&&Nr.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new iu(Yd,t,r,i)}}class pr{constructor(e,t,r,i){e!==Yd&&Nr.throwError("cannot use FixedNumber constructor; use FixedNumber.from",ie.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=i,this._hex=t,this._value=r,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Nr.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const t=Ts(this._value,this.format.decimals),r=Ts(e._value,e.format.decimals);return pr.fromValue(t.add(r),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const t=Ts(this._value,this.format.decimals),r=Ts(e._value,e.format.decimals);return pr.fromValue(t.sub(r),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const t=Ts(this._value,this.format.decimals),r=Ts(e._value,e.format.decimals);return pr.fromValue(t.mul(r).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const t=Ts(this._value,this.format.decimals),r=Ts(e._value,e.format.decimals);return pr.fromValue(t.mul(this.format._multiplier).div(r),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=pr.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);return this.isNegative()&&r&&(t=t.subUnsafe(dS.toFormat(t.format))),t}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=pr.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);return!this.isNegative()&&r&&(t=t.addUnsafe(dS.toFormat(t.format))),t}round(e){e==null&&(e=0);const t=this.toString().split(".");if(t.length===1&&t.push("0"),(e<0||e>80||e%1)&&Nr.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;const r=pr.from("1"+Qd.substring(0,e),this.format),i=tne.toFormat(this.format);return this.mulUnsafe(r).addUnsafe(i).floor().divUnsafe(r)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&Nr.throwArgumentError("invalid byte width","width",e);const t=Ne.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return Nn(t,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return pr.fromString(this._value,e)}static fromValue(e,t,r){return r==null&&t!=null&&!Jte(t)&&(r=t,t=null),t==null&&(t=0),r==null&&(r="fixed"),pr.fromString(Cp(e,t),iu.from(r))}static fromString(e,t){t==null&&(t="fixed");const r=iu.from(t),i=Ts(e,r.decimals);!r.signed&&i.lt($C)&&WC("unsigned value cannot be negative","overflow","value",e);let s=null;r.signed?s=i.toTwos(r.width).toHexString():(s=i.toHexString(),s=Nn(s,r.width/8));const o=Cp(i,r.decimals);return new pr(Yd,s,o,r)}static fromBytes(e,t){t==null&&(t="fixed");const r=iu.from(t);if(ut(e).length>r.width/8)throw new Error("overflow");let i=Ne.from(e);r.signed&&(i=i.fromTwos(r.width));const s=i.toTwos((r.signed?0:1)+r.width).toHexString(),o=Cp(i,r.decimals);return new pr(Yd,s,o,r)}static from(e,t){if(typeof e=="string")return pr.fromString(e,t);if(ld(e))return pr.fromBytes(e,t);try{return pr.fromValue(e,0,t)}catch(r){if(r.code!==ie.errors.INVALID_ARGUMENT)throw r}return Nr.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const dS=pr.from(1),tne=pr.from("0.5"),nne="properties/5.7.0";var rne=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Ym=new ie(nne);function Te(n,e,t){Object.defineProperty(n,e,{enumerable:!0,value:t,writable:!1})}function Gs(n,e){for(let t=0;t<32;t++){if(n[e])return n[e];if(!n.prototype||typeof n.prototype!="object")break;n=Object.getPrototypeOf(n.prototype).constructor}return null}function $n(n){return rne(this,void 0,void 0,function*(){const e=Object.keys(n).map(r=>{const i=n[r];return Promise.resolve(i).then(s=>({key:r,value:s}))});return(yield Promise.all(e)).reduce((r,i)=>(r[i.key]=i.value,r),{})})}function ine(n,e){(!n||typeof n!="object")&&Ym.throwArgumentError("invalid object","object",n),Object.keys(n).forEach(t=>{e[t]||Ym.throwArgumentError("invalid object key - "+t,"transaction:"+t,n)})}function Qn(n){const e={};for(const t in n)e[t]=n[t];return e}const sne={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function qC(n){if(n==null||sne[typeof n])return!0;if(Array.isArray(n)||typeof n=="object"){if(!Object.isFrozen(n))return!1;const e=Object.keys(n);for(let t=0;t<e.length;t++){let r=null;try{r=n[e[t]]}catch{continue}if(!qC(r))return!1}return!0}return Ym.throwArgumentError(`Cannot deepCopy ${typeof n}`,"object",n)}function one(n){if(qC(n))return n;if(Array.isArray(n))return Object.freeze(n.map(e=>Xo(e)));if(typeof n=="object"){const e={};for(const t in n){const r=n[t];r!==void 0&&Te(e,t,Xo(r))}return e}return Ym.throwArgumentError(`Cannot deepCopy ${typeof n}`,"object",n)}function Xo(n){return one(n)}class lh{constructor(e){for(const t in e)this[t]=Xo(e[t])}}const ch="abi/5.7.0",$t=new ie(ch),Xl={};let fS={calldata:!0,memory:!0,storage:!0},ane={calldata:!0,memory:!0};function tp(n,e){if(n==="bytes"||n==="string"){if(fS[e])return!0}else if(n==="address"){if(e==="payable")return!0}else if((n.indexOf("[")>=0||n==="tuple")&&ane[e])return!0;return(fS[e]||e==="payable")&&$t.throwArgumentError("invalid modifier","name",e),!1}function lne(n,e){let t=n;function r(a){$t.throwArgumentError(`unexpected character at position ${a}`,"param",n)}n=n.replace(/\s/g," ");function i(a){let l={type:"",name:"",parent:a,state:{allowType:!0}};return e&&(l.indexed=!1),l}let s={type:"",name:"",state:{allowType:!0}},o=s;for(let a=0;a<n.length;a++){let l=n[a];switch(l){case"(":o.state.allowType&&o.type===""?o.type="tuple":o.state.allowParams||r(a),o.state.allowType=!1,o.type=Uc(o.type),o.components=[i(o)],o=o.components[0];break;case")":delete o.state,o.name==="indexed"&&(e||r(a),o.indexed=!0,o.name=""),tp(o.type,o.name)&&(o.name=""),o.type=Uc(o.type);let c=o;o=o.parent,o||r(a),delete c.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,o.name==="indexed"&&(e||r(a),o.indexed=!0,o.name=""),tp(o.type,o.name)&&(o.name=""),o.type=Uc(o.type);let u=i(o.parent);o.parent.components.push(u),delete o.parent,o=u;break;case" ":o.state.allowType&&o.type!==""&&(o.type=Uc(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&o.name!==""&&(o.name==="indexed"?(e||r(a),o.indexed&&r(a),o.indexed=!0,o.name=""):tp(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||r(a),o.type+=l,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||r(a),o.type+=l,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=l,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=l,delete o.state.allowArray):o.state.readArray?o.type+=l:r(a)}}return o.parent&&$t.throwArgumentError("unexpected eof","param",n),delete s.state,o.name==="indexed"?(e||r(t.length-7),o.indexed&&r(t.length-7),o.indexed=!0,o.name=""):tp(o.type,o.name)&&(o.name=""),s.type=Uc(s.type),s}function Pp(n,e){for(let t in e)Te(n,t,e[t])}const en=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),cne=new RegExp(/^(.*)\[([0-9]*)\]$/);class or{constructor(e,t){e!==Xl&&$t.throwError("use fromString",ie.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),Pp(this,t);let r=this.type.match(cne);r?Pp(this,{arrayLength:parseInt(r[2]||"-1"),arrayChildren:or.fromObject({type:r[1],components:this.components}),baseType:"array"}):Pp(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=en.sighash),en[e]||$t.throwArgumentError("invalid format type","format",e),e===en.json){let r={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(r.indexed=this.indexed),this.components&&(r.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(r)}let t="";return this.baseType==="array"?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==en.sighash&&(t+=this.type),t+="("+this.components.map(r=>r.format(e)).join(e===en.full?", ":",")+")"):t+=this.type,e!==en.sighash&&(this.indexed===!0&&(t+=" indexed"),e===en.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return typeof e=="string"?or.fromString(e,t):or.fromObject(e)}static fromObject(e){return or.isParamType(e)?e:new or(Xl,{name:e.name||null,type:Uc(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(or.fromObject):null})}static fromString(e,t){function r(i){return or.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components})}return r(lne(e,!!t))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function Ff(n,e){return dne(n).map(t=>or.fromString(t,e))}class Lo{constructor(e,t){e!==Xl&&$t.throwError("use a static from method",ie.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),Pp(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return Lo.isFragment(e)?e:typeof e=="string"?Lo.fromString(e):Lo.fromObject(e)}static fromObject(e){if(Lo.isFragment(e))return e;switch(e.type){case"function":return Os.fromObject(e);case"event":return Co.fromObject(e);case"constructor":return Ds.fromObject(e);case"error":return Sa.fromObject(e);case"fallback":case"receive":return null}return $t.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?Co.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?Os.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?Ds.fromString(e.trim()):e.split(" ")[0]==="error"?Sa.fromString(e.substring(5).trim()):$t.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class Co extends Lo{format(e){if(e||(e=en.sighash),en[e]||$t.throwArgumentError("invalid format type","format",e),e===en.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==en.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===en.full?", ":",")+") ",e!==en.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return typeof e=="string"?Co.fromString(e):Co.fromObject(e)}static fromObject(e){if(Co.isEventFragment(e))return e;e.type!=="event"&&$t.throwArgumentError("invalid event object","value",e);const t={name:Uf(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(or.fromObject):[],type:"event"};return new Co(Xl,t)}static fromString(e){let t=e.match(Hf);t||$t.throwArgumentError("invalid event string","value",e);let r=!1;return t[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":r=!0;break;case"":break;default:$t.warn("unknown modifier: "+i)}}),Co.fromObject({name:t[1].trim(),anonymous:r,inputs:Ff(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function XC(n,e){e.gas=null;let t=n.split("@");return t.length!==1?(t.length>2&&$t.throwArgumentError("invalid human-readable ABI signature","value",n),t[1].match(/^[0-9]+$/)||$t.throwArgumentError("invalid human-readable ABI signature gas","value",n),e.gas=Ne.from(t[1]),t[0]):n}function KC(n,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",n.split(" ").forEach(t=>{switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:}})}function YC(n){let e={constant:!1,payable:!0,stateMutability:"payable"};return n.stateMutability!=null?(e.stateMutability=n.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",n.constant!=null&&!!n.constant!==e.constant&&$t.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",n),e.payable=e.stateMutability==="payable",n.payable!=null&&!!n.payable!==e.payable&&$t.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",n)):n.payable!=null?(e.payable=!!n.payable,n.constant==null&&!e.payable&&n.type!=="constructor"&&$t.throwArgumentError("unable to determine stateMutability","value",n),e.constant=!!n.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&$t.throwArgumentError("cannot have constant payable function","value",n)):n.constant!=null?(e.constant=!!n.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):n.type!=="constructor"&&$t.throwArgumentError("unable to determine stateMutability","value",n),e}class Ds extends Lo{format(e){if(e||(e=en.sighash),en[e]||$t.throwArgumentError("invalid format type","format",e),e===en.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});e===en.sighash&&$t.throwError("cannot format a constructor for sighash",ie.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map(r=>r.format(e)).join(e===en.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "),t.trim()}static from(e){return typeof e=="string"?Ds.fromString(e):Ds.fromObject(e)}static fromObject(e){if(Ds.isConstructorFragment(e))return e;e.type!=="constructor"&&$t.throwArgumentError("invalid constructor object","value",e);let t=YC(e);t.constant&&$t.throwArgumentError("constructor cannot be constant","value",e);const r={name:null,type:e.type,inputs:e.inputs?e.inputs.map(or.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?Ne.from(e.gas):null};return new Ds(Xl,r)}static fromString(e){let t={type:"constructor"};e=XC(e,t);let r=e.match(Hf);return(!r||r[1].trim()!=="constructor")&&$t.throwArgumentError("invalid constructor string","value",e),t.inputs=Ff(r[2].trim(),!1),KC(r[3].trim(),t),Ds.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class Os extends Ds{format(e){if(e||(e=en.sighash),en[e]||$t.throwArgumentError("invalid format type","format",e),e===en.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e))),outputs:this.outputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==en.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===en.full?", ":",")+") ",e!==en.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map(r=>r.format(e)).join(", ")+") "),this.gas!=null&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return typeof e=="string"?Os.fromString(e):Os.fromObject(e)}static fromObject(e){if(Os.isFunctionFragment(e))return e;e.type!=="function"&&$t.throwArgumentError("invalid function object","value",e);let t=YC(e);const r={type:e.type,name:Uf(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(or.fromObject):[],outputs:e.outputs?e.outputs.map(or.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?Ne.from(e.gas):null};return new Os(Xl,r)}static fromString(e){let t={type:"function"};e=XC(e,t);let r=e.split(" returns ");r.length>2&&$t.throwArgumentError("invalid function string","value",e);let i=r[0].match(Hf);if(i||$t.throwArgumentError("invalid function signature","value",e),t.name=i[1].trim(),t.name&&Uf(t.name),t.inputs=Ff(i[2],!1),KC(i[3].trim(),t),r.length>1){let s=r[1].match(Hf);(s[1].trim()!=""||s[3].trim()!="")&&$t.throwArgumentError("unexpected tokens","value",e),t.outputs=Ff(s[2],!1)}else t.outputs=[];return Os.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function hS(n){const e=n.format();return(e==="Error(string)"||e==="Panic(uint256)")&&$t.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",n),n}class Sa extends Lo{format(e){if(e||(e=en.sighash),en[e]||$t.throwArgumentError("invalid format type","format",e),e===en.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==en.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===en.full?", ":",")+") ",t.trim()}static from(e){return typeof e=="string"?Sa.fromString(e):Sa.fromObject(e)}static fromObject(e){if(Sa.isErrorFragment(e))return e;e.type!=="error"&&$t.throwArgumentError("invalid error object","value",e);const t={type:e.type,name:Uf(e.name),inputs:e.inputs?e.inputs.map(or.fromObject):[]};return hS(new Sa(Xl,t))}static fromString(e){let t={type:"error"},r=e.match(Hf);return r||$t.throwArgumentError("invalid error signature","value",e),t.name=r[1].trim(),t.name&&Uf(t.name),t.inputs=Ff(r[2],!1),hS(Sa.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function Uc(n){return n.match(/^uint($|[^1-9])/)?n="uint256"+n.substring(4):n.match(/^int($|[^1-9])/)&&(n="int256"+n.substring(3)),n}const une=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function Uf(n){return(!n||!n.match(une))&&$t.throwArgumentError(`invalid identifier "${n}"`,"value",n),n}const Hf=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function dne(n){n=n.trim();let e=[],t="",r=0;for(let i=0;i<n.length;i++){let s=n[i];s===","&&r===0?(e.push(t),t=""):(t+=s,s==="("?r++:s===")"&&(r--,r===-1&&$t.throwArgumentError("unbalanced parenthesis","value",n)))}return t&&e.push(t),e}const iw=new ie(ch);function fne(n){const e=[],t=function(r,i){if(Array.isArray(i))for(let s in i){const o=r.slice();o.push(s);try{t(o,i[s])}catch(a){e.push({path:o,error:a})}}};return t([],n),e}class ra{constructor(e,t,r,i){this.name=e,this.type=t,this.localName=r,this.dynamic=i}_throwError(e,t){iw.throwArgumentError(e,this.localName,t)}}class $_{constructor(e){Te(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return Xr(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(mi(e._data))}writeBytes(e){let t=ut(e);const r=t.length%this.wordSize;return r&&(t=mi([t,this._padding.slice(r)])),this._writeData(t)}_getValue(e){let t=ut(Ne.from(e));return t.length>this.wordSize&&iw.throwError("value out-of-bounds",ie.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=mi([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class Qm{constructor(e,t,r,i){Te(this,"_data",ut(e)),Te(this,"wordSize",t||32),Te(this,"_coerceFunc",r),Te(this,"allowLoose",i),this._offset=0}get data(){return rt(this._data)}get consumed(){return this._offset}static coerce(e,t){let r=e.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):Qm.coerce(e,t)}_peekBytes(e,t,r){let i=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&r&&this._offset+t<=this._data.length?i=t:iw.throwError("data out-of-bounds",ie.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new Qm(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let r=this._peekBytes(0,e,!!t);return this._offset+=r.length,r.slice(0,e)}readValue(){return Ne.from(this.readBytes(this.wordSize))}}var QC={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(n){(function(){var e="input is invalid type",t="finalize already called",r=typeof window=="object",i=r?window:{};i.JS_SHA3_NO_WINDOW&&(r=!1);var s=!r&&typeof self=="object",o=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?i=Po:s&&(i=self);var a=!i.JS_SHA3_NO_COMMON_JS&&!0&&n.exports,l=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",c="0123456789abcdef".split(""),u=[31,7936,2031616,520093696],d=[4,1024,262144,67108864],f=[1,256,65536,16777216],p=[6,1536,393216,100663296],m=[0,8,16,24],g=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],y=[224,256,384,512],h=[128,256],w=["hex","buffer","arrayBuffer","array","digest"],M={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(E){return Object.prototype.toString.call(E)==="[object Array]"}),l&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(E){return typeof E=="object"&&E.buffer&&E.buffer.constructor===ArrayBuffer});for(var S=function(E,Y,j){return function(X){return new x(E,Y,E).update(X)[j]()}},C=function(E,Y,j){return function(X,ee){return new x(E,Y,ee).update(X)[j]()}},k=function(E,Y,j){return function(X,ee,le,me){return v["cshake"+E].update(X,ee,le,me)[j]()}},F=function(E,Y,j){return function(X,ee,le,me){return v["kmac"+E].update(X,ee,le,me)[j]()}},N=function(E,Y,j,X){for(var ee=0;ee<w.length;++ee){var le=w[ee];E[le]=Y(j,X,le)}return E},B=function(E,Y){var j=S(E,Y,"hex");return j.create=function(){return new x(E,Y,E)},j.update=function(X){return j.create().update(X)},N(j,S,E,Y)},I=function(E,Y){var j=C(E,Y,"hex");return j.create=function(X){return new x(E,Y,X)},j.update=function(X,ee){return j.create(ee).update(X)},N(j,C,E,Y)},U=function(E,Y){var j=M[E],X=k(E,Y,"hex");return X.create=function(ee,le,me){return!le&&!me?v["shake"+E].create(ee):new x(E,Y,ee).bytepad([le,me],j)},X.update=function(ee,le,me,he){return X.create(le,me,he).update(ee)},N(X,k,E,Y)},G=function(E,Y){var j=M[E],X=F(E,Y,"hex");return X.create=function(ee,le,me){return new $(E,Y,le).bytepad(["KMAC",me],j).bytepad([ee],j)},X.update=function(ee,le,me,he){return X.create(ee,me,he).update(le)},N(X,F,E,Y)},R=[{name:"keccak",padding:f,bits:y,createMethod:B},{name:"sha3",padding:p,bits:y,createMethod:B},{name:"shake",padding:u,bits:h,createMethod:I},{name:"cshake",padding:d,bits:h,createMethod:U},{name:"kmac",padding:d,bits:h,createMethod:G}],v={},_=[],b=0;b<R.length;++b)for(var A=R[b],T=A.bits,D=0;D<T.length;++D){var V=A.name+"_"+T[D];if(_.push(V),v[V]=A.createMethod(T[D],A.padding),A.name!=="sha3"){var O=A.name+T[D];_.push(O),v[O]=v[V]}}function x(E,Y,j){this.blocks=[],this.s=[],this.padding=Y,this.outputBits=j,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(E<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=j>>5,this.extraBytes=(j&31)>>3;for(var X=0;X<50;++X)this.s[X]=0}x.prototype.update=function(E){if(this.finalized)throw new Error(t);var Y,j=typeof E;if(j!=="string"){if(j==="object"){if(E===null)throw new Error(e);if(l&&E.constructor===ArrayBuffer)E=new Uint8Array(E);else if(!Array.isArray(E)&&(!l||!ArrayBuffer.isView(E)))throw new Error(e)}else throw new Error(e);Y=!0}for(var X=this.blocks,ee=this.byteCount,le=E.length,me=this.blockCount,he=0,je=this.s,q,ze;he<le;){if(this.reset)for(this.reset=!1,X[0]=this.block,q=1;q<me+1;++q)X[q]=0;if(Y)for(q=this.start;he<le&&q<ee;++he)X[q>>2]|=E[he]<<m[q++&3];else for(q=this.start;he<le&&q<ee;++he)ze=E.charCodeAt(he),ze<128?X[q>>2]|=ze<<m[q++&3]:ze<2048?(X[q>>2]|=(192|ze>>6)<<m[q++&3],X[q>>2]|=(128|ze&63)<<m[q++&3]):ze<55296||ze>=57344?(X[q>>2]|=(224|ze>>12)<<m[q++&3],X[q>>2]|=(128|ze>>6&63)<<m[q++&3],X[q>>2]|=(128|ze&63)<<m[q++&3]):(ze=65536+((ze&1023)<<10|E.charCodeAt(++he)&1023),X[q>>2]|=(240|ze>>18)<<m[q++&3],X[q>>2]|=(128|ze>>12&63)<<m[q++&3],X[q>>2]|=(128|ze>>6&63)<<m[q++&3],X[q>>2]|=(128|ze&63)<<m[q++&3]);if(this.lastByteIndex=q,q>=ee){for(this.start=q-ee,this.block=X[me],q=0;q<me;++q)je[q]^=X[q];K(je),this.reset=!0}else this.start=q}return this},x.prototype.encode=function(E,Y){var j=E&255,X=1,ee=[j];for(E=E>>8,j=E&255;j>0;)ee.unshift(j),E=E>>8,j=E&255,++X;return Y?ee.push(X):ee.unshift(X),this.update(ee),ee.length},x.prototype.encodeString=function(E){var Y,j=typeof E;if(j!=="string"){if(j==="object"){if(E===null)throw new Error(e);if(l&&E.constructor===ArrayBuffer)E=new Uint8Array(E);else if(!Array.isArray(E)&&(!l||!ArrayBuffer.isView(E)))throw new Error(e)}else throw new Error(e);Y=!0}var X=0,ee=E.length;if(Y)X=ee;else for(var le=0;le<E.length;++le){var me=E.charCodeAt(le);me<128?X+=1:me<2048?X+=2:me<55296||me>=57344?X+=3:(me=65536+((me&1023)<<10|E.charCodeAt(++le)&1023),X+=4)}return X+=this.encode(X*8),this.update(E),X},x.prototype.bytepad=function(E,Y){for(var j=this.encode(Y),X=0;X<E.length;++X)j+=this.encodeString(E[X]);var ee=Y-j%Y,le=[];return le.length=ee,this.update(le),this},x.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var E=this.blocks,Y=this.lastByteIndex,j=this.blockCount,X=this.s;if(E[Y>>2]|=this.padding[Y&3],this.lastByteIndex===this.byteCount)for(E[0]=E[j],Y=1;Y<j+1;++Y)E[Y]=0;for(E[j-1]|=2147483648,Y=0;Y<j;++Y)X[Y]^=E[Y];K(X)}},x.prototype.toString=x.prototype.hex=function(){this.finalize();for(var E=this.blockCount,Y=this.s,j=this.outputBlocks,X=this.extraBytes,ee=0,le=0,me="",he;le<j;){for(ee=0;ee<E&&le<j;++ee,++le)he=Y[ee],me+=c[he>>4&15]+c[he&15]+c[he>>12&15]+c[he>>8&15]+c[he>>20&15]+c[he>>16&15]+c[he>>28&15]+c[he>>24&15];le%E===0&&(K(Y),ee=0)}return X&&(he=Y[ee],me+=c[he>>4&15]+c[he&15],X>1&&(me+=c[he>>12&15]+c[he>>8&15]),X>2&&(me+=c[he>>20&15]+c[he>>16&15])),me},x.prototype.arrayBuffer=function(){this.finalize();var E=this.blockCount,Y=this.s,j=this.outputBlocks,X=this.extraBytes,ee=0,le=0,me=this.outputBits>>3,he;X?he=new ArrayBuffer(j+1<<2):he=new ArrayBuffer(me);for(var je=new Uint32Array(he);le<j;){for(ee=0;ee<E&&le<j;++ee,++le)je[le]=Y[ee];le%E===0&&K(Y)}return X&&(je[ee]=Y[ee],he=he.slice(0,me)),he},x.prototype.buffer=x.prototype.arrayBuffer,x.prototype.digest=x.prototype.array=function(){this.finalize();for(var E=this.blockCount,Y=this.s,j=this.outputBlocks,X=this.extraBytes,ee=0,le=0,me=[],he,je;le<j;){for(ee=0;ee<E&&le<j;++ee,++le)he=le<<2,je=Y[ee],me[he]=je&255,me[he+1]=je>>8&255,me[he+2]=je>>16&255,me[he+3]=je>>24&255;le%E===0&&K(Y)}return X&&(he=le<<2,je=Y[ee],me[he]=je&255,X>1&&(me[he+1]=je>>8&255),X>2&&(me[he+2]=je>>16&255)),me};function $(E,Y,j){x.call(this,E,Y,j)}$.prototype=new x,$.prototype.finalize=function(){return this.encode(this.outputBits,!0),x.prototype.finalize.call(this)};var K=function(E){var Y,j,X,ee,le,me,he,je,q,ze,Qe,We,Pe,Nt,Me,W,H,te,de,Z,ne,ye,Ce,Ee,nt,Ae,Re,Oe,ot,Ie,Je,pt,lt,Q,Be,se,pe,Le,xe,Xe,sn,At,st,Wn,Vt,fn,vs,Kt,dn,ys,hn,on,_s,an,pn,bs,vn,yn,xs,ws,As,z,J;for(X=0;X<48;X+=2)ee=E[0]^E[10]^E[20]^E[30]^E[40],le=E[1]^E[11]^E[21]^E[31]^E[41],me=E[2]^E[12]^E[22]^E[32]^E[42],he=E[3]^E[13]^E[23]^E[33]^E[43],je=E[4]^E[14]^E[24]^E[34]^E[44],q=E[5]^E[15]^E[25]^E[35]^E[45],ze=E[6]^E[16]^E[26]^E[36]^E[46],Qe=E[7]^E[17]^E[27]^E[37]^E[47],We=E[8]^E[18]^E[28]^E[38]^E[48],Pe=E[9]^E[19]^E[29]^E[39]^E[49],Y=We^(me<<1|he>>>31),j=Pe^(he<<1|me>>>31),E[0]^=Y,E[1]^=j,E[10]^=Y,E[11]^=j,E[20]^=Y,E[21]^=j,E[30]^=Y,E[31]^=j,E[40]^=Y,E[41]^=j,Y=ee^(je<<1|q>>>31),j=le^(q<<1|je>>>31),E[2]^=Y,E[3]^=j,E[12]^=Y,E[13]^=j,E[22]^=Y,E[23]^=j,E[32]^=Y,E[33]^=j,E[42]^=Y,E[43]^=j,Y=me^(ze<<1|Qe>>>31),j=he^(Qe<<1|ze>>>31),E[4]^=Y,E[5]^=j,E[14]^=Y,E[15]^=j,E[24]^=Y,E[25]^=j,E[34]^=Y,E[35]^=j,E[44]^=Y,E[45]^=j,Y=je^(We<<1|Pe>>>31),j=q^(Pe<<1|We>>>31),E[6]^=Y,E[7]^=j,E[16]^=Y,E[17]^=j,E[26]^=Y,E[27]^=j,E[36]^=Y,E[37]^=j,E[46]^=Y,E[47]^=j,Y=ze^(ee<<1|le>>>31),j=Qe^(le<<1|ee>>>31),E[8]^=Y,E[9]^=j,E[18]^=Y,E[19]^=j,E[28]^=Y,E[29]^=j,E[38]^=Y,E[39]^=j,E[48]^=Y,E[49]^=j,Nt=E[0],Me=E[1],fn=E[11]<<4|E[10]>>>28,vs=E[10]<<4|E[11]>>>28,Oe=E[20]<<3|E[21]>>>29,ot=E[21]<<3|E[20]>>>29,ws=E[31]<<9|E[30]>>>23,As=E[30]<<9|E[31]>>>23,At=E[40]<<18|E[41]>>>14,st=E[41]<<18|E[40]>>>14,Q=E[2]<<1|E[3]>>>31,Be=E[3]<<1|E[2]>>>31,W=E[13]<<12|E[12]>>>20,H=E[12]<<12|E[13]>>>20,Kt=E[22]<<10|E[23]>>>22,dn=E[23]<<10|E[22]>>>22,Ie=E[33]<<13|E[32]>>>19,Je=E[32]<<13|E[33]>>>19,z=E[42]<<2|E[43]>>>30,J=E[43]<<2|E[42]>>>30,an=E[5]<<30|E[4]>>>2,pn=E[4]<<30|E[5]>>>2,se=E[14]<<6|E[15]>>>26,pe=E[15]<<6|E[14]>>>26,te=E[25]<<11|E[24]>>>21,de=E[24]<<11|E[25]>>>21,ys=E[34]<<15|E[35]>>>17,hn=E[35]<<15|E[34]>>>17,pt=E[45]<<29|E[44]>>>3,lt=E[44]<<29|E[45]>>>3,Ee=E[6]<<28|E[7]>>>4,nt=E[7]<<28|E[6]>>>4,bs=E[17]<<23|E[16]>>>9,vn=E[16]<<23|E[17]>>>9,Le=E[26]<<25|E[27]>>>7,xe=E[27]<<25|E[26]>>>7,Z=E[36]<<21|E[37]>>>11,ne=E[37]<<21|E[36]>>>11,on=E[47]<<24|E[46]>>>8,_s=E[46]<<24|E[47]>>>8,Wn=E[8]<<27|E[9]>>>5,Vt=E[9]<<27|E[8]>>>5,Ae=E[18]<<20|E[19]>>>12,Re=E[19]<<20|E[18]>>>12,yn=E[29]<<7|E[28]>>>25,xs=E[28]<<7|E[29]>>>25,Xe=E[38]<<8|E[39]>>>24,sn=E[39]<<8|E[38]>>>24,ye=E[48]<<14|E[49]>>>18,Ce=E[49]<<14|E[48]>>>18,E[0]=Nt^~W&te,E[1]=Me^~H&de,E[10]=Ee^~Ae&Oe,E[11]=nt^~Re&ot,E[20]=Q^~se&Le,E[21]=Be^~pe&xe,E[30]=Wn^~fn&Kt,E[31]=Vt^~vs&dn,E[40]=an^~bs&yn,E[41]=pn^~vn&xs,E[2]=W^~te&Z,E[3]=H^~de&ne,E[12]=Ae^~Oe&Ie,E[13]=Re^~ot&Je,E[22]=se^~Le&Xe,E[23]=pe^~xe&sn,E[32]=fn^~Kt&ys,E[33]=vs^~dn&hn,E[42]=bs^~yn&ws,E[43]=vn^~xs&As,E[4]=te^~Z&ye,E[5]=de^~ne&Ce,E[14]=Oe^~Ie&pt,E[15]=ot^~Je&lt,E[24]=Le^~Xe&At,E[25]=xe^~sn&st,E[34]=Kt^~ys&on,E[35]=dn^~hn&_s,E[44]=yn^~ws&z,E[45]=xs^~As&J,E[6]=Z^~ye&Nt,E[7]=ne^~Ce&Me,E[16]=Ie^~pt&Ee,E[17]=Je^~lt&nt,E[26]=Xe^~At&Q,E[27]=sn^~st&Be,E[36]=ys^~on&Wn,E[37]=hn^~_s&Vt,E[46]=ws^~z&an,E[47]=As^~J&pn,E[8]=ye^~Nt&W,E[9]=Ce^~Me&H,E[18]=pt^~Ee&Ae,E[19]=lt^~nt&Re,E[28]=At^~Q&se,E[29]=st^~Be&pe,E[38]=on^~Wn&fn,E[39]=_s^~Vt&vs,E[48]=z^~an&bs,E[49]=J^~pn&vn,E[0]^=g[X],E[1]^=g[X+1]};if(a)n.exports=v;else for(b=0;b<_.length;++b)i[_[b]]=v[_[b]]})()})(QC);var hne=QC.exports;const pne=Jl(hne);function Kn(n){return"0x"+pne.keccak_256(ut(n))}const mne="rlp/5.7.0",Is=new ie(mne);function pS(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function mS(n,e,t){let r=0;for(let i=0;i<t;i++)r=r*256+n[e+i];return r}function ZC(n){if(Array.isArray(n)){let r=[];if(n.forEach(function(s){r=r.concat(ZC(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=pS(r.length);return i.unshift(247+i.length),i.concat(r)}tw(n)||Is.throwArgumentError("RLP object must be BytesLike","object",n);const e=Array.prototype.slice.call(ut(n));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=pS(e.length);return t.unshift(183+t.length),t.concat(e)}function eg(n){return rt(ZC(n))}function gS(n,e,t,r){const i=[];for(;t<e+1+r;){const s=JC(n,t);i.push(s.result),t+=s.consumed,t>e+1+r&&Is.throwError("child data too short",ie.errors.BUFFER_OVERRUN,{})}return{consumed:1+r,result:i}}function JC(n,e){if(n.length===0&&Is.throwError("data too short",ie.errors.BUFFER_OVERRUN,{}),n[e]>=248){const t=n[e]-247;e+1+t>n.length&&Is.throwError("data short segment too short",ie.errors.BUFFER_OVERRUN,{});const r=mS(n,e+1,t);return e+1+t+r>n.length&&Is.throwError("data long segment too short",ie.errors.BUFFER_OVERRUN,{}),gS(n,e,e+1+t,t+r)}else if(n[e]>=192){const t=n[e]-192;return e+1+t>n.length&&Is.throwError("data array too short",ie.errors.BUFFER_OVERRUN,{}),gS(n,e,e+1,t)}else if(n[e]>=184){const t=n[e]-183;e+1+t>n.length&&Is.throwError("data array too short",ie.errors.BUFFER_OVERRUN,{});const r=mS(n,e+1,t);e+1+t+r>n.length&&Is.throwError("data array too short",ie.errors.BUFFER_OVERRUN,{});const i=rt(n.slice(e+1+t,e+1+t+r));return{consumed:1+t+r,result:i}}else if(n[e]>=128){const t=n[e]-128;e+1+t>n.length&&Is.throwError("data too short",ie.errors.BUFFER_OVERRUN,{});const r=rt(n.slice(e+1,e+1+t));return{consumed:1+t,result:r}}return{consumed:1,result:rt(n[e])}}function sw(n){const e=ut(n),t=JC(e,0);return t.consumed!==e.length&&Is.throwArgumentError("invalid rlp data","data",n),t.result}const gne="address/5.7.0",jc=new ie(gne);function vS(n){tn(n,20)||jc.throwArgumentError("invalid address","address",n),n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const r=ut(Kn(t));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const vne=9007199254740991;function yne(n){return Math.log10?Math.log10(n):Math.log(n)/Math.LN10}const ow={};for(let n=0;n<10;n++)ow[String(n)]=String(n);for(let n=0;n<26;n++)ow[String.fromCharCode(65+n)]=String(10+n);const yS=Math.floor(yne(vne));function _ne(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(r=>ow[r]).join("");for(;e.length>=yS;){let r=e.substring(0,yS);e=parseInt(r,10)%97+e.substring(r.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function yr(n){let e=null;if(typeof n!="string"&&jc.throwArgumentError("invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/))n.substring(0,2)!=="0x"&&(n="0x"+n),e=vS(n),n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==n&&jc.throwArgumentError("bad address checksum","address",n);else if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(n.substring(2,4)!==_ne(n)&&jc.throwArgumentError("bad icap checksum","address",n),e=ene(n.substring(4));e.length<40;)e="0"+e;e=vS("0x"+e)}else jc.throwArgumentError("invalid address","address",n);return e}function eP(n){let e=null;try{e=yr(n.from)}catch{jc.throwArgumentError("missing from address","transaction",n)}const t=Vu(ut(Ne.from(n.nonce).toHexString()));return yr(Er(Kn(eg([e,t])),12))}class bne extends ra{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=yr(t)}catch(r){this._throwError(r.message,t)}return e.writeValue(t)}decode(e){return yr(Nn(e.readValue().toHexString(),20))}}class xne extends ra{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const Wc=new ie(ch);function tP(n,e,t){let r=null;if(Array.isArray(t))r=t;else if(t&&typeof t=="object"){let l={};r=e.map(c=>{const u=c.localName;return u||Wc.throwError("cannot encode object for signature with missing names",ie.errors.INVALID_ARGUMENT,{argument:"values",coder:c,value:t}),l[u]&&Wc.throwError("cannot encode object for signature with duplicate names",ie.errors.INVALID_ARGUMENT,{argument:"values",coder:c,value:t}),l[u]=!0,t[u]})}else Wc.throwArgumentError("invalid tuple value","tuple",t);e.length!==r.length&&Wc.throwArgumentError("types/value length mismatch","tuple",t);let i=new $_(n.wordSize),s=new $_(n.wordSize),o=[];e.forEach((l,c)=>{let u=r[c];if(l.dynamic){let d=s.length;l.encode(s,u);let f=i.writeUpdatableValue();o.push(p=>{f(p+d)})}else l.encode(i,u)}),o.forEach(l=>{l(i.length)});let a=n.appendWriter(i);return a+=n.appendWriter(s),a}function nP(n,e){let t=[],r=n.subReader(0);e.forEach(s=>{let o=null;if(s.dynamic){let a=n.readValue(),l=r.subReader(a.toNumber());try{o=s.decode(l)}catch(c){if(c.code===ie.errors.BUFFER_OVERRUN)throw c;o=c,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(n)}catch(a){if(a.code===ie.errors.BUFFER_OVERRUN)throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}o!=null&&t.push(o)});const i=e.reduce((s,o)=>{const a=o.localName;return a&&(s[a]||(s[a]=0),s[a]++),s},{});e.forEach((s,o)=>{let a=s.localName;if(!a||i[a]!==1||(a==="length"&&(a="_length"),t[a]!=null))return;const l=t[o];l instanceof Error?Object.defineProperty(t,a,{enumerable:!0,get:()=>{throw l}}):t[a]=l});for(let s=0;s<t.length;s++){const o=t[s];o instanceof Error&&Object.defineProperty(t,s,{enumerable:!0,get:()=>{throw o}})}return Object.freeze(t)}class wne extends ra{constructor(e,t,r){const i=e.type+"["+(t>=0?t:"")+"]",s=t===-1||e.dynamic;super("array",i,r,s),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let r=this.length;r===-1&&(r=t.length,e.writeValue(t.length)),Wc.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<t.length;s++)i.push(this.coder);return tP(e,i,t)}decode(e){let t=this.length;t===-1&&(t=e.readValue().toNumber(),t*32>e._data.length&&Wc.throwError("insufficient data length",ie.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let r=[];for(let i=0;i<t;i++)r.push(new xne(this.coder));return e.coerce(this.name,nP(e,r))}}class Ane extends ra{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class rP extends ra{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=ut(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class Ene extends rP{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,rt(super.decode(e)))}}class Sne extends ra{constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let r=ut(t);return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return e.coerce(this.name,rt(e.readBytes(this.size)))}}class Tne extends ra{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const Mne="0x0000000000000000000000000000000000000000",Rne=Ne.from(-1),iP=Ne.from(0),Ine=Ne.from(1),Cne=Ne.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Pne="0x0000000000000000000000000000000000000000000000000000000000000000";class Nne extends ra{constructor(e,t,r){const i=(t?"int":"uint")+e*8;super(i,i,r,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let r=Ne.from(t),i=Cne.mask(e.wordSize*8);if(this.signed){let s=i.mask(this.size*8-1);(r.gt(s)||r.lt(s.add(Ine).mul(Rne)))&&this._throwError("value out-of-bounds",t)}else(r.lt(iP)||r.gt(i.mask(this.size*8)))&&this._throwError("value out-of-bounds",t);return r=r.toTwos(this.size*8).mask(this.size*8),this.signed&&(r=r.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(r)}decode(e){let t=e.readValue().mask(this.size*8);return this.signed&&(t=t.fromTwos(this.size*8)),e.coerce(this.name,t)}}const kne="strings/5.7.0",sP=new ie(kne);var zf;(function(n){n.current="",n.NFC="NFC",n.NFD="NFD",n.NFKC="NFKC",n.NFKD="NFKD"})(zf||(zf={}));var di;(function(n){n.UNEXPECTED_CONTINUE="unexpected continuation byte",n.BAD_PREFIX="bad codepoint prefix",n.OVERRUN="string overrun",n.MISSING_CONTINUE="missing continuation byte",n.OUT_OF_RANGE="out of UTF-8 range",n.UTF16_SURROGATE="UTF-16 surrogate",n.OVERLONG="overlong representation"})(di||(di={}));function Bne(n,e,t,r,i){return sP.throwArgumentError(`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function oP(n,e,t,r,i){if(n===di.BAD_PREFIX||n===di.UNEXPECTED_CONTINUE){let s=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)s++;return s}return n===di.OVERRUN?t.length-e-1:0}function Lne(n,e,t,r,i){return n===di.OVERLONG?(r.push(i),0):(r.push(65533),oP(n,e,t))}const Dne=Object.freeze({error:Bne,ignore:oP,replace:Lne});function aP(n,e){e==null&&(e=Dne.error),n=ut(n);const t=[];let r=0;for(;r<n.length;){const i=n[r++];if(!(i>>7)){t.push(i);continue}let s=null,o=null;if((i&224)===192)s=1,o=127;else if((i&240)===224)s=2,o=2047;else if((i&248)===240)s=3,o=65535;else{(i&192)===128?r+=e(di.UNEXPECTED_CONTINUE,r-1,n,t):r+=e(di.BAD_PREFIX,r-1,n,t);continue}if(r-1+s>=n.length){r+=e(di.OVERRUN,r-1,n,t);continue}let a=i&(1<<8-s-1)-1;for(let l=0;l<s;l++){let c=n[r];if((c&192)!=128){r+=e(di.MISSING_CONTINUE,r,n,t),a=null;break}a=a<<6|c&63,r++}if(a!==null){if(a>1114111){r+=e(di.OUT_OF_RANGE,r-1-s,n,t,a);continue}if(a>=55296&&a<=57343){r+=e(di.UTF16_SURROGATE,r-1-s,n,t,a);continue}if(a<=o){r+=e(di.OVERLONG,r-1-s,n,t,a);continue}t.push(a)}}return t}function Js(n,e=zf.current){e!=zf.current&&(sP.checkNormalize(),n=n.normalize(e));let t=[];for(let r=0;r<n.length;r++){const i=n.charCodeAt(r);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){r++;const s=n.charCodeAt(r);if(r>=n.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((i&1023)<<10)+(s&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return ut(t)}function One(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function uh(n,e){return One(aP(n,e))}function Fne(n,e=zf.current){return aP(Js(n,e))}class Une extends rP{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Js(t))}decode(e){return uh(super.decode(e))}}class np extends ra{constructor(e,t){let r=!1;const i=[];e.forEach(o=>{o.dynamic&&(r=!0),i.push(o.type)});const s="tuple("+i.join(",")+")";super("tuple",s,t,r),this.coders=e}defaultValue(){const e=[];this.coders.forEach(r=>{e.push(r.defaultValue())});const t=this.coders.reduce((r,i)=>{const s=i.localName;return s&&(r[s]||(r[s]=0),r[s]++),r},{});return this.coders.forEach((r,i)=>{let s=r.localName;!s||t[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,t){return tP(e,this.coders,t)}decode(e){return e.coerce(this.name,nP(e,this.coders))}}const rp=new ie(ch),Hne=new RegExp(/^bytes([0-9]*)$/),zne=new RegExp(/^(u?int)([0-9]*)$/);class Gne{constructor(e){Te(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new bne(e.name);case"bool":return new Ane(e.name);case"string":return new Une(e.name);case"bytes":return new Ene(e.name);case"array":return new wne(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new np((e.components||[]).map(r=>this._getCoder(r)),e.name);case"":return new Tne(e.name)}let t=e.type.match(zne);if(t){let r=parseInt(t[2]||"256");return(r===0||r>256||r%8!==0)&&rp.throwArgumentError("invalid "+t[1]+" bit length","param",e),new Nne(r/8,t[1]==="int",e.name)}if(t=e.type.match(Hne),t){let r=parseInt(t[1]);return(r===0||r>32)&&rp.throwArgumentError("invalid bytes length","param",e),new Sne(r,e.name)}return rp.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new Qm(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new $_(this._getWordSize())}getDefaultValue(e){const t=e.map(i=>this._getCoder(or.from(i)));return new np(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&rp.throwError("types/values length mismatch",ie.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const r=e.map(o=>this._getCoder(or.from(o))),i=new np(r,"_"),s=this._getWriter();return i.encode(s,t),s.data}decode(e,t,r){const i=e.map(o=>this._getCoder(or.from(o)));return new np(i,"_").decode(this._getReader(ut(t),r))}}const Vne=new Gne;function qc(n){return Kn(Js(n))}const lP="hash/5.7.0";function cP(n){n=atob(n);const e=[];for(let t=0;t<n.length;t++)e.push(n.charCodeAt(t));return ut(e)}function uP(n){n=ut(n);let e="";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return btoa(e)}function dP(n,e){e==null&&(e=1);const t=[],r=t.forEach,i=function(s,o){r.call(s,function(a){o>0&&Array.isArray(a)?i(a,o-1):t.push(a)})};return i(n,e),t}function $ne(n){const e={};for(let t=0;t<n.length;t++){const r=n[t];e[r[0]]=r[1]}return e}function jne(n){let e=0;function t(){return n[e++]<<8|n[e++]}let r=t(),i=1,s=[0,1];for(let C=1;C<r;C++)s.push(i+=t());let o=t(),a=e;e+=o;let l=0,c=0;function u(){return l==0&&(c=c<<8|n[e++],l=8),c>>--l&1}const d=31,f=Math.pow(2,d),p=f>>>1,m=p>>1,g=f-1;let y=0;for(let C=0;C<d;C++)y=y<<1|u();let h=[],w=0,M=f;for(;;){let C=Math.floor(((y-w+1)*i-1)/M),k=0,F=r;for(;F-k>1;){let I=k+F>>>1;C<s[I]?F=I:k=I}if(k==0)break;h.push(k);let N=w+Math.floor(M*s[k]/i),B=w+Math.floor(M*s[k+1]/i)-1;for(;!((N^B)&p);)y=y<<1&g|u(),N=N<<1&g,B=B<<1&g|1;for(;N&~B&m;)y=y&p|y<<1&g>>>1|u(),N=N<<1^p,B=(B^p)<<1|p|1;w=N,M=1+B-N}let S=r-4;return h.map(C=>{switch(C-S){case 3:return S+65792+(n[a++]<<16|n[a++]<<8|n[a++]);case 2:return S+256+(n[a++]<<8|n[a++]);case 1:return S+n[a++];default:return C-1}})}function Wne(n){let e=0;return()=>n[e++]}function qne(n){return Wne(jne(n))}function Xne(n){return n&1?~n>>1:n>>1}function Kne(n,e){let t=Array(n);for(let r=0;r<n;r++)t[r]=1+e();return t}function _S(n,e){let t=Array(n);for(let r=0,i=-1;r<n;r++)t[r]=i+=1+e();return t}function Yne(n,e){let t=Array(n);for(let r=0,i=0;r<n;r++)t[r]=i+=Xne(e());return t}function Zm(n,e){let t=_S(n(),n),r=n(),i=_S(r,n),s=Kne(r,n);for(let o=0;o<r;o++)for(let a=0;a<s[o];a++)t.push(i[o]+a);return e?t.map(o=>e[o]):t}function Qne(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(Jne(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(ere(t,n))}return $ne(dP(e))}function Zne(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(t)}return e}function fP(n,e,t){let r=Array(n).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)Yne(n,t).forEach((s,o)=>r[o].push(s));return r}function Jne(n,e){let t=1+e(),r=e(),i=Zne(e),s=fP(i.length,1+n,e);return dP(s.map((o,a)=>{const l=o[0],c=o.slice(1);return Array(i[a]).fill(void 0).map((u,d)=>{let f=d*r;return[l+d*t,c.map(p=>p+f)]})}))}function ere(n,e){let t=1+e();return fP(t,1+n,e).map(i=>[i[0],i.slice(1)])}function tre(n){let e=Zm(n).sort((r,i)=>r-i);return t();function t(){let r=[];for(;;){let c=Zm(n,e);if(c.length==0)break;r.push({set:new Set(c),node:t()})}r.sort((c,u)=>u.set.size-c.set.size);let i=n(),s=i%3;i=i/3|0;let o=!!(i&1);i>>=1;let a=i==1,l=i==2;return{branches:r,valid:s,fe0f:o,save:a,check:l}}}function nre(){return qne(cP("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const tg=nre(),rre=new Set(Zm(tg)),ire=new Set(Zm(tg)),sre=Qne(tg),ore=tre(tg),bS=45,xS=95;function hP(n){return Fne(n)}function are(n){return n.filter(e=>e!=65039)}function pP(n){for(let e of n.split(".")){let t=hP(e);try{for(let r=t.lastIndexOf(xS)-1;r>=0;r--)if(t[r]!==xS)throw new Error("underscore only allowed at start");if(t.length>=4&&t.every(r=>r<128)&&t[2]===bS&&t[3]===bS)throw new Error("invalid label extension")}catch(r){throw new Error(`Invalid label "${e}": ${r.message}`)}}return n}function lre(n){return pP(cre(n,are))}function cre(n,e){let t=hP(n).reverse(),r=[];for(;t.length;){let i=dre(t);if(i){r.push(...e(i));continue}let s=t.pop();if(rre.has(s)){r.push(s);continue}if(ire.has(s))continue;let o=sre[s];if(o){r.push(...o);continue}throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`)}return pP(ure(String.fromCodePoint(...r)))}function ure(n){return n.normalize("NFC")}function dre(n,e){var t;let r=ore,i,s,o=[],a=n.length;for(e&&(e.length=0);a;){let l=n[--a];if(r=(t=r.branches.find(c=>c.set.has(l)))===null||t===void 0?void 0:t.node,!r)break;if(r.save)s=l;else if(r.check&&l===s)break;o.push(l),r.fe0f&&(o.push(65039),a>0&&n[a-1]==65039&&a--),r.valid&&(i=o.slice(),r.valid==2&&i.splice(1,1),e&&e.push(...n.slice(a).reverse()),n.length=a)}return i}const fre=new ie(lP),mP=new Uint8Array(32);mP.fill(0);function wS(n){if(n.length===0)throw new Error("invalid ENS name; empty component");return n}function gP(n){const e=Js(lre(n)),t=[];if(n.length===0)return t;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(wS(e.slice(r,i))),r=i+1);if(r>=e.length)throw new Error("invalid ENS name; empty component");return t.push(wS(e.slice(r))),t}function Np(n){typeof n!="string"&&fre.throwArgumentError("invalid ENS name; not a string","name",n);let e=mP;const t=gP(n);for(;t.length;)e=Kn(mi([e,Kn(t.pop())]));return rt(e)}function hre(n){return rt(mi(gP(n).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"}var pre=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Bn=new ie(lP),vP=new Uint8Array(32);vP.fill(0);const mre=Ne.from(-1),yP=Ne.from(0),_P=Ne.from(1),gre=Ne.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function vre(n){const e=ut(n),t=e.length%32;return t?Xr([e,vP.slice(t)]):rt(e)}const yre=Nn(_P.toHexString(),32),_re=Nn(yP.toHexString(),32),AS={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Dv=["name","version","chainId","verifyingContract","salt"];function ES(n){return function(e){return typeof e!="string"&&Bn.throwArgumentError(`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const bre={name:ES("name"),version:ES("version"),chainId:function(n){try{return Ne.from(n).toString()}catch{}return Bn.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",n)},verifyingContract:function(n){try{return yr(n).toLowerCase()}catch{}return Bn.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){try{const e=ut(n);if(e.length!==32)throw new Error("bad length");return rt(e)}catch{}return Bn.throwArgumentError('invalid domain value "salt"',"domain.salt",n)}};function Ov(n){{const e=n.match(/^(u?)int(\d*)$/);if(e){const t=e[1]==="",r=parseInt(e[2]||"256");(r%8!==0||r>256||e[2]&&e[2]!==String(r))&&Bn.throwArgumentError("invalid numeric width","type",n);const i=gre.mask(t?r-1:r),s=t?i.add(_P).mul(mre):yP;return function(o){const a=Ne.from(o);return(a.lt(s)||a.gt(i))&&Bn.throwArgumentError(`value out-of-bounds for ${n}`,"value",o),Nn(a.toTwos(256).toHexString(),32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return(t===0||t>32||e[1]!==String(t))&&Bn.throwArgumentError("invalid bytes width","type",n),function(r){return ut(r).length!==t&&Bn.throwArgumentError(`invalid length for ${n}`,"value",r),vre(r)}}}switch(n){case"address":return function(e){return Nn(yr(e),32)};case"bool":return function(e){return e?yre:_re};case"bytes":return function(e){return Kn(e)};case"string":return function(e){return qc(e)}}return null}function SS(n,e){return`${n}(${e.map(({name:t,type:r})=>r+" "+t).join(",")})`}class ui{constructor(e){Te(this,"types",Object.freeze(Xo(e))),Te(this,"_encoderCache",{}),Te(this,"_types",{});const t={},r={},i={};Object.keys(e).forEach(a=>{t[a]={},r[a]=[],i[a]={}});for(const a in e){const l={};e[a].forEach(c=>{l[c.name]&&Bn.throwArgumentError(`duplicate variable name ${JSON.stringify(c.name)} in ${JSON.stringify(a)}`,"types",e),l[c.name]=!0;const u=c.type.match(/^([^\x5b]*)(\x5b|$)/)[1];u===a&&Bn.throwArgumentError(`circular type reference to ${JSON.stringify(u)}`,"types",e),!Ov(u)&&(r[u]||Bn.throwArgumentError(`unknown type ${JSON.stringify(u)}`,"types",e),r[u].push(a),t[a][u]=!0)})}const s=Object.keys(r).filter(a=>r[a].length===0);s.length===0?Bn.throwArgumentError("missing primary type","types",e):s.length>1&&Bn.throwArgumentError(`ambiguous primary types or unused types: ${s.map(a=>JSON.stringify(a)).join(", ")}`,"types",e),Te(this,"primaryType",s[0]);function o(a,l){l[a]&&Bn.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e),l[a]=!0,Object.keys(t[a]).forEach(c=>{r[c]&&(o(c,l),Object.keys(l).forEach(u=>{i[u][c]=!0}))}),delete l[a]}o(this.primaryType,{});for(const a in i){const l=Object.keys(i[a]);l.sort(),this._types[a]=SS(a,e[a])+l.map(c=>SS(c,e[c])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const i=Ov(e);if(i)return i}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const i=t[1],s=this.getEncoder(i),o=parseInt(t[3]);return a=>{o>=0&&a.length!==o&&Bn.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",a);let l=a.map(s);return this._types[i]&&(l=l.map(Kn)),Kn(Xr(l))}}const r=this.types[e];if(r){const i=qc(this._types[e]);return s=>{const o=r.map(({name:a,type:l})=>{const c=this.getEncoder(l)(s[a]);return this._types[l]?Kn(c):c});return o.unshift(i),Xr(o)}}return Bn.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||Bn.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Kn(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(Ov(e))return r(e,t);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const o=i[1],a=parseInt(i[3]);return a>=0&&t.length!==a&&Bn.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(l=>this._visit(o,l,r))}const s=this.types[e];return s?s.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,t[a],r),o),{}):Bn.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new ui(e)}static getPrimaryType(e){return ui.from(e).primaryType}static hashStruct(e,t,r){return ui.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){const i=AS[r];i||Bn.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:i})}return t.sort((r,i)=>Dv.indexOf(r.name)-Dv.indexOf(i.name)),ui.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return Xr(["0x1901",ui.hashDomain(e),ui.from(t).hash(r)])}static hash(e,t,r){return Kn(ui.encode(e,t,r))}static resolveNames(e,t,r,i){return pre(this,void 0,void 0,function*(){e=Qn(e);const s={};e.verifyingContract&&!tn(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=ui.from(t);o.visit(r,(a,l)=>(a==="address"&&!tn(l,20)&&(s[l]="0x"),l));for(const a in s)s[a]=yield i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(a,l)=>a==="address"&&s[l]?s[l]:l),{domain:e,value:r}})}static getPayload(e,t,r){ui.hashDomain(e);const i={},s=[];Dv.forEach(l=>{const c=e[l];c!=null&&(i[l]=bre[l](c),s.push({name:l,type:AS[l]}))});const o=ui.from(t),a=Qn(t);return a.EIP712Domain?Bn.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(l,c)=>{if(l.match(/^bytes(\d*)/))return rt(ut(c));if(l.match(/^u?int/))return Ne.from(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return typeof c!="string"&&Bn.throwArgumentError("invalid string","value",c),c}return Bn.throwArgumentError("unsupported type","type",l)})}}}const kn=new ie(ch);class xre extends lh{}class wre extends lh{}class Are extends lh{}class j_ extends lh{static isIndexed(e){return!!(e&&e._isIndexed)}}const Ere={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function TS(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);return t.error=e,t}class MS{constructor(e){let t=[];typeof e=="string"?t=JSON.parse(e):t=e,Te(this,"fragments",t.map(r=>Lo.from(r)).filter(r=>r!=null)),Te(this,"_abiCoder",Gs(new.target,"getAbiCoder")()),Te(this,"functions",{}),Te(this,"errors",{}),Te(this,"events",{}),Te(this,"structs",{}),this.fragments.forEach(r=>{let i=null;switch(r.type){case"constructor":if(this.deploy){kn.warn("duplicate definition - constructor");return}Te(this,"deploy",r);return;case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=r.format();if(i[s]){kn.warn("duplicate definition - "+s);return}i[s]=r}),this.deploy||Te(this,"deploy",Ds.from({payable:!1,type:"constructor"})),Te(this,"_isInterface",!0)}format(e){e||(e=en.full),e===en.sighash&&kn.throwArgumentError("interface does not support formatting sighash","format",e);const t=this.fragments.map(r=>r.format(e));return e===en.json?JSON.stringify(t.map(r=>JSON.parse(r))):t}static getAbiCoder(){return Vne}static getAddress(e){return yr(e)}static getSighash(e){return Er(qc(e.format()),0,4)}static getEventTopic(e){return qc(e.format())}getFunction(e){if(tn(e)){for(const r in this.functions)if(e===this.getSighash(r))return this.functions[r];kn.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===r);return i.length===0?kn.throwArgumentError("no matching function","name",r):i.length>1&&kn.throwArgumentError("multiple matching functions","name",r),this.functions[i[0]]}const t=this.functions[Os.fromString(e).format()];return t||kn.throwArgumentError("no matching function","signature",e),t}getEvent(e){if(tn(e)){const r=e.toLowerCase();for(const i in this.events)if(r===this.getEventTopic(i))return this.events[i];kn.throwArgumentError("no matching event","topichash",r)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===r);return i.length===0?kn.throwArgumentError("no matching event","name",r):i.length>1&&kn.throwArgumentError("multiple matching events","name",r),this.events[i[0]]}const t=this.events[Co.fromString(e).format()];return t||kn.throwArgumentError("no matching event","signature",e),t}getError(e){if(tn(e)){const r=Gs(this.constructor,"getSighash");for(const i in this.errors){const s=this.errors[i];if(e===r(s))return this.errors[i]}kn.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===r);return i.length===0?kn.throwArgumentError("no matching error","name",r):i.length>1&&kn.throwArgumentError("multiple matching errors","name",r),this.errors[i[0]]}const t=this.errors[Os.fromString(e).format()];return t||kn.throwArgumentError("no matching error","signature",e),t}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch{throw t}}return Gs(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),Gs(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){typeof e=="string"&&(e=this.getError(e));const r=ut(t);return rt(r.slice(0,4))!==this.getSighash(e)&&kn.throwArgumentError(`data signature does not match error ${e.name}.`,"data",rt(r)),this._decodeParams(e.inputs,r.slice(4))}encodeErrorResult(e,t){return typeof e=="string"&&(e=this.getError(e)),rt(mi([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){typeof e=="string"&&(e=this.getFunction(e));const r=ut(t);return rt(r.slice(0,4))!==this.getSighash(e)&&kn.throwArgumentError(`data signature does not match function ${e.name}.`,"data",rt(r)),this._decodeParams(e.inputs,r.slice(4))}encodeFunctionData(e,t){return typeof e=="string"&&(e=this.getFunction(e)),rt(mi([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){typeof e=="string"&&(e=this.getFunction(e));let r=ut(t),i=null,s="",o=null,a=null,l=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,r)}catch{}break;case 4:{const c=rt(r.slice(0,4)),u=Ere[c];if(u)o=this._abiCoder.decode(u.inputs,r.slice(4)),a=u.name,l=u.signature,u.reason&&(i=o[0]),a==="Error"?s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:a==="Panic"&&(s=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const d=this.getError(c);o=this._abiCoder.decode(d.inputs,r.slice(4)),a=d.name,l=d.format()}catch{}break}}return kn.throwError("call revert exception"+s,ie.errors.CALL_EXCEPTION,{method:e.format(),data:rt(t),errorArgs:o,errorName:a,errorSignature:l,reason:i})}encodeFunctionResult(e,t){return typeof e=="string"&&(e=this.getFunction(e)),rt(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){typeof e=="string"&&(e=this.getEvent(e)),t.length>e.inputs.length&&kn.throwError("too many arguments for "+e.format(),ie.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let r=[];e.anonymous||r.push(this.getEventTopic(e));const i=(s,o)=>s.type==="string"?qc(o):s.type==="bytes"?Kn(rt(o)):(s.type==="bool"&&typeof o=="boolean"&&(o=o?"0x01":"0x00"),s.type.match(/^u?int/)&&(o=Ne.from(o).toHexString()),s.type==="address"&&this._abiCoder.encode(["address"],[o]),Nn(rt(o),32));for(t.forEach((s,o)=>{let a=e.inputs[o];if(!a.indexed){s!=null&&kn.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?kn.throwArgumentError("filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(l=>i(a,l))):r.push(i(a,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,t){typeof e=="string"&&(e=this.getEvent(e));const r=[],i=[],s=[];return e.anonymous||r.push(this.getEventTopic(e)),t.length!==e.inputs.length&&kn.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach((o,a)=>{const l=t[a];if(o.indexed)if(o.type==="string")r.push(qc(l));else if(o.type==="bytes")r.push(Kn(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(this._abiCoder.encode([o.type],[l]))}else i.push(o),s.push(l)}),{data:this._abiCoder.encode(i,s),topics:r}}decodeEventLog(e,t,r){if(typeof e=="string"&&(e=this.getEvent(e)),r!=null&&!e.anonymous){let f=this.getEventTopic(e);(!tn(r[0],32)||r[0].toLowerCase()!==f)&&kn.throwError("fragment/topic mismatch",ie.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:f,value:r[0]}),r=r.slice(1)}let i=[],s=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(i.push(or.fromObject({type:"bytes32",name:f.name})),o.push(!0)):(i.push(f),o.push(!1)):(s.push(f),o.push(!1))});let a=r!=null?this._abiCoder.decode(i,mi(r)):null,l=this._abiCoder.decode(s,t,!0),c=[],u=0,d=0;e.inputs.forEach((f,p)=>{if(f.indexed)if(a==null)c[p]=new j_({_isIndexed:!0,hash:null});else if(o[p])c[p]=new j_({_isIndexed:!0,hash:a[d++]});else try{c[p]=a[d++]}catch(m){c[p]=m}else try{c[p]=l[u++]}catch(m){c[p]=m}if(f.name&&c[f.name]==null){const m=c[p];m instanceof Error?Object.defineProperty(c,f.name,{enumerable:!0,get:()=>{throw TS(`property ${JSON.stringify(f.name)}`,m)}}):c[f.name]=m}});for(let f=0;f<c.length;f++){const p=c[f];p instanceof Error&&Object.defineProperty(c,f,{enumerable:!0,get:()=>{throw TS(`index ${f}`,p)}})}return Object.freeze(c)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new wre({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:Ne.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new xre({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=rt(e);let r=this.getError(t.substring(0,10).toLowerCase());return r?new Are({args:this._abiCoder.decode(r.inputs,"0x"+t.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const Sre="abstract-provider/5.7.0";var Tre=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Mre=new ie(Sre);class Rre extends lh{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class ng{constructor(){Mre.checkAbstract(new.target,ng),Te(this,"_isProvider",!0)}getFeeData(){return Tre(this,void 0,void 0,function*(){const{block:e,gasPrice:t}=yield $n({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(o=>null)});let r=null,i=null,s=null;return e&&e.baseFeePerGas&&(r=e.baseFeePerGas,s=Ne.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:r,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:t}})}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!!(e&&e._isProvider)}}const Ire="abstract-signer/5.7.0";var Ki=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Ii=new ie(Ire),Cre=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],Pre=[ie.errors.INSUFFICIENT_FUNDS,ie.errors.NONCE_EXPIRED,ie.errors.REPLACEMENT_UNDERPRICED];class dh{constructor(){Ii.checkAbstract(new.target,dh),Te(this,"_isSigner",!0)}getBalance(e){return Ki(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return Ki(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return Ki(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const t=yield $n(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return Ki(this,void 0,void 0,function*(){this._checkProvider("call");const r=yield $n(this.checkTransaction(e));return yield this.provider.call(r,t)})}sendTransaction(e){return Ki(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),r=yield this.signTransaction(t);return yield this.provider.sendTransaction(r)})}getChainId(){return Ki(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return Ki(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return Ki(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return Ki(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const r in e)Cre.indexOf(r)===-1&&Ii.throwArgumentError("invalid transaction key: "+r,"transaction",e);const t=Qn(e);return t.from==null?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then(r=>(r[0].toLowerCase()!==r[1].toLowerCase()&&Ii.throwArgumentError("from address mismatch","transaction",e),r[0])),t}populateTransaction(e){return Ki(this,void 0,void 0,function*(){const t=yield $n(this.checkTransaction(e));t.to!=null&&(t.to=Promise.resolve(t.to).then(i=>Ki(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&Ii.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),t.to.catch(i=>{}));const r=t.maxFeePerGas!=null||t.maxPriorityFeePerGas!=null;if(t.gasPrice!=null&&(t.type===2||r)?Ii.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(t.type===0||t.type===1)&&r&&Ii.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(t.type===2||t.type==null)&&t.maxFeePerGas!=null&&t.maxPriorityFeePerGas!=null)t.type=2;else if(t.type===0||t.type===1)t.gasPrice==null&&(t.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(t.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(t.type=2,t.gasPrice!=null){const s=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=s,t.maxPriorityFeePerGas=s}else t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(r&&Ii.throwError("network does not support EIP-1559",ie.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),t.gasPrice==null&&(t.gasPrice=i.gasPrice),t.type=0):Ii.throwError("failed to get consistent fee data",ie.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else t.type===2&&(t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return t.nonce==null&&(t.nonce=this.getTransactionCount("pending")),t.gasLimit==null&&(t.gasLimit=this.estimateGas(t).catch(i=>{if(Pre.indexOf(i.code)>=0)throw i;return Ii.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",ie.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:t})})),t.chainId==null?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&Ii.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield $n(t)})}_checkProvider(e){this.provider||Ii.throwError("missing provider",ie.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class aw extends dh{constructor(e,t){super(),Te(this,"address",e),Te(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then(()=>{Ii.throwError(e,ie.errors.UNSUPPORTED_OPERATION,{operation:t})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,r){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new aw(this.address,e)}}var bP={},Gt={},fh=xP;function xP(n,e){if(!n)throw new Error(e||"Assertion failed")}xP.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var W_={exports:{}};typeof Object.create=="function"?W_.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:W_.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var Nre=W_.exports,kre=fh,Bre=Nre;Gt.inherits=Bre;function Lre(n,e){return(n.charCodeAt(e)&64512)!==55296||e<0||e+1>=n.length?!1:(n.charCodeAt(e+1)&64512)===56320}function Dre(n,e){if(Array.isArray(n))return n.slice();if(!n)return[];var t=[];if(typeof n=="string")if(e){if(e==="hex")for(n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n),i=0;i<n.length;i+=2)t.push(parseInt(n[i]+n[i+1],16))}else for(var r=0,i=0;i<n.length;i++){var s=n.charCodeAt(i);s<128?t[r++]=s:s<2048?(t[r++]=s>>6|192,t[r++]=s&63|128):Lre(n,i)?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),t[r++]=s>>18|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=s&63|128):(t[r++]=s>>12|224,t[r++]=s>>6&63|128,t[r++]=s&63|128)}else for(i=0;i<n.length;i++)t[i]=n[i]|0;return t}Gt.toArray=Dre;function Ore(n){for(var e="",t=0;t<n.length;t++)e+=AP(n[t].toString(16));return e}Gt.toHex=Ore;function wP(n){var e=n>>>24|n>>>8&65280|n<<8&16711680|(n&255)<<24;return e>>>0}Gt.htonl=wP;function Fre(n,e){for(var t="",r=0;r<n.length;r++){var i=n[r];e==="little"&&(i=wP(i)),t+=EP(i.toString(16))}return t}Gt.toHex32=Fre;function AP(n){return n.length===1?"0"+n:n}Gt.zero2=AP;function EP(n){return n.length===7?"0"+n:n.length===6?"00"+n:n.length===5?"000"+n:n.length===4?"0000"+n:n.length===3?"00000"+n:n.length===2?"000000"+n:n.length===1?"0000000"+n:n}Gt.zero8=EP;function Ure(n,e,t,r){var i=t-e;kre(i%4===0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var l;r==="big"?l=n[a]<<24|n[a+1]<<16|n[a+2]<<8|n[a+3]:l=n[a+3]<<24|n[a+2]<<16|n[a+1]<<8|n[a],s[o]=l>>>0}return s}Gt.join32=Ure;function Hre(n,e){for(var t=new Array(n.length*4),r=0,i=0;r<n.length;r++,i+=4){var s=n[r];e==="big"?(t[i]=s>>>24,t[i+1]=s>>>16&255,t[i+2]=s>>>8&255,t[i+3]=s&255):(t[i+3]=s>>>24,t[i+2]=s>>>16&255,t[i+1]=s>>>8&255,t[i]=s&255)}return t}Gt.split32=Hre;function zre(n,e){return n>>>e|n<<32-e}Gt.rotr32=zre;function Gre(n,e){return n<<e|n>>>32-e}Gt.rotl32=Gre;function Vre(n,e){return n+e>>>0}Gt.sum32=Vre;function $re(n,e,t){return n+e+t>>>0}Gt.sum32_3=$re;function jre(n,e,t,r){return n+e+t+r>>>0}Gt.sum32_4=jre;function Wre(n,e,t,r,i){return n+e+t+r+i>>>0}Gt.sum32_5=Wre;function qre(n,e,t,r){var i=n[e],s=n[e+1],o=r+s>>>0,a=(o<r?1:0)+t+i;n[e]=a>>>0,n[e+1]=o}Gt.sum64=qre;function Xre(n,e,t,r){var i=e+r>>>0,s=(i<e?1:0)+n+t;return s>>>0}Gt.sum64_hi=Xre;function Kre(n,e,t,r){var i=e+r;return i>>>0}Gt.sum64_lo=Kre;function Yre(n,e,t,r,i,s,o,a){var l=0,c=e;c=c+r>>>0,l+=c<e?1:0,c=c+s>>>0,l+=c<s?1:0,c=c+a>>>0,l+=c<a?1:0;var u=n+t+i+o+l;return u>>>0}Gt.sum64_4_hi=Yre;function Qre(n,e,t,r,i,s,o,a){var l=e+r+s+a;return l>>>0}Gt.sum64_4_lo=Qre;function Zre(n,e,t,r,i,s,o,a,l,c){var u=0,d=e;d=d+r>>>0,u+=d<e?1:0,d=d+s>>>0,u+=d<s?1:0,d=d+a>>>0,u+=d<a?1:0,d=d+c>>>0,u+=d<c?1:0;var f=n+t+i+o+l+u;return f>>>0}Gt.sum64_5_hi=Zre;function Jre(n,e,t,r,i,s,o,a,l,c){var u=e+r+s+a+c;return u>>>0}Gt.sum64_5_lo=Jre;function eie(n,e,t){var r=e<<32-t|n>>>t;return r>>>0}Gt.rotr64_hi=eie;function tie(n,e,t){var r=n<<32-t|e>>>t;return r>>>0}Gt.rotr64_lo=tie;function nie(n,e,t){return n>>>t}Gt.shr64_hi=nie;function rie(n,e,t){var r=n<<32-t|e>>>t;return r>>>0}Gt.shr64_lo=rie;var cd={},RS=Gt,iie=fh;function rg(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}cd.BlockHash=rg;rg.prototype.update=function(e,t){if(e=RS.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var r=e.length%this._delta8;this.pending=e.slice(e.length-r,e.length),this.pending.length===0&&(this.pending=null),e=RS.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};rg.prototype.digest=function(e){return this.update(this._pad()),iie(this.pending===null),this._digest(e)};rg.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,i=new Array(r+this.padLength);i[0]=128;for(var s=1;s<r;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var ud={},so={},sie=Gt,Ws=sie.rotr32;function oie(n,e,t,r){if(n===0)return SP(e,t,r);if(n===1||n===3)return MP(e,t,r);if(n===2)return TP(e,t,r)}so.ft_1=oie;function SP(n,e,t){return n&e^~n&t}so.ch32=SP;function TP(n,e,t){return n&e^n&t^e&t}so.maj32=TP;function MP(n,e,t){return n^e^t}so.p32=MP;function aie(n){return Ws(n,2)^Ws(n,13)^Ws(n,22)}so.s0_256=aie;function lie(n){return Ws(n,6)^Ws(n,11)^Ws(n,25)}so.s1_256=lie;function cie(n){return Ws(n,7)^Ws(n,18)^n>>>3}so.g0_256=cie;function uie(n){return Ws(n,17)^Ws(n,19)^n>>>10}so.g1_256=uie;var $u=Gt,die=cd,fie=so,Fv=$u.rotl32,Md=$u.sum32,hie=$u.sum32_5,pie=fie.ft_1,RP=die.BlockHash,mie=[1518500249,1859775393,2400959708,3395469782];function eo(){if(!(this instanceof eo))return new eo;RP.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}$u.inherits(eo,RP);var gie=eo;eo.blockSize=512;eo.outSize=160;eo.hmacStrength=80;eo.padLength=64;eo.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=Fv(r[i-3]^r[i-8]^r[i-14]^r[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],l=this.h[3],c=this.h[4];for(i=0;i<r.length;i++){var u=~~(i/20),d=hie(Fv(s,5),pie(u,o,a,l),c,r[i],mie[u]);c=l,l=a,a=Fv(o,30),o=s,s=d}this.h[0]=Md(this.h[0],s),this.h[1]=Md(this.h[1],o),this.h[2]=Md(this.h[2],a),this.h[3]=Md(this.h[3],l),this.h[4]=Md(this.h[4],c)};eo.prototype._digest=function(e){return e==="hex"?$u.toHex32(this.h,"big"):$u.split32(this.h,"big")};var ju=Gt,vie=cd,dd=so,yie=fh,Yi=ju.sum32,_ie=ju.sum32_4,bie=ju.sum32_5,xie=dd.ch32,wie=dd.maj32,Aie=dd.s0_256,Eie=dd.s1_256,Sie=dd.g0_256,Tie=dd.g1_256,IP=vie.BlockHash,Mie=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function to(){if(!(this instanceof to))return new to;IP.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=Mie,this.W=new Array(64)}ju.inherits(to,IP);var CP=to;to.blockSize=512;to.outSize=256;to.hmacStrength=192;to.padLength=64;to.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=_ie(Tie(r[i-2]),r[i-7],Sie(r[i-15]),r[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],l=this.h[3],c=this.h[4],u=this.h[5],d=this.h[6],f=this.h[7];for(yie(this.k.length===r.length),i=0;i<r.length;i++){var p=bie(f,Eie(c),xie(c,u,d),this.k[i],r[i]),m=Yi(Aie(s),wie(s,o,a));f=d,d=u,u=c,c=Yi(l,p),l=a,a=o,o=s,s=Yi(p,m)}this.h[0]=Yi(this.h[0],s),this.h[1]=Yi(this.h[1],o),this.h[2]=Yi(this.h[2],a),this.h[3]=Yi(this.h[3],l),this.h[4]=Yi(this.h[4],c),this.h[5]=Yi(this.h[5],u),this.h[6]=Yi(this.h[6],d),this.h[7]=Yi(this.h[7],f)};to.prototype._digest=function(e){return e==="hex"?ju.toHex32(this.h,"big"):ju.split32(this.h,"big")};var q_=Gt,PP=CP;function Ko(){if(!(this instanceof Ko))return new Ko;PP.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}q_.inherits(Ko,PP);var Rie=Ko;Ko.blockSize=512;Ko.outSize=224;Ko.hmacStrength=192;Ko.padLength=64;Ko.prototype._digest=function(e){return e==="hex"?q_.toHex32(this.h.slice(0,7),"big"):q_.split32(this.h.slice(0,7),"big")};var ii=Gt,Iie=cd,Cie=fh,qs=ii.rotr64_hi,Xs=ii.rotr64_lo,NP=ii.shr64_hi,kP=ii.shr64_lo,va=ii.sum64,Uv=ii.sum64_hi,Hv=ii.sum64_lo,Pie=ii.sum64_4_hi,Nie=ii.sum64_4_lo,kie=ii.sum64_5_hi,Bie=ii.sum64_5_lo,BP=Iie.BlockHash,Lie=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function hs(){if(!(this instanceof hs))return new hs;BP.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Lie,this.W=new Array(160)}ii.inherits(hs,BP);var LP=hs;hs.blockSize=1024;hs.outSize=512;hs.hmacStrength=192;hs.padLength=128;hs.prototype._prepareBlock=function(e,t){for(var r=this.W,i=0;i<32;i++)r[i]=e[t+i];for(;i<r.length;i+=2){var s=Wie(r[i-4],r[i-3]),o=qie(r[i-4],r[i-3]),a=r[i-14],l=r[i-13],c=$ie(r[i-30],r[i-29]),u=jie(r[i-30],r[i-29]),d=r[i-32],f=r[i-31];r[i]=Pie(s,o,a,l,c,u,d,f),r[i+1]=Nie(s,o,a,l,c,u,d,f)}};hs.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],l=this.h[4],c=this.h[5],u=this.h[6],d=this.h[7],f=this.h[8],p=this.h[9],m=this.h[10],g=this.h[11],y=this.h[12],h=this.h[13],w=this.h[14],M=this.h[15];Cie(this.k.length===r.length);for(var S=0;S<r.length;S+=2){var C=w,k=M,F=Gie(f,p),N=Vie(f,p),B=Die(f,p,m,g,y),I=Oie(f,p,m,g,y,h),U=this.k[S],G=this.k[S+1],R=r[S],v=r[S+1],_=kie(C,k,F,N,B,I,U,G,R,v),b=Bie(C,k,F,N,B,I,U,G,R,v);C=Hie(i,s),k=zie(i,s),F=Fie(i,s,o,a,l),N=Uie(i,s,o,a,l,c);var A=Uv(C,k,F,N),T=Hv(C,k,F,N);w=y,M=h,y=m,h=g,m=f,g=p,f=Uv(u,d,_,b),p=Hv(d,d,_,b),u=l,d=c,l=o,c=a,o=i,a=s,i=Uv(_,b,A,T),s=Hv(_,b,A,T)}va(this.h,0,i,s),va(this.h,2,o,a),va(this.h,4,l,c),va(this.h,6,u,d),va(this.h,8,f,p),va(this.h,10,m,g),va(this.h,12,y,h),va(this.h,14,w,M)};hs.prototype._digest=function(e){return e==="hex"?ii.toHex32(this.h,"big"):ii.split32(this.h,"big")};function Die(n,e,t,r,i){var s=n&t^~n&i;return s<0&&(s+=4294967296),s}function Oie(n,e,t,r,i,s){var o=e&r^~e&s;return o<0&&(o+=4294967296),o}function Fie(n,e,t,r,i){var s=n&t^n&i^t&i;return s<0&&(s+=4294967296),s}function Uie(n,e,t,r,i,s){var o=e&r^e&s^r&s;return o<0&&(o+=4294967296),o}function Hie(n,e){var t=qs(n,e,28),r=qs(e,n,2),i=qs(e,n,7),s=t^r^i;return s<0&&(s+=4294967296),s}function zie(n,e){var t=Xs(n,e,28),r=Xs(e,n,2),i=Xs(e,n,7),s=t^r^i;return s<0&&(s+=4294967296),s}function Gie(n,e){var t=qs(n,e,14),r=qs(n,e,18),i=qs(e,n,9),s=t^r^i;return s<0&&(s+=4294967296),s}function Vie(n,e){var t=Xs(n,e,14),r=Xs(n,e,18),i=Xs(e,n,9),s=t^r^i;return s<0&&(s+=4294967296),s}function $ie(n,e){var t=qs(n,e,1),r=qs(n,e,8),i=NP(n,e,7),s=t^r^i;return s<0&&(s+=4294967296),s}function jie(n,e){var t=Xs(n,e,1),r=Xs(n,e,8),i=kP(n,e,7),s=t^r^i;return s<0&&(s+=4294967296),s}function Wie(n,e){var t=qs(n,e,19),r=qs(e,n,29),i=NP(n,e,6),s=t^r^i;return s<0&&(s+=4294967296),s}function qie(n,e){var t=Xs(n,e,19),r=Xs(e,n,29),i=kP(n,e,6),s=t^r^i;return s<0&&(s+=4294967296),s}var X_=Gt,DP=LP;function Yo(){if(!(this instanceof Yo))return new Yo;DP.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}X_.inherits(Yo,DP);var Xie=Yo;Yo.blockSize=1024;Yo.outSize=384;Yo.hmacStrength=192;Yo.padLength=128;Yo.prototype._digest=function(e){return e==="hex"?X_.toHex32(this.h.slice(0,12),"big"):X_.split32(this.h.slice(0,12),"big")};ud.sha1=gie;ud.sha224=Rie;ud.sha256=CP;ud.sha384=Xie;ud.sha512=LP;var OP={},Kl=Gt,Kie=cd,ip=Kl.rotl32,IS=Kl.sum32,Rd=Kl.sum32_3,CS=Kl.sum32_4,FP=Kie.BlockHash;function no(){if(!(this instanceof no))return new no;FP.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Kl.inherits(no,FP);OP.ripemd160=no;no.blockSize=512;no.outSize=160;no.hmacStrength=192;no.padLength=64;no.prototype._update=function(e,t){for(var r=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],l=r,c=i,u=s,d=o,f=a,p=0;p<80;p++){var m=IS(ip(CS(r,PS(p,i,s,o),e[Zie[p]+t],Yie(p)),ese[p]),a);r=a,a=o,o=ip(s,10),s=i,i=m,m=IS(ip(CS(l,PS(79-p,c,u,d),e[Jie[p]+t],Qie(p)),tse[p]),f),l=f,f=d,d=ip(u,10),u=c,c=m}m=Rd(this.h[1],s,d),this.h[1]=Rd(this.h[2],o,f),this.h[2]=Rd(this.h[3],a,l),this.h[3]=Rd(this.h[4],r,c),this.h[4]=Rd(this.h[0],i,u),this.h[0]=m};no.prototype._digest=function(e){return e==="hex"?Kl.toHex32(this.h,"little"):Kl.split32(this.h,"little")};function PS(n,e,t,r){return n<=15?e^t^r:n<=31?e&t|~e&r:n<=47?(e|~t)^r:n<=63?e&r|t&~r:e^(t|~r)}function Yie(n){return n<=15?0:n<=31?1518500249:n<=47?1859775393:n<=63?2400959708:2840853838}function Qie(n){return n<=15?1352829926:n<=31?1548603684:n<=47?1836072691:n<=63?2053994217:0}var Zie=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Jie=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],ese=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],tse=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],nse=Gt,rse=fh;function Wu(n,e,t){if(!(this instanceof Wu))return new Wu(n,e,t);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(nse.toArray(e,t))}var ise=Wu;Wu.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),rse(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};Wu.prototype.update=function(e,t){return this.inner.update(e,t),this};Wu.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(n){var e=n;e.utils=Gt,e.common=cd,e.sha=ud,e.ripemd=OP,e.hmac=ise,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(bP);const Ms=Jl(bP);function fd(n,e,t){return t={path:e,exports:{},require:function(r,i){return sse(r,i??t.path)}},n(t,t.exports),t.exports}function sse(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var lw=UP;function UP(n,e){if(!n)throw new Error(e||"Assertion failed")}UP.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var ss=fd(function(n,e){var t=e;function r(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var l=[];if(typeof o!="string"){for(var c=0;c<o.length;c++)l[c]=o[c]|0;return l}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var c=0;c<o.length;c+=2)l.push(parseInt(o[c]+o[c+1],16))}else for(var c=0;c<o.length;c++){var u=o.charCodeAt(c),d=u>>8,f=u&255;d?l.push(d,f):l.push(f)}return l}t.toArray=r;function i(o){return o.length===1?"0"+o:o}t.zero2=i;function s(o){for(var a="",l=0;l<o.length;l++)a+=i(o[l].toString(16));return a}t.toHex=s,t.encode=function(a,l){return l==="hex"?s(a):a}}),wi=fd(function(n,e){var t=e;t.assert=lw,t.toArray=ss.toArray,t.zero2=ss.zero2,t.toHex=ss.toHex,t.encode=ss.encode;function r(l,c,u){var d=new Array(Math.max(l.bitLength(),u)+1);d.fill(0);for(var f=1<<c+1,p=l.clone(),m=0;m<d.length;m++){var g,y=p.andln(f-1);p.isOdd()?(y>(f>>1)-1?g=(f>>1)-y:g=y,p.isubn(g)):g=0,d[m]=g,p.iushrn(1)}return d}t.getNAF=r;function i(l,c){var u=[[],[]];l=l.clone(),c=c.clone();for(var d=0,f=0,p;l.cmpn(-d)>0||c.cmpn(-f)>0;){var m=l.andln(3)+d&3,g=c.andln(3)+f&3;m===3&&(m=-1),g===3&&(g=-1);var y;m&1?(p=l.andln(7)+d&7,(p===3||p===5)&&g===2?y=-m:y=m):y=0,u[0].push(y);var h;g&1?(p=c.andln(7)+f&7,(p===3||p===5)&&m===2?h=-g:h=g):h=0,u[1].push(h),2*d===y+1&&(d=1-d),2*f===h+1&&(f=1-f),l.iushrn(1),c.iushrn(1)}return u}t.getJSF=i;function s(l,c,u){var d="_"+c;l.prototype[c]=function(){return this[d]!==void 0?this[d]:this[d]=u.call(this)}}t.cachedProperty=s;function o(l){return typeof l=="string"?t.toArray(l,"hex"):l}t.parseBytes=o;function a(l){return new wt(l,"hex","le")}t.intFromLE=a}),Jm=wi.getNAF,ose=wi.getJSF,e0=wi.assert;function Za(n,e){this.type=n,this.p=new wt(e.p,16),this.red=e.prime?wt.red(e.prime):wt.mont(this.p),this.zero=new wt(0).toRed(this.red),this.one=new wt(1).toRed(this.red),this.two=new wt(2).toRed(this.red),this.n=e.n&&new wt(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var ic=Za;Za.prototype.point=function(){throw new Error("Not implemented")};Za.prototype.validate=function(){throw new Error("Not implemented")};Za.prototype._fixedNafMul=function(e,t){e0(e.precomputed);var r=e._getDoubles(),i=Jm(t,1,this._bitLength),s=(1<<r.step+1)-(r.step%2===0?2:1);s/=3;var o=[],a,l;for(a=0;a<i.length;a+=r.step){l=0;for(var c=a+r.step-1;c>=a;c--)l=(l<<1)+i[c];o.push(l)}for(var u=this.jpoint(null,null,null),d=this.jpoint(null,null,null),f=s;f>0;f--){for(a=0;a<o.length;a++)l=o[a],l===f?d=d.mixedAdd(r.points[a]):l===-f&&(d=d.mixedAdd(r.points[a].neg()));u=u.add(d)}return u.toP()};Za.prototype._wnafMul=function(e,t){var r=4,i=e._getNAFPoints(r);r=i.wnd;for(var s=i.points,o=Jm(t,r,this._bitLength),a=this.jpoint(null,null,null),l=o.length-1;l>=0;l--){for(var c=0;l>=0&&o[l]===0;l--)c++;if(l>=0&&c++,a=a.dblp(c),l<0)break;var u=o[l];e0(u!==0),e.type==="affine"?u>0?a=a.mixedAdd(s[u-1>>1]):a=a.mixedAdd(s[-u-1>>1].neg()):u>0?a=a.add(s[u-1>>1]):a=a.add(s[-u-1>>1].neg())}return e.type==="affine"?a.toP():a};Za.prototype._wnafMulAdd=function(e,t,r,i,s){var o=this._wnafT1,a=this._wnafT2,l=this._wnafT3,c=0,u,d,f;for(u=0;u<i;u++){f=t[u];var p=f._getNAFPoints(e);o[u]=p.wnd,a[u]=p.points}for(u=i-1;u>=1;u-=2){var m=u-1,g=u;if(o[m]!==1||o[g]!==1){l[m]=Jm(r[m],o[m],this._bitLength),l[g]=Jm(r[g],o[g],this._bitLength),c=Math.max(l[m].length,c),c=Math.max(l[g].length,c);continue}var y=[t[m],null,null,t[g]];t[m].y.cmp(t[g].y)===0?(y[1]=t[m].add(t[g]),y[2]=t[m].toJ().mixedAdd(t[g].neg())):t[m].y.cmp(t[g].y.redNeg())===0?(y[1]=t[m].toJ().mixedAdd(t[g]),y[2]=t[m].add(t[g].neg())):(y[1]=t[m].toJ().mixedAdd(t[g]),y[2]=t[m].toJ().mixedAdd(t[g].neg()));var h=[-3,-1,-5,-7,0,7,5,1,3],w=ose(r[m],r[g]);for(c=Math.max(w[0].length,c),l[m]=new Array(c),l[g]=new Array(c),d=0;d<c;d++){var M=w[0][d]|0,S=w[1][d]|0;l[m][d]=h[(M+1)*3+(S+1)],l[g][d]=0,a[m]=y}}var C=this.jpoint(null,null,null),k=this._wnafT4;for(u=c;u>=0;u--){for(var F=0;u>=0;){var N=!0;for(d=0;d<i;d++)k[d]=l[d][u]|0,k[d]!==0&&(N=!1);if(!N)break;F++,u--}if(u>=0&&F++,C=C.dblp(F),u<0)break;for(d=0;d<i;d++){var B=k[d];B!==0&&(B>0?f=a[d][B-1>>1]:B<0&&(f=a[d][-B-1>>1].neg()),f.type==="affine"?C=C.mixedAdd(f):C=C.add(f))}}for(u=0;u<i;u++)a[u]=null;return s?C:C.toP()};function Ui(n,e){this.curve=n,this.type=e,this.precomputed=null}Za.BasePoint=Ui;Ui.prototype.eq=function(){throw new Error("Not implemented")};Ui.prototype.validate=function(){return this.curve.validate(this)};Za.prototype.decodePoint=function(e,t){e=wi.toArray(e,t);var r=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*r){e[0]===6?e0(e[e.length-1]%2===0):e[0]===7&&e0(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));return i}else if((e[0]===2||e[0]===3)&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),e[0]===3);throw new Error("Unknown point format")};Ui.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Ui.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))};Ui.prototype.encode=function(e,t){return wi.encode(this._encode(t),e)};Ui.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};Ui.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};Ui.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,s=0;s<t;s+=e){for(var o=0;o<e;o++)i=i.dbl();r.push(i)}return{step:e,points:r}};Ui.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,i=r===1?null:this.dbl(),s=1;s<r;s++)t[s]=t[s-1].add(i);return{wnd:e,points:t}};Ui.prototype._getBeta=function(){return null};Ui.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var cw=fd(function(n){typeof Object.create=="function"?n.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}}}),ase=wi.assert;function Hi(n){ic.call(this,"short",n),this.a=new wt(n.a,16).toRed(this.red),this.b=new wt(n.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(n),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}cw(Hi,ic);var lse=Hi;Hi.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,r;if(e.beta)t=new wt(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)r=new wt(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))===0?r=s[0]:(r=s[1],ase(this.g.mul(r).x.cmp(this.g.x.redMul(t))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new wt(a.a,16),b:new wt(a.b,16)}}):o=this._getEndoBasis(r),{beta:t,lambda:r,basis:o}}};Hi.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:wt.mont(e),r=new wt(2).toRed(t).redInvm(),i=r.redNeg(),s=new wt(3).toRed(t).redNeg().redSqrt().redMul(r),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};Hi.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),r=e,i=this.n.clone(),s=new wt(1),o=new wt(0),a=new wt(0),l=new wt(1),c,u,d,f,p,m,g,y=0,h,w;r.cmpn(0)!==0;){var M=i.div(r);h=i.sub(M.mul(r)),w=a.sub(M.mul(s));var S=l.sub(M.mul(o));if(!d&&h.cmp(t)<0)c=g.neg(),u=s,d=h.neg(),f=w;else if(d&&++y===2)break;g=h,i=r,r=h,a=s,s=w,l=o,o=S}p=h.neg(),m=w;var C=d.sqr().add(f.sqr()),k=p.sqr().add(m.sqr());return k.cmp(C)>=0&&(p=c,m=u),d.negative&&(d=d.neg(),f=f.neg()),p.negative&&(p=p.neg(),m=m.neg()),[{a:d,b:f},{a:p,b:m}]};Hi.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],i=t[1],s=i.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),a=s.mul(r.a),l=o.mul(i.a),c=s.mul(r.b),u=o.mul(i.b),d=e.sub(a).sub(l),f=c.add(u).neg();return{k1:d,k2:f}};Hi.prototype.pointFromX=function(e,t){e=new wt(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(i.redSqr().redSub(r).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(e,i)};Hi.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,i=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return r.redSqr().redISub(s).cmpn(0)===0};Hi.prototype._endoWnafMulAdd=function(e,t,r){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(t[o]),l=e[o],c=l._getBeta();a.k1.negative&&(a.k1.ineg(),l=l.neg(!0)),a.k2.negative&&(a.k2.ineg(),c=c.neg(!0)),i[o*2]=l,i[o*2+1]=c,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var u=this._wnafMulAdd(1,i,s,o*2,r),d=0;d<o*2;d++)i[d]=null,s[d]=null;return u};function fr(n,e,t,r){ic.BasePoint.call(this,n,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new wt(e,16),this.y=new wt(t,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}cw(fr,ic.BasePoint);Hi.prototype.point=function(e,t,r){return new fr(this,e,t,r)};Hi.prototype.pointFromJSON=function(e,t){return fr.fromJSON(this,e,t)};fr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,i=function(s){return r.point(s.x.redMul(r.endo.beta),s.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}};fr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};fr.fromJSON=function(e,t,r){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;function s(a){return e.point(a[0],a[1],r)}var o=t[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};fr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};fr.prototype.isInfinity=function(){return this.inf};fr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)};fr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),i=e.redInvm(),s=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};fr.prototype.getX=function(){return this.x.fromRed()};fr.prototype.getY=function(){return this.y.fromRed()};fr.prototype.mul=function(e){return e=new wt(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};fr.prototype.mulAdd=function(e,t,r){var i=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};fr.prototype.jmulAdd=function(e,t,r){var i=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};fr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};fr.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,i=function(s){return s.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t};fr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function br(n,e,t,r){ic.BasePoint.call(this,n,"jacobian"),e===null&&t===null&&r===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new wt(0)):(this.x=new wt(e,16),this.y=new wt(t,16),this.z=new wt(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}cw(br,ic.BasePoint);Hi.prototype.jpoint=function(e,t,r){return new br(this,e,t,r)};br.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(r,i)};br.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};br.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t),s=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(r.redMul(this.z)),l=i.redSub(s),c=o.redSub(a);if(l.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=l.redSqr(),d=u.redMul(l),f=i.redMul(u),p=c.redSqr().redIAdd(d).redISub(f).redISub(f),m=c.redMul(f.redISub(p)).redISub(o.redMul(d)),g=this.z.redMul(e.z).redMul(l);return this.curve.jpoint(p,m,g)};br.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,i=e.x.redMul(t),s=this.y,o=e.y.redMul(t).redMul(this.z),a=r.redSub(i),l=s.redSub(o);if(a.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),u=c.redMul(a),d=r.redMul(c),f=l.redSqr().redIAdd(u).redISub(d).redISub(d),p=l.redMul(d.redISub(f)).redISub(s.redMul(u)),m=this.z.redMul(a);return this.curve.jpoint(f,p,m)};br.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,l=this.z,c=l.redSqr().redSqr(),u=a.redAdd(a);for(t=0;t<e;t++){var d=o.redSqr(),f=u.redSqr(),p=f.redSqr(),m=d.redAdd(d).redIAdd(d).redIAdd(i.redMul(c)),g=o.redMul(f),y=m.redSqr().redISub(g.redAdd(g)),h=g.redISub(y),w=m.redMul(h);w=w.redIAdd(w).redISub(p);var M=u.redMul(l);t+1<e&&(c=c.redMul(p)),o=y,l=M,u=w}return this.curve.jpoint(o,u.redMul(s),l)};br.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};br.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var l=i.redAdd(i).redIAdd(i),c=l.redSqr().redISub(a).redISub(a),u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),e=c,t=l.redMul(a.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),f=this.y.redSqr(),p=f.redSqr(),m=this.x.redAdd(f).redSqr().redISub(d).redISub(p);m=m.redIAdd(m);var g=d.redAdd(d).redIAdd(d),y=g.redSqr(),h=p.redIAdd(p);h=h.redIAdd(h),h=h.redIAdd(h),e=y.redISub(m).redISub(m),t=g.redMul(m.redISub(e)).redISub(h),r=this.y.redMul(this.z),r=r.redIAdd(r)}return this.curve.jpoint(e,t,r)};br.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var l=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),c=l.redSqr().redISub(a).redISub(a);e=c;var u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),t=l.redMul(a.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),f=this.y.redSqr(),p=this.x.redMul(f),m=this.x.redSub(d).redMul(this.x.redAdd(d));m=m.redAdd(m).redIAdd(m);var g=p.redIAdd(p);g=g.redIAdd(g);var y=g.redAdd(g);e=m.redSqr().redISub(y),r=this.y.redAdd(this.z).redSqr().redISub(f).redISub(d);var h=f.redSqr();h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h),t=m.redMul(g.redISub(e)).redISub(h)}return this.curve.jpoint(e,t,r)};br.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,i=this.z,s=i.redSqr().redSqr(),o=t.redSqr(),a=r.redSqr(),l=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),c=t.redAdd(t);c=c.redIAdd(c);var u=c.redMul(a),d=l.redSqr().redISub(u.redAdd(u)),f=u.redISub(d),p=a.redSqr();p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var m=l.redMul(f).redISub(p),g=r.redAdd(r).redMul(i);return this.curve.jpoint(d,m,g)};br.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=t.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var l=a.redSqr(),c=i.redIAdd(i);c=c.redIAdd(c),c=c.redIAdd(c),c=c.redIAdd(c);var u=s.redIAdd(a).redSqr().redISub(o).redISub(l).redISub(c),d=t.redMul(u);d=d.redIAdd(d),d=d.redIAdd(d);var f=this.x.redMul(l).redISub(d);f=f.redIAdd(f),f=f.redIAdd(f);var p=this.y.redMul(u.redMul(c.redISub(u)).redISub(a.redMul(l)));p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var m=this.z.redAdd(a).redSqr().redISub(r).redISub(l);return this.curve.jpoint(f,p,m)};br.prototype.mul=function(e,t){return e=new wt(e,t),this.curve._wnafMul(this,e)};br.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),s=r.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};br.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(r)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(s),this.x.cmp(r)===0)return!0}};br.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};br.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var kp=fd(function(n,e){var t=e;t.base=ic,t.short=lse,t.mont=null,t.edwards=null}),Bp=fd(function(n,e){var t=e,r=wi.assert;function i(a){a.type==="short"?this.curve=new kp.short(a):a.type==="edwards"?this.curve=new kp.edwards(a):this.curve=new kp.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,r(this.g.validate(),"Invalid curve"),r(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=i;function s(a,l){Object.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){var c=new i(l);return Object.defineProperty(t,a,{configurable:!0,enumerable:!0,value:c}),c}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Ms.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Ms.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Ms.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Ms.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Ms.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ms.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ms.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Ms.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function $a(n){if(!(this instanceof $a))return new $a(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=ss.toArray(n.entropy,n.entropyEnc||"hex"),t=ss.toArray(n.nonce,n.nonceEnc||"hex"),r=ss.toArray(n.pers,n.persEnc||"hex");lw(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,r)}var HP=$a;$a.prototype._init=function(e,t,r){var i=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};$a.prototype._hmac=function(){return new Ms.hmac(this.hash,this.K)};$a.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};$a.prototype.reseed=function(e,t,r,i){typeof t!="string"&&(i=r,r=t,t=null),e=ss.toArray(e,t),r=ss.toArray(r,i),lw(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1};$a.prototype.generate=function(e,t,r,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=r,r=t,t=null),r&&(r=ss.toArray(r,i||"hex"),this._update(r));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(r),this._reseed++,ss.encode(o,t)};var K_=wi.assert;function Mr(n,e){this.ec=n,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var uw=Mr;Mr.fromPublic=function(e,t,r){return t instanceof Mr?t:new Mr(e,{pub:t,pubEnc:r})};Mr.fromPrivate=function(e,t,r){return t instanceof Mr?t:new Mr(e,{priv:t,privEnc:r})};Mr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Mr.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};Mr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Mr.prototype._importPrivate=function(e,t){this.priv=new wt(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};Mr.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?K_(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&K_(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};Mr.prototype.derive=function(e){return e.validate()||K_(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Mr.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)};Mr.prototype.verify=function(e,t){return this.ec.verify(e,t,this)};Mr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var cse=wi.assert;function ig(n,e){if(n instanceof ig)return n;this._importDER(n,e)||(cse(n.r&&n.s,"Signature without r or s"),this.r=new wt(n.r,16),this.s=new wt(n.s,16),n.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=n.recoveryParam)}var sg=ig;function use(){this.place=0}function zv(n,e){var t=n[e.place++];if(!(t&128))return t;var r=t&15;if(r===0||r>4)return!1;for(var i=0,s=0,o=e.place;s<r;s++,o++)i<<=8,i|=n[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function NS(n){for(var e=0,t=n.length-1;!n[e]&&!(n[e+1]&128)&&e<t;)e++;return e===0?n:n.slice(e)}ig.prototype._importDER=function(e,t){e=wi.toArray(e,t);var r=new use;if(e[r.place++]!==48)return!1;var i=zv(e,r);if(i===!1||i+r.place!==e.length||e[r.place++]!==2)return!1;var s=zv(e,r);if(s===!1)return!1;var o=e.slice(r.place,s+r.place);if(r.place+=s,e[r.place++]!==2)return!1;var a=zv(e,r);if(a===!1||e.length!==a+r.place)return!1;var l=e.slice(r.place,a+r.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(l[0]===0)if(l[1]&128)l=l.slice(1);else return!1;return this.r=new wt(o),this.s=new wt(l),this.recoveryParam=null,!0};function Gv(n,e){if(e<128){n.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(n.push(t|128);--t;)n.push(e>>>(t<<3)&255);n.push(e)}ig.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),r[0]&128&&(r=[0].concat(r)),t=NS(t),r=NS(r);!r[0]&&!(r[1]&128);)r=r.slice(1);var i=[2];Gv(i,t.length),i=i.concat(t),i.push(2),Gv(i,r.length);var s=i.concat(r),o=[48];return Gv(o,s.length),o=o.concat(s),wi.encode(o,e)};var dse=function(){throw new Error("unsupported")},zP=wi.assert;function Fi(n){if(!(this instanceof Fi))return new Fi(n);typeof n=="string"&&(zP(Object.prototype.hasOwnProperty.call(Bp,n),"Unknown curve "+n),n=Bp[n]),n instanceof Bp.PresetCurve&&(n={curve:n}),this.curve=n.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=n.curve.g,this.g.precompute(n.curve.n.bitLength()+1),this.hash=n.hash||n.curve.hash}var fse=Fi;Fi.prototype.keyPair=function(e){return new uw(this,e)};Fi.prototype.keyFromPrivate=function(e,t){return uw.fromPrivate(this,e,t)};Fi.prototype.keyFromPublic=function(e,t){return uw.fromPublic(this,e,t)};Fi.prototype.genKeyPair=function(e){e||(e={});for(var t=new HP({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||dse(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),i=this.n.sub(new wt(2));;){var s=new wt(t.generate(r));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Fi.prototype._truncateToN=function(e,t){var r=e.byteLength()*8-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};Fi.prototype.sign=function(e,t,r,i){typeof r=="object"&&(i=r,r=null),i||(i={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new wt(e,16));for(var s=this.n.byteLength(),o=t.getPrivate().toArray("be",s),a=e.toArray("be",s),l=new HP({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),c=this.n.sub(new wt(1)),u=0;;u++){var d=i.k?i.k(u):new wt(l.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(c)>=0)){var f=this.g.mul(d);if(!f.isInfinity()){var p=f.getX(),m=p.umod(this.n);if(m.cmpn(0)!==0){var g=d.invm(this.n).mul(m.mul(t.getPrivate()).iadd(e));if(g=g.umod(this.n),g.cmpn(0)!==0){var y=(f.getY().isOdd()?1:0)|(p.cmp(m)!==0?2:0);return i.canonical&&g.cmp(this.nh)>0&&(g=this.n.sub(g),y^=1),new sg({r:m,s:g,recoveryParam:y})}}}}}};Fi.prototype.verify=function(e,t,r,i){e=this._truncateToN(new wt(e,16)),r=this.keyFromPublic(r,i),t=new sg(t,"hex");var s=t.r,o=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),l=a.mul(e).umod(this.n),c=a.mul(s).umod(this.n),u;return this.curve._maxwellTrick?(u=this.g.jmulAdd(l,r.getPublic(),c),u.isInfinity()?!1:u.eqXToP(s)):(u=this.g.mulAdd(l,r.getPublic(),c),u.isInfinity()?!1:u.getX().umod(this.n).cmp(s)===0)};Fi.prototype.recoverPubKey=function(n,e,t,r){zP((3&t)===t,"The recovery param is more than two bits"),e=new sg(e,r);var i=this.n,s=new wt(n),o=e.r,a=e.s,l=t&1,c=t>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");c?o=this.curve.pointFromX(o.add(this.curve.n),l):o=this.curve.pointFromX(o,l);var u=e.r.invm(i),d=i.sub(s).mul(u).umod(i),f=a.mul(u).umod(i);return this.g.mulAdd(d,o,f)};Fi.prototype.getKeyRecoveryParam=function(n,e,t,r){if(e=new sg(e,r),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(n,e,i)}catch{continue}if(s.eq(t))return i}throw new Error("Unable to find valid recovery factor")};var hse=fd(function(n,e){var t=e;t.version="6.5.4",t.utils=wi,t.rand=function(){throw new Error("unsupported")},t.curve=kp,t.curves=Bp,t.ec=fse,t.eddsa=null}),pse=hse.ec;const mse="signing-key/5.7.0",Y_=new ie(mse);let Vv=null;function Ns(){return Vv||(Vv=new pse("secp256k1")),Vv}class gse{constructor(e){Te(this,"curve","secp256k1"),Te(this,"privateKey",rt(e)),ql(this.privateKey)!==32&&Y_.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=Ns().keyFromPrivate(ut(this.privateKey));Te(this,"publicKey","0x"+t.getPublic(!1,"hex")),Te(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),Te(this,"_isSigningKey",!0)}_addPoint(e){const t=Ns().keyFromPublic(ut(this.publicKey)),r=Ns().keyFromPublic(ut(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=Ns().keyFromPrivate(ut(this.privateKey)),r=ut(e);r.length!==32&&Y_.throwArgumentError("bad digest length","digest",e);const i=t.sign(r,{canonical:!0});return J0({recoveryParam:i.recoveryParam,r:Nn("0x"+i.r.toString(16),32),s:Nn("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const t=Ns().keyFromPrivate(ut(this.privateKey)),r=Ns().keyFromPublic(ut(GP(e)));return Nn("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function vse(n,e){const t=J0(e),r={r:ut(t.r),s:ut(t.s)};return"0x"+Ns().recoverPubKey(ut(n),r,t.recoveryParam).encode("hex",!1)}function GP(n,e){const t=ut(n);if(t.length===32){const r=new gse(t);return e?"0x"+Ns().keyFromPrivate(t).getPublic(!0,"hex"):r.publicKey}else{if(t.length===33)return e?rt(t):"0x"+Ns().keyFromPublic(t).getPublic(!1,"hex");if(t.length===65)return e?"0x"+Ns().keyFromPublic(t).getPublic(!0,"hex"):rt(t)}return Y_.throwArgumentError("invalid public or private key","key","[REDACTED]")}const yse="transactions/5.7.0",ia=new ie(yse);var kS;(function(n){n[n.legacy=0]="legacy",n[n.eip2930=1]="eip2930",n[n.eip1559=2]="eip1559"})(kS||(kS={}));function dw(n){return n==="0x"?null:yr(n)}function Sr(n){return n==="0x"?iP:Ne.from(n)}function _se(n){const e=GP(n);return yr(Er(Kn(Er(e,1)),12))}function VP(n,e){return _se(vse(ut(n),e))}function fi(n,e){const t=Vu(Ne.from(n).toHexString());return t.length>32&&ia.throwArgumentError("invalid length for "+e,"transaction:"+e,n),t}function $v(n,e){return{address:yr(n),storageKeys:(e||[]).map((t,r)=>(ql(t)!==32&&ia.throwArgumentError("invalid access list storageKey",`accessList[${n}:${r}]`,t),t.toLowerCase()))}}function hd(n){if(Array.isArray(n))return n.map((t,r)=>Array.isArray(t)?(t.length>2&&ia.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${r}]`,t),$v(t[0],t[1])):$v(t.address,t.storageKeys));const e=Object.keys(n).map(t=>{const r=n[t].reduce((i,s)=>(i[s]=!0,i),{});return $v(t,Object.keys(r).sort())});return e.sort((t,r)=>t.address.localeCompare(r.address)),e}function $P(n){return hd(n).map(e=>[e.address,e.storageKeys])}function bse(n,e){if(n.gasPrice!=null){const r=Ne.from(n.gasPrice),i=Ne.from(n.maxFeePerGas||0);r.eq(i)||ia.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:r,maxFeePerGas:i})}const t=[fi(n.chainId||0,"chainId"),fi(n.nonce||0,"nonce"),fi(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),fi(n.maxFeePerGas||0,"maxFeePerGas"),fi(n.gasLimit||0,"gasLimit"),n.to!=null?yr(n.to):"0x",fi(n.value||0,"value"),n.data||"0x",$P(n.accessList||[])];if(e){const r=J0(e);t.push(fi(r.recoveryParam,"recoveryParam")),t.push(Vu(r.r)),t.push(Vu(r.s))}return Xr(["0x02",eg(t)])}function xse(n,e){const t=[fi(n.chainId||0,"chainId"),fi(n.nonce||0,"nonce"),fi(n.gasPrice||0,"gasPrice"),fi(n.gasLimit||0,"gasLimit"),n.to!=null?yr(n.to):"0x",fi(n.value||0,"value"),n.data||"0x",$P(n.accessList||[])];if(e){const r=J0(e);t.push(fi(r.recoveryParam,"recoveryParam")),t.push(Vu(r.r)),t.push(Vu(r.s))}return Xr(["0x01",eg(t)])}function jP(n,e,t){try{const r=Sr(e[0]).toNumber();if(r!==0&&r!==1)throw new Error("bad recid");n.v=r}catch{ia.throwArgumentError("invalid v for transaction type: 1","v",e[0])}n.r=Nn(e[1],32),n.s=Nn(e[2],32);try{const r=Kn(t(n));n.from=VP(r,{r:n.r,s:n.s,recoveryParam:n.v})}catch{}}function wse(n){const e=sw(n.slice(1));e.length!==9&&e.length!==12&&ia.throwArgumentError("invalid component count for transaction type: 2","payload",rt(n));const t=Sr(e[2]),r=Sr(e[3]),i={type:2,chainId:Sr(e[0]).toNumber(),nonce:Sr(e[1]).toNumber(),maxPriorityFeePerGas:t,maxFeePerGas:r,gasPrice:null,gasLimit:Sr(e[4]),to:dw(e[5]),value:Sr(e[6]),data:e[7],accessList:hd(e[8])};return e.length===9||(i.hash=Kn(n),jP(i,e.slice(9),bse)),i}function Ase(n){const e=sw(n.slice(1));e.length!==8&&e.length!==11&&ia.throwArgumentError("invalid component count for transaction type: 1","payload",rt(n));const t={type:1,chainId:Sr(e[0]).toNumber(),nonce:Sr(e[1]).toNumber(),gasPrice:Sr(e[2]),gasLimit:Sr(e[3]),to:dw(e[4]),value:Sr(e[5]),data:e[6],accessList:hd(e[7])};return e.length===8||(t.hash=Kn(n),jP(t,e.slice(8),xse)),t}function Ese(n){const e=sw(n);e.length!==9&&e.length!==6&&ia.throwArgumentError("invalid raw transaction","rawTransaction",n);const t={nonce:Sr(e[0]).toNumber(),gasPrice:Sr(e[1]),gasLimit:Sr(e[2]),to:dw(e[3]),value:Sr(e[4]),data:e[5],chainId:0};if(e.length===6)return t;try{t.v=Ne.from(e[6]).toNumber()}catch{return t}if(t.r=Nn(e[7],32),t.s=Nn(e[8],32),Ne.from(t.r).isZero()&&Ne.from(t.s).isZero())t.chainId=t.v,t.v=0;else{t.chainId=Math.floor((t.v-35)/2),t.chainId<0&&(t.chainId=0);let r=t.v-27;const i=e.slice(0,6);t.chainId!==0&&(i.push(rt(t.chainId)),i.push("0x"),i.push("0x"),r-=t.chainId*2+8);const s=Kn(eg(i));try{t.from=VP(s,{r:rt(t.r),s:rt(t.s),recoveryParam:r})}catch{}t.hash=Kn(n)}return t.type=null,t}function Sse(n){const e=ut(n);if(e[0]>127)return Ese(e);switch(e[0]){case 1:return Ase(e);case 2:return wse(e)}return ia.throwError(`unsupported transaction type: ${e[0]}`,ie.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const Tse="contracts/5.7.0";var Yl=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Fn=new ie(Tse);function t0(n,e){return Yl(this,void 0,void 0,function*(){const t=yield e;typeof t!="string"&&Fn.throwArgumentError("invalid address or ENS name","name",t);try{return yr(t)}catch{}n||Fn.throwError("a provider or signer is needed to resolve ENS names",ie.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const r=yield n.resolveName(t);return r==null&&Fn.throwArgumentError("resolver or addr is not configured for ENS name","name",t),r})}function Lp(n,e,t){return Yl(this,void 0,void 0,function*(){return Array.isArray(t)?yield Promise.all(t.map((r,i)=>Lp(n,Array.isArray(e)?e[i]:e[r.name],r))):t.type==="address"?yield t0(n,e):t.type==="tuple"?yield Lp(n,e,t.components):t.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(r=>Lp(n,r,t.arrayChildren))):Promise.reject(Fn.makeError("invalid value for array",ie.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function og(n,e,t){return Yl(this,void 0,void 0,function*(){let r={};t.length===e.inputs.length+1&&typeof t[t.length-1]=="object"&&(r=Qn(t.pop())),Fn.checkArgumentCount(t.length,e.inputs.length,"passed to contract"),n.signer?r.from?r.from=$n({override:t0(n.signer,r.from),signer:n.signer.getAddress()}).then(c=>Yl(this,void 0,void 0,function*(){return yr(c.signer)!==c.override&&Fn.throwError("Contract with a Signer cannot override from",ie.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),c.override})):r.from=n.signer.getAddress():r.from&&(r.from=t0(n.provider,r.from));const i=yield $n({args:Lp(n.signer||n.provider,t,e.inputs),address:n.resolvedAddress,overrides:$n(r)||{}}),s=n.interface.encodeFunctionData(e,i.args),o={data:s,to:i.address},a=i.overrides;if(a.nonce!=null&&(o.nonce=Ne.from(a.nonce).toNumber()),a.gasLimit!=null&&(o.gasLimit=Ne.from(a.gasLimit)),a.gasPrice!=null&&(o.gasPrice=Ne.from(a.gasPrice)),a.maxFeePerGas!=null&&(o.maxFeePerGas=Ne.from(a.maxFeePerGas)),a.maxPriorityFeePerGas!=null&&(o.maxPriorityFeePerGas=Ne.from(a.maxPriorityFeePerGas)),a.from!=null&&(o.from=a.from),a.type!=null&&(o.type=a.type),a.accessList!=null&&(o.accessList=hd(a.accessList)),o.gasLimit==null&&e.gas!=null){let c=21e3;const u=ut(s);for(let d=0;d<u.length;d++)c+=4,u[d]&&(c+=64);o.gasLimit=Ne.from(e.gas).add(c)}if(a.value){const c=Ne.from(a.value);!c.isZero()&&!e.payable&&Fn.throwError("non-payable method cannot override value",ie.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:r.value}),o.value=c}a.customData&&(o.customData=Qn(a.customData)),a.ccipReadEnabled&&(o.ccipReadEnabled=!!a.ccipReadEnabled),delete r.nonce,delete r.gasLimit,delete r.gasPrice,delete r.from,delete r.value,delete r.type,delete r.accessList,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas,delete r.customData,delete r.ccipReadEnabled;const l=Object.keys(r).filter(c=>r[c]!=null);return l.length&&Fn.throwError(`cannot override ${l.map(c=>JSON.stringify(c)).join(",")}`,ie.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:l}),o})}function Mse(n,e){return function(...t){return og(n,e,t)}}function Rse(n,e){const t=n.signer||n.provider;return function(...r){return Yl(this,void 0,void 0,function*(){t||Fn.throwError("estimate require a provider or signer",ie.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield og(n,e,r);return yield t.estimateGas(i)})}}function Ise(n,e){const t=e.wait.bind(e);e.wait=r=>t(r).then(i=>(i.events=i.logs.map(s=>{let o=Xo(s),a=null;try{a=n.interface.parseLog(s)}catch{}return a&&(o.args=a.args,o.decode=(l,c)=>n.interface.decodeEventLog(a.eventFragment,l,c),o.event=a.name,o.eventSignature=a.signature),o.removeListener=()=>n.provider,o.getBlock=()=>n.provider.getBlock(i.blockHash),o.getTransaction=()=>n.provider.getTransaction(i.transactionHash),o.getTransactionReceipt=()=>Promise.resolve(i),o}),i))}function WP(n,e,t){const r=n.signer||n.provider;return function(...i){return Yl(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const l=Qn(i.pop());l.blockTag!=null&&(s=yield l.blockTag),delete l.blockTag,i.push(l)}n.deployTransaction!=null&&(yield n._deployed(s));const o=yield og(n,e,i),a=yield r.call(o,s);try{let l=n.interface.decodeFunctionResult(e,a);return t&&e.outputs.length===1&&(l=l[0]),l}catch(l){throw l.code===ie.errors.CALL_EXCEPTION&&(l.address=n.address,l.args=i,l.transaction=o),l}})}}function Cse(n,e){return function(...t){return Yl(this,void 0,void 0,function*(){n.signer||Fn.throwError("sending a transaction requires a signer",ie.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),n.deployTransaction!=null&&(yield n._deployed());const r=yield og(n,e,t),i=yield n.signer.sendTransaction(r);return Ise(n,i),i})}}function BS(n,e,t){return e.constant?WP(n,e,t):Cse(n,e)}function qP(n){return n.address&&(n.topics==null||n.topics.length===0)?"*":(n.address||"*")+"@"+(n.topics?n.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class Gf{constructor(e,t){Te(this,"tag",e),Te(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter(r=>t||r.listener!==e?!0:(t=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter(r=>{const i=e.slice();return setTimeout(()=>{r.listener.apply(this,i)},0),!r.once}),t}prepareEvent(e){}getEmit(e){return[e]}}class Pse extends Gf{constructor(){super("error",null)}}class LS extends Gf{constructor(e,t,r,i){const s={address:e};let o=t.getEventTopic(r);i?(o!==i[0]&&Fn.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[o],super(qP(s),s),Te(this,"address",e),Te(this,"interface",t),Te(this,"fragment",r)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(t,r)=>this.interface.decodeEventLog(this.fragment,t,r);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=fne(e.args);if(t.length)throw t[0].error;const r=(e.args||[]).slice();return r.push(e),r}}class DS extends Gf{constructor(e,t){super("*",{address:e}),Te(this,"address",e),Te(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(r,i)=>this.interface.decodeEventLog(t.eventFragment,r,i),e.args=t.args}catch{}}}class Nse{constructor(e,t,r){Te(this,"interface",Gs(new.target,"getInterface")(t)),r==null?(Te(this,"provider",null),Te(this,"signer",null)):dh.isSigner(r)?(Te(this,"provider",r.provider||null),Te(this,"signer",r)):ng.isProvider(r)?(Te(this,"provider",r),Te(this,"signer",null)):Fn.throwArgumentError("invalid signer or provider","signerOrProvider",r),Te(this,"callStatic",{}),Te(this,"estimateGas",{}),Te(this,"functions",{}),Te(this,"populateTransaction",{}),Te(this,"filters",{});{const o={};Object.keys(this.interface.events).forEach(a=>{const l=this.interface.events[a];Te(this.filters,a,(...c)=>({address:this.address,topics:this.interface.encodeFilterTopics(l,c)})),o[l.name]||(o[l.name]=[]),o[l.name].push(a)}),Object.keys(o).forEach(a=>{const l=o[a];l.length===1?Te(this.filters,a,this.filters[l[0]]):Fn.warn(`Duplicate definition of ${a} (${l.join(", ")})`)})}if(Te(this,"_runningEvents",{}),Te(this,"_wrappedEmits",{}),e==null&&Fn.throwArgumentError("invalid contract address or ENS name","addressOrName",e),Te(this,"address",e),this.provider)Te(this,"resolvedAddress",t0(this.provider,e));else try{Te(this,"resolvedAddress",Promise.resolve(yr(e)))}catch{Fn.throwError("provider is required to use ENS name as contract address",ie.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(o=>{});const i={},s={};Object.keys(this.interface.functions).forEach(o=>{const a=this.interface.functions[o];if(s[o]){Fn.warn(`Duplicate ABI entry for ${JSON.stringify(o)}`);return}s[o]=!0;{const l=a.name;i[`%${l}`]||(i[`%${l}`]=[]),i[`%${l}`].push(o)}this[o]==null&&Te(this,o,BS(this,a,!0)),this.functions[o]==null&&Te(this.functions,o,BS(this,a,!1)),this.callStatic[o]==null&&Te(this.callStatic,o,WP(this,a,!0)),this.populateTransaction[o]==null&&Te(this.populateTransaction,o,Mse(this,a)),this.estimateGas[o]==null&&Te(this.estimateGas,o,Rse(this,a))}),Object.keys(i).forEach(o=>{const a=i[o];if(a.length>1)return;o=o.substring(1);const l=a[0];try{this[o]==null&&Te(this,o,this[l])}catch{}this.functions[o]==null&&Te(this.functions,o,this.functions[l]),this.callStatic[o]==null&&Te(this.callStatic,o,this.callStatic[l]),this.populateTransaction[o]==null&&Te(this.populateTransaction,o,this.populateTransaction[l]),this.estimateGas[o]==null&&Te(this.estimateGas,o,this.estimateGas[l])})}static getContractAddress(e){return eP(e)}static getInterface(e){return MS.isInterface(e)?e:new MS(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(t=>(t==="0x"&&Fn.throwError("contract not deployed",ie.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||Fn.throwError("sending a transactions require a signer",ie.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=Qn(e||{});return["from","to"].forEach(function(r){t[r]!=null&&Fn.throwError("cannot override "+r,ie.errors.UNSUPPORTED_OPERATION,{operation:r})}),t.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(t))}connect(e){typeof e=="string"&&(e=new aw(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&Te(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return j_.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new Pse);if(e==="event")return this._normalizeRunningEvent(new Gf("event",null));if(e==="*")return this._normalizeRunningEvent(new DS(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new LS(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const r=e.topics[0];if(typeof r!="string")throw new Error("invalid topic");const i=this.interface.getEvent(r);return this._normalizeRunningEvent(new LS(this.address,this.interface,i,e.topics))}catch{}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new Gf(qP(t),t))}return this._normalizeRunningEvent(new DS(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,r){const i=Xo(t);return i.removeListener=()=>{r&&(e.removeListener(r),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(t.blockHash),i.getTransaction=()=>this.provider.getTransaction(t.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(i),i}_addEventListener(e,t,r){if(this.provider||Fn.throwError("events require a provider or a signer with a provider",ie.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,r),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let o=this._wrapEvent(e,s,t);if(o.decodeError==null)try{const a=e.getEmit(o);this.emit(e.filter,...a)}catch(a){o.decodeError=a.error}e.filter!=null&&this.emit("event",o),o.decodeError!=null&&this.emit("error",o.decodeError,o)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,t,r){const i=this._getRunningEvent(e),s=Qn(i.filter);return typeof t=="string"&&tn(t,32)?(r!=null&&Fn.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r),s.blockHash=t):(s.fromBlock=t??0,s.toBlock=r??"latest"),this.provider.getLogs(s).then(o=>o.map(a=>this._wrapEvent(i,a,null)))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const r=this._getRunningEvent(e),i=r.run(t)>0;return this._checkRunningEvents(r),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((t,r)=>t+this._runningEvents[r].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const t=[];for(let r in this._runningEvents)this._runningEvents[r].listeners().forEach(i=>{t.push(i)});return t}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const r in this._runningEvents){const i=this._runningEvents[r];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const r=this._getRunningEvent(e);return r.removeListener(t),this._checkRunningEvents(r),this}removeListener(e,t){return this.off(e,t)}}class XP extends Nse{}class KP{constructor(e){Te(this,"alphabet",e),Te(this,"base",e.length),Te(this,"_alphabetMap",{}),Te(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=ut(e);if(t.length===0)return"";let r=[0];for(let s=0;s<t.length;++s){let o=t[s];for(let a=0;a<r.length;++a)o+=r[a]<<8,r[a]=o%this.base,o=o/this.base|0;for(;o>0;)r.push(o%this.base),o=o/this.base|0}let i="";for(let s=0;t[s]===0&&s<t.length-1;++s)i+=this._leader;for(let s=r.length-1;s>=0;--s)i+=this.alphabet[r[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let t=[];if(e.length===0)return new Uint8Array(t);t.push(0);for(let r=0;r<e.length;r++){let i=this._alphabetMap[e[r]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let o=0;o<t.length;++o)s+=t[o]*this.base,t[o]=s&255,s>>=8;for(;s>0;)t.push(s&255),s>>=8}for(let r=0;e[r]===this._leader&&r<e.length-1;++r)t.push(0);return ut(new Uint8Array(t.reverse()))}}new KP("abcdefghijklmnopqrstuvwxyz234567");const Q_=new KP("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function OS(n){return"0x"+Ms.sha256().update(ut(n)).digest("hex")}const kse="networks/5.7.1",FS=new ie(kse);function Bse(n){return n&&typeof n.renetwork=="function"}function To(n){const e=function(t,r){r==null&&(r={});const i=[];if(t.InfuraProvider&&r.infura!=="-")try{i.push(new t.InfuraProvider(n,r.infura))}catch{}if(t.EtherscanProvider&&r.etherscan!=="-")try{i.push(new t.EtherscanProvider(n,r.etherscan))}catch{}if(t.AlchemyProvider&&r.alchemy!=="-")try{i.push(new t.AlchemyProvider(n,r.alchemy))}catch{}if(t.PocketProvider&&r.pocket!=="-"){const s=["goerli","ropsten","rinkeby","sepolia"];try{const o=new t.PocketProvider(n,r.pocket);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}}if(t.CloudflareProvider&&r.cloudflare!=="-")try{i.push(new t.CloudflareProvider(n))}catch{}if(t.AnkrProvider&&r.ankr!=="-")try{const s=["ropsten"],o=new t.AnkrProvider(n,r.ankr);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}if(i.length===0)return null;if(t.FallbackProvider){let s=1;return r.quorum!=null?s=r.quorum:n==="homestead"&&(s=2),new t.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(t){return To(t)},e}function n0(n,e){const t=function(r,i){return r.JsonRpcProvider?new r.JsonRpcProvider(n,e):null};return t.renetwork=function(r){return n0(n,r)},t}const US={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:To("homestead")},HS={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:To("ropsten")},zS={chainId:63,name:"classicMordor",_defaultProvider:n0("https://www.ethercluster.com/mordor","classicMordor")},sp={unspecified:{chainId:0,name:"unspecified"},homestead:US,mainnet:US,morden:{chainId:2,name:"morden"},ropsten:HS,testnet:HS,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:To("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:To("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:To("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:To("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:n0("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:zS,classicTestnet:zS,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:n0("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:To("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:To("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function Lse(n){if(n==null)return null;if(typeof n=="number"){for(const r in sp){const i=sp[r];if(i.chainId===n)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:n,name:"unknown"}}if(typeof n=="string"){const r=sp[n];return r==null?null:{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress,_defaultProvider:r._defaultProvider||null}}const e=sp[n.name];if(!e)return typeof n.chainId!="number"&&FS.throwArgumentError("invalid network chainId","network",n),n;n.chainId!==0&&n.chainId!==e.chainId&&FS.throwArgumentError("network chainId mismatch","network",n);let t=n._defaultProvider||null;return t==null&&e._defaultProvider&&(Bse(e._defaultProvider)?t=e._defaultProvider.renetwork(n):t=e._defaultProvider),{name:n.name,chainId:e.chainId,ensAddress:n.ensAddress||e.ensAddress||null,_defaultProvider:t}}const Dse="web/5.7.1";var Ose=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};function Fse(n,e){return Ose(this,void 0,void 0,function*(){e==null&&(e={});const t={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(t.mode="cors",t.cache="no-cache",t.credentials="same-origin",t.redirect="follow",t.referrer="client"),e.fetchOptions!=null){const o=e.fetchOptions;o.mode&&(t.mode=o.mode),o.cache&&(t.cache=o.cache),o.credentials&&(t.credentials=o.credentials),o.redirect&&(t.redirect=o.redirect),o.referrer&&(t.referrer=o.referrer)}const r=yield fetch(n,t),i=yield r.arrayBuffer(),s={};return r.headers.forEach?r.headers.forEach((o,a)=>{s[a.toLowerCase()]=o}):r.headers.keys().forEach(o=>{s[o.toLowerCase()]=r.headers.get(o)}),{headers:s,statusCode:r.status,statusMessage:r.statusText,body:ut(new Uint8Array(i))}})}var Use=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Zi=new ie(Dse);function GS(n){return new Promise(e=>{setTimeout(e,n)})}function ya(n,e){if(n==null)return null;if(typeof n=="string")return n;if(tw(n)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return uh(n)}catch{}return rt(n)}return n}function Hse(n){return Js(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function zse(n,e,t){const r=typeof n=="object"&&n.throttleLimit!=null?n.throttleLimit:12;Zi.assertArgument(r>0&&r%1===0,"invalid connection throttle limit","connection.throttleLimit",r);const i=typeof n=="object"?n.throttleCallback:null,s=typeof n=="object"&&typeof n.throttleSlotInterval=="number"?n.throttleSlotInterval:100;Zi.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o=typeof n=="object"?!!n.errorPassThrough:!1,a={};let l=null;const c={method:"GET"};let u=!1,d=2*60*1e3;if(typeof n=="string")l=n;else if(typeof n=="object"){if((n==null||n.url==null)&&Zi.throwArgumentError("missing URL","connection.url",n),l=n.url,typeof n.timeout=="number"&&n.timeout>0&&(d=n.timeout),n.headers)for(const h in n.headers)a[h.toLowerCase()]={key:h,value:String(n.headers[h])},["if-none-match","if-modified-since"].indexOf(h.toLowerCase())>=0&&(u=!0);if(c.allowGzip=!!n.allowGzip,n.user!=null&&n.password!=null){l.substring(0,6)!=="https:"&&n.allowInsecureAuthentication!==!0&&Zi.throwError("basic authentication requires a secure https url",ie.errors.INVALID_ARGUMENT,{argument:"url",url:l,user:n.user,password:"[REDACTED]"});const h=n.user+":"+n.password;a.authorization={key:"Authorization",value:"Basic "+uP(Js(h))}}n.skipFetchSetup!=null&&(c.skipFetchSetup=!!n.skipFetchSetup),n.fetchOptions!=null&&(c.fetchOptions=Qn(n.fetchOptions))}const f=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),p=l?l.match(f):null;if(p)try{const h={statusCode:200,statusMessage:"OK",headers:{"content-type":p[1]||"text/plain"},body:p[2]?cP(p[3]):Hse(p[3])};let w=h.body;return t&&(w=t(h.body,h)),Promise.resolve(w)}catch(h){Zi.throwError("processing response error",ie.errors.SERVER_ERROR,{body:ya(p[1],p[2]),error:h,requestBody:null,requestMethod:"GET",url:l})}e&&(c.method="POST",c.body=e,a["content-type"]==null&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),a["content-length"]==null&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));const m={};Object.keys(a).forEach(h=>{const w=a[h];m[w.key]=w.value}),c.headers=m;const g=function(){let h=null;return{promise:new Promise(function(S,C){d&&(h=setTimeout(()=>{h!=null&&(h=null,C(Zi.makeError("timeout",ie.errors.TIMEOUT,{requestBody:ya(c.body,m["content-type"]),requestMethod:c.method,timeout:d,url:l})))},d))}),cancel:function(){h!=null&&(clearTimeout(h),h=null)}}}(),y=function(){return Use(this,void 0,void 0,function*(){for(let h=0;h<r;h++){let w=null;try{if(w=yield Fse(l,c),h<r){if(w.statusCode===301||w.statusCode===302){const S=w.headers.location||"";if(c.method==="GET"&&S.match(/^https:/)){l=w.headers.location;continue}}else if(w.statusCode===429){let S=!0;if(i&&(S=yield i(h,l)),S){let C=0;const k=w.headers["retry-after"];typeof k=="string"&&k.match(/^[1-9][0-9]*$/)?C=parseInt(k)*1e3:C=s*parseInt(String(Math.random()*Math.pow(2,h))),yield GS(C);continue}}}}catch(S){w=S.response,w==null&&(g.cancel(),Zi.throwError("missing response",ie.errors.SERVER_ERROR,{requestBody:ya(c.body,m["content-type"]),requestMethod:c.method,serverError:S,url:l}))}let M=w.body;if(u&&w.statusCode===304?M=null:!o&&(w.statusCode<200||w.statusCode>=300)&&(g.cancel(),Zi.throwError("bad response",ie.errors.SERVER_ERROR,{status:w.statusCode,headers:w.headers,body:ya(M,w.headers?w.headers["content-type"]:null),requestBody:ya(c.body,m["content-type"]),requestMethod:c.method,url:l})),t)try{const S=yield t(M,w);return g.cancel(),S}catch(S){if(S.throttleRetry&&h<r){let C=!0;if(i&&(C=yield i(h,l)),C){const k=s*parseInt(String(Math.random()*Math.pow(2,h)));yield GS(k);continue}}g.cancel(),Zi.throwError("processing response error",ie.errors.SERVER_ERROR,{body:ya(M,w.headers?w.headers["content-type"]:null),error:S,requestBody:ya(c.body,m["content-type"]),requestMethod:c.method,url:l})}return g.cancel(),M}return Zi.throwError("failed response",ie.errors.SERVER_ERROR,{requestBody:ya(c.body,m["content-type"]),requestMethod:c.method,url:l})})}();return Promise.race([g.promise,y])}function fw(n,e,t){let r=(s,o)=>{let a=null;if(s!=null)try{a=JSON.parse(uh(s))}catch(l){Zi.throwError("invalid JSON",ie.errors.SERVER_ERROR,{body:s,error:l})}return t&&(a=t(a,o)),a},i=null;if(e!=null){i=Js(e);const s=typeof n=="string"?{url:n}:Qn(n);s.headers?Object.keys(s.headers).filter(a=>a.toLowerCase()==="content-type").length!==0||(s.headers=Qn(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},n=s}return zse(n,i,r)}function Fd(n,e){return e||(e={}),e=Qn(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(t,r){let i=null,s=!1;const o=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{o()&&r(new Error("timeout"))},e.timeout));const a=e.retryLimit;let l=0;function c(){return n().then(function(u){if(u!==void 0)o()&&t(u);else if(e.oncePoll)e.oncePoll.once("poll",c);else if(e.onceBlock)e.onceBlock.once("block",c);else if(!s){if(l++,l>a){o()&&r(new Error("retry limit reached"));return}let d=e.interval*parseInt(String(Math.random()*Math.pow(2,l)));d<e.floor&&(d=e.floor),d>e.ceiling&&(d=e.ceiling),setTimeout(c,d)}return null},function(u){o()&&r(u)})}c()})}var r0="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Z_={};for(var op=0;op<r0.length;op++){var jv=r0.charAt(op);if(Z_[jv]!==void 0)throw new TypeError(jv+" is ambiguous");Z_[jv]=op}function su(n){var e=n>>25;return(n&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function YP(n){for(var e=1,t=0;t<n.length;++t){var r=n.charCodeAt(t);if(r<33||r>126)return"Invalid prefix ("+n+")";e=su(e)^r>>5}for(e=su(e),t=0;t<n.length;++t){var i=n.charCodeAt(t);e=su(e)^i&31}return e}function Gse(n,e,t){if(t=t||90,n.length+7+e.length>t)throw new TypeError("Exceeds length limit");n=n.toLowerCase();var r=YP(n);if(typeof r=="string")throw new Error(r);for(var i=n+"1",s=0;s<e.length;++s){var o=e[s];if(o>>5)throw new Error("Non 5-bit word");r=su(r)^o,i+=r0.charAt(o)}for(s=0;s<6;++s)r=su(r);for(r^=1,s=0;s<6;++s){var a=r>>(5-s)*5&31;i+=r0.charAt(a)}return i}function QP(n,e){if(e=e||90,n.length<8)return n+" too short";if(n.length>e)return"Exceeds length limit";var t=n.toLowerCase(),r=n.toUpperCase();if(n!==t&&n!==r)return"Mixed-case string "+n;n=t;var i=n.lastIndexOf("1");if(i===-1)return"No separator character for "+n;if(i===0)return"Missing prefix for "+n;var s=n.slice(0,i),o=n.slice(i+1);if(o.length<6)return"Data too short";var a=YP(s);if(typeof a=="string")return a;for(var l=[],c=0;c<o.length;++c){var u=o.charAt(c),d=Z_[u];if(d===void 0)return"Unknown character "+u;a=su(a)^d,!(c+6>=o.length)&&l.push(d)}return a!==1?"Invalid checksum for "+n:{prefix:s,words:l}}function Vse(){var n=QP.apply(null,arguments);if(typeof n=="object")return n}function $se(n){var e=QP.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function ag(n,e,t,r){for(var i=0,s=0,o=(1<<t)-1,a=[],l=0;l<n.length;++l)for(i=i<<e|n[l],s+=e;s>=t;)s-=t,a.push(i>>s&o);if(r)s>0&&a.push(i<<t-s&o);else{if(s>=e)return"Excess padding";if(i<<t-s&o)return"Non-zero padding"}return a}function jse(n){var e=ag(n,8,5,!0);if(Array.isArray(e))return e}function Wse(n){var e=ag(n,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function qse(n){var e=ag(n,5,8,!1);if(Array.isArray(e))return e}function Xse(n){var e=ag(n,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var Kse={decodeUnsafe:Vse,decode:$se,encode:Gse,toWordsUnsafe:jse,toWords:Wse,fromWordsUnsafe:qse,fromWords:Xse};const VS=Jl(Kse),lg="providers/5.7.2",Id=new ie(lg);class Ye{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),r=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),o=this.hash.bind(this),a=this.hex.bind(this),l=this.number.bind(this),c=this.type.bind(this),u=d=>this.data(d,!0);return e.transaction={hash:o,type:c,accessList:Ye.allowNull(this.accessList.bind(this),null),blockHash:Ye.allowNull(o,null),blockNumber:Ye.allowNull(l,null),transactionIndex:Ye.allowNull(l,null),confirmations:Ye.allowNull(l,null),from:t,gasPrice:Ye.allowNull(r),maxPriorityFeePerGas:Ye.allowNull(r),maxFeePerGas:Ye.allowNull(r),gasLimit:r,to:Ye.allowNull(t,null),value:r,nonce:l,data:s,r:Ye.allowNull(this.uint256),s:Ye.allowNull(this.uint256),v:Ye.allowNull(l),creates:Ye.allowNull(t,null),raw:Ye.allowNull(s)},e.transactionRequest={from:Ye.allowNull(t),nonce:Ye.allowNull(l),gasLimit:Ye.allowNull(r),gasPrice:Ye.allowNull(r),maxPriorityFeePerGas:Ye.allowNull(r),maxFeePerGas:Ye.allowNull(r),to:Ye.allowNull(t),value:Ye.allowNull(r),data:Ye.allowNull(u),type:Ye.allowNull(l),accessList:Ye.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:l,blockNumber:l,transactionHash:o,address:t,topics:Ye.arrayOf(o),data:s,logIndex:l,blockHash:o},e.receipt={to:Ye.allowNull(this.address,null),from:Ye.allowNull(this.address,null),contractAddress:Ye.allowNull(t,null),transactionIndex:l,root:Ye.allowNull(a),gasUsed:r,logsBloom:Ye.allowNull(s),blockHash:o,transactionHash:o,logs:Ye.arrayOf(this.receiptLog.bind(this)),blockNumber:l,confirmations:Ye.allowNull(l,null),cumulativeGasUsed:r,effectiveGasPrice:Ye.allowNull(r),status:Ye.allowNull(l),type:c},e.block={hash:Ye.allowNull(o),parentHash:o,number:l,timestamp:l,nonce:Ye.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:Ye.allowNull(t),extraData:s,transactions:Ye.allowNull(Ye.arrayOf(o)),baseFeePerGas:Ye.allowNull(r)},e.blockWithTransactions=Qn(e.block),e.blockWithTransactions.transactions=Ye.allowNull(Ye.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:Ye.allowNull(i,void 0),toBlock:Ye.allowNull(i,void 0),blockHash:Ye.allowNull(o,void 0),address:Ye.allowNull(t,void 0),topics:Ye.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:Ye.allowNull(l),blockHash:Ye.allowNull(o),transactionIndex:l,removed:Ye.allowNull(this.boolean.bind(this)),address:t,data:Ye.allowFalsish(s,"0x"),topics:Ye.arrayOf(o),transactionHash:o,logIndex:l},e}accessList(e){return hd(e||[])}number(e){return e==="0x"?0:Ne.from(e).toNumber()}type(e){return e==="0x"||e==null?0:Ne.from(e).toNumber()}bigNumber(e){return Ne.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return typeof e=="string"&&(!t&&e.substring(0,2)!=="0x"&&(e="0x"+e),tn(e))?e.toLowerCase():Id.throwArgumentError("invalid hash","value",e)}data(e,t){const r=this.hex(e,t);if(r.length%2!==0)throw new Error("invalid data; odd-length - "+e);return r}address(e){return yr(e)}callAddress(e){if(!tn(e,32))return null;const t=yr(Er(e,12));return t===Mne?null:t}contractAddress(e){return eP(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||tn(e))return nw(e);throw new Error("invalid blockTag")}hash(e,t){const r=this.hex(e,t);return ql(r)!==32?Id.throwArgumentError("invalid hash","value",e):r}difficulty(e){if(e==null)return null;const t=Ne.from(e);try{return t.toNumber()}catch{}return null}uint256(e){if(!tn(e))throw new Error("invalid uint256");return Nn(e,32)}_block(e,t){e.author!=null&&e.miner==null&&(e.miner=e.author);const r=e._difficulty!=null?e._difficulty:e.difficulty,i=Ye.check(t,e);return i._difficulty=r==null?null:Ne.from(r),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Ye.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&Ne.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const t=Ye.check(this.formats.transaction,e);if(e.chainId!=null){let r=e.chainId;tn(r)&&(r=Ne.from(r).toNumber()),t.chainId=r}else{let r=e.networkId;r==null&&t.v==null&&(r=e.chainId),tn(r)&&(r=Ne.from(r).toNumber()),typeof r!="number"&&t.v!=null&&(r=(t.v-35)/2,r<0&&(r=0),r=parseInt(r)),typeof r!="number"&&(r=0),t.chainId=r}return t.blockHash&&t.blockHash.replace(/0/g,"")==="x"&&(t.blockHash=null),t}transaction(e){return Sse(e)}receiptLog(e){return Ye.check(this.formats.receiptLog,e)}receipt(e){const t=Ye.check(this.formats.receipt,e);if(t.root!=null)if(t.root.length<=4){const r=Ne.from(t.root).toNumber();r===0||r===1?(t.status!=null&&t.status!==r&&Id.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=r,delete t.root):Id.throwArgumentError("invalid alt-root-status","value.root",t.root)}else t.root.length!==66&&Id.throwArgumentError("invalid root hash","value.root",t.root);return t.status!=null&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(t=>this.topics(t)):e!=null?this.hash(e,!0):null}filter(e){return Ye.check(this.formats.filter,e)}filterLog(e){return Ye.check(this.formats.filterLog,e)}static check(e,t){const r={};for(const i in e)try{const s=e[i](t[i]);s!==void 0&&(r[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=t[i],s}return r}static allowNull(e,t){return function(r){return r==null?t:e(r)}}static allowFalsish(e,t){return function(r){return r?e(r):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const r=[];return t.forEach(function(i){r.push(e(i))}),r}}}var xt=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Bt=new ie(lg),Yse=10;function $S(n){return n==null?"null":(ql(n)!==32&&Bt.throwArgumentError("invalid topic","topic",n),n.toLowerCase())}function jS(n){for(n=n.slice();n.length>0&&n[n.length-1]==null;)n.pop();return n.map(e=>{if(Array.isArray(e)){const t={};e.forEach(i=>{t[$S(i)]=!0});const r=Object.keys(t);return r.sort(),r.join("|")}else return $S(e)}).join("&")}function Qse(n){return n===""?[]:n.split(/&/g).map(e=>{if(e==="")return[];const t=e.split("|").map(r=>r==="null"?null:r);return t.length===1?t[0]:t})}function Ic(n){if(typeof n=="string"){if(n=n.toLowerCase(),ql(n)===32)return"tx:"+n;if(n.indexOf(":")===-1)return n}else{if(Array.isArray(n))return"filter:*:"+jS(n);if(Rre.isForkEvent(n))throw Bt.warn("not implemented"),new Error("not implemented");if(n&&typeof n=="object")return"filter:"+(n.address||"*")+":"+jS(n.topics||[])}throw new Error("invalid event - "+n)}function Cd(){return new Date().getTime()}function WS(n){return new Promise(e=>{setTimeout(e,n)})}const Zse=["block","network","pending","poll"];let Jse=class{constructor(e,t,r){Te(this,"tag",e),Te(this,"listener",t),Te(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const t=e[1],r=Qse(e[2]),i={};return r.length>0&&(i.topics=r),t&&t!=="*"&&(i.address=t),i}pollable(){return this.tag.indexOf(":")>=0||Zse.indexOf(this.tag)>=0}};const eoe={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Wv(n){return Nn(Ne.from(n).toHexString(),32)}function qS(n){return Q_.encode(mi([n,Er(OS(OS(n)),0,4)]))}const ZP=new RegExp("^(ipfs)://(.*)$","i"),XS=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),ZP,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function Dp(n,e){try{return uh(Vf(n,e))}catch{}return null}function Vf(n,e){if(n==="0x")return null;const t=Ne.from(Er(n,e,e+32)).toNumber(),r=Ne.from(Er(n,t,t+32)).toNumber();return Er(n,t+32,t+32+r)}function qv(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):Bt.throwArgumentError("unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}function KS(n){const e=ut(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function toe(n){if(n.length%32===0)return n;const e=new Uint8Array(Math.ceil(n.length/32)*32);return e.set(n),e}function JP(n){const e=[];let t=0;for(let r=0;r<n.length;r++)e.push(null),t+=32;for(let r=0;r<n.length;r++){const i=ut(n[r]);e[r]=KS(t),e.push(KS(i.length)),e.push(toe(i)),t+=32+Math.ceil(i.length/32)*32}return Xr(e)}class YS{constructor(e,t,r,i){Te(this,"provider",e),Te(this,"name",r),Te(this,"address",e.formatter.address(t)),Te(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>Ne.from(e).eq(1)).catch(e=>{if(e.code===ie.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return xt(this,void 0,void 0,function*(){const r={to:this.address,ccipReadEnabled:!0,data:Xr([e,Np(this.name),t||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,r.data=Xr(["0x9061b923",JP([hre(this.name),r.data])]));try{let s=yield this.provider.call(r);return ut(s).length%32===4&&Bt.throwError("resolver threw error",ie.errors.CALL_EXCEPTION,{transaction:r,data:s}),i&&(s=Vf(s,0)),s}catch(s){if(s.code===ie.errors.CALL_EXCEPTION)return null;throw s}})}_fetchBytes(e,t){return xt(this,void 0,void 0,function*(){const r=yield this._fetch(e,t);return r!=null?Vf(r,0):null})}_getAddress(e,t){const r=eoe[String(e)];if(r==null&&Bt.throwError(`unsupported coin type: ${e}`,ie.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),r.ilk==="eth")return this.provider.formatter.address(t);const i=ut(t);if(r.p2pkh!=null){const s=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return qS(mi([[r.p2pkh],"0x"+s[2]]))}}if(r.p2sh!=null){const s=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return qS(mi([[r.p2sh],"0x"+s[2]]))}}if(r.prefix!=null){const s=i[1];let o=i[0];if(o===0?s!==20&&s!==32&&(o=-1):o=-1,o>=0&&i.length===2+s&&s>=1&&s<=75){const a=VS.toWords(i.slice(2));return a.unshift(o),VS.encode(r.prefix,a)}}return null}getAddress(e){return xt(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===Pne?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===ie.errors.CALL_EXCEPTION)return null;throw i}const t=yield this._fetchBytes("0xf1cb7e06",Wv(e));if(t==null||t==="0x")return null;const r=this._getAddress(e,t);return r==null&&Bt.throwError("invalid or unsupported coin data",ie.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),r})}getAvatar(){return xt(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(t==null)return null;for(let r=0;r<XS.length;r++){const i=t.match(XS[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:qv(t)};case"erc721":case"erc1155":{const o=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:t});const a=this._resolvedAddress||(yield this.getAddress()),l=(i[2]||"").split("/");if(l.length!==2)return null;const c=yield this.provider.formatter.address(l[0]),u=Nn(Ne.from(l[1]).toHexString(),32);if(s==="erc721"){const g=this.provider.formatter.callAddress(yield this.provider.call({to:c,data:Xr(["0x6352211e",u])}));if(a!==g)return null;e.push({type:"owner",content:g})}else if(s==="erc1155"){const g=Ne.from(yield this.provider.call({to:c,data:Xr(["0x00fdd58e",Nn(a,32),u])}));if(g.isZero())return null;e.push({type:"balance",content:g.toString()})}const d={to:this.provider.formatter.address(l[0]),data:Xr([o,u])};let f=Dp(yield this.provider.call(d),0);if(f==null)return null;e.push({type:"metadata-url-base",content:f}),s==="erc1155"&&(f=f.replace("{id}",u.substring(2)),e.push({type:"metadata-url-expanded",content:f})),f.match(/^ipfs:/i)&&(f=qv(f)),e.push({type:"metadata-url",content:f});const p=yield fw(f);if(!p)return null;e.push({type:"metadata",content:JSON.stringify(p)});let m=p.image;if(typeof m!="string")return null;if(!m.match(/^(https:\/\/|data:)/i)){if(m.match(ZP)==null)return null;e.push({type:"url-ipfs",content:m}),m=qv(m)}return e.push({type:"url",content:m}),{linkage:e,url:m}}}}}catch{}return null})}getContentHash(){return xt(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const o=parseInt(t[3],16);if(t[4].length===o*2)return"ipfs://"+Q_.encode("0x"+t[1])}const r=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const o=parseInt(r[3],16);if(r[4].length===o*2)return"ipns://"+Q_.encode("0x"+r[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===32*2)return"bzz://"+i[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&s[1].length===34*2){const o={"=":"","+":"-","/":"_"};return"sia://"+uP("0x"+s[1]).replace(/[=+\/]/g,l=>o[l])}return Bt.throwError("invalid or unsupported content hash data",ie.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return xt(this,void 0,void 0,function*(){let t=Js(e);t=mi([Wv(64),Wv(t.length),t]),t.length%32!==0&&(t=mi([t,Nn("0x",32-e.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",rt(t));return r==null||r==="0x"?null:uh(r)})}}let Xv=null,noe=1;class roe extends ng{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),Te(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(t=>{}),this._ready().catch(t=>{});else{const t=Gs(new.target,"getNetwork")(e);t?(Te(this,"_network",t),this.emit("network",t,null)):Bt.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return xt(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||Bt.throwError("no network detected",ie.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:Te(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return Fd(()=>this._ready().then(e=>e,e=>{if(!(e.code===ie.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return Xv==null&&(Xv=new Ye),Xv}static getNetwork(e){return Lse(e??"homestead")}ccipReadFetch(e,t,r){return xt(this,void 0,void 0,function*(){if(this.disableCcipRead||r.length===0)return null;const i=e.to.toLowerCase(),s=t.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const l=r[a],c=l.replace("{sender}",i).replace("{data}",s),u=l.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:i}),d=yield fw({url:c,errorPassThrough:!0},u,(p,m)=>(p.status=m.statusCode,p));if(d.data)return d.data;const f=d.message||"unknown error";if(d.status>=400&&d.status<500)return Bt.throwError(`response not found during CCIP fetch: ${f}`,ie.errors.SERVER_ERROR,{url:l,errorMessage:f});o.push(f)}return Bt.throwError(`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,ie.errors.SERVER_ERROR,{urls:r,errorMessages:o})})}_getInternalBlockNumber(e){return xt(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(Cd()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const t=Cd(),r=$n({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),s;const o=Cd();return i=Ne.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:t,respTime:o}});return this._internalBlockNumber=r,r.catch(i=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)}),(yield r).blockNumber})}poll(){return xt(this,void 0,void 0,function*(){const e=noe++,t=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(r),this.emit("poll",e,r),r===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)Bt.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",Bt.makeError("network block skew detected",ie.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let i=this._emitted.block+1;i<=r;i++)this.emit("block",i);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&r-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=r-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let o=this.getTransactionReceipt(s).then(a=>(!a||a.blockNumber==null||(this._emitted["t:"+s]=a.blockNumber,this.emit(s,a)),null)).catch(a=>{this.emit("error",a)});t.push(o);break}case"filter":{if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=r-1);const s=i.filter;s.fromBlock=i._lastBlockNumber+1,s.toBlock=r;const o=s.toBlock-this._maxFilterBlockRange;o>s.fromBlock&&(s.fromBlock=o),s.fromBlock<0&&(s.fromBlock=0);const a=this.getLogs(s).then(l=>{i._inflight=!1,l.length!==0&&l.forEach(c=>{c.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=c.blockNumber),this._emitted["b:"+c.blockHash]=c.blockNumber,this._emitted["t:"+c.transactionHash]=c.blockNumber,this.emit(s,c)})}).catch(l=>{this.emit("error",l),i._inflight=!1});t.push(a)}break}}}),this._lastBlockNumber=r,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return xt(this,void 0,void 0,function*(){return Bt.throwError("provider does not support network detection",ie.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return xt(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield WS(0),this._network;const r=Bt.makeError("underlying network changed",ie.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",r),r}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=Cd();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(t=>((this._fastBlockNumber==null||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=Cd(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,r){return xt(this,void 0,void 0,function*(){return this._waitForTransaction(e,t??1,r||0,null)})}_waitForTransaction(e,t,r,i){return xt(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=t?s:new Promise((o,a)=>{const l=[];let c=!1;const u=function(){return c?!0:(c=!0,l.forEach(f=>{f()}),!1)},d=f=>{f.confirmations<t||u()||o(f)};if(this.on(e,d),l.push(()=>{this.removeListener(e,d)}),i){let f=i.startBlock,p=null;const m=g=>xt(this,void 0,void 0,function*(){c||(yield WS(1e3),this.getTransactionCount(i.from).then(y=>xt(this,void 0,void 0,function*(){if(!c){if(y<=i.nonce)f=g;else{{const h=yield this.getTransaction(e);if(h&&h.blockNumber!=null)return}for(p==null&&(p=f-3,p<i.startBlock&&(p=i.startBlock));p<=g;){if(c)return;const h=yield this.getBlockWithTransactions(p);for(let w=0;w<h.transactions.length;w++){const M=h.transactions[w];if(M.hash===e)return;if(M.from===i.from&&M.nonce===i.nonce){if(c)return;const S=yield this.waitForTransaction(M.hash,t);if(u())return;let C="replaced";M.data===i.data&&M.to===i.to&&M.value.eq(i.value)?C="repriced":M.data==="0x"&&M.from===M.to&&M.value.isZero()&&(C="cancelled"),a(Bt.makeError("transaction was replaced",ie.errors.TRANSACTION_REPLACED,{cancelled:C==="replaced"||C==="cancelled",reason:C,replacement:this._wrapTransaction(M),hash:e,receipt:S}));return}}p++}}c||this.once("block",m)}}),y=>{c||this.once("block",m)}))});if(c)return;this.once("block",m),l.push(()=>{this.removeListener("block",m)})}if(typeof r=="number"&&r>0){const f=setTimeout(()=>{u()||a(Bt.makeError("timeout exceeded",ie.errors.TIMEOUT,{timeout:r}))},r);f.unref&&f.unref(),l.push(()=>{clearTimeout(f)})}})})}getBlockNumber(){return xt(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return xt(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return Ne.from(e)}catch(t){return Bt.throwError("bad result from backend",ie.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return xt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield $n({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getBalance",r);try{return Ne.from(i)}catch(s){return Bt.throwError("bad result from backend",ie.errors.SERVER_ERROR,{method:"getBalance",params:r,result:i,error:s})}})}getTransactionCount(e,t){return xt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield $n({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getTransactionCount",r);try{return Ne.from(i).toNumber()}catch(s){return Bt.throwError("bad result from backend",ie.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:i,error:s})}})}getCode(e,t){return xt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield $n({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getCode",r);try{return rt(i)}catch(s){return Bt.throwError("bad result from backend",ie.errors.SERVER_ERROR,{method:"getCode",params:r,result:i,error:s})}})}getStorageAt(e,t,r){return xt(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield $n({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then(o=>nw(o))}),s=yield this.perform("getStorageAt",i);try{return rt(s)}catch(o){return Bt.throwError("bad result from backend",ie.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:o})}})}_wrapTransaction(e,t,r){if(t!=null&&ql(t)!==32)throw new Error("invalid response - sendTransaction");const i=e;return t!=null&&e.hash!==t&&Bt.throwError("Transaction hash mismatch from Provider.sendTransaction.",ie.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),i.wait=(s,o)=>xt(this,void 0,void 0,function*(){s==null&&(s=1),o==null&&(o=0);let a;s!==0&&r!=null&&(a={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r});const l=yield this._waitForTransaction(e.hash,s,o,a);return l==null&&s===0?null:(this._emitted["t:"+e.hash]=l.blockNumber,l.status===0&&Bt.throwError("transaction failed",ie.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:l}),l)}),i}sendTransaction(e){return xt(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(s=>rt(s)),r=this.formatter.transaction(e);r.confirmations==null&&(r.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,s,i)}catch(s){throw s.transaction=r,s.transactionHash=r.hash,s}})}_getTransactionRequest(e){return xt(this,void 0,void 0,function*(){const t=yield e,r={};return["from","to"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?Ne.from(s):null))}),["type"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s??null))}),t.accessList&&(r.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?rt(s):null))}),this.formatter.transactionRequest(yield $n(r))})}_getFilter(e){return xt(this,void 0,void 0,function*(){e=yield e;const t={};return e.address!=null&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(r=>{e[r]!=null&&(t[r]=e[r])}),["fromBlock","toBlock"].forEach(r=>{e[r]!=null&&(t[r]=this._getBlockTag(e[r]))}),this.formatter.filter(yield $n(t))})}_call(e,t,r){return xt(this,void 0,void 0,function*(){r>=Yse&&Bt.throwError("CCIP read exceeded maximum redirections",ie.errors.SERVER_ERROR,{redirects:r,transaction:e});const i=e.to,s=yield this.perform("call",{transaction:e,blockTag:t});if(r>=0&&t==="latest"&&i!=null&&s.substring(0,10)==="0x556f1830"&&ql(s)%32===4)try{const o=Er(s,4),a=Er(o,0,32);Ne.from(a).eq(i)||Bt.throwError("CCIP Read sender did not match",ie.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const l=[],c=Ne.from(Er(o,32,64)).toNumber(),u=Ne.from(Er(o,c,c+32)).toNumber(),d=Er(o,c+32);for(let h=0;h<u;h++){const w=Dp(d,h*32);w==null&&Bt.throwError("CCIP Read contained corrupt URL string",ie.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),l.push(w)}const f=Vf(o,64);Ne.from(Er(o,100,128)).isZero()||Bt.throwError("CCIP Read callback selector included junk",ie.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const p=Er(o,96,100),m=Vf(o,128),g=yield this.ccipReadFetch(e,f,l);g==null&&Bt.throwError("CCIP Read disabled or provided no URLs",ie.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const y={to:i,data:Xr([p,JP([g,m])])};return this._call(y,t,r+1)}catch(o){if(o.code===ie.errors.SERVER_ERROR)throw o}try{return rt(s)}catch(o){return Bt.throwError("bad result from backend",ie.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:s,error:o})}})}call(e,t){return xt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield $n({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)})}estimateGas(e){return xt(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield $n({transaction:this._getTransactionRequest(e)}),r=yield this.perform("estimateGas",t);try{return Ne.from(r)}catch(i){return Bt.throwError("bad result from backend",ie.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:i})}})}_getAddress(e){return xt(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&Bt.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return t==null&&Bt.throwError("ENS name not configured",ie.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return xt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let r=-128;const i={includeTransactions:!!t};if(tn(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),tn(i.blockTag)&&(r=parseInt(i.blockTag.substring(2),16))}catch{Bt.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return Fd(()=>xt(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&r>this._emitted.block?null:void 0;if(t){let o=null;for(let l=0;l<s.transactions.length;l++){const c=s.transactions[l];if(c.blockNumber==null)c.confirmations=0;else if(c.confirmations==null){o==null&&(o=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let u=o-c.blockNumber+1;u<=0&&(u=1),c.confirmations=u}}const a=this.formatter.blockWithTransactions(s);return a.transactions=a.transactions.map(l=>this._wrapTransaction(l)),a}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return xt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return Fd(()=>xt(this,void 0,void 0,function*(){const r=yield this.perform("getTransaction",t);if(r==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(r);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return xt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return Fd(()=>xt(this,void 0,void 0,function*(){const r=yield this.perform("getTransactionReceipt",t);if(r==null)return this._emitted["t:"+e]==null?null:void 0;if(r.blockHash==null)return;const i=this.formatter.receipt(r);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return i}),{oncePoll:this})})}getLogs(e){return xt(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield $n({filter:this._getFilter(e)}),r=yield this.perform("getLogs",t);return r.forEach(i=>{i.removed==null&&(i.removed=!1)}),Ye.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)})}getEtherPrice(){return xt(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return xt(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&Bt.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return xt(this,void 0,void 0,function*(){let t=e;for(;;){if(t===""||t==="."||e!=="eth"&&t==="eth")return null;const r=yield this._getResolver(t,"getResolver");if(r!=null){const i=new YS(this,r,e);return t!==e&&!(yield i.supportsWildcard())?null:i}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return xt(this,void 0,void 0,function*(){t==null&&(t="ENS");const r=yield this.getNetwork();r.ensAddress||Bt.throwError("network does not support ENS",ie.errors.UNSUPPORTED_OPERATION,{operation:t,network:r.name});try{const i=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+Np(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return xt(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(r){if(tn(e))throw r}typeof e!="string"&&Bt.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return xt(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const t=e.substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(t,"lookupAddress");if(r==null)return null;const i=Dp(yield this.call({to:r,data:"0x691f3431"+Np(t).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return xt(this,void 0,void 0,function*(){let t=null;if(tn(e)){const s=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(s,"getAvatar");if(!o)return null;t=new YS(this,o,s);try{const a=yield t.getAvatar();if(a)return a.url}catch(a){if(a.code!==ie.errors.CALL_EXCEPTION)throw a}try{const a=Dp(yield this.call({to:o,data:"0x691f3431"+Np(s).substring(2)}),0);t=yield this.getResolver(a)}catch(a){if(a.code!==ie.errors.CALL_EXCEPTION)throw a;return null}}else if(t=yield this.getResolver(e),!t)return null;const r=yield t.getAvatar();return r==null?null:r.url})}perform(e,t){return Bt.throwError(e+" not implemented",ie.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_addEventListener(e,t,r){const i=new Jse(Ic(e),t,r);return this._events.push(i),this._startEvent(i),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let r=!1,i=[],s=Ic(e);return this._events=this._events.filter(o=>o.tag!==s?!0:(setTimeout(()=>{o.listener.apply(this,t)},0),r=!0,o.once?(i.push(o),!1):!0)),i.forEach(o=>{this._stopEvent(o)}),r}listenerCount(e){if(!e)return this._events.length;let t=Ic(e);return this._events.filter(r=>r.tag===t).length}listeners(e){if(e==null)return this._events.map(r=>r.listener);let t=Ic(e);return this._events.filter(r=>r.tag===t).map(r=>r.listener)}off(e,t){if(t==null)return this.removeAllListeners(e);const r=[];let i=!1,s=Ic(e);return this._events=this._events.filter(o=>o.tag!==s||o.listener!=t||i?!0:(i=!0,r.push(o),!1)),r.forEach(o=>{this._stopEvent(o)}),this}removeAllListeners(e){let t=[];if(e==null)t=this._events,this._events=[];else{const r=Ic(e);this._events=this._events.filter(i=>i.tag!==r?!0:(t.push(i),!1))}return t.forEach(r=>{this._stopEvent(r)}),this}}var Ao=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const jn=new ie(lg),ioe=["call","estimateGas"];function Zd(n,e){if(n==null)return null;if(typeof n.message=="string"&&n.message.match("reverted")){const t=tn(n.data)?n.data:null;if(!e||t)return{message:n.message,data:t}}if(typeof n=="object"){for(const t in n){const r=Zd(n[t],e);if(r)return r}return null}if(typeof n=="string")try{return Zd(JSON.parse(n),e)}catch{}return null}function e3(n,e,t){const r=t.transaction||t.signedTransaction;if(n==="call"){const s=Zd(e,!0);if(s)return s.data;jn.throwError("missing revert data in call exception; Transaction reverted without a reason string",ie.errors.CALL_EXCEPTION,{data:"0x",transaction:r,error:e})}if(n==="estimateGas"){let s=Zd(e.body,!1);s==null&&(s=Zd(e,!1)),s&&jn.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",ie.errors.UNPREDICTABLE_GAS_LIMIT,{reason:s.message,method:n,transaction:r,error:e})}let i=e.message;throw e.code===ie.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&jn.throwError("insufficient funds for intrinsic transaction cost",ie.errors.INSUFFICIENT_FUNDS,{error:e,method:n,transaction:r}),i.match(/nonce (is )?too low/i)&&jn.throwError("nonce has already been used",ie.errors.NONCE_EXPIRED,{error:e,method:n,transaction:r}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&jn.throwError("replacement fee too low",ie.errors.REPLACEMENT_UNDERPRICED,{error:e,method:n,transaction:r}),i.match(/only replay-protected/i)&&jn.throwError("legacy pre-eip-155 transactions not supported",ie.errors.UNSUPPORTED_OPERATION,{error:e,method:n,transaction:r}),ioe.indexOf(n)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&jn.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",ie.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:n,transaction:r}),e}function QS(n){return new Promise(function(e){setTimeout(e,n)})}function soe(n){if(n.error){const e=new Error(n.error.message);throw e.code=n.error.code,e.data=n.error.data,e}return n.result}function Pd(n){return n&&n.toLowerCase()}const J_={};class t3 extends dh{constructor(e,t,r){if(super(),e!==J_)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");Te(this,"provider",t),r==null&&(r=0),typeof r=="string"?(Te(this,"_address",this.provider.formatter.address(r)),Te(this,"_index",null)):typeof r=="number"?(Te(this,"_index",r),Te(this,"_address",null)):jn.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(e){return jn.throwError("cannot alter JSON-RPC Signer connection",ie.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new ooe(J_,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&jn.throwError("unknown account #"+this._index,ie.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=Qn(e);const t=this.getAddress().then(r=>(r&&(r=r.toLowerCase()),r));if(e.gasLimit==null){const r=Qn(e);r.from=t,e.gasLimit=this.provider.estimateGas(r)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(r=>Ao(this,void 0,void 0,function*(){if(r==null)return null;const i=yield this.provider.resolveName(r);return i==null&&jn.throwArgumentError("provided ENS name resolves to null","tx.to",r),i}))),$n({tx:$n(e),sender:t}).then(({tx:r,sender:i})=>{r.from!=null?r.from.toLowerCase()!==i&&jn.throwArgumentError("from address mismatch","transaction",e):r.from=i;const s=this.provider.constructor.hexlifyTransaction(r,{from:!0});return this.provider.send("eth_sendTransaction",[s]).then(o=>o,o=>(typeof o.message=="string"&&o.message.match(/user denied/i)&&jn.throwError("user rejected transaction",ie.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:r}),e3("sendTransaction",o,s)))})}signTransaction(e){return jn.throwError("signing transactions is unsupported",ie.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return Ao(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(e);try{return yield Fd(()=>Ao(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(r);if(i!==null)return this.provider._wrapTransaction(i,r,t)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=r,i}})}signMessage(e){return Ao(this,void 0,void 0,function*(){const t=typeof e=="string"?Js(e):e,r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[rt(t),r.toLowerCase()])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&jn.throwError("user rejected signing",ie.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:e}),i}})}_legacySignMessage(e){return Ao(this,void 0,void 0,function*(){const t=typeof e=="string"?Js(e):e,r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),rt(t)])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&jn.throwError("user rejected signing",ie.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:e}),i}})}_signTypedData(e,t,r){return Ao(this,void 0,void 0,function*(){const i=yield ui.resolveNames(e,t,r,o=>this.provider.resolveName(o)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(ui.getPayload(i.domain,t,i.value))])}catch(o){throw typeof o.message=="string"&&o.message.match(/user denied/i)&&jn.throwError("user rejected signing",ie.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:i.domain,types:t,value:i.value}}),o}})}unlock(e){return Ao(this,void 0,void 0,function*(){const t=this.provider,r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])})}}class ooe extends t3{sendTransaction(e){return this.sendUncheckedTransaction(e).then(t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:r=>this.provider.waitForTransaction(t,r)}))}}const aoe={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class n3 extends roe{constructor(e,t){let r=t;r==null&&(r=new Promise((i,s)=>{setTimeout(()=>{this.detectNetwork().then(o=>{i(o)},o=>{s(o)})},0)})),super(r),e||(e=Gs(this.constructor,"defaultUrl")()),typeof e=="string"?Te(this,"connection",Object.freeze({url:e})):Te(this,"connection",Object.freeze(Qn(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return Ao(this,void 0,void 0,function*(){yield QS(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const t=Gs(this.constructor,"getNetwork");try{return t(Ne.from(e).toNumber())}catch(r){return jn.throwError("could not detect network",ie.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:r})}}return jn.throwError("could not detect network",ie.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new t3(J_,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(t=>this.formatter.address(t)))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Xo(r),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const s=fw(this.connection,JSON.stringify(r),soe).then(o=>(this.emit("debug",{action:"response",request:r,response:o,provider:this}),o),o=>{throw this.emit("debug",{action:"response",error:o,request:r,provider:this}),o});return i&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Pd(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Pd(t.address),t.blockTag]];case"getCode":return["eth_getCode",[Pd(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Pd(t.address),Nn(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[Gs(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[Gs(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&t.filter.address!=null&&(t.filter.address=Pd(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return Ao(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=t.transaction;if(i&&i.type!=null&&Ne.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=yield this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(t=Qn(t),t.transaction=Qn(i),delete t.transaction.type)}}const r=this.prepareRequest(e,t);r==null&&jn.throwError(e+" not implemented",ie.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(r[0],r[1])}catch(i){return e3(e,i,t)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(r){function i(){e.send("eth_getFilterChanges",[r]).then(function(s){if(e._pendingFilter!=t)return null;let o=Promise.resolve();return s.forEach(function(a){e._emitted["t:"+a.toLowerCase()]="pending",o=o.then(function(){return e.getTransaction(a).then(function(l){return e.emit("pending",l),null})})}),o.then(function(){return QS(1e3)})}).then(function(){if(e._pendingFilter!=t){e.send("eth_uninstallFilter",[r]);return}return setTimeout(function(){i()},0),null}).catch(s=>{})}return i(),r}).catch(r=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const r=Qn(aoe);if(t)for(const s in t)t[s]&&(r[s]=!0);ine(e,r);const i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(s){if(e[s]==null)return;const o=nw(Ne.from(e[s]));s==="gasLimit"&&(s="gas"),i[s]=o}),["from","to","data"].forEach(function(s){e[s]!=null&&(i[s]=rt(e[s]))}),e.accessList&&(i.accessList=hd(e.accessList)),i}}const ZS=new ie(lg);let loe=1;function JS(n,e){const t="Web3LegacyFetcher";return function(r,i){const s={method:r,params:i,id:loe++,jsonrpc:"2.0"};return new Promise((o,a)=>{this.emit("debug",{action:"request",fetcher:t,request:Xo(s),provider:this}),e(s,(l,c)=>{if(l)return this.emit("debug",{action:"response",fetcher:t,error:l,request:s,provider:this}),a(l);if(this.emit("debug",{action:"response",fetcher:t,request:s,response:c,provider:this}),c.error){const u=new Error(c.error.message);return u.code=c.error.code,u.data=c.error.data,a(u)}o(c.result)})})}}function coe(n){return function(e,t){t==null&&(t=[]);const r={method:e,params:t};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:Xo(r),provider:this}),n.request(r).then(i=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,response:i,provider:this}),i),i=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,error:i,provider:this}),i})}}class uoe extends n3{constructor(e,t){e==null&&ZS.throwArgumentError("missing provider","provider",e);let r=null,i=null,s=null;typeof e=="function"?(r="unknown:",i=e):(r=e.host||e.path||"",!r&&e.isMetaMask&&(r="metamask"),s=e,e.request?(r===""&&(r="eip-1193:"),i=coe(e)):e.sendAsync?i=JS(e,e.sendAsync.bind(e)):e.send?i=JS(e,e.send.bind(e)):ZS.throwArgumentError("unsupported provider","provider",e),r||(r="unknown:")),super(r,t),Te(this,"jsonRpcFetchFunc",i),Te(this,"provider",s)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}const doe="units/5.7.0",foe=new ie(doe),r3=["wei","kwei","mwei","gwei","szabo","finney","ether"];function hoe(n,e){if(typeof e=="string"){const t=r3.indexOf(e);t!==-1&&(e=3*t)}return Cp(n,e??18)}function poe(n,e){if(typeof n!="string"&&foe.throwArgumentError("value must be a string","value",n),typeof e=="string"){const t=r3.indexOf(e);t!==-1&&(e=3*t)}return Ts(n,e??18)}function moe(n){return hoe(n,18)}function goe(n){return poe(n,18)}const Ja=(n,e)=>{const t=zr();var r="";e?r=e:t.getWeb3ConfigItem.explorer?r=t.getWeb3ConfigItem.explorer:r="https://base-sepolia.blockscout.com",t.setDialogError({show:!0,url:`${r}/tx/${n}`})},cg=async n=>{const t=zr().getWeb3ConfigItem;try{await n.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${t.chain_id.toString(16)}`}]})}catch(r){if(r.code===4902)try{await n.request({method:"wallet_addEthereumChain",params:[{chainId:`0x${t.chain_id.toString(16)}`,chainName:`${t.network}${t.network.includes("Testnet")?"":" Testnet"}`,nativeCurrency:{name:t.symbol||"ETH",symbol:t.symbol||"ETH",decimals:18},rpcUrls:[t.rpc||""],blockExplorerUrls:[t.explorer||""]}]})}catch(i){throw i}else throw r}},pd=n=>{if(!n)return"";const e=moe(n.toString());return e>0?Math.round(e*100)/100:0},i3=n=>n?goe(n.toString()):"",voe=async()=>{try{const n=zr();return(await zC.post(n.getWeb3ConfigItem.rpc,{jsonrpc:"2.0",method:"eth_blockNumber",params:[],id:o3()})).data.result}catch{}},s3=async n=>{const e=await voe();if(e){const t=await yoe(e,n);return parseInt(t,16)/10**18}},yoe=async(n,e)=>{try{const t=zr();return(await zC.post(t.getWeb3ConfigItem.rpc,{jsonrpc:"2.0",method:"eth_getBalance",params:[e,n],id:o3()})).data.result}catch{}},o3=()=>Math.floor(Math.random()*1e16),md=async()=>{var t;const n=dr(),e=n.getAccountsWalletAddress;if((e==null?void 0:e.toLowerCase())===((t=n.getAccountsWalletAddress)==null?void 0:t.toLowerCase()))return e;Zn.warning("The bound wallet address does not match the current account")},sa=async(n="nftmint",e="saleAbi")=>{var t,r,i,s,o,a;try{const l=zr(),c=l.getWeb3ConfigItem,u=new n3(c.rpc),d=l.getWeb3ConfigItem[n],f=Hb(e);return new XP(d,f,u)}catch(l){const c=Xa(l==null?void 0:l.message);return c?Ja(c):Zn.error(((r=(t=l==null?void 0:l.error)==null?void 0:t.data)==null?void 0:r.message)||((s=(i=l==null?void 0:l.error)==null?void 0:i.data)==null?void 0:s.message)||((o=l==null?void 0:l.error)==null?void 0:o.message)||((a=l==null?void 0:l.data)==null?void 0:a.message)||"Transaction failed"),null}},ug=async(n="nftmint",e="saleAbi")=>{try{const t=zr(),i=new uoe(t.getAccountWalletItem).getSigner(),s=t.getWeb3ConfigItem[n],o=Hb(e);return new XP(s,o,i)}catch{}},a3=async(n="nft",e="nftABI")=>{var t,r,i,s,o,a;try{const l=zr(),c=new od(l.getAccountWalletItem),u=l.getWeb3ConfigItem[n],d=Hb(e);return new c.eth.Contract(d,u)}catch(l){const c=Xa(l==null?void 0:l.message);return c?Ja(c):Zn.error(((r=(t=l==null?void 0:l.error)==null?void 0:t.data)==null?void 0:r.message)||((s=(i=l==null?void 0:l.error)==null?void 0:i.data)==null?void 0:s.message)||((o=l==null?void 0:l.error)==null?void 0:o.message)||((a=l==null?void 0:l.data)==null?void 0:a.message)||"Transaction failed"),null}},l3=async n=>{try{return(await(await sa("nftmint","nftmintABI")).mintMetadatas(n)).toString().split(",").map(Number)}catch{}},c3=async(n,e,t)=>{var r,i,s,o,a,l;try{if(await md()){const d=await(await ug("nftmint","nftmintABI")).purchase(n,e,{value:i3(t)});return d.wait(),d.hash}}catch(c){const u=Xa(c==null?void 0:c.message);return u?Ja(u):Zn.error(((i=(r=c==null?void 0:c.error)==null?void 0:r.data)==null?void 0:i.message)||((o=(s=c==null?void 0:c.error)==null?void 0:s.data)==null?void 0:o.message)||((a=c==null?void 0:c.error)==null?void 0:a.message)||((l=c==null?void 0:c.data)==null?void 0:l.message)||"Transaction failed!"),null}},u3=async(n,e,t,r)=>{var i,s,o,a,l,c;try{if(await md()){const f=await(await ug("nftmint","nftmintABI")).purchaseBatch(n,e,r,{value:i3(t)});return f.wait(),f.hash}}catch(u){const d=Xa(u==null?void 0:u.message);return d?Ja(d):Zn.error(((s=(i=u==null?void 0:u.error)==null?void 0:i.data)==null?void 0:s.message)||((a=(o=u==null?void 0:u.error)==null?void 0:o.data)==null?void 0:a.message)||((l=u==null?void 0:u.error)==null?void 0:l.message)||((c=u==null?void 0:u.data)==null?void 0:c.message)||"Transaction failed!"),null}},d3=async()=>{try{const n=dr();return n.getAccountsWalletAddress?(await(await sa("nftmint","nftmintABI")).getUserPurchases(n.getAccountsWalletAddress)).toString().split(",").map(Number):void 0}catch{}},f3=async()=>{try{const n=dr();if(!n.getAccountsWalletAddress)return;const t=await(await sa("nftmint","nftmintABI")).getUserReferralEarnings(n.getAccountsWalletAddress);return pd(t.toString())}catch{}},h3=async()=>{try{const n=dr();return n.getAccountsWalletAddress?(await(await sa("nftmint","nftmintABI")).getUserReferrales(n.getAccountsWalletAddress)).toString().split(",").map(Number):void 0}catch{}},p3=async()=>{try{const n=dr();if(!n.getAccountsWalletAddress)return;const t=await(await sa("nft","nftABI")).getOwnerTokenIds(n.getAccountsWalletAddress),i=(t&&t.toString()?t.toString().split(",").map(Number):[]).filter(a=>a!==0),s=20,o=[];for(let a=0;a<i.length;a+=s)o.push(i.slice(a,a+s));return o||[]}catch{return[]}},_oe=async n=>{var e,t,r,i,s,o;try{const a=await md();if(!a)return;const l=zr();await l.getAccountWalletItem.enable();const c=l.getWeb3ConfigItem.nftstake;return(await(await a3()).methods.approve(c,n).send({from:a})).transactionHash}catch(a){const l=Xa(a==null?void 0:a.message);return l?Ja(l):Zn.error(((t=(e=a==null?void 0:a.error)==null?void 0:e.data)==null?void 0:t.message)||((i=(r=a==null?void 0:a.error)==null?void 0:r.data)==null?void 0:i.message)||((s=a==null?void 0:a.error)==null?void 0:s.message)||((o=a==null?void 0:a.data)==null?void 0:o.message)||"Authorization failed!"),null}},boe=async n=>{var e,t,r,i,s,o;try{const a=await md();if(!a)return;const l=zr();await l.getAccountWalletItem.enable();const c=l.getWeb3ConfigItem.nftstake;return(await(await a3()).methods.approveBatch(c,n).send({from:a})).transactionHash}catch(a){const l=Xa(a==null?void 0:a.message);return l?Ja(l):Zn.error(((t=(e=a==null?void 0:a.error)==null?void 0:e.data)==null?void 0:t.message)||((i=(r=a==null?void 0:a.error)==null?void 0:r.data)==null?void 0:i.message)||((s=a==null?void 0:a.error)==null?void 0:s.message)||((o=a==null?void 0:a.data)==null?void 0:o.message)||"Authorization failed!"),null}},m3=async n=>{var e,t,r,i,s,o;try{if(!await md())return;if(await _oe(n)){const u=await(await ug("nftstake","nftstakeABI")).stake(n);return await u.wait(),u.hash}}catch(a){const l=Xa(a==null?void 0:a.message);return l?Ja(l):Zn.error(((t=(e=a==null?void 0:a.error)==null?void 0:e.data)==null?void 0:t.message)||((i=(r=a==null?void 0:a.error)==null?void 0:r.data)==null?void 0:i.message)||((s=a==null?void 0:a.error)==null?void 0:s.message)||((o=a==null?void 0:a.data)==null?void 0:o.message)||"Pledge failed!"),null}},g3=async n=>{var e,t,r,i,s,o;try{if(!await md())return;if(await boe(n)){const u=await(await ug("nftstake","nftstakeABI")).stakeBatch(n);return await u.wait(),u.hash}}catch(a){const l=Xa(a==null?void 0:a.message);return l?Ja(l):Zn.error(((t=(e=a==null?void 0:a.error)==null?void 0:e.data)==null?void 0:t.message)||((i=(r=a==null?void 0:a.error)==null?void 0:r.data)==null?void 0:i.message)||((s=a==null?void 0:a.error)==null?void 0:s.message)||((o=a==null?void 0:a.data)==null?void 0:o.message)||"Pledge failed!"),null}},i0=async()=>{try{const n=dr();return n.getAccountsWalletAddress?(await(await sa("nftstake","nftstakeABI")).getStakedLevelCounts(n.getAccountsWalletAddress)).toString().split(",").map(Number):void 0}catch{}},v3=async()=>{try{const n=dr();if(!n.getAccountsWalletAddress)return;const t=await(await sa("nftstake","nftstakeABI")).getTodayRewards(n.getAccountsWalletAddress);return pd(t.toString())}catch{}},y3=async()=>{try{const n=dr();if(!n.getAccountsWalletAddress)return;const t=await(await sa("nftstake","nftstakeABI")).getTotalRewards(n.getAccountsWalletAddress);return pd(t.toString())}catch{}},_3=async n=>{try{const e=dr();return e.getAccountsWalletAddress?(await(await sa("nftstake","nftstakeABI")).getLevelsRewards(e.getAccountsWalletAddress,n)).toString().split(",").map(s=>pd(s)):void 0}catch{}},xoe="https://apinode.aigaea.net";let eT=!1,woe=0;const Aoe=2e4,ap=new Map,Eoe=n=>({"Content-Type":"application/json",Authorization:`Bearer ${n}`}),tT=n=>{var i,s,o,a,l,c;const e=Date.now(),t=((i=n.data)==null?void 0:i.message)||((s=n.data)==null?void 0:s.msg)||((l=(a=(o=n.data)==null?void 0:o.detail)==null?void 0:a[0])==null?void 0:l.msg)||n.detail||((c=n.data)==null?void 0:c.detail)||"network error",r=n.statusCode;if(!((t==="network error"||r===502)&&e-woe<Aoe)&&r!==502&&r!==403&&r!==503){Zn.error(t);return}},b3=async(n,e,t)=>{const r=dr(),i=Eoe(r.getAccountsWalletAddress),s=`${xoe}${n}`,o=`${(e==null?void 0:e.method)||"GET"}:${s}:${JSON.stringify((e==null?void 0:e.params)||(e==null?void 0:e.body)||"")}`;if(ap.has(o))return ap.get(o);const a=(async()=>{try{const{data:l,error:c}=await CN(s,{...e,headers:i,responseType:t},"$mr5k66ooDp");if(l.value)return l.value;const{statusCode:u}=c.value;if(c.value)return u===401||u===403&&!eT?(Zn.error(c.value.data.detail),eT=!0,!1):tT(c.value)}catch(l){return tT(l)}finally{ap.delete(o)}})();return ap.set(o,a),a},dg=(n,e,t="json")=>b3(n,{method:"GET",params:e},t),Soe=(n,e,t="json")=>b3(n,{method:"POST",body:e},t),hh=()=>dg("/api/nft/web3_config"),x3=n=>Soe("/api/nft/get_wallet_address",n),fg=()=>dg("/api/nft/info"),w3=n=>dg(`/api/nft/reward?days=${n}`),A3=()=>dg("/api/nft/eth_usd"),ph=()=>({network:"Base Sepolia",chain_id:84532,symbol:"ETH",interval:12,rpc:"https://sepolia.base.org",server:"https://base-sepolia.drpc.org",explorer:"https://sepolia.basescan.com",nft:"0xB7A2d340d3367D0283879a219b9743bbC0Ded734",nftmint:"0x4A5BcC3DD8BE230Abfa6b572f10aFB4766EEb40d",nftstake:"0xfF5cEa684084a10351E51c8e7aE1E3B0Ff5434a2",logo:"https://d2f70xi62kby8n.cloudfront.net/bridge/icons/networks/base.svg?auto=compress%2Cformat"});let Cc;const hg=(n,e=500,t=!0)=>{t?Cc||(Cc=!0,typeof n=="function"&&n(),setTimeout(()=>{Cc=!1},e)):Cc||(Cc=!0,setTimeout(()=>{Cc=!1,typeof n=="function"&&n()},e))},E3=""+globalThis.__publicAssetsURL("images/btn.png"),S3=""+globalThis.__publicAssetsURL("images/eth.png"),zi=n=>(ja("data-v-44dfe6a1"),n=n(),Wa(),n),Toe={class:"w-full h-fit flex items-center justify-between relative z-[10]"},Moe=zi(()=>L("div",{class:"w-[90%] h-[2px] bg-[#5D5D5D] absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2"},[L("div",{class:"glowing-line"})],-1)),Roe=["onClick"],Ioe={key:0,class:"absolute top-0 left-0 w-full h-full tier-box z-20 scale-[0.64] rounded-[8px]"},Coe=zi(()=>L("img",{src:E3,alt:"",class:"w-full h-full object-contain absolute top-0 left-0"},null,-1)),Poe={key:1,class:"w-[50px] aspect-[1/1] buy-node absolute -bottom-1/2 rotate-45"},Noe={class:"space-y-4"},koe={class:"text-[4vw] lg:text-[3.3vw] md:text-[6vw] font-bold"},Boe={class:"text-[#ebebebbd] text-[2.2vw] lg:text-[1.1vw] xl:text-[1.1vw] font-sans"},Loe={class:"w-full h-4 border border-[#ebebeb68] rounded-full relative"},Doe=zi(()=>L("div",{class:"w-[32px] aspect-[1/1] buy-node absolute top-1/2 -translate-y-1/2 rounded-full right-0 border-[2px] border-[#ebebeb] flex items-center justify-center"},[L("span",{class:"iconfont icon-icon- text-[1.125rem] font-sans"})],-1)),Ooe=[Doe],Foe={class:"flex items-center justify-between"},Uoe={class:"flex items-center space-x-2"},Hoe={class:"text-[1.625rem] font-bold"},zoe=zi(()=>L("span",{class:"text-[#ebebeb88] text-[22px] font-sans"},"sold",-1)),Goe={class:"text-[#ebebebbd] text-[1rem] font-bold"},Voe={class:"flex items-center justify-between space-x-2"},$oe=zi(()=>L("span",{class:"text-[#ebebebbd] text-[1.125rem] lg:text-[1.125rem] md:text-[1.4rem] font-sans"},"Network",-1)),joe={class:"flex items-center space-x-1"},Woe={class:"w-5 h-5"},qoe=["src"],Xoe={class:"text-[#ebebebbd] text-[1.125rem] font-sans flex-1 u-line-1"},Koe={class:"flex items-center justify-between"},Yoe=zi(()=>L("span",{class:"text-[#ebebebbd] text-[1.125rem] lg:text-[1.125rem] md:text-[1.4rem] font-sans"},"Quantity",-1)),Qoe={class:"bg-[#202020] px-3 py-2 rounded-2xl"},Zoe={class:"flex items-center rounded-lg px-3 py-[0.3vw] border border-[#2B2B2B]"},Joe={class:"text-white px-4 text-[1rem] font-sans"},eae={class:"w-full space-y-3 flex flex-col justify-between items-end"},tae={class:"w-full"},nae={class:"w-full flex items-center justify-between"},rae=zi(()=>L("span",{class:"text-[#ebebebbd] text-[1.125rem] lg:text-[1.125rem] md:text-[1.4rem] font-sans"},"Total",-1)),iae={class:"flex items-center space-x-3"},sae=zi(()=>L("div",{class:"w-[22px] h-[22px]"},[L("img",{src:S3,alt:""})],-1)),oae={class:"text-[1.75rem] font-bold"},aae=zi(()=>L("span",{class:"text-[#ebebeb81] text-[1.125rem] font-sans"},"ETH",-1)),lae={class:"w-full flex items-center justify-end space-x-3"},cae={class:"text-[1rem] text-[#ebebeb81] font-sans"},uae=zi(()=>L("span",{class:"text-[#ebebeb81] text-[1rem] font-sans"},"USD",-1)),dae={class:"w-full flex items-center justify-between"},fae={class:"w-full relative flex items-center justify-between"},hae=zi(()=>L("span",{class:"text-[#ebebebbd] text-[1.125rem] lg:text-[1.125rem] md:text-[1.4rem] font-sans"},"Code",-1)),pae={key:0,class:"w-5 h-5 absolute top-1/2 text-[1.5rem] -translate-y-1/2 right-5 flex items-center justify-center"},mae={key:0,class:"iconfont icon-icon- text-green-500"},gae={key:1,class:"iconfont icon-del text-red-400"},vae=zi(()=>L("span",{class:"text-[18px] font-bold text-[#EBEBEB]"},"BUY NODE",-1)),yae={class:"text-[0.8rem] lg:text-[0.8rem] md:text-[1.2rem]"},_ae=tt({__name:"Index",emits:["update:success"],setup(n,{emit:e}){var U;const t=fe(!1),r=fe(null),i=zr(),s=dr(),o=fe(1),a=fe(1),l=fe(!1),c=fe(!1),u=fe(!1),d=_T(),f=fe([{title:"Basic Type",description:"Integration of edge device resources, Suitable for low load tasks."},{title:"Standard Type",description:"AI training/inference computing power pool, Support parallel computing of large models."},{title:"Professional Type",description:"Massive data storage and high-speed reading and writing, Support big data scenarios such as bioinformatics."},{title:"Flagship Type",description:"Cross chain resource scheduling core, Support heterogeneous computing power fusion."}]),p=fe({price:0,ethUsd:0,maxSupply:0,currentSupply:0,title:"",description:""}),m=fe(""),g=fe(!1),y=fe(!1),h=Zo({code:(U=d==null?void 0:d.query)==null?void 0:U.code,doYouAgree:!1}),w=ve(()=>!(s.getAccountsWalletAddress&&m.value)),M=ve(()=>Math.max((p.value.maxSupply||0)-(p.value.currentSupply||0),1)),S=async()=>{if(h.code.trim().includes("http")||h.code.trim().includes("://"))try{const G=new URL(h.code.trim());h.code=G.searchParams.get("code").trim()||h.code.trim()}catch{}h.code?N():(g.value=!1,m.value="")},C=G=>{o.value=G,a.value=1,k()},k=async()=>{try{l.value=!0;const G=await l3(o.value),R=await A3();if(G&&G.length>=3){p.value.price=pd(G[0]),p.value.maxSupply=Number(G[1]);const v=o.value===1?.35:o.value===2?.31:o.value===3?.23:o.value===4?.15:0,_=Math.floor(p.value.maxSupply*v);p.value.currentSupply=Number(G[2])+_,p.value.ethUsd=(R==null?void 0:R.data)||0}}catch{}finally{l.value=!1}},F=async()=>{try{if(!h.doYouAgree){y.value=!0,setTimeout(()=>{y.value=!1},500);return}if(c.value=!0,s.getAccountsWalletAddress===m.value)return Zn.warning("Cannot fill in one's own invitation code");await cg(i.getAccountWalletItem);const G=await s3(s.getAccountsWalletAddress);if(G<=p.value.price*a.value+2e-4)return Zn.warning(`ETH balance is insufficient, current balance is ${G}`);let R=null;a.value===1?R=await c3(o.value,m.value,p.value.price):R=await u3(o.value,m.value,`${Number(p.value.price)*Number(a.value)}`,a.value),R&&(p.value.currentSupply+=a.value,B(),e("update:success",{level:o.value,quantity:a.value}),a.value=1,Zn.success("successful!"))}catch{}finally{c.value=!1}},N=async()=>{var G;try{g.value=!1,c.value=!0;const R=await x3({referral_code:h.code});R.code===200&&R.data?m.value=(G=R.data)==null?void 0:G.address:m.value=""}catch{}finally{g.value=!0,c.value=!1}},B=async()=>{var G;if(!((G=s.getUserInfo)!=null&&G.referral_code))try{const R=await fg();s.setUserInfo(R.data)}catch{}},I=async()=>{var v;const G=await hh(),R=((v=G==null?void 0:G.data)==null?void 0:v.config[0])||ph();i.setWeb3ConfigItem(R)};return En(async()=>{await Tn();const G=new IntersectionObserver(R=>{R.forEach(async v=>{t.value=v.isIntersecting,v.isIntersecting&&(u.value||(i.getWeb3ConfigItem.chain_id||await I(),h.code&&S(),k(),u.value=!0))})},{threshold:0});r.value&&G.observe(r.value)}),(G,R)=>{var O,x,$,K,E,Y;const v=c2,_=l2,b=a2,A=v0,T=y0,D=Da,V=k2;return ge(),Se("div",{class:"w-full flex flex-col items-center justify-center relative",ref_key:"floor4",ref:r},[L("div",Toe,[Moe,(ge(),Se(mr,null,Uo(4,j=>L("div",{class:"w-[120px] aspect-[1/1] z-10 relative flex items-center justify-center cursor-pointer",key:j,onClick:X=>C(j)},[P(o)===j?(ge(),Se("div",Ioe)):St("",!0),Coe,L("span",{class:qe(["z-20 text-[20px] font-bold",P(o)===j?"text-[#ebebeb]":"text-[#ebebebac]"])},"#Tier"+Ze(j),3),P(o)===j?(ge(),Se("div",Poe)):St("",!0)],8,Roe)),64))]),vr((ge(),Se("div",{class:qe(["w-full border border-[#2B2B2B] relative bg-black z-[20] overflow-hidden mt-[30px] grid grid-cols-1 xl:grid-cols-[1fr_40%] lg:grid-cols-[1fr_40%] md:grid-cols-1 sm:grid-cols-1 px-10 py-6 gap-x-[120px] gap-y-5",P(o)<=2?"rounded-bl-[35px] rounded-tr-[35px]":"rounded-tl-[35px] rounded-br-[35px] "]),"element-loading-text":"Loading..."},[L("div",Noe,[L("p",koe,Ze(((O=P(f)[P(o)-1])==null?void 0:O.title)||"***"),1),L("div",Boe,Ze(((x=P(f)[P(o)-1])==null?void 0:x.description)||"***"),1),L("div",Loe,[L("div",{class:"min-w-[32px] max-w-full h-4 buy-node rounded-full relative",style:yi({width:((($=P(p))==null?void 0:$.currentSupply)||0)/(((K=P(p))==null?void 0:K.maxSupply)||1)*100+"%"})},Ooe,4)]),L("div",Foe,[L("div",Uoe,[L("span",Hoe,Ze(P(p).currentSupply||0)+"/"+Ze(P(p).maxSupply||0),1),zoe]),L("span",Goe,Ze(((P(p).currentSupply||0)/(P(p).maxSupply||1)*100).toFixed(2)+"%"),1)]),L("div",Voe,[$oe,L("div",joe,[L("div",Woe,[L("img",{src:(E=P(i).getWeb3ConfigItem)==null?void 0:E.logo,alt:"",class:"rounded-full"},null,8,qoe)]),L("span",Xoe,Ze(((Y=P(i).getWeb3ConfigItem)==null?void 0:Y.network)||"BASE"),1)])]),L("div",Koe,[Yoe,L("div",Qoe,[L("div",Zoe,[L("div",{class:"text-white px-2 text-[1.25rem] font-bold bg-[#2b2b2b] rounded-[6px] cursor-pointer select-none",onClick:R[0]||(R[0]=j=>P(a)>1&&a.value--)},"-"),L("span",Joe,Ze(P(a)),1),L("div",{class:"text-white px-2 text-xl font-bold bg-[#2b2b2b] rounded-[6px] cursor-pointer select-none",onClick:R[1]||(R[1]=j=>P(a)<20&&P(a)<P(M)&&a.value++)},"+")])])])]),L("div",eae,[L("div",tae,[L("div",nae,[rae,L("div",iae,[sae,L("span",oae,Ze(Math.floor(P(p).price*P(a)*100)/100),1),aae])]),L("div",lae,[L("span",cae,"≈"+Ze(Math.floor(P(p).price*P(p).ethUsd*P(a)*100)/100||0),1),uae])]),L("div",dae,[ke(b,{model:P(h),class:"w-full"},{default:He(()=>[ke(_,{label:"",style:{border:"none"}},{default:He(()=>[L("div",fae,[hae,ke(v,{modelValue:P(h).code,"onUpdate:modelValue":R[2]||(R[2]=j=>P(h).code=j),placeholder:"Enter referral code",onInput:S,style:{width:"210px"}},null,8,["modelValue"]),P(g)?(ge(),Se("div",pae,[P(m)?(ge(),Se("span",mae)):(ge(),Se("span",gae))])):St("",!0)])]),_:1})]),_:1},8,["model"])]),ke(A,{round:"",color:"none",class:"w-[70%] hover:scale-[1.1] duration-700 my-2 mr-3 buy-node",style:{height:"40px",border:"1px solid #ebebeb86"},loading:P(c),disabled:P(w),onClick:R[3]||(R[3]=j=>("throttle"in G?G.throttle:P(hg))(()=>{F()}))},{default:He(()=>[vae]),_:1},8,["loading","disabled"]),L("div",{class:qe(["flex items-center space-x-2 text-[#615F74] set_checkbox_sty px-2 py-2 bg-[#0B0E10]",{shake:!P(h).doYouAgree&&P(y)}])},[ke(T,{modelValue:P(h).doYouAgree,"onUpdate:modelValue":R[4]||(R[4]=j=>P(h).doYouAgree=j),style:yi(`width: fit-content;height:fit-content;padding:3px;border: 1px ${!P(h).doYouAgree&&P(y)?"red":"#ebebeb"} solid;border-radius: 2px;`)},null,8,["modelValue","style"]),L("span",yae,[Mt(" I have read,understand, and agree to the "),ke(D,{class:"underline underline-offset-4 cursor-pointer text-[#EBEBEB] tex",to:"/privacyPolicy",target:"_self"},{default:He(()=>[Mt(" Privacy Policy ")]),_:1})])],2)])],2)),[[V,P(l)]])],512)}}});const bae=ro(_ae,[["__scopeId","data-v-44dfe6a1"]]),xae={class:"relative"},wae={class:"text-[#6E6E6E] absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 scale-[0.5] text-sm z-50"},Aae=tt({__name:"Refresh",emits:["toRefresh"],setup(n,{emit:e}){const t=fe(!1),r=fe(0),i=fe(!1),s=()=>{if(i.value)return;t.value=!0,e("toRefresh"),i.value=!0,r.value=60;const o=setInterval(()=>{r.value--,r.value<=0&&(clearInterval(o),i.value=!1,t.value=!1)},1e3);setTimeout(()=>{t.value=!1},500)};return(o,a)=>(ge(),Se("div",xae,[L("span",{class:qe(["text-lg",["iconfont","icon-shuaxin","text-[#6E6E6E]","cursor-pointer","rotate-icon",{rotate:t.value}]]),onClick:s},null,2),L("span",wae,Ze(r.value>0?r.value:""),1)]))}});const T3=ro(Aae,[["__scopeId","data-v-0add8083"]]),Eae={id:"floor5-line-chart",class:"w-full h-full"},M3=tt({__name:"Line",props:{data:{default:[0,0,0,0]}},setup(n){const e=n,{$eChart:t}=$f(),r=Xc(),i=fe(null),s=["T1","T2","T3","T4"];Ct(()=>e.data,async()=>{o()});const o=async()=>{r.value&&r.value.dispose();const l=document.getElementById("floor5-line-chart");if(!l||l.clientWidth===0||l.clientHeight===0)return;r.value=t.init(l);const c={tooltip:{trigger:"axis",backgroundColor:"rgba(255,255,255,.05)",borderWidth:"1",borderColor:"rgba(255,255,255,0.25)",extraCssText:"backdrop-filter: blur(5px);",textStyle:{fontSize:18,color:"#ffffff"},formatter:function(u){var d='<div class="my-tooltip">';return u.forEach(f=>{f.seriesName!=="maxdata"&&(d+=`<div><span class="name large">${f.name}</span>:<span class="value">${f.value} </span></div>`)}),d+="</div>",d}},grid:{top:"8%",left:"8%",right:0,bottom:"15%"},xAxis:{type:"category",axisLabel:{textStyle:{color:"#2B2B2B"}},axisTick:{show:!1},axisLine:{lineStyle:{color:"#2B2B2B"}},data:s},yAxis:{type:"value",axisLabel:{textStyle:{color:"#2B2B2B"}},axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!0,lineStyle:{color:"#2B2B2B"}}},series:[{data:e.data,type:"line",smooth:!0,lineStyle:{color:"#7030A0",width:5},symbol:"circle",symbolSize:0,itemStyle:{color:"#7030A0",borderColor:"#7030A0",width:2}}]};r.value.setOption(c,!0)},a=()=>{r.value&&(i.value&&clearTimeout(i.value),i.value=setTimeout(()=>{r.value.resize()},300))};return En(async()=>{await Tn(),setTimeout(o,500),window.addEventListener("resize",a,{passive:!0})}),Hr(()=>{r.value&&(window.removeEventListener("resize",a),r.value.dispose()),i.value&&clearTimeout(i.value)}),(l,c)=>(ge(),Se("div",Eae))}});const R3=""+globalThis.__publicAssetsURL("images/people.png"),I3=""+globalThis.__publicAssetsURL("images/money.png"),C3=""+globalThis.__publicAssetsURL("images/floor5.png"),ms=n=>(ja("data-v-8ac4b081"),n=n(),Wa(),n),Sae=ms(()=>L("div",{class:"w-[25%] aspect-[1/1] pointer-events-none absolute bottom-[25%] right-0 transition-all duration-1000 ease-linear z-[30]"},[L("div",{class:"w-full h-full pointer-events-none zoom-element rounded-full bg-primary opacity-50 blur-[100px] transition [transform:translate3d(0,0,0)] md:blur-[150px] lg:blur-[100px] xl:blur-[200px]"})],-1)),Tae={class:"w-full h-full overflow-hidden flex flex-col justify-between border border-[#2b2b2b] rounded-[25px] px-10 py-3 space-y-8 relative attribute"},Mae={class:"w-5 h-5 absolute top-3 right-5 attribute_box"},Rae={class:"space-y-4"},Iae=ms(()=>L("p",{class:"text-[1.75rem] lg:text-[1.75rem] md:text-[2.5rem] sm:text-[1vw] font-bold"},"My Referral",-1)),Cae={class:"flex items-center justify-between"},Pae={class:"h-full flex items-center space-x-2"},Nae=ms(()=>L("div",{class:"h-[28px] aspect-[1/1]"},[L("img",{src:R3,alt:"",class:"w-full h-full object-contain"})],-1)),kae={class:"text-[1.2rem] lg:text-[1.4rem] md:text-[2rem] font-bold"},Bae={class:"h-full flex items-center space-x-2"},Lae=ms(()=>L("div",{class:"h-[30px] aspect-[1/1]"},[L("img",{src:I3,alt:"",class:"w-full h-full object-contain"})],-1)),Dae={class:"text-[1.2rem] lg:text-[1.4rem] md:text-[2rem] font-bold"},Oae={class:"space-x-1 cursor-pointer"},Fae={class:"text-[1.2rem] lg:text-[1.4rem] md:text-[2rem] font-bold"},Uae=ms(()=>L("span",{class:"iconfont icon-copy text-[1.5rem]"},null,-1)),Hae={class:"flex flex-col items-center"},zae=ms(()=>L("div",{class:"w-[330px]"},[L("img",{src:C3,alt:"",class:"w-full h-full object-cover"})],-1)),Gae={class:"text-[#808080] text-[1.625rem] lg:text-[1.625rem] md:text-[2rem] font-[500] cursor-pointer hover:text-[#EBEBEB] duration-500"},Vae=ms(()=>L("span",{class:"text-[1.125rem] font-bold text-[#EBEBEB] uppercase"},"Stake Nodes",-1)),$ae=ms(()=>L("span",{class:"text-[0.8rem] lg:text-[0.8rem] md:text-[1.2rem]"}," The pledge is irrevocable and profits start accruing immediately. ",-1)),jae={class:"w-full h-full flex flex-col justify-between space-y-5 overflow-hidden"},Wae={class:"flex-1 flex flex-col justify-between border border-[#2b2b2b] rounded-[25px] px-10 py-3 space-y-6 relative attribute cursor-pointer"},qae={class:"w-5 h-5 absolute top-3 right-5 attribute_box"},Xae=ms(()=>L("div",{class:"flex items-center justify-between"},[L("p",{class:"text-[1.75rem] lg:text-[1.75rem] md:text-[2.5rem] font-bold"},"Node Overview")],-1)),Kae={class:"w-full grid grid-cols-2 xl:grid-cols-4 lg:grid-cols-2 gap-1 md:grid-cols-4 sm:grid-cols-2"},Yae={class:"w-[200px] py-4 px-8 border border-[#ebebeb54] rounded-[15px] text-[#EBEBEB] space-y-6",style:{background:"rgba(0, 0, 0,0.8)"}},Qae=ms(()=>L("p",{class:"text-center text-[1.625rem] font-sans"},"Details",-1)),Zae={class:"w-full flex-1 flex flex-col space-y-4"},Jae={class:"flex flex-col items-center"},ele=["title"],tle={class:"lg:text-[1rem] 2xl:text-[1rem] xl:text-[0.85rem] text-[1rem] md:text-[1.4rem] sm:text-[0.9rem] font-[400] u-line-1"},nle={key:1,class:"flex flex-col items-center"},rle=["title"],ile={class:"lg:text-[1rem] 2xl:text-[1rem] xl:text-[0.85rem] text-[1rem] md:text-[1.4rem] sm:text-[0.9rem] font-[400] u-line-1"},sle={class:"w-full flex justify-end"},ole={class:"w-full flex-1 flex flex-col border border-[#2b2b2b] rounded-[25px] px-10 py-3 space-y-4"},ale={class:"flex items-center flex-wrap justify-between"},lle=ms(()=>L("p",{class:"text-[1.75rem] lg:text-[1.75rem] md:text-[2.5rem] font-bold"},"$Gaea Produce",-1)),cle={class:"w-[40%] bg-[#0F0F0F] rounded-md grid grid-cols-3 p-1 text-[#ebebeb71]"},ule={class:"w-full min-h-[250px] flex-1 items-end"},dle=tt({__name:"Index",props:{buyNodeData:{default:{level:1,quantity:0}}},emits:["update:scrollTo"],setup(n,{emit:e}){const t=n,r=fe(7),i=dr(),s=zr(),o=fe([0,0,0,0]),a=fe(!1),l=fe(!1),c=fe(!1),u=fe(!1),d=fe(null),f=fe(null),p="https://node.aigaea.net",m=A=>{e("update:scrollTo",A)},g=Zo({doYouAgree:!1}),y=fe(null),h=fe([{name:"My possessions",value:[0,0,0,0],sum:0},{name:"Running",value:[0,0,0,0],sum:0},{name:"Today's output",value:[0,0,0,0],sum:0},{name:"Total output",value:[0,0,0,0],sum:0}]);Ct(()=>t.buyNodeData,async()=>{var T;const A=t.buyNodeData.level-1;h.value[0].value[A]+=t.buyNodeData.quantity,h.value[0].sum+=t.buyNodeData.quantity,setTimeout(()=>{U(),N()},200),(T=i.getUserInfo)!=null&&T.referral_code?clearInterval(f.value):f.value=setInterval(R,3e4)}),Ct(()=>i.getAccountsWalletAddress,async()=>{i.getAccountsWalletAddress?k():(h.value=[{name:"My possessions",value:[0,0,0,0],sum:0},{name:"Running",value:[0,0,0,0],sum:0},{name:"Today's output",value:[0,0,0,0],sum:0},{name:"Total output",value:[0,0,0,0],sum:0}],w.value.rewardAmount=0,w.value.numberOfPeople=0,o.value=[0,0,0,0])},{deep:!0});const w=fe({numberOfPeople:0,rewardAmount:0}),M=fe(["T1","T2","T3","T4"]),S=ve(()=>{var T;const A=((T=s.getPledgeableNftTokenIds)==null?void 0:T[0])||[];return!(i.getAccountsWalletAddress&&A.length>0)}),C=async A=>{if(i.getAccountsWalletAddress)try{r.value=A,o.value=await _3(r.value)||[0,0,0,0];const T=await w3(r.value);if(T.code==200&&T.data){const D=Object.values(T.data)}}catch{}},k=async()=>{i.getAccountsWalletAddress&&(s.getWeb3ConfigItem.chain_id||await b(),await Promise.all([U(),F(),N(),B(),R(),C(7)]))},F=async()=>{const[A,T]=await Promise.all([f3(),h3()]);w.value.rewardAmount=A||0,w.value.numberOfPeople=T.reduce((D,V)=>D+V,0)||0},N=async()=>{const[A,T]=await Promise.all([y3(),v3()]);h.value[2].sum=T,h.value[3].sum=A},B=async()=>{const[A,T]=await Promise.all([d3(),i0()]);h.value[0].value=A||[0,0,0,0],h.value[0].sum=A.reduce((D,V)=>D+V,0),h.value[1].value=T||[0,0,0,0],h.value[1].sum=T.reduce((D,V)=>D+V,0),h.value[1].sum>0&&(d.value=setInterval(I,3e5))},I=()=>{N(),C(r.value)},U=async()=>{const A=await p3();s.setPledgeableNftTokenIds(A)},G=async()=>{try{if(!g.doYouAgree){u.value=!0,setTimeout(()=>{u.value=!1},500);return}l.value=!0;let A=null,T=s.getPledgeableNftTokenIds[0];if(await cg(s.getAccountWalletItem),T.length===1?A=await m3(T[0]):A=await g3(T),A){h.value[1].sum<=0&&(d.value=setInterval(I,3e5));const D=await i0();h.value[1].value=D||[0,0,0,0],h.value[1].sum=D.reduce((V,O)=>V+O,0),setTimeout(async()=>{await U();const V=[...s.getPledgeableNftTokenIds.flat()];Zn.success(`Successfully staked ${T.length} tokens, ${V.length} remaining`)},200)}}catch{}finally{l.value=!1}},R=async()=>{if(i.getAccountsWalletAddress)try{const A=await fg();i.setUserInfo(A.data)}catch{}},v=()=>{U(),R(),F()},_=async()=>{await Promise.all([N(),B(),C(r.value)])},b=async()=>{var D;const A=await hh(),T=((D=A==null?void 0:A.data)==null?void 0:D.config[0])||ph();s.setWeb3ConfigItem(T)};return En(async()=>{await Tn();const A=new IntersectionObserver(T=>{T.forEach(async D=>{a.value=D.isIntersecting,D.isIntersecting&&(c.value||(s.getWeb3ConfigItem.chain_id||await b(),i.getAccountsWalletAddress&&k(),c.value=!0))})},{threshold:0});y.value&&A.observe(y.value)}),Hr(()=>{d.value&&clearInterval(d.value)}),(A,T)=>{var E,Y,j;const D=T3,V=v0,O=y0,x=x2,$=M3,K=d0("copy");return ge(),Se("div",{class:qe(["w-full grid sm:grid-cols-1 lg:grid-cols-[550px_1fr] items-center gap-5 relative",P(a)?"animate-start":""]),ref_key:"floor5",ref:y},[Sae,L("div",Tae,[L("div",Mae,[ke(D,{onToRefresh:T[0]||(T[0]=X=>v())})]),L("div",Rae,[Iae,L("div",Cae,[L("div",Pae,[Nae,L("span",kae,Ze(P(w).numberOfPeople),1)]),L("div",Bae,[Lae,L("span",Dae,Ze(P(w).rewardAmount),1)]),vr((ge(),Se("div",Oae,[L("span",Fae,Ze(((E=P(i).getUserInfo)==null?void 0:E.referral_code)||"****"),1),Uae])),[[K,(Y=P(i).getUserInfo)!=null&&Y.referral_code?`${P(p)}?code=${(j=P(i).getUserInfo)==null?void 0:j.referral_code}`:""]])])]),L("div",Hae,[zae,vr((ge(),Se("div",Gae,[Mt(Ze(("stringStar"in A?A.stringStar:P(Qu))({value:P(i).getAccountsWalletAddress,characters:"********",start:4})),1)])),[[K,P(i).getAccountsWalletAddress]])]),L("div",null,[ke(V,{round:"",color:"none",class:"w-full min-w-[260px] hover:scale-[1.05] duration-700 my-2 mr-3 buy-node",style:{height:"40px",border:"1px solid #ebebeb86"},disabled:P(S),loading:P(l),onClick:T[1]||(T[1]=X=>("throttle"in A?A.throttle:P(hg))(()=>{G()}))},{default:He(()=>[Vae]),_:1},8,["disabled","loading"]),L("div",{class:qe(["flex items-center space-x-2 text-[#ebebeb] px-2 text-[#ebebeb5a]",{shake:!P(g).doYouAgree&&P(u)}])},[ke(O,{modelValue:P(g).doYouAgree,"onUpdate:modelValue":T[2]||(T[2]=X=>P(g).doYouAgree=X),style:yi(`width: fit-content;height:fit-content;padding:2px;border: 1px ${!P(g).doYouAgree&&P(u)?"red":"#ebebeb"} solid;border-radius: 2px;`)},null,8,["modelValue","style"]),$ae],2)])]),L("div",jae,[L("div",Wae,[L("div",qae,[ke(D,{onToRefresh:T[3]||(T[3]=X=>_())})]),Xae,L("div",Kae,[(ge(!0),Se(mr,null,Uo(P(h),(X,ee)=>(ge(),Se("div",{class:"flex flex-col items-center",key:ee},[ee<2?(ge(),cn(x,{key:0,placement:"top-start",effect:"customized",trigger:"hover"},{content:He(()=>[L("div",Yae,[Qae,L("ul",Zae,[(ge(!0),Se(mr,null,Uo(X.value,(le,me)=>(ge(),Se("li",{class:"w-full flex items-center justify-between text-[1.375rem]",key:me},[L("span",null,Ze(P(M)[me])+":",1),L("span",null,Ze(le),1)]))),128))])])]),default:He(()=>[L("div",Jae,[L("span",{class:"lg:text-[2rem] xl:text-[2rem] 2xl:text-[2.5rem] text-[2.5rem] md:text-[2.5rem] sm:text-[2rem] font-bold",title:X.sum},Ze(("formatNumber"in A?A.formatNumber:P(Wp))(X.sum)||0),9,ele),L("span",tle,Ze(X.name),1)])]),_:2},1024)):(ge(),Se("div",nle,[L("span",{class:"lg:text-[2rem] xl:text-[2rem] 2xl:text-[2.5rem] text-[2.5rem] md:text-[2.5rem] sm:text-[2rem] font-bold",title:X.sum},Ze(("formatNumber"in A?A.formatNumber:P(Wp))(X.sum)||0),9,rle),L("span",ile,Ze(X.name),1)]))]))),128))]),L("div",sle,[L("span",{class:"underline underline-offset-6 cursor-pointer text-[#ebebebaf] hover:text-[#EBEBEB] buy_node md:text-[1.5rem] lg:text-[20px]",onClick:T[4]||(T[4]=X=>m("floor4"))}," Buy Node ")])]),L("div",ole,[L("div",ale,[lle,L("div",cle,[L("div",{class:qe(["py-1 flex items-center justify-center cursor-pointer",P(r)===7?"bg-[#272727] rounded-md text-[#EBEBEB] font-[500]":""]),onClick:T[5]||(T[5]=X=>C(7))},"7D",2),L("div",{class:qe(["py-1 flex items-center justify-center cursor-pointer",P(r)===30?"bg-[#272727] rounded-md text-[#EBEBEB] font-[500]":""]),onClick:T[6]||(T[6]=X=>C(30))},"30D",2),L("div",{class:qe(["py-1 flex items-center justify-center cursor-pointer",P(r)===0?"bg-[#272727] rounded-md text-[#EBEBEB] font-[500]":""]),onClick:T[7]||(T[7]=X=>C(0))},"All",2)])]),L("div",ule,[ke($,{data:P(o)},null,8,["data"])])])])],2)}}});const fle=ro(dle,[["__scopeId","data-v-8ac4b081"]]),P3=""+globalThis.__publicAssetsURL("images/public/separation_line.png"),N3=""+globalThis.__publicAssetsURL("images/partner/hand1.png"),k3=""+globalThis.__publicAssetsURL("images/partner/hand2.png"),hw=n=>(ja("data-v-6ba4e36f"),n=n(),Wa(),n),hle={class:"pb-[40px]"},ple={class:"w-full h-[250px] flex items-center justify-center relative mt-[150px]"},mle=rb('<div class="w-full h-7 mb-12 absolute -top-1" data-v-6ba4e36f><img src="'+P3+'" class="w-full h-full object-fill" data-v-6ba4e36f></div><div class="h-full aspect-[1/1] absolute top-1/2 -translate-y-1/2 left-0" data-v-6ba4e36f><img src="'+N3+'" alt="" class="w-full h-full object-contain" data-v-6ba4e36f></div><div class="h-full aspect-[1/1] absolute top-1/2 -translate-y-1/2 right-0" data-v-6ba4e36f><img src="'+k3+'" alt="" class="w-full h-full object-contain" data-v-6ba4e36f></div>',3),gle={class:"wrapper"},vle={class:"marquee"},yle={class:"marquee__group"},_le={class:"inline-block w-[270px] h-[47px] -ml-2"},ble=["src"],xle={class:"inline-block w-[200px] h-[38px] scale-[0.9]"},wle=["src"],Ale={class:"inline-block w-[250px] h-[39px]"},Ele=["src"],Sle={class:"inline-block w-[250px] h-[48px]"},Tle=["src"],Mle={class:"inline-block w-[250px] h-[35px] scale-[0.75] -ml-5"},Rle=["src"],Ile={class:"inline-block w-[250px] h-[38px]"},Cle=["src"],Ple={class:"inline-block w-[250px] h-[45px] grayscale-image mt-3"},Nle=["src"],kle={"aria-hidden":"true",class:"marquee__group"},Ble={class:"inline-block w-[270px] h-[47px] -ml-2"},Lle=["src"],Dle={class:"inline-block w-[200px] h-[38px] scale-[0.9]"},Ole=["src"],Fle={class:"inline-block w-[250px] h-[39px]"},Ule=["src"],Hle={class:"inline-block w-[250px] h-[48px]"},zle=["src"],Gle={class:"inline-block w-[250px] h-[35px] scale-[0.75] -ml-5"},Vle=["src"],$le={class:"inline-block w-[250px] h-[38px]"},jle=["src"],Wle={class:"inline-block w-[250px] h-[45px] grayscale-image mt-3"},qle=["src"],Xle={class:"w-full flex justify-around space-x-20 text-[12px] text-[#B0B0B0] adaptation-padding"},Kle={class:"flex flex-col space-y-4"},Yle=hw(()=>L("span",{class:"text-[#EBEBEB] text-[18px]"},"About",-1)),Qle={class:"flex flex-col space-y-2 text-[14px]"},Zle={class:"flex flex-col space-y-4 text-[#B0B0B0]"},Jle=hw(()=>L("span",{class:"text-[#EBEBEB] text-[18px]"},"Community",-1)),ece={class:"flex flex-col space-y-2 text-[14px]"},tce={class:"flex flex-col space-y-4 text-[#B0B0B0]"},nce=hw(()=>L("span",{class:"text-[#EBEBEB] text-[18px]"},"Legal",-1)),rce={class:"flex flex-col space-y-2 text-[14px]"},ice=tt({__name:"Footer",setup(n){const e=["/images/partner/w3.png","/images/partner/vly.png","/images/partner/UXL.png","/images/partner/BL.png","/images/partner/GAL.png","/images/partner/hume.png","/images/partner/iq.png"];return(t,r)=>{const i=Da;return ge(),Se("div",hle,[L("div",ple,[mle,L("div",gle,[L("div",vle,[L("div",yle,[L("li",_le,[L("img",{src:e[0],alt:"",class:"w-full h-full object-contain object-center"},null,8,ble)]),L("li",xle,[L("img",{src:e[1],alt:"",class:"w-full h-full object-contain object-center"},null,8,wle)]),L("li",Ale,[L("img",{src:e[2],alt:"",class:"w-full h-full object-contain object-center"},null,8,Ele)]),L("li",Sle,[L("img",{src:e[3],alt:"",class:"w-full h-full object-contain object-center mt-1"},null,8,Tle)]),L("li",Mle,[L("img",{src:e[4],alt:"",class:"w-full h-full object-contain object-center"},null,8,Rle)]),L("li",Ile,[L("img",{src:e[5],alt:"",class:"w-full h-full object-contain object-center"},null,8,Cle)]),L("li",Ple,[L("img",{src:e[6],alt:"",class:"w-full h-full object-contain object-center"},null,8,Nle)])]),L("div",kle,[L("li",Ble,[L("img",{src:e[0],alt:"",class:"w-full h-full object-contain object-center"},null,8,Lle)]),L("li",Dle,[L("img",{src:e[1],alt:"",class:"w-full h-full object-contain object-center"},null,8,Ole)]),L("li",Fle,[L("img",{src:e[2],alt:"",class:"w-full h-full object-contain object-center"},null,8,Ule)]),L("li",Hle,[L("img",{src:e[3],alt:"",class:"w-full h-full object-contain object-center mt-1"},null,8,zle)]),L("li",Gle,[L("img",{src:e[4],alt:"",class:"w-full h-full object-contain object-center"},null,8,Vle)]),L("li",$le,[L("img",{src:e[5],alt:"",class:"w-full h-full object-contain object-center"},null,8,jle)]),L("li",Wle,[L("img",{src:e[6],alt:"",class:"w-full h-full object-contain object-center"},null,8,qle)])])])])]),L("div",Xle,[L("div",Kle,[Yle,L("div",Qle,[ke(i,{to:"https://gaea-2.gitbook.io/gaea-docs",target:"_blank",rel:"noopener",class:"hover:underline underline-offset-4"},{default:He(()=>[Mt("Whitepaper")]),_:1}),ke(i,{to:"https://aigaea.net/home/?type=FAQ",target:"_blank",rel:"noopener",class:"hover:underline underline-offset-4"},{default:He(()=>[Mt("FAQ")]),_:1}),ke(i,{to:"https://app.aigaea.net/godhood",rel:"noopener",target:"_blank",class:"hover:underline underline-offset-4"},{default:He(()=>[Mt("Godhood")]),_:1}),ke(i,{to:" https://medium.com/@aigaea3",target:"_blank",rel:"noopener",class:"hover:underline underline-offset-4"},{default:He(()=>[Mt("Medium")]),_:1})])]),L("div",Zle,[Jle,L("div",ece,[ke(i,{to:"https://x.com/aigaealabs ",target:"_blank",rel:"noopener",class:"hover:underline underline-offset-4"},{default:He(()=>[Mt(" X ")]),_:1}),ke(i,{to:"https://discord.gg/aigaea",target:"_blank",rel:"noopener",class:"hover:underline underline-offset-4"},{default:He(()=>[Mt(" Discord ")]),_:1}),ke(i,{to:"https://t.me/AIGAEA_Community",target:"_blank",rel:"noopener",class:"hover:underline underline-offset-4"},{default:He(()=>[Mt(" Telegram ")]),_:1}),ke(i,{to:"https://forms.gle/MYzXeXBX6zTwHAHz5",target:"_blank",rel:"noopener",class:"hover:underline underline-offset-4"},{default:He(()=>[Mt(" Join us ")]),_:1})])]),L("div",tce,[nce,L("div",rce,[ke(i,{to:"https://aigaea.net/home/?type=termsOfUse",target:"_blank",rel:"noopener",class:"hover:underline underline-offset-4"},{default:He(()=>[Mt("Terms of Use")]),_:1}),ke(i,{to:"https://aigaea.net/home/?type=privacyPolicy",target:"_blank",rel:"noopener",class:"hover:underline underline-offset-4"},{default:He(()=>[Mt("Privacy Policy")]),_:1})])])])])}}});const sce=ro(ice,[["__scopeId","data-v-6ba4e36f"]]),oce={class:"w-full space-x-1 space-y-3 px-4 pb-4 z-[10] mx-auto"},ace=L("span",{class:"text-[#EBEBEB] text-[26px]"},"Connect",-1),lce={class:"w-full border border-[#2E2E2E] rounded-[9px] py-2 flex items-center justify-between px-4 hover:scale-[1.05] duration-700 cursor-pointer"},cce={class:"flex items-center justify-center space-x-2"},uce={class:"flex-shrink-0"},dce=["src"],fce={class:"text-[#B0B0B0] text-[16px] font-[400]"},hce=["onClick"],pce={key:0,class:"relative block w-2 h-2 bg-green-300 rounded-full shadow-inner shadow-green-500"},mce=L("span",{class:"absolute inline-flex w-full h-full bg-green-400 rounded-full opacity-75 animate-halo"},null,-1),gce=[mce],vce={key:0,class:"z-10 flex items-center justify-between px-2 pt-2 relative",style:{opacity:"1",transform:"translateY(0%) translateZ(0px)"}},yce={class:"select-none"},_ce=L("span",{class:"iconfont icon-copy text-xs sm:text-sm text-[#6E6E6E]"},null,-1),bce=tt({__name:"WalletSelection",emits:["update:success"],setup(n,{emit:e}){const t=fe(),r=dr(),i=fe(),s=fe([]),o=fe(null),a=()=>{s.value=[],t.value=null,i.value=null,r.setWalletSelectionDialogVisible(!1)},l=async()=>{s.value=await bT()},c=async(f,p)=>{t.value=p,r.setRdnsType(f.info.rdns);try{const m=await f.provider.request({method:"eth_requestAccounts"});u(m)}catch{}},u=f=>{d(f[0])},d=f=>{o.value=f.toLowerCase(),setTimeout(async()=>{f&&(e("update:success"),r.setAccountsWalletAddress(o.value),a())},1e3)};return(f,p)=>{const m=N2,g=xT,y=d0("copy");return ge(),cn(g,null,{default:He(()=>[ke(m,{class:"border-box","destroy-on-close":"",draggable:"","model-value":P(r).getWalletSelectionDialogVisible,"show-close":!1,width:"559px","append-to-body":!0,style:{background:"black","border-radius":"10px","padding-bottom":"10px",border:"1px solid #2B2B2B"},"align-center":"",onClose:a,onOpen:l},{default:He(()=>[L("span",{class:"iconfont icon-del text-sm absolute top-5 right-5 text-[#EDEDED] cursor-pointer",onClick:a}),L("div",oce,[ace,(ge(!0),Se(mr,null,Uo(P(s),(h,w)=>(ge(),Se("div",{class:"",key:h.info.name},[L("div",lce,[L("div",cce,[L("div",uce,[L("img",{class:"w-8 h-8 rounded-full",src:h.info.icon,alt:"Provider image",style:{filter:"grayscale(100%) brightness(1)"}},null,8,dce)]),L("span",fce,Ze(h.info.name),1)]),L("div",{class:"text-[#EBEBEB] text-[18px] cursor-pointer hover:underline underline-offset-4 duration-500 flex items-center space-x-1",onClick:M=>c(h,w)},[L("span",null,Ze(P(t)===w&&P(o)?"Connected":"Connect"),1),P(t)===w&&P(o)?(ge(),Se("div",pce,gce)):St("",!0)],8,hce)]),P(t)===w&&P(o)?(ge(),Se("div",vce,[vr((ge(),Se("p",yce,[Mt(Ze(("stringStar"in f?f.stringStar:P(Qu))({value:P(o),characters:"********",start:4})),1)])),[[y,P(o)]]),_ce])):St("",!0)]))),128))])]),_:1},8,["model-value"])]),_:1})}}});const xce={class:"w-full h-[4vw] flex items-center justify-between py-5 bg-black fixed top-0 left-0 z-50 px-[5%]"},wce=L("div",{class:"w-[10vw] h-full flex items-center justify-center rounded-lg"},[L("img",{src:L2,alt:""})],-1),Ace=tt({__name:"Header",setup(n){const e=dr(),t=fe(null),r=fe(!1),i=async()=>{if(t.value=await bT(),t.value){const l=t.value[0];s(l)}},s=async l=>{e.setRdnsType(l.info.rdns);try{const c=await l.provider.request({method:"eth_requestAccounts"});o(c)}catch{}},o=l=>{a(l[0])},a=l=>{const c=l.toLowerCase();setTimeout(async()=>{l&&e.setAccountsWalletAddress(c)},1e3)};return(l,c)=>{const u=B2;return ge(),Se("div",xce,[wce,P(e).getAccountsWalletAddress?(ge(),Se("div",{key:0,onClick:c[0]||(c[0]=d=>r.value=!0),class:"cursor-pointer border border-[#2B2B2B] px-4 py-1 rounded-full text-[2vw]"},Ze(("stringStar"in l?l.stringStar:P(Qu))({value:P(e).getAccountsWalletAddress,characters:"********",start:4})),1)):(ge(),Se("div",{key:1,class:"cursor-pointer border border-[#2B2B2B] px-4 py-1 rounded-full text-[2vw]",onClick:i}," Connect Wallet ")),ke(u,{"dialog-visible":P(r),"onUpdate:closeDialog":c[1]||(c[1]=d=>r.value=!1)},null,8,["dialog-visible"])])}}}),pw=n=>(ja("data-v-aaa0061e"),n=n(),Wa(),n),Ece={class:"w-full aspect-[1/1] absolute top-0 left-1/2 -translate-x-1/2"},Sce={class:"slogan uppercase text-[10vw] font-sans relative z-10"},Tce=pw(()=>L("span",null,"GAEA",-1)),Mce=pw(()=>L("div",{class:"w-[8vw] absolute -top-5 left-full"},[L("img",{src:mM,alt:""})],-1)),Rce=[Tce,Mce],Ice={class:"w-full px-[4vw] mx-auto flex flex-col items-center justify-center uppercase mt-[1.25rem] space-y-[2vw] relative z-10 text-[4vw]"},Cce=pw(()=>L("div",{class:"text-[2.8vw] text-[#ebebebbd] relative z-10"}," As the key driver of GAEA emotional applications, GAEA nodes automatically participate in network security monitoring and maintenance through globally distributed nodes. This enhances the security, performance, and intelligent network reward allocation of the GAEA network. Committed to achieving large-scale application of AI emotion generalization. ",-1)),Pce=tt({__name:"Floor1",emits:["update:scrollTo"],setup(n,{emit:e}){const t=s=>{e("update:scrollTo",s)},r=fe(!1),i=fe(null);return En(()=>{Tn(()=>{const s=new IntersectionObserver(o=>o.forEach(a=>r.value=a.isIntersecting),{threshold:0});i.value&&s.observe(i.value)})}),(s,o)=>{const a=pM,l=Da;return ge(),Se("div",{class:"w-full h-fit flex flex-col justify-center space-y-[3vw] mt-[7vw] relative",ref_key:"floor1",ref:i},[L("div",Ece,[ke(a)]),L("div",Sce,[L("div",{class:qe(["w-fit relative z-10",P(r)?"move-left":""])},Rce,2),L("div",{class:qe(["relative z-0",P(r)?"move-right":""])},"ecological",2),L("div",{class:qe(["nodes-text relative z-0",P(r)?"move-left":""])},"nodes",2)]),L("div",{class:"text-[3vw] font-sans text-[#ebebebee] mt-4 relative z-10",ref_key:"floor1",ref:i}," Becoming the founder of the silicon-based world. ",512),L("div",Ice,[L("div",{class:"buy-node-hover text-center w-full py-[0.5vw]",onClick:o[0]||(o[0]=c=>t("floor4"))},"buy node "),ke(l,{to:"https://app.aigaea.net/dashboard",target:"_blank",rel:"noopener",class:"buy-node-hover text-center w-full py-[0.5vw]"},{default:He(()=>[Mt(" join GAEA ")]),_:1}),L("div",{class:"buy-node-hover text-center w-full py-[0.5vw]",onClick:o[1]||(o[1]=c=>t("floor5"))},"my node")]),Cce],512)}}});const Nce=ro(Pce,[["__scopeId","data-v-aaa0061e"]]),kce={class:"flex flex-col items-center space-y-[3vw]"},Bce=L("div",{class:"w-[70%] aspect-[1/1.5] border border-[#ebebeb63] rounded-[25px] relative"},[L("video",{class:"w-full h-full object-contain text-[#ebebeb30] absolute top-0 left-0 rounded-[25px] z-20",src:Yp,poster:vM,loop:"",autoplay:"",muted:"",disablePictureInPicture:"",playsinline:"","webkit-playsinline":"",controlsList:"nodownload nofullscreen noremoteplayback",style:{"pointer-events":"none"}},[L("source",{src:Yp,type:"video/mp4"}),L("div",null,"Your browser does not support the video tag.")])],-1),Lce={class:"w-full space-y-5 flex flex-col items-center justify-center"},Dce=L("p",{class:"uppercase nodes-text text-[6vw] font-bold u-line-2"},"ecological nodes",-1),Oce={class:"grid grid-cols-2 gap-y-[10%] gap-x-[120px] mx-auto"},Fce={class:"text-[7vw] font-bold"},Uce={class:"text-[3vw] text-[#ebebebbd] text-center"},Hce=tt({__name:"Floor2",setup(n){const e=fe([{title:"151",description:"Countries and Regions"},{title:"71M+",description:"GAEA Effective Datasets"},{title:"67%",description:"Al Training Cost Reduction"},{title:"300%",description:"Emotion Model Recognition Speed"}]);return(t,r)=>(ge(),Se("div",kce,[Bce,L("div",Lce,[Dce,L("div",Oce,[(ge(!0),Se(mr,null,Uo(P(e),(i,s)=>(ge(),Se("div",{class:"flex flex-col items-center",key:s},[L("span",Fce,Ze(i.title),1),L("span",Uce,Ze(i.description),1)]))),128))])])]))}}),zce={},Gce={class:"flex flex-col items-center space-y-[3vw]"},Vce=L("div",{class:"w-[90%] aspect-[1/1] relative overflow-hidden"},[L("video",{class:"w-full h-full object-top object-contain text-[#ebebeb30] absolute top-0 left-0",src:Qp,poster:yM,loop:"",autoplay:"",muted:"",disablePictureInPicture:"",controlsList:"nodownload nofullscreen noremoteplayback",playsinline:"","webkit-playsinline":"",style:{"pointer-events":"none"}},[L("source",{src:Qp,type:"video/mp4"}),L("div",null,"Your browser does not support the video tag.")]),L("div",{class:"absolute top-[50vw] left-[10vw] text-[10vw] leading-[10vw] font-[600] flex flex-col"},[L("span",null,"THE"),L("span",null,"GAEA"),L("span",{class:"nodes-text"},"Emocoords")])],-1),$ce=L("div",{class:"text-[3vw] font-sans text-[#ebebebee]"}," Purchase GAEA smart hardware devices of the corresponding pre-sale level, bind exclusive NFTs to become authentication nodes. ",-1),jce=L("div",{class:"w-full border border-[#2B2B2B] text-[#ebebeb93] text-[3vw] leading-[4.5vw] rounded-[1.5625vw] pl-[3vw] py-6 u-line-8"},[Mt(" Net weight of the main body: approximately 15.8g"),L("br"),Mt(" Screen: 1.62 inches, AMOLED screen"),L("br"),Mt(" Resolution: 192 * 490"),L("br"),Mt(" Wireless connection: Bluetooth 5.4"),L("br"),Mt(" Waterproof grade: 5ATM"),L("br"),Mt(" Battery type: Lithium ion polymer battery"),L("br"),Mt(" Battery capacity: 233mAh ")],-1),Wce=[Vce,$ce,jce];function qce(n,e){return ge(),Se("div",Gce,Wce)}const Xce=ro(zce,[["render",qce]]),Gi=n=>(ja("data-v-074ea545"),n=n(),Wa(),n),Kce={class:"w-full h-fit flex items-center justify-between relative z-[10]"},Yce=Gi(()=>L("div",{class:"w-[80vw] h-[0.2vw] bg-[#5D5D5D] absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2"},[L("div",{class:"glowing-line"})],-1)),Qce=["onClick"],Zce={key:0,class:"absolute top-0 left-0 w-full h-full tier-box z-20 scale-[0.64] rounded-[1vw]"},Jce=Gi(()=>L("img",{src:E3,alt:"",class:"w-full h-full object-contain absolute top-0 left-0"},null,-1)),eue={key:1,class:"w-[5vw] aspect-[1/1] buy-node absolute -bottom-[50%] rotate-45"},tue={class:"space-y-4"},nue={class:"text-[5vw] font-bold"},rue={class:"text-[#ebebebbd] text-[2.2vw] font-sans"},iue={class:"w-full h-4 border border-[#ebebeb68] rounded-full relative"},sue=Gi(()=>L("div",{class:"w-[20px] h-[20px] buy-node absolute top-1/2 -translate-y-1/2 rounded-full right-0 border-[2px] border-[#ebebeb] flex items-center justify-center"},[L("span",{class:"iconfont icon-icon- font-sans"})],-1)),oue=[sue],aue={class:"flex items-center justify-between"},lue={class:"flex items-center space-x-2"},cue={class:"text-[1.625rem] font-bold"},uue=Gi(()=>L("span",{class:"text-[#ebebeb88] text-[22px] font-sans"},"sold",-1)),due={class:"text-[#ebebebbd] text-[1rem] font-bold"},fue={class:"flex items-center justify-between space-x-2"},hue=Gi(()=>L("span",{class:"text-[#ebebebbd] text-[1.125rem] lg:text-[1.125rem] md:text-[1.4rem] font-sans"},"Network",-1)),pue={class:"flex items-center space-x-1"},mue={class:"w-5 h-5"},gue=["src"],vue={class:"text-[#ebebebbd] text-[1.125rem] font-sans flex-1 u-line-1"},yue={class:"flex items-center justify-between"},_ue=Gi(()=>L("span",{class:"text-[#ebebebbd] text-[1.125rem] lg:text-[1.125rem] md:text-[1.4rem] font-sans"},"Quantity",-1)),bue={class:"bg-[#202020] px-3 py-2 rounded-2xl"},xue={class:"flex items-center rounded-lg px-3 py-[0.3vw] border border-[#2B2B2B]"},wue={class:"text-white px-4 text-[1rem] font-sans"},Aue={class:"w-full space-y-3 flex flex-col justify-between items-end"},Eue={class:"w-full"},Sue={class:"w-full flex items-center justify-between"},Tue=Gi(()=>L("span",{class:"text-[#ebebebbd] text-[1.125rem] lg:text-[1.125rem] md:text-[1.4rem] font-sans"},"Total",-1)),Mue={class:"flex items-center space-x-3"},Rue=Gi(()=>L("div",{class:"w-[2vw] h-[2vw]"},[L("img",{src:S3,alt:""})],-1)),Iue={class:"text-[1.75rem] font-bold"},Cue=Gi(()=>L("span",{class:"text-[#ebebeb81] text-[1.125rem] font-sans"},"ETH",-1)),Pue={class:"w-full flex items-center justify-end space-x-3"},Nue={class:"text-[1rem] text-[#ebebeb81] font-sans"},kue=Gi(()=>L("span",{class:"text-[#ebebeb81] text-[1rem] font-sans"},"USD",-1)),Bue={class:"w-full flex items-center justify-between"},Lue={class:"w-full relative flex items-center justify-between"},Due=Gi(()=>L("span",{class:"text-[#ebebebbd] text-[1.125rem] lg:text-[1.125rem] md:text-[1.4rem] font-sans"},"Code",-1)),Oue={key:0,class:"w-5 h-5 absolute top-1/2 text-[1.5rem] -translate-y-1/2 right-5 flex items-center justify-center"},Fue={key:0,class:"iconfont icon-icon- text-green-500"},Uue={key:1,class:"iconfont icon-del text-red-400"},Hue=Gi(()=>L("span",{class:"text-[3vw] font-bold text-[#EBEBEB]"},"BUY NODE",-1)),zue={class:"text-[2.5vw]"},Gue=tt({__name:"Floor4",emits:["update:success"],setup(n,{emit:e}){var U;const t=fe(!1),r=fe(null),i=zr(),s=dr(),o=fe(1),a=fe(1),l=fe(!1),c=fe(!1),u=fe(!1),d=_T(),f=fe([{title:"Basic Type",description:"Integration of edge device resources, Suitable for low load tasks."},{title:"Standard Type",description:"AI training/inference computing power pool, Support parallel computing of large models."},{title:"Professional Type",description:"Massive data storage and high-speed reading and writing, Support big data scenarios such as bioinformatics."},{title:"Flagship Type",description:"Cross chain resource scheduling core, Support heterogeneous computing power fusion."}]),p=fe({price:0,ethUsd:0,maxSupply:0,currentSupply:0,title:"",description:""}),m=fe(""),g=fe(!1),y=fe(!1),h=Zo({code:(U=d==null?void 0:d.query)==null?void 0:U.code,doYouAgree:!1}),w=ve(()=>!(s.getAccountsWalletAddress&&m.value)),M=ve(()=>Math.max((p.value.maxSupply||0)-(p.value.currentSupply||0),1)),S=async()=>{if(h.code.trim().includes("http")||h.code.trim().includes("://"))try{const G=new URL(h.code.trim());h.code=G.searchParams.get("code").trim()||h.code.trim()}catch{}h.code?N():(g.value=!1,m.value="")},C=G=>{o.value=G,a.value=1,k()},k=async()=>{try{l.value=!0;const G=await l3(o.value),R=await A3();if(G&&G.length>=3){p.value.price=pd(G[0]),p.value.maxSupply=Number(G[1]);const v=o.value===1?.35:o.value===2?.31:o.value===3?.23:o.value===4?.15:0,_=Math.floor(p.value.maxSupply*v);p.value.currentSupply=Number(G[2])+_,p.value.ethUsd=(R==null?void 0:R.data)||0}}catch{}finally{l.value=!1}},F=async()=>{try{if(!h.doYouAgree){y.value=!0,setTimeout(()=>{y.value=!1},500);return}if(c.value=!0,s.getAccountsWalletAddress===m.value)return Zn.warning("Cannot fill in one's own invitation code");await cg(i.getAccountWalletItem);const G=await s3(s.getAccountsWalletAddress);if(G<=p.value.price*a.value+2e-4)return Zn.warning(`ETH balance is insufficient, current balance is ${G}`);let R=null;a.value===1?R=await c3(o.value,m.value,p.value.price):R=await u3(o.value,m.value,`${Number(p.value.price)*Number(a.value)}`,a.value),R&&(p.value.currentSupply+=a.value,B(),e("update:success",{level:o.value,quantity:a.value}),a.value=1,Zn.success("successful!"))}catch{}finally{c.value=!1}},N=async()=>{var G;try{g.value=!1,c.value=!0;const R=await x3({referral_code:h.code});R.code===200&&R.data?m.value=(G=R.data)==null?void 0:G.address:m.value=""}catch{}finally{g.value=!0,c.value=!1}},B=async()=>{var G;if(!((G=s.getUserInfo)!=null&&G.referral_code))try{const R=await fg();s.setUserInfo(R.data)}catch{}},I=async()=>{var v;const G=await hh(),R=((v=G==null?void 0:G.data)==null?void 0:v.config[0])||ph();i.setWeb3ConfigItem(R)};return En(async()=>{await Tn();const G=new IntersectionObserver(R=>{R.forEach(async v=>{t.value=v.isIntersecting,v.isIntersecting&&(u.value||(i.getWeb3ConfigItem.chain_id||await I(),h.code&&S(),k(),u.value=!0))})},{threshold:0});r.value&&G.observe(r.value)}),(G,R)=>{var O,x,$,K,E,Y;const v=c2,_=l2,b=a2,A=v0,T=y0,D=Da,V=k2;return ge(),Se("div",{class:"w-full flex flex-col items-center justify-center relative",ref_key:"floor4",ref:r},[L("div",Kce,[Yce,(ge(),Se(mr,null,Uo(4,j=>L("div",{class:"w-[13vw] aspect-[1/1] z-10 relative flex items-center justify-center cursor-pointer",key:j,onClick:X=>C(j)},[P(o)===j?(ge(),Se("div",Zce)):St("",!0),Jce,L("span",{class:qe(["z-20 text-[2vw] font-bold",P(o)===j?"text-[#ebebeb]":"text-[#ebebebac]"])},"#Tier"+Ze(j),3),P(o)===j?(ge(),Se("div",eue)):St("",!0)],8,Qce)),64))]),vr((ge(),Se("div",{class:qe(["w-full border border-[#2B2B2B] relative bg-black z-[20] overflow-hidden px-10 py-6 mt-[2.5vw]",P(o)<=2?"rounded-bl-[35px] rounded-tr-[35px]":"rounded-tl-[35px] rounded-br-[35px] "]),"element-loading-text":"Loading..."},[L("div",tue,[L("p",nue,Ze(((O=P(f)[P(o)-1])==null?void 0:O.title)||"***"),1),L("div",rue,Ze(((x=P(f)[P(o)-1])==null?void 0:x.description)||"***"),1),L("div",iue,[L("div",{class:"min-w-[32px] max-w-full h-4 buy-node rounded-full relative",style:yi({width:((($=P(p))==null?void 0:$.currentSupply)||0)/(((K=P(p))==null?void 0:K.maxSupply)||1)*100+"%"})},oue,4)]),L("div",aue,[L("div",lue,[L("span",cue,Ze(P(p).currentSupply||0)+"/"+Ze(P(p).maxSupply||0),1),uue]),L("span",due,Ze(((P(p).currentSupply||0)/(P(p).maxSupply||1)*100).toFixed(2)+"%"),1)]),L("div",fue,[hue,L("div",pue,[L("div",mue,[L("img",{src:(E=P(i).getWeb3ConfigItem)==null?void 0:E.logo,alt:"",class:"rounded-full"},null,8,gue)]),L("span",vue,Ze(((Y=P(i).getWeb3ConfigItem)==null?void 0:Y.network)||"BASE"),1)])]),L("div",yue,[_ue,L("div",bue,[L("div",xue,[L("div",{class:"text-white px-2 text-[1.25rem] font-bold bg-[#2b2b2b] rounded-[6px] cursor-pointer select-none",onClick:R[0]||(R[0]=j=>P(a)>1&&a.value--)},"-"),L("span",wue,Ze(P(a)),1),L("div",{class:"text-white px-2 text-xl font-bold bg-[#2b2b2b] rounded-[6px] cursor-pointer select-none",onClick:R[1]||(R[1]=j=>P(a)<20&&P(a)<P(M)&&a.value++)},"+")])])])]),L("div",Aue,[L("div",Eue,[L("div",Sue,[Tue,L("div",Mue,[Rue,L("span",Iue,Ze(Math.floor(P(p).price*P(a)*100)/100),1),Cue])]),L("div",Pue,[L("span",Nue,"≈"+Ze(Math.floor(P(p).price*P(p).ethUsd*P(a)*100)/100||0),1),kue])]),L("div",Bue,[ke(b,{model:P(h),class:"w-full"},{default:He(()=>[ke(_,{label:"",style:{border:"none"}},{default:He(()=>[L("div",Lue,[Due,ke(v,{modelValue:P(h).code,"onUpdate:modelValue":R[2]||(R[2]=j=>P(h).code=j),placeholder:"Enter referral code",onInput:S,style:{width:"210px"}},null,8,["modelValue"]),P(g)?(ge(),Se("div",Oue,[P(m)?(ge(),Se("span",Fue)):(ge(),Se("span",Uue))])):St("",!0)])]),_:1})]),_:1},8,["model"])]),ke(A,{round:"",color:"none",class:"w-[70%] hover:scale-[1.1] duration-700 my-2 mr-3 buy-node",style:{height:"6vw",border:"1px solid #ebebeb86"},loading:P(c),disabled:P(w),onClick:R[3]||(R[3]=j=>("throttle"in G?G.throttle:P(hg))(()=>{F()}))},{default:He(()=>[Hue]),_:1},8,["loading","disabled"]),L("div",{class:qe(["flex items-center space-x-2 text-[#615F74] set_checkbox_sty px-2 py-2 bg-[#0B0E10]",{shake:!P(h).doYouAgree&&P(y)}])},[ke(T,{modelValue:P(h).doYouAgree,"onUpdate:modelValue":R[4]||(R[4]=j=>P(h).doYouAgree=j),style:yi(`width: fit-content;height:fit-content;padding:0.05vw;border: 1px ${!P(h).doYouAgree&&P(y)?"red":"#ebebeb"} solid;border-radius: 2px;`)},null,8,["modelValue","style"]),L("span",zue,[Mt(" I have read,understand, and agree to the "),ke(D,{class:"underline underline-offset-4 cursor-pointer text-[#EBEBEB] tex",to:"/privacyPolicy",target:"_self"},{default:He(()=>[Mt(" Privacy Policy ")]),_:1})])],2)])],2)),[[V,P(l)]])],512)}}});const Vue=ro(Gue,[["__scopeId","data-v-074ea545"]]),gs=n=>(ja("data-v-5143e81b"),n=n(),Wa(),n),$ue=gs(()=>L("div",{class:"w-[25%] aspect-[1/1] pointer-events-none absolute bottom-[25%] right-0 transition-all duration-1000 ease-linear z-[30]"},[L("div",{class:"w-full h-full pointer-events-none zoom-element rounded-full bg-primary opacity-50 blur-[100px] transition [transform:translate3d(0,0,0)] md:blur-[150px] lg:blur-[100px] xl:blur-[200px]"})],-1)),jue={class:"w-full h-full overflow-hidden flex flex-col justify-between border border-[#2b2b2b] rounded-[25px] px-10 py-3 space-y-8 relative attribute"},Wue={class:"w-5 h-5 absolute top-3 right-5 attribute_box"},que={class:"space-y-4"},Xue={class:"w-full flex items-center justify-between"},Kue=gs(()=>L("p",{class:"text-[5vw] font-bold"},"My Referral",-1)),Yue={class:"space-x-1 cursor-pointer"},Que={class:"text-[3vw] font-bold"},Zue=gs(()=>L("span",{class:"iconfont icon-copy text-[3vw]"},null,-1)),Jue={class:"flex items-center space-x-[10vw]"},ede={class:"h-full flex items-center space-x-2"},tde=gs(()=>L("div",{class:"h-[4.5vw] aspect-[1/1]"},[L("img",{src:R3,alt:"",class:"w-full h-full object-contain"})],-1)),nde={class:"text-[4vw] font-bold"},rde={class:"h-full flex items-center space-x-2"},ide=gs(()=>L("div",{class:"h-[5vw] aspect-[1/1]"},[L("img",{src:I3,alt:"",class:"w-full h-full object-contain"})],-1)),sde={class:"text-[4vw] font-bold"},ode={class:"flex flex-col items-center"},ade=gs(()=>L("div",{class:"w-[330px]"},[L("img",{src:C3,alt:"",class:"w-full h-full object-cover"})],-1)),lde={class:"text-[#808080] text-[1.625rem] lg:text-[1.625rem] md:text-[2rem] font-[500] cursor-pointer hover:text-[#EBEBEB] duration-500"},cde=gs(()=>L("span",{class:"text-[3vw] font-bold text-[#EBEBEB] uppercase"},"Stake Nodes",-1)),ude=gs(()=>L("span",{class:"text-[2.5vw]"}," The pledge is irrevocable and profits start accruing immediately. ",-1)),dde={class:"w-full h-full flex flex-col justify-between space-y-5 overflow-hidden"},fde={class:"flex-1 flex flex-col justify-between border border-[#2b2b2b] rounded-[25px] px-10 py-3 space-y-6 relative attribute cursor-pointer"},hde={class:"w-5 h-5 absolute top-3 right-5 attribute_box"},pde=gs(()=>L("div",{class:"flex items-center justify-between"},[L("p",{class:"text-[5vw] font-bold"},"Node Overview")],-1)),mde={class:"w-full grid grid-cols-4 gap-1"},gde={class:"w-[200px] py-4 px-8 border border-[#ebebeb54] rounded-[15px] text-[#EBEBEB] space-y-6",style:{background:"rgba(0, 0, 0,0.8)"}},vde=gs(()=>L("p",{class:"text-center text-[1.625rem] font-sans"},"Details",-1)),yde={class:"w-full flex-1 flex flex-col space-y-4"},_de={class:"flex flex-col items-center"},bde=["title"],xde={class:"text-[2vw] font-[400] u-line-1"},wde={key:1,class:"flex flex-col items-center"},Ade=["title"],Ede={class:"text-[2vw] font-[400] u-line-1"},Sde={class:"w-full flex justify-end"},Tde={class:"w-full flex-1 flex flex-col border border-[#2b2b2b] rounded-[25px] px-10 py-3 space-y-4"},Mde={class:"flex items-center flex-wrap justify-between"},Rde=gs(()=>L("p",{class:"text-[5vw] font-bold"},"$Gaea Produce",-1)),Ide={class:"w-[40%] bg-[#0F0F0F] rounded-md grid grid-cols-3 p-1 text-[#ebebeb71]"},Cde={class:"w-full min-h-[250px] flex-1 items-end"},Pde=tt({__name:"Index",props:{buyNodeData:{default:{level:1,quantity:0}}},emits:["update:scrollTo"],setup(n,{emit:e}){const t=n,r=fe(7),i=dr(),s=zr(),o=fe([0,0,0,0]),a=fe(!1),l=fe(!1),c=fe(!1),u=fe(!1),d=fe(null),f=fe(null),p="https://node.aigaea.net",m=A=>{e("update:scrollTo",A)},g=Zo({doYouAgree:!1}),y=fe(null),h=fe([{name:"My possessions",value:[0,0,0,0],sum:0},{name:"Running",value:[0,0,0,0],sum:0},{name:"Today's output",value:[0,0,0,0],sum:0},{name:"Total output",value:[0,0,0,0],sum:0}]);Ct(()=>t.buyNodeData,async()=>{var T;const A=t.buyNodeData.level-1;h.value[0].value[A]+=t.buyNodeData.quantity,h.value[0].sum+=t.buyNodeData.quantity,setTimeout(()=>{U(),N()},200),(T=i.getUserInfo)!=null&&T.referral_code?clearInterval(f.value):f.value=setInterval(R,3e4)}),Ct(()=>i.getAccountsWalletAddress,async()=>{i.getAccountsWalletAddress?k():(h.value=[{name:"My possessions",value:[0,0,0,0],sum:0},{name:"Running",value:[0,0,0,0],sum:0},{name:"Today's output",value:[0,0,0,0],sum:0},{name:"Total output",value:[0,0,0,0],sum:0}],w.value.rewardAmount=0,w.value.numberOfPeople=0,o.value=[0,0,0,0])},{deep:!0});const w=fe({numberOfPeople:0,rewardAmount:0}),M=fe(["T1","T2","T3","T4"]),S=ve(()=>{var T;const A=((T=s.getPledgeableNftTokenIds)==null?void 0:T[0])||[];return!(i.getAccountsWalletAddress&&A.length>0)}),C=async A=>{if(i.getAccountsWalletAddress)try{r.value=A,o.value=await _3(r.value)||[0,0,0,0];const T=await w3(r.value);if(T.code==200&&T.data){const D=Object.values(T.data)}}catch{}},k=async()=>{i.getAccountsWalletAddress&&(s.getWeb3ConfigItem.chain_id||await b(),await Promise.all([U(),F(),N(),B(),R(),C(7)]))},F=async()=>{const[A,T]=await Promise.all([f3(),h3()]);w.value.rewardAmount=A||0,w.value.numberOfPeople=T.reduce((D,V)=>D+V,0)||0},N=async()=>{const[A,T]=await Promise.all([y3(),v3()]);h.value[2].sum=T,h.value[3].sum=A},B=async()=>{const[A,T]=await Promise.all([d3(),i0()]);h.value[0].value=A||[0,0,0,0],h.value[0].sum=A.reduce((D,V)=>D+V,0),h.value[1].value=T||[0,0,0,0],h.value[1].sum=T.reduce((D,V)=>D+V,0),h.value[1].sum>0&&(d.value=setInterval(I,3e5))},I=()=>{N(),C(r.value)},U=async()=>{const A=await p3();s.setPledgeableNftTokenIds(A)},G=async()=>{try{if(!g.doYouAgree){u.value=!0,setTimeout(()=>{u.value=!1},500);return}l.value=!0;let A=null,T=s.getPledgeableNftTokenIds[0];if(await cg(s.getAccountWalletItem),T.length===1?A=await m3(T[0]):A=await g3(T),A){h.value[1].sum<=0&&(d.value=setInterval(I,3e5));const D=await i0();h.value[1].value=D||[0,0,0,0],h.value[1].sum=D.reduce((V,O)=>V+O,0),setTimeout(async()=>{await U();const V=[...s.getPledgeableNftTokenIds.flat()];Zn.success(`Successfully staked ${T.length} tokens, ${V.length} remaining`)},200)}}catch{}finally{l.value=!1}},R=async()=>{if(i.getAccountsWalletAddress)try{const A=await fg();i.setUserInfo(A.data)}catch{}},v=()=>{U(),R(),F()},_=async()=>{await Promise.all([N(),B(),C(r.value)])},b=async()=>{var D;const A=await hh(),T=((D=A==null?void 0:A.data)==null?void 0:D.config[0])||ph();s.setWeb3ConfigItem(T)};return En(async()=>{await Tn();const A=new IntersectionObserver(T=>{T.forEach(async D=>{a.value=D.isIntersecting,D.isIntersecting&&(c.value||(s.getWeb3ConfigItem.chain_id||await b(),i.getAccountsWalletAddress&&k(),c.value=!0))})},{threshold:0});y.value&&A.observe(y.value)}),Hr(()=>{d.value&&clearInterval(d.value)}),(A,T)=>{var E,Y,j;const D=T3,V=v0,O=y0,x=x2,$=M3,K=d0("copy");return ge(),Se("div",{class:"w-full grid sm:grid-cols-1 lg:grid-cols-[550px_1fr] items-center gap-5 relative",ref_key:"floor5",ref:y},[$ue,L("div",jue,[L("div",Wue,[ke(D,{onToRefresh:T[0]||(T[0]=X=>v())})]),L("div",que,[L("div",Xue,[Kue,vr((ge(),Se("div",Yue,[L("span",Que,Ze(((E=P(i).getUserInfo)==null?void 0:E.referral_code)||"****"),1),Zue])),[[K,(Y=P(i).getUserInfo)!=null&&Y.referral_code?`${P(p)}?code=${(j=P(i).getUserInfo)==null?void 0:j.referral_code}`:""]])]),L("div",Jue,[L("div",ede,[tde,L("span",nde,Ze(P(w).numberOfPeople),1)]),L("div",rde,[ide,L("span",sde,Ze(P(w).rewardAmount),1)])])]),L("div",ode,[ade,vr((ge(),Se("div",lde,[Mt(Ze(("stringStar"in A?A.stringStar:P(Qu))({value:P(i).getAccountsWalletAddress,characters:"********",start:4})),1)])),[[K,P(i).getAccountsWalletAddress]])]),L("div",null,[ke(V,{round:"",color:"none",class:"w-full min-w-[260px] hover:scale-[1.05] duration-700 my-2 mr-3 buy-node",style:{height:"6vw",border:"1px solid #ebebeb86"},disabled:P(S),loading:P(l),onClick:T[1]||(T[1]=X=>("throttle"in A?A.throttle:P(hg))(()=>{G()}))},{default:He(()=>[cde]),_:1},8,["disabled","loading"]),L("div",{class:qe(["flex items-center space-x-2 text-[#ebebeb] px-2 text-[#ebebeb5a]",{shake:!P(g).doYouAgree&&P(u)}])},[ke(O,{modelValue:P(g).doYouAgree,"onUpdate:modelValue":T[2]||(T[2]=X=>P(g).doYouAgree=X),style:yi(`width: fit-content;height:fit-content;padding:0.05vw;border: 1px ${!P(g).doYouAgree&&P(u)?"red":"#ebebeb"} solid;border-radius: 2px;`)},null,8,["modelValue","style"]),ude],2)])]),L("div",dde,[L("div",fde,[L("div",hde,[ke(D,{onToRefresh:T[3]||(T[3]=X=>_())})]),pde,L("div",mde,[(ge(!0),Se(mr,null,Uo(P(h),(X,ee)=>(ge(),Se("div",{class:"flex flex-col items-center",key:ee},[ee<2?(ge(),cn(x,{key:0,placement:"top-start",effect:"customized",trigger:"hover"},{content:He(()=>[L("div",gde,[vde,L("ul",yde,[(ge(!0),Se(mr,null,Uo(X.value,(le,me)=>(ge(),Se("li",{class:"w-full flex items-center justify-between text-[1.375rem]",key:me},[L("span",null,Ze(P(M)[me])+":",1),L("span",null,Ze(le),1)]))),128))])])]),default:He(()=>[L("div",_de,[L("span",{class:"text-[4vw] font-bold",title:X.sum},Ze(("formatNumber"in A?A.formatNumber:P(Wp))(X.sum)||0),9,bde),L("span",xde,Ze(X.name),1)])]),_:2},1024)):(ge(),Se("div",wde,[L("span",{class:"text-[4vw] font-bold",title:X.sum},Ze(("formatNumber"in A?A.formatNumber:P(Wp))(X.sum)||0),9,Ade),L("span",Ede,Ze(X.name),1)]))]))),128))]),L("div",Sde,[L("span",{class:"underline underline-offset-6 cursor-pointer text-[#ebebebaf] hover:text-[#EBEBEB] buy_node md:text-[1.5rem] lg:text-[20px]",onClick:T[4]||(T[4]=X=>m("floor4"))}," Buy Node ")])]),L("div",Tde,[L("div",Mde,[Rde,L("div",Ide,[L("div",{class:qe(["py-1 flex items-center justify-center cursor-pointer",P(r)===7?"bg-[#272727] rounded-md text-[#EBEBEB] font-[500]":""]),onClick:T[5]||(T[5]=X=>C(7))},"7D",2),L("div",{class:qe(["py-1 flex items-center justify-center cursor-pointer",P(r)===30?"bg-[#272727] rounded-md text-[#EBEBEB] font-[500]":""]),onClick:T[6]||(T[6]=X=>C(30))},"30D",2),L("div",{class:qe(["py-1 flex items-center justify-center cursor-pointer",P(r)===0?"bg-[#272727] rounded-md text-[#EBEBEB] font-[500]":""]),onClick:T[7]||(T[7]=X=>C(0))},"All",2)])]),L("div",Cde,[ke($,{data:P(o)},null,8,["data"])])])])],512)}}});const Nde=ro(Pde,[["__scopeId","data-v-5143e81b"]]),mw=n=>(ja("data-v-f753cd2b"),n=n(),Wa(),n),kde={class:"w-full h-[30vw] flex items-center justify-center relative"},Bde=rb('<div class="w-full h-7 absolute -top-1" data-v-f753cd2b><img src="'+P3+'" class="w-full h-full object-fill" data-v-f753cd2b></div><div class="h-full aspect-[1/1] absolute top-1/2 -translate-y-1/2 left-0" data-v-f753cd2b><img src="'+N3+'" alt="" class="w-full h-full object-contain" data-v-f753cd2b></div><div class="h-full aspect-[1/1] absolute top-1/2 -translate-y-1/2 right-0" data-v-f753cd2b><img src="'+k3+'" alt="" class="w-full h-full object-contain" data-v-f753cd2b></div>',3),Lde={class:"wrapper"},Dde={class:"marquee"},Ode={class:"marquee__group"},Fde={class:"inline-block w-[16.875vw] h-[2.9375vw] -ml-2"},Ude=["src"],Hde={class:"inline-block w-[12.5vw] h-[2.375vw] scale-[0.9]"},zde=["src"],Gde={class:"inline-block w-[15.625vw] h-[2.4375vw]"},Vde=["src"],$de={class:"inline-block w-[15.625vw] h-[3vw]"},jde=["src"],Wde={class:"inline-block w-[15.625vw] h-[2.1875vw] scale-[0.75] -ml-5"},qde=["src"],Xde={class:"inline-block w-[15.625vw] h-[2.375vw]"},Kde=["src"],Yde={class:"inline-block w-[15.625vw] h-[2.8125vw] grayscale-image mt-3"},Qde=["src"],Zde={"aria-hidden":"true",class:"marquee__group"},Jde={class:"inline-block w-[16.875vw] h-[2.9375vw] -ml-2"},efe=["src"],tfe={class:"inline-block w-[12.5vw] h-[2.375vw] scale-[0.9]"},nfe=["src"],rfe={class:"inline-block w-[15.625vw] h-[2.4375vw]"},ife=["src"],sfe={class:"inline-block w-[15.625vw] h-[3vw]"},ofe=["src"],afe={class:"inline-block w-[15.625vw] h-[2.1875vw] scale-[0.75] -ml-5"},lfe=["src"],cfe={class:"inline-block w-[15.625vw] h-[2.375vw]"},ufe=["src"],dfe={class:"inline-block w-[15.625vw] h-[2.8125vw] grayscale-image mt-3"},ffe=["src"],hfe={class:"flex justify-around space-x-20 text-[12px] text-[#B0B0B0]"},pfe={class:"flex flex-col space-y-4"},mfe=mw(()=>L("span",{class:"text-[#EBEBEB] text-[3vw]"},"About",-1)),gfe={class:"flex flex-col space-y-2 text-[2vw]"},vfe={class:"flex flex-col space-y-4 text-[#B0B0B0]"},yfe=mw(()=>L("span",{class:"text-[#EBEBEB] text-[3vw]"},"Community",-1)),_fe={class:"flex flex-col space-y-2 text-[2vw]"},bfe={class:"flex flex-col space-y-4 text-[#B0B0B0]"},xfe=mw(()=>L("span",{class:"text-[#EBEBEB] text-[3vw]"},"Legal",-1)),wfe={class:"flex flex-col space-y-2 text-[2vw]"},Afe=tt({__name:"Footer",setup(n){const e=["/images/partner/w3.png","/images/partner/vly.png","/images/partner/UXL.png","/images/partner/BL.png","/images/partner/GAL.png","/images/partner/hume.png","/images/partner/iq.png"];return(t,r)=>{const i=Da;return ge(),Se("div",null,[L("div",kde,[Bde,L("div",Lde,[L("div",Dde,[L("div",Ode,[L("li",Fde,[L("img",{src:e[0],alt:"",class:"w-full h-full object-contain object-center"},null,8,Ude)]),L("li",Hde,[L("img",{src:e[1],alt:"",class:"w-full h-full object-contain object-center"},null,8,zde)]),L("li",Gde,[L("img",{src:e[2],alt:"",class:"w-full h-full object-contain object-center"},null,8,Vde)]),L("li",$de,[L("img",{src:e[3],alt:"",class:"w-full h-full object-contain object-center mt-1"},null,8,jde)]),L("li",Wde,[L("img",{src:e[4],alt:"",class:"w-full h-full object-contain object-center"},null,8,qde)]),L("li",Xde,[L("img",{src:e[5],alt:"",class:"w-full h-full object-contain object-center"},null,8,Kde)]),L("li",Yde,[L("img",{src:e[6],alt:"",class:"w-full h-full object-contain object-center"},null,8,Qde)])]),L("div",Zde,[L("li",Jde,[L("img",{src:e[0],alt:"",class:"w-full h-full object-contain object-center"},null,8,efe)]),L("li",tfe,[L("img",{src:e[1],alt:"",class:"w-full h-full object-contain object-center"},null,8,nfe)]),L("li",rfe,[L("img",{src:e[2],alt:"",class:"w-full h-full object-contain object-center"},null,8,ife)]),L("li",sfe,[L("img",{src:e[3],alt:"",class:"w-full h-full object-contain object-center mt-1"},null,8,ofe)]),L("li",afe,[L("img",{src:e[4],alt:"",class:"w-full h-full object-contain object-center"},null,8,lfe)]),L("li",cfe,[L("img",{src:e[5],alt:"",class:"w-full h-full object-contain object-center"},null,8,ufe)]),L("li",dfe,[L("img",{src:e[6],alt:"",class:"w-full h-full object-contain object-center"},null,8,ffe)])])])])]),L("div",hfe,[L("div",pfe,[mfe,L("div",gfe,[ke(i,{to:"https://gaea-2.gitbook.io/gaea-docs",target:"_blank",rel:"noopener",class:"hover:underline underline-offset-4"},{default:He(()=>[Mt("Whitepaper")]),_:1}),ke(i,{to:"https://aigaea.net/home/?type=FAQ",target:"_blank",rel:"noopener",class:"hover:underline underline-offset-4"},{default:He(()=>[Mt("FAQ")]),_:1}),ke(i,{to:"https://app.aigaea.net/godhood",rel:"noopener",class:"hover:underline underline-offset-4"},{default:He(()=>[Mt("Godhood")]),_:1}),ke(i,{to:" https://medium.com/@aigaea3",target:"_blank",rel:"noopener",class:"hover:underline underline-offset-4"},{default:He(()=>[Mt("Medium")]),_:1})])]),L("div",vfe,[yfe,L("div",_fe,[ke(i,{to:"https://x.com/aigaealabs ",target:"_blank",rel:"noopener",class:"hover:underline underline-offset-4"},{default:He(()=>[Mt(" X ")]),_:1}),ke(i,{to:"https://discord.gg/aigaea",target:"_blank",rel:"noopener",class:"hover:underline underline-offset-4"},{default:He(()=>[Mt(" Discord ")]),_:1}),ke(i,{to:"https://t.me/AIGAEA_Community",target:"_blank",rel:"noopener",class:"hover:underline underline-offset-4"},{default:He(()=>[Mt(" Telegram ")]),_:1}),ke(i,{to:"https://forms.gle/MYzXeXBX6zTwHAHz5",target:"_blank",rel:"noopener",class:"hover:underline underline-offset-4"},{default:He(()=>[Mt(" Join us ")]),_:1})])]),L("div",bfe,[xfe,L("div",wfe,[ke(i,{to:"https://aigaea.net/home/?type=termsOfUse",target:"_blank",rel:"noopener",class:"hover:underline underline-offset-4"},{default:He(()=>[Mt("Terms of Use")]),_:1}),ke(i,{to:"https://aigaea.net/home/?type=privacyPolicy",target:"_blank",rel:"noopener",class:"hover:underline underline-offset-4"},{default:He(()=>[Mt("Privacy Policy")]),_:1})])])])])}}});const Efe=ro(Afe,[["__scopeId","data-v-f753cd2b"]]),Sfe={class:"w-full h-full text-[#EBEBEB]"},Tfe={class:"w-full flex flex-col space-y-[150px] mt-[150px] adaptation-padding"},Mfe={key:1,class:"px-[5%] pb-[10vw]"},Rfe={class:"space-y-[5.375rem]"},Dfe=tt({__name:"index",setup(n){const e=fe(null),t=fe(null),r=fe(null),i=fe(null),s=fe(null),o=fe(null),a=zr(),l=fe(1),c=()=>navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),u=p=>{let m=document.getElementById(p);if(m||(p==="floor2"?m=t.value:p==="floor3"?m=r.value:p==="floor4"?m=i.value:p==="floor5"&&(m=s.value)),m){const g=document.querySelector(".w-full.h-screen.overflow-auto");if(g){const y=m.getBoundingClientRect().top-g.getBoundingClientRect().top+g.scrollTop-180;g.scrollTo({top:y,behavior:"smooth"})}else m.scrollIntoView({behavior:"smooth"})}},d=async()=>{var g;const p=await hh(),m=((g=p==null?void 0:p.data)==null?void 0:g.config[0])||ph();a.setWeb3ConfigItem(m)},f=p=>{o.value=p};return En(()=>{c()?l.value=2:l.value=1,d()}),(p,m)=>{const g=S4,y=y7,h=R7,w=k7,M=bae,S=fle,C=sce,k=bce,F=Ace,N=Nce,B=Hce,I=Xce,U=Vue,G=Nde,R=Efe;return ge(),Se("div",Sfe,[P(l)===1?(ge(),Se(mr,{key:0},[ke(g,{"onUpdate:scrollTo":u}),ke(y,{id:"floor1",ref_key:"floor1Ref",ref:e,"onUpdate:scrollTo":u},null,512),L("div",Tfe,[ke(h,{id:"floor2",ref_key:"floor2Ref",ref:t},null,512),ke(w,{id:"floor3",ref_key:"floor3Ref",ref:r},null,512),ke(M,{id:"floor4",ref_key:"floor4Ref",ref:i,"onUpdate:success":f},null,512),ke(S,{id:"floor5",ref_key:"floor5Ref",ref:s,"onUpdate:scrollTo":u,buyNodeData:P(o)},null,8,["buyNodeData"])]),ke(C),ke(k)],64)):(ge(),Se("div",Mfe,[ke(F),L("div",Rfe,[ke(N,{id:"floor1",ref_key:"floor1Ref",ref:e,"onUpdate:scrollTo":u},null,512),ke(B,{id:"floor2",ref_key:"floor2Ref",ref:t},null,512),ke(I,{id:"floor3",ref_key:"floor3Ref",ref:r},null,512),ke(U,{id:"floor4",ref_key:"floor4Ref",ref:i,"onUpdate:success":f},null,512),ke(G,{id:"floor5",ref_key:"floor5Ref",ref:s,"onUpdate:scrollTo":u,buyNodeData:P(o)},null,8,["buyNodeData"]),ke(R)])]))])}}});export{Dfe as default};
