import{u as nP,b as v_,d as zf,t as rP,U as gc,i as y_,E as iP,c as sP,e as mS,s as gS,f as Bx,g as oP,_ as aP,a as cP}from"./Header.vuevuetypescriptsetuptruelang.fbb537b5.js";import{r as Ee,t as Is,d as vS,e as gp,f as Jt,u as yS,g as z,h as lP,i as Uc,j as uP,k as ge,l as Fc,m as ga,n as Dm,p as Hc,q as __,s as Lx,v as fP,x as _S,y as dP,z as vc,A as Om,B as hP,C as xa,D as bS,S as $l,L as b_,M as vp,E as xS,F as Bu,G as pP,H as wS,I as mP,J as gP,K as vP,N as mv,O as AS,P as on,Q as Tl,R as xr,T as yc,U as kl,V as Go,W as yP,X as _P,Y as Lr,Z as Gf,$ as Po,a0 as bP,a1 as xP,a2 as Ln,a3 as ES,a4 as _c,a5 as ks,a6 as gt,a7 as _r,a8 as Um,o as Pe,c as Ye,a9 as Bn,aa as st,ab as kr,ac as wP,ad as SS,a as Vt,ae as Ii,af as nr,ag as Cd,ah as AP,ai as kx,aj as O0,w as Zt,ak as wn,al as Cs,am as wa,an as Aa,ao as Ft,ap as Ut,b as Q,aq as EP,ar as Lu,as as Fm,at as Hm,au as yp,av as SP,aw as TP,ax as MP,ay as RP,az as IP,aA as Pi,aB as x_,aC as Qa,aD as lc,aE as CP,aF as PP,aG as _p,aH as Xl,aI as NP,aJ as TS,aK as BP,aL as MS,aM as bp,aN as LP,aO as Dx,aP as RS,aQ as kP,aR as DP,aS as OP,aT as UP,aU as FP,aV as HP,aW as gv,aX as Ox,aY as Vf,aZ as xp,a_ as zP,a$ as GP,b0 as nf,b1 as wp,b2 as rf,b3 as Ux,b4 as VP,b5 as w_,b6 as A_,_ as ku,b7 as Wf,b8 as IS,b9 as CS,ba as Ao,bb as zc,bc as WP,bd as ki,be as Mr,bf as hi,bg as jP,bh as PS,bi as qP}from"./entry.b9119726.js";const $P=()=>null;function XP(...n){const e=typeof n[n.length-1]=="string"?n.pop():void 0;typeof n[0]!="string"&&n.unshift(e);let[t,r,i={}]=n;if(typeof t!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof r!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");i.server=i.server??!0,i.default=i.default??$P,i.lazy=i.lazy??!1,i.immediate=i.immediate??!0;const s=yS(),o=()=>s.isHydrating?s.payload.data[t]:s.static.data[t],a=()=>o()!==void 0;s._asyncData[t]||(s._asyncData[t]={data:Ee(o()??i.default()),pending:Ee(!a()),error:Is(s.payload._errors,t),status:Ee("idle")});const c={...s._asyncData[t]};c.refresh=c.execute=(d={})=>{if(s._asyncDataPromises[t]){if(d.dedupe===!1)return s._asyncDataPromises[t];s._asyncDataPromises[t].cancelled=!0}if((d._initial||s.isHydrating&&d._initial!==!1)&&a())return o();c.pending.value=!0,c.status.value="pending";const p=new Promise((v,m)=>{try{v(r(s))}catch(y){m(y)}}).then(v=>{if(p.cancelled)return s._asyncDataPromises[t];let m=v;i.transform&&(m=i.transform(v)),i.pick&&(m=KP(m,i.pick)),c.data.value=m,c.error.value=null,c.status.value="success"}).catch(v=>{if(p.cancelled)return s._asyncDataPromises[t];c.error.value=v,c.data.value=z(i.default()),c.status.value="error"}).finally(()=>{p.cancelled||(c.pending.value=!1,s.payload.data[t]=c.data.value,c.error.value&&(s.payload._errors[t]=lP(c.error.value)),delete s._asyncDataPromises[t])});return s._asyncDataPromises[t]=p,s._asyncDataPromises[t]};const l=()=>c.refresh({_initial:!0}),u=i.server!==!1&&s.payload.serverRendered;{const d=Uc();if(d&&!d._nuxtOnBeforeMountCbs){d._nuxtOnBeforeMountCbs=[];const v=d._nuxtOnBeforeMountCbs;d&&(vS(()=>{v.forEach(m=>{m()}),v.splice(0,v.length)}),gp(()=>v.splice(0,v.length)))}u&&s.isHydrating&&a()?(c.pending.value=!1,c.status.value=c.error.value?"error":"success"):d&&(s.payload.serverRendered&&s.isHydrating||i.lazy)&&i.immediate?d._nuxtOnBeforeMountCbs.push(l):i.immediate&&l(),i.watch&&Jt(i.watch,()=>c.refresh());const p=s.hook("app:data:refresh",v=>{if(!v||v.includes(t))return c.refresh()});d&&gp(p)}const f=Promise.resolve(s._asyncDataPromises[t]).then(()=>c);return Object.assign(f,c),f}function KP(n,e){const t={};for(const r of e)t[r]=n[r];return t}function YP(n,e,t){const[r={},i]=typeof e=="string"?[{},e]:[e,t],s=r.key||uP([i,z(r.baseURL),typeof n=="string"?n:"",z(r.params||r.query)]);if(!s||typeof s!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+s);if(!n)throw new Error("[nuxt] [useFetch] request is missing.");const o=s===i?"$f"+s:s,a=ge(()=>{let T=n;return typeof T=="function"&&(T=T()),z(T)});if(!r.baseURL&&typeof a.value=="string"&&a.value.startsWith("//"))throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:c,lazy:l,default:u,transform:f,pick:d,watch:p,immediate:v,...m}=r,y=Fc({...m,cache:typeof r.cache=="boolean"?void 0:r.cache}),h={server:c,lazy:l,default:u,transform:f,pick:d,immediate:v,watch:p===!1?[]:[y,a,...p||[]]};let w;return XP(o,()=>{var C;return(C=w==null?void 0:w.abort)==null||C.call(w),w=typeof AbortController<"u"?new AbortController:{},typeof a.value=="string"&&a.value.startsWith("/"),(r.$fetch||globalThis.$fetch)(a.value,{signal:w.signal,...y})},h)}const fo=(n,e,{checkForDefaultPrevented:t=!0}={})=>i=>{const s=n==null?void 0:n(i);if(t===!1||!s)return e==null?void 0:e(i)},QP=()=>ga&&/firefox/i.test(window.navigator.userAgent);function ZP(n){return n}var JP=Dm(Hc,"WeakMap");const vv=JP;var Fx=Object.create,e3=function(){function n(){}return function(e){if(!__(e))return{};if(Fx)return Fx(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const t3=e3;function n3(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function r3(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var i3=800,s3=16,o3=Date.now;function a3(n){var e=0,t=0;return function(){var r=o3(),i=s3-(r-t);if(t=r,i>0){if(++e>=i3)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function c3(n){return function(){return n}}var l3=Lx?function(n,e){return Lx(n,"toString",{configurable:!0,enumerable:!1,value:c3(e),writable:!0})}:ZP;const u3=l3;var f3=a3(u3);const d3=f3;function h3(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}function zm(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],c=r?r(t[a],n[a],a,t,n):void 0;c===void 0&&(c=n[a]),i?fP(t,a,c):_S(t,a,c)}return t}var Hx=Math.max;function p3(n,e,t){return e=Hx(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,s=Hx(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(o),n3(n,this,a)}}var m3=9007199254740991;function E_(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=m3}function NS(n){return n!=null&&E_(n.length)&&!dP(n)}var g3=Object.prototype;function S_(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||g3;return n===t}function v3(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var y3="[object Arguments]";function zx(n){return vc(n)&&Om(n)==y3}var BS=Object.prototype,_3=BS.hasOwnProperty,b3=BS.propertyIsEnumerable,x3=zx(function(){return arguments}())?zx:function(n){return vc(n)&&_3.call(n,"callee")&&!b3.call(n,"callee")};const T_=x3;function w3(){return!1}var LS=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Gx=LS&&typeof module=="object"&&module&&!module.nodeType&&module,A3=Gx&&Gx.exports===LS,Vx=A3?Hc.Buffer:void 0,E3=Vx?Vx.isBuffer:void 0,S3=E3||w3;const Ap=S3;var T3="[object Arguments]",M3="[object Array]",R3="[object Boolean]",I3="[object Date]",C3="[object Error]",P3="[object Function]",N3="[object Map]",B3="[object Number]",L3="[object Object]",k3="[object RegExp]",D3="[object Set]",O3="[object String]",U3="[object WeakMap]",F3="[object ArrayBuffer]",H3="[object DataView]",z3="[object Float32Array]",G3="[object Float64Array]",V3="[object Int8Array]",W3="[object Int16Array]",j3="[object Int32Array]",q3="[object Uint8Array]",$3="[object Uint8ClampedArray]",X3="[object Uint16Array]",K3="[object Uint32Array]",xn={};xn[z3]=xn[G3]=xn[V3]=xn[W3]=xn[j3]=xn[q3]=xn[$3]=xn[X3]=xn[K3]=!0;xn[T3]=xn[M3]=xn[F3]=xn[R3]=xn[H3]=xn[I3]=xn[C3]=xn[P3]=xn[N3]=xn[B3]=xn[L3]=xn[k3]=xn[D3]=xn[O3]=xn[U3]=!1;function Y3(n){return vc(n)&&E_(n.length)&&!!xn[Om(n)]}function M_(n){return function(e){return n(e)}}var kS=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Mf=kS&&typeof module=="object"&&module&&!module.nodeType&&module,Q3=Mf&&Mf.exports===kS,U0=Q3&&hP.process,Z3=function(){try{var n=Mf&&Mf.require&&Mf.require("util").types;return n||U0&&U0.binding&&U0.binding("util")}catch{}}();const Kl=Z3;var Wx=Kl&&Kl.isTypedArray,J3=Wx?M_(Wx):Y3;const DS=J3;var eN=Object.prototype,tN=eN.hasOwnProperty;function OS(n,e){var t=xa(n),r=!t&&T_(n),i=!t&&!r&&Ap(n),s=!t&&!r&&!i&&DS(n),o=t||r||i||s,a=o?v3(n.length,String):[],c=a.length;for(var l in n)(e||tN.call(n,l))&&!(o&&(l=="length"||i&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||bS(l,c)))&&a.push(l);return a}function US(n,e){return function(t){return n(e(t))}}var nN=US(Object.keys,Object);const rN=nN;var iN=Object.prototype,sN=iN.hasOwnProperty;function oN(n){if(!S_(n))return rN(n);var e=[];for(var t in Object(n))sN.call(n,t)&&t!="constructor"&&e.push(t);return e}function R_(n){return NS(n)?OS(n):oN(n)}function aN(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var cN=Object.prototype,lN=cN.hasOwnProperty;function uN(n){if(!__(n))return aN(n);var e=S_(n),t=[];for(var r in n)r=="constructor"&&(e||!lN.call(n,r))||t.push(r);return t}function I_(n){return NS(n)?OS(n,!0):uN(n)}function C_(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var jx=$l?$l.isConcatSpreadable:void 0;function fN(n){return xa(n)||T_(n)||!!(jx&&n&&n[jx])}function FS(n,e,t,r,i){var s=-1,o=n.length;for(t||(t=fN),i||(i=[]);++s<o;){var a=n[s];e>0&&t(a)?e>1?FS(a,e-1,t,r,i):C_(i,a):r||(i[i.length]=a)}return i}function dN(n){var e=n==null?0:n.length;return e?FS(n,1):[]}function hN(n){return d3(p3(n,void 0,dN),n+"")}var pN=US(Object.getPrototypeOf,Object);const HS=pN;function yv(){if(!arguments.length)return[];var n=arguments[0];return xa(n)?n:[n]}function mN(){this.__data__=new b_,this.size=0}function gN(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function vN(n){return this.__data__.get(n)}function yN(n){return this.__data__.has(n)}var _N=200;function bN(n,e){var t=this.__data__;if(t instanceof b_){var r=t.__data__;if(!vp||r.length<_N-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new xS(r)}return t.set(n,e),this.size=t.size,this}function Ro(n){var e=this.__data__=new b_(n);this.size=e.size}Ro.prototype.clear=mN;Ro.prototype.delete=gN;Ro.prototype.get=vN;Ro.prototype.has=yN;Ro.prototype.set=bN;function xN(n,e){return n&&zm(e,R_(e),n)}function wN(n,e){return n&&zm(e,I_(e),n)}var zS=typeof exports=="object"&&exports&&!exports.nodeType&&exports,qx=zS&&typeof module=="object"&&module&&!module.nodeType&&module,AN=qx&&qx.exports===zS,$x=AN?Hc.Buffer:void 0,Xx=$x?$x.allocUnsafe:void 0;function EN(n,e){if(e)return n.slice();var t=n.length,r=Xx?Xx(t):new n.constructor(t);return n.copy(r),r}function SN(n,e){for(var t=-1,r=n==null?0:n.length,i=0,s=[];++t<r;){var o=n[t];e(o,t,n)&&(s[i++]=o)}return s}function GS(){return[]}var TN=Object.prototype,MN=TN.propertyIsEnumerable,Kx=Object.getOwnPropertySymbols,RN=Kx?function(n){return n==null?[]:(n=Object(n),SN(Kx(n),function(e){return MN.call(n,e)}))}:GS;const P_=RN;function IN(n,e){return zm(n,P_(n),e)}var CN=Object.getOwnPropertySymbols,PN=CN?function(n){for(var e=[];n;)C_(e,P_(n)),n=HS(n);return e}:GS;const VS=PN;function NN(n,e){return zm(n,VS(n),e)}function WS(n,e,t){var r=e(n);return xa(n)?r:C_(r,t(n))}function _v(n){return WS(n,R_,P_)}function BN(n){return WS(n,I_,VS)}var LN=Dm(Hc,"DataView");const bv=LN;var kN=Dm(Hc,"Promise");const xv=kN;var DN=Dm(Hc,"Set");const wv=DN;var Yx="[object Map]",ON="[object Object]",Qx="[object Promise]",Zx="[object Set]",Jx="[object WeakMap]",ew="[object DataView]",UN=Bu(bv),FN=Bu(vp),HN=Bu(xv),zN=Bu(wv),GN=Bu(vv),Xa=Om;(bv&&Xa(new bv(new ArrayBuffer(1)))!=ew||vp&&Xa(new vp)!=Yx||xv&&Xa(xv.resolve())!=Qx||wv&&Xa(new wv)!=Zx||vv&&Xa(new vv)!=Jx)&&(Xa=function(n){var e=Om(n),t=e==ON?n.constructor:void 0,r=t?Bu(t):"";if(r)switch(r){case UN:return ew;case FN:return Yx;case HN:return Qx;case zN:return Zx;case GN:return Jx}return e});const jf=Xa;var VN=Object.prototype,WN=VN.hasOwnProperty;function jN(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&WN.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var qN=Hc.Uint8Array;const Ep=qN;function N_(n){var e=new n.constructor(n.byteLength);return new Ep(e).set(new Ep(n)),e}function $N(n,e){var t=e?N_(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var XN=/\w*$/;function KN(n){var e=new n.constructor(n.source,XN.exec(n));return e.lastIndex=n.lastIndex,e}var tw=$l?$l.prototype:void 0,nw=tw?tw.valueOf:void 0;function YN(n){return nw?Object(nw.call(n)):{}}function QN(n,e){var t=e?N_(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var ZN="[object Boolean]",JN="[object Date]",eB="[object Map]",tB="[object Number]",nB="[object RegExp]",rB="[object Set]",iB="[object String]",sB="[object Symbol]",oB="[object ArrayBuffer]",aB="[object DataView]",cB="[object Float32Array]",lB="[object Float64Array]",uB="[object Int8Array]",fB="[object Int16Array]",dB="[object Int32Array]",hB="[object Uint8Array]",pB="[object Uint8ClampedArray]",mB="[object Uint16Array]",gB="[object Uint32Array]";function vB(n,e,t){var r=n.constructor;switch(e){case oB:return N_(n);case ZN:case JN:return new r(+n);case aB:return $N(n,t);case cB:case lB:case uB:case fB:case dB:case hB:case pB:case mB:case gB:return QN(n,t);case eB:return new r;case tB:case iB:return new r(n);case nB:return KN(n);case rB:return new r;case sB:return YN(n)}}function yB(n){return typeof n.constructor=="function"&&!S_(n)?t3(HS(n)):{}}var _B="[object Map]";function bB(n){return vc(n)&&jf(n)==_B}var rw=Kl&&Kl.isMap,xB=rw?M_(rw):bB;const wB=xB;var AB="[object Set]";function EB(n){return vc(n)&&jf(n)==AB}var iw=Kl&&Kl.isSet,SB=iw?M_(iw):EB;const TB=SB;var MB=1,RB=2,IB=4,jS="[object Arguments]",CB="[object Array]",PB="[object Boolean]",NB="[object Date]",BB="[object Error]",qS="[object Function]",LB="[object GeneratorFunction]",kB="[object Map]",DB="[object Number]",$S="[object Object]",OB="[object RegExp]",UB="[object Set]",FB="[object String]",HB="[object Symbol]",zB="[object WeakMap]",GB="[object ArrayBuffer]",VB="[object DataView]",WB="[object Float32Array]",jB="[object Float64Array]",qB="[object Int8Array]",$B="[object Int16Array]",XB="[object Int32Array]",KB="[object Uint8Array]",YB="[object Uint8ClampedArray]",QB="[object Uint16Array]",ZB="[object Uint32Array]",yn={};yn[jS]=yn[CB]=yn[GB]=yn[VB]=yn[PB]=yn[NB]=yn[WB]=yn[jB]=yn[qB]=yn[$B]=yn[XB]=yn[kB]=yn[DB]=yn[$S]=yn[OB]=yn[UB]=yn[FB]=yn[HB]=yn[KB]=yn[YB]=yn[QB]=yn[ZB]=!0;yn[BB]=yn[qS]=yn[zB]=!1;function Gh(n,e,t,r,i,s){var o,a=e&MB,c=e&RB,l=e&IB;if(t&&(o=i?t(n,r,i,s):t(n)),o!==void 0)return o;if(!__(n))return n;var u=xa(n);if(u){if(o=jN(n),!a)return r3(n,o)}else{var f=jf(n),d=f==qS||f==LB;if(Ap(n))return EN(n,a);if(f==$S||f==jS||d&&!i){if(o=c||d?{}:yB(n),!a)return c?NN(n,wN(o,n)):IN(n,xN(o,n))}else{if(!yn[f])return i?n:{};o=vB(n,f,a)}}s||(s=new Ro);var p=s.get(n);if(p)return p;s.set(n,o),TB(n)?n.forEach(function(y){o.add(Gh(y,e,t,y,n,s))}):wB(n)&&n.forEach(function(y,h){o.set(h,Gh(y,e,t,h,n,s))});var v=l?c?BN:_v:c?I_:R_,m=u?void 0:v(n);return h3(m||n,function(y,h){m&&(h=y,y=n[h]),_S(o,h,Gh(y,e,t,h,n,s))}),o}var JB=4;function sw(n){return Gh(n,JB)}var eL="__lodash_hash_undefined__";function tL(n){return this.__data__.set(n,eL),this}function nL(n){return this.__data__.has(n)}function Sp(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new xS;++e<t;)this.add(n[e])}Sp.prototype.add=Sp.prototype.push=tL;Sp.prototype.has=nL;function rL(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function iL(n,e){return n.has(e)}var sL=1,oL=2;function XS(n,e,t,r,i,s){var o=t&sL,a=n.length,c=e.length;if(a!=c&&!(o&&c>a))return!1;var l=s.get(n),u=s.get(e);if(l&&u)return l==e&&u==n;var f=-1,d=!0,p=t&oL?new Sp:void 0;for(s.set(n,e),s.set(e,n);++f<a;){var v=n[f],m=e[f];if(r)var y=o?r(m,v,f,e,n,s):r(v,m,f,n,e,s);if(y!==void 0){if(y)continue;d=!1;break}if(p){if(!rL(e,function(h,w){if(!iL(p,w)&&(v===h||i(v,h,t,r,s)))return p.push(w)})){d=!1;break}}else if(!(v===m||i(v,m,t,r,s))){d=!1;break}}return s.delete(n),s.delete(e),d}function aL(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}function cL(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var lL=1,uL=2,fL="[object Boolean]",dL="[object Date]",hL="[object Error]",pL="[object Map]",mL="[object Number]",gL="[object RegExp]",vL="[object Set]",yL="[object String]",_L="[object Symbol]",bL="[object ArrayBuffer]",xL="[object DataView]",ow=$l?$l.prototype:void 0,F0=ow?ow.valueOf:void 0;function wL(n,e,t,r,i,s,o){switch(t){case xL:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case bL:return!(n.byteLength!=e.byteLength||!s(new Ep(n),new Ep(e)));case fL:case dL:case mL:return pP(+n,+e);case hL:return n.name==e.name&&n.message==e.message;case gL:case yL:return n==e+"";case pL:var a=aL;case vL:var c=r&lL;if(a||(a=cL),n.size!=e.size&&!c)return!1;var l=o.get(n);if(l)return l==e;r|=uL,o.set(n,e);var u=XS(a(n),a(e),r,i,s,o);return o.delete(n),u;case _L:if(F0)return F0.call(n)==F0.call(e)}return!1}var AL=1,EL=Object.prototype,SL=EL.hasOwnProperty;function TL(n,e,t,r,i,s){var o=t&AL,a=_v(n),c=a.length,l=_v(e),u=l.length;if(c!=u&&!o)return!1;for(var f=c;f--;){var d=a[f];if(!(o?d in e:SL.call(e,d)))return!1}var p=s.get(n),v=s.get(e);if(p&&v)return p==e&&v==n;var m=!0;s.set(n,e),s.set(e,n);for(var y=o;++f<c;){d=a[f];var h=n[d],w=e[d];if(r)var S=o?r(w,h,d,e,n,s):r(h,w,d,n,e,s);if(!(S===void 0?h===w||i(h,w,t,r,s):S)){m=!1;break}y||(y=d=="constructor")}if(m&&!y){var T=n.constructor,C=e.constructor;T!=C&&"constructor"in n&&"constructor"in e&&!(typeof T=="function"&&T instanceof T&&typeof C=="function"&&C instanceof C)&&(m=!1)}return s.delete(n),s.delete(e),m}var ML=1,aw="[object Arguments]",cw="[object Array]",eh="[object Object]",RL=Object.prototype,lw=RL.hasOwnProperty;function IL(n,e,t,r,i,s){var o=xa(n),a=xa(e),c=o?cw:jf(n),l=a?cw:jf(e);c=c==aw?eh:c,l=l==aw?eh:l;var u=c==eh,f=l==eh,d=c==l;if(d&&Ap(n)){if(!Ap(e))return!1;o=!0,u=!1}if(d&&!u)return s||(s=new Ro),o||DS(n)?XS(n,e,t,r,i,s):wL(n,e,c,t,r,i,s);if(!(t&ML)){var p=u&&lw.call(n,"__wrapped__"),v=f&&lw.call(e,"__wrapped__");if(p||v){var m=p?n.value():n,y=v?e.value():e;return s||(s=new Ro),i(m,y,t,r,s)}}return d?(s||(s=new Ro),TL(n,e,t,r,i,s)):!1}function KS(n,e,t,r,i){return n===e?!0:n==null||e==null||!vc(n)&&!vc(e)?n!==n&&e!==e:IL(n,e,t,r,KS,i)}function CL(n,e){return n!=null&&e in Object(n)}function PL(n,e,t){e=wS(e,n);for(var r=-1,i=e.length,s=!1;++r<i;){var o=mP(e[r]);if(!(s=n!=null&&t(n,o)))break;n=n[o]}return s||++r!=i?s:(i=n==null?0:n.length,!!i&&E_(i)&&bS(o,i)&&(xa(n)||T_(n)))}function NL(n,e){return n!=null&&PL(n,e,CL)}function BL(n,e){return KS(n,e)}function LL(n){return n===void 0}function kL(n,e,t){for(var r=-1,i=e.length,s={};++r<i;){var o=e[r],a=gP(n,o);t(a,o)&&vP(s,wS(o,n),a)}return s}function DL(n,e){return kL(n,e,function(t,r){return NL(n,r)})}var OL=hN(function(n,e){return n==null?{}:DL(n,e)});const UL=OL,FL=n=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(n),HL=["class","style"],zL=/^on[A-Z]/,GL=(n={})=>{const{excludeListeners:e=!1,excludeKeys:t}=n,r=ge(()=>((t==null?void 0:t.value)||[]).concat(HL)),i=Uc();return i?ge(()=>{var s;return mv(Object.entries((s=i.proxy)==null?void 0:s.$attrs).filter(([o])=>!r.value.includes(o)&&!(e&&zL.test(o))))}):ge(()=>({}))},VL=AS({type:on(Boolean),default:null}),WL=AS({type:on(Function)}),YS=n=>{const e=`update:${n}`,t=`onUpdate:${n}`,r=[e],i={[n]:VL,[t]:WL};return{useModelToggle:({indicator:o,toggleReason:a,shouldHideWhenRouteChanges:c,shouldProceed:l,onShow:u,onHide:f})=>{const d=Uc(),{emit:p}=d,v=d.props,m=ge(()=>Tl(v[t])),y=ge(()=>v[n]===null),h=O=>{o.value!==!0&&(o.value=!0,a&&(a.value=O),Tl(u)&&u(O))},w=O=>{o.value!==!1&&(o.value=!1,a&&(a.value=O),Tl(f)&&f(O))},S=O=>{if(v.disabled===!0||Tl(l)&&!l())return;const P=m.value&&ga;P&&p(e,!0),(y.value||!P)&&h(O)},T=O=>{if(v.disabled===!0||!ga)return;const P=m.value&&ga;P&&p(e,!1),(y.value||!P)&&w(O)},C=O=>{yc(O)&&(v.disabled&&O?m.value&&p(e,!1):o.value!==O&&(O?h():w()))},B=()=>{o.value?T():S()};return Jt(()=>v[n],C),c&&d.appContext.config.globalProperties.$route!==void 0&&Jt(()=>({...d.proxy.$route}),()=>{c.value&&o.value&&T()}),xr(()=>{C(v[n])}),{hide:T,show:S,toggle:B,hasUpdateHandler:m}},useModelToggleProps:i,useModelToggleEmits:r}};YS("modelValue");const QS=n=>{const e=Uc();return ge(()=>{var t,r;return(r=(t=e==null?void 0:e.proxy)==null?void 0:t.$props)==null?void 0:r[n]})};var qr="top",Ni="bottom",Bi="right",$r="left",B_="auto",Pd=[qr,Ni,Bi,$r],Yl="start",qf="end",jL="clippingParents",ZS="viewport",sf="popper",qL="reference",uw=Pd.reduce(function(n,e){return n.concat([e+"-"+Yl,e+"-"+qf])},[]),L_=[].concat(Pd,[B_]).reduce(function(n,e){return n.concat([e,e+"-"+Yl,e+"-"+qf])},[]),$L="beforeRead",XL="read",KL="afterRead",YL="beforeMain",QL="main",ZL="afterMain",JL="beforeWrite",ek="write",tk="afterWrite",nk=[$L,XL,KL,YL,QL,ZL,JL,ek,tk];function Gs(n){return n?(n.nodeName||"").toLowerCase():null}function os(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Ql(n){var e=os(n).Element;return n instanceof e||n instanceof Element}function Ci(n){var e=os(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function k_(n){if(typeof ShadowRoot>"u")return!1;var e=os(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function rk(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},s=e.elements[t];!Ci(s)||!Gs(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function ik(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),a=o.reduce(function(c,l){return c[l]="",c},{});!Ci(i)||!Gs(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(c){i.removeAttribute(c)}))})}}var JS={name:"applyStyles",enabled:!0,phase:"write",fn:rk,effect:ik,requires:["computeStyles"]};function Ds(n){return n.split("-")[0]}var uc=Math.max,Tp=Math.min,Zl=Math.round;function Jl(n,e){e===void 0&&(e=!1);var t=n.getBoundingClientRect(),r=1,i=1;if(Ci(n)&&e){var s=n.offsetHeight,o=n.offsetWidth;o>0&&(r=Zl(t.width)/o||1),s>0&&(i=Zl(t.height)/s||1)}return{width:t.width/r,height:t.height/i,top:t.top/i,right:t.right/r,bottom:t.bottom/i,left:t.left/r,x:t.left/r,y:t.top/i}}function D_(n){var e=Jl(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function eT(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&k_(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function No(n){return os(n).getComputedStyle(n)}function sk(n){return["table","td","th"].indexOf(Gs(n))>=0}function Na(n){return((Ql(n)?n.ownerDocument:n.document)||window.document).documentElement}function Gm(n){return Gs(n)==="html"?n:n.assignedSlot||n.parentNode||(k_(n)?n.host:null)||Na(n)}function fw(n){return!Ci(n)||No(n).position==="fixed"?null:n.offsetParent}function ok(n){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t=navigator.userAgent.indexOf("Trident")!==-1;if(t&&Ci(n)){var r=No(n);if(r.position==="fixed")return null}var i=Gm(n);for(k_(i)&&(i=i.host);Ci(i)&&["html","body"].indexOf(Gs(i))<0;){var s=No(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Nd(n){for(var e=os(n),t=fw(n);t&&sk(t)&&No(t).position==="static";)t=fw(t);return t&&(Gs(t)==="html"||Gs(t)==="body"&&No(t).position==="static")?e:t||ok(n)||e}function O_(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function Rf(n,e,t){return uc(n,Tp(e,t))}function ak(n,e,t){var r=Rf(n,e,t);return r>t?t:r}function tT(){return{top:0,right:0,bottom:0,left:0}}function nT(n){return Object.assign({},tT(),n)}function rT(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var ck=function(n,e){return n=typeof n=="function"?n(Object.assign({},e.rects,{placement:e.placement})):n,nT(typeof n!="number"?n:rT(n,Pd))};function lk(n){var e,t=n.state,r=n.name,i=n.options,s=t.elements.arrow,o=t.modifiersData.popperOffsets,a=Ds(t.placement),c=O_(a),l=[$r,Bi].indexOf(a)>=0,u=l?"height":"width";if(!(!s||!o)){var f=ck(i.padding,t),d=D_(s),p=c==="y"?qr:$r,v=c==="y"?Ni:Bi,m=t.rects.reference[u]+t.rects.reference[c]-o[c]-t.rects.popper[u],y=o[c]-t.rects.reference[c],h=Nd(s),w=h?c==="y"?h.clientHeight||0:h.clientWidth||0:0,S=m/2-y/2,T=f[p],C=w-d[u]-f[v],B=w/2-d[u]/2+S,O=Rf(T,B,C),P=c;t.modifiersData[r]=(e={},e[P]=O,e.centerOffset=O-B,e)}}function uk(n){var e=n.state,t=n.options,r=t.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!eT(e.elements.popper,i)||(e.elements.arrow=i))}var fk={name:"arrow",enabled:!0,phase:"main",fn:lk,effect:uk,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function eu(n){return n.split("-")[1]}var dk={top:"auto",right:"auto",bottom:"auto",left:"auto"};function hk(n){var e=n.x,t=n.y,r=window,i=r.devicePixelRatio||1;return{x:Zl(e*i)/i||0,y:Zl(t*i)/i||0}}function dw(n){var e,t=n.popper,r=n.popperRect,i=n.placement,s=n.variation,o=n.offsets,a=n.position,c=n.gpuAcceleration,l=n.adaptive,u=n.roundOffsets,f=n.isFixed,d=o.x,p=d===void 0?0:d,v=o.y,m=v===void 0?0:v,y=typeof u=="function"?u({x:p,y:m}):{x:p,y:m};p=y.x,m=y.y;var h=o.hasOwnProperty("x"),w=o.hasOwnProperty("y"),S=$r,T=qr,C=window;if(l){var B=Nd(t),O="clientHeight",P="clientWidth";if(B===os(t)&&(B=Na(t),No(B).position!=="static"&&a==="absolute"&&(O="scrollHeight",P="scrollWidth")),B=B,i===qr||(i===$r||i===Bi)&&s===qf){T=Ni;var N=f&&B===C&&C.visualViewport?C.visualViewport.height:B[O];m-=N-r.height,m*=c?1:-1}if(i===$r||(i===qr||i===Ni)&&s===qf){S=Bi;var I=f&&B===C&&C.visualViewport?C.visualViewport.width:B[P];p-=I-r.width,p*=c?1:-1}}var U=Object.assign({position:a},l&&dk),q=u===!0?hk({x:p,y:m}):{x:p,y:m};if(p=q.x,m=q.y,c){var M;return Object.assign({},U,(M={},M[T]=w?"0":"",M[S]=h?"0":"",M.transform=(C.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",M))}return Object.assign({},U,(e={},e[T]=w?m+"px":"",e[S]=h?p+"px":"",e.transform="",e))}function pk(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=r===void 0?!0:r,s=t.adaptive,o=s===void 0?!0:s,a=t.roundOffsets,c=a===void 0?!0:a,l={placement:Ds(e.placement),variation:eu(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,dw(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:c})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,dw(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var iT={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:pk,data:{}},th={passive:!0};function mk(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,c=os(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&l.forEach(function(u){u.addEventListener("scroll",t.update,th)}),a&&c.addEventListener("resize",t.update,th),function(){s&&l.forEach(function(u){u.removeEventListener("scroll",t.update,th)}),a&&c.removeEventListener("resize",t.update,th)}}var sT={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:mk,data:{}},gk={left:"right",right:"left",bottom:"top",top:"bottom"};function Vh(n){return n.replace(/left|right|bottom|top/g,function(e){return gk[e]})}var vk={start:"end",end:"start"};function hw(n){return n.replace(/start|end/g,function(e){return vk[e]})}function U_(n){var e=os(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function F_(n){return Jl(Na(n)).left+U_(n).scrollLeft}function yk(n){var e=os(n),t=Na(n),r=e.visualViewport,i=t.clientWidth,s=t.clientHeight,o=0,a=0;return r&&(i=r.width,s=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=r.offsetLeft,a=r.offsetTop)),{width:i,height:s,x:o+F_(n),y:a}}function _k(n){var e,t=Na(n),r=U_(n),i=(e=n.ownerDocument)==null?void 0:e.body,s=uc(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=uc(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+F_(n),c=-r.scrollTop;return No(i||t).direction==="rtl"&&(a+=uc(t.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:c}}function H_(n){var e=No(n),t=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+r)}function oT(n){return["html","body","#document"].indexOf(Gs(n))>=0?n.ownerDocument.body:Ci(n)&&H_(n)?n:oT(Gm(n))}function If(n,e){var t;e===void 0&&(e=[]);var r=oT(n),i=r===((t=n.ownerDocument)==null?void 0:t.body),s=os(r),o=i?[s].concat(s.visualViewport||[],H_(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(If(Gm(o)))}function Av(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function bk(n){var e=Jl(n);return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function pw(n,e){return e===ZS?Av(yk(n)):Ql(e)?bk(e):Av(_k(Na(n)))}function xk(n){var e=If(Gm(n)),t=["absolute","fixed"].indexOf(No(n).position)>=0,r=t&&Ci(n)?Nd(n):n;return Ql(r)?e.filter(function(i){return Ql(i)&&eT(i,r)&&Gs(i)!=="body"}):[]}function wk(n,e,t){var r=e==="clippingParents"?xk(n):[].concat(e),i=[].concat(r,[t]),s=i[0],o=i.reduce(function(a,c){var l=pw(n,c);return a.top=uc(l.top,a.top),a.right=Tp(l.right,a.right),a.bottom=Tp(l.bottom,a.bottom),a.left=uc(l.left,a.left),a},pw(n,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function aT(n){var e=n.reference,t=n.element,r=n.placement,i=r?Ds(r):null,s=r?eu(r):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,c;switch(i){case qr:c={x:o,y:e.y-t.height};break;case Ni:c={x:o,y:e.y+e.height};break;case Bi:c={x:e.x+e.width,y:a};break;case $r:c={x:e.x-t.width,y:a};break;default:c={x:e.x,y:e.y}}var l=i?O_(i):null;if(l!=null){var u=l==="y"?"height":"width";switch(s){case Yl:c[l]=c[l]-(e[u]/2-t[u]/2);break;case qf:c[l]=c[l]+(e[u]/2-t[u]/2);break}}return c}function $f(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=r===void 0?n.placement:r,s=t.boundary,o=s===void 0?jL:s,a=t.rootBoundary,c=a===void 0?ZS:a,l=t.elementContext,u=l===void 0?sf:l,f=t.altBoundary,d=f===void 0?!1:f,p=t.padding,v=p===void 0?0:p,m=nT(typeof v!="number"?v:rT(v,Pd)),y=u===sf?qL:sf,h=n.rects.popper,w=n.elements[d?y:u],S=wk(Ql(w)?w:w.contextElement||Na(n.elements.popper),o,c),T=Jl(n.elements.reference),C=aT({reference:T,element:h,strategy:"absolute",placement:i}),B=Av(Object.assign({},h,C)),O=u===sf?B:T,P={top:S.top-O.top+m.top,bottom:O.bottom-S.bottom+m.bottom,left:S.left-O.left+m.left,right:O.right-S.right+m.right},N=n.modifiersData.offset;if(u===sf&&N){var I=N[i];Object.keys(P).forEach(function(U){var q=[Bi,Ni].indexOf(U)>=0?1:-1,M=[qr,Ni].indexOf(U)>=0?"y":"x";P[U]+=I[M]*q})}return P}function Ak(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=t.boundary,s=t.rootBoundary,o=t.padding,a=t.flipVariations,c=t.allowedAutoPlacements,l=c===void 0?L_:c,u=eu(r),f=u?a?uw:uw.filter(function(v){return eu(v)===u}):Pd,d=f.filter(function(v){return l.indexOf(v)>=0});d.length===0&&(d=f);var p=d.reduce(function(v,m){return v[m]=$f(n,{placement:m,boundary:i,rootBoundary:s,padding:o})[Ds(m)],v},{});return Object.keys(p).sort(function(v,m){return p[v]-p[m]})}function Ek(n){if(Ds(n)===B_)return[];var e=Vh(n);return[hw(n),e,hw(e)]}function Sk(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,s=i===void 0?!0:i,o=t.altAxis,a=o===void 0?!0:o,c=t.fallbackPlacements,l=t.padding,u=t.boundary,f=t.rootBoundary,d=t.altBoundary,p=t.flipVariations,v=p===void 0?!0:p,m=t.allowedAutoPlacements,y=e.options.placement,h=Ds(y),w=h===y,S=c||(w||!v?[Vh(y)]:Ek(y)),T=[y].concat(S).reduce(function(K,A){return K.concat(Ds(A)===B_?Ak(e,{placement:A,boundary:u,rootBoundary:f,padding:l,flipVariations:v,allowedAutoPlacements:m}):A)},[]),C=e.rects.reference,B=e.rects.popper,O=new Map,P=!0,N=T[0],I=0;I<T.length;I++){var U=T[I],q=Ds(U),M=eu(U)===Yl,g=[qr,Ni].indexOf(q)>=0,_=g?"width":"height",b=$f(e,{placement:U,boundary:u,rootBoundary:f,altBoundary:d,padding:l}),E=g?M?Bi:$r:M?Ni:qr;C[_]>B[_]&&(E=Vh(E));var R=Vh(E),L=[];if(s&&L.push(b[q]<=0),a&&L.push(b[E]<=0,b[R]<=0),L.every(function(K){return K})){N=U,P=!1;break}O.set(U,L)}if(P)for(var G=v?3:1,k=function(K){var A=T.find(function(X){var V=O.get(X);if(V)return V.slice(0,K).every(function($){return $})});if(A)return N=A,"break"},x=G;x>0;x--){var F=k(x);if(F==="break")break}e.placement!==N&&(e.modifiersData[r]._skip=!0,e.placement=N,e.reset=!0)}}var Tk={name:"flip",enabled:!0,phase:"main",fn:Sk,requiresIfExists:["offset"],data:{_skip:!1}};function mw(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function gw(n){return[qr,Bi,Ni,$r].some(function(e){return n[e]>=0})}function Mk(n){var e=n.state,t=n.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=$f(e,{elementContext:"reference"}),a=$f(e,{altBoundary:!0}),c=mw(o,r),l=mw(a,i,s),u=gw(c),f=gw(l);e.modifiersData[t]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}var Rk={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Mk};function Ik(n,e,t){var r=Ds(n),i=[$r,qr].indexOf(r)>=0?-1:1,s=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[$r,Bi].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function Ck(n){var e=n.state,t=n.options,r=n.name,i=t.offset,s=i===void 0?[0,0]:i,o=L_.reduce(function(u,f){return u[f]=Ik(f,e.rects,s),u},{}),a=o[e.placement],c=a.x,l=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=l),e.modifiersData[r]=o}var Pk={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Ck};function Nk(n){var e=n.state,t=n.name;e.modifiersData[t]=aT({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var cT={name:"popperOffsets",enabled:!0,phase:"read",fn:Nk,data:{}};function Bk(n){return n==="x"?"y":"x"}function Lk(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,s=i===void 0?!0:i,o=t.altAxis,a=o===void 0?!1:o,c=t.boundary,l=t.rootBoundary,u=t.altBoundary,f=t.padding,d=t.tether,p=d===void 0?!0:d,v=t.tetherOffset,m=v===void 0?0:v,y=$f(e,{boundary:c,rootBoundary:l,padding:f,altBoundary:u}),h=Ds(e.placement),w=eu(e.placement),S=!w,T=O_(h),C=Bk(T),B=e.modifiersData.popperOffsets,O=e.rects.reference,P=e.rects.popper,N=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,I=typeof N=="number"?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),U=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,q={x:0,y:0};if(B){if(s){var M,g=T==="y"?qr:$r,_=T==="y"?Ni:Bi,b=T==="y"?"height":"width",E=B[T],R=E+y[g],L=E-y[_],G=p?-P[b]/2:0,k=w===Yl?O[b]:P[b],x=w===Yl?-P[b]:-O[b],F=e.elements.arrow,K=p&&F?D_(F):{width:0,height:0},A=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:tT(),X=A[g],V=A[_],$=Rf(0,O[b],K[b]),ee=S?O[b]/2-G-$-X-I.mainAxis:k-$-X-I.mainAxis,he=S?-O[b]/2+G+$+V+I.mainAxis:x+$+V+I.mainAxis,pe=e.elements.arrow&&Nd(e.elements.arrow),de=pe?T==="y"?pe.clientTop||0:pe.clientLeft||0:0,Fe=(M=U==null?void 0:U[T])!=null?M:0,j=E+ee-Fe-de,Ue=E+he-Fe,et=Rf(p?Tp(R,j):R,E,p?uc(L,Ue):L);B[T]=et,q[T]=et-E}if(a){var Ve,Ie=T==="x"?qr:$r,Pt=T==="x"?Ni:Bi,Se=B[C],W=C==="y"?"height":"width",D=Se+y[Ie],te=Se-y[Pt],ue=[qr,$r].indexOf(h)!==-1,Z=(Ve=U==null?void 0:U[C])!=null?Ve:0,ne=ue?D:Se-O[W]-P[W]-Z+I.altAxis,me=ue?Se+O[W]+P[W]-Z-I.altAxis:te,Re=p&&ue?ak(ne,Se,me):Rf(p?ne:D,Se,p?me:te);B[C]=Re,q[C]=Re-Se}e.modifiersData[r]=q}}var kk={name:"preventOverflow",enabled:!0,phase:"main",fn:Lk,requiresIfExists:["offset"]};function Dk(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function Ok(n){return n===os(n)||!Ci(n)?U_(n):Dk(n)}function Uk(n){var e=n.getBoundingClientRect(),t=Zl(e.width)/n.offsetWidth||1,r=Zl(e.height)/n.offsetHeight||1;return t!==1||r!==1}function Fk(n,e,t){t===void 0&&(t=!1);var r=Ci(e),i=Ci(e)&&Uk(e),s=Na(e),o=Jl(n,i),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!t)&&((Gs(e)!=="body"||H_(s))&&(a=Ok(e)),Ci(e)?(c=Jl(e,!0),c.x+=e.clientLeft,c.y+=e.clientTop):s&&(c.x=F_(s))),{x:o.left+a.scrollLeft-c.x,y:o.top+a.scrollTop-c.y,width:o.width,height:o.height}}function Hk(n){var e=new Map,t=new Set,r=[];n.forEach(function(s){e.set(s.name,s)});function i(s){t.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!t.has(a)){var c=e.get(a);c&&i(c)}}),r.push(s)}return n.forEach(function(s){t.has(s.name)||i(s)}),r}function zk(n){var e=Hk(n);return nk.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}function Gk(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function Vk(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var vw={placement:"bottom",modifiers:[],strategy:"absolute"};function yw(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function z_(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,i=e.defaultOptions,s=i===void 0?vw:i;return function(o,a,c){c===void 0&&(c=s);var l={placement:"bottom",orderedModifiers:[],options:Object.assign({},vw,s),modifiersData:{},elements:{reference:o,popper:a},attributes:{},styles:{}},u=[],f=!1,d={state:l,setOptions:function(m){var y=typeof m=="function"?m(l.options):m;v(),l.options=Object.assign({},s,l.options,y),l.scrollParents={reference:Ql(o)?If(o):o.contextElement?If(o.contextElement):[],popper:If(a)};var h=zk(Vk([].concat(r,l.options.modifiers)));return l.orderedModifiers=h.filter(function(w){return w.enabled}),p(),d.update()},forceUpdate:function(){if(!f){var m=l.elements,y=m.reference,h=m.popper;if(yw(y,h)){l.rects={reference:Fk(y,Nd(h),l.options.strategy==="fixed"),popper:D_(h)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach(function(P){return l.modifiersData[P.name]=Object.assign({},P.data)});for(var w=0;w<l.orderedModifiers.length;w++){if(l.reset===!0){l.reset=!1,w=-1;continue}var S=l.orderedModifiers[w],T=S.fn,C=S.options,B=C===void 0?{}:C,O=S.name;typeof T=="function"&&(l=T({state:l,options:B,name:O,instance:d})||l)}}}},update:Gk(function(){return new Promise(function(m){d.forceUpdate(),m(l)})}),destroy:function(){v(),f=!0}};if(!yw(o,a))return d;d.setOptions(c).then(function(m){!f&&c.onFirstUpdate&&c.onFirstUpdate(m)});function p(){l.orderedModifiers.forEach(function(m){var y=m.name,h=m.options,w=h===void 0?{}:h,S=m.effect;if(typeof S=="function"){var T=S({state:l,name:y,instance:d,options:w}),C=function(){};u.push(T||C)}})}function v(){u.forEach(function(m){return m()}),u=[]}return d}}z_();var Wk=[sT,cT,iT,JS];z_({defaultModifiers:Wk});var jk=[sT,cT,iT,JS,Pk,Tk,kk,fk,Rk],qk=z_({defaultModifiers:jk});const $k=(n,e,t={})=>{const r={name:"updateState",enabled:!0,phase:"write",fn:({state:c})=>{const l=Xk(c);Object.assign(o.value,l)},requires:["computeStyles"]},i=ge(()=>{const{onFirstUpdate:c,placement:l,strategy:u,modifiers:f}=z(t);return{onFirstUpdate:c,placement:l||"bottom",strategy:u||"absolute",modifiers:[...f||[],r,{name:"applyStyles",enabled:!1}]}}),s=kl(),o=Ee({styles:{popper:{position:z(i).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),a=()=>{s.value&&(s.value.destroy(),s.value=void 0)};return Jt(i,c=>{const l=z(s);l&&l.setOptions(c)},{deep:!0}),Jt([n,e],([c,l])=>{a(),!(!c||!l)&&(s.value=qk(c,l,z(i)))}),Go(()=>{a()}),{state:ge(()=>{var c;return{...((c=z(s))==null?void 0:c.state)||{}}}),styles:ge(()=>z(o).styles),attributes:ge(()=>z(o).attributes),update:()=>{var c;return(c=z(s))==null?void 0:c.update()},forceUpdate:()=>{var c;return(c=z(s))==null?void 0:c.forceUpdate()},instanceRef:ge(()=>z(s))}};function Xk(n){const e=Object.keys(n.elements),t=mv(e.map(i=>[i,n.styles[i]||{}])),r=mv(e.map(i=>[i,n.attributes[i]]));return{styles:t,attributes:r}}function _w(){let n;const e=(r,i)=>{t(),n=window.setTimeout(r,i)},t=()=>window.clearTimeout(n);return yP(()=>t()),{registerTimeout:e,cancelTimeout:t}}let bw;const lT=()=>{const n=_P(),e=nP(),t=ge(()=>`${n.value}-popper-container-${e.prefix}`),r=ge(()=>`#${t.value}`);return{id:t,selector:r}},Kk=n=>{const e=document.createElement("div");return e.id=n,document.body.appendChild(e),e},Yk=()=>{const{id:n,selector:e}=lT();return vS(()=>{ga&&!bw&&!document.body.querySelector(e.value)&&(bw=Kk(n.value))}),{id:n,selector:e}},Qk=Lr({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),Zk=({showAfter:n,hideAfter:e,autoClose:t,open:r,close:i})=>{const{registerTimeout:s}=_w(),{registerTimeout:o,cancelTimeout:a}=_w();return{onOpen:u=>{s(()=>{r(u);const f=z(t);Gf(f)&&f>0&&o(()=>{i(u)},f)},z(n))},onClose:u=>{a(),s(()=>{i(u)},z(e))}}},uT=Symbol("elForwardRef"),Jk=n=>{Po(uT,{setForwardRef:t=>{n.value=t}})},eD=n=>({mounted(e){n(e)},updated(e){n(e)},unmounted(){n(null)}});function tD(n){const e=Ee();function t(){if(n.value==null)return;const{selectionStart:i,selectionEnd:s,value:o}=n.value;if(i==null||s==null)return;const a=o.slice(0,Math.max(0,i)),c=o.slice(Math.max(0,s));e.value={selectionStart:i,selectionEnd:s,value:o,beforeTxt:a,afterTxt:c}}function r(){if(n.value==null||e.value==null)return;const{value:i}=n.value,{beforeTxt:s,afterTxt:o,selectionStart:a}=e.value;if(s==null||o==null||a==null)return;let c=i.length;if(i.endsWith(o))c=i.length-o.length;else if(i.startsWith(s))c=s.length;else{const l=s[a-1],u=i.indexOf(l,a-1);u!==-1&&(c=u+1)}n.value.setSelectionRange(c,c)}return[t,r]}function nD(n,{afterFocus:e,afterBlur:t}={}){const r=Uc(),{emit:i}=r,s=kl(),o=Ee(!1),a=u=>{o.value||(o.value=!0,i("focus",u),e==null||e())},c=u=>{var f;u.relatedTarget&&((f=s.value)!=null&&f.contains(u.relatedTarget))||(o.value=!1,i("blur",u),t==null||t())},l=()=>{var u;(u=n.value)==null||u.focus()};return Jt(s,u=>{u&&u.setAttribute("tabindex","-1")}),bP(s,"click",l),{wrapperRef:s,isFocused:o,handleFocus:a,handleBlur:c}}const Du=Symbol("formContextKey"),bc=Symbol("formItemContextKey"),tu=(n,e={})=>{const t=Ee(void 0),r=e.prop?t:QS("size"),i=e.global?t:xP(),s=e.form?{size:void 0}:Ln(Du,void 0),o=e.formItem?{size:void 0}:Ln(bc,void 0);return ge(()=>r.value||z(n)||(o==null?void 0:o.size)||(s==null?void 0:s.size)||i.value||"")},Vm=n=>{const e=QS("disabled"),t=Ln(Du,void 0);return ge(()=>e.value||z(n)||(t==null?void 0:t.disabled)||!1)},Bd=()=>{const n=Ln(Du,void 0),e=Ln(bc,void 0);return{form:n,formItem:e}},G_=(n,{formItemContext:e,disableIdGeneration:t,disableIdManagement:r})=>{t||(t=Ee(!1)),r||(r=Ee(!1));const i=Ee();let s;const o=ge(()=>{var a;return!!(!n.label&&e&&e.inputIds&&((a=e.inputIds)==null?void 0:a.length)<=1)});return xr(()=>{s=Jt([Is(n,"id"),t],([a,c])=>{const l=a??(c?void 0:v_().value);l!==i.value&&(e!=null&&e.removeInputId&&(i.value&&e.removeInputId(i.value),!(r!=null&&r.value)&&!c&&l&&e.addInputId(l)),i.value=l)},{immediate:!0})}),gp(()=>{s&&s(),e!=null&&e.removeInputId&&i.value&&e.removeInputId(i.value)}),{isLabeledByFormItem:o,inputId:i}},rD=Lr({size:{type:String,values:ES},disabled:Boolean}),iD=Lr({...rD,model:Object,rules:{type:on(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),sD={validate:(n,e,t)=>(_c(n)||ks(n))&&yc(e)&&ks(t)};function oD(){const n=Ee([]),e=ge(()=>{if(!n.value.length)return"0";const s=Math.max(...n.value);return s?`${s}px`:""});function t(s){const o=n.value.indexOf(s);return o===-1&&e.value,o}function r(s,o){if(s&&o){const a=t(o);n.value.splice(a,1,s)}else s&&n.value.push(s)}function i(s){const o=t(s);o>-1&&n.value.splice(o,1)}return{autoLabelWidth:e,registerLabelWidth:r,deregisterLabelWidth:i}}const nh=(n,e)=>{const t=yv(e);return t.length>0?n.filter(r=>r.prop&&t.includes(r.prop)):n},aD="ElForm",cD=gt({name:aD}),lD=gt({...cD,props:iD,emits:sD,setup(n,{expose:e,emit:t}){const r=n,i=[],s=tu(),o=_r("form"),a=ge(()=>{const{labelPosition:w,inline:S}=r;return[o.b(),o.m(s.value||"default"),{[o.m(`label-${w}`)]:w,[o.m("inline")]:S}]}),c=w=>{i.push(w)},l=w=>{w.prop&&i.splice(i.indexOf(w),1)},u=(w=[])=>{r.model&&nh(i,w).forEach(S=>S.resetField())},f=(w=[])=>{nh(i,w).forEach(S=>S.clearValidate())},d=ge(()=>!!r.model),p=w=>{if(i.length===0)return[];const S=nh(i,w);return S.length?S:[]},v=async w=>y(void 0,w),m=async(w=[])=>{if(!d.value)return!1;const S=p(w);if(S.length===0)return!0;let T={};for(const C of S)try{await C.validate("")}catch(B){T={...T,...B}}return Object.keys(T).length===0?!0:Promise.reject(T)},y=async(w=[],S)=>{const T=!Tl(S);try{const C=await m(w);return C===!0&&(S==null||S(C)),C}catch(C){if(C instanceof Error)throw C;const B=C;return r.scrollToError&&h(Object.keys(B)[0]),S==null||S(!1,B),T&&Promise.reject(B)}},h=w=>{var S;const T=nh(i,w)[0];T&&((S=T.$el)==null||S.scrollIntoView(r.scrollIntoViewOptions))};return Jt(()=>r.rules,()=>{r.validateOnRuleChange&&v().catch(w=>zf())},{deep:!0}),Po(Du,Fc({...Um(r),emit:t,resetFields:u,clearValidate:f,validateField:y,addField:c,removeField:l,...oD()})),e({validate:v,validateField:y,resetFields:u,clearValidate:f,scrollToField:h}),(w,S)=>(Pe(),Ye("form",{class:st(z(a))},[Bn(w.$slots,"default")],2))}});var uD=kr(lD,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form.vue"]]);function ec(){return ec=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ec.apply(this,arguments)}function fD(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Xf(n,e)}function Ev(n){return Ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ev(n)}function Xf(n,e){return Xf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Xf(n,e)}function dD(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Wh(n,e,t){return dD()?Wh=Reflect.construct.bind():Wh=function(i,s,o){var a=[null];a.push.apply(a,s);var c=Function.bind.apply(i,a),l=new c;return o&&Xf(l,o.prototype),l},Wh.apply(null,arguments)}function hD(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Sv(n){var e=typeof Map=="function"?new Map:void 0;return Sv=function(r){if(r===null||!hD(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return Wh(r,arguments,Ev(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Xf(i,r)},Sv(n)}var pD=/%[sdj%]/g,mD=function(){};typeof process<"u"&&process.env;function Tv(n){if(!n||!n.length)return null;var e={};return n.forEach(function(t){var r=t.field;e[r]=e[r]||[],e[r].push(t)}),e}function ci(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var i=0,s=t.length;if(typeof n=="function")return n.apply(null,t);if(typeof n=="string"){var o=n.replace(pD,function(a){if(a==="%%")return"%";if(i>=s)return a;switch(a){case"%s":return String(t[i++]);case"%d":return Number(t[i++]);case"%j":try{return JSON.stringify(t[i++])}catch{return"[Circular]"}break;default:return a}});return o}return n}function gD(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function Kn(n,e){return!!(n==null||e==="array"&&Array.isArray(n)&&!n.length||gD(e)&&typeof n=="string"&&!n)}function vD(n,e,t){var r=[],i=0,s=n.length;function o(a){r.push.apply(r,a||[]),i++,i===s&&t(r)}n.forEach(function(a){e(a,o)})}function xw(n,e,t){var r=0,i=n.length;function s(o){if(o&&o.length){t(o);return}var a=r;r=r+1,a<i?e(n[a],s):t([])}s([])}function yD(n){var e=[];return Object.keys(n).forEach(function(t){e.push.apply(e,n[t]||[])}),e}var ww=function(n){fD(e,n);function e(t,r){var i;return i=n.call(this,"Async Validation Error")||this,i.errors=t,i.fields=r,i}return e}(Sv(Error));function _D(n,e,t,r,i){if(e.first){var s=new Promise(function(d,p){var v=function(h){return r(h),h.length?p(new ww(h,Tv(h))):d(i)},m=yD(n);xw(m,t,v)});return s.catch(function(d){return d}),s}var o=e.firstFields===!0?Object.keys(n):e.firstFields||[],a=Object.keys(n),c=a.length,l=0,u=[],f=new Promise(function(d,p){var v=function(y){if(u.push.apply(u,y),l++,l===c)return r(u),u.length?p(new ww(u,Tv(u))):d(i)};a.length||(r(u),d(i)),a.forEach(function(m){var y=n[m];o.indexOf(m)!==-1?xw(y,t,v):vD(y,t,v)})});return f.catch(function(d){return d}),f}function bD(n){return!!(n&&n.message!==void 0)}function xD(n,e){for(var t=n,r=0;r<e.length;r++){if(t==null)return t;t=t[e[r]]}return t}function Aw(n,e){return function(t){var r;return n.fullFields?r=xD(e,n.fullFields):r=e[t.field||n.fullField],bD(t)?(t.field=t.field||n.fullField,t.fieldValue=r,t):{message:typeof t=="function"?t():t,fieldValue:r,field:t.field||n.fullField}}}function Ew(n,e){if(e){for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];typeof r=="object"&&typeof n[t]=="object"?n[t]=ec({},n[t],r):n[t]=r}}return n}var fT=function(e,t,r,i,s,o){e.required&&(!r.hasOwnProperty(e.field)||Kn(t,o||e.type))&&i.push(ci(s.messages.required,e.fullField))},wD=function(e,t,r,i,s){(/^\s+$/.test(t)||t==="")&&i.push(ci(s.messages.whitespace,e.fullField))},rh,AD=function(){if(rh)return rh;var n="[a-fA-F\\d:]",e=function(T){return T&&T.includeBoundaries?"(?:(?<=\\s|^)(?="+n+")|(?<="+n+")(?=\\s|$))":""},t="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",i=(`
(?:
(?:`+r+":){7}(?:"+r+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+r+":){6}(?:"+t+"|:"+r+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+r+":){5}(?::"+t+"|(?::"+r+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+r+":){4}(?:(?::"+r+"){0,1}:"+t+"|(?::"+r+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+r+":){3}(?:(?::"+r+"){0,2}:"+t+"|(?::"+r+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+r+":){2}(?:(?::"+r+"){0,3}:"+t+"|(?::"+r+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+r+":){1}(?:(?::"+r+"){0,4}:"+t+"|(?::"+r+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+r+"){0,5}:"+t+"|(?::"+r+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp("(?:^"+t+"$)|(?:^"+i+"$)"),o=new RegExp("^"+t+"$"),a=new RegExp("^"+i+"$"),c=function(T){return T&&T.exact?s:new RegExp("(?:"+e(T)+t+e(T)+")|(?:"+e(T)+i+e(T)+")","g")};c.v4=function(S){return S&&S.exact?o:new RegExp(""+e(S)+t+e(S),"g")},c.v6=function(S){return S&&S.exact?a:new RegExp(""+e(S)+i+e(S),"g")};var l="(?:(?:[a-z]+:)?//)",u="(?:\\S+(?::\\S*)?@)?",f=c.v4().source,d=c.v6().source,p="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",v="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",m="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",y="(?::\\d{2,5})?",h='(?:[/?#][^\\s"]*)?',w="(?:"+l+"|www\\.)"+u+"(?:localhost|"+f+"|"+d+"|"+p+v+m+")"+y+h;return rh=new RegExp("(?:^"+w+"$)","i"),rh},Sw={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},bf={integer:function(e){return bf.number(e)&&parseInt(e,10)===e},float:function(e){return bf.number(e)&&!bf.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!bf.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(Sw.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(AD())},hex:function(e){return typeof e=="string"&&!!e.match(Sw.hex)}},ED=function(e,t,r,i,s){if(e.required&&t===void 0){fT(e,t,r,i,s);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],a=e.type;o.indexOf(a)>-1?bf[a](t)||i.push(ci(s.messages.types[a],e.fullField,e.type)):a&&typeof t!==e.type&&i.push(ci(s.messages.types[a],e.fullField,e.type))},SD=function(e,t,r,i,s){var o=typeof e.len=="number",a=typeof e.min=="number",c=typeof e.max=="number",l=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=t,f=null,d=typeof t=="number",p=typeof t=="string",v=Array.isArray(t);if(d?f="number":p?f="string":v&&(f="array"),!f)return!1;v&&(u=t.length),p&&(u=t.replace(l,"_").length),o?u!==e.len&&i.push(ci(s.messages[f].len,e.fullField,e.len)):a&&!c&&u<e.min?i.push(ci(s.messages[f].min,e.fullField,e.min)):c&&!a&&u>e.max?i.push(ci(s.messages[f].max,e.fullField,e.max)):a&&c&&(u<e.min||u>e.max)&&i.push(ci(s.messages[f].range,e.fullField,e.min,e.max))},Xc="enum",TD=function(e,t,r,i,s){e[Xc]=Array.isArray(e[Xc])?e[Xc]:[],e[Xc].indexOf(t)===-1&&i.push(ci(s.messages[Xc],e.fullField,e[Xc].join(", ")))},MD=function(e,t,r,i,s){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||i.push(ci(s.messages.pattern.mismatch,e.fullField,t,e.pattern));else if(typeof e.pattern=="string"){var o=new RegExp(e.pattern);o.test(t)||i.push(ci(s.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},Lt={required:fT,whitespace:wD,type:ED,range:SD,enum:TD,pattern:MD},RD=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(Kn(t,"string")&&!e.required)return r();Lt.required(e,t,i,o,s,"string"),Kn(t,"string")||(Lt.type(e,t,i,o,s),Lt.range(e,t,i,o,s),Lt.pattern(e,t,i,o,s),e.whitespace===!0&&Lt.whitespace(e,t,i,o,s))}r(o)},ID=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(Kn(t)&&!e.required)return r();Lt.required(e,t,i,o,s),t!==void 0&&Lt.type(e,t,i,o,s)}r(o)},CD=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(t===""&&(t=void 0),Kn(t)&&!e.required)return r();Lt.required(e,t,i,o,s),t!==void 0&&(Lt.type(e,t,i,o,s),Lt.range(e,t,i,o,s))}r(o)},PD=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(Kn(t)&&!e.required)return r();Lt.required(e,t,i,o,s),t!==void 0&&Lt.type(e,t,i,o,s)}r(o)},ND=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(Kn(t)&&!e.required)return r();Lt.required(e,t,i,o,s),Kn(t)||Lt.type(e,t,i,o,s)}r(o)},BD=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(Kn(t)&&!e.required)return r();Lt.required(e,t,i,o,s),t!==void 0&&(Lt.type(e,t,i,o,s),Lt.range(e,t,i,o,s))}r(o)},LD=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(Kn(t)&&!e.required)return r();Lt.required(e,t,i,o,s),t!==void 0&&(Lt.type(e,t,i,o,s),Lt.range(e,t,i,o,s))}r(o)},kD=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(t==null&&!e.required)return r();Lt.required(e,t,i,o,s,"array"),t!=null&&(Lt.type(e,t,i,o,s),Lt.range(e,t,i,o,s))}r(o)},DD=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(Kn(t)&&!e.required)return r();Lt.required(e,t,i,o,s),t!==void 0&&Lt.type(e,t,i,o,s)}r(o)},OD="enum",UD=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(Kn(t)&&!e.required)return r();Lt.required(e,t,i,o,s),t!==void 0&&Lt[OD](e,t,i,o,s)}r(o)},FD=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(Kn(t,"string")&&!e.required)return r();Lt.required(e,t,i,o,s),Kn(t,"string")||Lt.pattern(e,t,i,o,s)}r(o)},HD=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(Kn(t,"date")&&!e.required)return r();if(Lt.required(e,t,i,o,s),!Kn(t,"date")){var c;t instanceof Date?c=t:c=new Date(t),Lt.type(e,c,i,o,s),c&&Lt.range(e,c.getTime(),i,o,s)}}r(o)},zD=function(e,t,r,i,s){var o=[],a=Array.isArray(t)?"array":typeof t;Lt.required(e,t,i,o,s,a),r(o)},H0=function(e,t,r,i,s){var o=e.type,a=[],c=e.required||!e.required&&i.hasOwnProperty(e.field);if(c){if(Kn(t,o)&&!e.required)return r();Lt.required(e,t,i,a,s,o),Kn(t,o)||Lt.type(e,t,i,a,s)}r(a)},GD=function(e,t,r,i,s){var o=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(Kn(t)&&!e.required)return r();Lt.required(e,t,i,o,s)}r(o)},Cf={string:RD,method:ID,number:CD,boolean:PD,regexp:ND,integer:BD,float:LD,array:kD,object:DD,enum:UD,pattern:FD,date:HD,url:H0,hex:H0,email:H0,required:zD,any:GD};function Mv(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var Rv=Mv(),Ld=function(){function n(t){this.rules=null,this._messages=Rv,this.define(t)}var e=n.prototype;return e.define=function(r){var i=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(typeof r!="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(s){var o=r[s];i.rules[s]=Array.isArray(o)?o:[o]})},e.messages=function(r){return r&&(this._messages=Ew(Mv(),r)),this._messages},e.validate=function(r,i,s){var o=this;i===void 0&&(i={}),s===void 0&&(s=function(){});var a=r,c=i,l=s;if(typeof c=="function"&&(l=c,c={}),!this.rules||Object.keys(this.rules).length===0)return l&&l(null,a),Promise.resolve(a);function u(m){var y=[],h={};function w(T){if(Array.isArray(T)){var C;y=(C=y).concat.apply(C,T)}else y.push(T)}for(var S=0;S<m.length;S++)w(m[S]);y.length?(h=Tv(y),l(y,h)):l(null,a)}if(c.messages){var f=this.messages();f===Rv&&(f=Mv()),Ew(f,c.messages),c.messages=f}else c.messages=this.messages();var d={},p=c.keys||Object.keys(this.rules);p.forEach(function(m){var y=o.rules[m],h=a[m];y.forEach(function(w){var S=w;typeof S.transform=="function"&&(a===r&&(a=ec({},a)),h=a[m]=S.transform(h)),typeof S=="function"?S={validator:S}:S=ec({},S),S.validator=o.getValidationMethod(S),S.validator&&(S.field=m,S.fullField=S.fullField||m,S.type=o.getType(S),d[m]=d[m]||[],d[m].push({rule:S,value:h,source:a,field:m}))})});var v={};return _D(d,c,function(m,y){var h=m.rule,w=(h.type==="object"||h.type==="array")&&(typeof h.fields=="object"||typeof h.defaultField=="object");w=w&&(h.required||!h.required&&m.value),h.field=m.field;function S(B,O){return ec({},O,{fullField:h.fullField+"."+B,fullFields:h.fullFields?[].concat(h.fullFields,[B]):[B]})}function T(B){B===void 0&&(B=[]);var O=Array.isArray(B)?B:[B];!c.suppressWarning&&O.length&&n.warning("async-validator:",O),O.length&&h.message!==void 0&&(O=[].concat(h.message));var P=O.map(Aw(h,a));if(c.first&&P.length)return v[h.field]=1,y(P);if(!w)y(P);else{if(h.required&&!m.value)return h.message!==void 0?P=[].concat(h.message).map(Aw(h,a)):c.error&&(P=[c.error(h,ci(c.messages.required,h.field))]),y(P);var N={};h.defaultField&&Object.keys(m.value).map(function(q){N[q]=h.defaultField}),N=ec({},N,m.rule.fields);var I={};Object.keys(N).forEach(function(q){var M=N[q],g=Array.isArray(M)?M:[M];I[q]=g.map(S.bind(null,q))});var U=new n(I);U.messages(c.messages),m.rule.options&&(m.rule.options.messages=c.messages,m.rule.options.error=c.error),U.validate(m.value,m.rule.options||c,function(q){var M=[];P&&P.length&&M.push.apply(M,P),q&&q.length&&M.push.apply(M,q),y(M.length?M:null)})}}var C;if(h.asyncValidator)C=h.asyncValidator(h,m.value,T,m.source,c);else if(h.validator){try{C=h.validator(h,m.value,T,m.source,c)}catch(B){console.error==null,c.suppressValidatorError||setTimeout(function(){throw B},0),T(B.message)}C===!0?T():C===!1?T(typeof h.message=="function"?h.message(h.fullField||h.field):h.message||(h.fullField||h.field)+" fails"):C instanceof Array?T(C):C instanceof Error&&T(C.message)}C&&C.then&&C.then(function(){return T()},function(B){return T(B)})},function(m){u(m)},a)},e.getType=function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!Cf.hasOwnProperty(r.type))throw new Error(ci("Unknown rule type %s",r.type));return r.type||"string"},e.getValidationMethod=function(r){if(typeof r.validator=="function")return r.validator;var i=Object.keys(r),s=i.indexOf("message");return s!==-1&&i.splice(s,1),i.length===1&&i[0]==="required"?Cf.required:Cf[this.getType(r)]||void 0},n}();Ld.register=function(e,t){if(typeof t!="function")throw new Error("Cannot register a validator by type, validator is not a function");Cf[e]=t};Ld.warning=mD;Ld.messages=Rv;Ld.validators=Cf;const VD=["","error","validating","success"],WD=Lr({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:on([String,Array])},required:{type:Boolean,default:void 0},rules:{type:on([Object,Array])},error:String,validateStatus:{type:String,values:VD},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:ES}}),Tw="ElLabelWrap";var jD=gt({name:Tw,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(n,{slots:e}){const t=Ln(Du,void 0),r=Ln(bc);r||rP(Tw,"usage: <el-form-item><label-wrap /></el-form-item>");const i=_r("form"),s=Ee(),o=Ee(0),a=()=>{var u;if((u=s.value)!=null&&u.firstElementChild){const f=window.getComputedStyle(s.value.firstElementChild).width;return Math.ceil(Number.parseFloat(f))}else return 0},c=(u="update")=>{nr(()=>{e.default&&n.isAutoWidth&&(u==="update"?o.value=a():u==="remove"&&(t==null||t.deregisterLabelWidth(o.value)))})},l=()=>c("update");return xr(()=>{l()}),Go(()=>{c("remove")}),wP(()=>l()),Jt(o,(u,f)=>{n.updateAll&&(t==null||t.registerLabelWidth(u,f))}),SS(ge(()=>{var u,f;return(f=(u=s.value)==null?void 0:u.firstElementChild)!=null?f:null}),l),()=>{var u,f;if(!e)return null;const{isAutoWidth:d}=n;if(d){const p=t==null?void 0:t.autoLabelWidth,v=r==null?void 0:r.hasLabel,m={};if(v&&p&&p!=="auto"){const y=Math.max(0,Number.parseInt(p,10)-o.value),h=t.labelPosition==="left"?"marginRight":"marginLeft";y&&(m[h]=`${y}px`)}return Vt("div",{ref:s,class:[i.be("item","label-wrap")],style:m},[(u=e.default)==null?void 0:u.call(e)])}else return Vt(Ii,{ref:s},[(f=e.default)==null?void 0:f.call(e)])}}});const qD=["role","aria-labelledby"],$D=gt({name:"ElFormItem"}),XD=gt({...$D,props:WD,setup(n,{expose:e}){const t=n,r=Cd(),i=Ln(Du,void 0),s=Ln(bc,void 0),o=tu(void 0,{formItem:!1}),a=_r("form-item"),c=v_().value,l=Ee([]),u=Ee(""),f=AP(u,100),d=Ee(""),p=Ee();let v,m=!1;const y=ge(()=>{if((i==null?void 0:i.labelPosition)==="top")return{};const V=kx(t.labelWidth||(i==null?void 0:i.labelWidth)||"");return V?{width:V}:{}}),h=ge(()=>{if((i==null?void 0:i.labelPosition)==="top"||i!=null&&i.inline)return{};if(!t.label&&!t.labelWidth&&N)return{};const V=kx(t.labelWidth||(i==null?void 0:i.labelWidth)||"");return!t.label&&!r.label?{marginLeft:V}:{}}),w=ge(()=>[a.b(),a.m(o.value),a.is("error",u.value==="error"),a.is("validating",u.value==="validating"),a.is("success",u.value==="success"),a.is("required",g.value||t.required),a.is("no-asterisk",i==null?void 0:i.hideRequiredAsterisk),(i==null?void 0:i.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[a.m("feedback")]:i==null?void 0:i.statusIcon}]),S=ge(()=>yc(t.inlineMessage)?t.inlineMessage:(i==null?void 0:i.inlineMessage)||!1),T=ge(()=>[a.e("error"),{[a.em("error","inline")]:S.value}]),C=ge(()=>t.prop?ks(t.prop)?t.prop:t.prop.join("."):""),B=ge(()=>!!(t.label||r.label)),O=ge(()=>t.for||l.value.length===1?l.value[0]:void 0),P=ge(()=>!O.value&&B.value),N=!!s,I=ge(()=>{const V=i==null?void 0:i.model;if(!(!V||!t.prop))return O0(V,t.prop).value}),U=ge(()=>{const{required:V}=t,$=[];t.rules&&$.push(...yv(t.rules));const ee=i==null?void 0:i.rules;if(ee&&t.prop){const he=O0(ee,t.prop).value;he&&$.push(...yv(he))}if(V!==void 0){const he=$.map((pe,de)=>[pe,de]).filter(([pe])=>Object.keys(pe).includes("required"));if(he.length>0)for(const[pe,de]of he)pe.required!==V&&($[de]={...pe,required:V});else $.push({required:V})}return $}),q=ge(()=>U.value.length>0),M=V=>U.value.filter(ee=>!ee.trigger||!V?!0:Array.isArray(ee.trigger)?ee.trigger.includes(V):ee.trigger===V).map(({trigger:ee,...he})=>he),g=ge(()=>U.value.some(V=>V.required)),_=ge(()=>{var V;return f.value==="error"&&t.showMessage&&((V=i==null?void 0:i.showMessage)!=null?V:!0)}),b=ge(()=>`${t.label||""}${(i==null?void 0:i.labelSuffix)||""}`),E=V=>{u.value=V},R=V=>{var $,ee;const{errors:he,fields:pe}=V;E("error"),d.value=he?(ee=($=he==null?void 0:he[0])==null?void 0:$.message)!=null?ee:`${t.prop} is required`:"",i==null||i.emit("validate",t.prop,!1,d.value)},L=()=>{E("success"),i==null||i.emit("validate",t.prop,!0,"")},G=async V=>{const $=C.value;return new Ld({[$]:V}).validate({[$]:I.value},{firstFields:!0}).then(()=>(L(),!0)).catch(he=>(R(he),Promise.reject(he)))},k=async(V,$)=>{if(m||!t.prop)return!1;const ee=Tl($);if(!q.value)return $==null||$(!1),!1;const he=M(V);return he.length===0?($==null||$(!0),!0):(E("validating"),G(he).then(()=>($==null||$(!0),!0)).catch(pe=>{const{fields:de}=pe;return $==null||$(!1,de),ee?!1:Promise.reject(de)}))},x=()=>{E(""),d.value="",m=!1},F=async()=>{const V=i==null?void 0:i.model;if(!V||!t.prop)return;const $=O0(V,t.prop);m=!0,$.value=sw(v),await nr(),x(),m=!1},K=V=>{l.value.includes(V)||l.value.push(V)},A=V=>{l.value=l.value.filter($=>$!==V)};Jt(()=>t.error,V=>{d.value=V||"",E(V?"error":"")},{immediate:!0}),Jt(()=>t.validateStatus,V=>E(V||""));const X=Fc({...Um(t),$el:p,size:o,validateState:u,labelId:c,inputIds:l,isGroup:P,hasLabel:B,addInputId:K,removeInputId:A,resetField:F,clearValidate:x,validate:k});return Po(bc,X),xr(()=>{t.prop&&(i==null||i.addField(X),v=sw(I.value))}),Go(()=>{i==null||i.removeField(X)}),e({size:o,validateMessage:d,validateState:u,validate:k,clearValidate:x,resetField:F}),(V,$)=>{var ee;return Pe(),Ye("div",{ref_key:"formItemRef",ref:p,class:st(z(w)),role:z(P)?"group":void 0,"aria-labelledby":z(P)?z(c):void 0},[Vt(z(jD),{"is-auto-width":z(y).width==="auto","update-all":((ee=z(i))==null?void 0:ee.labelWidth)==="auto"},{default:Zt(()=>[z(B)?(Pe(),wn(Cs(z(O)?"label":"div"),{key:0,id:z(c),for:z(O),class:st(z(a).e("label")),style:wa(z(y))},{default:Zt(()=>[Bn(V.$slots,"label",{label:z(b)},()=>[Aa(Ft(z(b)),1)])]),_:3},8,["id","for","class","style"])):Ut("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),Q("div",{class:st(z(a).e("content")),style:wa(z(h))},[Bn(V.$slots,"default"),Vt(EP,{name:`${z(a).namespace.value}-zoom-in-top`},{default:Zt(()=>[z(_)?Bn(V.$slots,"error",{key:0,error:d.value},()=>[Q("div",{class:st(z(T))},Ft(d.value),3)]):Ut("v-if",!0)]),_:3},8,["name"])],6)],10,qD)}}});var dT=kr(XD,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form-item.vue"]]);const KD=Lu(uD,{FormItem:dT}),YD=Fm(dT);let Fi;const QD=`
  height:0 !important;
  visibility:hidden !important;
  ${QP()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,ZD=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function JD(n){const e=window.getComputedStyle(n),t=e.getPropertyValue("box-sizing"),r=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),i=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:ZD.map(o=>`${o}:${e.getPropertyValue(o)}`).join(";"),paddingSize:r,borderSize:i,boxSizing:t}}function Mw(n,e=1,t){var r;Fi||(Fi=document.createElement("textarea"),document.body.appendChild(Fi));const{paddingSize:i,borderSize:s,boxSizing:o,contextStyle:a}=JD(n);Fi.setAttribute("style",`${a};${QD}`),Fi.value=n.value||n.placeholder||"";let c=Fi.scrollHeight;const l={};o==="border-box"?c=c+s:o==="content-box"&&(c=c-i),Fi.value="";const u=Fi.scrollHeight-i;if(Gf(e)){let f=u*e;o==="border-box"&&(f=f+i+s),c=Math.max(f,c),l.minHeight=`${f}px`}if(Gf(t)){let f=u*t;o==="border-box"&&(f=f+i+s),c=Math.min(f,c)}return l.height=`${c}px`,(r=Fi.parentNode)==null||r.removeChild(Fi),Fi=void 0,l}const eO=Lr({id:{type:String,default:void 0},size:Hm,disabled:Boolean,modelValue:{type:on([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:on([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:yp},prefixIcon:{type:yp},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:on([Object,Array,String]),default:()=>SP({})}}),tO={[gc]:n=>ks(n),input:n=>ks(n),change:n=>ks(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,mouseleave:n=>n instanceof MouseEvent,mouseenter:n=>n instanceof MouseEvent,keydown:n=>n instanceof Event,compositionstart:n=>n instanceof CompositionEvent,compositionupdate:n=>n instanceof CompositionEvent,compositionend:n=>n instanceof CompositionEvent},nO=["role"],rO=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],iO=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],sO=gt({name:"ElInput",inheritAttrs:!1}),oO=gt({...sO,props:eO,emits:tO,setup(n,{expose:e,emit:t}){const r=n,i=TP(),s=Cd(),o=ge(()=>{const Z={};return r.containerRole==="combobox"&&(Z["aria-haspopup"]=i["aria-haspopup"],Z["aria-owns"]=i["aria-owns"],Z["aria-expanded"]=i["aria-expanded"]),Z}),a=ge(()=>[r.type==="textarea"?y.b():m.b(),m.m(p.value),m.is("disabled",v.value),m.is("exceed",K.value),{[m.b("group")]:s.prepend||s.append,[m.bm("group","append")]:s.append,[m.bm("group","prepend")]:s.prepend,[m.m("prefix")]:s.prefix||r.prefixIcon,[m.m("suffix")]:s.suffix||r.suffixIcon||r.clearable||r.showPassword,[m.bm("suffix","password-clear")]:G.value&&k.value},i.class]),c=ge(()=>[m.e("wrapper"),m.is("focus",I.value)]),l=GL({excludeKeys:ge(()=>Object.keys(o.value))}),{form:u,formItem:f}=Bd(),{inputId:d}=G_(r,{formItemContext:f}),p=tu(),v=Vm(),m=_r("input"),y=_r("textarea"),h=kl(),w=kl(),S=Ee(!1),T=Ee(!1),C=Ee(!1),B=Ee(),O=kl(r.inputStyle),P=ge(()=>h.value||w.value),{wrapperRef:N,isFocused:I,handleFocus:U,handleBlur:q}=nD(P,{afterBlur(){var Z;r.validateEvent&&((Z=f==null?void 0:f.validate)==null||Z.call(f,"blur").catch(ne=>zf()))}}),M=ge(()=>{var Z;return(Z=u==null?void 0:u.statusIcon)!=null?Z:!1}),g=ge(()=>(f==null?void 0:f.validateState)||""),_=ge(()=>g.value&&MP[g.value]),b=ge(()=>C.value?RP:IP),E=ge(()=>[i.style,r.inputStyle]),R=ge(()=>[r.inputStyle,O.value,{resize:r.resize}]),L=ge(()=>y_(r.modelValue)?"":String(r.modelValue)),G=ge(()=>r.clearable&&!v.value&&!r.readonly&&!!L.value&&(I.value||S.value)),k=ge(()=>r.showPassword&&!v.value&&!r.readonly&&!!L.value&&(!!L.value||I.value)),x=ge(()=>r.showWordLimit&&!!l.value.maxlength&&(r.type==="text"||r.type==="textarea")&&!v.value&&!r.readonly&&!r.showPassword),F=ge(()=>L.value.length),K=ge(()=>!!x.value&&F.value>Number(l.value.maxlength)),A=ge(()=>!!s.suffix||!!r.suffixIcon||G.value||r.showPassword||x.value||!!g.value&&M.value),[X,V]=tD(h);SS(w,Z=>{if(he(),!x.value||r.resize!=="both")return;const ne=Z[0],{width:me}=ne.contentRect;B.value={right:`calc(100% - ${me+15+6}px)`}});const $=()=>{const{type:Z,autosize:ne}=r;if(!(!ga||Z!=="textarea"||!w.value))if(ne){const me=Xl(ne)?ne.minRows:void 0,Re=Xl(ne)?ne.maxRows:void 0,we=Mw(w.value,me,Re);O.value={overflowY:"hidden",...we},nr(()=>{w.value.offsetHeight,O.value=we})}else O.value={minHeight:Mw(w.value).minHeight}},he=(Z=>{let ne=!1;return()=>{var me;if(ne||!r.autosize)return;((me=w.value)==null?void 0:me.offsetParent)===null||(Z(),ne=!0)}})($),pe=()=>{const Z=P.value,ne=r.formatter?r.formatter(L.value):L.value;!Z||Z.value===ne||(Z.value=ne)},de=async Z=>{X();let{value:ne}=Z.target;if(r.formatter&&(ne=r.parser?r.parser(ne):ne),!T.value){if(ne===L.value){pe();return}t(gc,ne),t("input",ne),await nr(),pe(),V()}},Fe=Z=>{t("change",Z.target.value)},j=Z=>{t("compositionstart",Z),T.value=!0},Ue=Z=>{var ne;t("compositionupdate",Z);const me=(ne=Z.target)==null?void 0:ne.value,Re=me[me.length-1]||"";T.value=!FL(Re)},et=Z=>{t("compositionend",Z),T.value&&(T.value=!1,de(Z))},Ve=()=>{C.value=!C.value,Ie()},Ie=async()=>{var Z;await nr(),(Z=P.value)==null||Z.focus()},Pt=()=>{var Z;return(Z=P.value)==null?void 0:Z.blur()},Se=Z=>{S.value=!1,t("mouseleave",Z)},W=Z=>{S.value=!0,t("mouseenter",Z)},D=Z=>{t("keydown",Z)},te=()=>{var Z;(Z=P.value)==null||Z.select()},ue=()=>{t(gc,""),t("change",""),t("clear"),t("input","")};return Jt(()=>r.modelValue,()=>{var Z;nr(()=>$()),r.validateEvent&&((Z=f==null?void 0:f.validate)==null||Z.call(f,"change").catch(ne=>zf()))}),Jt(L,()=>pe()),Jt(()=>r.type,async()=>{await nr(),pe(),$()}),xr(()=>{!r.formatter&&r.parser,pe(),nr($)}),e({input:h,textarea:w,ref:P,textareaStyle:R,autosize:Is(r,"autosize"),focus:Ie,blur:Pt,select:te,clear:ue,resizeTextarea:$}),(Z,ne)=>Pi((Pe(),Ye("div",lc(z(o),{class:z(a),style:z(E),role:Z.containerRole,onMouseenter:W,onMouseleave:Se}),[Ut(" input "),Z.type!=="textarea"?(Pe(),Ye(Ii,{key:0},[Ut(" prepend slot "),Z.$slots.prepend?(Pe(),Ye("div",{key:0,class:st(z(m).be("group","prepend"))},[Bn(Z.$slots,"prepend")],2)):Ut("v-if",!0),Q("div",{ref_key:"wrapperRef",ref:N,class:st(z(c))},[Ut(" prefix slot "),Z.$slots.prefix||Z.prefixIcon?(Pe(),Ye("span",{key:0,class:st(z(m).e("prefix"))},[Q("span",{class:st(z(m).e("prefix-inner"))},[Bn(Z.$slots,"prefix"),Z.prefixIcon?(Pe(),wn(z(Qa),{key:0,class:st(z(m).e("icon"))},{default:Zt(()=>[(Pe(),wn(Cs(Z.prefixIcon)))]),_:1},8,["class"])):Ut("v-if",!0)],2)],2)):Ut("v-if",!0),Q("input",lc({id:z(d),ref_key:"input",ref:h,class:z(m).e("inner")},z(l),{type:Z.showPassword?C.value?"text":"password":Z.type,disabled:z(v),formatter:Z.formatter,parser:Z.parser,readonly:Z.readonly,autocomplete:Z.autocomplete,tabindex:Z.tabindex,"aria-label":Z.label,placeholder:Z.placeholder,style:Z.inputStyle,form:r.form,onCompositionstart:j,onCompositionupdate:Ue,onCompositionend:et,onInput:de,onFocus:ne[0]||(ne[0]=(...me)=>z(U)&&z(U)(...me)),onBlur:ne[1]||(ne[1]=(...me)=>z(q)&&z(q)(...me)),onChange:Fe,onKeydown:D}),null,16,rO),Ut(" suffix slot "),z(A)?(Pe(),Ye("span",{key:1,class:st(z(m).e("suffix"))},[Q("span",{class:st(z(m).e("suffix-inner"))},[!z(G)||!z(k)||!z(x)?(Pe(),Ye(Ii,{key:0},[Bn(Z.$slots,"suffix"),Z.suffixIcon?(Pe(),wn(z(Qa),{key:0,class:st(z(m).e("icon"))},{default:Zt(()=>[(Pe(),wn(Cs(Z.suffixIcon)))]),_:1},8,["class"])):Ut("v-if",!0)],64)):Ut("v-if",!0),z(G)?(Pe(),wn(z(Qa),{key:1,class:st([z(m).e("icon"),z(m).e("clear")]),onMousedown:PP(z(_p),["prevent"]),onClick:ue},{default:Zt(()=>[Vt(z(CP))]),_:1},8,["class","onMousedown"])):Ut("v-if",!0),z(k)?(Pe(),wn(z(Qa),{key:2,class:st([z(m).e("icon"),z(m).e("password")]),onClick:Ve},{default:Zt(()=>[(Pe(),wn(Cs(z(b))))]),_:1},8,["class"])):Ut("v-if",!0),z(x)?(Pe(),Ye("span",{key:3,class:st(z(m).e("count"))},[Q("span",{class:st(z(m).e("count-inner"))},Ft(z(F))+" / "+Ft(z(l).maxlength),3)],2)):Ut("v-if",!0),z(g)&&z(_)&&z(M)?(Pe(),wn(z(Qa),{key:4,class:st([z(m).e("icon"),z(m).e("validateIcon"),z(m).is("loading",z(g)==="validating")])},{default:Zt(()=>[(Pe(),wn(Cs(z(_))))]),_:1},8,["class"])):Ut("v-if",!0)],2)],2)):Ut("v-if",!0)],2),Ut(" append slot "),Z.$slots.append?(Pe(),Ye("div",{key:1,class:st(z(m).be("group","append"))},[Bn(Z.$slots,"append")],2)):Ut("v-if",!0)],64)):(Pe(),Ye(Ii,{key:1},[Ut(" textarea "),Q("textarea",lc({id:z(d),ref_key:"textarea",ref:w,class:z(y).e("inner")},z(l),{tabindex:Z.tabindex,disabled:z(v),readonly:Z.readonly,autocomplete:Z.autocomplete,style:z(R),"aria-label":Z.label,placeholder:Z.placeholder,form:r.form,onCompositionstart:j,onCompositionupdate:Ue,onCompositionend:et,onInput:de,onFocus:ne[2]||(ne[2]=(...me)=>z(U)&&z(U)(...me)),onBlur:ne[3]||(ne[3]=(...me)=>z(q)&&z(q)(...me)),onChange:Fe,onKeydown:D}),null,16,iO),z(x)?(Pe(),Ye("span",{key:0,style:wa(B.value),class:st(z(m).e("count"))},Ft(z(F))+" / "+Ft(z(l).maxlength),7)):Ut("v-if",!0)],64))],16,nO)),[[x_,Z.type!=="hidden"]])}});var aO=kr(oO,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const cO=Lu(aO),V_=Symbol("popper"),hT=Symbol("popperContent"),lO=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],pT=Lr({role:{type:String,values:lO,default:"tooltip"}}),uO=gt({name:"ElPopper",inheritAttrs:!1}),fO=gt({...uO,props:pT,setup(n,{expose:e}){const t=n,r=Ee(),i=Ee(),s=Ee(),o=Ee(),a=ge(()=>t.role),c={triggerRef:r,popperInstanceRef:i,contentRef:s,referenceRef:o,role:a};return e(c),Po(V_,c),(l,u)=>Bn(l.$slots,"default")}});var dO=kr(fO,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/popper.vue"]]);const mT=Lr({arrowOffset:{type:Number,default:5}}),hO=gt({name:"ElPopperArrow",inheritAttrs:!1}),pO=gt({...hO,props:mT,setup(n,{expose:e}){const t=n,r=_r("popper"),{arrowOffset:i,arrowRef:s,arrowStyle:o}=Ln(hT,void 0);return Jt(()=>t.arrowOffset,a=>{i.value=a}),Go(()=>{s.value=void 0}),e({arrowRef:s}),(a,c)=>(Pe(),Ye("span",{ref_key:"arrowRef",ref:s,class:st(z(r).e("arrow")),style:wa(z(o)),"data-popper-arrow":""},null,6))}});var mO=kr(pO,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/arrow.vue"]]);const gO="ElOnlyChild",vO=gt({name:gO,setup(n,{slots:e,attrs:t}){var r;const i=Ln(uT),s=eD((r=i==null?void 0:i.setForwardRef)!=null?r:_p);return()=>{var o;const a=(o=e.default)==null?void 0:o.call(e,t);if(!a||a.length>1)return null;const c=gT(a);return c?Pi(NP(c,t),[[s]]):null}}});function gT(n){if(!n)return null;const e=n;for(const t of e){if(Xl(t))switch(t.type){case BP:continue;case TS:case"svg":return Rw(t);case Ii:return gT(t.children);default:return t}return Rw(t)}return null}function Rw(n){const e=_r("only-child");return Vt("span",{class:e.e("content")},[n])}const vT=Lr({virtualRef:{type:on(Object)},virtualTriggering:Boolean,onMouseenter:{type:on(Function)},onMouseleave:{type:on(Function)},onClick:{type:on(Function)},onKeydown:{type:on(Function)},onFocus:{type:on(Function)},onBlur:{type:on(Function)},onContextmenu:{type:on(Function)},id:String,open:Boolean}),yO=gt({name:"ElPopperTrigger",inheritAttrs:!1}),_O=gt({...yO,props:vT,setup(n,{expose:e}){const t=n,{role:r,triggerRef:i}=Ln(V_,void 0);Jk(i);const s=ge(()=>a.value?t.id:void 0),o=ge(()=>{if(r&&r.value==="tooltip")return t.open&&t.id?t.id:void 0}),a=ge(()=>{if(r&&r.value!=="tooltip")return r.value}),c=ge(()=>a.value?`${t.open}`:void 0);let l;return xr(()=>{Jt(()=>t.virtualRef,u=>{u&&(i.value=MS(u))},{immediate:!0}),Jt(i,(u,f)=>{l==null||l(),l=void 0,bp(u)&&(["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(d=>{var p;const v=t[d];v&&(u.addEventListener(d.slice(2).toLowerCase(),v),(p=f==null?void 0:f.removeEventListener)==null||p.call(f,d.slice(2).toLowerCase(),v))}),l=Jt([s,o,a,c],d=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((p,v)=>{y_(d[v])?u.removeAttribute(p):u.setAttribute(p,d[v])})},{immediate:!0})),bp(f)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(d=>f.removeAttribute(d))},{immediate:!0})}),Go(()=>{l==null||l(),l=void 0}),e({triggerRef:i}),(u,f)=>u.virtualTriggering?Ut("v-if",!0):(Pe(),wn(z(vO),lc({key:0},u.$attrs,{"aria-controls":z(s),"aria-describedby":z(o),"aria-expanded":z(c),"aria-haspopup":z(a)}),{default:Zt(()=>[Bn(u.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var bO=kr(_O,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/trigger.vue"]]);const xO=["fixed","absolute"],wO=Lr({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:on(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:L_,default:"bottom"},popperOptions:{type:on(Object),default:()=>({})},strategy:{type:String,values:xO,default:"absolute"}}),yT=Lr({...wO,id:String,style:{type:on([String,Array,Object])},className:{type:on([String,Array,Object])},effect:{type:String,default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:on([String,Array,Object])},popperStyle:{type:on([String,Array,Object])},referenceEl:{type:on(Object)},triggerTargetEl:{type:on(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},ariaLabel:{type:String,default:void 0},virtualTriggering:Boolean,zIndex:Number}),AO={mouseenter:n=>n instanceof MouseEvent,mouseleave:n=>n instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},EO=(n,e=[])=>{const{placement:t,strategy:r,popperOptions:i}=n,s={placement:t,strategy:r,...i,modifiers:[...TO(n),...e]};return MO(s,i==null?void 0:i.modifiers),s},SO=n=>{if(ga)return MS(n)};function TO(n){const{offset:e,gpuAcceleration:t,fallbackPlacements:r}=n;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:r}},{name:"computeStyles",options:{gpuAcceleration:t}}]}function MO(n,e){e&&(n.modifiers=[...n.modifiers,...e??[]])}const RO=0,IO=n=>{const{popperInstanceRef:e,contentRef:t,triggerRef:r,role:i}=Ln(V_,void 0),s=Ee(),o=Ee(),a=ge(()=>({name:"eventListeners",enabled:!!n.visible})),c=ge(()=>{var h;const w=z(s),S=(h=z(o))!=null?h:RO;return{name:"arrow",enabled:!LL(w),options:{element:w,padding:S}}}),l=ge(()=>({onFirstUpdate:()=>{v()},...EO(n,[z(c),z(a)])})),u=ge(()=>SO(n.referenceEl)||z(r)),{attributes:f,state:d,styles:p,update:v,forceUpdate:m,instanceRef:y}=$k(u,t,l);return Jt(y,h=>e.value=h),xr(()=>{Jt(()=>{var h;return(h=z(u))==null?void 0:h.getBoundingClientRect()},()=>{v()})}),{attributes:f,arrowRef:s,contentRef:t,instanceRef:y,state:d,styles:p,role:i,forceUpdate:m,update:v}},CO=(n,{attributes:e,styles:t,role:r})=>{const{nextZIndex:i}=LP(),s=_r("popper"),o=ge(()=>z(e).popper),a=Ee(n.zIndex||i()),c=ge(()=>[s.b(),s.is("pure",n.pure),s.is(n.effect),n.popperClass]),l=ge(()=>[{zIndex:z(a)},z(t).popper,n.popperStyle||{}]),u=ge(()=>r.value==="dialog"?"false":void 0),f=ge(()=>z(t).arrow||{});return{ariaModal:u,arrowStyle:f,contentAttrs:o,contentClass:c,contentStyle:l,contentZIndex:a,updateZIndex:()=>{a.value=n.zIndex||i()}}},PO=(n,e)=>{const t=Ee(!1),r=Ee();return{focusStartRef:r,trapped:t,onFocusAfterReleased:l=>{var u;((u=l.detail)==null?void 0:u.focusReason)!=="pointer"&&(r.value="first",e("blur"))},onFocusAfterTrapped:()=>{e("focus")},onFocusInTrap:l=>{n.visible&&!t.value&&(l.target&&(r.value=l.target),t.value=!0)},onFocusoutPrevented:l=>{n.trapping||(l.detail.focusReason==="pointer"&&l.preventDefault(),t.value=!1)},onReleaseRequested:()=>{t.value=!1,e("close")}}},NO=gt({name:"ElPopperContent"}),BO=gt({...NO,props:yT,emits:AO,setup(n,{expose:e,emit:t}){const r=n,{focusStartRef:i,trapped:s,onFocusAfterReleased:o,onFocusAfterTrapped:a,onFocusInTrap:c,onFocusoutPrevented:l,onReleaseRequested:u}=PO(r,t),{attributes:f,arrowRef:d,contentRef:p,styles:v,instanceRef:m,role:y,update:h}=IO(r),{ariaModal:w,arrowStyle:S,contentAttrs:T,contentClass:C,contentStyle:B,updateZIndex:O}=CO(r,{styles:v,attributes:f,role:y}),P=Ln(bc,void 0),N=Ee();Po(hT,{arrowStyle:S,arrowRef:d,arrowOffset:N}),P&&(P.addInputId||P.removeInputId)&&Po(bc,{...P,addInputId:_p,removeInputId:_p});let I;const U=(M=!0)=>{h(),M&&O()},q=()=>{U(!1),r.visible&&r.focusOnShow?s.value=!0:r.visible===!1&&(s.value=!1)};return xr(()=>{Jt(()=>r.triggerTargetEl,(M,g)=>{I==null||I(),I=void 0;const _=z(M||p.value),b=z(g||p.value);bp(_)&&(I=Jt([y,()=>r.ariaLabel,w,()=>r.id],E=>{["role","aria-label","aria-modal","id"].forEach((R,L)=>{y_(E[L])?_.removeAttribute(R):_.setAttribute(R,E[L])})},{immediate:!0})),b!==_&&bp(b)&&["role","aria-label","aria-modal","id"].forEach(E=>{b.removeAttribute(E)})},{immediate:!0}),Jt(()=>r.visible,q,{immediate:!0})}),Go(()=>{I==null||I(),I=void 0}),e({popperContentRef:p,popperInstanceRef:m,updatePopper:U,contentStyle:B}),(M,g)=>(Pe(),Ye("div",lc({ref_key:"contentRef",ref:p},z(T),{style:z(B),class:z(C),tabindex:"-1",onMouseenter:g[0]||(g[0]=_=>M.$emit("mouseenter",_)),onMouseleave:g[1]||(g[1]=_=>M.$emit("mouseleave",_))}),[Vt(z(iP),{trapped:z(s),"trap-on-focus-in":!0,"focus-trap-el":z(p),"focus-start-el":z(i),onFocusAfterTrapped:z(a),onFocusAfterReleased:z(o),onFocusin:z(c),onFocusoutPrevented:z(l),onReleaseRequested:z(u)},{default:Zt(()=>[Bn(M.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16))}});var LO=kr(BO,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/content.vue"]]);const kO=Lu(dO),W_=Symbol("elTooltip"),_T=Lr({...Qk,...yT,appendTo:{type:on([String,Object])},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:on(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean}),bT=Lr({...vT,disabled:Boolean,trigger:{type:on([String,Array]),default:"hover"},triggerKeys:{type:on(Array),default:()=>[Dx.enter,Dx.space]}}),{useModelToggleProps:DO,useModelToggleEmits:OO,useModelToggle:UO}=YS("visible"),FO=Lr({...pT,...DO,..._T,...bT,...mT,showArrow:{type:Boolean,default:!0}}),HO=[...OO,"before-show","before-hide","show","hide","open","close"],zO=(n,e)=>_c(n)?n.includes(e):n===e,Kc=(n,e,t)=>r=>{zO(z(n),e)&&t(r)},GO=gt({name:"ElTooltipTrigger"}),VO=gt({...GO,props:bT,setup(n,{expose:e}){const t=n,r=_r("tooltip"),{controlled:i,id:s,open:o,onOpen:a,onClose:c,onToggle:l}=Ln(W_,void 0),u=Ee(null),f=()=>{if(z(i)||t.disabled)return!0},d=Is(t,"trigger"),p=fo(f,Kc(d,"hover",a)),v=fo(f,Kc(d,"hover",c)),m=fo(f,Kc(d,"click",T=>{T.button===0&&l(T)})),y=fo(f,Kc(d,"focus",a)),h=fo(f,Kc(d,"focus",c)),w=fo(f,Kc(d,"contextmenu",T=>{T.preventDefault(),l(T)})),S=fo(f,T=>{const{code:C}=T;t.triggerKeys.includes(C)&&(T.preventDefault(),l(T))});return e({triggerRef:u}),(T,C)=>(Pe(),wn(z(bO),{id:z(s),"virtual-ref":T.virtualRef,open:z(o),"virtual-triggering":T.virtualTriggering,class:st(z(r).e("trigger")),onBlur:z(h),onClick:z(m),onContextmenu:z(w),onFocus:z(y),onMouseenter:z(p),onMouseleave:z(v),onKeydown:z(S)},{default:Zt(()=>[Bn(T.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var WO=kr(VO,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/trigger.vue"]]);const jO=gt({name:"ElTooltipContent",inheritAttrs:!1}),qO=gt({...jO,props:_T,setup(n,{expose:e}){const t=n,{selector:r}=lT(),i=_r("tooltip"),s=Ee(null),o=Ee(!1),{controlled:a,id:c,open:l,trigger:u,onClose:f,onOpen:d,onShow:p,onHide:v,onBeforeShow:m,onBeforeHide:y}=Ln(W_,void 0),h=ge(()=>t.transition||`${i.namespace.value}-fade-in-linear`),w=ge(()=>t.persistent);Go(()=>{o.value=!0});const S=ge(()=>z(w)?!0:z(l)),T=ge(()=>t.disabled?!1:z(l)),C=ge(()=>t.appendTo||r.value),B=ge(()=>{var E;return(E=t.style)!=null?E:{}}),O=ge(()=>!z(l)),P=()=>{v()},N=()=>{if(z(a))return!0},I=fo(N,()=>{t.enterable&&z(u)==="hover"&&d()}),U=fo(N,()=>{z(u)==="hover"&&f()}),q=()=>{var E,R;(R=(E=s.value)==null?void 0:E.updatePopper)==null||R.call(E),m==null||m()},M=()=>{y==null||y()},g=()=>{p(),b=DP(ge(()=>{var E;return(E=s.value)==null?void 0:E.popperContentRef}),()=>{if(z(a))return;z(u)!=="hover"&&f()})},_=()=>{t.virtualTriggering||f()};let b;return Jt(()=>z(l),E=>{E||b==null||b()},{flush:"post"}),Jt(()=>t.content,()=>{var E,R;(R=(E=s.value)==null?void 0:E.updatePopper)==null||R.call(E)}),e({contentRef:s}),(E,R)=>(Pe(),wn(kP,{disabled:!E.teleported,to:z(C)},[Vt(RS,{name:z(h),onAfterLeave:P,onBeforeEnter:q,onAfterEnter:g,onBeforeLeave:M},{default:Zt(()=>[z(S)?Pi((Pe(),wn(z(LO),lc({key:0,id:z(c),ref_key:"contentRef",ref:s},E.$attrs,{"aria-label":E.ariaLabel,"aria-hidden":z(O),"boundaries-padding":E.boundariesPadding,"fallback-placements":E.fallbackPlacements,"gpu-acceleration":E.gpuAcceleration,offset:E.offset,placement:E.placement,"popper-options":E.popperOptions,strategy:E.strategy,effect:E.effect,enterable:E.enterable,pure:E.pure,"popper-class":E.popperClass,"popper-style":[E.popperStyle,z(B)],"reference-el":E.referenceEl,"trigger-target-el":E.triggerTargetEl,visible:z(T),"z-index":E.zIndex,onMouseenter:z(I),onMouseleave:z(U),onBlur:_,onClose:z(f)}),{default:Zt(()=>[o.value?Ut("v-if",!0):Bn(E.$slots,"default",{key:0})]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[x_,z(T)]]):Ut("v-if",!0)]),_:3},8,["name"])],8,["disabled","to"]))}});var $O=kr(qO,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/content.vue"]]);const XO=["innerHTML"],KO={key:1},YO=gt({name:"ElTooltip"}),QO=gt({...YO,props:FO,emits:HO,setup(n,{expose:e,emit:t}){const r=n;Yk();const i=v_(),s=Ee(),o=Ee(),a=()=>{var h;const w=z(s);w&&((h=w.popperInstanceRef)==null||h.update())},c=Ee(!1),l=Ee(),{show:u,hide:f,hasUpdateHandler:d}=UO({indicator:c,toggleReason:l}),{onOpen:p,onClose:v}=Zk({showAfter:Is(r,"showAfter"),hideAfter:Is(r,"hideAfter"),autoClose:Is(r,"autoClose"),open:u,close:f}),m=ge(()=>yc(r.visible)&&!d.value);Po(W_,{controlled:m,id:i,open:OP(c),trigger:Is(r,"trigger"),onOpen:h=>{p(h)},onClose:h=>{v(h)},onToggle:h=>{z(c)?v(h):p(h)},onShow:()=>{t("show",l.value)},onHide:()=>{t("hide",l.value)},onBeforeShow:()=>{t("before-show",l.value)},onBeforeHide:()=>{t("before-hide",l.value)},updatePopper:a}),Jt(()=>r.disabled,h=>{h&&c.value&&(c.value=!1)});const y=h=>{var w,S;const T=(S=(w=o.value)==null?void 0:w.contentRef)==null?void 0:S.popperContentRef,C=(h==null?void 0:h.relatedTarget)||document.activeElement;return T&&T.contains(C)};return UP(()=>c.value&&f()),e({popperRef:s,contentRef:o,isFocusInsideContent:y,updatePopper:a,onOpen:p,onClose:v,hide:f}),(h,w)=>(Pe(),wn(z(kO),{ref_key:"popperRef",ref:s,role:h.role},{default:Zt(()=>[Vt(WO,{disabled:h.disabled,trigger:h.trigger,"trigger-keys":h.triggerKeys,"virtual-ref":h.virtualRef,"virtual-triggering":h.virtualTriggering},{default:Zt(()=>[h.$slots.default?Bn(h.$slots,"default",{key:0}):Ut("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),Vt($O,{ref_key:"contentRef",ref:o,"aria-label":h.ariaLabel,"boundaries-padding":h.boundariesPadding,content:h.content,disabled:h.disabled,effect:h.effect,enterable:h.enterable,"fallback-placements":h.fallbackPlacements,"hide-after":h.hideAfter,"gpu-acceleration":h.gpuAcceleration,offset:h.offset,persistent:h.persistent,"popper-class":h.popperClass,"popper-style":h.popperStyle,placement:h.placement,"popper-options":h.popperOptions,pure:h.pure,"raw-content":h.rawContent,"reference-el":h.referenceEl,"trigger-target-el":h.triggerTargetEl,"show-after":h.showAfter,strategy:h.strategy,teleported:h.teleported,transition:h.transition,"virtual-triggering":h.virtualTriggering,"z-index":h.zIndex,"append-to":h.appendTo},{default:Zt(()=>[Bn(h.$slots,"content",{},()=>[h.rawContent?(Pe(),Ye("span",{key:0,innerHTML:h.content},null,8,XO)):(Pe(),Ye("span",KO,Ft(h.content),1))]),h.showArrow?(Pe(),wn(z(mO),{key:0,"arrow-offset":h.arrowOffset},null,8,["arrow-offset"])):Ut("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var ZO=kr(QO,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/tooltip.vue"]]);const JO=Lu(ZO),xT=Symbol("buttonGroupContextKey"),eU=(n,e)=>{sP({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},ge(()=>n.type==="text"));const t=Ln(xT,void 0),r=FP("button"),{form:i}=Bd(),s=tu(ge(()=>t==null?void 0:t.size)),o=Vm(),a=Ee(),c=Cd(),l=ge(()=>n.type||(t==null?void 0:t.type)||""),u=ge(()=>{var v,m,y;return(y=(m=n.autoInsertSpace)!=null?m:(v=r.value)==null?void 0:v.autoInsertSpace)!=null?y:!1}),f=ge(()=>n.tag==="button"?{ariaDisabled:o.value||n.loading,disabled:o.value||n.loading,autofocus:n.autofocus,type:n.nativeType}:{}),d=ge(()=>{var v;const m=(v=c.default)==null?void 0:v.call(c);if(u.value&&(m==null?void 0:m.length)===1){const y=m[0];if((y==null?void 0:y.type)===TS){const h=y.children;return/^\p{Unified_Ideograph}{2}$/u.test(h.trim())}}return!1});return{_disabled:o,_size:s,_type:l,_ref:a,_props:f,shouldAddSpace:d,handleClick:v=>{n.nativeType==="reset"&&(i==null||i.resetFields()),e("click",v)}}},tU=["default","primary","success","warning","info","danger","text",""],nU=["button","submit","reset"],Iv=Lr({size:Hm,disabled:Boolean,type:{type:String,values:tU,default:""},icon:{type:yp},nativeType:{type:String,values:nU,default:"button"},loading:Boolean,loadingIcon:{type:yp,default:()=>HP},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:on([String,Object]),default:"button"}}),rU={click:n=>n instanceof MouseEvent};function cr(n,e){iU(n)&&(n="100%");var t=sU(n);return n=e===360?n:Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(String(n*e),10)/100),Math.abs(n-e)<1e-6?1:(e===360?n=(n<0?n%e+e:n%e)/parseFloat(String(e)):n=n%e/parseFloat(String(e)),n)}function ih(n){return Math.min(1,Math.max(0,n))}function iU(n){return typeof n=="string"&&n.indexOf(".")!==-1&&parseFloat(n)===1}function sU(n){return typeof n=="string"&&n.indexOf("%")!==-1}function wT(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function sh(n){return n<=1?"".concat(Number(n)*100,"%"):n}function tc(n){return n.length===1?"0"+n:String(n)}function oU(n,e,t){return{r:cr(n,255)*255,g:cr(e,255)*255,b:cr(t,255)*255}}function Iw(n,e,t){n=cr(n,255),e=cr(e,255),t=cr(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),s=0,o=0,a=(r+i)/2;if(r===i)o=0,s=0;else{var c=r-i;switch(o=a>.5?c/(2-r-i):c/(r+i),r){case n:s=(e-t)/c+(e<t?6:0);break;case e:s=(t-n)/c+2;break;case t:s=(n-e)/c+4;break}s/=6}return{h:s,s:o,l:a}}function z0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*(6*t):t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function aU(n,e,t){var r,i,s;if(n=cr(n,360),e=cr(e,100),t=cr(t,100),e===0)i=t,s=t,r=t;else{var o=t<.5?t*(1+e):t+e-t*e,a=2*t-o;r=z0(a,o,n+1/3),i=z0(a,o,n),s=z0(a,o,n-1/3)}return{r:r*255,g:i*255,b:s*255}}function Cw(n,e,t){n=cr(n,255),e=cr(e,255),t=cr(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),s=0,o=r,a=r-i,c=r===0?0:a/r;if(r===i)s=0;else{switch(r){case n:s=(e-t)/a+(e<t?6:0);break;case e:s=(t-n)/a+2;break;case t:s=(n-e)/a+4;break}s/=6}return{h:s,s:c,v:o}}function cU(n,e,t){n=cr(n,360)*6,e=cr(e,100),t=cr(t,100);var r=Math.floor(n),i=n-r,s=t*(1-e),o=t*(1-i*e),a=t*(1-(1-i)*e),c=r%6,l=[t,o,s,s,a,t][c],u=[a,t,t,o,s,s][c],f=[s,s,a,t,t,o][c];return{r:l*255,g:u*255,b:f*255}}function Pw(n,e,t,r){var i=[tc(Math.round(n).toString(16)),tc(Math.round(e).toString(16)),tc(Math.round(t).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function lU(n,e,t,r,i){var s=[tc(Math.round(n).toString(16)),tc(Math.round(e).toString(16)),tc(Math.round(t).toString(16)),tc(uU(r))];return i&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function uU(n){return Math.round(parseFloat(n)*255).toString(16)}function Nw(n){return ri(n)/255}function ri(n){return parseInt(n,16)}function fU(n){return{r:n>>16,g:(n&65280)>>8,b:n&255}}var Cv={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function dU(n){var e={r:0,g:0,b:0},t=1,r=null,i=null,s=null,o=!1,a=!1;return typeof n=="string"&&(n=mU(n)),typeof n=="object"&&(Zs(n.r)&&Zs(n.g)&&Zs(n.b)?(e=oU(n.r,n.g,n.b),o=!0,a=String(n.r).substr(-1)==="%"?"prgb":"rgb"):Zs(n.h)&&Zs(n.s)&&Zs(n.v)?(r=sh(n.s),i=sh(n.v),e=cU(n.h,r,i),o=!0,a="hsv"):Zs(n.h)&&Zs(n.s)&&Zs(n.l)&&(r=sh(n.s),s=sh(n.l),e=aU(n.h,r,s),o=!0,a="hsl"),Object.prototype.hasOwnProperty.call(n,"a")&&(t=n.a)),t=wT(t),{ok:o,format:n.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}var hU="[-\\+]?\\d+%?",pU="[-\\+]?\\d*\\.\\d+%?",ha="(?:".concat(pU,")|(?:").concat(hU,")"),G0="[\\s|\\(]+(".concat(ha,")[,|\\s]+(").concat(ha,")[,|\\s]+(").concat(ha,")\\s*\\)?"),V0="[\\s|\\(]+(".concat(ha,")[,|\\s]+(").concat(ha,")[,|\\s]+(").concat(ha,")[,|\\s]+(").concat(ha,")\\s*\\)?"),qi={CSS_UNIT:new RegExp(ha),rgb:new RegExp("rgb"+G0),rgba:new RegExp("rgba"+V0),hsl:new RegExp("hsl"+G0),hsla:new RegExp("hsla"+V0),hsv:new RegExp("hsv"+G0),hsva:new RegExp("hsva"+V0),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function mU(n){if(n=n.trim().toLowerCase(),n.length===0)return!1;var e=!1;if(Cv[n])n=Cv[n],e=!0;else if(n==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t=qi.rgb.exec(n);return t?{r:t[1],g:t[2],b:t[3]}:(t=qi.rgba.exec(n),t?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=qi.hsl.exec(n),t?{h:t[1],s:t[2],l:t[3]}:(t=qi.hsla.exec(n),t?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=qi.hsv.exec(n),t?{h:t[1],s:t[2],v:t[3]}:(t=qi.hsva.exec(n),t?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=qi.hex8.exec(n),t?{r:ri(t[1]),g:ri(t[2]),b:ri(t[3]),a:Nw(t[4]),format:e?"name":"hex8"}:(t=qi.hex6.exec(n),t?{r:ri(t[1]),g:ri(t[2]),b:ri(t[3]),format:e?"name":"hex"}:(t=qi.hex4.exec(n),t?{r:ri(t[1]+t[1]),g:ri(t[2]+t[2]),b:ri(t[3]+t[3]),a:Nw(t[4]+t[4]),format:e?"name":"hex8"}:(t=qi.hex3.exec(n),t?{r:ri(t[1]+t[1]),g:ri(t[2]+t[2]),b:ri(t[3]+t[3]),format:e?"name":"hex"}:!1)))))))))}function Zs(n){return!!qi.CSS_UNIT.exec(String(n))}var gU=function(){function n(e,t){e===void 0&&(e=""),t===void 0&&(t={});var r;if(e instanceof n)return e;typeof e=="number"&&(e=fU(e)),this.originalInput=e;var i=dU(e);this.originalInput=e,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=(r=t.format)!==null&&r!==void 0?r:i.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return n.prototype.isDark=function(){return this.getBrightness()<128},n.prototype.isLight=function(){return!this.isDark()},n.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},n.prototype.getLuminance=function(){var e=this.toRgb(),t,r,i,s=e.r/255,o=e.g/255,a=e.b/255;return s<=.03928?t=s/12.92:t=Math.pow((s+.055)/1.055,2.4),o<=.03928?r=o/12.92:r=Math.pow((o+.055)/1.055,2.4),a<=.03928?i=a/12.92:i=Math.pow((a+.055)/1.055,2.4),.2126*t+.7152*r+.0722*i},n.prototype.getAlpha=function(){return this.a},n.prototype.setAlpha=function(e){return this.a=wT(e),this.roundA=Math.round(100*this.a)/100,this},n.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},n.prototype.toHsv=function(){var e=Cw(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},n.prototype.toHsvString=function(){var e=Cw(this.r,this.g,this.b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this.a===1?"hsv(".concat(t,", ").concat(r,"%, ").concat(i,"%)"):"hsva(".concat(t,", ").concat(r,"%, ").concat(i,"%, ").concat(this.roundA,")")},n.prototype.toHsl=function(){var e=Iw(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},n.prototype.toHslString=function(){var e=Iw(this.r,this.g,this.b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this.a===1?"hsl(".concat(t,", ").concat(r,"%, ").concat(i,"%)"):"hsla(".concat(t,", ").concat(r,"%, ").concat(i,"%, ").concat(this.roundA,")")},n.prototype.toHex=function(e){return e===void 0&&(e=!1),Pw(this.r,this.g,this.b,e)},n.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},n.prototype.toHex8=function(e){return e===void 0&&(e=!1),lU(this.r,this.g,this.b,this.a,e)},n.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},n.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},n.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},n.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),r=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(t,", ").concat(r,")"):"rgba(".concat(e,", ").concat(t,", ").concat(r,", ").concat(this.roundA,")")},n.prototype.toPercentageRgb=function(){var e=function(t){return"".concat(Math.round(cr(t,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},n.prototype.toPercentageRgbString=function(){var e=function(t){return Math.round(cr(t,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},n.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+Pw(this.r,this.g,this.b,!1),t=0,r=Object.entries(Cv);t<r.length;t++){var i=r[t],s=i[0],o=i[1];if(e===o)return s}return!1},n.prototype.toString=function(e){var t=!!e;e=e??this.format;var r=!1,i=this.a<1&&this.a>=0,s=!t&&i&&(e.startsWith("hex")||e==="name");return s?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},n.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},n.prototype.clone=function(){return new n(this.toString())},n.prototype.lighten=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l+=e/100,t.l=ih(t.l),new n(t)},n.prototype.brighten=function(e){e===void 0&&(e=10);var t=this.toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),new n(t)},n.prototype.darken=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l-=e/100,t.l=ih(t.l),new n(t)},n.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},n.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},n.prototype.desaturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s-=e/100,t.s=ih(t.s),new n(t)},n.prototype.saturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s+=e/100,t.s=ih(t.s),new n(t)},n.prototype.greyscale=function(){return this.desaturate(100)},n.prototype.spin=function(e){var t=this.toHsl(),r=(t.h+e)%360;return t.h=r<0?360+r:r,new n(t)},n.prototype.mix=function(e,t){t===void 0&&(t=50);var r=this.toRgb(),i=new n(e).toRgb(),s=t/100,o={r:(i.r-r.r)*s+r.r,g:(i.g-r.g)*s+r.g,b:(i.b-r.b)*s+r.b,a:(i.a-r.a)*s+r.a};return new n(o)},n.prototype.analogous=function(e,t){e===void 0&&(e=6),t===void 0&&(t=30);var r=this.toHsl(),i=360/t,s=[this];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,s.push(new n(r));return s},n.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new n(e)},n.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var t=this.toHsv(),r=t.h,i=t.s,s=t.v,o=[],a=1/e;e--;)o.push(new n({h:r,s:i,v:s})),s=(s+a)%1;return o},n.prototype.splitcomplement=function(){var e=this.toHsl(),t=e.h;return[this,new n({h:(t+72)%360,s:e.s,l:e.l}),new n({h:(t+216)%360,s:e.s,l:e.l})]},n.prototype.onBackground=function(e){var t=this.toRgb(),r=new n(e).toRgb(),i=t.a+r.a*(1-t.a);return new n({r:(t.r*t.a+r.r*r.a*(1-t.a))/i,g:(t.g*t.a+r.g*r.a*(1-t.a))/i,b:(t.b*t.a+r.b*r.a*(1-t.a))/i,a:i})},n.prototype.triad=function(){return this.polyad(3)},n.prototype.tetrad=function(){return this.polyad(4)},n.prototype.polyad=function(e){for(var t=this.toHsl(),r=t.h,i=[this],s=360/e,o=1;o<e;o++)i.push(new n({h:(r+o*s)%360,s:t.s,l:t.l}));return i},n.prototype.equals=function(e){return this.toRgbString()===new n(e).toRgbString()},n}();function Yo(n,e=20){return n.mix("#141414",e).toString()}function vU(n){const e=Vm(),t=_r("button");return ge(()=>{let r={};const i=n.color;if(i){const s=new gU(i),o=n.dark?s.tint(20).toString():Yo(s,20);if(n.plain)r=t.cssVarBlock({"bg-color":n.dark?Yo(s,90):s.tint(90).toString(),"text-color":i,"border-color":n.dark?Yo(s,50):s.tint(50).toString(),"hover-text-color":`var(${t.cssVarName("color-white")})`,"hover-bg-color":i,"hover-border-color":i,"active-bg-color":o,"active-text-color":`var(${t.cssVarName("color-white")})`,"active-border-color":o}),e.value&&(r[t.cssVarBlockName("disabled-bg-color")]=n.dark?Yo(s,90):s.tint(90).toString(),r[t.cssVarBlockName("disabled-text-color")]=n.dark?Yo(s,50):s.tint(50).toString(),r[t.cssVarBlockName("disabled-border-color")]=n.dark?Yo(s,80):s.tint(80).toString());else{const a=n.dark?Yo(s,30):s.tint(30).toString(),c=s.isDark()?`var(${t.cssVarName("color-white")})`:`var(${t.cssVarName("color-black")})`;if(r=t.cssVarBlock({"bg-color":i,"text-color":c,"border-color":i,"hover-bg-color":a,"hover-text-color":c,"hover-border-color":a,"active-bg-color":o,"active-border-color":o}),e.value){const l=n.dark?Yo(s,50):s.tint(50).toString();r[t.cssVarBlockName("disabled-bg-color")]=l,r[t.cssVarBlockName("disabled-text-color")]=n.dark?"rgba(255, 255, 255, 0.5)":`var(${t.cssVarName("color-white")})`,r[t.cssVarBlockName("disabled-border-color")]=l}}}return r})}const yU=gt({name:"ElButton"}),_U=gt({...yU,props:Iv,emits:rU,setup(n,{expose:e,emit:t}){const r=n,i=vU(r),s=_r("button"),{_ref:o,_size:a,_type:c,_disabled:l,_props:u,shouldAddSpace:f,handleClick:d}=eU(r,t);return e({ref:o,size:a,type:c,disabled:l,shouldAddSpace:f}),(p,v)=>(Pe(),wn(Cs(p.tag),lc({ref_key:"_ref",ref:o},z(u),{class:[z(s).b(),z(s).m(z(c)),z(s).m(z(a)),z(s).is("disabled",z(l)),z(s).is("loading",p.loading),z(s).is("plain",p.plain),z(s).is("round",p.round),z(s).is("circle",p.circle),z(s).is("text",p.text),z(s).is("link",p.link),z(s).is("has-bg",p.bg)],style:z(i),onClick:z(d)}),{default:Zt(()=>[p.loading?(Pe(),Ye(Ii,{key:0},[p.$slots.loading?Bn(p.$slots,"loading",{key:0}):(Pe(),wn(z(Qa),{key:1,class:st(z(s).is("loading"))},{default:Zt(()=>[(Pe(),wn(Cs(p.loadingIcon)))]),_:1},8,["class"]))],64)):p.icon||p.$slots.icon?(Pe(),wn(z(Qa),{key:1},{default:Zt(()=>[p.icon?(Pe(),wn(Cs(p.icon),{key:0})):Bn(p.$slots,"icon",{key:1})]),_:3})):Ut("v-if",!0),p.$slots.default?(Pe(),Ye("span",{key:2,class:st({[z(s).em("text","expand")]:z(f)})},[Bn(p.$slots,"default")],2)):Ut("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var bU=kr(_U,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button.vue"]]);const xU={size:Iv.size,type:Iv.type},wU=gt({name:"ElButtonGroup"}),AU=gt({...wU,props:xU,setup(n){const e=n;Po(xT,Fc({size:Is(e,"size"),type:Is(e,"type")}));const t=_r("button");return(r,i)=>(Pe(),Ye("div",{class:st(`${z(t).b("group")}`)},[Bn(r.$slots,"default")],2))}});var AT=kr(AU,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button-group.vue"]]);const ET=Lu(bU,{ButtonGroup:AT});Fm(AT);const ST={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object]},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:Hm,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0}},TT={[gc]:n=>ks(n)||Gf(n)||yc(n),change:n=>ks(n)||Gf(n)||yc(n)},Ou=Symbol("checkboxGroupContextKey"),EU=({model:n,isChecked:e})=>{const t=Ln(Ou,void 0),r=ge(()=>{var s,o;const a=(s=t==null?void 0:t.max)==null?void 0:s.value,c=(o=t==null?void 0:t.min)==null?void 0:o.value;return!gv(a)&&n.value.length>=a&&!e.value||!gv(c)&&n.value.length<=c&&e.value});return{isDisabled:Vm(ge(()=>(t==null?void 0:t.disabled.value)||r.value)),isLimitDisabled:r}},SU=(n,{model:e,isLimitExceeded:t,hasOwnLabel:r,isDisabled:i,isLabeledByFormItem:s})=>{const o=Ln(Ou,void 0),{formItem:a}=Bd(),{emit:c}=Uc();function l(v){var m,y;return v===n.trueLabel||v===!0?(m=n.trueLabel)!=null?m:!0:(y=n.falseLabel)!=null?y:!1}function u(v,m){c("change",l(v),m)}function f(v){if(t.value)return;const m=v.target;c("change",l(m.checked),v)}async function d(v){t.value||!r.value&&!i.value&&s.value&&(v.composedPath().some(h=>h.tagName==="LABEL")||(e.value=l([!1,n.falseLabel].includes(e.value)),await nr(),u(e.value,v)))}const p=ge(()=>(o==null?void 0:o.validateEvent)||n.validateEvent);return Jt(()=>n.modelValue,()=>{p.value&&(a==null||a.validate("change").catch(v=>zf()))}),{handleChange:f,onClickRoot:d}},TU=n=>{const e=Ee(!1),{emit:t}=Uc(),r=Ln(Ou,void 0),i=ge(()=>gv(r)===!1),s=Ee(!1);return{model:ge({get(){var a,c;return i.value?(a=r==null?void 0:r.modelValue)==null?void 0:a.value:(c=n.modelValue)!=null?c:e.value},set(a){var c,l;i.value&&_c(a)?(s.value=((c=r==null?void 0:r.max)==null?void 0:c.value)!==void 0&&a.length>(r==null?void 0:r.max.value),s.value===!1&&((l=r==null?void 0:r.changeEvent)==null||l.call(r,a))):(t(gc,a),e.value=a)}}),isGroup:i,isLimitExceeded:s}},MU=(n,e,{model:t})=>{const r=Ln(Ou,void 0),i=Ee(!1),s=ge(()=>{const l=t.value;return yc(l)?l:_c(l)?Xl(n.label)?l.map(Ox).some(u=>BL(u,n.label)):l.map(Ox).includes(n.label):l!=null?l===n.trueLabel:!!l}),o=tu(ge(()=>{var l;return(l=r==null?void 0:r.size)==null?void 0:l.value}),{prop:!0}),a=tu(ge(()=>{var l;return(l=r==null?void 0:r.size)==null?void 0:l.value})),c=ge(()=>!!(e.default||n.label));return{checkboxButtonSize:o,isChecked:s,isFocused:i,checkboxSize:a,hasOwnLabel:c}},RU=(n,{model:e})=>{function t(){_c(e.value)&&!e.value.includes(n.label)?e.value.push(n.label):e.value=n.trueLabel||!0}n.checked&&t()},MT=(n,e)=>{const{formItem:t}=Bd(),{model:r,isGroup:i,isLimitExceeded:s}=TU(n),{isFocused:o,isChecked:a,checkboxButtonSize:c,checkboxSize:l,hasOwnLabel:u}=MU(n,e,{model:r}),{isDisabled:f}=EU({model:r,isChecked:a}),{inputId:d,isLabeledByFormItem:p}=G_(n,{formItemContext:t,disableIdGeneration:u,disableIdManagement:i}),{handleChange:v,onClickRoot:m}=SU(n,{model:r,isLimitExceeded:s,hasOwnLabel:u,isDisabled:f,isLabeledByFormItem:p});return RU(n,{model:r}),{inputId:d,isLabeledByFormItem:p,isChecked:a,isDisabled:f,isFocused:o,checkboxButtonSize:c,checkboxSize:l,hasOwnLabel:u,model:r,handleChange:v,onClickRoot:m}},IU=["tabindex","role","aria-checked"],CU=["id","aria-hidden","name","tabindex","disabled","true-value","false-value"],PU=["id","aria-hidden","disabled","value","name","tabindex"],NU=gt({name:"ElCheckbox"}),BU=gt({...NU,props:ST,emits:TT,setup(n){const e=n,t=Cd(),{inputId:r,isLabeledByFormItem:i,isChecked:s,isDisabled:o,isFocused:a,checkboxSize:c,hasOwnLabel:l,model:u,handleChange:f,onClickRoot:d}=MT(e,t),p=_r("checkbox"),v=ge(()=>[p.b(),p.m(c.value),p.is("disabled",o.value),p.is("bordered",e.border),p.is("checked",s.value)]),m=ge(()=>[p.e("input"),p.is("disabled",o.value),p.is("checked",s.value),p.is("indeterminate",e.indeterminate),p.is("focus",a.value)]);return(y,h)=>(Pe(),wn(Cs(!z(l)&&z(i)?"span":"label"),{class:st(z(v)),"aria-controls":y.indeterminate?y.controls:null,onClick:z(d)},{default:Zt(()=>[Q("span",{class:st(z(m)),tabindex:y.indeterminate?0:void 0,role:y.indeterminate?"checkbox":void 0,"aria-checked":y.indeterminate?"mixed":void 0},[y.trueLabel||y.falseLabel?Pi((Pe(),Ye("input",{key:0,id:z(r),"onUpdate:modelValue":h[0]||(h[0]=w=>Vf(u)?u.value=w:null),class:st(z(p).e("original")),type:"checkbox","aria-hidden":y.indeterminate?"true":"false",name:y.name,tabindex:y.tabindex,disabled:z(o),"true-value":y.trueLabel,"false-value":y.falseLabel,onChange:h[1]||(h[1]=(...w)=>z(f)&&z(f)(...w)),onFocus:h[2]||(h[2]=w=>a.value=!0),onBlur:h[3]||(h[3]=w=>a.value=!1)},null,42,CU)),[[xp,z(u)]]):Pi((Pe(),Ye("input",{key:1,id:z(r),"onUpdate:modelValue":h[4]||(h[4]=w=>Vf(u)?u.value=w:null),class:st(z(p).e("original")),type:"checkbox","aria-hidden":y.indeterminate?"true":"false",disabled:z(o),value:y.label,name:y.name,tabindex:y.tabindex,onChange:h[5]||(h[5]=(...w)=>z(f)&&z(f)(...w)),onFocus:h[6]||(h[6]=w=>a.value=!0),onBlur:h[7]||(h[7]=w=>a.value=!1)},null,42,PU)),[[xp,z(u)]]),Q("span",{class:st(z(p).e("inner"))},null,2)],10,IU),z(l)?(Pe(),Ye("span",{key:0,class:st(z(p).e("label"))},[Bn(y.$slots,"default"),y.$slots.default?Ut("v-if",!0):(Pe(),Ye(Ii,{key:0},[Aa(Ft(y.label),1)],64))],2)):Ut("v-if",!0)]),_:3},8,["class","aria-controls","onClick"]))}});var LU=kr(BU,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox.vue"]]);const kU=["name","tabindex","disabled","true-value","false-value"],DU=["name","tabindex","disabled","value"],OU=gt({name:"ElCheckboxButton"}),UU=gt({...OU,props:ST,emits:TT,setup(n){const e=n,t=Cd(),{isFocused:r,isChecked:i,isDisabled:s,checkboxButtonSize:o,model:a,handleChange:c}=MT(e,t),l=Ln(Ou,void 0),u=_r("checkbox"),f=ge(()=>{var p,v,m,y;const h=(v=(p=l==null?void 0:l.fill)==null?void 0:p.value)!=null?v:"";return{backgroundColor:h,borderColor:h,color:(y=(m=l==null?void 0:l.textColor)==null?void 0:m.value)!=null?y:"",boxShadow:h?`-1px 0 0 0 ${h}`:void 0}}),d=ge(()=>[u.b("button"),u.bm("button",o.value),u.is("disabled",s.value),u.is("checked",i.value),u.is("focus",r.value)]);return(p,v)=>(Pe(),Ye("label",{class:st(z(d))},[p.trueLabel||p.falseLabel?Pi((Pe(),Ye("input",{key:0,"onUpdate:modelValue":v[0]||(v[0]=m=>Vf(a)?a.value=m:null),class:st(z(u).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:z(s),"true-value":p.trueLabel,"false-value":p.falseLabel,onChange:v[1]||(v[1]=(...m)=>z(c)&&z(c)(...m)),onFocus:v[2]||(v[2]=m=>r.value=!0),onBlur:v[3]||(v[3]=m=>r.value=!1)},null,42,kU)),[[xp,z(a)]]):Pi((Pe(),Ye("input",{key:1,"onUpdate:modelValue":v[4]||(v[4]=m=>Vf(a)?a.value=m:null),class:st(z(u).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:z(s),value:p.label,onChange:v[5]||(v[5]=(...m)=>z(c)&&z(c)(...m)),onFocus:v[6]||(v[6]=m=>r.value=!0),onBlur:v[7]||(v[7]=m=>r.value=!1)},null,42,DU)),[[xp,z(a)]]),p.$slots.default||p.label?(Pe(),Ye("span",{key:2,class:st(z(u).be("button","inner")),style:wa(z(i)?z(f):void 0)},[Bn(p.$slots,"default",{},()=>[Aa(Ft(p.label),1)])],6)):Ut("v-if",!0)],2))}});var RT=kr(UU,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-button.vue"]]);const FU=Lr({modelValue:{type:on(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:Hm,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0}}),HU={[gc]:n=>_c(n),change:n=>_c(n)},zU=gt({name:"ElCheckboxGroup"}),GU=gt({...zU,props:FU,emits:HU,setup(n,{emit:e}){const t=n,r=_r("checkbox"),{formItem:i}=Bd(),{inputId:s,isLabeledByFormItem:o}=G_(t,{formItemContext:i}),a=async l=>{e(gc,l),await nr(),e("change",l)},c=ge({get(){return t.modelValue},set(l){a(l)}});return Po(Ou,{...UL(Um(t),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:c,changeEvent:a}),Jt(()=>t.modelValue,()=>{t.validateEvent&&(i==null||i.validate("change").catch(l=>zf()))}),(l,u)=>{var f;return Pe(),wn(Cs(l.tag),{id:z(s),class:st(z(r).b("group")),role:"group","aria-label":z(o)?void 0:l.label||"checkbox-group","aria-labelledby":z(o)?(f=z(i))==null?void 0:f.labelId:void 0},{default:Zt(()=>[Bn(l.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var IT=kr(GU,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-group.vue"]]);const CT=Lu(LU,{CheckboxButton:RT,CheckboxGroup:IT});Fm(RT);Fm(IT);function VU(n){let e;const t=Ee(!1),r=Fc({...n,originalPosition:"",originalOverflow:"",visible:!1});function i(d){r.text=d}function s(){const d=r.parent,p=f.ns;if(!d.vLoadingAddClassList){let v=d.getAttribute("loading-number");v=Number.parseInt(v)-1,v?d.setAttribute("loading-number",v.toString()):(wp(d,p.bm("parent","relative")),d.removeAttribute("loading-number")),wp(d,p.bm("parent","hidden"))}o(),u.unmount()}function o(){var d,p;(p=(d=f.$el)==null?void 0:d.parentNode)==null||p.removeChild(f.$el)}function a(){var d;n.beforeClose&&!n.beforeClose()||(t.value=!0,clearTimeout(e),e=window.setTimeout(c,400),r.visible=!1,(d=n.closed)==null||d.call(n))}function c(){if(!t.value)return;const d=r.parent;t.value=!1,d.vLoadingAddClassList=void 0,s()}const u=zP(gt({name:"ElLoading",setup(d,{expose:p}){const{ns:v,zIndex:m}=GP("loading");return p({ns:v,zIndex:m}),()=>{const y=r.spinner||r.svg,h=nf("svg",{class:"circular",viewBox:r.svgViewBox?r.svgViewBox:"0 0 50 50",...y?{innerHTML:y}:{}},[nf("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),w=r.text?nf("p",{class:v.b("text")},[r.text]):void 0;return nf(RS,{name:v.b("fade"),onAfterLeave:c},{default:Zt(()=>[Pi(Vt("div",{style:{backgroundColor:r.background||""},class:[v.b("mask"),r.customClass,r.fullscreen?"is-fullscreen":""]},[nf("div",{class:v.b("spinner")},[h,w])]),[[x_,r.visible]])])})}}})),f=u.mount(document.createElement("div"));return{...Um(r),setText:i,removeElLoadingChild:o,close:a,handleAfterLeave:c,vm:f,get $el(){return f.$el}}}let oh;const WU=function(n={}){if(!ga)return;const e=jU(n);if(e.fullscreen&&oh)return oh;const t=VU({...e,closed:()=>{var i;(i=e.closed)==null||i.call(e),e.fullscreen&&(oh=void 0)}});qU(e,e.parent,t),Bw(e,e.parent,t),e.parent.vLoadingAddClassList=()=>Bw(e,e.parent,t);let r=e.parent.getAttribute("loading-number");return r?r=`${Number.parseInt(r)+1}`:r="1",e.parent.setAttribute("loading-number",r),e.parent.appendChild(t.$el),nr(()=>t.visible.value=e.visible),e.fullscreen&&(oh=t),t},jU=n=>{var e,t,r,i;let s;return ks(n.target)?s=(e=document.querySelector(n.target))!=null?e:document.body:s=n.target||document.body,{parent:s===document.body||n.body?document.body:s,background:n.background||"",svg:n.svg||"",svgViewBox:n.svgViewBox||"",spinner:n.spinner||!1,text:n.text||"",fullscreen:s===document.body&&((t=n.fullscreen)!=null?t:!0),lock:(r=n.lock)!=null?r:!1,customClass:n.customClass||"",visible:(i=n.visible)!=null?i:!0,target:s}},qU=async(n,e,t)=>{const{nextZIndex:r}=t.vm.zIndex||t.vm._.exposed.zIndex,i={};if(n.fullscreen)t.originalPosition.value=rf(document.body,"position"),t.originalOverflow.value=rf(document.body,"overflow"),i.zIndex=r();else if(n.parent===document.body){t.originalPosition.value=rf(document.body,"position"),await nr();for(const s of["top","left"]){const o=s==="top"?"scrollTop":"scrollLeft";i[s]=`${n.target.getBoundingClientRect()[s]+document.body[o]+document.documentElement[o]-Number.parseInt(rf(document.body,`margin-${s}`),10)}px`}for(const s of["height","width"])i[s]=`${n.target.getBoundingClientRect()[s]}px`}else t.originalPosition.value=rf(e,"position");for(const[s,o]of Object.entries(i))t.$el.style[s]=o},Bw=(n,e,t)=>{const r=t.vm.ns||t.vm._.exposed.ns;["absolute","fixed","sticky"].includes(t.originalPosition.value)?wp(e,r.bm("parent","relative")):Ux(e,r.bm("parent","relative")),n.fullscreen&&n.lock?Ux(e,r.bm("parent","hidden")):wp(e,r.bm("parent","hidden"))},Pv=Symbol("ElLoading"),Lw=(n,e)=>{var t,r,i,s;const o=e.instance,a=d=>Xl(e.value)?e.value[d]:void 0,c=d=>{const p=ks(d)&&(o==null?void 0:o[d])||d;return p&&Ee(p)},l=d=>c(a(d)||n.getAttribute(`element-loading-${VP(d)}`)),u=(t=a("fullscreen"))!=null?t:e.modifiers.fullscreen,f={text:l("text"),svg:l("svg"),svgViewBox:l("svgViewBox"),spinner:l("spinner"),background:l("background"),customClass:l("customClass"),fullscreen:u,target:(r=a("target"))!=null?r:u?void 0:n,body:(i=a("body"))!=null?i:e.modifiers.body,lock:(s=a("lock"))!=null?s:e.modifiers.lock};n[Pv]={options:f,instance:WU(f)}},$U=(n,e)=>{for(const t of Object.keys(e))Vf(e[t])&&(e[t].value=n[t])},XU={mounted(n,e){e.value&&Lw(n,e)},updated(n,e){const t=n[Pv];e.oldValue!==e.value&&(e.value&&!e.oldValue?Lw(n,e):e.value&&e.oldValue?Xl(e.value)&&$U(e.value,t.options):t==null||t.instance.close())},unmounted(n){var e;(e=n[Pv])==null||e.instance.close()}};/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const j_="171",Dl={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ml={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},KU=0,kw=1,YU=2,PT=1,QU=2,lo=3,Ea=0,Xr=1,_o=2,va=0,Ol=1,Dw=2,Ow=3,Uw=4,ZU=5,Za=100,JU=101,eF=102,tF=103,nF=104,rF=200,iF=201,sF=202,oF=203,Nv=204,Bv=205,aF=206,cF=207,lF=208,uF=209,fF=210,dF=211,hF=212,pF=213,mF=214,Lv=0,kv=1,Dv=2,nu=3,Ov=4,Uv=5,Fv=6,Hv=7,NT=0,gF=1,vF=2,ya=0,yF=1,_F=2,bF=3,xF=4,wF=5,AF=6,EF=7,BT=300,ru=301,iu=302,zv=303,Gv=304,Wm=306,Vv=1e3,nc=1001,Wv=1002,es=1003,SF=1004,ah=1005,Ps=1006,W0=1007,rc=1008,Bo=1009,LT=1010,kT=1011,Kf=1012,q_=1013,xc=1014,Eo=1015,kd=1016,$_=1017,X_=1018,su=1020,DT=35902,OT=1021,UT=1022,Qi=1023,FT=1024,HT=1025,Ul=1026,ou=1027,zT=1028,K_=1029,GT=1030,Y_=1031,Q_=1033,jh=33776,qh=33777,$h=33778,Xh=33779,jv=35840,qv=35841,$v=35842,Xv=35843,Kv=36196,Yv=37492,Qv=37496,Zv=37808,Jv=37809,ey=37810,ty=37811,ny=37812,ry=37813,iy=37814,sy=37815,oy=37816,ay=37817,cy=37818,ly=37819,uy=37820,fy=37821,Kh=36492,dy=36494,hy=36495,VT=36283,py=36284,my=36285,gy=36286,TF=3200,MF=3201,RF=0,IF=1,fa="",Si="srgb",au="srgb-linear",Mp="linear",dn="srgb",Yc=7680,Fw=519,CF=512,PF=513,NF=514,WT=515,BF=516,LF=517,kF=518,DF=519,Hw=35044,zw="300 es",So=2e3,Rp=2001;class Gc{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const dr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Gw=1234567;const Pf=Math.PI/180,Yf=180/Math.PI;function Uu(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(dr[n&255]+dr[n>>8&255]+dr[n>>16&255]+dr[n>>24&255]+"-"+dr[e&255]+dr[e>>8&255]+"-"+dr[e>>16&15|64]+dr[e>>24&255]+"-"+dr[t&63|128]+dr[t>>8&255]+"-"+dr[t>>16&255]+dr[t>>24&255]+dr[r&255]+dr[r>>8&255]+dr[r>>16&255]+dr[r>>24&255]).toLowerCase()}function It(n,e,t){return Math.max(e,Math.min(t,n))}function Z_(n,e){return(n%e+e)%e}function OF(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function UF(n,e,t){return n!==e?(t-n)/(e-n):0}function Nf(n,e,t){return(1-t)*n+t*e}function FF(n,e,t,r){return Nf(n,e,1-Math.exp(-t*r))}function HF(n,e=1){return e-Math.abs(Z_(n,e*2)-e)}function zF(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function GF(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function VF(n,e){return n+Math.floor(Math.random()*(e-n+1))}function WF(n,e){return n+Math.random()*(e-n)}function jF(n){return n*(.5-Math.random())}function qF(n){n!==void 0&&(Gw=n);let e=Gw+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function $F(n){return n*Pf}function XF(n){return n*Yf}function KF(n){return(n&n-1)===0&&n!==0}function YF(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function QF(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function ZF(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),c=o(t/2),l=s((e+r)/2),u=o((e+r)/2),f=s((e-r)/2),d=o((e-r)/2),p=s((r-e)/2),v=o((r-e)/2);switch(i){case"XYX":n.set(a*u,c*f,c*d,a*l);break;case"YZY":n.set(c*d,a*u,c*f,a*l);break;case"ZXZ":n.set(c*f,c*d,a*u,a*l);break;case"XZX":n.set(a*u,c*v,c*p,a*l);break;case"YXY":n.set(c*p,a*u,c*v,a*l);break;case"ZYZ":n.set(c*v,c*p,a*u,a*l);break;default:}}function _l(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Ar(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const JF={DEG2RAD:Pf,RAD2DEG:Yf,generateUUID:Uu,clamp:It,euclideanModulo:Z_,mapLinear:OF,inverseLerp:UF,lerp:Nf,damp:FF,pingpong:HF,smoothstep:zF,smootherstep:GF,randInt:VF,randFloat:WF,randFloatSpread:jF,seededRandom:qF,degToRad:$F,radToDeg:XF,isPowerOfTwo:KF,ceilPowerOfTwo:YF,floorPowerOfTwo:QF,setQuaternionFromProperEuler:ZF,normalize:Ar,denormalize:_l};class Rt{constructor(e=0,t=0){Rt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=It(this.x,e.x,t.x),this.y=It(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=It(this.x,e,t),this.y=It(this.y,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(It(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(It(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class wt{constructor(e,t,r,i,s,o,a,c,l){wt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,c,l)}set(e,t,r,i,s,o,a,c,l){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=s,u[5]=c,u[6]=r,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],c=r[6],l=r[1],u=r[4],f=r[7],d=r[2],p=r[5],v=r[8],m=i[0],y=i[3],h=i[6],w=i[1],S=i[4],T=i[7],C=i[2],B=i[5],O=i[8];return s[0]=o*m+a*w+c*C,s[3]=o*y+a*S+c*B,s[6]=o*h+a*T+c*O,s[1]=l*m+u*w+f*C,s[4]=l*y+u*S+f*B,s[7]=l*h+u*T+f*O,s[2]=d*m+p*w+v*C,s[5]=d*y+p*S+v*B,s[8]=d*h+p*T+v*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-r*s*u+r*a*c+i*s*l-i*o*c}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],f=u*o-a*l,d=a*c-u*s,p=l*s-o*c,v=t*f+r*d+i*p;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/v;return e[0]=f*m,e[1]=(i*l-u*r)*m,e[2]=(a*r-i*o)*m,e[3]=d*m,e[4]=(u*t-i*c)*m,e[5]=(i*s-a*t)*m,e[6]=p*m,e[7]=(r*c-l*t)*m,e[8]=(o*t-r*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const c=Math.cos(s),l=Math.sin(s);return this.set(r*c,r*l,-r*(c*o+l*a)+o+e,-i*l,i*c,-i*(-l*o+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(j0.makeScale(e,t)),this}rotate(e){return this.premultiply(j0.makeRotation(-e)),this}translate(e,t){return this.premultiply(j0.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const j0=new wt;function jT(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Ip(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function e5(){const n=Ip("canvas");return n.style.display="block",n}const Vw={};function bl(n){n in Vw||(Vw[n]=!0)}function t5(n,e,t){return new Promise(function(r,i){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:r()}}setTimeout(s,t)})}function n5(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function r5(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const Ww=new wt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),jw=new wt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function i5(){const n={enabled:!0,workingColorSpace:au,spaces:{},convert:function(i,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===dn&&(i.r=Io(i.r),i.g=Io(i.g),i.b=Io(i.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===dn&&(i.r=Fl(i.r),i.g=Fl(i.g),i.b=Fl(i.b))),i},fromWorkingColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},toWorkingColorSpace:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===fa?Mp:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,o){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],r=[.3127,.329];return n.define({[au]:{primaries:e,whitePoint:r,transfer:Mp,toXYZ:Ww,fromXYZ:jw,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Si},outputColorSpaceConfig:{drawingBufferColorSpace:Si}},[Si]:{primaries:e,whitePoint:r,transfer:dn,toXYZ:Ww,fromXYZ:jw,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Si}}}),n}const Kt=i5();function Io(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Fl(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Qc;class s5{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Qc===void 0&&(Qc=Ip("canvas")),Qc.width=e.width,Qc.height=e.height;const r=Qc.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Qc}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Ip("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Io(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Io(t[r]/255)*255):t[r]=Io(t[r]);return{data:t,width:e.width,height:e.height}}else return e}}let o5=0;class qT{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:o5++}),this.uuid=Uu(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(q0(i[o].image)):s.push(q0(i[o]))}else s=q0(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function q0(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?s5.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:{}}let a5=0;class Rr extends Gc{constructor(e=Rr.DEFAULT_IMAGE,t=Rr.DEFAULT_MAPPING,r=nc,i=nc,s=Ps,o=rc,a=Qi,c=Bo,l=Rr.DEFAULT_ANISOTROPY,u=fa){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:a5++}),this.uuid=Uu(),this.name="",this.source=new qT(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=c,this.offset=new Rt(0,0),this.repeat=new Rt(1,1),this.center=new Rt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new wt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==BT)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Vv:e.x=e.x-Math.floor(e.x);break;case nc:e.x=e.x<0?0:1;break;case Wv:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Vv:e.y=e.y-Math.floor(e.y);break;case nc:e.y=e.y<0?0:1;break;case Wv:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Rr.DEFAULT_IMAGE=null;Rr.DEFAULT_MAPPING=BT;Rr.DEFAULT_ANISOTROPY=1;class On{constructor(e=0,t=0,r=0,i=1){On.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const c=e.elements,l=c[0],u=c[4],f=c[8],d=c[1],p=c[5],v=c[9],m=c[2],y=c[6],h=c[10];if(Math.abs(u-d)<.01&&Math.abs(f-m)<.01&&Math.abs(v-y)<.01){if(Math.abs(u+d)<.1&&Math.abs(f+m)<.1&&Math.abs(v+y)<.1&&Math.abs(l+p+h-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(l+1)/2,T=(p+1)/2,C=(h+1)/2,B=(u+d)/4,O=(f+m)/4,P=(v+y)/4;return S>T&&S>C?S<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(S),i=B/r,s=O/r):T>C?T<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(T),r=B/i,s=P/i):C<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(C),r=O/s,i=P/s),this.set(r,i,s,t),this}let w=Math.sqrt((y-v)*(y-v)+(f-m)*(f-m)+(d-u)*(d-u));return Math.abs(w)<.001&&(w=1),this.x=(y-v)/w,this.y=(f-m)/w,this.z=(d-u)/w,this.w=Math.acos((l+p+h-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=It(this.x,e.x,t.x),this.y=It(this.y,e.y,t.y),this.z=It(this.z,e.z,t.z),this.w=It(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=It(this.x,e,t),this.y=It(this.y,e,t),this.z=It(this.z,e,t),this.w=It(this.w,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(It(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class c5 extends Gc{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new On(0,0,e,t),this.scissorTest=!1,this.viewport=new On(0,0,e,t);const i={width:e,height:t,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ps,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const s=new Rr(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new qT(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class wc extends c5{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class $T extends Rr{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=es,this.minFilter=es,this.wrapR=nc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class l5 extends Rr{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=es,this.minFilter=es,this.wrapR=nc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ac{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let c=r[i+0],l=r[i+1],u=r[i+2],f=r[i+3];const d=s[o+0],p=s[o+1],v=s[o+2],m=s[o+3];if(a===0){e[t+0]=c,e[t+1]=l,e[t+2]=u,e[t+3]=f;return}if(a===1){e[t+0]=d,e[t+1]=p,e[t+2]=v,e[t+3]=m;return}if(f!==m||c!==d||l!==p||u!==v){let y=1-a;const h=c*d+l*p+u*v+f*m,w=h>=0?1:-1,S=1-h*h;if(S>Number.EPSILON){const C=Math.sqrt(S),B=Math.atan2(C,h*w);y=Math.sin(y*B)/C,a=Math.sin(a*B)/C}const T=a*w;if(c=c*y+d*T,l=l*y+p*T,u=u*y+v*T,f=f*y+m*T,y===1-a){const C=1/Math.sqrt(c*c+l*l+u*u+f*f);c*=C,l*=C,u*=C,f*=C}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=f}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],c=r[i+1],l=r[i+2],u=r[i+3],f=s[o],d=s[o+1],p=s[o+2],v=s[o+3];return e[t]=a*v+u*f+c*p-l*d,e[t+1]=c*v+u*d+l*f-a*p,e[t+2]=l*v+u*p+a*d-c*f,e[t+3]=u*v-a*f-c*d-l*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,l=a(r/2),u=a(i/2),f=a(s/2),d=c(r/2),p=c(i/2),v=c(s/2);switch(o){case"XYZ":this._x=d*u*f+l*p*v,this._y=l*p*f-d*u*v,this._z=l*u*v+d*p*f,this._w=l*u*f-d*p*v;break;case"YXZ":this._x=d*u*f+l*p*v,this._y=l*p*f-d*u*v,this._z=l*u*v-d*p*f,this._w=l*u*f+d*p*v;break;case"ZXY":this._x=d*u*f-l*p*v,this._y=l*p*f+d*u*v,this._z=l*u*v+d*p*f,this._w=l*u*f-d*p*v;break;case"ZYX":this._x=d*u*f-l*p*v,this._y=l*p*f+d*u*v,this._z=l*u*v-d*p*f,this._w=l*u*f+d*p*v;break;case"YZX":this._x=d*u*f+l*p*v,this._y=l*p*f+d*u*v,this._z=l*u*v-d*p*f,this._w=l*u*f-d*p*v;break;case"XZY":this._x=d*u*f-l*p*v,this._y=l*p*f-d*u*v,this._z=l*u*v+d*p*f,this._w=l*u*f+d*p*v;break;default:}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],c=t[9],l=t[2],u=t[6],f=t[10],d=r+a+f;if(d>0){const p=.5/Math.sqrt(d+1);this._w=.25/p,this._x=(u-c)*p,this._y=(s-l)*p,this._z=(o-i)*p}else if(r>a&&r>f){const p=2*Math.sqrt(1+r-a-f);this._w=(u-c)/p,this._x=.25*p,this._y=(i+o)/p,this._z=(s+l)/p}else if(a>f){const p=2*Math.sqrt(1+a-r-f);this._w=(s-l)/p,this._x=(i+o)/p,this._y=.25*p,this._z=(c+u)/p}else{const p=2*Math.sqrt(1+f-r-a);this._w=(o-i)/p,this._x=(s+l)/p,this._y=(c+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(It(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=r*u+o*a+i*l-s*c,this._y=i*u+o*c+s*a-r*l,this._z=s*u+o*l+r*c-i*a,this._w=o*u-r*a-i*c-s*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const p=1-t;return this._w=p*o+t*this._w,this._x=p*r+t*this._x,this._y=p*i+t*this._y,this._z=p*s+t*this._z,this.normalize(),this}const l=Math.sqrt(c),u=Math.atan2(l,a),f=Math.sin((1-t)*u)/l,d=Math.sin(t*u)/l;return this._w=o*f+this._w*d,this._x=r*f+this._x*d,this._y=i*f+this._y*d,this._z=s*f+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class oe{constructor(e=0,t=0,r=0){oe.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(qw.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(qw.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,c=e.w,l=2*(o*i-a*r),u=2*(a*t-s*i),f=2*(s*r-o*t);return this.x=t+c*l+o*f-a*u,this.y=r+c*u+a*l-s*f,this.z=i+c*f+s*u-o*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=It(this.x,e.x,t.x),this.y=It(this.y,e.y,t.y),this.z=It(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=It(this.x,e,t),this.y=It(this.y,e,t),this.z=It(this.z,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(It(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=i*c-s*a,this.y=s*o-r*c,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return $0.copy(this).projectOnVector(e),this.sub($0)}reflect(e){return this.sub($0.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(It(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const $0=new oe,qw=new Ac;class Dd{constructor(e=new oe(1/0,1/0,1/0),t=new oe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Hi.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Hi.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Hi.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Hi):Hi.fromBufferAttribute(s,o),Hi.applyMatrix4(e.matrixWorld),this.expandByPoint(Hi);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),ch.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),ch.copy(r.boundingBox)),ch.applyMatrix4(e.matrixWorld),this.union(ch)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Hi),Hi.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(of),lh.subVectors(this.max,of),Zc.subVectors(e.a,of),Jc.subVectors(e.b,of),el.subVectors(e.c,of),Qo.subVectors(Jc,Zc),Zo.subVectors(el,Jc),Ha.subVectors(Zc,el);let t=[0,-Qo.z,Qo.y,0,-Zo.z,Zo.y,0,-Ha.z,Ha.y,Qo.z,0,-Qo.x,Zo.z,0,-Zo.x,Ha.z,0,-Ha.x,-Qo.y,Qo.x,0,-Zo.y,Zo.x,0,-Ha.y,Ha.x,0];return!X0(t,Zc,Jc,el,lh)||(t=[1,0,0,0,1,0,0,0,1],!X0(t,Zc,Jc,el,lh))?!1:(uh.crossVectors(Qo,Zo),t=[uh.x,uh.y,uh.z],X0(t,Zc,Jc,el,lh))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Hi).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Hi).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Js[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Js[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Js[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Js[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Js[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Js[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Js[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Js[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Js),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Js=[new oe,new oe,new oe,new oe,new oe,new oe,new oe,new oe],Hi=new oe,ch=new Dd,Zc=new oe,Jc=new oe,el=new oe,Qo=new oe,Zo=new oe,Ha=new oe,of=new oe,lh=new oe,uh=new oe,za=new oe;function X0(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){za.fromArray(n,s);const a=i.x*Math.abs(za.x)+i.y*Math.abs(za.y)+i.z*Math.abs(za.z),c=e.dot(za),l=t.dot(za),u=r.dot(za);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}const u5=new Dd,af=new oe,K0=new oe;class jm{constructor(e=new oe,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):u5.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;af.subVectors(e,this.center);const t=af.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(af,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(K0.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(af.copy(e.center).add(K0)),this.expandByPoint(af.copy(e.center).sub(K0))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const eo=new oe,Y0=new oe,fh=new oe,Jo=new oe,Q0=new oe,dh=new oe,Z0=new oe;class J_{constructor(e=new oe,t=new oe(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,eo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=eo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(eo.copy(this.origin).addScaledVector(this.direction,t),eo.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){Y0.copy(e).add(t).multiplyScalar(.5),fh.copy(t).sub(e).normalize(),Jo.copy(this.origin).sub(Y0);const s=e.distanceTo(t)*.5,o=-this.direction.dot(fh),a=Jo.dot(this.direction),c=-Jo.dot(fh),l=Jo.lengthSq(),u=Math.abs(1-o*o);let f,d,p,v;if(u>0)if(f=o*c-a,d=o*a-c,v=s*u,f>=0)if(d>=-v)if(d<=v){const m=1/u;f*=m,d*=m,p=f*(f+o*d+2*a)+d*(o*f+d+2*c)+l}else d=s,f=Math.max(0,-(o*d+a)),p=-f*f+d*(d+2*c)+l;else d=-s,f=Math.max(0,-(o*d+a)),p=-f*f+d*(d+2*c)+l;else d<=-v?(f=Math.max(0,-(-o*s+a)),d=f>0?-s:Math.min(Math.max(-s,-c),s),p=-f*f+d*(d+2*c)+l):d<=v?(f=0,d=Math.min(Math.max(-s,-c),s),p=d*(d+2*c)+l):(f=Math.max(0,-(o*s+a)),d=f>0?s:Math.min(Math.max(-s,-c),s),p=-f*f+d*(d+2*c)+l);else d=o>0?-s:s,f=Math.max(0,-(o*d+a)),p=-f*f+d*(d+2*c)+l;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(Y0).addScaledVector(fh,d),p}intersectSphere(e,t){eo.subVectors(e.center,this.origin);const r=eo.dot(this.direction),i=eo.dot(eo)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,c=r+o;return c<0?null:a<0?this.at(c,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,c;const l=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,d=this.origin;return l>=0?(r=(e.min.x-d.x)*l,i=(e.max.x-d.x)*l):(r=(e.max.x-d.x)*l,i=(e.min.x-d.x)*l),u>=0?(s=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(s=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),f>=0?(a=(e.min.z-d.z)*f,c=(e.max.z-d.z)*f):(a=(e.max.z-d.z)*f,c=(e.min.z-d.z)*f),r>c||a>i)||((a>r||r!==r)&&(r=a),(c<i||i!==i)&&(i=c),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,eo)!==null}intersectTriangle(e,t,r,i,s){Q0.subVectors(t,e),dh.subVectors(r,e),Z0.crossVectors(Q0,dh);let o=this.direction.dot(Z0),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Jo.subVectors(this.origin,e);const c=a*this.direction.dot(dh.crossVectors(Jo,dh));if(c<0)return null;const l=a*this.direction.dot(Q0.cross(Jo));if(l<0||c+l>o)return null;const u=-a*Jo.dot(Z0);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Un{constructor(e,t,r,i,s,o,a,c,l,u,f,d,p,v,m,y){Un.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,c,l,u,f,d,p,v,m,y)}set(e,t,r,i,s,o,a,c,l,u,f,d,p,v,m,y){const h=this.elements;return h[0]=e,h[4]=t,h[8]=r,h[12]=i,h[1]=s,h[5]=o,h[9]=a,h[13]=c,h[2]=l,h[6]=u,h[10]=f,h[14]=d,h[3]=p,h[7]=v,h[11]=m,h[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Un().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/tl.setFromMatrixColumn(e,0).length(),s=1/tl.setFromMatrixColumn(e,1).length(),o=1/tl.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),c=Math.cos(i),l=Math.sin(i),u=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const d=o*u,p=o*f,v=a*u,m=a*f;t[0]=c*u,t[4]=-c*f,t[8]=l,t[1]=p+v*l,t[5]=d-m*l,t[9]=-a*c,t[2]=m-d*l,t[6]=v+p*l,t[10]=o*c}else if(e.order==="YXZ"){const d=c*u,p=c*f,v=l*u,m=l*f;t[0]=d+m*a,t[4]=v*a-p,t[8]=o*l,t[1]=o*f,t[5]=o*u,t[9]=-a,t[2]=p*a-v,t[6]=m+d*a,t[10]=o*c}else if(e.order==="ZXY"){const d=c*u,p=c*f,v=l*u,m=l*f;t[0]=d-m*a,t[4]=-o*f,t[8]=v+p*a,t[1]=p+v*a,t[5]=o*u,t[9]=m-d*a,t[2]=-o*l,t[6]=a,t[10]=o*c}else if(e.order==="ZYX"){const d=o*u,p=o*f,v=a*u,m=a*f;t[0]=c*u,t[4]=v*l-p,t[8]=d*l+m,t[1]=c*f,t[5]=m*l+d,t[9]=p*l-v,t[2]=-l,t[6]=a*c,t[10]=o*c}else if(e.order==="YZX"){const d=o*c,p=o*l,v=a*c,m=a*l;t[0]=c*u,t[4]=m-d*f,t[8]=v*f+p,t[1]=f,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=p*f+v,t[10]=d-m*f}else if(e.order==="XZY"){const d=o*c,p=o*l,v=a*c,m=a*l;t[0]=c*u,t[4]=-f,t[8]=l*u,t[1]=d*f+m,t[5]=o*u,t[9]=p*f-v,t[2]=v*f-p,t[6]=a*u,t[10]=m*f+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(f5,e,d5)}lookAt(e,t,r){const i=this.elements;return ei.subVectors(e,t),ei.lengthSq()===0&&(ei.z=1),ei.normalize(),ea.crossVectors(r,ei),ea.lengthSq()===0&&(Math.abs(r.z)===1?ei.x+=1e-4:ei.z+=1e-4,ei.normalize(),ea.crossVectors(r,ei)),ea.normalize(),hh.crossVectors(ei,ea),i[0]=ea.x,i[4]=hh.x,i[8]=ei.x,i[1]=ea.y,i[5]=hh.y,i[9]=ei.y,i[2]=ea.z,i[6]=hh.z,i[10]=ei.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],c=r[8],l=r[12],u=r[1],f=r[5],d=r[9],p=r[13],v=r[2],m=r[6],y=r[10],h=r[14],w=r[3],S=r[7],T=r[11],C=r[15],B=i[0],O=i[4],P=i[8],N=i[12],I=i[1],U=i[5],q=i[9],M=i[13],g=i[2],_=i[6],b=i[10],E=i[14],R=i[3],L=i[7],G=i[11],k=i[15];return s[0]=o*B+a*I+c*g+l*R,s[4]=o*O+a*U+c*_+l*L,s[8]=o*P+a*q+c*b+l*G,s[12]=o*N+a*M+c*E+l*k,s[1]=u*B+f*I+d*g+p*R,s[5]=u*O+f*U+d*_+p*L,s[9]=u*P+f*q+d*b+p*G,s[13]=u*N+f*M+d*E+p*k,s[2]=v*B+m*I+y*g+h*R,s[6]=v*O+m*U+y*_+h*L,s[10]=v*P+m*q+y*b+h*G,s[14]=v*N+m*M+y*E+h*k,s[3]=w*B+S*I+T*g+C*R,s[7]=w*O+S*U+T*_+C*L,s[11]=w*P+S*q+T*b+C*G,s[15]=w*N+S*M+T*E+C*k,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],c=e[9],l=e[13],u=e[2],f=e[6],d=e[10],p=e[14],v=e[3],m=e[7],y=e[11],h=e[15];return v*(+s*c*f-i*l*f-s*a*d+r*l*d+i*a*p-r*c*p)+m*(+t*c*p-t*l*d+s*o*d-i*o*p+i*l*u-s*c*u)+y*(+t*l*f-t*a*p-s*o*f+r*o*p+s*a*u-r*l*u)+h*(-i*a*u-t*c*f+t*a*d+i*o*f-r*o*d+r*c*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],f=e[9],d=e[10],p=e[11],v=e[12],m=e[13],y=e[14],h=e[15],w=f*y*l-m*d*l+m*c*p-a*y*p-f*c*h+a*d*h,S=v*d*l-u*y*l-v*c*p+o*y*p+u*c*h-o*d*h,T=u*m*l-v*f*l+v*a*p-o*m*p-u*a*h+o*f*h,C=v*f*c-u*m*c-v*a*d+o*m*d+u*a*y-o*f*y,B=t*w+r*S+i*T+s*C;if(B===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/B;return e[0]=w*O,e[1]=(m*d*s-f*y*s-m*i*p+r*y*p+f*i*h-r*d*h)*O,e[2]=(a*y*s-m*c*s+m*i*l-r*y*l-a*i*h+r*c*h)*O,e[3]=(f*c*s-a*d*s-f*i*l+r*d*l+a*i*p-r*c*p)*O,e[4]=S*O,e[5]=(u*y*s-v*d*s+v*i*p-t*y*p-u*i*h+t*d*h)*O,e[6]=(v*c*s-o*y*s-v*i*l+t*y*l+o*i*h-t*c*h)*O,e[7]=(o*d*s-u*c*s+u*i*l-t*d*l-o*i*p+t*c*p)*O,e[8]=T*O,e[9]=(v*f*s-u*m*s-v*r*p+t*m*p+u*r*h-t*f*h)*O,e[10]=(o*m*s-v*a*s+v*r*l-t*m*l-o*r*h+t*a*h)*O,e[11]=(u*a*s-o*f*s-u*r*l+t*f*l+o*r*p-t*a*p)*O,e[12]=C*O,e[13]=(u*m*i-v*f*i+v*r*d-t*m*d-u*r*y+t*f*y)*O,e[14]=(v*a*i-o*m*i-v*r*c+t*m*c+o*r*y-t*a*y)*O,e[15]=(o*f*i-u*a*i+u*r*c-t*f*c-o*r*d+t*a*d)*O,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,c=e.z,l=s*o,u=s*a;return this.set(l*o+r,l*a-i*c,l*c+i*a,0,l*a+i*c,u*a+r,u*c-i*o,0,l*c-i*a,u*c+i*o,s*c*c+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,l=s+s,u=o+o,f=a+a,d=s*l,p=s*u,v=s*f,m=o*u,y=o*f,h=a*f,w=c*l,S=c*u,T=c*f,C=r.x,B=r.y,O=r.z;return i[0]=(1-(m+h))*C,i[1]=(p+T)*C,i[2]=(v-S)*C,i[3]=0,i[4]=(p-T)*B,i[5]=(1-(d+h))*B,i[6]=(y+w)*B,i[7]=0,i[8]=(v+S)*O,i[9]=(y-w)*O,i[10]=(1-(d+m))*O,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=tl.set(i[0],i[1],i[2]).length();const o=tl.set(i[4],i[5],i[6]).length(),a=tl.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],zi.copy(this);const l=1/s,u=1/o,f=1/a;return zi.elements[0]*=l,zi.elements[1]*=l,zi.elements[2]*=l,zi.elements[4]*=u,zi.elements[5]*=u,zi.elements[6]*=u,zi.elements[8]*=f,zi.elements[9]*=f,zi.elements[10]*=f,t.setFromRotationMatrix(zi),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=So){const c=this.elements,l=2*s/(t-e),u=2*s/(r-i),f=(t+e)/(t-e),d=(r+i)/(r-i);let p,v;if(a===So)p=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===Rp)p=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return c[0]=l,c[4]=0,c[8]=f,c[12]=0,c[1]=0,c[5]=u,c[9]=d,c[13]=0,c[2]=0,c[6]=0,c[10]=p,c[14]=v,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=So){const c=this.elements,l=1/(t-e),u=1/(r-i),f=1/(o-s),d=(t+e)*l,p=(r+i)*u;let v,m;if(a===So)v=(o+s)*f,m=-2*f;else if(a===Rp)v=s*f,m=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return c[0]=2*l,c[4]=0,c[8]=0,c[12]=-d,c[1]=0,c[5]=2*u,c[9]=0,c[13]=-p,c[2]=0,c[6]=0,c[10]=m,c[14]=-v,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const tl=new oe,zi=new Un,f5=new oe(0,0,0),d5=new oe(1,1,1),ea=new oe,hh=new oe,ei=new oe,$w=new Un,Xw=new Ac;class Lo{constructor(e=0,t=0,r=0,i=Lo.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],c=i[1],l=i[5],u=i[9],f=i[2],d=i[6],p=i[10];switch(t){case"XYZ":this._y=Math.asin(It(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-It(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(It(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-It(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(It(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-It(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,p),this._y=0);break;default:}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return $w.makeRotationFromQuaternion(e),this.setFromRotationMatrix($w,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Xw.setFromEuler(this),this.setFromQuaternion(Xw,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Lo.DEFAULT_ORDER="XYZ";class XT{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let h5=0;const Kw=new oe,nl=new Ac,to=new Un,ph=new oe,cf=new oe,p5=new oe,m5=new Ac,Yw=new oe(1,0,0),Qw=new oe(0,1,0),Zw=new oe(0,0,1),Jw={type:"added"},g5={type:"removed"},rl={type:"childadded",child:null},J0={type:"childremoved",child:null};class Kr extends Gc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:h5++}),this.uuid=Uu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Kr.DEFAULT_UP.clone();const e=new oe,t=new Lo,r=new Ac,i=new oe(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Un},normalMatrix:{value:new wt}}),this.matrix=new Un,this.matrixWorld=new Un,this.matrixAutoUpdate=Kr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Kr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new XT,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return nl.setFromAxisAngle(e,t),this.quaternion.multiply(nl),this}rotateOnWorldAxis(e,t){return nl.setFromAxisAngle(e,t),this.quaternion.premultiply(nl),this}rotateX(e){return this.rotateOnAxis(Yw,e)}rotateY(e){return this.rotateOnAxis(Qw,e)}rotateZ(e){return this.rotateOnAxis(Zw,e)}translateOnAxis(e,t){return Kw.copy(e).applyQuaternion(this.quaternion),this.position.add(Kw.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Yw,e)}translateY(e){return this.translateOnAxis(Qw,e)}translateZ(e){return this.translateOnAxis(Zw,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(to.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?ph.copy(e):ph.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),cf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?to.lookAt(cf,ph,this.up):to.lookAt(ph,cf,this.up),this.quaternion.setFromRotationMatrix(to),i&&(to.extractRotation(i.matrixWorld),nl.setFromRotationMatrix(to),this.quaternion.premultiply(nl.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?this:(e&&e.isObject3D&&(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Jw),rl.child=e,this.dispatchEvent(rl),rl.child=null),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(g5),J0.child=e,this.dispatchEvent(J0),J0.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),to.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),to.multiply(e.parent.matrixWorld)),e.applyMatrix4(to),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Jw),rl.child=e,this.dispatchEvent(rl),rl.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(cf,e,p5),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(cf,m5,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,c){return a[c.uuid]===void 0&&(a[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const c=a.shapes;if(Array.isArray(c))for(let l=0,u=c.length;l<u;l++){const f=c[l];s(e.shapes,f)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let c=0,l=this.material.length;c<l;c++)a.push(s(e.materials,this.material[c]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const c=this.animations[a];i.animations.push(s(e.animations,c))}}if(t){const a=o(e.geometries),c=o(e.materials),l=o(e.textures),u=o(e.images),f=o(e.shapes),d=o(e.skeletons),p=o(e.animations),v=o(e.nodes);a.length>0&&(r.geometries=a),c.length>0&&(r.materials=c),l.length>0&&(r.textures=l),u.length>0&&(r.images=u),f.length>0&&(r.shapes=f),d.length>0&&(r.skeletons=d),p.length>0&&(r.animations=p),v.length>0&&(r.nodes=v)}return r.object=i,r;function o(a){const c=[];for(const l in a){const u=a[l];delete u.metadata,c.push(u)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Kr.DEFAULT_UP=new oe(0,1,0);Kr.DEFAULT_MATRIX_AUTO_UPDATE=!0;Kr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Gi=new oe,no=new oe,eg=new oe,ro=new oe,il=new oe,sl=new oe,eA=new oe,tg=new oe,ng=new oe,rg=new oe,ig=new On,sg=new On,og=new On;class Yi{constructor(e=new oe,t=new oe,r=new oe){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Gi.subVectors(e,t),i.cross(Gi);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Gi.subVectors(i,t),no.subVectors(r,t),eg.subVectors(e,t);const o=Gi.dot(Gi),a=Gi.dot(no),c=Gi.dot(eg),l=no.dot(no),u=no.dot(eg),f=o*l-a*a;if(f===0)return s.set(0,0,0),null;const d=1/f,p=(l*c-a*u)*d,v=(o*u-a*c)*d;return s.set(1-p-v,v,p)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,ro)===null?!1:ro.x>=0&&ro.y>=0&&ro.x+ro.y<=1}static getInterpolation(e,t,r,i,s,o,a,c){return this.getBarycoord(e,t,r,i,ro)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,ro.x),c.addScaledVector(o,ro.y),c.addScaledVector(a,ro.z),c)}static getInterpolatedAttribute(e,t,r,i,s,o){return ig.setScalar(0),sg.setScalar(0),og.setScalar(0),ig.fromBufferAttribute(e,t),sg.fromBufferAttribute(e,r),og.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(ig,s.x),o.addScaledVector(sg,s.y),o.addScaledVector(og,s.z),o}static isFrontFacing(e,t,r,i){return Gi.subVectors(r,t),no.subVectors(e,t),Gi.cross(no).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Gi.subVectors(this.c,this.b),no.subVectors(this.a,this.b),Gi.cross(no).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Yi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Yi.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return Yi.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return Yi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Yi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;il.subVectors(i,r),sl.subVectors(s,r),tg.subVectors(e,r);const c=il.dot(tg),l=sl.dot(tg);if(c<=0&&l<=0)return t.copy(r);ng.subVectors(e,i);const u=il.dot(ng),f=sl.dot(ng);if(u>=0&&f<=u)return t.copy(i);const d=c*f-u*l;if(d<=0&&c>=0&&u<=0)return o=c/(c-u),t.copy(r).addScaledVector(il,o);rg.subVectors(e,s);const p=il.dot(rg),v=sl.dot(rg);if(v>=0&&p<=v)return t.copy(s);const m=p*l-c*v;if(m<=0&&l>=0&&v<=0)return a=l/(l-v),t.copy(r).addScaledVector(sl,a);const y=u*v-p*f;if(y<=0&&f-u>=0&&p-v>=0)return eA.subVectors(s,i),a=(f-u)/(f-u+(p-v)),t.copy(i).addScaledVector(eA,a);const h=1/(y+m+d);return o=m*h,a=d*h,t.copy(r).addScaledVector(il,o).addScaledVector(sl,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const KT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ta={h:0,s:0,l:0},mh={h:0,s:0,l:0};function ag(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Wt{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Si){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Kt.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Kt.workingColorSpace){return this.r=e,this.g=t,this.b=r,Kt.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Kt.workingColorSpace){if(e=Z_(e,1),t=It(t,0,1),r=It(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=ag(o,s,e+1/3),this.g=ag(o,s,e),this.b=ag(o,s,e-1/3)}return Kt.toWorkingColorSpace(this,i),this}setStyle(e,t=Si){function r(s){s!==void 0&&parseFloat(s)<1}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Si){const r=KT[e.toLowerCase()];return r!==void 0&&this.setHex(r,t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Io(e.r),this.g=Io(e.g),this.b=Io(e.b),this}copyLinearToSRGB(e){return this.r=Fl(e.r),this.g=Fl(e.g),this.b=Fl(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Si){return Kt.fromWorkingColorSpace(hr.copy(this),e),Math.round(It(hr.r*255,0,255))*65536+Math.round(It(hr.g*255,0,255))*256+Math.round(It(hr.b*255,0,255))}getHexString(e=Si){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Kt.workingColorSpace){Kt.fromWorkingColorSpace(hr.copy(this),t);const r=hr.r,i=hr.g,s=hr.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let c,l;const u=(a+o)/2;if(a===o)c=0,l=0;else{const f=o-a;switch(l=u<=.5?f/(o+a):f/(2-o-a),o){case r:c=(i-s)/f+(i<s?6:0);break;case i:c=(s-r)/f+2;break;case s:c=(r-i)/f+4;break}c/=6}return e.h=c,e.s=l,e.l=u,e}getRGB(e,t=Kt.workingColorSpace){return Kt.fromWorkingColorSpace(hr.copy(this),t),e.r=hr.r,e.g=hr.g,e.b=hr.b,e}getStyle(e=Si){Kt.fromWorkingColorSpace(hr.copy(this),e);const t=hr.r,r=hr.g,i=hr.b;return e!==Si?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(ta),this.setHSL(ta.h+e,ta.s+t,ta.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(ta),e.getHSL(mh);const r=Nf(ta.h,mh.h,t),i=Nf(ta.s,mh.s,t),s=Nf(ta.l,mh.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const hr=new Wt;Wt.NAMES=KT;let v5=0;class Od extends Gc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:v5++}),this.uuid=Uu(),this.name="",this.type="Material",this.blending=Ol,this.side=Ea,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Nv,this.blendDst=Bv,this.blendEquation=Za,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Wt(0,0,0),this.blendAlpha=0,this.depthFunc=nu,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Fw,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Yc,this.stencilZFail=Yc,this.stencilZPass=Yc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0)continue;const i=this[t];i!==void 0&&(i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r)}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Ol&&(r.blending=this.blending),this.side!==Ea&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==Nv&&(r.blendSrc=this.blendSrc),this.blendDst!==Bv&&(r.blendDst=this.blendDst),this.blendEquation!==Za&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==nu&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Fw&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Yc&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Yc&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Yc&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const c=s[a];delete c.metadata,o.push(c)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){}}class eb extends Od{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Wt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Lo,this.combine=NT,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Fn=new oe,gh=new Rt;class Vr{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=Hw,this.updateRanges=[],this.gpuType=Eo,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)gh.fromBufferAttribute(this,t),gh.applyMatrix3(e),this.setXY(t,gh.x,gh.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Fn.fromBufferAttribute(this,t),Fn.applyMatrix3(e),this.setXYZ(t,Fn.x,Fn.y,Fn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Fn.fromBufferAttribute(this,t),Fn.applyMatrix4(e),this.setXYZ(t,Fn.x,Fn.y,Fn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Fn.fromBufferAttribute(this,t),Fn.applyNormalMatrix(e),this.setXYZ(t,Fn.x,Fn.y,Fn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Fn.fromBufferAttribute(this,t),Fn.transformDirection(e),this.setXYZ(t,Fn.x,Fn.y,Fn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=_l(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Ar(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=_l(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ar(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=_l(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ar(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=_l(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ar(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=_l(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ar(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Ar(t,this.array),r=Ar(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Ar(t,this.array),r=Ar(r,this.array),i=Ar(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Ar(t,this.array),r=Ar(r,this.array),i=Ar(i,this.array),s=Ar(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Hw&&(e.usage=this.usage),e}}class YT extends Vr{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class QT extends Vr{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class Os extends Vr{constructor(e,t,r){super(new Float32Array(e),t,r)}}let y5=0;const _i=new Un,cg=new Kr,ol=new oe,ti=new Dd,lf=new Dd,Zn=new oe;class ns extends Gc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:y5++}),this.uuid=Uu(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(jT(e)?QT:YT)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new wt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return _i.makeRotationFromQuaternion(e),this.applyMatrix4(_i),this}rotateX(e){return _i.makeRotationX(e),this.applyMatrix4(_i),this}rotateY(e){return _i.makeRotationY(e),this.applyMatrix4(_i),this}rotateZ(e){return _i.makeRotationZ(e),this.applyMatrix4(_i),this}translate(e,t,r){return _i.makeTranslation(e,t,r),this.applyMatrix4(_i),this}scale(e,t,r){return _i.makeScale(e,t,r),this.applyMatrix4(_i),this}lookAt(e){return cg.lookAt(e),cg.updateMatrix(),this.applyMatrix4(cg.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ol).negate(),this.translate(ol.x,ol.y,ol.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const r=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];r.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Os(r,3))}else{const r=Math.min(e.length,t.count);for(let i=0;i<r;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count,t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Dd);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){this.boundingBox.set(new oe(-1/0,-1/0,-1/0),new oe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];ti.setFromBufferAttribute(s),this.morphTargetsRelative?(Zn.addVectors(this.boundingBox.min,ti.min),this.boundingBox.expandByPoint(Zn),Zn.addVectors(this.boundingBox.max,ti.max),this.boundingBox.expandByPoint(Zn)):(this.boundingBox.expandByPoint(ti.min),this.boundingBox.expandByPoint(ti.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new jm);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){this.boundingSphere.set(new oe,1/0);return}if(e){const r=this.boundingSphere.center;if(ti.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];lf.setFromBufferAttribute(a),this.morphTargetsRelative?(Zn.addVectors(ti.min,lf.min),ti.expandByPoint(Zn),Zn.addVectors(ti.max,lf.max),ti.expandByPoint(Zn)):(ti.expandByPoint(lf.min),ti.expandByPoint(lf.max))}ti.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)Zn.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Zn));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)Zn.fromBufferAttribute(a,l),c&&(ol.fromBufferAttribute(e,l),Zn.add(ol)),i=Math.max(i,r.distanceToSquared(Zn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0)return;const r=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Vr(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],c=[];for(let P=0;P<r.count;P++)a[P]=new oe,c[P]=new oe;const l=new oe,u=new oe,f=new oe,d=new Rt,p=new Rt,v=new Rt,m=new oe,y=new oe;function h(P,N,I){l.fromBufferAttribute(r,P),u.fromBufferAttribute(r,N),f.fromBufferAttribute(r,I),d.fromBufferAttribute(s,P),p.fromBufferAttribute(s,N),v.fromBufferAttribute(s,I),u.sub(l),f.sub(l),p.sub(d),v.sub(d);const U=1/(p.x*v.y-v.x*p.y);isFinite(U)&&(m.copy(u).multiplyScalar(v.y).addScaledVector(f,-p.y).multiplyScalar(U),y.copy(f).multiplyScalar(p.x).addScaledVector(u,-v.x).multiplyScalar(U),a[P].add(m),a[N].add(m),a[I].add(m),c[P].add(y),c[N].add(y),c[I].add(y))}let w=this.groups;w.length===0&&(w=[{start:0,count:e.count}]);for(let P=0,N=w.length;P<N;++P){const I=w[P],U=I.start,q=I.count;for(let M=U,g=U+q;M<g;M+=3)h(e.getX(M+0),e.getX(M+1),e.getX(M+2))}const S=new oe,T=new oe,C=new oe,B=new oe;function O(P){C.fromBufferAttribute(i,P),B.copy(C);const N=a[P];S.copy(N),S.sub(C.multiplyScalar(C.dot(N))).normalize(),T.crossVectors(B,N);const U=T.dot(c[P])<0?-1:1;o.setXYZW(P,S.x,S.y,S.z,U)}for(let P=0,N=w.length;P<N;++P){const I=w[P],U=I.start,q=I.count;for(let M=U,g=U+q;M<g;M+=3)O(e.getX(M+0)),O(e.getX(M+1)),O(e.getX(M+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Vr(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let d=0,p=r.count;d<p;d++)r.setXYZ(d,0,0,0);const i=new oe,s=new oe,o=new oe,a=new oe,c=new oe,l=new oe,u=new oe,f=new oe;if(e)for(let d=0,p=e.count;d<p;d+=3){const v=e.getX(d+0),m=e.getX(d+1),y=e.getX(d+2);i.fromBufferAttribute(t,v),s.fromBufferAttribute(t,m),o.fromBufferAttribute(t,y),u.subVectors(o,s),f.subVectors(i,s),u.cross(f),a.fromBufferAttribute(r,v),c.fromBufferAttribute(r,m),l.fromBufferAttribute(r,y),a.add(u),c.add(u),l.add(u),r.setXYZ(v,a.x,a.y,a.z),r.setXYZ(m,c.x,c.y,c.z),r.setXYZ(y,l.x,l.y,l.z)}else for(let d=0,p=t.count;d<p;d+=3)i.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),u.subVectors(o,s),f.subVectors(i,s),u.cross(f),r.setXYZ(d+0,u.x,u.y,u.z),r.setXYZ(d+1,u.x,u.y,u.z),r.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Zn.fromBufferAttribute(e,t),Zn.normalize(),e.setXYZ(t,Zn.x,Zn.y,Zn.z)}toNonIndexed(){function e(a,c){const l=a.array,u=a.itemSize,f=a.normalized,d=new l.constructor(c.length*u);let p=0,v=0;for(let m=0,y=c.length;m<y;m++){a.isInterleavedBufferAttribute?p=c[m]*a.data.stride+a.offset:p=c[m]*u;for(let h=0;h<u;h++)d[v++]=l[p++]}return new Vr(d,u,f)}if(this.index===null)return this;const t=new ns,r=this.index.array,i=this.attributes;for(const a in i){const c=i[a],l=e(c,r);t.setAttribute(a,l)}const s=this.morphAttributes;for(const a in s){const c=[],l=s[a];for(let u=0,f=l.length;u<f;u++){const d=l[u],p=e(d,r);c.push(p)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const l in c)c[l]!==void 0&&(e[l]=c[l]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const c in r){const l=r[c];e.data.attributes[c]=l.toJSON(e.data)}const i={};let s=!1;for(const c in this.morphAttributes){const l=this.morphAttributes[c],u=[];for(let f=0,d=l.length;f<d;f++){const p=l[f];u.push(p.toJSON(e.data))}u.length>0&&(i[c]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const l in i){const u=i[l];this.setAttribute(l,u.clone(t))}const s=e.morphAttributes;for(const l in s){const u=[],f=s[l];for(let d=0,p=f.length;d<p;d++)u.push(f[d].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,u=o.length;l<u;l++){const f=o[l];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const tA=new Un,Ga=new J_,vh=new jm,nA=new oe,yh=new oe,_h=new oe,bh=new oe,lg=new oe,xh=new oe,rA=new oe,wh=new oe;class Ns extends Kr{constructor(e=new ns,t=new eb){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){xh.set(0,0,0);for(let c=0,l=s.length;c<l;c++){const u=a[c],f=s[c];u!==0&&(lg.fromBufferAttribute(f,e),o?xh.addScaledVector(lg,u):xh.addScaledVector(lg.sub(t),u))}t.add(xh)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),vh.copy(r.boundingSphere),vh.applyMatrix4(s),Ga.copy(e.ray).recast(e.near),!(vh.containsPoint(Ga.origin)===!1&&(Ga.intersectSphere(vh,nA)===null||Ga.origin.distanceToSquared(nA)>(e.far-e.near)**2))&&(tA.copy(s).invert(),Ga.copy(e.ray).applyMatrix4(tA),!(r.boundingBox!==null&&Ga.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Ga)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,c=s.attributes.position,l=s.attributes.uv,u=s.attributes.uv1,f=s.attributes.normal,d=s.groups,p=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,m=d.length;v<m;v++){const y=d[v],h=o[y.materialIndex],w=Math.max(y.start,p.start),S=Math.min(a.count,Math.min(y.start+y.count,p.start+p.count));for(let T=w,C=S;T<C;T+=3){const B=a.getX(T),O=a.getX(T+1),P=a.getX(T+2);i=Ah(this,h,e,r,l,u,f,B,O,P),i&&(i.faceIndex=Math.floor(T/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const v=Math.max(0,p.start),m=Math.min(a.count,p.start+p.count);for(let y=v,h=m;y<h;y+=3){const w=a.getX(y),S=a.getX(y+1),T=a.getX(y+2);i=Ah(this,o,e,r,l,u,f,w,S,T),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}else if(c!==void 0)if(Array.isArray(o))for(let v=0,m=d.length;v<m;v++){const y=d[v],h=o[y.materialIndex],w=Math.max(y.start,p.start),S=Math.min(c.count,Math.min(y.start+y.count,p.start+p.count));for(let T=w,C=S;T<C;T+=3){const B=T,O=T+1,P=T+2;i=Ah(this,h,e,r,l,u,f,B,O,P),i&&(i.faceIndex=Math.floor(T/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const v=Math.max(0,p.start),m=Math.min(c.count,p.start+p.count);for(let y=v,h=m;y<h;y+=3){const w=y,S=y+1,T=y+2;i=Ah(this,o,e,r,l,u,f,w,S,T),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}}}function _5(n,e,t,r,i,s,o,a){let c;if(e.side===Xr?c=r.intersectTriangle(o,s,i,!0,a):c=r.intersectTriangle(i,s,o,e.side===Ea,a),c===null)return null;wh.copy(a),wh.applyMatrix4(n.matrixWorld);const l=t.ray.origin.distanceTo(wh);return l<t.near||l>t.far?null:{distance:l,point:wh.clone(),object:n}}function Ah(n,e,t,r,i,s,o,a,c,l){n.getVertexPosition(a,yh),n.getVertexPosition(c,_h),n.getVertexPosition(l,bh);const u=_5(n,e,t,r,yh,_h,bh,rA);if(u){const f=new oe;Yi.getBarycoord(rA,yh,_h,bh,f),i&&(u.uv=Yi.getInterpolatedAttribute(i,a,c,l,f,new Rt)),s&&(u.uv1=Yi.getInterpolatedAttribute(s,a,c,l,f,new Rt)),o&&(u.normal=Yi.getInterpolatedAttribute(o,a,c,l,f,new oe),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:c,c:l,normal:new oe,materialIndex:0};Yi.getNormal(yh,_h,bh,d.normal),u.face=d,u.barycoord=f}return u}class Ud extends ns{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const c=[],l=[],u=[],f=[];let d=0,p=0;v("z","y","x",-1,-1,r,t,e,o,s,0),v("z","y","x",1,-1,r,t,-e,o,s,1),v("x","z","y",1,1,e,r,t,i,o,2),v("x","z","y",1,-1,e,r,-t,i,o,3),v("x","y","z",1,-1,e,t,r,i,s,4),v("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(c),this.setAttribute("position",new Os(l,3)),this.setAttribute("normal",new Os(u,3)),this.setAttribute("uv",new Os(f,2));function v(m,y,h,w,S,T,C,B,O,P,N){const I=T/O,U=C/P,q=T/2,M=C/2,g=B/2,_=O+1,b=P+1;let E=0,R=0;const L=new oe;for(let G=0;G<b;G++){const k=G*U-M;for(let x=0;x<_;x++){const F=x*I-q;L[m]=F*w,L[y]=k*S,L[h]=g,l.push(L.x,L.y,L.z),L[m]=0,L[y]=0,L[h]=B>0?1:-1,u.push(L.x,L.y,L.z),f.push(x/O),f.push(1-G/P),E+=1}}for(let G=0;G<P;G++)for(let k=0;k<O;k++){const x=d+k+_*G,F=d+k+_*(G+1),K=d+(k+1)+_*(G+1),A=d+(k+1)+_*G;c.push(x,F,A),c.push(F,K,A),R+=6}a.addGroup(p,R,N),p+=R,d+=E}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ud(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function cu(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?e[t][r]=null:e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Er(n){const e={};for(let t=0;t<n.length;t++){const r=cu(n[t]);for(const i in r)e[i]=r[i]}return e}function b5(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function ZT(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Kt.workingColorSpace}const x5={clone:cu,merge:Er};var w5=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,A5=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Sa extends Od{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=w5,this.fragmentShader=A5,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=cu(e.uniforms),this.uniformsGroups=b5(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class JT extends Kr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Un,this.projectionMatrix=new Un,this.projectionMatrixInverse=new Un,this.coordinateSystem=So}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const na=new oe,iA=new Rt,sA=new Rt;class Ti extends JT{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Yf*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Pf*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Yf*2*Math.atan(Math.tan(Pf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){na.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(na.x,na.y).multiplyScalar(-e/na.z),na.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(na.x,na.y).multiplyScalar(-e/na.z)}getViewSize(e,t){return this.getViewBounds(e,iA,sA),t.subVectors(sA,iA)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Pf*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,l=o.fullHeight;s+=o.offsetX*i/c,t-=o.offsetY*r/l,i*=o.width/c,r*=o.height/l}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const al=-90,cl=1;class E5 extends Kr{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Ti(al,cl,e,t);i.layers=this.layers,this.add(i);const s=new Ti(al,cl,e,t);s.layers=this.layers,this.add(s);const o=new Ti(al,cl,e,t);o.layers=this.layers,this.add(o);const a=new Ti(al,cl,e,t);a.layers=this.layers,this.add(a);const c=new Ti(al,cl,e,t);c.layers=this.layers,this.add(c);const l=new Ti(al,cl,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,c]=t;for(const l of t)this.remove(l);if(e===So)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===Rp)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,c,l,u]=this.children,f=e.getRenderTarget(),d=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const m=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,c),e.setRenderTarget(r,4,i),e.render(t,l),r.texture.generateMipmaps=m,e.setRenderTarget(r,5,i),e.render(t,u),e.setRenderTarget(f,d,p),e.xr.enabled=v,r.texture.needsPMREMUpdate=!0}}class eM extends Rr{constructor(e,t,r,i,s,o,a,c,l,u){e=e!==void 0?e:[],t=t!==void 0?t:ru,super(e,t,r,i,s,o,a,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class S5 extends wc{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new eM(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Ps}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Ud(5,5,5),s=new Sa({name:"CubemapFromEquirect",uniforms:cu(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Xr,blending:va});s.uniforms.tEquirect.value=t;const o=new Ns(i,s),a=t.minFilter;return t.minFilter===rc&&(t.minFilter=Ps),new E5(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}class T5 extends Kr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Lo,this.environmentIntensity=1,this.environmentRotation=new Lo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}const ug=new oe,M5=new oe,R5=new wt;class la{constructor(e=new oe(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=ug.subVectors(r,t).cross(M5.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(ug),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||R5.getNormalMatrix(e),i=this.coplanarPoint(ug).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Va=new jm,Eh=new oe;class tM{constructor(e=new la,t=new la,r=new la,i=new la,s=new la,o=new la){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=So){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],c=i[3],l=i[4],u=i[5],f=i[6],d=i[7],p=i[8],v=i[9],m=i[10],y=i[11],h=i[12],w=i[13],S=i[14],T=i[15];if(r[0].setComponents(c-s,d-l,y-p,T-h).normalize(),r[1].setComponents(c+s,d+l,y+p,T+h).normalize(),r[2].setComponents(c+o,d+u,y+v,T+w).normalize(),r[3].setComponents(c-o,d-u,y-v,T-w).normalize(),r[4].setComponents(c-a,d-f,y-m,T-S).normalize(),t===So)r[5].setComponents(c+a,d+f,y+m,T+S).normalize();else if(t===Rp)r[5].setComponents(a,f,m,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Va.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Va.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Va)}intersectsSprite(e){return Va.center.set(0,0,0),Va.radius=.7071067811865476,Va.applyMatrix4(e.matrixWorld),this.intersectsSphere(Va)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Eh.x=i.normal.x>0?e.max.x:e.min.x,Eh.y=i.normal.y>0?e.max.y:e.min.y,Eh.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Eh)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class vy extends Od{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Wt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const oA=new Un,yy=new J_,Sh=new jm,Th=new oe;class aA extends Kr{constructor(e=new ns,t=new vy){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Sh.copy(r.boundingSphere),Sh.applyMatrix4(i),Sh.radius+=s,e.ray.intersectsSphere(Sh)===!1)return;oA.copy(i).invert(),yy.copy(e.ray).applyMatrix4(oA);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=r.index,f=r.attributes.position;if(l!==null){const d=Math.max(0,o.start),p=Math.min(l.count,o.start+o.count);for(let v=d,m=p;v<m;v++){const y=l.getX(v);Th.fromBufferAttribute(f,y),cA(Th,y,c,i,e,t,this)}}else{const d=Math.max(0,o.start),p=Math.min(f.count,o.start+o.count);for(let v=d,m=p;v<m;v++)Th.fromBufferAttribute(f,v),cA(Th,v,c,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function cA(n,e,t,r,i,s,o){const a=yy.distanceSqToPoint(n);if(a<t){const c=new oe;yy.closestPointToPoint(n,c),c.applyMatrix4(r);const l=i.ray.origin.distanceTo(c);if(l<i.near||l>i.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class Mh extends Kr{constructor(){super(),this.isGroup=!0,this.type="Group"}}class nM extends Rr{constructor(e,t,r,i,s,o,a,c,l,u=Ul){if(u!==Ul&&u!==ou)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Ul&&(r=xc),r===void 0&&u===ou&&(r=su),super(null,i,s,o,a,c,u,r,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:es,this.minFilter=c!==void 0?c:es,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class qm extends ns{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),c=Math.floor(i),l=a+1,u=c+1,f=e/a,d=t/c,p=[],v=[],m=[],y=[];for(let h=0;h<u;h++){const w=h*d-o;for(let S=0;S<l;S++){const T=S*f-s;v.push(T,-w,0),m.push(0,0,1),y.push(S/a),y.push(1-h/c)}}for(let h=0;h<c;h++)for(let w=0;w<a;w++){const S=w+l*h,T=w+l*(h+1),C=w+1+l*(h+1),B=w+1+l*h;p.push(S,T,B),p.push(T,C,B)}this.setIndex(p),this.setAttribute("position",new Os(v,3)),this.setAttribute("normal",new Os(m,3)),this.setAttribute("uv",new Os(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qm(e.width,e.height,e.widthSegments,e.heightSegments)}}class tb extends ns{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const c=Math.min(o+a,Math.PI);let l=0;const u=[],f=new oe,d=new oe,p=[],v=[],m=[],y=[];for(let h=0;h<=r;h++){const w=[],S=h/r;let T=0;h===0&&o===0?T=.5/t:h===r&&c===Math.PI&&(T=-.5/t);for(let C=0;C<=t;C++){const B=C/t;f.x=-e*Math.cos(i+B*s)*Math.sin(o+S*a),f.y=e*Math.cos(o+S*a),f.z=e*Math.sin(i+B*s)*Math.sin(o+S*a),v.push(f.x,f.y,f.z),d.copy(f).normalize(),m.push(d.x,d.y,d.z),y.push(B+T,1-S),w.push(l++)}u.push(w)}for(let h=0;h<r;h++)for(let w=0;w<t;w++){const S=u[h][w+1],T=u[h][w],C=u[h+1][w],B=u[h+1][w+1];(h!==0||o>0)&&p.push(S,T,B),(h!==r-1||c<Math.PI)&&p.push(T,C,B)}this.setIndex(p),this.setAttribute("position",new Os(v,3)),this.setAttribute("normal",new Os(m,3)),this.setAttribute("uv",new Os(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tb(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class I5 extends Od{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=TF,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class C5 extends Od{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class P5 extends JT{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,c=i-t;if(this.view!==null&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,o=s+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class N5 extends Ti{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class lA{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=It(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(It(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class B5 extends Gc{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function uA(n,e,t,r){const i=L5(r);switch(t){case OT:return n*e;case FT:return n*e;case HT:return n*e*2;case zT:return n*e/i.components*i.byteLength;case K_:return n*e/i.components*i.byteLength;case GT:return n*e*2/i.components*i.byteLength;case Y_:return n*e*2/i.components*i.byteLength;case UT:return n*e*3/i.components*i.byteLength;case Qi:return n*e*4/i.components*i.byteLength;case Q_:return n*e*4/i.components*i.byteLength;case jh:case qh:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case $h:case Xh:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case qv:case Xv:return Math.max(n,16)*Math.max(e,8)/4;case jv:case $v:return Math.max(n,8)*Math.max(e,8)/2;case Kv:case Yv:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Qv:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Zv:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Jv:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case ey:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case ty:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case ny:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case ry:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case iy:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case sy:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case oy:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case ay:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case cy:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case ly:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case uy:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case fy:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Kh:case dy:case hy:return Math.ceil(n/4)*Math.ceil(e/4)*16;case VT:case py:return Math.ceil(n/4)*Math.ceil(e/4)*8;case my:case gy:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function L5(n){switch(n){case Bo:case LT:return{byteLength:1,components:1};case Kf:case kT:case kd:return{byteLength:2,components:1};case $_:case X_:return{byteLength:2,components:4};case xc:case q_:case Eo:return{byteLength:4,components:1};case DT:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:j_}}));typeof window<"u"&&(window.__THREE__||(window.__THREE__=j_));/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function rM(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function k5(n){const e=new WeakMap;function t(a,c){const l=a.array,u=a.usage,f=l.byteLength,d=n.createBuffer();n.bindBuffer(c,d),n.bufferData(c,l,u),a.onUploadCallback();let p;if(l instanceof Float32Array)p=n.FLOAT;else if(l instanceof Uint16Array)a.isFloat16BufferAttribute?p=n.HALF_FLOAT:p=n.UNSIGNED_SHORT;else if(l instanceof Int16Array)p=n.SHORT;else if(l instanceof Uint32Array)p=n.UNSIGNED_INT;else if(l instanceof Int32Array)p=n.INT;else if(l instanceof Int8Array)p=n.BYTE;else if(l instanceof Uint8Array)p=n.UNSIGNED_BYTE;else if(l instanceof Uint8ClampedArray)p=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+l);return{buffer:d,type:p,bytesPerElement:l.BYTES_PER_ELEMENT,version:a.version,size:f}}function r(a,c,l){const u=c.array,f=c.updateRanges;if(n.bindBuffer(l,a),f.length===0)n.bufferSubData(l,0,u);else{f.sort((p,v)=>p.start-v.start);let d=0;for(let p=1;p<f.length;p++){const v=f[d],m=f[p];m.start<=v.start+v.count+1?v.count=Math.max(v.count,m.start+m.count-v.start):(++d,f[d]=m)}f.length=d+1;for(let p=0,v=f.length;p<v;p++){const m=f[p];n.bufferSubData(l,m.start*u.BYTES_PER_ELEMENT,u,m.start,m.count)}c.clearUpdateRanges()}c.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const c=e.get(a);c&&(n.deleteBuffer(c.buffer),e.delete(a))}function o(a,c){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const l=e.get(a);if(l===void 0)e.set(a,t(a,c));else if(l.version<a.version){if(l.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(l.buffer,a,c),l.version=a.version}}return{get:i,remove:s,update:o}}var D5=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,O5=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,U5=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,F5=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,H5=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,z5=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,G5=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,V5=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,W5=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,j5=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,q5=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,$5=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,X5=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,K5=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Y5=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Q5=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Z5=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,J5=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,e4=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,t4=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,n4=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,r4=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,i4=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,s4=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,o4=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,a4=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,c4=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,l4=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,u4=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,f4=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,d4="gl_FragColor = linearToOutputTexel( gl_FragColor );",h4=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,p4=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,m4=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,g4=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,v4=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,y4=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,_4=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,b4=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,x4=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,w4=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,A4=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,E4=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,S4=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,T4=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,M4=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,R4=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,I4=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,C4=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,P4=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,N4=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,B4=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,L4=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,k4=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,D4=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,O4=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,U4=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,F4=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,H4=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,z4=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,G4=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,V4=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,W4=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,j4=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,q4=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,$4=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,X4=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,K4=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Y4=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Q4=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Z4=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,J4=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,e6=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,t6=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,n6=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,r6=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,i6=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,s6=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,o6=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,a6=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,c6=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,l6=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,u6=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,f6=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,d6=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,h6=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,p6=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,m6=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,g6=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,v6=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,y6=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,_6=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,b6=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,x6=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,w6=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,A6=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,E6=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,S6=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,T6=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,M6=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,R6=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,I6=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,C6=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,P6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,N6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,B6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,L6=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const k6=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,D6=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,O6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,U6=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,F6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,H6=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,z6=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,G6=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,V6=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,W6=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,j6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,q6=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,$6=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,X6=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,K6=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Y6=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Q6=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Z6=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,J6=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,e8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,t8=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,n8=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,r8=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,i8=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,s8=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,o8=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,a8=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,c8=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,l8=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,u8=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,f8=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,d8=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,h8=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,p8=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Et={alphahash_fragment:D5,alphahash_pars_fragment:O5,alphamap_fragment:U5,alphamap_pars_fragment:F5,alphatest_fragment:H5,alphatest_pars_fragment:z5,aomap_fragment:G5,aomap_pars_fragment:V5,batching_pars_vertex:W5,batching_vertex:j5,begin_vertex:q5,beginnormal_vertex:$5,bsdfs:X5,iridescence_fragment:K5,bumpmap_pars_fragment:Y5,clipping_planes_fragment:Q5,clipping_planes_pars_fragment:Z5,clipping_planes_pars_vertex:J5,clipping_planes_vertex:e4,color_fragment:t4,color_pars_fragment:n4,color_pars_vertex:r4,color_vertex:i4,common:s4,cube_uv_reflection_fragment:o4,defaultnormal_vertex:a4,displacementmap_pars_vertex:c4,displacementmap_vertex:l4,emissivemap_fragment:u4,emissivemap_pars_fragment:f4,colorspace_fragment:d4,colorspace_pars_fragment:h4,envmap_fragment:p4,envmap_common_pars_fragment:m4,envmap_pars_fragment:g4,envmap_pars_vertex:v4,envmap_physical_pars_fragment:R4,envmap_vertex:y4,fog_vertex:_4,fog_pars_vertex:b4,fog_fragment:x4,fog_pars_fragment:w4,gradientmap_pars_fragment:A4,lightmap_pars_fragment:E4,lights_lambert_fragment:S4,lights_lambert_pars_fragment:T4,lights_pars_begin:M4,lights_toon_fragment:I4,lights_toon_pars_fragment:C4,lights_phong_fragment:P4,lights_phong_pars_fragment:N4,lights_physical_fragment:B4,lights_physical_pars_fragment:L4,lights_fragment_begin:k4,lights_fragment_maps:D4,lights_fragment_end:O4,logdepthbuf_fragment:U4,logdepthbuf_pars_fragment:F4,logdepthbuf_pars_vertex:H4,logdepthbuf_vertex:z4,map_fragment:G4,map_pars_fragment:V4,map_particle_fragment:W4,map_particle_pars_fragment:j4,metalnessmap_fragment:q4,metalnessmap_pars_fragment:$4,morphinstance_vertex:X4,morphcolor_vertex:K4,morphnormal_vertex:Y4,morphtarget_pars_vertex:Q4,morphtarget_vertex:Z4,normal_fragment_begin:J4,normal_fragment_maps:e6,normal_pars_fragment:t6,normal_pars_vertex:n6,normal_vertex:r6,normalmap_pars_fragment:i6,clearcoat_normal_fragment_begin:s6,clearcoat_normal_fragment_maps:o6,clearcoat_pars_fragment:a6,iridescence_pars_fragment:c6,opaque_fragment:l6,packing:u6,premultiplied_alpha_fragment:f6,project_vertex:d6,dithering_fragment:h6,dithering_pars_fragment:p6,roughnessmap_fragment:m6,roughnessmap_pars_fragment:g6,shadowmap_pars_fragment:v6,shadowmap_pars_vertex:y6,shadowmap_vertex:_6,shadowmask_pars_fragment:b6,skinbase_vertex:x6,skinning_pars_vertex:w6,skinning_vertex:A6,skinnormal_vertex:E6,specularmap_fragment:S6,specularmap_pars_fragment:T6,tonemapping_fragment:M6,tonemapping_pars_fragment:R6,transmission_fragment:I6,transmission_pars_fragment:C6,uv_pars_fragment:P6,uv_pars_vertex:N6,uv_vertex:B6,worldpos_vertex:L6,background_vert:k6,background_frag:D6,backgroundCube_vert:O6,backgroundCube_frag:U6,cube_vert:F6,cube_frag:H6,depth_vert:z6,depth_frag:G6,distanceRGBA_vert:V6,distanceRGBA_frag:W6,equirect_vert:j6,equirect_frag:q6,linedashed_vert:$6,linedashed_frag:X6,meshbasic_vert:K6,meshbasic_frag:Y6,meshlambert_vert:Q6,meshlambert_frag:Z6,meshmatcap_vert:J6,meshmatcap_frag:e8,meshnormal_vert:t8,meshnormal_frag:n8,meshphong_vert:r8,meshphong_frag:i8,meshphysical_vert:s8,meshphysical_frag:o8,meshtoon_vert:a8,meshtoon_frag:c8,points_vert:l8,points_frag:u8,shadow_vert:f8,shadow_frag:d8,sprite_vert:h8,sprite_frag:p8},De={common:{diffuse:{value:new Wt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new wt},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new wt}},envmap:{envMap:{value:null},envMapRotation:{value:new wt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new wt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new wt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new wt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new wt},normalScale:{value:new Rt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new wt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new wt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new wt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new wt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Wt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Wt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0},uvTransform:{value:new wt}},sprite:{diffuse:{value:new Wt(16777215)},opacity:{value:1},center:{value:new Rt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new wt},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0}}},xs={basic:{uniforms:Er([De.common,De.specularmap,De.envmap,De.aomap,De.lightmap,De.fog]),vertexShader:Et.meshbasic_vert,fragmentShader:Et.meshbasic_frag},lambert:{uniforms:Er([De.common,De.specularmap,De.envmap,De.aomap,De.lightmap,De.emissivemap,De.bumpmap,De.normalmap,De.displacementmap,De.fog,De.lights,{emissive:{value:new Wt(0)}}]),vertexShader:Et.meshlambert_vert,fragmentShader:Et.meshlambert_frag},phong:{uniforms:Er([De.common,De.specularmap,De.envmap,De.aomap,De.lightmap,De.emissivemap,De.bumpmap,De.normalmap,De.displacementmap,De.fog,De.lights,{emissive:{value:new Wt(0)},specular:{value:new Wt(1118481)},shininess:{value:30}}]),vertexShader:Et.meshphong_vert,fragmentShader:Et.meshphong_frag},standard:{uniforms:Er([De.common,De.envmap,De.aomap,De.lightmap,De.emissivemap,De.bumpmap,De.normalmap,De.displacementmap,De.roughnessmap,De.metalnessmap,De.fog,De.lights,{emissive:{value:new Wt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Et.meshphysical_vert,fragmentShader:Et.meshphysical_frag},toon:{uniforms:Er([De.common,De.aomap,De.lightmap,De.emissivemap,De.bumpmap,De.normalmap,De.displacementmap,De.gradientmap,De.fog,De.lights,{emissive:{value:new Wt(0)}}]),vertexShader:Et.meshtoon_vert,fragmentShader:Et.meshtoon_frag},matcap:{uniforms:Er([De.common,De.bumpmap,De.normalmap,De.displacementmap,De.fog,{matcap:{value:null}}]),vertexShader:Et.meshmatcap_vert,fragmentShader:Et.meshmatcap_frag},points:{uniforms:Er([De.points,De.fog]),vertexShader:Et.points_vert,fragmentShader:Et.points_frag},dashed:{uniforms:Er([De.common,De.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Et.linedashed_vert,fragmentShader:Et.linedashed_frag},depth:{uniforms:Er([De.common,De.displacementmap]),vertexShader:Et.depth_vert,fragmentShader:Et.depth_frag},normal:{uniforms:Er([De.common,De.bumpmap,De.normalmap,De.displacementmap,{opacity:{value:1}}]),vertexShader:Et.meshnormal_vert,fragmentShader:Et.meshnormal_frag},sprite:{uniforms:Er([De.sprite,De.fog]),vertexShader:Et.sprite_vert,fragmentShader:Et.sprite_frag},background:{uniforms:{uvTransform:{value:new wt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Et.background_vert,fragmentShader:Et.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new wt}},vertexShader:Et.backgroundCube_vert,fragmentShader:Et.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Et.cube_vert,fragmentShader:Et.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Et.equirect_vert,fragmentShader:Et.equirect_frag},distanceRGBA:{uniforms:Er([De.common,De.displacementmap,{referencePosition:{value:new oe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Et.distanceRGBA_vert,fragmentShader:Et.distanceRGBA_frag},shadow:{uniforms:Er([De.lights,De.fog,{color:{value:new Wt(0)},opacity:{value:1}}]),vertexShader:Et.shadow_vert,fragmentShader:Et.shadow_frag}};xs.physical={uniforms:Er([xs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new wt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new wt},clearcoatNormalScale:{value:new Rt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new wt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new wt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new wt},sheen:{value:0},sheenColor:{value:new Wt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new wt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new wt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new wt},transmissionSamplerSize:{value:new Rt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new wt},attenuationDistance:{value:0},attenuationColor:{value:new Wt(0)},specularColor:{value:new Wt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new wt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new wt},anisotropyVector:{value:new Rt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new wt}}]),vertexShader:Et.meshphysical_vert,fragmentShader:Et.meshphysical_frag};const Rh={r:0,b:0,g:0},Wa=new Lo,m8=new Un;function g8(n,e,t,r,i,s,o){const a=new Wt(0);let c=s===!0?0:1,l,u,f=null,d=0,p=null;function v(S){let T=S.isScene===!0?S.background:null;return T&&T.isTexture&&(T=(S.backgroundBlurriness>0?t:e).get(T)),T}function m(S){let T=!1;const C=v(S);C===null?h(a,c):C&&C.isColor&&(h(C,1),T=!0);const B=n.xr.getEnvironmentBlendMode();B==="additive"?r.buffers.color.setClear(0,0,0,1,o):B==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||T)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function y(S,T){const C=v(T);C&&(C.isCubeTexture||C.mapping===Wm)?(u===void 0&&(u=new Ns(new Ud(1,1,1),new Sa({name:"BackgroundCubeMaterial",uniforms:cu(xs.backgroundCube.uniforms),vertexShader:xs.backgroundCube.vertexShader,fragmentShader:xs.backgroundCube.fragmentShader,side:Xr,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(B,O,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),Wa.copy(T.backgroundRotation),Wa.x*=-1,Wa.y*=-1,Wa.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(Wa.y*=-1,Wa.z*=-1),u.material.uniforms.envMap.value=C,u.material.uniforms.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=T.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(m8.makeRotationFromEuler(Wa)),u.material.toneMapped=Kt.getTransfer(C.colorSpace)!==dn,(f!==C||d!==C.version||p!==n.toneMapping)&&(u.material.needsUpdate=!0,f=C,d=C.version,p=n.toneMapping),u.layers.enableAll(),S.unshift(u,u.geometry,u.material,0,0,null)):C&&C.isTexture&&(l===void 0&&(l=new Ns(new qm(2,2),new Sa({name:"BackgroundMaterial",uniforms:cu(xs.background.uniforms),vertexShader:xs.background.vertexShader,fragmentShader:xs.background.fragmentShader,side:Ea,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=C,l.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,l.material.toneMapped=Kt.getTransfer(C.colorSpace)!==dn,C.matrixAutoUpdate===!0&&C.updateMatrix(),l.material.uniforms.uvTransform.value.copy(C.matrix),(f!==C||d!==C.version||p!==n.toneMapping)&&(l.material.needsUpdate=!0,f=C,d=C.version,p=n.toneMapping),l.layers.enableAll(),S.unshift(l,l.geometry,l.material,0,0,null))}function h(S,T){S.getRGB(Rh,ZT(n)),r.buffers.color.setClear(Rh.r,Rh.g,Rh.b,T,o)}function w(){u!==void 0&&(u.geometry.dispose(),u.material.dispose()),l!==void 0&&(l.geometry.dispose(),l.material.dispose())}return{getClearColor:function(){return a},setClearColor:function(S,T=1){a.set(S),c=T,h(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(S){c=S,h(a,c)},render:m,addToRenderList:y,dispose:w}}function v8(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=d(null);let s=i,o=!1;function a(I,U,q,M,g){let _=!1;const b=f(M,q,U);s!==b&&(s=b,l(s.object)),_=p(I,M,q,g),_&&v(I,M,q,g),g!==null&&e.update(g,n.ELEMENT_ARRAY_BUFFER),(_||o)&&(o=!1,T(I,U,q,M),g!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(g).buffer))}function c(){return n.createVertexArray()}function l(I){return n.bindVertexArray(I)}function u(I){return n.deleteVertexArray(I)}function f(I,U,q){const M=q.wireframe===!0;let g=r[I.id];g===void 0&&(g={},r[I.id]=g);let _=g[U.id];_===void 0&&(_={},g[U.id]=_);let b=_[M];return b===void 0&&(b=d(c()),_[M]=b),b}function d(I){const U=[],q=[],M=[];for(let g=0;g<t;g++)U[g]=0,q[g]=0,M[g]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:q,attributeDivisors:M,object:I,attributes:{},index:null}}function p(I,U,q,M){const g=s.attributes,_=U.attributes;let b=0;const E=q.getAttributes();for(const R in E)if(E[R].location>=0){const G=g[R];let k=_[R];if(k===void 0&&(R==="instanceMatrix"&&I.instanceMatrix&&(k=I.instanceMatrix),R==="instanceColor"&&I.instanceColor&&(k=I.instanceColor)),G===void 0||G.attribute!==k||k&&G.data!==k.data)return!0;b++}return s.attributesNum!==b||s.index!==M}function v(I,U,q,M){const g={},_=U.attributes;let b=0;const E=q.getAttributes();for(const R in E)if(E[R].location>=0){let G=_[R];G===void 0&&(R==="instanceMatrix"&&I.instanceMatrix&&(G=I.instanceMatrix),R==="instanceColor"&&I.instanceColor&&(G=I.instanceColor));const k={};k.attribute=G,G&&G.data&&(k.data=G.data),g[R]=k,b++}s.attributes=g,s.attributesNum=b,s.index=M}function m(){const I=s.newAttributes;for(let U=0,q=I.length;U<q;U++)I[U]=0}function y(I){h(I,0)}function h(I,U){const q=s.newAttributes,M=s.enabledAttributes,g=s.attributeDivisors;q[I]=1,M[I]===0&&(n.enableVertexAttribArray(I),M[I]=1),g[I]!==U&&(n.vertexAttribDivisor(I,U),g[I]=U)}function w(){const I=s.newAttributes,U=s.enabledAttributes;for(let q=0,M=U.length;q<M;q++)U[q]!==I[q]&&(n.disableVertexAttribArray(q),U[q]=0)}function S(I,U,q,M,g,_,b){b===!0?n.vertexAttribIPointer(I,U,q,g,_):n.vertexAttribPointer(I,U,q,M,g,_)}function T(I,U,q,M){m();const g=M.attributes,_=q.getAttributes(),b=U.defaultAttributeValues;for(const E in _){const R=_[E];if(R.location>=0){let L=g[E];if(L===void 0&&(E==="instanceMatrix"&&I.instanceMatrix&&(L=I.instanceMatrix),E==="instanceColor"&&I.instanceColor&&(L=I.instanceColor)),L!==void 0){const G=L.normalized,k=L.itemSize,x=e.get(L);if(x===void 0)continue;const F=x.buffer,K=x.type,A=x.bytesPerElement,X=K===n.INT||K===n.UNSIGNED_INT||L.gpuType===q_;if(L.isInterleavedBufferAttribute){const V=L.data,$=V.stride,ee=L.offset;if(V.isInstancedInterleavedBuffer){for(let he=0;he<R.locationSize;he++)h(R.location+he,V.meshPerAttribute);I.isInstancedMesh!==!0&&M._maxInstanceCount===void 0&&(M._maxInstanceCount=V.meshPerAttribute*V.count)}else for(let he=0;he<R.locationSize;he++)y(R.location+he);n.bindBuffer(n.ARRAY_BUFFER,F);for(let he=0;he<R.locationSize;he++)S(R.location+he,k/R.locationSize,K,G,$*A,(ee+k/R.locationSize*he)*A,X)}else{if(L.isInstancedBufferAttribute){for(let V=0;V<R.locationSize;V++)h(R.location+V,L.meshPerAttribute);I.isInstancedMesh!==!0&&M._maxInstanceCount===void 0&&(M._maxInstanceCount=L.meshPerAttribute*L.count)}else for(let V=0;V<R.locationSize;V++)y(R.location+V);n.bindBuffer(n.ARRAY_BUFFER,F);for(let V=0;V<R.locationSize;V++)S(R.location+V,k/R.locationSize,K,G,k*A,k/R.locationSize*V*A,X)}}else if(b!==void 0){const G=b[E];if(G!==void 0)switch(G.length){case 2:n.vertexAttrib2fv(R.location,G);break;case 3:n.vertexAttrib3fv(R.location,G);break;case 4:n.vertexAttrib4fv(R.location,G);break;default:n.vertexAttrib1fv(R.location,G)}}}}w()}function C(){P();for(const I in r){const U=r[I];for(const q in U){const M=U[q];for(const g in M)u(M[g].object),delete M[g];delete U[q]}delete r[I]}}function B(I){if(r[I.id]===void 0)return;const U=r[I.id];for(const q in U){const M=U[q];for(const g in M)u(M[g].object),delete M[g];delete U[q]}delete r[I.id]}function O(I){for(const U in r){const q=r[U];if(q[I.id]===void 0)continue;const M=q[I.id];for(const g in M)u(M[g].object),delete M[g];delete q[I.id]}}function P(){N(),o=!0,s!==i&&(s=i,l(s.object))}function N(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:P,resetDefaultState:N,dispose:C,releaseStatesOfGeometry:B,releaseStatesOfProgram:O,initAttributes:m,enableAttribute:y,disableUnusedAttributes:w}}function y8(n,e,t){let r;function i(l){r=l}function s(l,u){n.drawArrays(r,l,u),t.update(u,r,1)}function o(l,u,f){f!==0&&(n.drawArraysInstanced(r,l,u,f),t.update(u,r,f))}function a(l,u,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,l,0,u,0,f);let p=0;for(let v=0;v<f;v++)p+=u[v];t.update(p,r,1)}function c(l,u,f,d){if(f===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let v=0;v<l.length;v++)o(l[v],u[v],d[v]);else{p.multiDrawArraysInstancedWEBGL(r,l,0,u,0,d,0,f);let v=0;for(let m=0;m<f;m++)v+=u[m]*d[m];t.update(v,r,1)}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=c}function _8(n,e,t,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const O=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(O.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(O){return!(O!==Qi&&r.convert(O)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(O){const P=O===kd&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(O!==Bo&&r.convert(O)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&O!==Eo&&!P)}function c(O){if(O==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";O="mediump"}return O==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let l=t.precision!==void 0?t.precision:"highp";const u=c(l);u!==l&&(l=u);const f=t.logarithmicDepthBuffer===!0,d=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),y=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),h=n.getParameter(n.MAX_VERTEX_ATTRIBS),w=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),S=n.getParameter(n.MAX_VARYING_VECTORS),T=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),C=v>0,B=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:o,textureTypeReadable:a,precision:l,logarithmicDepthBuffer:f,reverseDepthBuffer:d,maxTextures:p,maxVertexTextures:v,maxTextureSize:m,maxCubemapSize:y,maxAttributes:h,maxVertexUniforms:w,maxVaryings:S,maxFragmentUniforms:T,vertexTextures:C,maxSamples:B}}function b8(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new la,a=new wt,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(f,d){const p=f.length!==0||d||r!==0||i;return i=d,r=f.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,d){t=u(f,d,0)},this.setState=function(f,d,p){const v=f.clippingPlanes,m=f.clipIntersection,y=f.clipShadows,h=n.get(f);if(!i||v===null||v.length===0||s&&!y)s?u(null):l();else{const w=s?0:r,S=w*4;let T=h.clippingState||null;c.value=T,T=u(v,d,S,p);for(let C=0;C!==S;++C)T[C]=t[C];h.clippingState=T,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=w}};function l(){c.value!==t&&(c.value=t,c.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(f,d,p,v){const m=f!==null?f.length:0;let y=null;if(m!==0){if(y=c.value,v!==!0||y===null){const h=p+m*4,w=d.matrixWorldInverse;a.getNormalMatrix(w),(y===null||y.length<h)&&(y=new Float32Array(h));for(let S=0,T=p;S!==m;++S,T+=4)o.copy(f[S]).applyMatrix4(w,a),o.normal.toArray(y,T),y[T+3]=o.constant}c.value=y,c.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,y}}function x8(n){let e=new WeakMap;function t(o,a){return a===zv?o.mapping=ru:a===Gv&&(o.mapping=iu),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===zv||a===Gv)if(e.has(o)){const c=e.get(o).texture;return t(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const l=new S5(c.height);return l.fromEquirectangularTexture(n,o),e.set(o,l),o.addEventListener("dispose",i),t(l.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const c=e.get(a);c!==void 0&&(e.delete(a),c.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}const Rl=4,fA=[.125,.215,.35,.446,.526,.582],Il=20,fg=new P5,dA=new Wt;let dg=null,hg=0,pg=0,mg=!1;const Ka=(1+Math.sqrt(5))/2,ll=1/Ka,hA=[new oe(-Ka,ll,0),new oe(Ka,ll,0),new oe(-ll,0,Ka),new oe(ll,0,Ka),new oe(0,Ka,-ll),new oe(0,Ka,ll),new oe(-1,1,-1),new oe(1,1,-1),new oe(-1,1,1),new oe(1,1,1)];class pA{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){dg=this._renderer.getRenderTarget(),hg=this._renderer.getActiveCubeFace(),pg=this._renderer.getActiveMipmapLevel(),mg=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=vA(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=gA(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(dg,hg,pg),this._renderer.xr.enabled=mg,e.scissorTest=!1,Ih(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ru||e.mapping===iu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),dg=this._renderer.getRenderTarget(),hg=this._renderer.getActiveCubeFace(),pg=this._renderer.getActiveMipmapLevel(),mg=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Ps,minFilter:Ps,generateMipmaps:!1,type:kd,format:Qi,colorSpace:au,depthBuffer:!1},i=mA(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=mA(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=w8(s)),this._blurMaterial=A8(s,e,t)}return i}_compileMaterial(e){const t=new Ns(this._lodPlanes[0],e);this._renderer.compile(t,fg)}_sceneToCubeUV(e,t,r,i){const a=new Ti(90,1,t,r),c=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,d=u.toneMapping;u.getClearColor(dA),u.toneMapping=ya,u.autoClear=!1;const p=new eb({name:"PMREM.Background",side:Xr,depthWrite:!1,depthTest:!1}),v=new Ns(new Ud,p);let m=!1;const y=e.background;y?y.isColor&&(p.color.copy(y),e.background=null,m=!0):(p.color.copy(dA),m=!0);for(let h=0;h<6;h++){const w=h%3;w===0?(a.up.set(0,c[h],0),a.lookAt(l[h],0,0)):w===1?(a.up.set(0,0,c[h]),a.lookAt(0,l[h],0)):(a.up.set(0,c[h],0),a.lookAt(0,0,l[h]));const S=this._cubeSize;Ih(i,w*S,h>2?S:0,S,S),u.setRenderTarget(i),m&&u.render(v,a),u.render(e,a)}v.geometry.dispose(),v.material.dispose(),u.toneMapping=d,u.autoClear=f,e.background=y}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===ru||e.mapping===iu;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=vA()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=gA());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Ns(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const c=this._cubeSize;Ih(t,0,0,3*c,2*c),r.setRenderTarget(t),r.render(o,fg)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=hA[(i-s-1)%hA.length];this._blur(e,s-1,s,o,a)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const c=this._renderer,l=this._blurMaterial,u=3,f=new Ns(this._lodPlanes[i],l),d=l.uniforms,p=this._sizeLods[r]-1,v=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*Il-1),m=s/v,y=isFinite(s)?1+Math.floor(u*m):Il;y>Il;const h=[];let w=0;for(let O=0;O<Il;++O){const P=O/m,N=Math.exp(-P*P/2);h.push(N),O===0?w+=N:O<y&&(w+=2*N)}for(let O=0;O<h.length;O++)h[O]=h[O]/w;d.envMap.value=e.texture,d.samples.value=y,d.weights.value=h,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:S}=this;d.dTheta.value=v,d.mipInt.value=S-r;const T=this._sizeLods[i],C=3*T*(i>S-Rl?i-S+Rl:0),B=4*(this._cubeSize-T);Ih(t,C,B,3*T,2*T),c.setRenderTarget(t),c.render(f,fg)}}function w8(n){const e=[],t=[],r=[];let i=n;const s=n-Rl+1+fA.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let c=1/a;o>n-Rl?c=fA[o-n+Rl-1]:o===0&&(c=0),r.push(c);const l=1/(a-2),u=-l,f=1+l,d=[u,u,f,u,f,f,u,u,f,f,u,f],p=6,v=6,m=3,y=2,h=1,w=new Float32Array(m*v*p),S=new Float32Array(y*v*p),T=new Float32Array(h*v*p);for(let B=0;B<p;B++){const O=B%3*2/3-1,P=B>2?0:-1,N=[O,P,0,O+2/3,P,0,O+2/3,P+1,0,O,P,0,O+2/3,P+1,0,O,P+1,0];w.set(N,m*v*B),S.set(d,y*v*B);const I=[B,B,B,B,B,B];T.set(I,h*v*B)}const C=new ns;C.setAttribute("position",new Vr(w,m)),C.setAttribute("uv",new Vr(S,y)),C.setAttribute("faceIndex",new Vr(T,h)),e.push(C),i>Rl&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function mA(n,e,t){const r=new wc(n,e,t);return r.texture.mapping=Wm,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Ih(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function A8(n,e,t){const r=new Float32Array(Il),i=new oe(0,1,0);return new Sa({name:"SphericalGaussianBlur",defines:{n:Il,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:nb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:va,depthTest:!1,depthWrite:!1})}function gA(){return new Sa({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:nb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:va,depthTest:!1,depthWrite:!1})}function vA(){return new Sa({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:nb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:va,depthTest:!1,depthWrite:!1})}function nb(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function E8(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const c=a.mapping,l=c===zv||c===Gv,u=c===ru||c===iu;if(l||u){let f=e.get(a);const d=f!==void 0?f.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==d)return t===null&&(t=new pA(n)),f=l?t.fromEquirectangular(a,f):t.fromCubemap(a,f),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),f.texture;if(f!==void 0)return f.texture;{const p=a.image;return l&&p&&p.height>0||u&&p&&i(p)?(t===null&&(t=new pA(n)),f=l?t.fromEquirectangular(a):t.fromCubemap(a),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),a.addEventListener("dispose",s),f.texture):null}}}return a}function i(a){let c=0;const l=6;for(let u=0;u<l;u++)a[u]!==void 0&&c++;return c===l}function s(a){const c=a.target;c.removeEventListener("dispose",s);const l=e.get(c);l!==void 0&&(e.delete(c),l.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function S8(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&bl("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function T8(n,e,t,r){const i={},s=new WeakMap;function o(f){const d=f.target;d.index!==null&&e.remove(d.index);for(const v in d.attributes)e.remove(d.attributes[v]);d.removeEventListener("dispose",o),delete i[d.id];const p=s.get(d);p&&(e.remove(p),s.delete(d)),r.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(f,d){return i[d.id]===!0||(d.addEventListener("dispose",o),i[d.id]=!0,t.memory.geometries++),d}function c(f){const d=f.attributes;for(const p in d)e.update(d[p],n.ARRAY_BUFFER)}function l(f){const d=[],p=f.index,v=f.attributes.position;let m=0;if(p!==null){const w=p.array;m=p.version;for(let S=0,T=w.length;S<T;S+=3){const C=w[S+0],B=w[S+1],O=w[S+2];d.push(C,B,B,O,O,C)}}else if(v!==void 0){const w=v.array;m=v.version;for(let S=0,T=w.length/3-1;S<T;S+=3){const C=S+0,B=S+1,O=S+2;d.push(C,B,B,O,O,C)}}else return;const y=new(jT(d)?QT:YT)(d,1);y.version=m;const h=s.get(f);h&&e.remove(h),s.set(f,y)}function u(f){const d=s.get(f);if(d){const p=f.index;p!==null&&d.version<p.version&&l(f)}else l(f);return s.get(f)}return{get:a,update:c,getWireframeAttribute:u}}function M8(n,e,t){let r;function i(d){r=d}let s,o;function a(d){s=d.type,o=d.bytesPerElement}function c(d,p){n.drawElements(r,p,s,d*o),t.update(p,r,1)}function l(d,p,v){v!==0&&(n.drawElementsInstanced(r,p,s,d*o,v),t.update(p,r,v))}function u(d,p,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,p,0,s,d,0,v);let y=0;for(let h=0;h<v;h++)y+=p[h];t.update(y,r,1)}function f(d,p,v,m){if(v===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let h=0;h<d.length;h++)l(d[h]/o,p[h],m[h]);else{y.multiDrawElementsInstancedWEBGL(r,p,0,s,d,0,m,0,v);let h=0;for(let w=0;w<v;w++)h+=p[w]*m[w];t.update(h,r,1)}}this.setMode=i,this.setIndex=a,this.render=c,this.renderInstances=l,this.renderMultiDraw=u,this.renderMultiDrawInstances=f}function R8(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function I8(n,e,t){const r=new WeakMap,i=new On;function s(o,a,c){const l=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,f=u!==void 0?u.length:0;let d=r.get(a);if(d===void 0||d.count!==f){let N=function(){O.dispose(),r.delete(a),a.removeEventListener("dispose",N)};d!==void 0&&d.texture.dispose();const p=a.morphAttributes.position!==void 0,v=a.morphAttributes.normal!==void 0,m=a.morphAttributes.color!==void 0,y=a.morphAttributes.position||[],h=a.morphAttributes.normal||[],w=a.morphAttributes.color||[];let S=0;p===!0&&(S=1),v===!0&&(S=2),m===!0&&(S=3);let T=a.attributes.position.count*S,C=1;T>e.maxTextureSize&&(C=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const B=new Float32Array(T*C*4*f),O=new $T(B,T,C,f);O.type=Eo,O.needsUpdate=!0;const P=S*4;for(let I=0;I<f;I++){const U=y[I],q=h[I],M=w[I],g=T*C*4*I;for(let _=0;_<U.count;_++){const b=_*P;p===!0&&(i.fromBufferAttribute(U,_),B[g+b+0]=i.x,B[g+b+1]=i.y,B[g+b+2]=i.z,B[g+b+3]=0),v===!0&&(i.fromBufferAttribute(q,_),B[g+b+4]=i.x,B[g+b+5]=i.y,B[g+b+6]=i.z,B[g+b+7]=0),m===!0&&(i.fromBufferAttribute(M,_),B[g+b+8]=i.x,B[g+b+9]=i.y,B[g+b+10]=i.z,B[g+b+11]=M.itemSize===4?i.w:1)}}d={count:f,texture:O,size:new Rt(T,C)},r.set(a,d),a.addEventListener("dispose",N)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let p=0;for(let m=0;m<l.length;m++)p+=l[m];const v=a.morphTargetsRelative?1:1-p;c.getUniforms().setValue(n,"morphTargetBaseInfluence",v),c.getUniforms().setValue(n,"morphTargetInfluences",l)}c.getUniforms().setValue(n,"morphTargetsTexture",d.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",d.size)}return{update:s}}function C8(n,e,t,r){let i=new WeakMap;function s(c){const l=r.render.frame,u=c.geometry,f=e.get(c,u);if(i.get(f)!==l&&(e.update(f),i.set(f,l)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),i.get(c)!==l&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER),i.set(c,l))),c.isSkinnedMesh){const d=c.skeleton;i.get(d)!==l&&(d.update(),i.set(d,l))}return f}function o(){i=new WeakMap}function a(c){const l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),l.instanceColor!==null&&t.remove(l.instanceColor)}return{update:s,dispose:o}}const iM=new Rr,yA=new nM(1,1),sM=new $T,oM=new l5,aM=new eM,_A=[],bA=[],xA=new Float32Array(16),wA=new Float32Array(9),AA=new Float32Array(4);function Fu(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=_A[i];if(s===void 0&&(s=new Float32Array(i),_A[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Yn(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Qn(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function $m(n,e){let t=bA[e];t===void 0&&(t=new Int32Array(e),bA[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function P8(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function N8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Yn(t,e))return;n.uniform2fv(this.addr,e),Qn(t,e)}}function B8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Yn(t,e))return;n.uniform3fv(this.addr,e),Qn(t,e)}}function L8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Yn(t,e))return;n.uniform4fv(this.addr,e),Qn(t,e)}}function k8(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Yn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Qn(t,e)}else{if(Yn(t,r))return;AA.set(r),n.uniformMatrix2fv(this.addr,!1,AA),Qn(t,r)}}function D8(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Yn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Qn(t,e)}else{if(Yn(t,r))return;wA.set(r),n.uniformMatrix3fv(this.addr,!1,wA),Qn(t,r)}}function O8(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Yn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Qn(t,e)}else{if(Yn(t,r))return;xA.set(r),n.uniformMatrix4fv(this.addr,!1,xA),Qn(t,r)}}function U8(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function F8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Yn(t,e))return;n.uniform2iv(this.addr,e),Qn(t,e)}}function H8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Yn(t,e))return;n.uniform3iv(this.addr,e),Qn(t,e)}}function z8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Yn(t,e))return;n.uniform4iv(this.addr,e),Qn(t,e)}}function G8(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function V8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Yn(t,e))return;n.uniform2uiv(this.addr,e),Qn(t,e)}}function W8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Yn(t,e))return;n.uniform3uiv(this.addr,e),Qn(t,e)}}function j8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Yn(t,e))return;n.uniform4uiv(this.addr,e),Qn(t,e)}}function q8(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let s;this.type===n.SAMPLER_2D_SHADOW?(yA.compareFunction=WT,s=yA):s=iM,t.setTexture2D(e||s,i)}function $8(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||oM,i)}function X8(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||aM,i)}function K8(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||sM,i)}function Y8(n){switch(n){case 5126:return P8;case 35664:return N8;case 35665:return B8;case 35666:return L8;case 35674:return k8;case 35675:return D8;case 35676:return O8;case 5124:case 35670:return U8;case 35667:case 35671:return F8;case 35668:case 35672:return H8;case 35669:case 35673:return z8;case 5125:return G8;case 36294:return V8;case 36295:return W8;case 36296:return j8;case 35678:case 36198:case 36298:case 36306:case 35682:return q8;case 35679:case 36299:case 36307:return $8;case 35680:case 36300:case 36308:case 36293:return X8;case 36289:case 36303:case 36311:case 36292:return K8}}function Q8(n,e){n.uniform1fv(this.addr,e)}function Z8(n,e){const t=Fu(e,this.size,2);n.uniform2fv(this.addr,t)}function J8(n,e){const t=Fu(e,this.size,3);n.uniform3fv(this.addr,t)}function eH(n,e){const t=Fu(e,this.size,4);n.uniform4fv(this.addr,t)}function tH(n,e){const t=Fu(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function nH(n,e){const t=Fu(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function rH(n,e){const t=Fu(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function iH(n,e){n.uniform1iv(this.addr,e)}function sH(n,e){n.uniform2iv(this.addr,e)}function oH(n,e){n.uniform3iv(this.addr,e)}function aH(n,e){n.uniform4iv(this.addr,e)}function cH(n,e){n.uniform1uiv(this.addr,e)}function lH(n,e){n.uniform2uiv(this.addr,e)}function uH(n,e){n.uniform3uiv(this.addr,e)}function fH(n,e){n.uniform4uiv(this.addr,e)}function dH(n,e,t){const r=this.cache,i=e.length,s=$m(t,i);Yn(r,s)||(n.uniform1iv(this.addr,s),Qn(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||iM,s[o])}function hH(n,e,t){const r=this.cache,i=e.length,s=$m(t,i);Yn(r,s)||(n.uniform1iv(this.addr,s),Qn(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||oM,s[o])}function pH(n,e,t){const r=this.cache,i=e.length,s=$m(t,i);Yn(r,s)||(n.uniform1iv(this.addr,s),Qn(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||aM,s[o])}function mH(n,e,t){const r=this.cache,i=e.length,s=$m(t,i);Yn(r,s)||(n.uniform1iv(this.addr,s),Qn(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||sM,s[o])}function gH(n){switch(n){case 5126:return Q8;case 35664:return Z8;case 35665:return J8;case 35666:return eH;case 35674:return tH;case 35675:return nH;case 35676:return rH;case 5124:case 35670:return iH;case 35667:case 35671:return sH;case 35668:case 35672:return oH;case 35669:case 35673:return aH;case 5125:return cH;case 36294:return lH;case 36295:return uH;case 36296:return fH;case 35678:case 36198:case 36298:case 36306:case 35682:return dH;case 35679:case 36299:case 36307:return hH;case 35680:case 36300:case 36308:case 36293:return pH;case 36289:case 36303:case 36311:case 36292:return mH}}class vH{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=Y8(t.type)}}class yH{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=gH(t.type)}}class _H{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const gg=/(\w+)(\])?(\[|\.)?/g;function EA(n,e){n.seq.push(e),n.map[e.id]=e}function bH(n,e,t){const r=n.name,i=r.length;for(gg.lastIndex=0;;){const s=gg.exec(r),o=gg.lastIndex;let a=s[1];const c=s[2]==="]",l=s[3];if(c&&(a=a|0),l===void 0||l==="["&&o+2===i){EA(t,l===void 0?new vH(a,n,e):new yH(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new _H(a),EA(t,f)),t=f}}}class Yh{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);bH(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],c=r[a.id];c.needsUpdate!==!1&&a.setValue(e,c.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function SA(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const xH=37297;let wH=0;function AH(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}const TA=new wt;function EH(n){Kt._getMatrix(TA,Kt.workingColorSpace,n);const e=`mat3( ${TA.elements.map(t=>t.toFixed(4))} )`;switch(Kt.getTransfer(n)){case Mp:return[e,"LinearTransferOETF"];case dn:return[e,"sRGBTransferOETF"];default:return[e,"LinearTransferOETF"]}}function MA(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+AH(n.getShaderSource(e),o)}else return i}function SH(n,e){const t=EH(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function TH(n,e){let t;switch(e){case yF:t="Linear";break;case _F:t="Reinhard";break;case bF:t="Cineon";break;case xF:t="ACESFilmic";break;case AF:t="AgX";break;case EF:t="Neutral";break;case wF:t="Custom";break;default:t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Ch=new oe;function MH(){Kt.getLuminanceCoefficients(Ch);const n=Ch.x.toFixed(4),e=Ch.y.toFixed(4),t=Ch.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function RH(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(xf).join(`
`)}function IH(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function CH(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function xf(n){return n!==""}function RA(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function IA(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const PH=/^[ \t]*#include +<([\w\d./]+)>/gm;function _y(n){return n.replace(PH,BH)}const NH=new Map;function BH(n,e){let t=Et[e];if(t===void 0){const r=NH.get(e);if(r!==void 0)t=Et[r];else throw new Error("Can not resolve #include <"+e+">")}return _y(t)}const LH=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function CA(n){return n.replace(LH,kH)}function kH(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function PA(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function DH(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===PT?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===QU?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===lo&&(e="SHADOWMAP_TYPE_VSM"),e}function OH(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case ru:case iu:e="ENVMAP_TYPE_CUBE";break;case Wm:e="ENVMAP_TYPE_CUBE_UV";break}return e}function UH(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case iu:e="ENVMAP_MODE_REFRACTION";break}return e}function FH(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case NT:e="ENVMAP_BLENDING_MULTIPLY";break;case gF:e="ENVMAP_BLENDING_MIX";break;case vF:e="ENVMAP_BLENDING_ADD";break}return e}function HH(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function zH(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const c=DH(t),l=OH(t),u=UH(t),f=FH(t),d=HH(t),p=RH(t),v=IH(s),m=i.createProgram();let y,h,w=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(xf).join(`
`),y.length>0&&(y+=`
`),h=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(xf).join(`
`),h.length>0&&(h+=`
`)):(y=[PA(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(xf).join(`
`),h=[PA(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ya?"#define TONE_MAPPING":"",t.toneMapping!==ya?Et.tonemapping_pars_fragment:"",t.toneMapping!==ya?TH("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Et.colorspace_pars_fragment,SH("linearToOutputTexel",t.outputColorSpace),MH(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(xf).join(`
`)),o=_y(o),o=RA(o,t),o=IA(o,t),a=_y(a),a=RA(a,t),a=IA(a,t),o=CA(o),a=CA(a),t.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,y=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,h=["#define varying in",t.glslVersion===zw?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===zw?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+h);const S=w+y+o,T=w+h+a,C=SA(i,i.VERTEX_SHADER,S),B=SA(i,i.FRAGMENT_SHADER,T);i.attachShader(m,C),i.attachShader(m,B),t.index0AttributeName!==void 0?i.bindAttribLocation(m,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m);function O(U){if(n.debug.checkShaderErrors){const q=i.getProgramInfoLog(m).trim(),M=i.getShaderInfoLog(C).trim(),g=i.getShaderInfoLog(B).trim();let _=!0,b=!0;if(i.getProgramParameter(m,i.LINK_STATUS)===!1)if(_=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,m,C,B);else{const E=MA(i,C,"vertex"),R=MA(i,B,"fragment")}else q!==""||(M===""||g==="")&&(b=!1);b&&(U.diagnostics={runnable:_,programLog:q,vertexShader:{log:M,prefix:y},fragmentShader:{log:g,prefix:h}})}i.deleteShader(C),i.deleteShader(B),P=new Yh(i,m),N=CH(i,m)}let P;this.getUniforms=function(){return P===void 0&&O(this),P};let N;this.getAttributes=function(){return N===void 0&&O(this),N};let I=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return I===!1&&(I=i.getProgramParameter(m,xH)),I},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=wH++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=C,this.fragmentShader=B,this}let GH=0;class VH{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new WH(e),t.set(e,r)),r}}class WH{constructor(e){this.id=GH++,this.code=e,this.usedTimes=0}}function jH(n,e,t,r,i,s,o){const a=new XT,c=new VH,l=new Set,u=[],f=i.logarithmicDepthBuffer,d=i.vertexTextures;let p=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(N){return l.add(N),N===0?"uv":`uv${N}`}function y(N,I,U,q,M){const g=q.fog,_=M.geometry,b=N.isMeshStandardMaterial?q.environment:null,E=(N.isMeshStandardMaterial?t:e).get(N.envMap||b),R=E&&E.mapping===Wm?E.image.height:null,L=v[N.type];N.precision!==null&&(p=i.getMaxPrecision(N.precision),N.precision);const G=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,k=G!==void 0?G.length:0;let x=0;_.morphAttributes.position!==void 0&&(x=1),_.morphAttributes.normal!==void 0&&(x=2),_.morphAttributes.color!==void 0&&(x=3);let F,K,A,X;if(L){const Je=xs[L];F=Je.vertexShader,K=Je.fragmentShader}else F=N.vertexShader,K=N.fragmentShader,c.update(N),A=c.getVertexShaderID(N),X=c.getFragmentShaderID(N);const V=n.getRenderTarget(),$=n.state.buffers.depth.getReversed(),ee=M.isInstancedMesh===!0,he=M.isBatchedMesh===!0,pe=!!N.map,de=!!N.matcap,Fe=!!E,j=!!N.aoMap,Ue=!!N.lightMap,et=!!N.bumpMap,Ve=!!N.normalMap,Ie=!!N.displacementMap,Pt=!!N.emissiveMap,Se=!!N.metalnessMap,W=!!N.roughnessMap,D=N.anisotropy>0,te=N.clearcoat>0,ue=N.dispersion>0,Z=N.iridescence>0,ne=N.sheen>0,me=N.transmission>0,Re=D&&!!N.anisotropyMap,we=te&&!!N.clearcoatMap,Ke=te&&!!N.clearcoatNormalMap,xe=te&&!!N.clearcoatRoughnessMap,Te=Z&&!!N.iridescenceMap,ke=Z&&!!N.iridescenceThicknessMap,tt=ne&&!!N.sheenColorMap,Me=ne&&!!N.sheenRoughnessMap,$e=!!N.specularMap,ut=!!N.specularColorMap,rt=!!N.specularIntensityMap,Y=me&&!!N.transmissionMap,Ne=me&&!!N.thicknessMap,se=!!N.gradientMap,fe=!!N.alphaMap,Be=N.alphaTest>0,_e=!!N.alphaHash,We=!!N.extensions;let tn=ya;N.toneMapped&&(V===null||V.isXRRenderTarget===!0)&&(tn=n.toneMapping);const bt={shaderID:L,shaderType:N.type,shaderName:N.name,vertexShader:F,fragmentShader:K,defines:N.defines,customVertexShaderID:A,customFragmentShaderID:X,isRawShaderMaterial:N.isRawShaderMaterial===!0,glslVersion:N.glslVersion,precision:p,batching:he,batchingColor:he&&M._colorsTexture!==null,instancing:ee,instancingColor:ee&&M.instanceColor!==null,instancingMorph:ee&&M.morphTexture!==null,supportsVertexTextures:d,outputColorSpace:V===null?n.outputColorSpace:V.isXRRenderTarget===!0?V.texture.colorSpace:au,alphaToCoverage:!!N.alphaToCoverage,map:pe,matcap:de,envMap:Fe,envMapMode:Fe&&E.mapping,envMapCubeUVHeight:R,aoMap:j,lightMap:Ue,bumpMap:et,normalMap:Ve,displacementMap:d&&Ie,emissiveMap:Pt,normalMapObjectSpace:Ve&&N.normalMapType===IF,normalMapTangentSpace:Ve&&N.normalMapType===RF,metalnessMap:Se,roughnessMap:W,anisotropy:D,anisotropyMap:Re,clearcoat:te,clearcoatMap:we,clearcoatNormalMap:Ke,clearcoatRoughnessMap:xe,dispersion:ue,iridescence:Z,iridescenceMap:Te,iridescenceThicknessMap:ke,sheen:ne,sheenColorMap:tt,sheenRoughnessMap:Me,specularMap:$e,specularColorMap:ut,specularIntensityMap:rt,transmission:me,transmissionMap:Y,thicknessMap:Ne,gradientMap:se,opaque:N.transparent===!1&&N.blending===Ol&&N.alphaToCoverage===!1,alphaMap:fe,alphaTest:Be,alphaHash:_e,combine:N.combine,mapUv:pe&&m(N.map.channel),aoMapUv:j&&m(N.aoMap.channel),lightMapUv:Ue&&m(N.lightMap.channel),bumpMapUv:et&&m(N.bumpMap.channel),normalMapUv:Ve&&m(N.normalMap.channel),displacementMapUv:Ie&&m(N.displacementMap.channel),emissiveMapUv:Pt&&m(N.emissiveMap.channel),metalnessMapUv:Se&&m(N.metalnessMap.channel),roughnessMapUv:W&&m(N.roughnessMap.channel),anisotropyMapUv:Re&&m(N.anisotropyMap.channel),clearcoatMapUv:we&&m(N.clearcoatMap.channel),clearcoatNormalMapUv:Ke&&m(N.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:xe&&m(N.clearcoatRoughnessMap.channel),iridescenceMapUv:Te&&m(N.iridescenceMap.channel),iridescenceThicknessMapUv:ke&&m(N.iridescenceThicknessMap.channel),sheenColorMapUv:tt&&m(N.sheenColorMap.channel),sheenRoughnessMapUv:Me&&m(N.sheenRoughnessMap.channel),specularMapUv:$e&&m(N.specularMap.channel),specularColorMapUv:ut&&m(N.specularColorMap.channel),specularIntensityMapUv:rt&&m(N.specularIntensityMap.channel),transmissionMapUv:Y&&m(N.transmissionMap.channel),thicknessMapUv:Ne&&m(N.thicknessMap.channel),alphaMapUv:fe&&m(N.alphaMap.channel),vertexTangents:!!_.attributes.tangent&&(Ve||D),vertexColors:N.vertexColors,vertexAlphas:N.vertexColors===!0&&!!_.attributes.color&&_.attributes.color.itemSize===4,pointsUvs:M.isPoints===!0&&!!_.attributes.uv&&(pe||fe),fog:!!g,useFog:N.fog===!0,fogExp2:!!g&&g.isFogExp2,flatShading:N.flatShading===!0,sizeAttenuation:N.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:$,skinning:M.isSkinnedMesh===!0,morphTargets:_.morphAttributes.position!==void 0,morphNormals:_.morphAttributes.normal!==void 0,morphColors:_.morphAttributes.color!==void 0,morphTargetsCount:k,morphTextureStride:x,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numLightProbes:I.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:N.dithering,shadowMapEnabled:n.shadowMap.enabled&&U.length>0,shadowMapType:n.shadowMap.type,toneMapping:tn,decodeVideoTexture:pe&&N.map.isVideoTexture===!0&&Kt.getTransfer(N.map.colorSpace)===dn,decodeVideoTextureEmissive:Pt&&N.emissiveMap.isVideoTexture===!0&&Kt.getTransfer(N.emissiveMap.colorSpace)===dn,premultipliedAlpha:N.premultipliedAlpha,doubleSided:N.side===_o,flipSided:N.side===Xr,useDepthPacking:N.depthPacking>=0,depthPacking:N.depthPacking||0,index0AttributeName:N.index0AttributeName,extensionClipCullDistance:We&&N.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(We&&N.extensions.multiDraw===!0||he)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:N.customProgramCacheKey()};return bt.vertexUv1s=l.has(1),bt.vertexUv2s=l.has(2),bt.vertexUv3s=l.has(3),l.clear(),bt}function h(N){const I=[];if(N.shaderID?I.push(N.shaderID):(I.push(N.customVertexShaderID),I.push(N.customFragmentShaderID)),N.defines!==void 0)for(const U in N.defines)I.push(U),I.push(N.defines[U]);return N.isRawShaderMaterial===!1&&(w(I,N),S(I,N),I.push(n.outputColorSpace)),I.push(N.customProgramCacheKey),I.join()}function w(N,I){N.push(I.precision),N.push(I.outputColorSpace),N.push(I.envMapMode),N.push(I.envMapCubeUVHeight),N.push(I.mapUv),N.push(I.alphaMapUv),N.push(I.lightMapUv),N.push(I.aoMapUv),N.push(I.bumpMapUv),N.push(I.normalMapUv),N.push(I.displacementMapUv),N.push(I.emissiveMapUv),N.push(I.metalnessMapUv),N.push(I.roughnessMapUv),N.push(I.anisotropyMapUv),N.push(I.clearcoatMapUv),N.push(I.clearcoatNormalMapUv),N.push(I.clearcoatRoughnessMapUv),N.push(I.iridescenceMapUv),N.push(I.iridescenceThicknessMapUv),N.push(I.sheenColorMapUv),N.push(I.sheenRoughnessMapUv),N.push(I.specularMapUv),N.push(I.specularColorMapUv),N.push(I.specularIntensityMapUv),N.push(I.transmissionMapUv),N.push(I.thicknessMapUv),N.push(I.combine),N.push(I.fogExp2),N.push(I.sizeAttenuation),N.push(I.morphTargetsCount),N.push(I.morphAttributeCount),N.push(I.numDirLights),N.push(I.numPointLights),N.push(I.numSpotLights),N.push(I.numSpotLightMaps),N.push(I.numHemiLights),N.push(I.numRectAreaLights),N.push(I.numDirLightShadows),N.push(I.numPointLightShadows),N.push(I.numSpotLightShadows),N.push(I.numSpotLightShadowsWithMaps),N.push(I.numLightProbes),N.push(I.shadowMapType),N.push(I.toneMapping),N.push(I.numClippingPlanes),N.push(I.numClipIntersection),N.push(I.depthPacking)}function S(N,I){a.disableAll(),I.supportsVertexTextures&&a.enable(0),I.instancing&&a.enable(1),I.instancingColor&&a.enable(2),I.instancingMorph&&a.enable(3),I.matcap&&a.enable(4),I.envMap&&a.enable(5),I.normalMapObjectSpace&&a.enable(6),I.normalMapTangentSpace&&a.enable(7),I.clearcoat&&a.enable(8),I.iridescence&&a.enable(9),I.alphaTest&&a.enable(10),I.vertexColors&&a.enable(11),I.vertexAlphas&&a.enable(12),I.vertexUv1s&&a.enable(13),I.vertexUv2s&&a.enable(14),I.vertexUv3s&&a.enable(15),I.vertexTangents&&a.enable(16),I.anisotropy&&a.enable(17),I.alphaHash&&a.enable(18),I.batching&&a.enable(19),I.dispersion&&a.enable(20),I.batchingColor&&a.enable(21),N.push(a.mask),a.disableAll(),I.fog&&a.enable(0),I.useFog&&a.enable(1),I.flatShading&&a.enable(2),I.logarithmicDepthBuffer&&a.enable(3),I.reverseDepthBuffer&&a.enable(4),I.skinning&&a.enable(5),I.morphTargets&&a.enable(6),I.morphNormals&&a.enable(7),I.morphColors&&a.enable(8),I.premultipliedAlpha&&a.enable(9),I.shadowMapEnabled&&a.enable(10),I.doubleSided&&a.enable(11),I.flipSided&&a.enable(12),I.useDepthPacking&&a.enable(13),I.dithering&&a.enable(14),I.transmission&&a.enable(15),I.sheen&&a.enable(16),I.opaque&&a.enable(17),I.pointsUvs&&a.enable(18),I.decodeVideoTexture&&a.enable(19),I.decodeVideoTextureEmissive&&a.enable(20),I.alphaToCoverage&&a.enable(21),N.push(a.mask)}function T(N){const I=v[N.type];let U;if(I){const q=xs[I];U=x5.clone(q.uniforms)}else U=N.uniforms;return U}function C(N,I){let U;for(let q=0,M=u.length;q<M;q++){const g=u[q];if(g.cacheKey===I){U=g,++U.usedTimes;break}}return U===void 0&&(U=new zH(n,I,N,s),u.push(U)),U}function B(N){if(--N.usedTimes===0){const I=u.indexOf(N);u[I]=u[u.length-1],u.pop(),N.destroy()}}function O(N){c.remove(N)}function P(){c.dispose()}return{getParameters:y,getProgramCacheKey:h,getUniforms:T,acquireProgram:C,releaseProgram:B,releaseShaderCache:O,programs:u,dispose:P}}function qH(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function r(o){n.delete(o)}function i(o,a,c){n.get(o)[a]=c}function s(){n=new WeakMap}return{has:e,get:t,remove:r,update:i,dispose:s}}function $H(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function NA(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function BA(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(f,d,p,v,m,y){let h=n[e];return h===void 0?(h={id:f.id,object:f,geometry:d,material:p,groupOrder:v,renderOrder:f.renderOrder,z:m,group:y},n[e]=h):(h.id=f.id,h.object=f,h.geometry=d,h.material=p,h.groupOrder=v,h.renderOrder=f.renderOrder,h.z=m,h.group=y),e++,h}function a(f,d,p,v,m,y){const h=o(f,d,p,v,m,y);p.transmission>0?r.push(h):p.transparent===!0?i.push(h):t.push(h)}function c(f,d,p,v,m,y){const h=o(f,d,p,v,m,y);p.transmission>0?r.unshift(h):p.transparent===!0?i.unshift(h):t.unshift(h)}function l(f,d){t.length>1&&t.sort(f||$H),r.length>1&&r.sort(d||NA),i.length>1&&i.sort(d||NA)}function u(){for(let f=e,d=n.length;f<d;f++){const p=n[f];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:c,finish:u,sort:l}}function XH(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new BA,n.set(r,[o])):i>=s.length?(o=new BA,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function KH(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new oe,color:new Wt};break;case"SpotLight":t={position:new oe,direction:new oe,color:new Wt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new oe,color:new Wt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new oe,skyColor:new Wt,groundColor:new Wt};break;case"RectAreaLight":t={color:new Wt,position:new oe,halfWidth:new oe,halfHeight:new oe};break}return n[e.id]=t,t}}}function YH(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Rt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Rt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Rt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let QH=0;function ZH(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function JH(n){const e=new KH,t=YH(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)r.probe.push(new oe);const i=new oe,s=new Un,o=new Un;function a(l){let u=0,f=0,d=0;for(let N=0;N<9;N++)r.probe[N].set(0,0,0);let p=0,v=0,m=0,y=0,h=0,w=0,S=0,T=0,C=0,B=0,O=0;l.sort(ZH);for(let N=0,I=l.length;N<I;N++){const U=l[N],q=U.color,M=U.intensity,g=U.distance,_=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)u+=q.r*M,f+=q.g*M,d+=q.b*M;else if(U.isLightProbe){for(let b=0;b<9;b++)r.probe[b].addScaledVector(U.sh.coefficients[b],M);O++}else if(U.isDirectionalLight){const b=e.get(U);if(b.color.copy(U.color).multiplyScalar(U.intensity),U.castShadow){const E=U.shadow,R=t.get(U);R.shadowIntensity=E.intensity,R.shadowBias=E.bias,R.shadowNormalBias=E.normalBias,R.shadowRadius=E.radius,R.shadowMapSize=E.mapSize,r.directionalShadow[p]=R,r.directionalShadowMap[p]=_,r.directionalShadowMatrix[p]=U.shadow.matrix,w++}r.directional[p]=b,p++}else if(U.isSpotLight){const b=e.get(U);b.position.setFromMatrixPosition(U.matrixWorld),b.color.copy(q).multiplyScalar(M),b.distance=g,b.coneCos=Math.cos(U.angle),b.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),b.decay=U.decay,r.spot[m]=b;const E=U.shadow;if(U.map&&(r.spotLightMap[C]=U.map,C++,E.updateMatrices(U),U.castShadow&&B++),r.spotLightMatrix[m]=E.matrix,U.castShadow){const R=t.get(U);R.shadowIntensity=E.intensity,R.shadowBias=E.bias,R.shadowNormalBias=E.normalBias,R.shadowRadius=E.radius,R.shadowMapSize=E.mapSize,r.spotShadow[m]=R,r.spotShadowMap[m]=_,T++}m++}else if(U.isRectAreaLight){const b=e.get(U);b.color.copy(q).multiplyScalar(M),b.halfWidth.set(U.width*.5,0,0),b.halfHeight.set(0,U.height*.5,0),r.rectArea[y]=b,y++}else if(U.isPointLight){const b=e.get(U);if(b.color.copy(U.color).multiplyScalar(U.intensity),b.distance=U.distance,b.decay=U.decay,U.castShadow){const E=U.shadow,R=t.get(U);R.shadowIntensity=E.intensity,R.shadowBias=E.bias,R.shadowNormalBias=E.normalBias,R.shadowRadius=E.radius,R.shadowMapSize=E.mapSize,R.shadowCameraNear=E.camera.near,R.shadowCameraFar=E.camera.far,r.pointShadow[v]=R,r.pointShadowMap[v]=_,r.pointShadowMatrix[v]=U.shadow.matrix,S++}r.point[v]=b,v++}else if(U.isHemisphereLight){const b=e.get(U);b.skyColor.copy(U.color).multiplyScalar(M),b.groundColor.copy(U.groundColor).multiplyScalar(M),r.hemi[h]=b,h++}}y>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=De.LTC_FLOAT_1,r.rectAreaLTC2=De.LTC_FLOAT_2):(r.rectAreaLTC1=De.LTC_HALF_1,r.rectAreaLTC2=De.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=f,r.ambient[2]=d;const P=r.hash;(P.directionalLength!==p||P.pointLength!==v||P.spotLength!==m||P.rectAreaLength!==y||P.hemiLength!==h||P.numDirectionalShadows!==w||P.numPointShadows!==S||P.numSpotShadows!==T||P.numSpotMaps!==C||P.numLightProbes!==O)&&(r.directional.length=p,r.spot.length=m,r.rectArea.length=y,r.point.length=v,r.hemi.length=h,r.directionalShadow.length=w,r.directionalShadowMap.length=w,r.pointShadow.length=S,r.pointShadowMap.length=S,r.spotShadow.length=T,r.spotShadowMap.length=T,r.directionalShadowMatrix.length=w,r.pointShadowMatrix.length=S,r.spotLightMatrix.length=T+C-B,r.spotLightMap.length=C,r.numSpotLightShadowsWithMaps=B,r.numLightProbes=O,P.directionalLength=p,P.pointLength=v,P.spotLength=m,P.rectAreaLength=y,P.hemiLength=h,P.numDirectionalShadows=w,P.numPointShadows=S,P.numSpotShadows=T,P.numSpotMaps=C,P.numLightProbes=O,r.version=QH++)}function c(l,u){let f=0,d=0,p=0,v=0,m=0;const y=u.matrixWorldInverse;for(let h=0,w=l.length;h<w;h++){const S=l[h];if(S.isDirectionalLight){const T=r.directional[f];T.direction.setFromMatrixPosition(S.matrixWorld),i.setFromMatrixPosition(S.target.matrixWorld),T.direction.sub(i),T.direction.transformDirection(y),f++}else if(S.isSpotLight){const T=r.spot[p];T.position.setFromMatrixPosition(S.matrixWorld),T.position.applyMatrix4(y),T.direction.setFromMatrixPosition(S.matrixWorld),i.setFromMatrixPosition(S.target.matrixWorld),T.direction.sub(i),T.direction.transformDirection(y),p++}else if(S.isRectAreaLight){const T=r.rectArea[v];T.position.setFromMatrixPosition(S.matrixWorld),T.position.applyMatrix4(y),o.identity(),s.copy(S.matrixWorld),s.premultiply(y),o.extractRotation(s),T.halfWidth.set(S.width*.5,0,0),T.halfHeight.set(0,S.height*.5,0),T.halfWidth.applyMatrix4(o),T.halfHeight.applyMatrix4(o),v++}else if(S.isPointLight){const T=r.point[d];T.position.setFromMatrixPosition(S.matrixWorld),T.position.applyMatrix4(y),d++}else if(S.isHemisphereLight){const T=r.hemi[m];T.direction.setFromMatrixPosition(S.matrixWorld),T.direction.transformDirection(y),m++}}}return{setup:a,setupView:c,state:r}}function LA(n){const e=new JH(n),t=[],r=[];function i(u){l.camera=u,t.length=0,r.length=0}function s(u){t.push(u)}function o(u){r.push(u)}function a(){e.setup(t)}function c(u){e.setupView(t,u)}const l={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:l,setupLights:a,setupLightsView:c,pushLight:s,pushShadow:o}}function ez(n){let e=new WeakMap;function t(i,s=0){const o=e.get(i);let a;return o===void 0?(a=new LA(n),e.set(i,[a])):s>=o.length?(a=new LA(n),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:t,dispose:r}}const tz=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,nz=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function rz(n,e,t){let r=new tM;const i=new Rt,s=new Rt,o=new On,a=new I5({depthPacking:MF}),c=new C5,l={},u=t.maxTextureSize,f={[Ea]:Xr,[Xr]:Ea,[_o]:_o},d=new Sa({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Rt},radius:{value:4}},vertexShader:tz,fragmentShader:nz}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const v=new ns;v.setAttribute("position",new Vr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Ns(v,d),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PT;let h=this.type;this.render=function(B,O,P){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||B.length===0)return;const N=n.getRenderTarget(),I=n.getActiveCubeFace(),U=n.getActiveMipmapLevel(),q=n.state;q.setBlending(va),q.buffers.color.setClear(1,1,1,1),q.buffers.depth.setTest(!0),q.setScissorTest(!1);const M=h!==lo&&this.type===lo,g=h===lo&&this.type!==lo;for(let _=0,b=B.length;_<b;_++){const E=B[_],R=E.shadow;if(R===void 0||R.autoUpdate===!1&&R.needsUpdate===!1)continue;i.copy(R.mapSize);const L=R.getFrameExtents();if(i.multiply(L),s.copy(R.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/L.x),i.x=s.x*L.x,R.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/L.y),i.y=s.y*L.y,R.mapSize.y=s.y)),R.map===null||M===!0||g===!0){const k=this.type!==lo?{minFilter:es,magFilter:es}:{};R.map!==null&&R.map.dispose(),R.map=new wc(i.x,i.y,k),R.map.texture.name=E.name+".shadowMap",R.camera.updateProjectionMatrix()}n.setRenderTarget(R.map),n.clear();const G=R.getViewportCount();for(let k=0;k<G;k++){const x=R.getViewport(k);o.set(s.x*x.x,s.y*x.y,s.x*x.z,s.y*x.w),q.viewport(o),R.updateMatrices(E,k),r=R.getFrustum(),T(O,P,R.camera,E,this.type)}R.isPointLightShadow!==!0&&this.type===lo&&w(R,P),R.needsUpdate=!1}h=this.type,y.needsUpdate=!1,n.setRenderTarget(N,I,U)};function w(B,O){const P=e.update(m);d.defines.VSM_SAMPLES!==B.blurSamples&&(d.defines.VSM_SAMPLES=B.blurSamples,p.defines.VSM_SAMPLES=B.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),B.mapPass===null&&(B.mapPass=new wc(i.x,i.y)),d.uniforms.shadow_pass.value=B.map.texture,d.uniforms.resolution.value=B.mapSize,d.uniforms.radius.value=B.radius,n.setRenderTarget(B.mapPass),n.clear(),n.renderBufferDirect(O,null,P,d,m,null),p.uniforms.shadow_pass.value=B.mapPass.texture,p.uniforms.resolution.value=B.mapSize,p.uniforms.radius.value=B.radius,n.setRenderTarget(B.map),n.clear(),n.renderBufferDirect(O,null,P,p,m,null)}function S(B,O,P,N){let I=null;const U=P.isPointLight===!0?B.customDistanceMaterial:B.customDepthMaterial;if(U!==void 0)I=U;else if(I=P.isPointLight===!0?c:a,n.localClippingEnabled&&O.clipShadows===!0&&Array.isArray(O.clippingPlanes)&&O.clippingPlanes.length!==0||O.displacementMap&&O.displacementScale!==0||O.alphaMap&&O.alphaTest>0||O.map&&O.alphaTest>0){const q=I.uuid,M=O.uuid;let g=l[q];g===void 0&&(g={},l[q]=g);let _=g[M];_===void 0&&(_=I.clone(),g[M]=_,O.addEventListener("dispose",C)),I=_}if(I.visible=O.visible,I.wireframe=O.wireframe,N===lo?I.side=O.shadowSide!==null?O.shadowSide:O.side:I.side=O.shadowSide!==null?O.shadowSide:f[O.side],I.alphaMap=O.alphaMap,I.alphaTest=O.alphaTest,I.map=O.map,I.clipShadows=O.clipShadows,I.clippingPlanes=O.clippingPlanes,I.clipIntersection=O.clipIntersection,I.displacementMap=O.displacementMap,I.displacementScale=O.displacementScale,I.displacementBias=O.displacementBias,I.wireframeLinewidth=O.wireframeLinewidth,I.linewidth=O.linewidth,P.isPointLight===!0&&I.isMeshDistanceMaterial===!0){const q=n.properties.get(I);q.light=P}return I}function T(B,O,P,N,I){if(B.visible===!1)return;if(B.layers.test(O.layers)&&(B.isMesh||B.isLine||B.isPoints)&&(B.castShadow||B.receiveShadow&&I===lo)&&(!B.frustumCulled||r.intersectsObject(B))){B.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,B.matrixWorld);const M=e.update(B),g=B.material;if(Array.isArray(g)){const _=M.groups;for(let b=0,E=_.length;b<E;b++){const R=_[b],L=g[R.materialIndex];if(L&&L.visible){const G=S(B,L,N,I);B.onBeforeShadow(n,B,O,P,M,G,R),n.renderBufferDirect(P,null,M,G,B,R),B.onAfterShadow(n,B,O,P,M,G,R)}}}else if(g.visible){const _=S(B,g,N,I);B.onBeforeShadow(n,B,O,P,M,_,null),n.renderBufferDirect(P,null,M,_,B,null),B.onAfterShadow(n,B,O,P,M,_,null)}}const q=B.children;for(let M=0,g=q.length;M<g;M++)T(q[M],O,P,N,I)}function C(B){B.target.removeEventListener("dispose",C);for(const P in l){const N=l[P],I=B.target.uuid;I in N&&(N[I].dispose(),delete N[I])}}}const iz={[Lv]:kv,[Dv]:Fv,[Ov]:Hv,[nu]:Uv,[kv]:Lv,[Fv]:Dv,[Hv]:Ov,[Uv]:nu};function sz(n,e){function t(){let Y=!1;const Ne=new On;let se=null;const fe=new On(0,0,0,0);return{setMask:function(Be){se!==Be&&!Y&&(n.colorMask(Be,Be,Be,Be),se=Be)},setLocked:function(Be){Y=Be},setClear:function(Be,_e,We,tn,bt){bt===!0&&(Be*=tn,_e*=tn,We*=tn),Ne.set(Be,_e,We,tn),fe.equals(Ne)===!1&&(n.clearColor(Be,_e,We,tn),fe.copy(Ne))},reset:function(){Y=!1,se=null,fe.set(-1,0,0,0)}}}function r(){let Y=!1,Ne=!1,se=null,fe=null,Be=null;return{setReversed:function(_e){if(Ne!==_e){const We=e.get("EXT_clip_control");Ne?We.clipControlEXT(We.LOWER_LEFT_EXT,We.ZERO_TO_ONE_EXT):We.clipControlEXT(We.LOWER_LEFT_EXT,We.NEGATIVE_ONE_TO_ONE_EXT);const tn=Be;Be=null,this.setClear(tn)}Ne=_e},getReversed:function(){return Ne},setTest:function(_e){_e?V(n.DEPTH_TEST):$(n.DEPTH_TEST)},setMask:function(_e){se!==_e&&!Y&&(n.depthMask(_e),se=_e)},setFunc:function(_e){if(Ne&&(_e=iz[_e]),fe!==_e){switch(_e){case Lv:n.depthFunc(n.NEVER);break;case kv:n.depthFunc(n.ALWAYS);break;case Dv:n.depthFunc(n.LESS);break;case nu:n.depthFunc(n.LEQUAL);break;case Ov:n.depthFunc(n.EQUAL);break;case Uv:n.depthFunc(n.GEQUAL);break;case Fv:n.depthFunc(n.GREATER);break;case Hv:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}fe=_e}},setLocked:function(_e){Y=_e},setClear:function(_e){Be!==_e&&(Ne&&(_e=1-_e),n.clearDepth(_e),Be=_e)},reset:function(){Y=!1,se=null,fe=null,Be=null,Ne=!1}}}function i(){let Y=!1,Ne=null,se=null,fe=null,Be=null,_e=null,We=null,tn=null,bt=null;return{setTest:function(Je){Y||(Je?V(n.STENCIL_TEST):$(n.STENCIL_TEST))},setMask:function(Je){Ne!==Je&&!Y&&(n.stencilMask(Je),Ne=Je)},setFunc:function(Je,Vn,Ot){(se!==Je||fe!==Vn||Be!==Ot)&&(n.stencilFunc(Je,Vn,Ot),se=Je,fe=Vn,Be=Ot)},setOp:function(Je,Vn,Ot){(_e!==Je||We!==Vn||tn!==Ot)&&(n.stencilOp(Je,Vn,Ot),_e=Je,We=Vn,tn=Ot)},setLocked:function(Je){Y=Je},setClear:function(Je){bt!==Je&&(n.clearStencil(Je),bt=Je)},reset:function(){Y=!1,Ne=null,se=null,fe=null,Be=null,_e=null,We=null,tn=null,bt=null}}}const s=new t,o=new r,a=new i,c=new WeakMap,l=new WeakMap;let u={},f={},d=new WeakMap,p=[],v=null,m=!1,y=null,h=null,w=null,S=null,T=null,C=null,B=null,O=new Wt(0,0,0),P=0,N=!1,I=null,U=null,q=null,M=null,g=null;const _=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let b=!1,E=0;const R=n.getParameter(n.VERSION);R.indexOf("WebGL")!==-1?(E=parseFloat(/^WebGL (\d)/.exec(R)[1]),b=E>=1):R.indexOf("OpenGL ES")!==-1&&(E=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),b=E>=2);let L=null,G={};const k=n.getParameter(n.SCISSOR_BOX),x=n.getParameter(n.VIEWPORT),F=new On().fromArray(k),K=new On().fromArray(x);function A(Y,Ne,se,fe){const Be=new Uint8Array(4),_e=n.createTexture();n.bindTexture(Y,_e),n.texParameteri(Y,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Y,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let We=0;We<se;We++)Y===n.TEXTURE_3D||Y===n.TEXTURE_2D_ARRAY?n.texImage3D(Ne,0,n.RGBA,1,1,fe,0,n.RGBA,n.UNSIGNED_BYTE,Be):n.texImage2D(Ne+We,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Be);return _e}const X={};X[n.TEXTURE_2D]=A(n.TEXTURE_2D,n.TEXTURE_2D,1),X[n.TEXTURE_CUBE_MAP]=A(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),X[n.TEXTURE_2D_ARRAY]=A(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),X[n.TEXTURE_3D]=A(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),V(n.DEPTH_TEST),o.setFunc(nu),et(!1),Ve(kw),V(n.CULL_FACE),j(va);function V(Y){u[Y]!==!0&&(n.enable(Y),u[Y]=!0)}function $(Y){u[Y]!==!1&&(n.disable(Y),u[Y]=!1)}function ee(Y,Ne){return f[Y]!==Ne?(n.bindFramebuffer(Y,Ne),f[Y]=Ne,Y===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=Ne),Y===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=Ne),!0):!1}function he(Y,Ne){let se=p,fe=!1;if(Y){se=d.get(Ne),se===void 0&&(se=[],d.set(Ne,se));const Be=Y.textures;if(se.length!==Be.length||se[0]!==n.COLOR_ATTACHMENT0){for(let _e=0,We=Be.length;_e<We;_e++)se[_e]=n.COLOR_ATTACHMENT0+_e;se.length=Be.length,fe=!0}}else se[0]!==n.BACK&&(se[0]=n.BACK,fe=!0);fe&&n.drawBuffers(se)}function pe(Y){return v!==Y?(n.useProgram(Y),v=Y,!0):!1}const de={[Za]:n.FUNC_ADD,[JU]:n.FUNC_SUBTRACT,[eF]:n.FUNC_REVERSE_SUBTRACT};de[tF]=n.MIN,de[nF]=n.MAX;const Fe={[rF]:n.ZERO,[iF]:n.ONE,[sF]:n.SRC_COLOR,[Nv]:n.SRC_ALPHA,[fF]:n.SRC_ALPHA_SATURATE,[lF]:n.DST_COLOR,[aF]:n.DST_ALPHA,[oF]:n.ONE_MINUS_SRC_COLOR,[Bv]:n.ONE_MINUS_SRC_ALPHA,[uF]:n.ONE_MINUS_DST_COLOR,[cF]:n.ONE_MINUS_DST_ALPHA,[dF]:n.CONSTANT_COLOR,[hF]:n.ONE_MINUS_CONSTANT_COLOR,[pF]:n.CONSTANT_ALPHA,[mF]:n.ONE_MINUS_CONSTANT_ALPHA};function j(Y,Ne,se,fe,Be,_e,We,tn,bt,Je){if(Y===va){m===!0&&($(n.BLEND),m=!1);return}if(m===!1&&(V(n.BLEND),m=!0),Y!==ZU){if(Y!==y||Je!==N){if((h!==Za||T!==Za)&&(n.blendEquation(n.FUNC_ADD),h=Za,T=Za),Je)switch(Y){case Ol:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Dw:n.blendFunc(n.ONE,n.ONE);break;case Ow:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Uw:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:break}else switch(Y){case Ol:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Dw:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case Ow:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Uw:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:break}w=null,S=null,C=null,B=null,O.set(0,0,0),P=0,y=Y,N=Je}return}Be=Be||Ne,_e=_e||se,We=We||fe,(Ne!==h||Be!==T)&&(n.blendEquationSeparate(de[Ne],de[Be]),h=Ne,T=Be),(se!==w||fe!==S||_e!==C||We!==B)&&(n.blendFuncSeparate(Fe[se],Fe[fe],Fe[_e],Fe[We]),w=se,S=fe,C=_e,B=We),(tn.equals(O)===!1||bt!==P)&&(n.blendColor(tn.r,tn.g,tn.b,bt),O.copy(tn),P=bt),y=Y,N=!1}function Ue(Y,Ne){Y.side===_o?$(n.CULL_FACE):V(n.CULL_FACE);let se=Y.side===Xr;Ne&&(se=!se),et(se),Y.blending===Ol&&Y.transparent===!1?j(va):j(Y.blending,Y.blendEquation,Y.blendSrc,Y.blendDst,Y.blendEquationAlpha,Y.blendSrcAlpha,Y.blendDstAlpha,Y.blendColor,Y.blendAlpha,Y.premultipliedAlpha),o.setFunc(Y.depthFunc),o.setTest(Y.depthTest),o.setMask(Y.depthWrite),s.setMask(Y.colorWrite);const fe=Y.stencilWrite;a.setTest(fe),fe&&(a.setMask(Y.stencilWriteMask),a.setFunc(Y.stencilFunc,Y.stencilRef,Y.stencilFuncMask),a.setOp(Y.stencilFail,Y.stencilZFail,Y.stencilZPass)),Pt(Y.polygonOffset,Y.polygonOffsetFactor,Y.polygonOffsetUnits),Y.alphaToCoverage===!0?V(n.SAMPLE_ALPHA_TO_COVERAGE):$(n.SAMPLE_ALPHA_TO_COVERAGE)}function et(Y){I!==Y&&(Y?n.frontFace(n.CW):n.frontFace(n.CCW),I=Y)}function Ve(Y){Y!==KU?(V(n.CULL_FACE),Y!==U&&(Y===kw?n.cullFace(n.BACK):Y===YU?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):$(n.CULL_FACE),U=Y}function Ie(Y){Y!==q&&(b&&n.lineWidth(Y),q=Y)}function Pt(Y,Ne,se){Y?(V(n.POLYGON_OFFSET_FILL),(M!==Ne||g!==se)&&(n.polygonOffset(Ne,se),M=Ne,g=se)):$(n.POLYGON_OFFSET_FILL)}function Se(Y){Y?V(n.SCISSOR_TEST):$(n.SCISSOR_TEST)}function W(Y){Y===void 0&&(Y=n.TEXTURE0+_-1),L!==Y&&(n.activeTexture(Y),L=Y)}function D(Y,Ne,se){se===void 0&&(L===null?se=n.TEXTURE0+_-1:se=L);let fe=G[se];fe===void 0&&(fe={type:void 0,texture:void 0},G[se]=fe),(fe.type!==Y||fe.texture!==Ne)&&(L!==se&&(n.activeTexture(se),L=se),n.bindTexture(Y,Ne||X[Y]),fe.type=Y,fe.texture=Ne)}function te(){const Y=G[L];Y!==void 0&&Y.type!==void 0&&(n.bindTexture(Y.type,null),Y.type=void 0,Y.texture=void 0)}function ue(){try{n.compressedTexImage2D.apply(n,arguments)}catch{}}function Z(){try{n.compressedTexImage3D.apply(n,arguments)}catch{}}function ne(){try{n.texSubImage2D.apply(n,arguments)}catch{}}function me(){try{n.texSubImage3D.apply(n,arguments)}catch{}}function Re(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch{}}function we(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch{}}function Ke(){try{n.texStorage2D.apply(n,arguments)}catch{}}function xe(){try{n.texStorage3D.apply(n,arguments)}catch{}}function Te(){try{n.texImage2D.apply(n,arguments)}catch{}}function ke(){try{n.texImage3D.apply(n,arguments)}catch{}}function tt(Y){F.equals(Y)===!1&&(n.scissor(Y.x,Y.y,Y.z,Y.w),F.copy(Y))}function Me(Y){K.equals(Y)===!1&&(n.viewport(Y.x,Y.y,Y.z,Y.w),K.copy(Y))}function $e(Y,Ne){let se=l.get(Ne);se===void 0&&(se=new WeakMap,l.set(Ne,se));let fe=se.get(Y);fe===void 0&&(fe=n.getUniformBlockIndex(Ne,Y.name),se.set(Y,fe))}function ut(Y,Ne){const fe=l.get(Ne).get(Y);c.get(Ne)!==fe&&(n.uniformBlockBinding(Ne,fe,Y.__bindingPointIndex),c.set(Ne,fe))}function rt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},L=null,G={},f={},d=new WeakMap,p=[],v=null,m=!1,y=null,h=null,w=null,S=null,T=null,C=null,B=null,O=new Wt(0,0,0),P=0,N=!1,I=null,U=null,q=null,M=null,g=null,F.set(0,0,n.canvas.width,n.canvas.height),K.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:V,disable:$,bindFramebuffer:ee,drawBuffers:he,useProgram:pe,setBlending:j,setMaterial:Ue,setFlipSided:et,setCullFace:Ve,setLineWidth:Ie,setPolygonOffset:Pt,setScissorTest:Se,activeTexture:W,bindTexture:D,unbindTexture:te,compressedTexImage2D:ue,compressedTexImage3D:Z,texImage2D:Te,texImage3D:ke,updateUBOMapping:$e,uniformBlockBinding:ut,texStorage2D:Ke,texStorage3D:xe,texSubImage2D:ne,texSubImage3D:me,compressedTexSubImage2D:Re,compressedTexSubImage3D:we,scissor:tt,viewport:Me,reset:rt}}function oz(n,e,t,r,i,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),l=new Rt,u=new WeakMap;let f;const d=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(W,D){return p?new OffscreenCanvas(W,D):Ip("canvas")}function m(W,D,te){let ue=1;const Z=Se(W);if((Z.width>te||Z.height>te)&&(ue=te/Math.max(Z.width,Z.height)),ue<1)if(typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&W instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&W instanceof ImageBitmap||typeof VideoFrame<"u"&&W instanceof VideoFrame){const ne=Math.floor(ue*Z.width),me=Math.floor(ue*Z.height);f===void 0&&(f=v(ne,me));const Re=D?v(ne,me):f;return Re.width=ne,Re.height=me,Re.getContext("2d").drawImage(W,0,0,ne,me),Re}else return"data"in W,W;return W}function y(W){return W.generateMipmaps}function h(W){n.generateMipmap(W)}function w(W){return W.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:W.isWebGL3DRenderTarget?n.TEXTURE_3D:W.isWebGLArrayRenderTarget||W.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function S(W,D,te,ue,Z=!1){if(W!==null&&n[W]!==void 0)return n[W];let ne=D;if(D===n.RED&&(te===n.FLOAT&&(ne=n.R32F),te===n.HALF_FLOAT&&(ne=n.R16F),te===n.UNSIGNED_BYTE&&(ne=n.R8)),D===n.RED_INTEGER&&(te===n.UNSIGNED_BYTE&&(ne=n.R8UI),te===n.UNSIGNED_SHORT&&(ne=n.R16UI),te===n.UNSIGNED_INT&&(ne=n.R32UI),te===n.BYTE&&(ne=n.R8I),te===n.SHORT&&(ne=n.R16I),te===n.INT&&(ne=n.R32I)),D===n.RG&&(te===n.FLOAT&&(ne=n.RG32F),te===n.HALF_FLOAT&&(ne=n.RG16F),te===n.UNSIGNED_BYTE&&(ne=n.RG8)),D===n.RG_INTEGER&&(te===n.UNSIGNED_BYTE&&(ne=n.RG8UI),te===n.UNSIGNED_SHORT&&(ne=n.RG16UI),te===n.UNSIGNED_INT&&(ne=n.RG32UI),te===n.BYTE&&(ne=n.RG8I),te===n.SHORT&&(ne=n.RG16I),te===n.INT&&(ne=n.RG32I)),D===n.RGB_INTEGER&&(te===n.UNSIGNED_BYTE&&(ne=n.RGB8UI),te===n.UNSIGNED_SHORT&&(ne=n.RGB16UI),te===n.UNSIGNED_INT&&(ne=n.RGB32UI),te===n.BYTE&&(ne=n.RGB8I),te===n.SHORT&&(ne=n.RGB16I),te===n.INT&&(ne=n.RGB32I)),D===n.RGBA_INTEGER&&(te===n.UNSIGNED_BYTE&&(ne=n.RGBA8UI),te===n.UNSIGNED_SHORT&&(ne=n.RGBA16UI),te===n.UNSIGNED_INT&&(ne=n.RGBA32UI),te===n.BYTE&&(ne=n.RGBA8I),te===n.SHORT&&(ne=n.RGBA16I),te===n.INT&&(ne=n.RGBA32I)),D===n.RGB&&te===n.UNSIGNED_INT_5_9_9_9_REV&&(ne=n.RGB9_E5),D===n.RGBA){const me=Z?Mp:Kt.getTransfer(ue);te===n.FLOAT&&(ne=n.RGBA32F),te===n.HALF_FLOAT&&(ne=n.RGBA16F),te===n.UNSIGNED_BYTE&&(ne=me===dn?n.SRGB8_ALPHA8:n.RGBA8),te===n.UNSIGNED_SHORT_4_4_4_4&&(ne=n.RGBA4),te===n.UNSIGNED_SHORT_5_5_5_1&&(ne=n.RGB5_A1)}return(ne===n.R16F||ne===n.R32F||ne===n.RG16F||ne===n.RG32F||ne===n.RGBA16F||ne===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ne}function T(W,D){let te;return W?D===null||D===xc||D===su?te=n.DEPTH24_STENCIL8:D===Eo?te=n.DEPTH32F_STENCIL8:D===Kf&&(te=n.DEPTH24_STENCIL8):D===null||D===xc||D===su?te=n.DEPTH_COMPONENT24:D===Eo?te=n.DEPTH_COMPONENT32F:D===Kf&&(te=n.DEPTH_COMPONENT16),te}function C(W,D){return y(W)===!0||W.isFramebufferTexture&&W.minFilter!==es&&W.minFilter!==Ps?Math.log2(Math.max(D.width,D.height))+1:W.mipmaps!==void 0&&W.mipmaps.length>0?W.mipmaps.length:W.isCompressedTexture&&Array.isArray(W.image)?D.mipmaps.length:1}function B(W){const D=W.target;D.removeEventListener("dispose",B),P(D),D.isVideoTexture&&u.delete(D)}function O(W){const D=W.target;D.removeEventListener("dispose",O),I(D)}function P(W){const D=r.get(W);if(D.__webglInit===void 0)return;const te=W.source,ue=d.get(te);if(ue){const Z=ue[D.__cacheKey];Z.usedTimes--,Z.usedTimes===0&&N(W),Object.keys(ue).length===0&&d.delete(te)}r.remove(W)}function N(W){const D=r.get(W);n.deleteTexture(D.__webglTexture);const te=W.source,ue=d.get(te);delete ue[D.__cacheKey],o.memory.textures--}function I(W){const D=r.get(W);if(W.depthTexture&&(W.depthTexture.dispose(),r.remove(W.depthTexture)),W.isWebGLCubeRenderTarget)for(let ue=0;ue<6;ue++){if(Array.isArray(D.__webglFramebuffer[ue]))for(let Z=0;Z<D.__webglFramebuffer[ue].length;Z++)n.deleteFramebuffer(D.__webglFramebuffer[ue][Z]);else n.deleteFramebuffer(D.__webglFramebuffer[ue]);D.__webglDepthbuffer&&n.deleteRenderbuffer(D.__webglDepthbuffer[ue])}else{if(Array.isArray(D.__webglFramebuffer))for(let ue=0;ue<D.__webglFramebuffer.length;ue++)n.deleteFramebuffer(D.__webglFramebuffer[ue]);else n.deleteFramebuffer(D.__webglFramebuffer);if(D.__webglDepthbuffer&&n.deleteRenderbuffer(D.__webglDepthbuffer),D.__webglMultisampledFramebuffer&&n.deleteFramebuffer(D.__webglMultisampledFramebuffer),D.__webglColorRenderbuffer)for(let ue=0;ue<D.__webglColorRenderbuffer.length;ue++)D.__webglColorRenderbuffer[ue]&&n.deleteRenderbuffer(D.__webglColorRenderbuffer[ue]);D.__webglDepthRenderbuffer&&n.deleteRenderbuffer(D.__webglDepthRenderbuffer)}const te=W.textures;for(let ue=0,Z=te.length;ue<Z;ue++){const ne=r.get(te[ue]);ne.__webglTexture&&(n.deleteTexture(ne.__webglTexture),o.memory.textures--),r.remove(te[ue])}r.remove(W)}let U=0;function q(){U=0}function M(){const W=U;return W>=i.maxTextures,U+=1,W}function g(W){const D=[];return D.push(W.wrapS),D.push(W.wrapT),D.push(W.wrapR||0),D.push(W.magFilter),D.push(W.minFilter),D.push(W.anisotropy),D.push(W.internalFormat),D.push(W.format),D.push(W.type),D.push(W.generateMipmaps),D.push(W.premultiplyAlpha),D.push(W.flipY),D.push(W.unpackAlignment),D.push(W.colorSpace),D.join()}function _(W,D){const te=r.get(W);if(W.isVideoTexture&&Ie(W),W.isRenderTargetTexture===!1&&W.version>0&&te.__version!==W.version){const ue=W.image;if(ue!==null){if(ue.complete!==!1){K(te,W,D);return}}}t.bindTexture(n.TEXTURE_2D,te.__webglTexture,n.TEXTURE0+D)}function b(W,D){const te=r.get(W);if(W.version>0&&te.__version!==W.version){K(te,W,D);return}t.bindTexture(n.TEXTURE_2D_ARRAY,te.__webglTexture,n.TEXTURE0+D)}function E(W,D){const te=r.get(W);if(W.version>0&&te.__version!==W.version){K(te,W,D);return}t.bindTexture(n.TEXTURE_3D,te.__webglTexture,n.TEXTURE0+D)}function R(W,D){const te=r.get(W);if(W.version>0&&te.__version!==W.version){A(te,W,D);return}t.bindTexture(n.TEXTURE_CUBE_MAP,te.__webglTexture,n.TEXTURE0+D)}const L={[Vv]:n.REPEAT,[nc]:n.CLAMP_TO_EDGE,[Wv]:n.MIRRORED_REPEAT},G={[es]:n.NEAREST,[SF]:n.NEAREST_MIPMAP_NEAREST,[ah]:n.NEAREST_MIPMAP_LINEAR,[Ps]:n.LINEAR,[W0]:n.LINEAR_MIPMAP_NEAREST,[rc]:n.LINEAR_MIPMAP_LINEAR},k={[CF]:n.NEVER,[DF]:n.ALWAYS,[PF]:n.LESS,[WT]:n.LEQUAL,[NF]:n.EQUAL,[kF]:n.GEQUAL,[BF]:n.GREATER,[LF]:n.NOTEQUAL};function x(W,D){if(D.type===Eo&&e.has("OES_texture_float_linear")===!1&&(D.magFilter===Ps||D.magFilter===W0||D.magFilter===ah||D.magFilter===rc||D.minFilter===Ps||D.minFilter===W0||D.minFilter===ah||D.minFilter),n.texParameteri(W,n.TEXTURE_WRAP_S,L[D.wrapS]),n.texParameteri(W,n.TEXTURE_WRAP_T,L[D.wrapT]),(W===n.TEXTURE_3D||W===n.TEXTURE_2D_ARRAY)&&n.texParameteri(W,n.TEXTURE_WRAP_R,L[D.wrapR]),n.texParameteri(W,n.TEXTURE_MAG_FILTER,G[D.magFilter]),n.texParameteri(W,n.TEXTURE_MIN_FILTER,G[D.minFilter]),D.compareFunction&&(n.texParameteri(W,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(W,n.TEXTURE_COMPARE_FUNC,k[D.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(D.magFilter===es||D.minFilter!==ah&&D.minFilter!==rc||D.type===Eo&&e.has("OES_texture_float_linear")===!1)return;if(D.anisotropy>1||r.get(D).__currentAnisotropy){const te=e.get("EXT_texture_filter_anisotropic");n.texParameterf(W,te.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,i.getMaxAnisotropy())),r.get(D).__currentAnisotropy=D.anisotropy}}}function F(W,D){let te=!1;W.__webglInit===void 0&&(W.__webglInit=!0,D.addEventListener("dispose",B));const ue=D.source;let Z=d.get(ue);Z===void 0&&(Z={},d.set(ue,Z));const ne=g(D);if(ne!==W.__cacheKey){Z[ne]===void 0&&(Z[ne]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,te=!0),Z[ne].usedTimes++;const me=Z[W.__cacheKey];me!==void 0&&(Z[W.__cacheKey].usedTimes--,me.usedTimes===0&&N(D)),W.__cacheKey=ne,W.__webglTexture=Z[ne].texture}return te}function K(W,D,te){let ue=n.TEXTURE_2D;(D.isDataArrayTexture||D.isCompressedArrayTexture)&&(ue=n.TEXTURE_2D_ARRAY),D.isData3DTexture&&(ue=n.TEXTURE_3D);const Z=F(W,D),ne=D.source;t.bindTexture(ue,W.__webglTexture,n.TEXTURE0+te);const me=r.get(ne);if(ne.version!==me.__version||Z===!0){t.activeTexture(n.TEXTURE0+te);const Re=Kt.getPrimaries(Kt.workingColorSpace),we=D.colorSpace===fa?null:Kt.getPrimaries(D.colorSpace),Ke=D.colorSpace===fa||Re===we?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,D.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,D.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ke);let xe=m(D.image,!1,i.maxTextureSize);xe=Pt(D,xe);const Te=s.convert(D.format,D.colorSpace),ke=s.convert(D.type);let tt=S(D.internalFormat,Te,ke,D.colorSpace,D.isVideoTexture);x(ue,D);let Me;const $e=D.mipmaps,ut=D.isVideoTexture!==!0,rt=me.__version===void 0||Z===!0,Y=ne.dataReady,Ne=C(D,xe);if(D.isDepthTexture)tt=T(D.format===ou,D.type),rt&&(ut?t.texStorage2D(n.TEXTURE_2D,1,tt,xe.width,xe.height):t.texImage2D(n.TEXTURE_2D,0,tt,xe.width,xe.height,0,Te,ke,null));else if(D.isDataTexture)if($e.length>0){ut&&rt&&t.texStorage2D(n.TEXTURE_2D,Ne,tt,$e[0].width,$e[0].height);for(let se=0,fe=$e.length;se<fe;se++)Me=$e[se],ut?Y&&t.texSubImage2D(n.TEXTURE_2D,se,0,0,Me.width,Me.height,Te,ke,Me.data):t.texImage2D(n.TEXTURE_2D,se,tt,Me.width,Me.height,0,Te,ke,Me.data);D.generateMipmaps=!1}else ut?(rt&&t.texStorage2D(n.TEXTURE_2D,Ne,tt,xe.width,xe.height),Y&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,xe.width,xe.height,Te,ke,xe.data)):t.texImage2D(n.TEXTURE_2D,0,tt,xe.width,xe.height,0,Te,ke,xe.data);else if(D.isCompressedTexture)if(D.isCompressedArrayTexture){ut&&rt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ne,tt,$e[0].width,$e[0].height,xe.depth);for(let se=0,fe=$e.length;se<fe;se++)if(Me=$e[se],D.format!==Qi){if(Te!==null)if(ut){if(Y)if(D.layerUpdates.size>0){const Be=uA(Me.width,Me.height,D.format,D.type);for(const _e of D.layerUpdates){const We=Me.data.subarray(_e*Be/Me.data.BYTES_PER_ELEMENT,(_e+1)*Be/Me.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,se,0,0,_e,Me.width,Me.height,1,Te,We)}D.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,se,0,0,0,Me.width,Me.height,xe.depth,Te,Me.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,se,tt,Me.width,Me.height,xe.depth,0,Me.data,0,0)}else ut?Y&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,se,0,0,0,Me.width,Me.height,xe.depth,Te,ke,Me.data):t.texImage3D(n.TEXTURE_2D_ARRAY,se,tt,Me.width,Me.height,xe.depth,0,Te,ke,Me.data)}else{ut&&rt&&t.texStorage2D(n.TEXTURE_2D,Ne,tt,$e[0].width,$e[0].height);for(let se=0,fe=$e.length;se<fe;se++)Me=$e[se],D.format!==Qi?Te!==null&&(ut?Y&&t.compressedTexSubImage2D(n.TEXTURE_2D,se,0,0,Me.width,Me.height,Te,Me.data):t.compressedTexImage2D(n.TEXTURE_2D,se,tt,Me.width,Me.height,0,Me.data)):ut?Y&&t.texSubImage2D(n.TEXTURE_2D,se,0,0,Me.width,Me.height,Te,ke,Me.data):t.texImage2D(n.TEXTURE_2D,se,tt,Me.width,Me.height,0,Te,ke,Me.data)}else if(D.isDataArrayTexture)if(ut){if(rt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ne,tt,xe.width,xe.height,xe.depth),Y)if(D.layerUpdates.size>0){const se=uA(xe.width,xe.height,D.format,D.type);for(const fe of D.layerUpdates){const Be=xe.data.subarray(fe*se/xe.data.BYTES_PER_ELEMENT,(fe+1)*se/xe.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,fe,xe.width,xe.height,1,Te,ke,Be)}D.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,xe.width,xe.height,xe.depth,Te,ke,xe.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,tt,xe.width,xe.height,xe.depth,0,Te,ke,xe.data);else if(D.isData3DTexture)ut?(rt&&t.texStorage3D(n.TEXTURE_3D,Ne,tt,xe.width,xe.height,xe.depth),Y&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,xe.width,xe.height,xe.depth,Te,ke,xe.data)):t.texImage3D(n.TEXTURE_3D,0,tt,xe.width,xe.height,xe.depth,0,Te,ke,xe.data);else if(D.isFramebufferTexture){if(rt)if(ut)t.texStorage2D(n.TEXTURE_2D,Ne,tt,xe.width,xe.height);else{let se=xe.width,fe=xe.height;for(let Be=0;Be<Ne;Be++)t.texImage2D(n.TEXTURE_2D,Be,tt,se,fe,0,Te,ke,null),se>>=1,fe>>=1}}else if($e.length>0){if(ut&&rt){const se=Se($e[0]);t.texStorage2D(n.TEXTURE_2D,Ne,tt,se.width,se.height)}for(let se=0,fe=$e.length;se<fe;se++)Me=$e[se],ut?Y&&t.texSubImage2D(n.TEXTURE_2D,se,0,0,Te,ke,Me):t.texImage2D(n.TEXTURE_2D,se,tt,Te,ke,Me);D.generateMipmaps=!1}else if(ut){if(rt){const se=Se(xe);t.texStorage2D(n.TEXTURE_2D,Ne,tt,se.width,se.height)}Y&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Te,ke,xe)}else t.texImage2D(n.TEXTURE_2D,0,tt,Te,ke,xe);y(D)&&h(ue),me.__version=ne.version,D.onUpdate&&D.onUpdate(D)}W.__version=D.version}function A(W,D,te){if(D.image.length!==6)return;const ue=F(W,D),Z=D.source;t.bindTexture(n.TEXTURE_CUBE_MAP,W.__webglTexture,n.TEXTURE0+te);const ne=r.get(Z);if(Z.version!==ne.__version||ue===!0){t.activeTexture(n.TEXTURE0+te);const me=Kt.getPrimaries(Kt.workingColorSpace),Re=D.colorSpace===fa?null:Kt.getPrimaries(D.colorSpace),we=D.colorSpace===fa||me===Re?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,D.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,D.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,we);const Ke=D.isCompressedTexture||D.image[0].isCompressedTexture,xe=D.image[0]&&D.image[0].isDataTexture,Te=[];for(let fe=0;fe<6;fe++)!Ke&&!xe?Te[fe]=m(D.image[fe],!0,i.maxCubemapSize):Te[fe]=xe?D.image[fe].image:D.image[fe],Te[fe]=Pt(D,Te[fe]);const ke=Te[0],tt=s.convert(D.format,D.colorSpace),Me=s.convert(D.type),$e=S(D.internalFormat,tt,Me,D.colorSpace),ut=D.isVideoTexture!==!0,rt=ne.__version===void 0||ue===!0,Y=Z.dataReady;let Ne=C(D,ke);x(n.TEXTURE_CUBE_MAP,D);let se;if(Ke){ut&&rt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ne,$e,ke.width,ke.height);for(let fe=0;fe<6;fe++){se=Te[fe].mipmaps;for(let Be=0;Be<se.length;Be++){const _e=se[Be];D.format!==Qi?tt!==null&&(ut?Y&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+fe,Be,0,0,_e.width,_e.height,tt,_e.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+fe,Be,$e,_e.width,_e.height,0,_e.data)):ut?Y&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+fe,Be,0,0,_e.width,_e.height,tt,Me,_e.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+fe,Be,$e,_e.width,_e.height,0,tt,Me,_e.data)}}}else{if(se=D.mipmaps,ut&&rt){se.length>0&&Ne++;const fe=Se(Te[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Ne,$e,fe.width,fe.height)}for(let fe=0;fe<6;fe++)if(xe){ut?Y&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+fe,0,0,0,Te[fe].width,Te[fe].height,tt,Me,Te[fe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+fe,0,$e,Te[fe].width,Te[fe].height,0,tt,Me,Te[fe].data);for(let Be=0;Be<se.length;Be++){const We=se[Be].image[fe].image;ut?Y&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+fe,Be+1,0,0,We.width,We.height,tt,Me,We.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+fe,Be+1,$e,We.width,We.height,0,tt,Me,We.data)}}else{ut?Y&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+fe,0,0,0,tt,Me,Te[fe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+fe,0,$e,tt,Me,Te[fe]);for(let Be=0;Be<se.length;Be++){const _e=se[Be];ut?Y&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+fe,Be+1,0,0,tt,Me,_e.image[fe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+fe,Be+1,$e,tt,Me,_e.image[fe])}}}y(D)&&h(n.TEXTURE_CUBE_MAP),ne.__version=Z.version,D.onUpdate&&D.onUpdate(D)}W.__version=D.version}function X(W,D,te,ue,Z,ne){const me=s.convert(te.format,te.colorSpace),Re=s.convert(te.type),we=S(te.internalFormat,me,Re,te.colorSpace),Ke=r.get(D),xe=r.get(te);if(xe.__renderTarget=D,!Ke.__hasExternalTextures){const Te=Math.max(1,D.width>>ne),ke=Math.max(1,D.height>>ne);Z===n.TEXTURE_3D||Z===n.TEXTURE_2D_ARRAY?t.texImage3D(Z,ne,we,Te,ke,D.depth,0,me,Re,null):t.texImage2D(Z,ne,we,Te,ke,0,me,Re,null)}t.bindFramebuffer(n.FRAMEBUFFER,W),Ve(D)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ue,Z,xe.__webglTexture,0,et(D)):(Z===n.TEXTURE_2D||Z>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Z<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ue,Z,xe.__webglTexture,ne),t.bindFramebuffer(n.FRAMEBUFFER,null)}function V(W,D,te){if(n.bindRenderbuffer(n.RENDERBUFFER,W),D.depthBuffer){const ue=D.depthTexture,Z=ue&&ue.isDepthTexture?ue.type:null,ne=T(D.stencilBuffer,Z),me=D.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Re=et(D);Ve(D)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Re,ne,D.width,D.height):te?n.renderbufferStorageMultisample(n.RENDERBUFFER,Re,ne,D.width,D.height):n.renderbufferStorage(n.RENDERBUFFER,ne,D.width,D.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,me,n.RENDERBUFFER,W)}else{const ue=D.textures;for(let Z=0;Z<ue.length;Z++){const ne=ue[Z],me=s.convert(ne.format,ne.colorSpace),Re=s.convert(ne.type),we=S(ne.internalFormat,me,Re,ne.colorSpace),Ke=et(D);te&&Ve(D)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ke,we,D.width,D.height):Ve(D)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ke,we,D.width,D.height):n.renderbufferStorage(n.RENDERBUFFER,we,D.width,D.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function $(W,D){if(D&&D.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,W),!(D.depthTexture&&D.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ue=r.get(D.depthTexture);ue.__renderTarget=D,(!ue.__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&&(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),_(D.depthTexture,0);const Z=ue.__webglTexture,ne=et(D);if(D.depthTexture.format===Ul)Ve(D)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Z,0,ne):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Z,0);else if(D.depthTexture.format===ou)Ve(D)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Z,0,ne):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Z,0);else throw new Error("Unknown depthTexture format")}function ee(W){const D=r.get(W),te=W.isWebGLCubeRenderTarget===!0;if(D.__boundDepthTexture!==W.depthTexture){const ue=W.depthTexture;if(D.__depthDisposeCallback&&D.__depthDisposeCallback(),ue){const Z=()=>{delete D.__boundDepthTexture,delete D.__depthDisposeCallback,ue.removeEventListener("dispose",Z)};ue.addEventListener("dispose",Z),D.__depthDisposeCallback=Z}D.__boundDepthTexture=ue}if(W.depthTexture&&!D.__autoAllocateDepthBuffer){if(te)throw new Error("target.depthTexture not supported in Cube render targets");$(D.__webglFramebuffer,W)}else if(te){D.__webglDepthbuffer=[];for(let ue=0;ue<6;ue++)if(t.bindFramebuffer(n.FRAMEBUFFER,D.__webglFramebuffer[ue]),D.__webglDepthbuffer[ue]===void 0)D.__webglDepthbuffer[ue]=n.createRenderbuffer(),V(D.__webglDepthbuffer[ue],W,!1);else{const Z=W.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ne=D.__webglDepthbuffer[ue];n.bindRenderbuffer(n.RENDERBUFFER,ne),n.framebufferRenderbuffer(n.FRAMEBUFFER,Z,n.RENDERBUFFER,ne)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,D.__webglFramebuffer),D.__webglDepthbuffer===void 0)D.__webglDepthbuffer=n.createRenderbuffer(),V(D.__webglDepthbuffer,W,!1);else{const ue=W.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Z=D.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Z),n.framebufferRenderbuffer(n.FRAMEBUFFER,ue,n.RENDERBUFFER,Z)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function he(W,D,te){const ue=r.get(W);D!==void 0&&X(ue.__webglFramebuffer,W,W.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),te!==void 0&&ee(W)}function pe(W){const D=W.texture,te=r.get(W),ue=r.get(D);W.addEventListener("dispose",O);const Z=W.textures,ne=W.isWebGLCubeRenderTarget===!0,me=Z.length>1;if(me||(ue.__webglTexture===void 0&&(ue.__webglTexture=n.createTexture()),ue.__version=D.version,o.memory.textures++),ne){te.__webglFramebuffer=[];for(let Re=0;Re<6;Re++)if(D.mipmaps&&D.mipmaps.length>0){te.__webglFramebuffer[Re]=[];for(let we=0;we<D.mipmaps.length;we++)te.__webglFramebuffer[Re][we]=n.createFramebuffer()}else te.__webglFramebuffer[Re]=n.createFramebuffer()}else{if(D.mipmaps&&D.mipmaps.length>0){te.__webglFramebuffer=[];for(let Re=0;Re<D.mipmaps.length;Re++)te.__webglFramebuffer[Re]=n.createFramebuffer()}else te.__webglFramebuffer=n.createFramebuffer();if(me)for(let Re=0,we=Z.length;Re<we;Re++){const Ke=r.get(Z[Re]);Ke.__webglTexture===void 0&&(Ke.__webglTexture=n.createTexture(),o.memory.textures++)}if(W.samples>0&&Ve(W)===!1){te.__webglMultisampledFramebuffer=n.createFramebuffer(),te.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,te.__webglMultisampledFramebuffer);for(let Re=0;Re<Z.length;Re++){const we=Z[Re];te.__webglColorRenderbuffer[Re]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,te.__webglColorRenderbuffer[Re]);const Ke=s.convert(we.format,we.colorSpace),xe=s.convert(we.type),Te=S(we.internalFormat,Ke,xe,we.colorSpace,W.isXRRenderTarget===!0),ke=et(W);n.renderbufferStorageMultisample(n.RENDERBUFFER,ke,Te,W.width,W.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Re,n.RENDERBUFFER,te.__webglColorRenderbuffer[Re])}n.bindRenderbuffer(n.RENDERBUFFER,null),W.depthBuffer&&(te.__webglDepthRenderbuffer=n.createRenderbuffer(),V(te.__webglDepthRenderbuffer,W,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ne){t.bindTexture(n.TEXTURE_CUBE_MAP,ue.__webglTexture),x(n.TEXTURE_CUBE_MAP,D);for(let Re=0;Re<6;Re++)if(D.mipmaps&&D.mipmaps.length>0)for(let we=0;we<D.mipmaps.length;we++)X(te.__webglFramebuffer[Re][we],W,D,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,we);else X(te.__webglFramebuffer[Re],W,D,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,0);y(D)&&h(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(me){for(let Re=0,we=Z.length;Re<we;Re++){const Ke=Z[Re],xe=r.get(Ke);t.bindTexture(n.TEXTURE_2D,xe.__webglTexture),x(n.TEXTURE_2D,Ke),X(te.__webglFramebuffer,W,Ke,n.COLOR_ATTACHMENT0+Re,n.TEXTURE_2D,0),y(Ke)&&h(n.TEXTURE_2D)}t.unbindTexture()}else{let Re=n.TEXTURE_2D;if((W.isWebGL3DRenderTarget||W.isWebGLArrayRenderTarget)&&(Re=W.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Re,ue.__webglTexture),x(Re,D),D.mipmaps&&D.mipmaps.length>0)for(let we=0;we<D.mipmaps.length;we++)X(te.__webglFramebuffer[we],W,D,n.COLOR_ATTACHMENT0,Re,we);else X(te.__webglFramebuffer,W,D,n.COLOR_ATTACHMENT0,Re,0);y(D)&&h(Re),t.unbindTexture()}W.depthBuffer&&ee(W)}function de(W){const D=W.textures;for(let te=0,ue=D.length;te<ue;te++){const Z=D[te];if(y(Z)){const ne=w(W),me=r.get(Z).__webglTexture;t.bindTexture(ne,me),h(ne),t.unbindTexture()}}}const Fe=[],j=[];function Ue(W){if(W.samples>0){if(Ve(W)===!1){const D=W.textures,te=W.width,ue=W.height;let Z=n.COLOR_BUFFER_BIT;const ne=W.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,me=r.get(W),Re=D.length>1;if(Re)for(let we=0;we<D.length;we++)t.bindFramebuffer(n.FRAMEBUFFER,me.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+we,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,me.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+we,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,me.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,me.__webglFramebuffer);for(let we=0;we<D.length;we++){if(W.resolveDepthBuffer&&(W.depthBuffer&&(Z|=n.DEPTH_BUFFER_BIT),W.stencilBuffer&&W.resolveStencilBuffer&&(Z|=n.STENCIL_BUFFER_BIT)),Re){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,me.__webglColorRenderbuffer[we]);const Ke=r.get(D[we]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ke,0)}n.blitFramebuffer(0,0,te,ue,0,0,te,ue,Z,n.NEAREST),c===!0&&(Fe.length=0,j.length=0,Fe.push(n.COLOR_ATTACHMENT0+we),W.depthBuffer&&W.resolveDepthBuffer===!1&&(Fe.push(ne),j.push(ne),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,j)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Fe))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Re)for(let we=0;we<D.length;we++){t.bindFramebuffer(n.FRAMEBUFFER,me.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+we,n.RENDERBUFFER,me.__webglColorRenderbuffer[we]);const Ke=r.get(D[we]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,me.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+we,n.TEXTURE_2D,Ke,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,me.__webglMultisampledFramebuffer)}else if(W.depthBuffer&&W.resolveDepthBuffer===!1&&c){const D=W.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[D])}}}function et(W){return Math.min(i.maxSamples,W.samples)}function Ve(W){const D=r.get(W);return W.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&D.__useRenderToTexture!==!1}function Ie(W){const D=o.render.frame;u.get(W)!==D&&(u.set(W,D),W.update())}function Pt(W,D){const te=W.colorSpace,ue=W.format,Z=W.type;return W.isCompressedTexture===!0||W.isVideoTexture===!0||te!==au&&te!==fa&&Kt.getTransfer(te),D}function Se(W){return typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement?(l.width=W.naturalWidth||W.width,l.height=W.naturalHeight||W.height):typeof VideoFrame<"u"&&W instanceof VideoFrame?(l.width=W.displayWidth,l.height=W.displayHeight):(l.width=W.width,l.height=W.height),l}this.allocateTextureUnit=M,this.resetTextureUnits=q,this.setTexture2D=_,this.setTexture2DArray=b,this.setTexture3D=E,this.setTextureCube=R,this.rebindTextures=he,this.setupRenderTarget=pe,this.updateRenderTargetMipmap=de,this.updateMultisampleRenderTarget=Ue,this.setupDepthRenderbuffer=ee,this.setupFrameBufferTexture=X,this.useMultisampledRTT=Ve}function az(n,e){function t(r,i=fa){let s;const o=Kt.getTransfer(i);if(r===Bo)return n.UNSIGNED_BYTE;if(r===$_)return n.UNSIGNED_SHORT_4_4_4_4;if(r===X_)return n.UNSIGNED_SHORT_5_5_5_1;if(r===DT)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===LT)return n.BYTE;if(r===kT)return n.SHORT;if(r===Kf)return n.UNSIGNED_SHORT;if(r===q_)return n.INT;if(r===xc)return n.UNSIGNED_INT;if(r===Eo)return n.FLOAT;if(r===kd)return n.HALF_FLOAT;if(r===OT)return n.ALPHA;if(r===UT)return n.RGB;if(r===Qi)return n.RGBA;if(r===FT)return n.LUMINANCE;if(r===HT)return n.LUMINANCE_ALPHA;if(r===Ul)return n.DEPTH_COMPONENT;if(r===ou)return n.DEPTH_STENCIL;if(r===zT)return n.RED;if(r===K_)return n.RED_INTEGER;if(r===GT)return n.RG;if(r===Y_)return n.RG_INTEGER;if(r===Q_)return n.RGBA_INTEGER;if(r===jh||r===qh||r===$h||r===Xh)if(o===dn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===jh)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===qh)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===$h)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Xh)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===jh)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===qh)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===$h)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Xh)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===jv||r===qv||r===$v||r===Xv)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===jv)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===qv)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===$v)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===Xv)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===Kv||r===Yv||r===Qv)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===Kv||r===Yv)return o===dn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===Qv)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===Zv||r===Jv||r===ey||r===ty||r===ny||r===ry||r===iy||r===sy||r===oy||r===ay||r===cy||r===ly||r===uy||r===fy)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===Zv)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===Jv)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===ey)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===ty)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===ny)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===ry)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===iy)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===sy)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===oy)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===ay)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===cy)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===ly)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===uy)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===fy)return o===dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===Kh||r===dy||r===hy)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===Kh)return o===dn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===dy)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===hy)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===VT||r===py||r===my||r===gy)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===Kh)return s.COMPRESSED_RED_RGTC1_EXT;if(r===py)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===my)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===gy)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===su?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}const cz={type:"move"};class vg{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Mh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Mh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new oe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new oe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Mh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new oe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new oe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,c=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){o=!0;for(const m of e.hand.values()){const y=t.getJointPose(m,r),h=this._getHandJoint(l,m);y!==null&&(h.matrix.fromArray(y.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,h.jointRadius=y.radius),h.visible=y!==null}const u=l.joints["index-finger-tip"],f=l.joints["thumb-tip"],d=u.position.distanceTo(f.position),p=.02,v=.005;l.inputState.pinching&&d>p+v?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&d<=p-v&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(cz)))}return a!==null&&(a.visible=i!==null),c!==null&&(c.visible=s!==null),l!==null&&(l.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Mh;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}const lz=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,uz=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class fz{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){const i=new Rr,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!=r.depthNear||t.depthFar!=r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new Sa({vertexShader:lz,fragmentShader:uz,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Ns(new qm(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class dz extends Gc{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",c=1,l=null,u=null,f=null,d=null,p=null,v=null;const m=new fz,y=t.getContextAttributes();let h=null,w=null;const S=[],T=[],C=new Rt;let B=null;const O=new Ti;O.viewport=new On;const P=new Ti;P.viewport=new On;const N=[O,P],I=new N5;let U=null,q=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(K){let A=S[K];return A===void 0&&(A=new vg,S[K]=A),A.getTargetRaySpace()},this.getControllerGrip=function(K){let A=S[K];return A===void 0&&(A=new vg,S[K]=A),A.getGripSpace()},this.getHand=function(K){let A=S[K];return A===void 0&&(A=new vg,S[K]=A),A.getHandSpace()};function M(K){const A=T.indexOf(K.inputSource);if(A===-1)return;const X=S[A];X!==void 0&&(X.update(K.inputSource,K.frame,l||o),X.dispatchEvent({type:K.type,data:K.inputSource}))}function g(){i.removeEventListener("select",M),i.removeEventListener("selectstart",M),i.removeEventListener("selectend",M),i.removeEventListener("squeeze",M),i.removeEventListener("squeezestart",M),i.removeEventListener("squeezeend",M),i.removeEventListener("end",g),i.removeEventListener("inputsourceschange",_);for(let K=0;K<S.length;K++){const A=T[K];A!==null&&(T[K]=null,S[K].disconnect(A))}U=null,q=null,m.reset(),e.setRenderTarget(h),p=null,d=null,f=null,i=null,w=null,F.stop(),r.isPresenting=!1,e.setPixelRatio(B),e.setSize(C.width,C.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(K){s=K,r.isPresenting},this.setReferenceSpaceType=function(K){a=K,r.isPresenting},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(K){l=K},this.getBaseLayer=function(){return d!==null?d:p},this.getBinding=function(){return f},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(K){if(i=K,i!==null){if(h=e.getRenderTarget(),i.addEventListener("select",M),i.addEventListener("selectstart",M),i.addEventListener("selectend",M),i.addEventListener("squeeze",M),i.addEventListener("squeezestart",M),i.addEventListener("squeezeend",M),i.addEventListener("end",g),i.addEventListener("inputsourceschange",_),y.xrCompatible!==!0&&await t.makeXRCompatible(),B=e.getPixelRatio(),e.getSize(C),i.renderState.layers===void 0){const A={antialias:y.antialias,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(i,t,A),i.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),w=new wc(p.framebufferWidth,p.framebufferHeight,{format:Qi,type:Bo,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let A=null,X=null,V=null;y.depth&&(V=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,A=y.stencil?ou:Ul,X=y.stencil?su:xc);const $={colorFormat:t.RGBA8,depthFormat:V,scaleFactor:s};f=new XRWebGLBinding(i,t),d=f.createProjectionLayer($),i.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),w=new wc(d.textureWidth,d.textureHeight,{format:Qi,type:Bo,depthTexture:new nM(d.textureWidth,d.textureHeight,X,void 0,void 0,void 0,void 0,void 0,void 0,A),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0,resolveDepthBuffer:d.ignoreDepthValues===!1})}w.isXRRenderTarget=!0,this.setFoveation(c),l=null,o=await i.requestReferenceSpace(a),F.setContext(i),F.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return m.getDepthTexture()};function _(K){for(let A=0;A<K.removed.length;A++){const X=K.removed[A],V=T.indexOf(X);V>=0&&(T[V]=null,S[V].disconnect(X))}for(let A=0;A<K.added.length;A++){const X=K.added[A];let V=T.indexOf(X);if(V===-1){for(let ee=0;ee<S.length;ee++)if(ee>=T.length){T.push(X),V=ee;break}else if(T[ee]===null){T[ee]=X,V=ee;break}if(V===-1)break}const $=S[V];$&&$.connect(X)}}const b=new oe,E=new oe;function R(K,A,X){b.setFromMatrixPosition(A.matrixWorld),E.setFromMatrixPosition(X.matrixWorld);const V=b.distanceTo(E),$=A.projectionMatrix.elements,ee=X.projectionMatrix.elements,he=$[14]/($[10]-1),pe=$[14]/($[10]+1),de=($[9]+1)/$[5],Fe=($[9]-1)/$[5],j=($[8]-1)/$[0],Ue=(ee[8]+1)/ee[0],et=he*j,Ve=he*Ue,Ie=V/(-j+Ue),Pt=Ie*-j;if(A.matrixWorld.decompose(K.position,K.quaternion,K.scale),K.translateX(Pt),K.translateZ(Ie),K.matrixWorld.compose(K.position,K.quaternion,K.scale),K.matrixWorldInverse.copy(K.matrixWorld).invert(),$[10]===-1)K.projectionMatrix.copy(A.projectionMatrix),K.projectionMatrixInverse.copy(A.projectionMatrixInverse);else{const Se=he+Ie,W=pe+Ie,D=et-Pt,te=Ve+(V-Pt),ue=de*pe/W*Se,Z=Fe*pe/W*Se;K.projectionMatrix.makePerspective(D,te,ue,Z,Se,W),K.projectionMatrixInverse.copy(K.projectionMatrix).invert()}}function L(K,A){A===null?K.matrixWorld.copy(K.matrix):K.matrixWorld.multiplyMatrices(A.matrixWorld,K.matrix),K.matrixWorldInverse.copy(K.matrixWorld).invert()}this.updateCamera=function(K){if(i===null)return;let A=K.near,X=K.far;m.texture!==null&&(m.depthNear>0&&(A=m.depthNear),m.depthFar>0&&(X=m.depthFar)),I.near=P.near=O.near=A,I.far=P.far=O.far=X,(U!==I.near||q!==I.far)&&(i.updateRenderState({depthNear:I.near,depthFar:I.far}),U=I.near,q=I.far),O.layers.mask=K.layers.mask|2,P.layers.mask=K.layers.mask|4,I.layers.mask=O.layers.mask|P.layers.mask;const V=K.parent,$=I.cameras;L(I,V);for(let ee=0;ee<$.length;ee++)L($[ee],V);$.length===2?R(I,O,P):I.projectionMatrix.copy(O.projectionMatrix),G(K,I,V)};function G(K,A,X){X===null?K.matrix.copy(A.matrixWorld):(K.matrix.copy(X.matrixWorld),K.matrix.invert(),K.matrix.multiply(A.matrixWorld)),K.matrix.decompose(K.position,K.quaternion,K.scale),K.updateMatrixWorld(!0),K.projectionMatrix.copy(A.projectionMatrix),K.projectionMatrixInverse.copy(A.projectionMatrixInverse),K.isPerspectiveCamera&&(K.fov=Yf*2*Math.atan(1/K.projectionMatrix.elements[5]),K.zoom=1)}this.getCamera=function(){return I},this.getFoveation=function(){if(!(d===null&&p===null))return c},this.setFoveation=function(K){c=K,d!==null&&(d.fixedFoveation=K),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=K)},this.hasDepthSensing=function(){return m.texture!==null},this.getDepthSensingMesh=function(){return m.getMesh(I)};let k=null;function x(K,A){if(u=A.getViewerPose(l||o),v=A,u!==null){const X=u.views;p!==null&&(e.setRenderTargetFramebuffer(w,p.framebuffer),e.setRenderTarget(w));let V=!1;X.length!==I.cameras.length&&(I.cameras.length=0,V=!0);for(let ee=0;ee<X.length;ee++){const he=X[ee];let pe=null;if(p!==null)pe=p.getViewport(he);else{const Fe=f.getViewSubImage(d,he);pe=Fe.viewport,ee===0&&(e.setRenderTargetTextures(w,Fe.colorTexture,d.ignoreDepthValues?void 0:Fe.depthStencilTexture),e.setRenderTarget(w))}let de=N[ee];de===void 0&&(de=new Ti,de.layers.enable(ee),de.viewport=new On,N[ee]=de),de.matrix.fromArray(he.transform.matrix),de.matrix.decompose(de.position,de.quaternion,de.scale),de.projectionMatrix.fromArray(he.projectionMatrix),de.projectionMatrixInverse.copy(de.projectionMatrix).invert(),de.viewport.set(pe.x,pe.y,pe.width,pe.height),ee===0&&(I.matrix.copy(de.matrix),I.matrix.decompose(I.position,I.quaternion,I.scale)),V===!0&&I.cameras.push(de)}const $=i.enabledFeatures;if($&&$.includes("depth-sensing")){const ee=f.getDepthInformation(X[0]);ee&&ee.isValid&&ee.texture&&m.init(e,ee,i.renderState)}}for(let X=0;X<S.length;X++){const V=T[X],$=S[X];V!==null&&$!==void 0&&$.update(V,A,l||o)}k&&k(K,A),A.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:A}),v=null}const F=new rM;F.setAnimationLoop(x),this.setAnimationLoop=function(K){k=K},this.dispose=function(){}}}const ja=new Lo,hz=new Un;function pz(n,e){function t(y,h){y.matrixAutoUpdate===!0&&y.updateMatrix(),h.value.copy(y.matrix)}function r(y,h){h.color.getRGB(y.fogColor.value,ZT(n)),h.isFog?(y.fogNear.value=h.near,y.fogFar.value=h.far):h.isFogExp2&&(y.fogDensity.value=h.density)}function i(y,h,w,S,T){h.isMeshBasicMaterial||h.isMeshLambertMaterial?s(y,h):h.isMeshToonMaterial?(s(y,h),f(y,h)):h.isMeshPhongMaterial?(s(y,h),u(y,h)):h.isMeshStandardMaterial?(s(y,h),d(y,h),h.isMeshPhysicalMaterial&&p(y,h,T)):h.isMeshMatcapMaterial?(s(y,h),v(y,h)):h.isMeshDepthMaterial?s(y,h):h.isMeshDistanceMaterial?(s(y,h),m(y,h)):h.isMeshNormalMaterial?s(y,h):h.isLineBasicMaterial?(o(y,h),h.isLineDashedMaterial&&a(y,h)):h.isPointsMaterial?c(y,h,w,S):h.isSpriteMaterial?l(y,h):h.isShadowMaterial?(y.color.value.copy(h.color),y.opacity.value=h.opacity):h.isShaderMaterial&&(h.uniformsNeedUpdate=!1)}function s(y,h){y.opacity.value=h.opacity,h.color&&y.diffuse.value.copy(h.color),h.emissive&&y.emissive.value.copy(h.emissive).multiplyScalar(h.emissiveIntensity),h.map&&(y.map.value=h.map,t(h.map,y.mapTransform)),h.alphaMap&&(y.alphaMap.value=h.alphaMap,t(h.alphaMap,y.alphaMapTransform)),h.bumpMap&&(y.bumpMap.value=h.bumpMap,t(h.bumpMap,y.bumpMapTransform),y.bumpScale.value=h.bumpScale,h.side===Xr&&(y.bumpScale.value*=-1)),h.normalMap&&(y.normalMap.value=h.normalMap,t(h.normalMap,y.normalMapTransform),y.normalScale.value.copy(h.normalScale),h.side===Xr&&y.normalScale.value.negate()),h.displacementMap&&(y.displacementMap.value=h.displacementMap,t(h.displacementMap,y.displacementMapTransform),y.displacementScale.value=h.displacementScale,y.displacementBias.value=h.displacementBias),h.emissiveMap&&(y.emissiveMap.value=h.emissiveMap,t(h.emissiveMap,y.emissiveMapTransform)),h.specularMap&&(y.specularMap.value=h.specularMap,t(h.specularMap,y.specularMapTransform)),h.alphaTest>0&&(y.alphaTest.value=h.alphaTest);const w=e.get(h),S=w.envMap,T=w.envMapRotation;S&&(y.envMap.value=S,ja.copy(T),ja.x*=-1,ja.y*=-1,ja.z*=-1,S.isCubeTexture&&S.isRenderTargetTexture===!1&&(ja.y*=-1,ja.z*=-1),y.envMapRotation.value.setFromMatrix4(hz.makeRotationFromEuler(ja)),y.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=h.reflectivity,y.ior.value=h.ior,y.refractionRatio.value=h.refractionRatio),h.lightMap&&(y.lightMap.value=h.lightMap,y.lightMapIntensity.value=h.lightMapIntensity,t(h.lightMap,y.lightMapTransform)),h.aoMap&&(y.aoMap.value=h.aoMap,y.aoMapIntensity.value=h.aoMapIntensity,t(h.aoMap,y.aoMapTransform))}function o(y,h){y.diffuse.value.copy(h.color),y.opacity.value=h.opacity,h.map&&(y.map.value=h.map,t(h.map,y.mapTransform))}function a(y,h){y.dashSize.value=h.dashSize,y.totalSize.value=h.dashSize+h.gapSize,y.scale.value=h.scale}function c(y,h,w,S){y.diffuse.value.copy(h.color),y.opacity.value=h.opacity,y.size.value=h.size*w,y.scale.value=S*.5,h.map&&(y.map.value=h.map,t(h.map,y.uvTransform)),h.alphaMap&&(y.alphaMap.value=h.alphaMap,t(h.alphaMap,y.alphaMapTransform)),h.alphaTest>0&&(y.alphaTest.value=h.alphaTest)}function l(y,h){y.diffuse.value.copy(h.color),y.opacity.value=h.opacity,y.rotation.value=h.rotation,h.map&&(y.map.value=h.map,t(h.map,y.mapTransform)),h.alphaMap&&(y.alphaMap.value=h.alphaMap,t(h.alphaMap,y.alphaMapTransform)),h.alphaTest>0&&(y.alphaTest.value=h.alphaTest)}function u(y,h){y.specular.value.copy(h.specular),y.shininess.value=Math.max(h.shininess,1e-4)}function f(y,h){h.gradientMap&&(y.gradientMap.value=h.gradientMap)}function d(y,h){y.metalness.value=h.metalness,h.metalnessMap&&(y.metalnessMap.value=h.metalnessMap,t(h.metalnessMap,y.metalnessMapTransform)),y.roughness.value=h.roughness,h.roughnessMap&&(y.roughnessMap.value=h.roughnessMap,t(h.roughnessMap,y.roughnessMapTransform)),h.envMap&&(y.envMapIntensity.value=h.envMapIntensity)}function p(y,h,w){y.ior.value=h.ior,h.sheen>0&&(y.sheenColor.value.copy(h.sheenColor).multiplyScalar(h.sheen),y.sheenRoughness.value=h.sheenRoughness,h.sheenColorMap&&(y.sheenColorMap.value=h.sheenColorMap,t(h.sheenColorMap,y.sheenColorMapTransform)),h.sheenRoughnessMap&&(y.sheenRoughnessMap.value=h.sheenRoughnessMap,t(h.sheenRoughnessMap,y.sheenRoughnessMapTransform))),h.clearcoat>0&&(y.clearcoat.value=h.clearcoat,y.clearcoatRoughness.value=h.clearcoatRoughness,h.clearcoatMap&&(y.clearcoatMap.value=h.clearcoatMap,t(h.clearcoatMap,y.clearcoatMapTransform)),h.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=h.clearcoatRoughnessMap,t(h.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),h.clearcoatNormalMap&&(y.clearcoatNormalMap.value=h.clearcoatNormalMap,t(h.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(h.clearcoatNormalScale),h.side===Xr&&y.clearcoatNormalScale.value.negate())),h.dispersion>0&&(y.dispersion.value=h.dispersion),h.iridescence>0&&(y.iridescence.value=h.iridescence,y.iridescenceIOR.value=h.iridescenceIOR,y.iridescenceThicknessMinimum.value=h.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=h.iridescenceThicknessRange[1],h.iridescenceMap&&(y.iridescenceMap.value=h.iridescenceMap,t(h.iridescenceMap,y.iridescenceMapTransform)),h.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=h.iridescenceThicknessMap,t(h.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),h.transmission>0&&(y.transmission.value=h.transmission,y.transmissionSamplerMap.value=w.texture,y.transmissionSamplerSize.value.set(w.width,w.height),h.transmissionMap&&(y.transmissionMap.value=h.transmissionMap,t(h.transmissionMap,y.transmissionMapTransform)),y.thickness.value=h.thickness,h.thicknessMap&&(y.thicknessMap.value=h.thicknessMap,t(h.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=h.attenuationDistance,y.attenuationColor.value.copy(h.attenuationColor)),h.anisotropy>0&&(y.anisotropyVector.value.set(h.anisotropy*Math.cos(h.anisotropyRotation),h.anisotropy*Math.sin(h.anisotropyRotation)),h.anisotropyMap&&(y.anisotropyMap.value=h.anisotropyMap,t(h.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=h.specularIntensity,y.specularColor.value.copy(h.specularColor),h.specularColorMap&&(y.specularColorMap.value=h.specularColorMap,t(h.specularColorMap,y.specularColorMapTransform)),h.specularIntensityMap&&(y.specularIntensityMap.value=h.specularIntensityMap,t(h.specularIntensityMap,y.specularIntensityMapTransform))}function v(y,h){h.matcap&&(y.matcap.value=h.matcap)}function m(y,h){const w=e.get(h).light;y.referencePosition.value.setFromMatrixPosition(w.matrixWorld),y.nearDistance.value=w.shadow.camera.near,y.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function mz(n,e,t,r){let i={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(w,S){const T=S.program;r.uniformBlockBinding(w,T)}function l(w,S){let T=i[w.id];T===void 0&&(v(w),T=u(w),i[w.id]=T,w.addEventListener("dispose",y));const C=S.program;r.updateUBOMapping(w,C);const B=e.render.frame;s[w.id]!==B&&(d(w),s[w.id]=B)}function u(w){const S=f();w.__bindingPointIndex=S;const T=n.createBuffer(),C=w.__size,B=w.usage;return n.bindBuffer(n.UNIFORM_BUFFER,T),n.bufferData(n.UNIFORM_BUFFER,C,B),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,T),T}function f(){for(let w=0;w<a;w++)if(o.indexOf(w)===-1)return o.push(w),w;return 0}function d(w){const S=i[w.id],T=w.uniforms,C=w.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let B=0,O=T.length;B<O;B++){const P=Array.isArray(T[B])?T[B]:[T[B]];for(let N=0,I=P.length;N<I;N++){const U=P[N];if(p(U,B,N,C)===!0){const q=U.__offset,M=Array.isArray(U.value)?U.value:[U.value];let g=0;for(let _=0;_<M.length;_++){const b=M[_],E=m(b);typeof b=="number"||typeof b=="boolean"?(U.__data[0]=b,n.bufferSubData(n.UNIFORM_BUFFER,q+g,U.__data)):b.isMatrix3?(U.__data[0]=b.elements[0],U.__data[1]=b.elements[1],U.__data[2]=b.elements[2],U.__data[3]=0,U.__data[4]=b.elements[3],U.__data[5]=b.elements[4],U.__data[6]=b.elements[5],U.__data[7]=0,U.__data[8]=b.elements[6],U.__data[9]=b.elements[7],U.__data[10]=b.elements[8],U.__data[11]=0):(b.toArray(U.__data,g),g+=E.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,q,U.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function p(w,S,T,C){const B=w.value,O=S+"_"+T;if(C[O]===void 0)return typeof B=="number"||typeof B=="boolean"?C[O]=B:C[O]=B.clone(),!0;{const P=C[O];if(typeof B=="number"||typeof B=="boolean"){if(P!==B)return C[O]=B,!0}else if(P.equals(B)===!1)return P.copy(B),!0}return!1}function v(w){const S=w.uniforms;let T=0;const C=16;for(let O=0,P=S.length;O<P;O++){const N=Array.isArray(S[O])?S[O]:[S[O]];for(let I=0,U=N.length;I<U;I++){const q=N[I],M=Array.isArray(q.value)?q.value:[q.value];for(let g=0,_=M.length;g<_;g++){const b=M[g],E=m(b),R=T%C,L=R%E.boundary,G=R+L;T+=L,G!==0&&C-G<E.storage&&(T+=C-G),q.__data=new Float32Array(E.storage/Float32Array.BYTES_PER_ELEMENT),q.__offset=T,T+=E.storage}}}const B=T%C;return B>0&&(T+=C-B),w.__size=T,w.__cache={},this}function m(w){const S={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(S.boundary=4,S.storage=4):w.isVector2?(S.boundary=8,S.storage=8):w.isVector3||w.isColor?(S.boundary=16,S.storage=12):w.isVector4?(S.boundary=16,S.storage=16):w.isMatrix3?(S.boundary=48,S.storage=48):w.isMatrix4?(S.boundary=64,S.storage=64):w.isTexture,S}function y(w){const S=w.target;S.removeEventListener("dispose",y);const T=o.indexOf(S.__bindingPointIndex);o.splice(T,1),n.deleteBuffer(i[S.id]),delete i[S.id],delete s[S.id]}function h(){for(const w in i)n.deleteBuffer(i[w]);o=[],i={},s={}}return{bind:c,update:l,dispose:h}}class gz{constructor(e={}){const{canvas:t=e5(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:d=!1}=e;this.isWebGLRenderer=!0;let p;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=r.getContextAttributes().alpha}else p=o;const v=new Uint32Array(4),m=new Int32Array(4);let y=null,h=null;const w=[],S=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Si,this.toneMapping=ya,this.toneMappingExposure=1;const T=this;let C=!1,B=0,O=0,P=null,N=-1,I=null;const U=new On,q=new On;let M=null;const g=new Wt(0);let _=0,b=t.width,E=t.height,R=1,L=null,G=null;const k=new On(0,0,b,E),x=new On(0,0,b,E);let F=!1;const K=new tM;let A=!1,X=!1;const V=new Un,$=new Un,ee=new oe,he=new On,pe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let de=!1;function Fe(){return P===null?R:1}let j=r;function Ue(H,J){return t.getContext(H,J)}try{const H={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${j_}`),t.addEventListener("webglcontextlost",fe,!1),t.addEventListener("webglcontextrestored",Be,!1),t.addEventListener("webglcontextcreationerror",_e,!1),j===null){const J="webgl2";if(j=Ue(J,H),j===null)throw Ue(J)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(H){throw H}let et,Ve,Ie,Pt,Se,W,D,te,ue,Z,ne,me,Re,we,Ke,xe,Te,ke,tt,Me,$e,ut,rt,Y;function Ne(){et=new S8(j),et.init(),ut=new az(j,et),Ve=new _8(j,et,e,ut),Ie=new sz(j,et),Ve.reverseDepthBuffer&&d&&Ie.buffers.depth.setReversed(!0),Pt=new R8(j),Se=new qH,W=new oz(j,et,Ie,Se,Ve,ut,Pt),D=new x8(T),te=new E8(T),ue=new k5(j),rt=new v8(j,ue),Z=new T8(j,ue,Pt,rt),ne=new C8(j,Z,ue,Pt),tt=new I8(j,Ve,W),xe=new b8(Se),me=new jH(T,D,te,et,Ve,rt,xe),Re=new pz(T,Se),we=new XH,Ke=new ez(et),ke=new g8(T,D,te,Ie,ne,p,c),Te=new rz(T,ne,Ve),Y=new mz(j,Pt,Ve,Ie),Me=new y8(j,et,Pt),$e=new M8(j,et,Pt),Pt.programs=me.programs,T.capabilities=Ve,T.extensions=et,T.properties=Se,T.renderLists=we,T.shadowMap=Te,T.state=Ie,T.info=Pt}Ne();const se=new dz(T,j);this.xr=se,this.getContext=function(){return j},this.getContextAttributes=function(){return j.getContextAttributes()},this.forceContextLoss=function(){const H=et.get("WEBGL_lose_context");H&&H.loseContext()},this.forceContextRestore=function(){const H=et.get("WEBGL_lose_context");H&&H.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(H){H!==void 0&&(R=H,this.setSize(b,E,!1))},this.getSize=function(H){return H.set(b,E)},this.setSize=function(H,J,ae=!0){se.isPresenting||(b=H,E=J,t.width=Math.floor(H*R),t.height=Math.floor(J*R),ae===!0&&(t.style.width=H+"px",t.style.height=J+"px"),this.setViewport(0,0,H,J))},this.getDrawingBufferSize=function(H){return H.set(b*R,E*R).floor()},this.setDrawingBufferSize=function(H,J,ae){b=H,E=J,R=ae,t.width=Math.floor(H*ae),t.height=Math.floor(J*ae),this.setViewport(0,0,H,J)},this.getCurrentViewport=function(H){return H.copy(U)},this.getViewport=function(H){return H.copy(k)},this.setViewport=function(H,J,ae,ce){H.isVector4?k.set(H.x,H.y,H.z,H.w):k.set(H,J,ae,ce),Ie.viewport(U.copy(k).multiplyScalar(R).round())},this.getScissor=function(H){return H.copy(x)},this.setScissor=function(H,J,ae,ce){H.isVector4?x.set(H.x,H.y,H.z,H.w):x.set(H,J,ae,ce),Ie.scissor(q.copy(x).multiplyScalar(R).round())},this.getScissorTest=function(){return F},this.setScissorTest=function(H){Ie.setScissorTest(F=H)},this.setOpaqueSort=function(H){L=H},this.setTransparentSort=function(H){G=H},this.getClearColor=function(H){return H.copy(ke.getClearColor())},this.setClearColor=function(){ke.setClearColor.apply(ke,arguments)},this.getClearAlpha=function(){return ke.getClearAlpha()},this.setClearAlpha=function(){ke.setClearAlpha.apply(ke,arguments)},this.clear=function(H=!0,J=!0,ae=!0){let ce=0;if(H){let re=!1;if(P!==null){const be=P.texture.format;re=be===Q_||be===Y_||be===K_}if(re){const be=P.texture.type,Le=be===Bo||be===xc||be===Kf||be===su||be===$_||be===X_,ze=ke.getClearColor(),je=ke.getClearAlpha(),ct=ze.r,ft=ze.g,Ze=ze.b;Le?(v[0]=ct,v[1]=ft,v[2]=Ze,v[3]=je,j.clearBufferuiv(j.COLOR,0,v)):(m[0]=ct,m[1]=ft,m[2]=Ze,m[3]=je,j.clearBufferiv(j.COLOR,0,m))}else ce|=j.COLOR_BUFFER_BIT}J&&(ce|=j.DEPTH_BUFFER_BIT),ae&&(ce|=j.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),j.clear(ce)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",fe,!1),t.removeEventListener("webglcontextrestored",Be,!1),t.removeEventListener("webglcontextcreationerror",_e,!1),ke.dispose(),we.dispose(),Ke.dispose(),Se.dispose(),D.dispose(),te.dispose(),ne.dispose(),rt.dispose(),Y.dispose(),me.dispose(),se.dispose(),se.removeEventListener("sessionstart",ln),se.removeEventListener("sessionend",cs),qt.stop()};function fe(H){H.preventDefault(),C=!0}function Be(){C=!1;const H=Pt.autoReset,J=Te.enabled,ae=Te.autoUpdate,ce=Te.needsUpdate,re=Te.type;Ne(),Pt.autoReset=H,Te.enabled=J,Te.autoUpdate=ae,Te.needsUpdate=ce,Te.type=re}function _e(H){}function We(H){const J=H.target;J.removeEventListener("dispose",We),tn(J)}function tn(H){bt(H),Se.remove(H)}function bt(H){const J=Se.get(H).programs;J!==void 0&&(J.forEach(function(ae){me.releaseProgram(ae)}),H.isShaderMaterial&&me.releaseShaderCache(H))}this.renderBufferDirect=function(H,J,ae,ce,re,be){J===null&&(J=pe);const Le=re.isMesh&&re.matrixWorld.determinant()<0,ze=pn(H,J,ae,ce,re);Ie.setMaterial(ce,Le);let je=ae.index,ct=1;if(ce.wireframe===!0){if(je=Z.getWireframeAttribute(ae),je===void 0)return;ct=2}const ft=ae.drawRange,Ze=ae.attributes.position;let Nt=ft.start*ct,zt=(ft.start+ft.count)*ct;be!==null&&(Nt=Math.max(Nt,be.start*ct),zt=Math.min(zt,(be.start+be.count)*ct)),je!==null?(Nt=Math.max(Nt,0),zt=Math.min(zt,je.count)):Ze!=null&&(Nt=Math.max(Nt,0),zt=Math.min(zt,Ze.count));const An=zt-Nt;if(An<0||An===1/0)return;rt.setup(re,ce,ze,ae,je);let vn,$t=Me;if(je!==null&&(vn=ue.get(je),$t=$e,$t.setIndex(vn)),re.isMesh)ce.wireframe===!0?(Ie.setLineWidth(ce.wireframeLinewidth*Fe()),$t.setMode(j.LINES)):$t.setMode(j.TRIANGLES);else if(re.isLine){let it=ce.linewidth;it===void 0&&(it=1),Ie.setLineWidth(it*Fe()),re.isLineSegments?$t.setMode(j.LINES):re.isLineLoop?$t.setMode(j.LINE_LOOP):$t.setMode(j.LINE_STRIP)}else re.isPoints?$t.setMode(j.POINTS):re.isSprite&&$t.setMode(j.TRIANGLES);if(re.isBatchedMesh)if(re._multiDrawInstances!==null)$t.renderMultiDrawInstances(re._multiDrawStarts,re._multiDrawCounts,re._multiDrawCount,re._multiDrawInstances);else if(et.get("WEBGL_multi_draw"))$t.renderMultiDraw(re._multiDrawStarts,re._multiDrawCounts,re._multiDrawCount);else{const it=re._multiDrawStarts,or=re._multiDrawCounts,sn=re._multiDrawCount,Ui=je?ue.get(je).bytesPerElement:1,$c=Se.get(ce).currentProgram.getUniforms();for(let Jr=0;Jr<sn;Jr++)$c.setValue(j,"_gl_DrawID",Jr),$t.render(it[Jr]/Ui,or[Jr])}else if(re.isInstancedMesh)$t.renderInstances(Nt,An,re.count);else if(ae.isInstancedBufferGeometry){const it=ae._maxInstanceCount!==void 0?ae._maxInstanceCount:1/0,or=Math.min(ae.instanceCount,it);$t.renderInstances(Nt,An,or)}else $t.render(Nt,An)};function Je(H,J,ae){H.transparent===!0&&H.side===_o&&H.forceSinglePass===!1?(H.side=Xr,H.needsUpdate=!0,rn(H,J,ae),H.side=Ea,H.needsUpdate=!0,rn(H,J,ae),H.side=_o):rn(H,J,ae)}this.compile=function(H,J,ae=null){ae===null&&(ae=H),h=Ke.get(ae),h.init(J),S.push(h),ae.traverseVisible(function(re){re.isLight&&re.layers.test(J.layers)&&(h.pushLight(re),re.castShadow&&h.pushShadow(re))}),H!==ae&&H.traverseVisible(function(re){re.isLight&&re.layers.test(J.layers)&&(h.pushLight(re),re.castShadow&&h.pushShadow(re))}),h.setupLights();const ce=new Set;return H.traverse(function(re){if(!(re.isMesh||re.isPoints||re.isLine||re.isSprite))return;const be=re.material;if(be)if(Array.isArray(be))for(let Le=0;Le<be.length;Le++){const ze=be[Le];Je(ze,ae,re),ce.add(ze)}else Je(be,ae,re),ce.add(be)}),S.pop(),h=null,ce},this.compileAsync=function(H,J,ae=null){const ce=this.compile(H,J,ae);return new Promise(re=>{function be(){if(ce.forEach(function(Le){Se.get(Le).currentProgram.isReady()&&ce.delete(Le)}),ce.size===0){re(H);return}setTimeout(be,10)}et.get("KHR_parallel_shader_compile")!==null?be():setTimeout(be,10)})};let Vn=null;function Ot(H){Vn&&Vn(H)}function ln(){qt.stop()}function cs(){qt.start()}const qt=new rM;qt.setAnimationLoop(Ot),typeof self<"u"&&qt.setContext(self),this.setAnimationLoop=function(H){Vn=H,se.setAnimationLoop(H),H===null?qt.stop():qt.start()},se.addEventListener("sessionstart",ln),se.addEventListener("sessionend",cs),this.render=function(H,J){if(J!==void 0&&J.isCamera!==!0||C===!0)return;if(H.matrixWorldAutoUpdate===!0&&H.updateMatrixWorld(),J.parent===null&&J.matrixWorldAutoUpdate===!0&&J.updateMatrixWorld(),se.enabled===!0&&se.isPresenting===!0&&(se.cameraAutoUpdate===!0&&se.updateCamera(J),J=se.getCamera()),H.isScene===!0&&H.onBeforeRender(T,H,J,P),h=Ke.get(H,S.length),h.init(J),S.push(h),$.multiplyMatrices(J.projectionMatrix,J.matrixWorldInverse),K.setFromProjectionMatrix($),X=this.localClippingEnabled,A=xe.init(this.clippingPlanes,X),y=we.get(H,w.length),y.init(),w.push(y),se.enabled===!0&&se.isPresenting===!0){const be=T.xr.getDepthSensingMesh();be!==null&&cn(be,J,-1/0,T.sortObjects)}cn(H,J,0,T.sortObjects),y.finish(),T.sortObjects===!0&&y.sort(L,G),de=se.enabled===!1||se.isPresenting===!1||se.hasDepthSensing()===!1,de&&ke.addToRenderList(y,H),this.info.render.frame++,A===!0&&xe.beginShadows();const ae=h.state.shadowsArray;Te.render(ae,H,J),A===!0&&xe.endShadows(),this.info.autoReset===!0&&this.info.reset();const ce=y.opaque,re=y.transmissive;if(h.setupLights(),J.isArrayCamera){const be=J.cameras;if(re.length>0)for(let Le=0,ze=be.length;Le<ze;Le++){const je=be[Le];un(ce,re,H,je)}de&&ke.render(H);for(let Le=0,ze=be.length;Le<ze;Le++){const je=be[Le];ls(y,H,je,je.viewport)}}else re.length>0&&un(ce,re,H,J),de&&ke.render(H),ls(y,H,J);P!==null&&(W.updateMultisampleRenderTarget(P),W.updateRenderTargetMipmap(P)),H.isScene===!0&&H.onAfterRender(T,H,J),rt.resetDefaultState(),N=-1,I=null,S.pop(),S.length>0?(h=S[S.length-1],A===!0&&xe.setGlobalState(T.clippingPlanes,h.state.camera)):h=null,w.pop(),w.length>0?y=w[w.length-1]:y=null};function cn(H,J,ae,ce){if(H.visible===!1)return;if(H.layers.test(J.layers)){if(H.isGroup)ae=H.renderOrder;else if(H.isLOD)H.autoUpdate===!0&&H.update(J);else if(H.isLight)h.pushLight(H),H.castShadow&&h.pushShadow(H);else if(H.isSprite){if(!H.frustumCulled||K.intersectsSprite(H)){ce&&he.setFromMatrixPosition(H.matrixWorld).applyMatrix4($);const Le=ne.update(H),ze=H.material;ze.visible&&y.push(H,Le,ze,ae,he.z,null)}}else if((H.isMesh||H.isLine||H.isPoints)&&(!H.frustumCulled||K.intersectsObject(H))){const Le=ne.update(H),ze=H.material;if(ce&&(H.boundingSphere!==void 0?(H.boundingSphere===null&&H.computeBoundingSphere(),he.copy(H.boundingSphere.center)):(Le.boundingSphere===null&&Le.computeBoundingSphere(),he.copy(Le.boundingSphere.center)),he.applyMatrix4(H.matrixWorld).applyMatrix4($)),Array.isArray(ze)){const je=Le.groups;for(let ct=0,ft=je.length;ct<ft;ct++){const Ze=je[ct],Nt=ze[Ze.materialIndex];Nt&&Nt.visible&&y.push(H,Le,Nt,ae,he.z,Ze)}}else ze.visible&&y.push(H,Le,ze,ae,he.z,null)}}const be=H.children;for(let Le=0,ze=be.length;Le<ze;Le++)cn(be[Le],J,ae,ce)}function ls(H,J,ae,ce){const re=H.opaque,be=H.transmissive,Le=H.transparent;h.setupLightsView(ae),A===!0&&xe.setGlobalState(T.clippingPlanes,ae),ce&&Ie.viewport(U.copy(ce)),re.length>0&&nn(re,J,ae),be.length>0&&nn(be,J,ae),Le.length>0&&nn(Le,J,ae),Ie.buffers.depth.setTest(!0),Ie.buffers.depth.setMask(!0),Ie.buffers.color.setMask(!0),Ie.setPolygonOffset(!1)}function un(H,J,ae,ce){if((ae.isScene===!0?ae.overrideMaterial:null)!==null)return;h.state.transmissionRenderTarget[ce.id]===void 0&&(h.state.transmissionRenderTarget[ce.id]=new wc(1,1,{generateMipmaps:!0,type:et.has("EXT_color_buffer_half_float")||et.has("EXT_color_buffer_float")?kd:Bo,minFilter:rc,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Kt.workingColorSpace}));const be=h.state.transmissionRenderTarget[ce.id],Le=ce.viewport||U;be.setSize(Le.z,Le.w);const ze=T.getRenderTarget();T.setRenderTarget(be),T.getClearColor(g),_=T.getClearAlpha(),_<1&&T.setClearColor(16777215,.5),T.clear(),de&&ke.render(ae);const je=T.toneMapping;T.toneMapping=ya;const ct=ce.viewport;if(ce.viewport!==void 0&&(ce.viewport=void 0),h.setupLightsView(ce),A===!0&&xe.setGlobalState(T.clippingPlanes,ce),nn(H,ae,ce),W.updateMultisampleRenderTarget(be),W.updateRenderTargetMipmap(be),et.has("WEBGL_multisampled_render_to_texture")===!1){let ft=!1;for(let Ze=0,Nt=J.length;Ze<Nt;Ze++){const zt=J[Ze],An=zt.object,vn=zt.geometry,$t=zt.material,it=zt.group;if($t.side===_o&&An.layers.test(ce.layers)){const or=$t.side;$t.side=Xr,$t.needsUpdate=!0,us(An,ae,ce,vn,$t,it),$t.side=or,$t.needsUpdate=!0,ft=!0}}ft===!0&&(W.updateMultisampleRenderTarget(be),W.updateRenderTargetMipmap(be))}T.setRenderTarget(ze),T.setClearColor(g,_),ct!==void 0&&(ce.viewport=ct),T.toneMapping=je}function nn(H,J,ae){const ce=J.isScene===!0?J.overrideMaterial:null;for(let re=0,be=H.length;re<be;re++){const Le=H[re],ze=Le.object,je=Le.geometry,ct=ce===null?Le.material:ce,ft=Le.group;ze.layers.test(ae.layers)&&us(ze,J,ae,je,ct,ft)}}function us(H,J,ae,ce,re,be){H.onBeforeRender(T,J,ae,ce,re,be),H.modelViewMatrix.multiplyMatrices(ae.matrixWorldInverse,H.matrixWorld),H.normalMatrix.getNormalMatrix(H.modelViewMatrix),re.onBeforeRender(T,J,ae,ce,H,be),re.transparent===!0&&re.side===_o&&re.forceSinglePass===!1?(re.side=Xr,re.needsUpdate=!0,T.renderBufferDirect(ae,J,ce,re,H,be),re.side=Ea,re.needsUpdate=!0,T.renderBufferDirect(ae,J,ce,re,H,be),re.side=_o):T.renderBufferDirect(ae,J,ce,re,H,be),H.onAfterRender(T,J,ae,ce,re,be)}function rn(H,J,ae){J.isScene!==!0&&(J=pe);const ce=Se.get(H),re=h.state.lights,be=h.state.shadowsArray,Le=re.state.version,ze=me.getParameters(H,re.state,be,J,ae),je=me.getProgramCacheKey(ze);let ct=ce.programs;ce.environment=H.isMeshStandardMaterial?J.environment:null,ce.fog=J.fog,ce.envMap=(H.isMeshStandardMaterial?te:D).get(H.envMap||ce.environment),ce.envMapRotation=ce.environment!==null&&H.envMap===null?J.environmentRotation:H.envMapRotation,ct===void 0&&(H.addEventListener("dispose",We),ct=new Map,ce.programs=ct);let ft=ct.get(je);if(ft!==void 0){if(ce.currentProgram===ft&&ce.lightsStateVersion===Le)return fs(H,ze),ft}else ze.uniforms=me.getUniforms(H),H.onBeforeCompile(ze,T),ft=me.acquireProgram(ze,je),ct.set(je,ft),ce.uniforms=ze.uniforms;const Ze=ce.uniforms;return(!H.isShaderMaterial&&!H.isRawShaderMaterial||H.clipping===!0)&&(Ze.clippingPlanes=xe.uniform),fs(H,ze),ce.needsLights=ds(H),ce.lightsStateVersion=Le,ce.needsLights&&(Ze.ambientLightColor.value=re.state.ambient,Ze.lightProbe.value=re.state.probe,Ze.directionalLights.value=re.state.directional,Ze.directionalLightShadows.value=re.state.directionalShadow,Ze.spotLights.value=re.state.spot,Ze.spotLightShadows.value=re.state.spotShadow,Ze.rectAreaLights.value=re.state.rectArea,Ze.ltc_1.value=re.state.rectAreaLTC1,Ze.ltc_2.value=re.state.rectAreaLTC2,Ze.pointLights.value=re.state.point,Ze.pointLightShadows.value=re.state.pointShadow,Ze.hemisphereLights.value=re.state.hemi,Ze.directionalShadowMap.value=re.state.directionalShadowMap,Ze.directionalShadowMatrix.value=re.state.directionalShadowMatrix,Ze.spotShadowMap.value=re.state.spotShadowMap,Ze.spotLightMatrix.value=re.state.spotLightMatrix,Ze.spotLightMap.value=re.state.spotLightMap,Ze.pointShadowMap.value=re.state.pointShadowMap,Ze.pointShadowMatrix.value=re.state.pointShadowMatrix),ce.currentProgram=ft,ce.uniformsList=null,ft}function fn(H){if(H.uniformsList===null){const J=H.currentProgram.getUniforms();H.uniformsList=Yh.seqWithValue(J.seq,H.uniforms)}return H.uniformsList}function fs(H,J){const ae=Se.get(H);ae.outputColorSpace=J.outputColorSpace,ae.batching=J.batching,ae.batchingColor=J.batchingColor,ae.instancing=J.instancing,ae.instancingColor=J.instancingColor,ae.instancingMorph=J.instancingMorph,ae.skinning=J.skinning,ae.morphTargets=J.morphTargets,ae.morphNormals=J.morphNormals,ae.morphColors=J.morphColors,ae.morphTargetsCount=J.morphTargetsCount,ae.numClippingPlanes=J.numClippingPlanes,ae.numIntersection=J.numClipIntersection,ae.vertexAlphas=J.vertexAlphas,ae.vertexTangents=J.vertexTangents,ae.toneMapping=J.toneMapping}function pn(H,J,ae,ce,re){J.isScene!==!0&&(J=pe),W.resetTextureUnits();const be=J.fog,Le=ce.isMeshStandardMaterial?J.environment:null,ze=P===null?T.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:au,je=(ce.isMeshStandardMaterial?te:D).get(ce.envMap||Le),ct=ce.vertexColors===!0&&!!ae.attributes.color&&ae.attributes.color.itemSize===4,ft=!!ae.attributes.tangent&&(!!ce.normalMap||ce.anisotropy>0),Ze=!!ae.morphAttributes.position,Nt=!!ae.morphAttributes.normal,zt=!!ae.morphAttributes.color;let An=ya;ce.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(An=T.toneMapping);const vn=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,$t=vn!==void 0?vn.length:0,it=Se.get(ce),or=h.state.lights;if(A===!0&&(X===!0||H!==I)){const wr=H===I&&ce.id===N;xe.setState(ce,H,wr)}let sn=!1;ce.version===it.__version?(it.needsLights&&it.lightsStateVersion!==or.state.version||it.outputColorSpace!==ze||re.isBatchedMesh&&it.batching===!1||!re.isBatchedMesh&&it.batching===!0||re.isBatchedMesh&&it.batchingColor===!0&&re.colorTexture===null||re.isBatchedMesh&&it.batchingColor===!1&&re.colorTexture!==null||re.isInstancedMesh&&it.instancing===!1||!re.isInstancedMesh&&it.instancing===!0||re.isSkinnedMesh&&it.skinning===!1||!re.isSkinnedMesh&&it.skinning===!0||re.isInstancedMesh&&it.instancingColor===!0&&re.instanceColor===null||re.isInstancedMesh&&it.instancingColor===!1&&re.instanceColor!==null||re.isInstancedMesh&&it.instancingMorph===!0&&re.morphTexture===null||re.isInstancedMesh&&it.instancingMorph===!1&&re.morphTexture!==null||it.envMap!==je||ce.fog===!0&&it.fog!==be||it.numClippingPlanes!==void 0&&(it.numClippingPlanes!==xe.numPlanes||it.numIntersection!==xe.numIntersection)||it.vertexAlphas!==ct||it.vertexTangents!==ft||it.morphTargets!==Ze||it.morphNormals!==Nt||it.morphColors!==zt||it.toneMapping!==An||it.morphTargetsCount!==$t)&&(sn=!0):(sn=!0,it.__version=ce.version);let Ui=it.currentProgram;sn===!0&&(Ui=rn(ce,J,re));let $c=!1,Jr=!1,tf=!1;const En=Ui.getUniforms(),vi=it.uniforms;if(Ie.useProgram(Ui.program)&&($c=!0,Jr=!0,tf=!0),ce.id!==N&&(N=ce.id,Jr=!0),$c||I!==H){Ie.buffers.depth.getReversed()?(V.copy(H.projectionMatrix),n5(V),r5(V),En.setValue(j,"projectionMatrix",V)):En.setValue(j,"projectionMatrix",H.projectionMatrix),En.setValue(j,"viewMatrix",H.matrixWorldInverse);const Dr=En.map.cameraPosition;Dr!==void 0&&Dr.setValue(j,ee.setFromMatrixPosition(H.matrixWorld)),Ve.logarithmicDepthBuffer&&En.setValue(j,"logDepthBufFC",2/(Math.log(H.far+1)/Math.LN2)),(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial)&&En.setValue(j,"isOrthographic",H.isOrthographicCamera===!0),I!==H&&(I=H,Jr=!0,tf=!0)}if(re.isSkinnedMesh){En.setOptional(j,re,"bindMatrix"),En.setOptional(j,re,"bindMatrixInverse");const wr=re.skeleton;wr&&(wr.boneTexture===null&&wr.computeBoneTexture(),En.setValue(j,"boneTexture",wr.boneTexture,W))}re.isBatchedMesh&&(En.setOptional(j,re,"batchingTexture"),En.setValue(j,"batchingTexture",re._matricesTexture,W),En.setOptional(j,re,"batchingIdTexture"),En.setValue(j,"batchingIdTexture",re._indirectTexture,W),En.setOptional(j,re,"batchingColorTexture"),re._colorsTexture!==null&&En.setValue(j,"batchingColorTexture",re._colorsTexture,W));const yi=ae.morphAttributes;if((yi.position!==void 0||yi.normal!==void 0||yi.color!==void 0)&&tt.update(re,ae,Ui),(Jr||it.receiveShadow!==re.receiveShadow)&&(it.receiveShadow=re.receiveShadow,En.setValue(j,"receiveShadow",re.receiveShadow)),ce.isMeshGouraudMaterial&&ce.envMap!==null&&(vi.envMap.value=je,vi.flipEnvMap.value=je.isCubeTexture&&je.isRenderTargetTexture===!1?-1:1),ce.isMeshStandardMaterial&&ce.envMap===null&&J.environment!==null&&(vi.envMapIntensity.value=J.environmentIntensity),Jr&&(En.setValue(j,"toneMappingExposure",T.toneMappingExposure),it.needsLights&&mn(vi,tf),be&&ce.fog===!0&&Re.refreshFogUniforms(vi,be),Re.refreshMaterialUniforms(vi,ce,R,E,h.state.transmissionRenderTarget[H.id]),Yh.upload(j,fn(it),vi,W)),ce.isShaderMaterial&&ce.uniformsNeedUpdate===!0&&(Yh.upload(j,fn(it),vi,W),ce.uniformsNeedUpdate=!1),ce.isSpriteMaterial&&En.setValue(j,"center",re.center),En.setValue(j,"modelViewMatrix",re.modelViewMatrix),En.setValue(j,"normalMatrix",re.normalMatrix),En.setValue(j,"modelMatrix",re.matrixWorld),ce.isShaderMaterial||ce.isRawShaderMaterial){const wr=ce.uniformsGroups;for(let Dr=0,D0=wr.length;Dr<D0;Dr++){const Fa=wr[Dr];Y.update(Fa,Ui),Y.bind(Fa,Ui)}}return Ui}function mn(H,J){H.ambientLightColor.needsUpdate=J,H.lightProbe.needsUpdate=J,H.directionalLights.needsUpdate=J,H.directionalLightShadows.needsUpdate=J,H.pointLights.needsUpdate=J,H.pointLightShadows.needsUpdate=J,H.spotLights.needsUpdate=J,H.spotLightShadows.needsUpdate=J,H.rectAreaLights.needsUpdate=J,H.hemisphereLights.needsUpdate=J}function ds(H){return H.isMeshLambertMaterial||H.isMeshToonMaterial||H.isMeshPhongMaterial||H.isMeshStandardMaterial||H.isShadowMaterial||H.isShaderMaterial&&H.lights===!0}this.getActiveCubeFace=function(){return B},this.getActiveMipmapLevel=function(){return O},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(H,J,ae){Se.get(H.texture).__webglTexture=J,Se.get(H.depthTexture).__webglTexture=ae;const ce=Se.get(H);ce.__hasExternalTextures=!0,ce.__autoAllocateDepthBuffer=ae===void 0,ce.__autoAllocateDepthBuffer||et.has("WEBGL_multisampled_render_to_texture")===!0&&(ce.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(H,J){const ae=Se.get(H);ae.__webglFramebuffer=J,ae.__useDefaultFramebuffer=J===void 0},this.setRenderTarget=function(H,J=0,ae=0){P=H,B=J,O=ae;let ce=!0,re=null,be=!1,Le=!1;if(H){const je=Se.get(H);if(je.__useDefaultFramebuffer!==void 0)Ie.bindFramebuffer(j.FRAMEBUFFER,null),ce=!1;else if(je.__webglFramebuffer===void 0)W.setupRenderTarget(H);else if(je.__hasExternalTextures)W.rebindTextures(H,Se.get(H.texture).__webglTexture,Se.get(H.depthTexture).__webglTexture);else if(H.depthBuffer){const Ze=H.depthTexture;if(je.__boundDepthTexture!==Ze){if(Ze!==null&&Se.has(Ze)&&(H.width!==Ze.image.width||H.height!==Ze.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");W.setupDepthRenderbuffer(H)}}const ct=H.texture;(ct.isData3DTexture||ct.isDataArrayTexture||ct.isCompressedArrayTexture)&&(Le=!0);const ft=Se.get(H).__webglFramebuffer;H.isWebGLCubeRenderTarget?(Array.isArray(ft[J])?re=ft[J][ae]:re=ft[J],be=!0):H.samples>0&&W.useMultisampledRTT(H)===!1?re=Se.get(H).__webglMultisampledFramebuffer:Array.isArray(ft)?re=ft[ae]:re=ft,U.copy(H.viewport),q.copy(H.scissor),M=H.scissorTest}else U.copy(k).multiplyScalar(R).floor(),q.copy(x).multiplyScalar(R).floor(),M=F;if(Ie.bindFramebuffer(j.FRAMEBUFFER,re)&&ce&&Ie.drawBuffers(H,re),Ie.viewport(U),Ie.scissor(q),Ie.setScissorTest(M),be){const je=Se.get(H.texture);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_CUBE_MAP_POSITIVE_X+J,je.__webglTexture,ae)}else if(Le){const je=Se.get(H.texture),ct=J||0;j.framebufferTextureLayer(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,je.__webglTexture,ae||0,ct)}N=-1},this.readRenderTargetPixels=function(H,J,ae,ce,re,be,Le){if(!(H&&H.isWebGLRenderTarget))return;let ze=Se.get(H).__webglFramebuffer;if(H.isWebGLCubeRenderTarget&&Le!==void 0&&(ze=ze[Le]),ze){Ie.bindFramebuffer(j.FRAMEBUFFER,ze);try{const je=H.texture,ct=je.format,ft=je.type;if(!Ve.textureFormatReadable(ct)||!Ve.textureTypeReadable(ft))return;J>=0&&J<=H.width-ce&&ae>=0&&ae<=H.height-re&&j.readPixels(J,ae,ce,re,ut.convert(ct),ut.convert(ft),be)}finally{const je=P!==null?Se.get(P).__webglFramebuffer:null;Ie.bindFramebuffer(j.FRAMEBUFFER,je)}}},this.readRenderTargetPixelsAsync=async function(H,J,ae,ce,re,be,Le){if(!(H&&H.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ze=Se.get(H).__webglFramebuffer;if(H.isWebGLCubeRenderTarget&&Le!==void 0&&(ze=ze[Le]),ze){const je=H.texture,ct=je.format,ft=je.type;if(!Ve.textureFormatReadable(ct))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ve.textureTypeReadable(ft))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(J>=0&&J<=H.width-ce&&ae>=0&&ae<=H.height-re){Ie.bindFramebuffer(j.FRAMEBUFFER,ze);const Ze=j.createBuffer();j.bindBuffer(j.PIXEL_PACK_BUFFER,Ze),j.bufferData(j.PIXEL_PACK_BUFFER,be.byteLength,j.STREAM_READ),j.readPixels(J,ae,ce,re,ut.convert(ct),ut.convert(ft),0);const Nt=P!==null?Se.get(P).__webglFramebuffer:null;Ie.bindFramebuffer(j.FRAMEBUFFER,Nt);const zt=j.fenceSync(j.SYNC_GPU_COMMANDS_COMPLETE,0);return j.flush(),await t5(j,zt,4),j.bindBuffer(j.PIXEL_PACK_BUFFER,Ze),j.getBufferSubData(j.PIXEL_PACK_BUFFER,0,be),j.deleteBuffer(Ze),j.deleteSync(zt),be}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(H,J=null,ae=0){H.isTexture!==!0&&(bl("WebGLRenderer: copyFramebufferToTexture function signature has changed."),J=arguments[0]||null,H=arguments[1]);const ce=Math.pow(2,-ae),re=Math.floor(H.image.width*ce),be=Math.floor(H.image.height*ce),Le=J!==null?J.x:0,ze=J!==null?J.y:0;W.setTexture2D(H,0),j.copyTexSubImage2D(j.TEXTURE_2D,ae,0,0,Le,ze,re,be),Ie.unbindTexture()};const hs=j.createFramebuffer(),ps=j.createFramebuffer();this.copyTextureToTexture=function(H,J,ae=null,ce=null,re=0,be=null){H.isTexture!==!0&&(bl("WebGLRenderer: copyTextureToTexture function signature has changed."),ce=arguments[0]||null,H=arguments[1],J=arguments[2],be=arguments[3]||0,ae=null),be===null&&(re!==0?(bl("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),be=re,re=0):be=0);let Le,ze,je,ct,ft,Ze,Nt,zt,An;const vn=H.isCompressedTexture?H.mipmaps[be]:H.image;if(ae!==null)Le=ae.max.x-ae.min.x,ze=ae.max.y-ae.min.y,je=ae.isBox3?ae.max.z-ae.min.z:1,ct=ae.min.x,ft=ae.min.y,Ze=ae.isBox3?ae.min.z:0;else{const yi=Math.pow(2,-re);Le=Math.floor(vn.width*yi),ze=Math.floor(vn.height*yi),H.isDataArrayTexture?je=vn.depth:H.isData3DTexture?je=Math.floor(vn.depth*yi):je=1,ct=0,ft=0,Ze=0}ce!==null?(Nt=ce.x,zt=ce.y,An=ce.z):(Nt=0,zt=0,An=0);const $t=ut.convert(J.format),it=ut.convert(J.type);let or;J.isData3DTexture?(W.setTexture3D(J,0),or=j.TEXTURE_3D):J.isDataArrayTexture||J.isCompressedArrayTexture?(W.setTexture2DArray(J,0),or=j.TEXTURE_2D_ARRAY):(W.setTexture2D(J,0),or=j.TEXTURE_2D),j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,J.flipY),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),j.pixelStorei(j.UNPACK_ALIGNMENT,J.unpackAlignment);const sn=j.getParameter(j.UNPACK_ROW_LENGTH),Ui=j.getParameter(j.UNPACK_IMAGE_HEIGHT),$c=j.getParameter(j.UNPACK_SKIP_PIXELS),Jr=j.getParameter(j.UNPACK_SKIP_ROWS),tf=j.getParameter(j.UNPACK_SKIP_IMAGES);j.pixelStorei(j.UNPACK_ROW_LENGTH,vn.width),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,vn.height),j.pixelStorei(j.UNPACK_SKIP_PIXELS,ct),j.pixelStorei(j.UNPACK_SKIP_ROWS,ft),j.pixelStorei(j.UNPACK_SKIP_IMAGES,Ze);const En=H.isDataArrayTexture||H.isData3DTexture,vi=J.isDataArrayTexture||J.isData3DTexture;if(H.isDepthTexture){const yi=Se.get(H),wr=Se.get(J),Dr=Se.get(yi.__renderTarget),D0=Se.get(wr.__renderTarget);Ie.bindFramebuffer(j.READ_FRAMEBUFFER,Dr.__webglFramebuffer),Ie.bindFramebuffer(j.DRAW_FRAMEBUFFER,D0.__webglFramebuffer);for(let Fa=0;Fa<je;Fa++)En&&(j.framebufferTextureLayer(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,Se.get(H).__webglTexture,re,Ze+Fa),j.framebufferTextureLayer(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,Se.get(J).__webglTexture,be,An+Fa)),j.blitFramebuffer(ct,ft,Le,ze,Nt,zt,Le,ze,j.DEPTH_BUFFER_BIT,j.NEAREST);Ie.bindFramebuffer(j.READ_FRAMEBUFFER,null),Ie.bindFramebuffer(j.DRAW_FRAMEBUFFER,null)}else if(re!==0||H.isRenderTargetTexture||Se.has(H)){const yi=Se.get(H),wr=Se.get(J);Ie.bindFramebuffer(j.READ_FRAMEBUFFER,hs),Ie.bindFramebuffer(j.DRAW_FRAMEBUFFER,ps);for(let Dr=0;Dr<je;Dr++)En?j.framebufferTextureLayer(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,yi.__webglTexture,re,Ze+Dr):j.framebufferTexture2D(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,yi.__webglTexture,re),vi?j.framebufferTextureLayer(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,wr.__webglTexture,be,An+Dr):j.framebufferTexture2D(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,wr.__webglTexture,be),re!==0?j.blitFramebuffer(ct,ft,Le,ze,Nt,zt,Le,ze,j.COLOR_BUFFER_BIT,j.NEAREST):vi?j.copyTexSubImage3D(or,be,Nt,zt,An+Dr,ct,ft,Le,ze):j.copyTexSubImage2D(or,be,Nt,zt,ct,ft,Le,ze);Ie.bindFramebuffer(j.READ_FRAMEBUFFER,null),Ie.bindFramebuffer(j.DRAW_FRAMEBUFFER,null)}else vi?H.isDataTexture||H.isData3DTexture?j.texSubImage3D(or,be,Nt,zt,An,Le,ze,je,$t,it,vn.data):J.isCompressedArrayTexture?j.compressedTexSubImage3D(or,be,Nt,zt,An,Le,ze,je,$t,vn.data):j.texSubImage3D(or,be,Nt,zt,An,Le,ze,je,$t,it,vn):H.isDataTexture?j.texSubImage2D(j.TEXTURE_2D,be,Nt,zt,Le,ze,$t,it,vn.data):H.isCompressedTexture?j.compressedTexSubImage2D(j.TEXTURE_2D,be,Nt,zt,vn.width,vn.height,$t,vn.data):j.texSubImage2D(j.TEXTURE_2D,be,Nt,zt,Le,ze,$t,it,vn);j.pixelStorei(j.UNPACK_ROW_LENGTH,sn),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,Ui),j.pixelStorei(j.UNPACK_SKIP_PIXELS,$c),j.pixelStorei(j.UNPACK_SKIP_ROWS,Jr),j.pixelStorei(j.UNPACK_SKIP_IMAGES,tf),be===0&&J.generateMipmaps&&j.generateMipmap(or),Ie.unbindTexture()},this.copyTextureToTexture3D=function(H,J,ae=null,ce=null,re=0){return H.isTexture!==!0&&(bl("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ae=arguments[0]||null,ce=arguments[1]||null,H=arguments[2],J=arguments[3],re=arguments[4]||0),bl('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(H,J,ae,ce,re)},this.initRenderTarget=function(H){Se.get(H).__webglFramebuffer===void 0&&W.setupRenderTarget(H)},this.initTexture=function(H){H.isCubeTexture?W.setTextureCube(H,0):H.isData3DTexture?W.setTexture3D(H,0):H.isDataArrayTexture||H.isCompressedArrayTexture?W.setTexture2DArray(H,0):W.setTexture2D(H,0),Ie.unbindTexture()},this.resetState=function(){B=0,O=0,P=null,Ie.reset(),rt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return So}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Kt._getDrawingBufferColorSpace(e),t.unpackColorSpace=Kt._getUnpackColorSpace()}}const kA={type:"change"},rb={type:"start"},cM={type:"end"},Ph=new J_,DA=new la,vz=Math.cos(70*JF.DEG2RAD),Wn=new oe,Or=2*Math.PI,hn={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},yg=1e-6;class yz extends B5{constructor(e,t=null){super(e,t),this.state=hn.NONE,this.enabled=!0,this.target=new oe,this.cursor=new oe,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Dl.ROTATE,MIDDLE:Dl.DOLLY,RIGHT:Dl.PAN},this.touches={ONE:Ml.ROTATE,TWO:Ml.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new oe,this._lastQuaternion=new Ac,this._lastTargetPosition=new oe,this._quat=new Ac().setFromUnitVectors(e.up,new oe(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new lA,this._sphericalDelta=new lA,this._scale=1,this._panOffset=new oe,this._rotateStart=new Rt,this._rotateEnd=new Rt,this._rotateDelta=new Rt,this._panStart=new Rt,this._panEnd=new Rt,this._panDelta=new Rt,this._dollyStart=new Rt,this._dollyEnd=new Rt,this._dollyDelta=new Rt,this._dollyDirection=new oe,this._mouse=new Rt,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=bz.bind(this),this._onPointerDown=_z.bind(this),this._onPointerUp=xz.bind(this),this._onContextMenu=Rz.bind(this),this._onMouseWheel=Ez.bind(this),this._onKeyDown=Sz.bind(this),this._onTouchStart=Tz.bind(this),this._onTouchMove=Mz.bind(this),this._onMouseDown=wz.bind(this),this._onMouseMove=Az.bind(this),this._interceptControlDown=Iz.bind(this),this._interceptControlUp=Cz.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(kA),this.update(),this.state=hn.NONE}update(e=null){const t=this.object.position;Wn.copy(t).sub(this.target),Wn.applyQuaternion(this._quat),this._spherical.setFromVector3(Wn),this.autoRotate&&this.state===hn.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let r=this.minAzimuthAngle,i=this.maxAzimuthAngle;isFinite(r)&&isFinite(i)&&(r<-Math.PI?r+=Or:r>Math.PI&&(r-=Or),i<-Math.PI?i+=Or:i>Math.PI&&(i-=Or),r<=i?this._spherical.theta=Math.max(r,Math.min(i,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(r+i)/2?Math.max(r,this._spherical.theta):Math.min(i,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const o=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=o!=this._spherical.radius}if(Wn.setFromSpherical(this._spherical),Wn.applyQuaternion(this._quatInverse),t.copy(this.target).add(Wn),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let o=null;if(this.object.isPerspectiveCamera){const a=Wn.length();o=this._clampDistance(a*this._scale);const c=a-o;this.object.position.addScaledVector(this._dollyDirection,c),this.object.updateMatrixWorld(),s=!!c}else if(this.object.isOrthographicCamera){const a=new oe(this._mouse.x,this._mouse.y,0);a.unproject(this.object);const c=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=c!==this.object.zoom;const l=new oe(this._mouse.x,this._mouse.y,0);l.unproject(this.object),this.object.position.sub(l).add(a),this.object.updateMatrixWorld(),o=Wn.length()}else this.zoomToCursor=!1;o!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(o).add(this.object.position):(Ph.origin.copy(this.object.position),Ph.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Ph.direction))<vz?this.object.lookAt(this.target):(DA.setFromNormalAndCoplanarPoint(this.object.up,this.target),Ph.intersectPlane(DA,this.target))))}else if(this.object.isOrthographicCamera){const o=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),o!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)>yg||8*(1-this._lastQuaternion.dot(this.object.quaternion))>yg||this._lastTargetPosition.distanceToSquared(this.target)>yg?(this.dispatchEvent(kA),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Or/60*this.autoRotateSpeed*e:Or/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){Wn.setFromMatrixColumn(t,0),Wn.multiplyScalar(-e),this._panOffset.add(Wn)}_panUp(e,t){this.screenSpacePanning===!0?Wn.setFromMatrixColumn(t,1):(Wn.setFromMatrixColumn(t,0),Wn.crossVectors(this.object.up,Wn)),Wn.multiplyScalar(e),this._panOffset.add(Wn)}_pan(e,t){const r=this.domElement;if(this.object.isPerspectiveCamera){const i=this.object.position;Wn.copy(i).sub(this.target);let s=Wn.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/r.clientHeight,this.object.matrix),this._panUp(2*t*s/r.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrix)):this.enablePan=!1}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:this.enableZoom=!1}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:this.enableZoom=!1}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const r=this.domElement.getBoundingClientRect(),i=e-r.left,s=t-r.top,o=r.width,a=r.height;this._mouse.x=i/o*2-1,this._mouse.y=-(s/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Or*this._rotateDelta.x/t.clientHeight),this._rotateUp(Or*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(Or*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-Or*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(Or*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-Or*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._rotateStart.set(r,i)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._panStart.set(r,i)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),r=e.pageX-t.x,i=e.pageY-t.y,s=Math.sqrt(r*r+i*i);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),i=.5*(e.pageX+r.x),s=.5*(e.pageY+r.y);this._rotateEnd.set(i,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Or*this._rotateDelta.x/t.clientHeight),this._rotateUp(Or*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._panEnd.set(r,i)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),r=e.pageX-t.x,i=e.pageY-t.y,s=Math.sqrt(r*r+i*i);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const o=(e.pageX+t.x)*.5,a=(e.pageY+t.y)*.5;this._updateZoomParameters(o,a)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new Rt,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,r={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:r.deltaY*=16;break;case 2:r.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(r.deltaY*=10),r}}function _z(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function bz(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function xz(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(cM),this.state=hn.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function wz(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Dl.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=hn.DOLLY;break;case Dl.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=hn.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=hn.ROTATE}break;case Dl.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=hn.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=hn.PAN}break;default:this.state=hn.NONE}this.state!==hn.NONE&&this.dispatchEvent(rb)}function Az(n){switch(this.state){case hn.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case hn.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case hn.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function Ez(n){this.enabled===!1||this.enableZoom===!1||this.state!==hn.NONE||(n.preventDefault(),this.dispatchEvent(rb),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(cM))}function Sz(n){this.enabled!==!1&&this._handleKeyDown(n)}function Tz(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case Ml.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=hn.TOUCH_ROTATE;break;case Ml.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=hn.TOUCH_PAN;break;default:this.state=hn.NONE}break;case 2:switch(this.touches.TWO){case Ml.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=hn.TOUCH_DOLLY_PAN;break;case Ml.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=hn.TOUCH_DOLLY_ROTATE;break;default:this.state=hn.NONE}break;default:this.state=hn.NONE}this.state!==hn.NONE&&this.dispatchEvent(rb)}function Mz(n){switch(this._trackPointer(n),this.state){case hn.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case hn.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case hn.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case hn.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=hn.NONE}}function Rz(n){this.enabled!==!1&&n.preventDefault()}function Iz(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function Cz(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const Pz=gt({__name:"GridSphere",setup(n){const e=Ee(null);return xr(()=>{if(!e.value)return;const t=e.value.clientWidth,r=e.value.clientHeight,i=new T5,s=new Ti(40,t/r,.5,1e3);s.position.set(0,3,5);const o=new gz({alpha:!0,antialias:!0});o.setPixelRatio(window.devicePixelRatio),o.setSize(t,r),e.value.appendChild(o.domElement);const a=new tb(2,30,30),c=new eb({color:"#141414",wireframe:!0}),l=new Ns(a,c);i.add(l);const u=[new Wt("#A73FF6"),new Wt("#8489F7"),new Wt("#73AEF8"),new Wt("#61D3F8"),new Wt("#a259ff")],f=20,d=2,p=new Float32Array(f*3),v=new Float32Array(f*3),m=new Float32Array(f),y=new Float32Array(f),h=new Float32Array(f);for(let F=0;F<f;F++){const K=Math.acos(2*Math.random()-1),A=2*Math.PI*Math.random();m[F]=K,y[F]=A,h[F]=Math.random()*Math.PI*2;const X=d*Math.sin(K)*Math.cos(A),V=d*Math.sin(K)*Math.sin(A),$=d*Math.cos(K);p.set([X,V,$],F*3);const ee=u[Math.floor(Math.random()*u.length)];v.set([ee.r,ee.g,ee.b],F*3)}const w=new ns;w.setAttribute("position",new Vr(p,3)),w.setAttribute("color",new Vr(v,3));const S=200,T=2.25,C=new Float32Array(S*3),B=new Float32Array(S*3),O=new Float32Array(S*3),P=new Float32Array(S),N=new Float32Array(S),I=new Float32Array(S),U=new Uint16Array(S),q=200;for(let F=0;F<S;F++){const K=Math.acos(2*Math.random()-1),A=2*Math.PI*Math.random();P[F]=K,N[F]=A,I[F]=Math.random()*Math.PI*2,U[F]=Math.floor(Math.random()*q);const X=T*Math.sin(K)*Math.cos(A),V=T*Math.sin(K)*Math.sin(A),$=T*Math.cos(K);C.set([X,V,$],F*3),B.set([X,V,$],F*3),O.set([1,1,1],F*3)}const M=new ns;M.setAttribute("position",new Vr(C,3)),M.setAttribute("color",new Vr(O,3));function g(F=32){const K=document.createElement("canvas");K.width=K.height=F;const A=K.getContext("2d");A.clearRect(0,0,F,F),A.beginPath(),A.arc(F/2,F/2,F/2,0,Math.PI*2),A.closePath(),A.fillStyle="#434242",A.globalAlpha=1,A.fill();const X=new Rr(K);return X.needsUpdate=!0,X}const _=g(32),b=new vy({vertexColors:!0,opacity:1,sizeAttenuation:!0,size:.15,depthWrite:!1,map:_,alphaTest:.5}),E=new vy({vertexColors:!0,opacity:.85,sizeAttenuation:!0,size:.035,depthWrite:!1,map:_,alphaTest:.5}),R=new aA(w,b),L=new aA(M,E);i.add(R),i.add(L);const G=new yz(s,o.domElement);G.enableZoom=!1;function k(){requestAnimationFrame(k),l.rotation.y+=5e-4,G.update();const F=performance.now()*.001;let K=!1,A=!1,X=!1;for(let V=0;V<f;V++){const $=m[V]+.15*Math.sin(F*.7+V),ee=y[V]+.15*Math.cos(F*.9+V*1.7),he=.12*Math.sin(F*1.1+h[V]),pe=d+he,de=pe*Math.sin($)*Math.cos(ee),Fe=pe*Math.sin($)*Math.sin(ee),j=pe*Math.cos($),Ue=V*3;(p[Ue]!==de||p[Ue+1]!==Fe||p[Ue+2]!==j)&&(p[Ue]=de,p[Ue+1]=Fe,p[Ue+2]=j,K=!0)}K&&(w.attributes.position.needsUpdate=!0);for(let V=0;V<S;V++){if(U[V]++,U[V]>q){const Ve=Math.acos(2*Math.random()-1),Ie=2*Math.PI*Math.random();P[V]=Ve,N[V]=Ie,I[V]=Math.random()*Math.PI*2,U[V]=0}let $=1;U[V]<q*.1?$=U[V]/(q*.1):U[V]>q*.9&&($=1-(U[V]-q*.9)/(q*.1));const ee=V*3;(O[ee]!==$||O[ee+1]!==$||O[ee+2]!==$)&&(O[ee]=$,O[ee+1]=$,O[ee+2]=$,X=!0);const he=P[V]+.08*Math.sin(F*.8+V),pe=N[V]+.08*Math.cos(F*1.1+V*1.3),de=.08*Math.sin(F*1.2+I[V]),Fe=T+de,j=Fe*Math.sin(he)*Math.cos(pe),Ue=Fe*Math.sin(he)*Math.sin(pe),et=Fe*Math.cos(he);(C[ee]!==j||C[ee+1]!==Ue||C[ee+2]!==et)&&(C[ee]=j,C[ee+1]=Ue,C[ee+2]=et,A=!0)}A&&(M.attributes.position.needsUpdate=!0),X&&(M.attributes.color.needsUpdate=!0),o.render(i,s)}k();function x(){var A,X;const F=((A=e.value)==null?void 0:A.clientWidth)||window.innerWidth,K=((X=e.value)==null?void 0:X.clientHeight)||window.innerHeight;s.aspect=F/K,s.updateProjectionMatrix(),o.setSize(F,K,!1),o.domElement.style.width="100%",o.domElement.style.height="100%",o.render(i,s)}window.addEventListener("resize",x),gp(()=>{window.removeEventListener("resize",x),o.dispose(),w.dispose(),M.dispose(),_.dispose(),b.dispose(),E.dispose()})}),(t,r)=>(Pe(),Ye("div",{class:"w-full h-full absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",ref_key:"container",ref:e,style:{overflow:"hidden"}},null,512))}}),Nz=""+globalThis.__publicAssetsURL("images/public/connect.png"),lM=n=>(w_("data-v-5126df30"),n=n(),A_(),n),Bz={class:"w-full h-full flex flex-col items-center justify-around space-y-8 relative z-10"},Lz={class:""},kz={class:"slogan uppercase sm:text-[8vw] lg:text-[7vw] text-[7vw]"},Dz=lM(()=>Q("span",null,"GAEA",-1)),Oz=lM(()=>Q("div",{class:"w-20 absolute -top-5 left-full"},[Q("img",{src:Nz,alt:""})],-1)),Uz=[Dz,Oz],Fz={class:"w-full flex flex-wrap items-center justify-center space-x-6 uppercase mt-24 sm:text-[0.9rem] lg:text-[1.2rem] text-[1.2rem]"},Hz=gt({__name:"Content",emits:["update:scrollTo"],setup(n,{emit:e}){const t=s=>{e("update:scrollTo",s)},r=Ee(!1),i=Ee(null);return xr(()=>{nr(()=>{const s=new IntersectionObserver(o=>o.forEach(a=>r.value=a.isIntersecting),{threshold:0});i.value&&s.observe(i.value)})}),(s,o)=>{const a=mS;return Pe(),Ye("div",Bz,[Q("div",Lz,[Q("div",kz,[Q("div",{class:st(["w-fit relative",z(r)?"move-left":""])},Uz,2),Q("div",{class:st(["",z(r)?"move-right":""])},"ecological",2),Q("div",{class:st(["nodes-text",z(r)?"move-left":""])},"nodes",2)]),Q("div",{class:"text-[2rem] lg:text-[2rem] sm:text-[1.6rem] font-sans text-[#ebebebee] mt-4 text-center",ref_key:"floor1",ref:i}," Becoming the founder of the silicon-based world. ",512),Q("div",Fz,[Q("div",{class:"buy-node-hover",onClick:o[0]||(o[0]=c=>t("floor4"))},"buy node "),Vt(a,{to:"https://app.aigaea.net/dashboard",target:"_blank",rel:"noopener",class:"buy-node-hover"},{default:Zt(()=>[Aa(" join GAEA ")]),_:1}),Q("div",{class:"buy-node-hover",onClick:o[1]||(o[1]=c=>t("floor5"))},"my node")])])])}}});const zz=ku(Hz,[["__scopeId","data-v-5126df30"]]),Gz={class:"w-[50%] sm:w-[100%] md:w-[70%] lg:w-[70%] xl:w-[50%] aspect-[1/1] mx-auto relative"},Vz=gt({__name:"Index",emits:["update:scrollTo"],setup(n,{emit:e}){const t=r=>{e("update:scrollTo",r)};return(r,i)=>{const s=Pz,o=zz;return Pe(),Ye("div",Gz,[Vt(s),Vt(o,{"onUpdate:scrollTo":t})])}}}),OA=""+globalThis.__publicAssetsURL("video/mobile.mp4"),Wz=""+globalThis.__publicAssetsURL("video/mobile.png"),jz=Q("div",{class:"w-[25%] aspect-[1/1] pointer-events-none absolute -top-[10%] right-0 transition-all duration-1000 ease-linear z-[30]"},[Q("div",{class:"w-full h-full absolute pointer-events-none zoom-element rounded-full bg-primary opacity-50 blur-[100px] transition [transform:translate3d(0,0,0)] md:blur-[150px] lg:blur-[100px] xl:blur-[200px]"})],-1),qz=Q("div",{class:"w-[25%] aspect-[1/1] pointer-events-none absolute -bottom-[50%] left-0 transition-all duration-1000 ease-linear z-[30]"},[Q("div",{class:"w-full h-full absolute pointer-events-none zoom-element rounded-full bg-primary opacity-50 blur-[100px] transition [transform:translate3d(0,0,0)] md:blur-[150px] lg:blur-[100px] xl:blur-[200px]"})],-1),$z=Q("div",{class:"w-[30%] aspect-[1/1.5] border border-[#ebebeb63] rounded-[25px] relative"},[Q("video",{class:"w-full h-full object-contain text-[#ebebeb30] absolute top-0 left-0 rounded-[25px] z-20",src:OA,poster:Wz,loop:"",autoplay:"",muted:"",disablePictureInPicture:"",playsinline:"","webkit-playsinline":"",controlsList:"nodownload nofullscreen noremoteplayback",style:{"pointer-events":"none"}},[Q("source",{src:OA,type:"video/mp4"}),Q("div",null,"Your browser does not support the video tag.")])],-1),Xz={class:"w-[60%] space-y-5 overflow-hidden"},Kz=Q("p",{class:"uppercase nodes-text text-[70px] font-bold mb-4 sm:text-[3.6rem] u-line-2"},"ecological nodes",-1),Yz=Q("div",{class:"w-[90%] text-[#ebebebbd] text-[20px] break-words"}," As the key driver of GAEA emotional applications, GAEA nodes automatically participate in network security monitoring and maintenance through globally distributed nodes. This enhances the security, performance, and intelligent network reward allocation of the GAEA network. Committed to achieving large-scale application of AI emotion generalization. ",-1),Qz={class:"grid grid-cols-2 gap-y-10 gap-x-[120px] mx-auto"},Zz={class:"text-[75px] lg:text-[75px] sm:text-[40px] font-bold"},Jz={class:"text-[20px] lg:text-[20px] sm:text-[12px] text-[#ebebebbd] text-center"},eG=gt({__name:"Index",setup(n){const e=Ee(!1),t=Ee(null);xr(()=>{nr(()=>{const i=new IntersectionObserver(s=>s.forEach(o=>e.value=o.isIntersecting),{threshold:0});t.value&&i.observe(t.value)})});const r=Ee([{title:"151",description:"Countries and Regions"},{title:"71M+",description:"GAEA Effective Datasets"},{title:"67%",description:"Al Training Cost Reduction"},{title:"300%",description:"Emotion Model Recognition Speed"}]);return(i,s)=>(Pe(),Ye("div",{class:st(["w-full flex items-center justify-between space-x-5 relative",z(e)?"animate-start":""]),ref_key:"floor2",ref:t},[jz,qz,$z,Q("div",Xz,[Kz,Yz,Q("div",Qz,[(Pe(!0),Ye(Ii,null,Wf(z(r),(o,a)=>(Pe(),Ye("div",{class:"flex flex-col items-center",key:a},[Q("span",Zz,Ft(o.title),1),Q("span",Jz,Ft(o.description),1)]))),128))])])],2))}}),UA=""+globalThis.__publicAssetsURL("video/wrist-watch.mp4"),tG=""+globalThis.__publicAssetsURL("video/wrist-watch.png"),nG=Q("div",{class:"w-[25%] aspect-[1/1] pointer-events-none absolute -bottom-[50%] right-0 transition-all duration-1000 ease-linear z-[30]"},[Q("div",{class:"w-full h-full pointer-events-none zoom-element rounded-full bg-primary opacity-50 blur-[100px] transition [transform:translate3d(0,0,0)] md:blur-[150px] lg:blur-[100px] xl:blur-[200px]"})],-1),rG=Q("div",{class:"w-[30%] aspect-[1/1.5] relative overflow-hidden"},[Q("video",{class:"w-full h-full object-contain text-[#ebebeb30] absolute top-0 left-0",src:UA,poster:tG,loop:"",autoplay:"",muted:"",disablePictureInPicture:"",controlsList:"nodownload nofullscreen noremoteplayback",playsinline:"","webkit-playsinline":"",style:{"pointer-events":"none"}},[Q("source",{src:UA,type:"video/mp4"}),Q("div",null,"Your browser does not support the video tag.")]),Q("div",{class:"absolute bottom-0 left-10 text-[3.75rem] lg:text-[3.75rem] sm:text-[2.8rem] leading-[4.25rem] font-[600] flex flex-col"},[Q("span",null,"THE"),Q("span",null,"GAEA"),Q("span",{class:"nodes-text"},"Emocoords")])],-1),iG=IS('<div class="w-[60%] space-y-14 overflow-hidden"><p class="text-[20px] font-sans text-[#ebebebd1] u-line-3"> Purchase GAEA smart hardware devices of the corresponding pre-sale level, bind exclusive NFTs to become authentication nodes. </p><div class="w-fit border border-[#2B2B2B] text-[#ebebeb93] rounded-[25px] pl-6 pr-20 py-6 leading-[25px] u-line-8"> Net weight of the main body: approximately 15.8g<br> Screen: 1.62 inches, AMOLED screen<br> Resolution: 192 * 490<br> Wireless connection: Bluetooth 5.4<br> Waterproof grade: 5ATM<br> Battery type: Lithium ion polymer battery<br> Battery capacity: 233mAh </div><div class="text-[20px] font-sans text-[#ebebebd1] u-line-3"> Nodes are driven and operated by AI node agents, and computers<br> with node keys and Internet access can participate in node mining. </div></div>',1),sG=[nG,rG,iG],oG=gt({__name:"Index",setup(n){const e=Ee(!1),t=Ee(null);return xr(()=>{nr(()=>{const r=new IntersectionObserver(i=>i.forEach(s=>e.value=s.isIntersecting),{threshold:0});t.value&&r.observe(t.value)})}),(r,i)=>(Pe(),Ye("div",{class:st(["w-full flex items-center justify-between relative",z(e)?"animate-start":""]),ref_key:"floor3",ref:t},sG,2))}});const ib=n=>({nftABI:[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"_fromTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_toTokenId",type:"uint256"}],name:"BatchMetadataUpdate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"MetadataUpdate",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_user",type:"address"}],name:"RemovedWhiteList",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"_mintInfos",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"blockNumber",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint8",name:"level",type:"uint8"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"description",type:"string"},{internalType:"string",name:"image",type:"string"}],name:"addLevelMetadata",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"addWhiteList",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"approveBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getLevel",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"getLevels",outputs:[{internalType:"uint8[]",name:"levels",type:"uint8[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"getOwnerTokenIds",outputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"levelMetadatas",outputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"description",type:"string"},{internalType:"string",name:"image",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxLevel",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint8",name:"level",type:"uint8"}],name:"mint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint8",name:"level",type:"uint8"},{internalType:"uint256",name:"batchSize",type:"uint256"}],name:"mintBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"removeWhiteList",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"transferFromBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"whiteListed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],nftmintABI:[{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"paused",type:"bool"}],name:"NFTMintPaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"buyer",type:"address"},{indexed:!0,internalType:"address",name:"superior",type:"address"},{indexed:!1,internalType:"uint8",name:"level",type:"uint8"},{indexed:!1,internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"NFTPurchased",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_user",type:"address"}],name:"RemovedWhiteList",type:"event"},{inputs:[{internalType:"uint8",name:"level",type:"uint8"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"currentSupply",type:"uint256"}],name:"addMintMetadata",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"addWhiteList",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"buyer",type:"address"},{internalType:"address",name:"superior",type:"address"}],name:"genesis",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserPurchases",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserReferralEarnings",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserReferrales",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxLevel",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint8",name:"",type:"uint8"}],name:"mintMetadatas",outputs:[{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"currentSupply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"mintPaused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"nftContract",outputs:[{internalType:"contract INFT",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint8",name:"level",type:"uint8"},{internalType:"address",name:"superior",type:"address"}],name:"purchase",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint8",name:"level",type:"uint8"},{internalType:"address",name:"superior",type:"address"},{internalType:"uint256",name:"batchSize",type:"uint256"}],name:"purchaseBatch",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"removeWhiteList",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rootSuperior",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bool",name:"state",type:"bool"}],name:"setPurchaseStatus",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_rootSuperior",type:"address"}],name:"setRootSuperior",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"superiors",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userPurchases",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint8",name:"",type:"uint8"}],name:"userPurchasesLevel",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userReferralEarnings",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userReferrales",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint8",name:"",type:"uint8"}],name:"userReferralesLevel",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"whiteListed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],nftstakeABI:[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint8",name:"level",type:"uint8"}],name:"NFTStaked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RewardClaimed",type:"event"},{inputs:[{internalType:"uint8",name:"level",type:"uint8"},{internalType:"uint8",name:"year",type:"uint8"},{internalType:"uint256",name:"yearlyReward",type:"uint256"}],name:"addRewardRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getClaimedRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint8",name:"daysBack",type:"uint8"}],name:"getLevelsRewards",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getStakedCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getStakedLevelCounts",outputs:[{internalType:"uint256[4]",name:"",type:"uint256[4]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getStakedTokenIds",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getTodayRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getTotalRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserStakes",outputs:[{components:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"lastClaimTime",type:"uint256"},{internalType:"uint8",name:"level",type:"uint8"},{internalType:"uint256",name:"totalClaimed",type:"uint256"}],internalType:"struct NodeNFTStake.Stake[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"nftContract",outputs:[{internalType:"contract INFT",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint8",name:"",type:"uint8"},{internalType:"uint256",name:"",type:"uint256"}],name:"rewardRates",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_tokenContract",type:"address"}],name:"setTokenContract",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"stake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"stakeBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"tokenContract",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenStaked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_token",type:"address"},{internalType:"address",name:"_recipient",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"transferToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"userStakes",outputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"lastClaimTime",type:"uint256"},{internalType:"uint8",name:"level",type:"uint8"},{internalType:"uint256",name:"totalClaimed",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}]})[n]||[],Ba=n=>{const e=/"transactionHash":"([^"]+)"/;if(n){const t=n.match(e);return t&&t[1]?t[1]:null}else return null};var Ri;(function(n){n.NUMBER="NUMBER_NUMBER",n.HEX="NUMBER_HEX",n.STR="NUMBER_STR",n.BIGINT="NUMBER_BIGINT"})(Ri||(Ri={}));var ko;(function(n){n.HEX="BYTES_HEX",n.UINT8ARRAY="BYTES_UINT8ARRAY"})(ko||(ko={}));const Ir={number:Ri.BIGINT,bytes:ko.HEX},mt={number:Ri.HEX,bytes:ko.HEX};var bo;(function(n){n.EARLIEST="earliest",n.LATEST="latest",n.PENDING="pending",n.SAFE="safe",n.FINALIZED="finalized",n.COMMITTED="committed"})(bo||(bo={}));var Bf;(function(n){n.chainstart="chainstart",n.frontier="frontier",n.homestead="homestead",n.dao="dao",n.tangerineWhistle="tangerineWhistle",n.spuriousDragon="spuriousDragon",n.byzantium="byzantium",n.constantinople="constantinople",n.petersburg="petersburg",n.istanbul="istanbul",n.muirGlacier="muirGlacier",n.berlin="berlin",n.london="london",n.altair="altair",n.arrowGlacier="arrowGlacier",n.grayGlacier="grayGlacier",n.bellatrix="bellatrix",n.merge="merge",n.capella="capella",n.shanghai="shanghai"})(Bf||(Bf={}));const sb=Object.getPrototypeOf(Uint8Array);var FA=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const HA=Symbol.for("web3/base-provider");class Fd{static isWeb3Provider(e){return e instanceof Fd||!!(e&&e[HA])}get[HA](){return!0}send(e,t){this.request(e).then(r=>{t(null,r)}).catch(r=>{t(r)})}sendAsync(e){return FA(this,void 0,void 0,function*(){return this.request(e)})}asEIP1193Provider(){const e=Object.create(this),t=e.request;return e.request=function(i){return FA(this,void 0,void 0,function*(){return(yield t(i)).result})},e.asEIP1193Provider=void 0,e}}class aG extends Array{constructor(e){super(),this._accountProvider=e}}const cG=100,lG=101,uG=201,fG=202,dG=203,hG=204,pG=205,mG=206,gG=207,vG=208,yG=300,_G=301,bG=310,xG=311,wG=400,AG=402,EG=405,SG=407,TG=408,MG=410,RG=411,IG=412,CG=413,PG=414,NG=415,BG=416,LG=417,kG=418,DG=419,OG=420,UG=421,FG=422,HG=423,zG=424,GG=425,VG=426,WG=427,jG=428,qG=429,$G=430,XG=431,KG=432,YG=433,QG=434,ZG=435,JG=436,e9=437,t9=438,n9=439,r9=440,i9=441,s9=500,o9=503,a9=505,c9=506,l9=507,u9=600,f9=602,d9=603,h9=604,p9=701,m9=702,g9=703,v9=704,y9=705,_9=706,b9=707,x9=709,w9=801,A9=802,E9=4001,S9=4100,T9=4200,M9=4900,R9=4901,I9=902,C9=903,P9=1001,N9=1002,B9=1003,L9=1004,k9=1005,D9=1006,O9=1008,U9=1009,F9=1010,H9=1011,z9=1012,G9=1014,V9=1015,W9=1100,uM=1101,j9=1200,Cp=-32700,Pp=-32600,Np=-32601,Bp=-32602,Lp=-32603,kp=-32e3,Dp=-32001,Op=-32002,Up=-32003,Fp=-32004,Hp=-32005,zp=-32006;class ht extends Error{get innerError(){return this.cause instanceof Lf?this.cause.errors:this.cause}set innerError(e){Array.isArray(e)?this.cause=new Lf(e):this.cause=e}constructor(e,t){super(e),Array.isArray(t)?this.cause=new Lf(t):this.cause=t,this.name=this.constructor.name,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(new.target.constructor):this.stack=new Error().stack}static convertToString(e,t=!1){if(e==null)return"undefined";const r=JSON.stringify(e,(i,s)=>typeof s=="bigint"?s.toString():s);return t&&["bigint","string"].includes(typeof e)?r.replace(/['\\"]+/g,""):r}toJSON(){return{name:this.name,code:this.code,message:this.message,cause:this.cause,innerError:this.cause}}}class Lf extends ht{constructor(e){super(`Multiple errors occurred: [${e.map(t=>t.message).join("], [")}]`),this.code=vG,this.errors=e}}class Tt extends ht{constructor(e,t){super(`Invalid value given "${ht.convertToString(e,!0)}". Error: ${t}.`),this.name=this.constructor.name}}class zA extends ht{constructor(){super("Private key must be 32 bytes."),this.code=p9}}class q9 extends ht{constructor(){super("Invalid Private Key, Not a valid string or uint8Array"),this.code=m9}}class $9 extends ht{constructor(e){super(`"${e}"`),this.code=A9}}class fM extends ht{constructor(){super("Invalid key derivation function"),this.code=g9}}class X9 extends ht{constructor(){super("Key derivation failed - possibly wrong password"),this.code=v9}}class K9 extends ht{constructor(){super("Unsupported key store version"),this.code=y9}}class Y9 extends ht{constructor(){super("Password cannot be empty"),this.code=_9}}class Q9 extends ht{constructor(){super("Initialization vector must be 16 bytes"),this.code=b9}}class Z9 extends ht{constructor(){super("c > 1000, pbkdf2 is less secure with less iterations"),this.code=x9}}class Hd extends ht{constructor(e,t){super(e),this.code=s9,t&&(this.errorCode=t.code,this.errorReason=t.reason)}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{errorCode:this.errorCode,errorReason:this.errorReason})}}class by extends Hd{constructor(e){super("Connection not open",e),this.code=o9}}class J9 extends Hd{constructor(e){super(`Maximum number of reconnect attempts reached! (${e})`),this.code=a9}}class e7 extends Hd{constructor(){super("CONNECTION ERROR: Provider started to reconnect before the response got received!"),this.code=c9}}class t7 extends Hd{constructor(e){super(`Request already sent with following id: ${e}`),this.code=l9}}class Cr extends ht{constructor(e,t){super(e),this.code=yG,this.receipt=t}}class GA extends ht{constructor(e,t){super(`The resolver at ${e} does not implement requested method: "${t}".`),this.address=e,this.name=t,this.code=_G}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{address:this.address,name:this.name})}}class Xm extends Cr{constructor(e){if(super(e.message||"Error"),this.name="name"in e&&e.name||this.constructor.name,this.stack="stack"in e&&e.stack||void 0,this.code=e.code,typeof e.data=="object"){let t;e.data&&"originalError"in e.data?t=e.data.originalError:t=e.data,this.data=t.data,this.cause=new Xm(t)}else this.data=e.data}setDecodedProperties(e,t,r){this.errorName=e,this.errorSignature=t,this.errorArgs=r}toJSON(){let e=Object.assign(Object.assign({},super.toJSON()),{data:this.data});return this.errorName&&(e=Object.assign(Object.assign({},e),{errorName:this.errorName,errorSignature:this.errorSignature,errorArgs:this.errorArgs})),e}}class fc extends Cr{constructor(e){super("Error happened while trying to execute a function inside a smart contract"),this.code=bG,this.cause=new Xm(e)}}class n7 extends Tt{constructor(e){var t,r;super(`data: ${(t=e.data)!==null&&t!==void 0?t:"undefined"}, input: ${(r=e.input)!==null&&r!==void 0?r:"undefined"}`,`You can't have "data" and "input" as properties of a contract at the same time, please use either "data" or "input" instead.`),this.code=xG}}class r7 extends ht{constructor(e){super(`ENS is not supported on network ${e}`),this.code=I9}}class i7 extends ht{constructor(){super("Network not synced"),this.code=C9}}class VA extends ht{constructor(e){super(`Invalid parameters passed. "${typeof e<"u"?e:""}"`),this.hint=e,this.code=gG}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{hint:this.hint})}}class xy extends ht{constructor(){super(...arguments),this.code=uG}}class io extends ht{constructor(){super("The method you're trying to call is not implemented."),this.code=fG}}class dM extends ht{constructor(){super(...arguments),this.code=dG}}class s7 extends ht{constructor(){super(...arguments),this.code=hG}}class kt extends ht{constructor(e,t){super(e),this.code=pG,this.props=t??{}}}class o7 extends ht{constructor(e){super(`A plugin with the namespace: ${e} has already been registered.`),this.code=mG}}class Qh extends ht{constructor(){super(...arguments),this.code=u9}}class wy extends ht{constructor(e){super(`Client URL "${e}" is invalid.`),this.code=f9}}class ho extends ht{constructor(){super(...arguments),this.code=d9}}class a7 extends ht{constructor(){super(...arguments),this.code=h9}}class c7 extends Tt{constructor(){super(...arguments),this.code=w9}}class ob extends ht{constructor(e,t){super(e),this.receipt=t,this.code=wG}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{receipt:this.receipt})}}class Gp extends ht{constructor(e,t,r,i){super(`Transaction has been reverted by the EVM${r===void 0?"":`:
 ${ht.convertToString(r)}`}`),this.reason=e,this.signature=t,this.receipt=r,this.data=i,this.code=AG}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{reason:this.reason,signature:this.signature,receipt:this.receipt,data:this.data})}}class hM extends Gp{constructor(e,t,r,i,s,o,a){super(e),this.reason=e,this.customErrorName=t,this.customErrorDecodedSignature=r,this.customErrorArguments=i,this.signature=s,this.receipt=o,this.data=a,this.code=t9}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{reason:this.reason,customErrorName:this.customErrorName,customErrorDecodedSignature:this.customErrorDecodedSignature,customErrorArguments:this.customErrorArguments,signature:this.signature,receipt:this.receipt,data:this.data})}}class pM extends ob{constructor(e){super(`Transaction has been reverted by the EVM${e===void 0?"":`:
 ${ht.convertToString(e)}`}`,e),this.code=EG}}class l7 extends ob{constructor(){super("Raw transaction undefined"),this.code=SG}}class WA extends ob{constructor(){super("Transaction not found"),this.code=$G}}class u7 extends Tt{constructor(e){super(e,"invalid transaction with invalid sender"),this.code=TG}}class f7 extends Tt{constructor(e){super(e,"invalid transaction with invalid receiver"),this.code=e9}}class d7 extends Tt{constructor(){super("MissingCustomChainError","If tx.common is provided it must have tx.common.customChain"),this.code=MG}}class h7 extends Tt{constructor(){super("MissingCustomChainIdError","If tx.common is provided it must have tx.common.customChain and tx.common.customChain.chainId"),this.code=RG}}class p7 extends Tt{constructor(e){super(JSON.stringify(e),"Chain Id doesnt match in tx.chainId tx.common.customChain.chainId"),this.code=IG}}class m7 extends Tt{constructor(e){super(JSON.stringify(e),"Chain doesnt match in tx.chain tx.common.basechain"),this.code=ZG}}class g7 extends Tt{constructor(e){super(JSON.stringify(e),"hardfork doesnt match in tx.hardfork tx.common.hardfork"),this.code=JG}}class v7 extends Tt{constructor(){super("CommonOrChainAndHardforkError","Please provide the common object or the chain and hardfork property but not all together."),this.code=CG}}class y7 extends Tt{constructor(e){var t,r;super("MissingChainOrHardforkError",`When specifying chain and hardfork, both values must be defined. Received "chain": ${(t=e.chain)!==null&&t!==void 0?t:"undefined"}, "hardfork": ${(r=e.hardfork)!==null&&r!==void 0?r:"undefined"}`),this.code=PG}}class _7 extends ht{constructor(){super('Missing properties in transaction, either define "gas" and "gasPrice" for type 0 transactions or "gas", "maxPriorityFeePerGas" and "maxFeePerGas" for type 2 transactions'),this.code=r9}}class b7 extends Tt{constructor(e){var t,r,i,s;super(`gas: ${(t=e.gas)!==null&&t!==void 0?t:"undefined"}, gasPrice: ${(r=e.gasPrice)!==null&&r!==void 0?r:"undefined"}, maxPriorityFeePerGas: ${(i=e.maxPriorityFeePerGas)!==null&&i!==void 0?i:"undefined"}, maxFeePerGas: ${(s=e.maxFeePerGas)!==null&&s!==void 0?s:"undefined"}`,'"gas" is missing'),this.code=NG,this.cause=new _7}}class x7 extends ht{constructor(){super('Missing properties in transaction, either define "gas" and "gasPrice" for type 0 transactions or "gas", "maxPriorityFeePerGas" and "maxFeePerGas" for type 2 transactions, not both'),this.code=i9}}class w7 extends Tt{constructor(e){var t,r,i,s;super(`gas: ${(t=e.gas)!==null&&t!==void 0?t:"undefined"}, gasPrice: ${(r=e.gasPrice)!==null&&r!==void 0?r:"undefined"}, maxPriorityFeePerGas: ${(i=e.maxPriorityFeePerGas)!==null&&i!==void 0?i:"undefined"}, maxFeePerGas: ${(s=e.maxFeePerGas)!==null&&s!==void 0?s:"undefined"}`,"transaction must specify legacy or fee market gas properties, not both"),this.code=QG,this.cause=new x7}}class A7 extends Tt{constructor(e){var t,r;super(`gas: ${(t=e.gas)!==null&&t!==void 0?t:"undefined"}, gasPrice: ${(r=e.gasPrice)!==null&&r!==void 0?r:"undefined"}`,"Gas or gasPrice is lower than 0"),this.code=BG}}class E7 extends Tt{constructor(e){var t,r;super(`maxPriorityFeePerGas: ${(t=e.maxPriorityFeePerGas)!==null&&t!==void 0?t:"undefined"}, maxFeePerGas: ${(r=e.maxFeePerGas)!==null&&r!==void 0?r:"undefined"}`,"maxPriorityFeePerGas or maxFeePerGas is lower than 0"),this.code=LG}}class S7 extends Tt{constructor(e){super(e,"eip-1559 transactions don't support gasPrice"),this.code=kG}}class mM extends Tt{constructor(e){var t,r;super(`maxPriorityFeePerGas: ${(t=e.maxPriorityFeePerGas)!==null&&t!==void 0?t:"undefined"}, maxFeePerGas: ${(r=e.maxFeePerGas)!==null&&r!==void 0?r:"undefined"}`,"pre-eip-1559 transaction don't support maxFeePerGas/maxPriorityFeePerGas"),this.code=DG}}class T7 extends Tt{constructor(e){super(e,"invalid transaction object"),this.code=OG}}class M7 extends Tt{constructor(e){var t,r;super(`nonce: ${(t=e.nonce)!==null&&t!==void 0?t:"undefined"}, chainId: ${(r=e.chainId)!==null&&r!==void 0?r:"undefined"}`,"Nonce or chainId is lower than 0"),this.code=UG}}class R7 extends Tt{constructor(){super("UnableToPopulateNonceError","unable to populate nonce, no from address available"),this.code=FG}}class I7 extends Tt{constructor(){super("Eip1559NotSupportedError","Network doesn't support eip-1559"),this.code=HG}}class jA extends Tt{constructor(e){super(e,"unsupported transaction type"),this.code=zG}}class gM extends Tt{constructor(e){var t,r;super(`data: ${(t=e.data)!==null&&t!==void 0?t:"undefined"}, input: ${(r=e.input)!==null&&r!==void 0?r:"undefined"}`,`You can't have "data" and "input" as properties of transactions at the same time, please use either "data" or "input" instead.`),this.code=GG}}class C7 extends ht{constructor(e){super(`The connected Ethereum Node did not respond within ${e.numberOfSeconds} seconds, please make sure your transaction was properly sent and you are connected to a healthy Node. Be aware that transaction might still be pending or mined!
	Transaction Hash: ${e.transactionHash?e.transactionHash.toString():"not available"}`),this.code=XG}}function vM(n){return`Please make sure your transaction was properly sent and there are no previous pending transaction for the same account. However, be aware that it might still be mined!
	Transaction Hash: ${n?n.toString():"not available"}`}class yM extends ht{constructor(e){super(`Transaction was not mined within ${e.numberOfSeconds} seconds. ${vM(e.transactionHash)}`),this.code=VG}}class _M extends ht{constructor(e){super(`Transaction started at ${e.starterBlockNumber} but was not mined within ${e.numberOfBlocks} blocks. ${vM(e.transactionHash)}`),this.code=KG}}class P7 extends Tt{constructor(e){var t,r;super(`receipt: ${JSON.stringify(e.receipt)}, blockHash: ${(t=e.blockHash)===null||t===void 0?void 0:t.toString()}, transactionHash: ${(r=e.transactionHash)===null||r===void 0?void 0:r.toString()}`,"Receipt missing or blockHash null"),this.code=WG}}class N7 extends Tt{constructor(e){super(`receipt: ${JSON.stringify(e.receipt)}`,"Receipt missing block number"),this.code=jG}}class Ay extends ht{constructor(e){super(`Invalid signature. "${e}"`),this.code=YG}}class qA extends Tt{constructor(){super("LocalWalletNotAvailableError","Attempted to index account in local wallet, but no wallet is available"),this.code=qG}}class B7 extends ht{constructor(e,t){const r=[];e.forEach(i=>r.push(i.keyword)),super(`The following properties are invalid for the transaction type ${t}: ${r.join(", ")}`),this.code=n9}}class Hl extends Tt{constructor(e){super(e,"can not parse as byte data"),this.code=N9}}class ab extends Tt{constructor(e){super(e,"can not parse as number data"),this.code=B9}}class cb extends Tt{constructor(e){super(e,"invalid ethereum address"),this.code=k9}}class L7 extends Tt{constructor(e){super(e,"not a valid string"),this.code=P9}}class bM extends Tt{constructor(e){super(e,"invalid unit"),this.code=L9}}class xM extends Tt{constructor(e){super(e,"not a valid unit. Must be a positive integer"),this.code=V9}}class k7 extends Tt{constructor(e){super(e,"can not be converted to hex"),this.code=D9}}class wM extends Tt{constructor(e){super(e,"value greater than the nibble width"),this.code=G9}}class lb extends Tt{constructor(e){super(e,"not a valid boolean."),this.code=O9}}class D7 extends Tt{constructor(e){super(e,"not a valid unsigned integer."),this.code=U9}}class $A extends Tt{constructor(e){super(e,"invalid size given."),this.code=F9}}class XA extends Tt{constructor(e){super(e,"value is larger than size."),this.code=H9}}class O7 extends Tt{constructor(e){super(e,"invalid string given"),this.code=z9}}const U7=n=>!Array.isArray(n)&&n.jsonrpc==="2.0"&&!!n&&(n.result===void 0||n.result===null)&&"error"in n&&(typeof n.id=="number"||typeof n.id=="string"),KA=n=>U7(n)?n.error.message:"";class Es extends ht{constructor(e,t,r,i){var s;super(t??`Returned error: ${Array.isArray(e)?e.map(a=>KA(a)).join(","):KA(e)}`),this.code=cG,t||(this.data=Array.isArray(e)?e.map(a=>{var c;return(c=a.error)===null||c===void 0?void 0:c.data}):(s=e==null?void 0:e.error)===null||s===void 0?void 0:s.data),this.statusCode=i,this.request=r;let o;"error"in e?o=e.error:e instanceof Array&&(o=e.filter(a=>a.error).map(a=>a.error)),Array.isArray(o)&&o.length>0?this.cause=new Lf(o):this.cause=o}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{data:this.data,request:this.request,statusCode:this.statusCode})}}class Km extends Es{constructor(e,t){super(e,void 0,t),this.code=lG;let r;"error"in e?r=e.error:e instanceof Array&&(r=e.map(i=>i.error)),Array.isArray(r)?this.cause=new Lf(r):this.cause=r}}class YA extends ht{constructor(e,t){super(`Web3Config hardfork doesnt match in defaultHardfork ${e} and common.hardfork ${t}`),this.code=uM}}class QA extends ht{constructor(e,t){super(`Web3Config chain doesnt match in defaultHardfork ${e} and common.hardfork ${t}`),this.code=uM}}const AM="An Rpc error has occured with a code of *code*",vr={[Cp]:{message:"Parse error",description:"Invalid JSON"},[Pp]:{message:"Invalid request",description:"JSON is not a valid request object	"},[Np]:{message:"Method not found",description:"Method does not exist	"},[Bp]:{message:"Invalid params",description:"Invalid method parameters"},[Lp]:{message:"Internal error",description:"Internal JSON-RPC error"},[kp]:{message:"Invalid input",description:"Missing or invalid parameters"},[Dp]:{message:"Resource not found",description:"Requested resource not found"},[Op]:{message:"Resource unavailable",description:"Requested resource not available"},[Up]:{message:"Transaction rejected",description:"Transaction creation failed"},[Fp]:{message:"Method not supported",description:"Method is not implemented"},[Hp]:{message:"Limit exceeded",description:"Request exceeds defined limit"},[zp]:{message:"JSON-RPC version not supported",description:"Version of JSON-RPC protocol is not supported"},[E9]:{name:"User Rejected Request",message:"The user rejected the request."},[S9]:{name:"Unauthorized",message:"The requested method and/or account has not been authorized by the user."},[T9]:{name:"Unsupported Method",message:"The Provider does not support the requested method."},[M9]:{name:"Disconnected",message:"The Provider is disconnected from all chains."},[R9]:{name:"Chain Disconnected",message:"The Provider is not connected to the requested chain."},"0-999":{name:"",message:"Not used."},1e3:{name:"Normal Closure",message:"The connection successfully completed the purpose for which it was created."},1001:{name:"Going Away",message:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{name:"Protocol error",message:"The endpoint is terminating the connection due to a protocol error."},1003:{name:"Unsupported Data",message:"The connection is being terminated because the endpoint received data of a type it cannot accept. (For example, a text-only endpoint received binary data.)"},1004:{name:"Reserved",message:"Reserved. A meaning might be defined in the future."},1005:{name:"No Status Rcvd",message:"Reserved. Indicates that no status code was provided even though one was expected."},1006:{name:"Abnormal Closure",message:"Reserved. Indicates that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{name:"Invalid frame payload data",message:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{name:"Policy Violation",message:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{name:"Message Too Big",message:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{name:"Mandatory Ext.",message:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{name:"Internal Error",message:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{name:"Service Restart",message:"The server is terminating the connection because it is restarting."},1013:{name:"Try Again Later",message:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{name:"Bad Gateway",message:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{name:"TLS handshake",message:"Reserved. Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},"1016-2999":{name:"",message:"For definition by future revisions of the WebSocket Protocol specification, and for definition by extension specifications."},"3000-3999":{name:"",message:"For use by libraries, frameworks, and applications. These status codes are registered directly with IANA. The interpretation of these codes is undefined by the WebSocket protocol."},"4000-4999":{name:"",message:"For private use, and thus can't be registered. Such codes can be used by prior agreements between WebSocket applications. The interpretation of these codes is undefined by the WebSocket protocol."}};class pi extends ht{constructor(e,t){super(t??AM.replace("*code*",e.error.code.toString())),this.code=e.error.code,this.id=e.id,this.jsonrpc=e.jsonrpc,this.jsonRpcError=e.error}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{error:this.jsonRpcError,id:this.id,jsonRpc:this.jsonrpc})}}class F7 extends ht{constructor(e,t){var r,i,s,o;if(!e)super();else if(!((r=vr[e])===null||r===void 0)&&r.message)super(vr[e].message);else{const a=Object.keys(vr).find(c=>typeof c=="string"&&e>=parseInt(c.split("-")[0],10)&&e<=parseInt(c.split("-")[1],10));super((s=(i=vr[a??""])===null||i===void 0?void 0:i.message)!==null&&s!==void 0?s:AM.replace("*code*",(o=e==null?void 0:e.toString())!==null&&o!==void 0?o:'""'))}this.code=e,this.data=t}}class H7 extends pi{constructor(e){super(e,vr[Cp].message),this.code=Cp}}class z7 extends pi{constructor(e){super(e,vr[Pp].message),this.code=Pp}}class G7 extends pi{constructor(e){super(e,vr[Np].message),this.code=Np}}class V7 extends pi{constructor(e){super(e,vr[Bp].message),this.code=Bp}}class W7 extends pi{constructor(e){super(e,vr[Lp].message),this.code=Lp}}class j7 extends pi{constructor(e){super(e,vr[kp].message),this.code=kp}}class q7 extends pi{constructor(e){super(e,vr[Fp].message),this.code=Fp}}class $7 extends pi{constructor(e){super(e,vr[Op].message),this.code=Op}}class X7 extends pi{constructor(e){super(e,vr[Dp].message),this.code=Dp}}class K7 extends pi{constructor(e){super(e,vr[zp].message),this.code=zp}}class Y7 extends pi{constructor(e){super(e,vr[Up].message),this.code=Up}}class Q7 extends pi{constructor(e){super(e,vr[Hp].message),this.code=Hp}}const Pr=new Map;Pr.set(Cp,{error:H7});Pr.set(Pp,{error:z7});Pr.set(Np,{error:G7});Pr.set(Bp,{error:V7});Pr.set(Lp,{error:W7});Pr.set(kp,{error:j7});Pr.set(Fp,{error:q7});Pr.set(Op,{error:$7});Pr.set(Up,{error:Y7});Pr.set(Dp,{error:X7});Pr.set(zp,{error:K7});Pr.set(Hp,{error:Q7});class Z7 extends ht{constructor(e){super(`Format for the type ${e} is unsupported`),this.type=e,this.code=j9}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{type:this.type})}}function Hr(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`positive integer expected, not ${n}`)}function J7(n){if(typeof n!="boolean")throw new Error(`boolean expected, not ${n}`)}function eV(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function Hu(n,...e){if(!eV(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${n.length}`)}function ub(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Hr(n.outputLen),Hr(n.blockLen)}function Ec(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function fb(n,e){Hu(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const tV={number:Hr,bool:J7,bytes:Hu,hash:ub,exists:Ec,output:fb},db=tV,Nh=BigInt(2**32-1),Ey=BigInt(32);function EM(n,e=!1){return e?{h:Number(n&Nh),l:Number(n>>Ey&Nh)}:{h:Number(n>>Ey&Nh)|0,l:Number(n&Nh)|0}}function SM(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:s,l:o}=EM(n[i],e);[t[i],r[i]]=[s,o]}return[t,r]}const nV=(n,e)=>BigInt(n>>>0)<<Ey|BigInt(e>>>0),rV=(n,e,t)=>n>>>t,iV=(n,e,t)=>n<<32-t|e>>>t,sV=(n,e,t)=>n>>>t|e<<32-t,oV=(n,e,t)=>n<<32-t|e>>>t,aV=(n,e,t)=>n<<64-t|e>>>t-32,cV=(n,e,t)=>n>>>t-32|e<<64-t,lV=(n,e)=>e,uV=(n,e)=>n,TM=(n,e,t)=>n<<t|e>>>32-t,MM=(n,e,t)=>e<<t|n>>>32-t,RM=(n,e,t)=>e<<t-32|n>>>64-t,IM=(n,e,t)=>n<<t-32|e>>>64-t;function fV(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const dV=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),hV=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,pV=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),mV=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,gV=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),vV=(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0,At={fromBig:EM,split:SM,toBig:nV,shrSH:rV,shrSL:iV,rotrSH:sV,rotrSL:oV,rotrBH:aV,rotrBL:cV,rotr32H:lV,rotr32L:uV,rotlSH:TM,rotlSL:MM,rotlBH:RM,rotlBL:IM,add:fV,add3L:dV,add3H:hV,add4L:pV,add4H:mV,add5H:vV,add5L:gV},Zh=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Jh=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),ep=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),ms=(n,e)=>n<<32-e|n>>>e,Xt=(n,e)=>n<<e|n>>>32-e>>>0,Vp=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,yV=n=>n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255;function Wp(n){for(let e=0;e<n.length;e++)n[e]=yV(n[e])}function lu(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function uu(n){return typeof n=="string"&&(n=lu(n)),Hu(n),n}function jp(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];Hu(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}class hb{clone(){return this._cloneInto()}}const _V={}.toString;function CM(n,e){if(e!==void 0&&_V.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(n,e)}function pb(n){const e=r=>n().update(uu(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function PM(n=32){if(Zh&&typeof Zh.getRandomValues=="function")return Zh.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}const NM=[],BM=[],LM=[],bV=BigInt(0),uf=BigInt(1),xV=BigInt(2),wV=BigInt(7),AV=BigInt(256),EV=BigInt(113);for(let n=0,e=uf,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],NM.push(2*(5*r+t)),BM.push((n+1)*(n+2)/2%64);let i=bV;for(let s=0;s<7;s++)e=(e<<uf^(e>>wV)*EV)%AV,e&xV&&(i^=uf<<(uf<<BigInt(s))-uf);LM.push(i)}const[SV,TV]=SM(LM,!0),ZA=(n,e,t)=>t>32?RM(n,e,t):TM(n,e,t),JA=(n,e,t)=>t>32?IM(n,e,t):MM(n,e,t);function MV(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=t[c],u=t[c+1],f=ZA(l,u,1)^t[a],d=JA(l,u,1)^t[a+1];for(let p=0;p<50;p+=10)n[o+p]^=f,n[o+p+1]^=d}let i=n[2],s=n[3];for(let o=0;o<24;o++){const a=BM[o],c=ZA(i,s,a),l=JA(i,s,a),u=NM[o];i=n[u],s=n[u+1],n[u]=c,n[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=n[o+a];for(let a=0;a<10;a++)n[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}n[0]^=SV[r],n[1]^=TV[r]}t.fill(0)}class mb extends hb{constructor(e,t,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Hr(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Jh(this.state)}keccak(){Vp||Wp(this.state32),MV(this.state32,this.rounds),Vp||Wp(this.state32),this.posOut=0,this.pos=0}update(e){Ec(this);const{blockLen:t,state:r}=this;e=uu(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,t&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Ec(this,!1),Hu(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Hr(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(fb(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new mb(t,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const RV=(n,e,t)=>pb(()=>new mb(e,n,t)),eE=RV(1,136,256/8);db.bool;const qp=db.bytes;function kM(n){if(!(n instanceof Uint8Array))throw new TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof n}`);return new TextDecoder().decode(n)}function IV(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function CV(n){return e=>(db.bytes(e),n(e))}(()=>{const n=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,e=typeof module<"u"&&typeof module.require=="function"&&module.require.bind(module);return{node:e&&!n?e("crypto"):void 0,web:n}})();const Tr=(()=>{const n=CV(eE);return n.create=eE.create,n})();var jt;(function(n){n.assertEqual=i=>i;function e(i){}n.assertIs=e;function t(i){throw new Error}n.assertNever=t,n.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},n.getValidEnumValues=i=>{const s=n.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return n.objectValues(o)},n.objectValues=i=>n.objectKeys(i).map(function(s){return i[s]}),n.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},n.find=(i,s)=>{for(const o of i)if(s(o))return o},n.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}n.joinValues=r,n.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(jt||(jt={}));var Sy;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(Sy||(Sy={}));const Ge=jt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),go=n=>{switch(typeof n){case"undefined":return Ge.undefined;case"string":return Ge.string;case"number":return isNaN(n)?Ge.nan:Ge.number;case"boolean":return Ge.boolean;case"function":return Ge.function;case"bigint":return Ge.bigint;case"symbol":return Ge.symbol;case"object":return Array.isArray(n)?Ge.array:n===null?Ge.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?Ge.promise:typeof Map<"u"&&n instanceof Map?Ge.map:typeof Set<"u"&&n instanceof Set?Ge.set:typeof Date<"u"&&n instanceof Date?Ge.date:Ge.object;default:return Ge.unknown}},ye=jt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),PV=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class ui extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(t(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(t(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return i(this),r}static assert(e){if(!(e instanceof ui))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,jt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}ui.create=n=>new ui(n);const fu=(n,e)=>{let t;switch(n.code){case ye.invalid_type:n.received===Ge.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case ye.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,jt.jsonStringifyReplacer)}`;break;case ye.unrecognized_keys:t=`Unrecognized key(s) in object: ${jt.joinValues(n.keys,", ")}`;break;case ye.invalid_union:t="Invalid input";break;case ye.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${jt.joinValues(n.options)}`;break;case ye.invalid_enum_value:t=`Invalid enum value. Expected ${jt.joinValues(n.options)}, received '${n.received}'`;break;case ye.invalid_arguments:t="Invalid function arguments";break;case ye.invalid_return_type:t="Invalid function return type";break;case ye.invalid_date:t="Invalid date";break;case ye.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:jt.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case ye.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case ye.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case ye.custom:t="Invalid input";break;case ye.invalid_intersection_types:t="Intersection results could not be merged";break;case ye.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case ye.not_finite:t="Number must be finite";break;default:t=e.defaultError,jt.assertNever(n)}return{message:t}};let DM=fu;function NV(n){DM=n}function $p(){return DM}const Xp=n=>{const{data:e,path:t,errorMaps:r,issueData:i}=n,s=[...t,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}},BV=[];function Oe(n,e){const t=$p(),r=Xp({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===fu?void 0:fu].filter(i=>!!i)});n.common.issues.push(r)}class br{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const i of t){if(i.status==="aborted")return dt;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const i of t){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return br.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const i of t){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return dt;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const dt=Object.freeze({status:"aborted"}),Cl=n=>({status:"dirty",value:n}),Nr=n=>({status:"valid",value:n}),Ty=n=>n.status==="aborted",My=n=>n.status==="dirty",Sc=n=>n.status==="valid",Qf=n=>typeof Promise<"u"&&n instanceof Promise;function Kp(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function OM(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t}var Xe;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Xe||(Xe={}));var wf,Af;class Vs{constructor(e,t,r,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const tE=(n,e)=>{if(Sc(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ui(n.common.issues);return this._error=t,this._error}}};function xt(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:i}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{var c,l;const{message:u}=n;return o.code==="invalid_enum_value"?{message:u??a.defaultError}:typeof a.data>"u"?{message:(c=u??r)!==null&&c!==void 0?c:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(l=u??t)!==null&&l!==void 0?l:a.defaultError}},description:i}}class St{get description(){return this._def.description}_getType(e){return go(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:go(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new br,ctx:{common:e.parent.common,data:e.data,parsedType:go(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Qf(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const i={common:{issues:[],async:(r=t==null?void 0:t.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:go(e)},s=this._parseSync({data:e,path:i.path,parent:i});return tE(i,s)}"~validate"(e){var t,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:go(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:i});return Sc(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((r=(t=s==null?void 0:s.message)===null||t===void 0?void 0:t.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(s=>Sc(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:go(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(Qf(i)?i:Promise.resolve(i));return tE(r,s)}refine(e,t){const r=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:ye.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof t=="function"?t(r,i):t),!1))}_refinement(e){return new rs({schema:this,typeName:lt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Us.create(this,this._def)}nullable(){return Ia.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ts.create(this)}promise(){return hu.create(this,this._def)}or(e){return td.create([this,e],this._def)}and(e){return nd.create(this,e,this._def)}transform(e){return new rs({...xt(this._def),schema:this,typeName:lt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new ad({...xt(this._def),innerType:this,defaultValue:t,typeName:lt.ZodDefault})}brand(){return new gb({typeName:lt.ZodBranded,type:this,...xt(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new cd({...xt(this._def),innerType:this,catchValue:t,typeName:lt.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return zd.create(this,e)}readonly(){return ld.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const LV=/^c[^\s-]{8,}$/i,kV=/^[0-9a-z]+$/,DV=/^[0-9A-HJKMNP-TV-Z]{26}$/i,OV=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,UV=/^[a-z0-9_-]{21}$/i,FV=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,HV=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,zV=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,GV="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let _g;const VV=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,WV=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,jV=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,qV=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,$V=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,XV=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,UM="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",KV=new RegExp(`^${UM}$`);function FM(n){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`),e}function YV(n){return new RegExp(`^${FM(n)}$`)}function HM(n){let e=`${UM}T${FM(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function QV(n,e){return!!((e==="v4"||!e)&&VV.test(n)||(e==="v6"||!e)&&jV.test(n))}function ZV(n,e){if(!FV.test(n))return!1;try{const[t]=n.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function JV(n,e){return!!((e==="v4"||!e)&&WV.test(n)||(e==="v6"||!e)&&qV.test(n))}class Zi extends St{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ge.string){const s=this._getOrReturnCtx(e);return Oe(s,{code:ye.invalid_type,expected:Ge.string,received:s.parsedType}),dt}const r=new br;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Oe(i,{code:ye.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Oe(i,{code:ye.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?Oe(i,{code:ye.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Oe(i,{code:ye.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")zV.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"email",code:ye.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")_g||(_g=new RegExp(GV,"u")),_g.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"emoji",code:ye.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")OV.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"uuid",code:ye.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")UV.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"nanoid",code:ye.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")LV.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"cuid",code:ye.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")kV.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"cuid2",code:ye.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")DV.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"ulid",code:ye.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Oe(i,{validation:"url",code:ye.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"regex",code:ye.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Oe(i,{code:ye.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Oe(i,{code:ye.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Oe(i,{code:ye.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?HM(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{code:ye.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?KV.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{code:ye.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?YV(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{code:ye.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?HV.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"duration",code:ye.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?QV(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"ip",code:ye.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?ZV(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"jwt",code:ye.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?JV(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"cidr",code:ye.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?$V.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"base64",code:ye.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?XV.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"base64url",code:ye.invalid_string,message:s.message}),r.dirty()):jt.assertNever(s);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(i=>e.test(i),{validation:t,code:ye.invalid_string,...Xe.errToObj(r)})}_addCheck(e){return new Zi({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Xe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Xe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Xe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Xe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Xe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Xe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Xe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Xe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Xe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Xe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Xe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Xe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Xe.errToObj(e)})}datetime(e){var t,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...Xe.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Xe.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Xe.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Xe.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Xe.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Xe.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Xe.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Xe.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Xe.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Xe.errToObj(t)})}nonempty(e){return this.min(1,Xe.errToObj(e))}trim(){return new Zi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Zi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Zi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Zi.create=n=>{var e;return new Zi({checks:[],typeName:lt.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...xt(n)})};function eW(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=t>r?t:r,s=parseInt(n.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class Ta extends St{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ge.number){const s=this._getOrReturnCtx(e);return Oe(s,{code:ye.invalid_type,expected:Ge.number,received:s.parsedType}),dt}let r;const i=new br;for(const s of this._def.checks)s.kind==="int"?jt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Oe(r,{code:ye.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Oe(r,{code:ye.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Oe(r,{code:ye.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?eW(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),Oe(r,{code:ye.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Oe(r,{code:ye.not_finite,message:s.message}),i.dirty()):jt.assertNever(s);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Xe.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Xe.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Xe.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Xe.toString(t))}setLimit(e,t,r,i){return new Ta({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Xe.toString(i)}]})}_addCheck(e){return new Ta({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Xe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Xe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Xe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Xe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Xe.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Xe.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Xe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Xe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Xe.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&jt.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ta.create=n=>new Ta({checks:[],typeName:lt.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...xt(n)});class Ma extends St{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ge.bigint)return this._getInvalidInput(e);let r;const i=new br;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Oe(r,{code:ye.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Oe(r,{code:ye.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Oe(r,{code:ye.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):jt.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Oe(t,{code:ye.invalid_type,expected:Ge.bigint,received:t.parsedType}),dt}gte(e,t){return this.setLimit("min",e,!0,Xe.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Xe.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Xe.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Xe.toString(t))}setLimit(e,t,r,i){return new Ma({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Xe.toString(i)}]})}_addCheck(e){return new Ma({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Xe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Xe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Xe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Xe.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Xe.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ma.create=n=>{var e;return new Ma({checks:[],typeName:lt.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...xt(n)})};class Zf extends St{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ge.boolean){const r=this._getOrReturnCtx(e);return Oe(r,{code:ye.invalid_type,expected:Ge.boolean,received:r.parsedType}),dt}return Nr(e.data)}}Zf.create=n=>new Zf({typeName:lt.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...xt(n)});class Tc extends St{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ge.date){const s=this._getOrReturnCtx(e);return Oe(s,{code:ye.invalid_type,expected:Ge.date,received:s.parsedType}),dt}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Oe(s,{code:ye.invalid_date}),dt}const r=new br;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Oe(i,{code:ye.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Oe(i,{code:ye.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):jt.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Tc({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Xe.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Xe.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Tc.create=n=>new Tc({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:lt.ZodDate,...xt(n)});class Yp extends St{_parse(e){if(this._getType(e)!==Ge.symbol){const r=this._getOrReturnCtx(e);return Oe(r,{code:ye.invalid_type,expected:Ge.symbol,received:r.parsedType}),dt}return Nr(e.data)}}Yp.create=n=>new Yp({typeName:lt.ZodSymbol,...xt(n)});class Jf extends St{_parse(e){if(this._getType(e)!==Ge.undefined){const r=this._getOrReturnCtx(e);return Oe(r,{code:ye.invalid_type,expected:Ge.undefined,received:r.parsedType}),dt}return Nr(e.data)}}Jf.create=n=>new Jf({typeName:lt.ZodUndefined,...xt(n)});class ed extends St{_parse(e){if(this._getType(e)!==Ge.null){const r=this._getOrReturnCtx(e);return Oe(r,{code:ye.invalid_type,expected:Ge.null,received:r.parsedType}),dt}return Nr(e.data)}}ed.create=n=>new ed({typeName:lt.ZodNull,...xt(n)});class du extends St{constructor(){super(...arguments),this._any=!0}_parse(e){return Nr(e.data)}}du.create=n=>new du({typeName:lt.ZodAny,...xt(n)});class dc extends St{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Nr(e.data)}}dc.create=n=>new dc({typeName:lt.ZodUnknown,...xt(n)});class Do extends St{_parse(e){const t=this._getOrReturnCtx(e);return Oe(t,{code:ye.invalid_type,expected:Ge.never,received:t.parsedType}),dt}}Do.create=n=>new Do({typeName:lt.ZodNever,...xt(n)});class Qp extends St{_parse(e){if(this._getType(e)!==Ge.undefined){const r=this._getOrReturnCtx(e);return Oe(r,{code:ye.invalid_type,expected:Ge.void,received:r.parsedType}),dt}return Nr(e.data)}}Qp.create=n=>new Qp({typeName:lt.ZodVoid,...xt(n)});class ts extends St{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),i=this._def;if(t.parsedType!==Ge.array)return Oe(t,{code:ye.invalid_type,expected:Ge.array,received:t.parsedType}),dt;if(i.exactLength!==null){const o=t.data.length>i.exactLength.value,a=t.data.length<i.exactLength.value;(o||a)&&(Oe(t,{code:o?ye.too_big:ye.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(Oe(t,{code:ye.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(Oe(t,{code:ye.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>i.type._parseAsync(new Vs(t,o,t.path,a)))).then(o=>br.mergeArray(r,o));const s=[...t.data].map((o,a)=>i.type._parseSync(new Vs(t,o,t.path,a)));return br.mergeArray(r,s)}get element(){return this._def.type}min(e,t){return new ts({...this._def,minLength:{value:e,message:Xe.toString(t)}})}max(e,t){return new ts({...this._def,maxLength:{value:e,message:Xe.toString(t)}})}length(e,t){return new ts({...this._def,exactLength:{value:e,message:Xe.toString(t)}})}nonempty(e){return this.min(1,e)}}ts.create=(n,e)=>new ts({type:n,minLength:null,maxLength:null,exactLength:null,typeName:lt.ZodArray,...xt(e)});function xl(n){if(n instanceof Cn){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=Us.create(xl(r))}return new Cn({...n._def,shape:()=>e})}else return n instanceof ts?new ts({...n._def,type:xl(n.element)}):n instanceof Us?Us.create(xl(n.unwrap())):n instanceof Ia?Ia.create(xl(n.unwrap())):n instanceof Ws?Ws.create(n.items.map(e=>xl(e))):n}class Cn extends St{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=jt.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Ge.object){const l=this._getOrReturnCtx(e);return Oe(l,{code:ye.invalid_type,expected:Ge.object,received:l.parsedType}),dt}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Do&&this._def.unknownKeys==="strip"))for(const l in i.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=s[l],f=i.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Vs(i,f,i.path,l)),alwaysSet:l in i.data})}if(this._def.catchall instanceof Do){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(l==="strict")a.length>0&&(Oe(i,{code:ye.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const f=i.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Vs(i,f,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const f=await u.key,d=await u.value;l.push({key:f,value:d,alwaysSet:u.alwaysSet})}return l}).then(l=>br.mergeObjectSync(r,l)):br.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Xe.errToObj,new Cn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var i,s,o,a;const c=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,t,r).message)!==null&&o!==void 0?o:r.defaultError;return t.code==="unrecognized_keys"?{message:(a=Xe.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Cn({...this._def,unknownKeys:"strip"})}passthrough(){return new Cn({...this._def,unknownKeys:"passthrough"})}extend(e){return new Cn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Cn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:lt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Cn({...this._def,catchall:e})}pick(e){const t={};return jt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new Cn({...this._def,shape:()=>t})}omit(e){const t={};return jt.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new Cn({...this._def,shape:()=>t})}deepPartial(){return xl(this)}partial(e){const t={};return jt.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?t[r]=i:t[r]=i.optional()}),new Cn({...this._def,shape:()=>t})}required(e){const t={};return jt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof Us;)s=s._def.innerType;t[r]=s}}),new Cn({...this._def,shape:()=>t})}keyof(){return zM(jt.objectKeys(this.shape))}}Cn.create=(n,e)=>new Cn({shape:()=>n,unknownKeys:"strip",catchall:Do.create(),typeName:lt.ZodObject,...xt(e)});Cn.strictCreate=(n,e)=>new Cn({shape:()=>n,unknownKeys:"strict",catchall:Do.create(),typeName:lt.ZodObject,...xt(e)});Cn.lazycreate=(n,e)=>new Cn({shape:n,unknownKeys:"strip",catchall:Do.create(),typeName:lt.ZodObject,...xt(e)});class td extends St{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new ui(a.ctx.common.issues));return Oe(t,{code:ye.invalid_union,unionErrors:o}),dt}if(t.common.async)return Promise.all(r.map(async s=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await s._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of r){const l={...t,common:{...t.common,issues:[]},parent:null},u=c._parseSync({data:t.data,path:t.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(c=>new ui(c));return Oe(t,{code:ye.invalid_union,unionErrors:a}),dt}}get options(){return this._def.options}}td.create=(n,e)=>new td({options:n,typeName:lt.ZodUnion,...xt(e)});const uo=n=>n instanceof id?uo(n.schema):n instanceof rs?uo(n.innerType()):n instanceof sd?[n.value]:n instanceof Ra?n.options:n instanceof od?jt.objectValues(n.enum):n instanceof ad?uo(n._def.innerType):n instanceof Jf?[void 0]:n instanceof ed?[null]:n instanceof Us?[void 0,...uo(n.unwrap())]:n instanceof Ia?[null,...uo(n.unwrap())]:n instanceof gb||n instanceof ld?uo(n.unwrap()):n instanceof cd?uo(n._def.innerType):[];class Ym extends St{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ge.object)return Oe(t,{code:ye.invalid_type,expected:Ge.object,received:t.parsedType}),dt;const r=this.discriminator,i=t.data[r],s=this.optionsMap.get(i);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(Oe(t,{code:ye.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),dt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const i=new Map;for(const s of t){const o=uo(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new Ym({typeName:lt.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...xt(r)})}}function Ry(n,e){const t=go(n),r=go(e);if(n===e)return{valid:!0,data:n};if(t===Ge.object&&r===Ge.object){const i=jt.objectKeys(e),s=jt.objectKeys(n).filter(a=>i.indexOf(a)!==-1),o={...n,...e};for(const a of s){const c=Ry(n[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(t===Ge.array&&r===Ge.array){if(n.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<n.length;s++){const o=n[s],a=e[s],c=Ry(o,a);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return t===Ge.date&&r===Ge.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class nd extends St{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(Ty(s)||Ty(o))return dt;const a=Ry(s.value,o.value);return a.valid?((My(s)||My(o))&&t.dirty(),{status:t.value,value:a.data}):(Oe(r,{code:ye.invalid_intersection_types}),dt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}nd.create=(n,e,t)=>new nd({left:n,right:e,typeName:lt.ZodIntersection,...xt(t)});class Ws extends St{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ge.array)return Oe(r,{code:ye.invalid_type,expected:Ge.array,received:r.parsedType}),dt;if(r.data.length<this._def.items.length)return Oe(r,{code:ye.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),dt;!this._def.rest&&r.data.length>this._def.items.length&&(Oe(r,{code:ye.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Vs(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>br.mergeArray(t,o)):br.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new Ws({...this._def,rest:e})}}Ws.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ws({items:n,typeName:lt.ZodTuple,rest:null,...xt(e)})};class rd extends St{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ge.object)return Oe(r,{code:ye.invalid_type,expected:Ge.object,received:r.parsedType}),dt;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new Vs(r,a,r.path,a)),value:o._parse(new Vs(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?br.mergeObjectAsync(t,i):br.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof St?new rd({keyType:e,valueType:t,typeName:lt.ZodRecord,...xt(r)}):new rd({keyType:Zi.create(),valueType:e,typeName:lt.ZodRecord,...xt(t)})}}class Zp extends St{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ge.map)return Oe(r,{code:ye.invalid_type,expected:Ge.map,received:r.parsedType}),dt;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:i._parse(new Vs(r,a,r.path,[l,"key"])),value:s._parse(new Vs(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return dt;(l.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(l.value,u.value)}return{status:t.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return dt;(l.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(l.value,u.value)}return{status:t.value,value:a}}}}Zp.create=(n,e,t)=>new Zp({valueType:e,keyType:n,typeName:lt.ZodMap,...xt(t)});class Mc extends St{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ge.set)return Oe(r,{code:ye.invalid_type,expected:Ge.set,received:r.parsedType}),dt;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Oe(r,{code:ye.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Oe(r,{code:ye.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const s=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return dt;u.status==="dirty"&&t.dirty(),l.add(u.value)}return{status:t.value,value:l}}const a=[...r.data.values()].map((c,l)=>s._parse(new Vs(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,t){return new Mc({...this._def,minSize:{value:e,message:Xe.toString(t)}})}max(e,t){return new Mc({...this._def,maxSize:{value:e,message:Xe.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Mc.create=(n,e)=>new Mc({valueType:n,minSize:null,maxSize:null,typeName:lt.ZodSet,...xt(e)});class zl extends St{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ge.function)return Oe(t,{code:ye.invalid_type,expected:Ge.function,received:t.parsedType}),dt;function r(a,c){return Xp({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,$p(),fu].filter(l=>!!l),issueData:{code:ye.invalid_arguments,argumentsError:c}})}function i(a,c){return Xp({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,$p(),fu].filter(l=>!!l),issueData:{code:ye.invalid_return_type,returnTypeError:c}})}const s={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof hu){const a=this;return Nr(async function(...c){const l=new ui([]),u=await a._def.args.parseAsync(c,s).catch(p=>{throw l.addIssue(r(c,p)),l}),f=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(f,s).catch(p=>{throw l.addIssue(i(f,p)),l})})}else{const a=this;return Nr(function(...c){const l=a._def.args.safeParse(c,s);if(!l.success)throw new ui([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),f=a._def.returns.safeParse(u,s);if(!f.success)throw new ui([i(u,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new zl({...this._def,args:Ws.create(e).rest(dc.create())})}returns(e){return new zl({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new zl({args:e||Ws.create([]).rest(dc.create()),returns:t||dc.create(),typeName:lt.ZodFunction,...xt(r)})}}class id extends St{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}id.create=(n,e)=>new id({getter:n,typeName:lt.ZodLazy,...xt(e)});class sd extends St{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Oe(t,{received:t.data,code:ye.invalid_literal,expected:this._def.value}),dt}return{status:"valid",value:e.data}}get value(){return this._def.value}}sd.create=(n,e)=>new sd({value:n,typeName:lt.ZodLiteral,...xt(e)});function zM(n,e){return new Ra({values:n,typeName:lt.ZodEnum,...xt(e)})}class Ra extends St{constructor(){super(...arguments),wf.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return Oe(t,{expected:jt.joinValues(r),received:t.parsedType,code:ye.invalid_type}),dt}if(Kp(this,wf,"f")||OM(this,wf,new Set(this._def.values),"f"),!Kp(this,wf,"f").has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return Oe(t,{received:t.data,code:ye.invalid_enum_value,options:r}),dt}return Nr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ra.create(e,{...this._def,...t})}exclude(e,t=this._def){return Ra.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}wf=new WeakMap;Ra.create=zM;class od extends St{constructor(){super(...arguments),Af.set(this,void 0)}_parse(e){const t=jt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ge.string&&r.parsedType!==Ge.number){const i=jt.objectValues(t);return Oe(r,{expected:jt.joinValues(i),received:r.parsedType,code:ye.invalid_type}),dt}if(Kp(this,Af,"f")||OM(this,Af,new Set(jt.getValidEnumValues(this._def.values)),"f"),!Kp(this,Af,"f").has(e.data)){const i=jt.objectValues(t);return Oe(r,{received:r.data,code:ye.invalid_enum_value,options:i}),dt}return Nr(e.data)}get enum(){return this._def.values}}Af=new WeakMap;od.create=(n,e)=>new od({values:n,typeName:lt.ZodNativeEnum,...xt(e)});class hu extends St{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ge.promise&&t.common.async===!1)return Oe(t,{code:ye.invalid_type,expected:Ge.promise,received:t.parsedType}),dt;const r=t.parsedType===Ge.promise?t.data:Promise.resolve(t.data);return Nr(r.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}hu.create=(n,e)=>new hu({type:n,typeName:lt.ZodPromise,...xt(e)});class rs extends St{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===lt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{Oe(r,o),o.fatal?t.abort():t.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(t.value==="aborted")return dt;const c=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return c.status==="aborted"?dt:c.status==="dirty"||t.value==="dirty"?Cl(c.value):c});{if(t.value==="aborted")return dt;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?dt:a.status==="dirty"||t.value==="dirty"?Cl(a.value):a}}if(i.type==="refinement"){const o=a=>{const c=i.refinement(a,s);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?dt:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?dt:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Sc(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Sc(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:t.value,value:a})):o);jt.assertNever(i)}}rs.create=(n,e,t)=>new rs({schema:n,typeName:lt.ZodEffects,effect:e,...xt(t)});rs.createWithPreprocess=(n,e,t)=>new rs({schema:e,effect:{type:"preprocess",transform:n},typeName:lt.ZodEffects,...xt(t)});class Us extends St{_parse(e){return this._getType(e)===Ge.undefined?Nr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Us.create=(n,e)=>new Us({innerType:n,typeName:lt.ZodOptional,...xt(e)});class Ia extends St{_parse(e){return this._getType(e)===Ge.null?Nr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ia.create=(n,e)=>new Ia({innerType:n,typeName:lt.ZodNullable,...xt(e)});class ad extends St{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===Ge.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ad.create=(n,e)=>new ad({innerType:n,typeName:lt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...xt(e)});class cd extends St{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Qf(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ui(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ui(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}cd.create=(n,e)=>new cd({innerType:n,typeName:lt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...xt(e)});class Jp extends St{_parse(e){if(this._getType(e)!==Ge.nan){const r=this._getOrReturnCtx(e);return Oe(r,{code:ye.invalid_type,expected:Ge.nan,received:r.parsedType}),dt}return{status:"valid",value:e.data}}}Jp.create=n=>new Jp({typeName:lt.ZodNaN,...xt(n)});const tW=Symbol("zod_brand");class gb extends St{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class zd extends St{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?dt:s.status==="dirty"?(t.dirty(),Cl(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?dt:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,t){return new zd({in:e,out:t,typeName:lt.ZodPipeline})}}class ld extends St{_parse(e){const t=this._def.innerType._parse(e),r=i=>(Sc(i)&&(i.value=Object.freeze(i.value)),i);return Qf(t)?t.then(i=>r(i)):r(t)}unwrap(){return this._def.innerType}}ld.create=(n,e)=>new ld({innerType:n,typeName:lt.ZodReadonly,...xt(e)});function GM(n,e={},t){return n?du.create().superRefine((r,i)=>{var s,o;if(!n(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(s=a.fatal)!==null&&s!==void 0?s:t)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...l,fatal:c})}}):du.create()}const nW={object:Cn.lazycreate};var lt;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(lt||(lt={}));const rW=(n,e={message:`Input not instance of ${n.name}`})=>GM(t=>t instanceof n,e),VM=Zi.create,WM=Ta.create,iW=Jp.create,sW=Ma.create,jM=Zf.create,oW=Tc.create,aW=Yp.create,cW=Jf.create,lW=ed.create,uW=du.create,fW=dc.create,dW=Do.create,hW=Qp.create,pW=ts.create,mW=Cn.create,gW=Cn.strictCreate,vW=td.create,yW=Ym.create,_W=nd.create,bW=Ws.create,xW=rd.create,wW=Zp.create,AW=Mc.create,EW=zl.create,SW=id.create,TW=sd.create,MW=Ra.create,RW=od.create,IW=hu.create,nE=rs.create,CW=Us.create,PW=Ia.create,NW=rs.createWithPreprocess,BW=zd.create,LW=()=>VM().optional(),kW=()=>WM().optional(),DW=()=>jM().optional(),OW={string:n=>Zi.create({...n,coerce:!0}),number:n=>Ta.create({...n,coerce:!0}),boolean:n=>Zf.create({...n,coerce:!0}),bigint:n=>Ma.create({...n,coerce:!0}),date:n=>Tc.create({...n,coerce:!0})},UW=dt;var gs=Object.freeze({__proto__:null,defaultErrorMap:fu,setErrorMap:NV,getErrorMap:$p,makeIssue:Xp,EMPTY_PATH:BV,addIssueToContext:Oe,ParseStatus:br,INVALID:dt,DIRTY:Cl,OK:Nr,isAborted:Ty,isDirty:My,isValid:Sc,isAsync:Qf,get util(){return jt},get objectUtil(){return Sy},ZodParsedType:Ge,getParsedType:go,ZodType:St,datetimeRegex:HM,ZodString:Zi,ZodNumber:Ta,ZodBigInt:Ma,ZodBoolean:Zf,ZodDate:Tc,ZodSymbol:Yp,ZodUndefined:Jf,ZodNull:ed,ZodAny:du,ZodUnknown:dc,ZodNever:Do,ZodVoid:Qp,ZodArray:ts,ZodObject:Cn,ZodUnion:td,ZodDiscriminatedUnion:Ym,ZodIntersection:nd,ZodTuple:Ws,ZodRecord:rd,ZodMap:Zp,ZodSet:Mc,ZodFunction:zl,ZodLazy:id,ZodLiteral:sd,ZodEnum:Ra,ZodNativeEnum:od,ZodPromise:hu,ZodEffects:rs,ZodTransformer:rs,ZodOptional:Us,ZodNullable:Ia,ZodDefault:ad,ZodCatch:cd,ZodNaN:Jp,BRAND:tW,ZodBranded:gb,ZodPipeline:zd,ZodReadonly:ld,custom:GM,Schema:St,ZodSchema:St,late:nW,get ZodFirstPartyTypeKind(){return lt},coerce:OW,any:uW,array:pW,bigint:sW,boolean:jM,date:oW,discriminatedUnion:yW,effect:nE,enum:MW,function:EW,instanceof:rW,intersection:_W,lazy:SW,literal:TW,map:wW,nan:iW,nativeEnum:RW,never:dW,null:lW,nullable:PW,number:WM,object:mW,oboolean:DW,onumber:kW,optional:CW,ostring:LW,pipeline:BW,preprocess:NW,promise:IW,record:xW,set:AW,strictObject:gW,string:VM,symbol:aW,transformer:nE,tuple:bW,undefined:cW,union:vW,unknown:fW,void:hW,NEVER:UW,ZodIssueCode:ye,quotelessJson:PV,ZodError:ui});const FW=n=>n.message?n.message:"unspecified error";class pu extends ht{constructor(e){super(),this.code=W9,this.errors=e,super.message=`Web3 validator found ${e.length} error[s]:
${this._compileErrors().join(`
`)}`}_compileErrors(){return this.errors.map(FW)}}const HW=["bool","int","uint","bytes","string","address","tuple"],qM=n=>typeof n=="object"&&"type"in n&&"name"in n,vb=n=>typeof n=="string",en=n=>typeof n=="string"&&/^((-)?0x[0-9a-f]+|(0x))$/i.test(n);function $M(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof e<"u"&&e>0&&n.length!==2+2*e)}const em=n=>typeof n=="number"||typeof n=="bigint"||typeof n=="string"&&/^((-0x|0x|-)?[0-9a-f]+|(0x))$/i.test(n);function yb(n){if(typeof n!="string")throw new Error(`[isHexPrefixed] input must be type 'string', received type ${typeof n}`);return n.startsWith("0x")}const _b=function(n){for(const[e,t]of Object.entries(n))if(t!==void 0&&t.length>0&&t[0]===0)throw new Error(`${e} cannot have leading zeroes, received: ${t.toString()}`)},zW=["hex","number","blockNumber","blockNumberOrTag","filter","bloom"],Vc=n=>{let e=n.replace(/ /,""),t,r=!1,i=[];if(n.includes("[")&&(e=e.slice(0,e.indexOf("[")),i=[...n.matchAll(/(?:\[(\d*)\])/g)].map(s=>parseInt(s[1],10)).map(s=>Number.isNaN(s)?-1:s),r=i.length>0),HW.includes(e))return{baseType:e,isArray:r,baseTypeSize:t,arraySizes:i};if(e.startsWith("int"))t=parseInt(e.substring(3),10),e="int";else if(e.startsWith("uint"))t=parseInt(n.substring(4),10),e="uint";else if(e.startsWith("bytes"))t=parseInt(e.substring(5),10),e="bytes";else return{baseType:void 0,isArray:!1,baseTypeSize:void 0,arraySizes:i};return{baseType:e,isArray:r,baseTypeSize:t,arraySizes:i}},bg=(n,e={})=>{if(Object.keys(e).includes("type"))throw new pu([{keyword:"eth",message:'Either "eth" or "type" can be presented in schema',params:{eth:n},instancePath:"",schemaPath:""}]);const{baseType:r,baseTypeSize:i}=Vc(n);if(!r&&!zW.includes(n))throw new pu([{keyword:"eth",message:`Eth data type "${n}" is not valid`,params:{eth:n},instancePath:"",schemaPath:""}]);if(r){if(r==="tuple")throw new Error('"tuple" type is not implemented directly.');return{format:`${r}${i??""}`,required:!0}}return n?{format:n,required:!0}:{}},tm=(n,e="/0")=>{const t={type:"array",items:[],maxItems:n.length,minItems:n.length};for(const[r,i]of n.entries()){let s,o,a=[];qM(i)?(s=i.type,o=i.name||`${e}/${r}`,a=i.components):typeof i=="string"?(s=i,o=`${e}/${r}`):Array.isArray(i)&&(i[0]&&typeof i[0]=="string"&&i[0].startsWith("tuple")&&!Array.isArray(i[0])&&i[1]&&Array.isArray(i[1])?(s=i[0],o=`${e}/${r}`,a=i[1]):(s="tuple",o=`${e}/${r}`,a=i));const{baseType:c,isArray:l,arraySizes:u}=Vc(s);let f,d=t;for(let p=u.length-1;p>0;p-=1)f={type:"array",$id:o,items:[],maxItems:u[p],minItems:u[p]},u[p]<0&&(delete f.maxItems,delete f.minItems),Array.isArray(d.items)?d.items.length===0?d.items=[f]:d.items.push(f):d.items=[d.items,f],d=f;if(c==="tuple"&&!l){const p=tm(a,o);p.$id=o,d.items.push(p)}else if(c==="tuple"&&l){const p=u[0],v=Object.assign({type:"array",$id:o,items:tm(a,o)},p>=0&&{minItems:p,maxItems:p});d.items.push(v)}else if(l){const p=u[0],v=Object.assign({type:"array",$id:o,items:bg(s)},p>=0&&{minItems:p,maxItems:p});d.items.push(v)}else Array.isArray(d.items)?d.items.push(Object.assign({$id:o},bg(s))):d.items.push(Object.assign({$id:o},bg(s)));d=t}return t},bb=n=>tm(n),xb=(n,e)=>e===1?n:xb(n[0],e-1),kf=(n,e,t)=>{const r=[];for(const[i,s]of n.entries()){let o,a,c=[];qM(s)?(o=s.type,a=s.name,c=s.components):typeof s=="string"?o=s:Array.isArray(s)&&(s[1]&&Array.isArray(s[1])?(o=s[0],c=s[1]):(o="tuple",c=s));const{baseType:l,isArray:u,arraySizes:f}=Vc(o),d=Array.isArray(e)?e[i]:e[a];if(l==="tuple"&&!u)r.push(kf(c,d,t));else if(l==="tuple"&&u){const p=[];for(const v of d)if(f.length>1){const m=xb(v,f.length-1),y=[];for(const h of m)y.push(kf(c,h,t));p.push(y)}else p.push(kf(c,v,t));r.push(p)}else r.push(d)}return t=t??[],t.push(...r),t},XM=n=>{if(n>=48&&n<=57)return n-48;if(n>=65&&n<=70)return n-55;if(n>=97&&n<=102)return n-87;throw new Error(`Invalid code point: ${n}`)},Qm=n=>{if(!en(n))throw new Error("Invalid hex string");const[e,t]=n.startsWith("-")?[!0,n.slice(1)]:[!1,n],r=BigInt(t);return r>Number.MAX_SAFE_INTEGER?e?-r:r:r<Number.MIN_SAFE_INTEGER?r:e?-1*Number(r):Number(r)},Zm=n=>{if((typeof n=="number"||typeof n=="bigint")&&n<0)return`-0x${n.toString(16).slice(1)}`;if((typeof n=="number"||typeof n=="bigint")&&n>=0)return`0x${n.toString(16)}`;if(typeof n=="string"&&en(n)){const[e,t]=n.startsWith("-")?[!0,n.slice(1)]:[!1,n],r=t.split(/^(-)?0(x|X)/).slice(-1)[0];return`${e?"-":""}0x${r.replace(/^0+/,"").toLowerCase()}`}if(typeof n=="string"&&!en(n))return Zm(BigInt(n));throw new ab(n)},nm=(n,e,t="0")=>{if(typeof n=="string"&&!en(n))return n.padStart(e,t);const r=typeof n=="string"&&en(n)?n:Zm(n),[i,s]=r.startsWith("-")?["-0x",r.slice(3)]:["0x",r.slice(2)];return`${i}${s.padStart(e,t)}`};function Vo(n){let e="0x";for(const t of n){const r=t.toString(16);e+=r.length===1?`0${r}`:r}return e}const so={zero:48,nine:57,A:65,F:70,a:97,f:102};function rE(n){if(n>=so.zero&&n<=so.nine)return n-so.zero;if(n>=so.A&&n<=so.F)return n-(so.A-10);if(n>=so.a&&n<=so.f)return n-(so.a-10)}function Wc(n){let e=0;if(n.startsWith("0")&&(n[1]==="x"||n[1]==="X")&&(e=2),n.length%2!==0)throw new Hl(`hex string has odd length: ${n}`);const t=(n.length-e)/2,r=new Uint8Array(t);for(let i=0,s=e;i<t;i+=1){const o=rE(n.charCodeAt(s++)),a=rE(n.charCodeAt(s++));if(o===void 0||a===void 0)throw new Hl(`Invalid byte sequence ("${n[s-2]}${n[s-1]}" in "${n}").`);r[i]=o*16+a}return r}function Jm(n){var e;return!(n instanceof Uint8Array)&&((e=n==null?void 0:n.constructor)===null||e===void 0?void 0:e.name)==="Uint8Array"?Uint8Array.from(n):n}const KM=Object.freeze(Object.defineProperty({__proto__:null,abiSchemaToJsonSchema:tm,codePointToInt:XM,ensureIfUint8Array:Jm,ethAbiToJsonSchema:bb,fetchArrayElement:xb,hexToNumber:Qm,hexToUint8Array:Wc,numberToHex:Zm,padLeft:nm,parseBaseType:Vc,transformJsonDataToAbiFormat:kf,uint8ArrayToHexString:Vo},Symbol.toStringTag,{value:"Module"})),Iy=n=>{var e,t;return n instanceof Uint8Array||((e=n==null?void 0:n.constructor)===null||e===void 0?void 0:e.name)==="Uint8Array"||((t=n==null?void 0:n.constructor)===null||t===void 0?void 0:t.name)==="Buffer"},La=(n,e={abiType:"bytes"})=>{if(typeof n!="string"&&!Array.isArray(n)&&!Iy(n)||typeof n=="string"&&en(n)&&n.startsWith("-")||typeof n=="string"&&!en(n))return!1;let t;if(typeof n=="string"){if(n.length%2!==0)return!1;t=Wc(n)}else if(Array.isArray(n)){if(n.some(r=>r<0||r>255||!Number.isInteger(r)))return!1;t=new Uint8Array(n)}else t=n;if(e!=null&&e.abiType){const{baseTypeSize:r}=Vc(e.abiType);return r?t.length===r:!0}return e!=null&&e.size?t.length===(e==null?void 0:e.size):!0},YM=n=>{if(!/^(0x)?[0-9a-f]{40}$/i.test(n))return!1;const e=n.slice(2),t=lu(e.toLowerCase()),r=Vo(Tr(Jm(t))).slice(2);for(let i=0;i<40;i+=1)if(parseInt(r[i],16)>7&&e[i].toUpperCase()!==e[i]||parseInt(r[i],16)<=7&&e[i].toLowerCase()!==e[i])return!1;return!0},fi=(n,e=!0)=>{if(typeof n!="string"&&!Iy(n))return!1;let t;return Iy(n)?t=Vo(n):typeof n=="string"&&!en(n)?t=n.toLowerCase().startsWith("0x")?n:`0x${n}`:t=n,/^(0x)?[0-9a-f]{40}$/i.test(t)?/^(0x|0X)?[0-9a-f]{40}$/.test(t)||/^(0x|0X)?[0-9A-F]{40}$/.test(t)?!0:e?YM(t):!0:!1},Rc=(n,e)=>{if(e===BigInt(0))return BigInt(1);let t=n;for(let r=1;r<e;r+=1)t*=n;return t},Oo=(n,e={abiType:"uint"})=>{if(!["number","string","bigint"].includes(typeof n)||typeof n=="string"&&n.length===0)return!1;let t;if(e!=null&&e.abiType){const{baseTypeSize:i}=Vc(e.abiType);i&&(t=i)}else e.bitSize&&(t=e.bitSize);const r=Rc(BigInt(2),BigInt(t??256))-BigInt(1);try{const i=typeof n=="string"&&en(n)?BigInt(Qm(n)):BigInt(n);return i>=0&&i<=r}catch{return!1}},ud=(n,e={abiType:"int"})=>{if(!["number","string","bigint"].includes(typeof n)||typeof n=="number"&&n>Number.MAX_SAFE_INTEGER)return!1;let t;if(e!=null&&e.abiType){const{baseTypeSize:s,baseType:o}=Vc(e.abiType);if(o!=="int")return!1;s&&(t=s)}else e.bitSize&&(t=e.bitSize);const r=Rc(BigInt(2),BigInt((t??256)-1)),i=BigInt(-1)*Rc(BigInt(2),BigInt((t??256)-1));try{const s=typeof n=="string"&&en(n)?BigInt(Qm(n)):BigInt(n);return s>=i&&s<=r}catch{return!1}},QM=n=>!!(ud(n)||typeof n=="string"&&/[0-9.]/.test(n)&&n.indexOf(".")===n.lastIndexOf(".")||typeof n=="number"),ZM=n=>Oo(n),ir=n=>Object.values(bo).includes(n),Cy=n=>ir(n)||ZM(n),zu=n=>typeof n!="string"||!/^(0x)?[0-9a-f]{512}$/i.test(n)?!1:!!(/^(0x)?[0-9a-f]{512}$/.test(n)||/^(0x)?[0-9A-F]{512}$/.test(n)),e0=(n,e)=>{if(typeof e=="string"&&!en(e)||!zu(n))return!1;const t=typeof e=="string"?Wc(e):e,r=Vo(Tr(t)).slice(2);for(let i=0;i<12;i+=4){const s=(parseInt(r.slice(i,i+2),16)<<8)+parseInt(r.slice(i+2,i+4),16)&2047,o=XM(n.charCodeAt(n.length-1-Math.floor(s/4))),a=1<<s%4;if((o&a)!==a)return!1}return!0},GW=(n,e)=>{if(!zu(n)||!fi(e))return!1;const t=nm(e,64);return e0(n,t)},VW=(n,e)=>!zu(n)||!fi(e)?!1:e0(n,e),WW=n=>["number","string","boolean"].includes(typeof n)?typeof n=="boolean"?!0:typeof n=="string"&&!en(n)?n==="1"||n==="0":typeof n=="string"&&en(n)?n==="0x1"||n==="0x0":n===1||n===0:!1,le=n=>n==null,mu=n=>typeof n=="object"&&!le(n)&&!Array.isArray(n)&&!(n instanceof sb),rm=n=>typeof n!="string"||!/^(0x)?[0-9a-f]{64}$/i.test(n)?!1:!!(/^(0x)?[0-9a-f]{64}$/.test(n)||/^(0x)?[0-9A-F]{64}$/.test(n)),jW=(n,e)=>!zu(n)||!rm(e)?!1:e0(n,e),qW=n=>{const e=["fromBlock","toBlock","address","topics","blockHash"];if(le(n)||typeof n!="object"||!Object.keys(n).every(t=>e.includes(t))||!le(n.fromBlock)&&!Cy(n.fromBlock)||!le(n.toBlock)&&!Cy(n.toBlock))return!1;if(!le(n.address)){if(Array.isArray(n.address)){if(!n.address.every(t=>fi(t)))return!1}else if(!fi(n.address))return!1}return!(!le(n.topics)&&!n.topics.every(t=>le(t)?!0:Array.isArray(t)?t.every(r=>rm(r)):!!rm(t)))},Ic={address:n=>fi(n),bloom:n=>zu(n),blockNumber:n=>ZM(n),blockTag:n=>ir(n),blockNumberOrTag:n=>Cy(n),bool:n=>WW(n),bytes:n=>La(n),filter:n=>qW(n),hex:n=>en(n),uint:n=>Oo(n),int:n=>ud(n),number:n=>QM(n),string:n=>vb(n)};for(let n=8;n<=256;n+=8)Ic[`int${n}`]=e=>ud(e,{bitSize:n}),Ic[`uint${n}`]=e=>Oo(e,{bitSize:n});for(let n=1;n<=32;n+=1)Ic[`bytes${n}`]=e=>La(e,{size:n});Ic.bytes256=Ic.bytes;const Ef=n=>{if((!(n!=null&&n.type)||(n==null?void 0:n.type)==="object")&&(n!=null&&n.properties)){const e={};for(const t of Object.keys(n.properties)){const r=Ef(n.properties[t]);r&&(e[t]=r)}return Array.isArray(n.required)?gs.object(e).partial().required(n.required.reduce((t,r)=>Object.assign(Object.assign({},t),{[r]:!0}),{})):gs.object(e).partial()}if((n==null?void 0:n.type)==="array"&&(n!=null&&n.items)){if(Array.isArray(n.items)&&n.items.length>1&&n.maxItems!==void 0&&new Set(n.items.map(r=>r.$id)).size===n.items.length){const r=[];for(const i of n.items){const s=Ef(i);s&&r.push(s)}return gs.tuple(r)}const e=Array.isArray(n.items)?n.items[0]:n.items;let t=gs.array(Ef(e));return t=n.minItems!==void 0?t.min(n.minItems):t,t=n.maxItems!==void 0?t.max(n.maxItems):t,t}if(n.oneOf&&Array.isArray(n.oneOf))return gs.union(n.oneOf.map(e=>Ef(e)));if(n!=null&&n.format){if(!Ic[n.format])throw new Z7(n.format);return gs.any().refine(Ic[n.format],e=>({params:{value:e,format:n.format}}))}return n!=null&&n.type&&(n==null?void 0:n.type)!=="object"&&typeof gs[String(n.type)]=="function"?gs[String(n.type)]():gs.object({data:gs.any()}).partial()};class Pl{static factory(){return Pl.validatorInstance||(Pl.validatorInstance=new Pl),Pl.validatorInstance}validate(e,t,r){var i,s;const a=Ef(e).safeParse(t);if(!a.success){const c=this.convertErrors((s=(i=a.error)===null||i===void 0?void 0:i.issues)!==null&&s!==void 0?s:[]);if(c){if(r!=null&&r.silent)return c;throw new pu(c)}}}convertErrors(e){if(e&&Array.isArray(e)&&e.length>0)return e.map(t=>{var r;let i,s,o,a;a=t.path.join("/");const c=String(t.path[t.path.length-1]),l=t.path.join("/");if(t.code===ye.too_big)s="maxItems",a=`${l}/maxItems`,o={limit:t.maximum},i=`must NOT have more than ${t.maximum} items`;else if(t.code===ye.too_small)s="minItems",a=`${l}/minItems`,o={limit:t.minimum},i=`must NOT have fewer than ${t.minimum} items`;else if(t.code===ye.custom){const{value:u,format:f}=(r=t.params)!==null&&r!==void 0?r:{};typeof u>"u"?i=`value at "/${a}" is required`:i=`value "${typeof u=="object"?JSON.stringify(u):u}" at "/${a}" must pass "${f}" validation`,o={value:u}}return{keyword:s??c,instancePath:l?`/${l}`:"",schemaPath:a?`#${a}`:"#",params:o??{value:t.message},message:i??t.message}})}}class $W{constructor(){this._validator=Pl.factory()}validateJSONSchema(e,t,r){return this._validator.validate(e,t,r)}validate(e,t,r={silent:!1}){var i,s;const o=bb(e);if(!(Array.isArray(o.items)&&((i=o.items)===null||i===void 0?void 0:i.length)===0&&t.length===0)){if(Array.isArray(o.items)&&((s=o.items)===null||s===void 0?void 0:s.length)===0&&t.length!==0)throw new pu([{instancePath:"/0",schemaPath:"/",keyword:"required",message:"empty schema against data can not be validated",params:t}]);return this._validator.validate(o,t,r)}}}const nt=new $W;function ka(n){var e,t;return n instanceof Uint8Array||((e=n==null?void 0:n.constructor)===null||e===void 0?void 0:e.name)==="Uint8Array"||((t=n==null?void 0:n.constructor)===null||t===void 0?void 0:t.name)==="Buffer"}function Br(...n){const e=n.reduce((i,s)=>i+s.length,0),t=new Uint8Array(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return t}function t0(n,e){if(n===e)return!0;if(n.byteLength!==e.byteLength)return!1;for(let t=0;t<n.byteLength;t+=1)if(n[t]!==e[t])return!1;return!0}const n0={noether:BigInt(0),wei:BigInt(1),kwei:BigInt(1e3),Kwei:BigInt(1e3),babbage:BigInt(1e3),femtoether:BigInt(1e3),mwei:BigInt(1e6),Mwei:BigInt(1e6),lovelace:BigInt(1e6),picoether:BigInt(1e6),gwei:BigInt(1e9),Gwei:BigInt(1e9),shannon:BigInt(1e9),nanoether:BigInt(1e9),nano:BigInt(1e9),szabo:BigInt(1e12),microether:BigInt(1e12),micro:BigInt(1e12),finney:BigInt(1e15),milliether:BigInt(1e15),milli:BigInt(1e15),ether:BigInt("1000000000000000000"),kether:BigInt("1000000000000000000000"),grand:BigInt("1000000000000000000000"),mether:BigInt("1000000000000000000000000"),gether:BigInt("1000000000000000000000000000"),tether:BigInt("1000000000000000000000000000000")};const js=n=>{if(nt.validate(["bytes"],[n]),ka(n))return n;if(Array.isArray(n))return new Uint8Array(n);if(typeof n=="string")return Wc(n);throw new Hl(n)},{uint8ArrayToHexString:XW}=KM,Ct=n=>XW(js(n)),bn=n=>typeof n=="string"&&n.slice(0,2).toLowerCase()!=="0x"?js(`0x${n}`):js(n),Gd=n=>(nt.validate(["hex"],[n]),Qm(n)),KW=Gd,$n=(n,e)=>{typeof n!="bigint"&&nt.validate(["int"],[n]);let t=Zm(n);return e&&(!t.startsWith("-")&&t.length%2===1?t="0x0".concat(t.slice(2)):t.length%2===0&&t.startsWith("-")&&(t="-0x0".concat(t.slice(3)))),t},YW=$n,QW=n=>Gd(n).toString(),is=n=>{nt.validate(["string"],[n]);let e=n.replace(/^(?:\u0000)/,"");return e=e.replace(/(?:\u0000)$/,""),Ct(new TextEncoder().encode(e))},JM=is,ZW=is,r0=n=>kM(bn(n)),JW=n=>typeof n=="string"?r0(n):(nt.validate(["bytes"],[n]),kM(n)),wb=lu,ej=r0,e2=n=>{nt.validate(["string"],[n]);let e="";for(let t=0;t<n.length;t+=1){const r=n.charCodeAt(t).toString(16);e+=r.length%2!==0?`0${r}`:r}return`0x${e}`},tj=e2,t2=n=>new TextDecoder("ascii").decode(bn(n)),nj=t2,Uo=(n,e)=>{if(typeof n=="string"&&fi(n))return e?"address":`0x${n.toLowerCase().replace(/^0x/i,"")}`;if(typeof n=="boolean")return e?"bool":n?"0x01":"0x00";if(typeof n=="number")return e?n<0?"int256":"uint256":$n(n);if(typeof n=="bigint")return e?"bigint":$n(n);if(ka(n))return e?"bytes":Ct(n);if(typeof n=="object"&&n)return e?"string":is(JSON.stringify(n));if(typeof n=="string"){if(n.startsWith("-0x")||n.startsWith("-0X"))return e?"int256":$n(n);if(en(n))return e?"bytes":n;if(em(n)&&!ud(n)&&!Oo(n))return e?"bytes":`0x${n}`;if(em(n)&&!ud(n)&&Oo(n))return e?"uint":$n(n);if(!Number.isFinite(n))return e?"string":is(n)}throw new k7(n)},Wr=n=>{if(typeof n=="number")return n>1e20?BigInt(n):n;if(typeof n=="bigint")return n>=Number.MIN_SAFE_INTEGER&&n<=Number.MAX_SAFE_INTEGER?Number(n):n;if(typeof n=="string"&&en(n))return Gd(n);try{return Wr(BigInt(n))}catch{throw new ab(n)}},ic=n=>{if(typeof n=="number")return BigInt(n);if(typeof n=="bigint")return n;if(typeof n=="string"&&em(n))return n.startsWith("-")?-BigInt(n.substring(1)):BigInt(n);throw new ab(n)},rj=(n,e)=>{let t;if(typeof e=="string"){if(t=n0[e],!t)throw new bM(e)}else{if(e<0||!Number.isInteger(e))throw new xM(e);t=Rc(BigInt(10),BigInt(e))}const r=String(Wr(n)),i=t.toString().length-1;if(i<=0)return r.toString();const s=r.padStart(i,"0"),o=s.slice(0,-i),a=s.slice(-i).replace(/\.?0+$/,"");return o===""?a?`0.${a}`:"0":a===""?o:`${o}.${a}`.slice(0,o.length+i+1)},ij=(n,e)=>{nt.validate(["number"],[n]);let t;if(typeof e=="string"){if(t=n0[e],!t)throw new bM(e)}else{if(e<0||!Number.isInteger(e))throw new xM(e);t=Rc(BigInt(10),BigInt(e))}let r=n;typeof r=="number"&&(r<1e-15,r>1e20?r=BigInt(r):r=r.toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}));const[i,s]=String(typeof r=="string"&&!en(r)?r:Wr(r)).split(".").concat(""),a=BigInt(`${i}${s}`)*t,c=s.length;return c===0?a.toString():a.toString().slice(0,-c)},Ys=n=>{if(!fi(n,!1))throw new cb(n);const e=n.toLowerCase().replace(/^0x/i,""),t=Vo(Tr(Jm(wb(e))));if(le(t)||t==="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470")return"";let r="0x";const i=t.replace(/^0x/i,"");for(let s=0;s<e.length;s+=1)parseInt(i[s],16)>7?r+=e[s].toUpperCase():r+=e[s];return r},n2=n=>{if(typeof n=="boolean")return n;if(typeof n=="number"&&(n===0||n===1)||typeof n=="bigint"&&(n===BigInt(0)||n===BigInt(1)))return!!n;if(typeof n=="string"&&!en(n)&&(n==="1"||n==="0"||n==="false"||n==="true"))return n==="true"?!0:n==="false"?!1:!!Number(n);if(typeof n=="string"&&en(n)&&(n==="0x1"||n==="0x0"))return!!Wr(n);throw new lb(n)};class Ab extends CS{constructor(){super(...arguments),this.maxListeners=Number.MAX_SAFE_INTEGER}setMaxListeners(e){return this.maxListeners=e,this}getMaxListeners(){return this.maxListeners}}const sj=en,oj=em,aj=YM,cj=fi,lj=zu,uj=e0,fj=GW,dj=VW,hj=rm,pj=jW,mj=(n,e)=>{const t=typeof n=="string"&&ir(n),r=typeof e=="string"&&ir(e);if(n===e||(n==="earliest"||n===0)&&(e==="earliest"||e===0))return 0;if(n==="earliest")return-1;if(e==="earliest")return 1;if(t&&r){const o={[bo.EARLIEST]:1,[bo.FINALIZED]:2,[bo.SAFE]:3,[bo.LATEST]:4,[bo.PENDING]:5};return o[n]<o[e]?-1:1}if(t&&!r||!t&&r)throw new O7("Cannot compare blocktag with provided non-blocktag input.");const i=BigInt(n),s=BigInt(e);return i<s?-1:i===s?0:1},pa=n=>typeof n=="object"&&!le(n)&&Object.keys(n).length!==0&&["input","data","from","gas","gasPrice","gasLimit","address","jsonInterface","syncWithContext","dataInputFill"].some(e=>e in n),at=le,iE=n=>typeof n=="object"&&!le(n)&&!Array.isArray(n)&&!(n instanceof sb),Da=(n,...e)=>{if(!iE(n))return n;const t=Object.assign({},n);for(const r of e)for(const i in r)iE(r[i])?(t[i]||(t[i]={}),t[i]=Da(t[i],r[i])):!le(r[i])&&Object.hasOwnProperty.call(r,i)&&(Array.isArray(r[i])||r[i]instanceof sb?t[i]=r[i].slice(0):t[i]=r[i]);return t},gu=(n,e,t="0")=>typeof n=="string"?en(n)?nm(n,e,t):n.padStart(e,t):(nt.validate(["int"],[n]),nm(n,e,t)),r2=(n,e,t="0")=>{if(typeof n=="string"&&!en(n))return n.padEnd(e,t);const r=typeof n=="string"&&en(n)?n:$n(n),i=r.startsWith("-")?3:2;return nt.validate([r.startsWith("-")?"int":"uint"],[n]),r.padEnd(e+i,t)},i2=r2,fd=gu,s2=(n,e=64)=>{nt.validate(["int"],[n]);const t=Wr(n);if(t>=0)return gu(Uo(t),e);const r=Rc(BigInt(2),BigInt(e*4));if(-t>=r)throw new wM(`value: ${n}, nibbleWidth: ${e}`);const s=BigInt(t)+r;return gu($n(s),e)},gj=(n,e=64)=>{nt.validate(["int"],[n]);const t=Wr(n);if(t<0)return t;const r=Math.ceil(Math.log(Number(t))/Math.log(2));if(r>e*4)throw new wM(`value: "${n}", nibbleWidth: "${e}"`);if(e*4!==r)return t;const i=Rc(BigInt(2),BigInt(e)*BigInt(4));return Wr(BigInt(t)-i)},{parseBaseType:vj}=KM,vo=n=>typeof n=="object"&&!le(n)&&"number"in n&&"bytes"in n,yj=(n,e,t=[])=>{let r=Object.assign({},n),i;for(const s of e){if(r.oneOf&&i){const o=i,a=t.find(([c])=>c===o);a&&a[0]===i&&(r=r.oneOf[a[1]])}if(!r.properties&&!r.items)return;r.properties?r=r.properties[s]:r.items&&r.items.properties?r=r.items.properties[s]:r.items&&mu(r.items)?r=r.items:r.items&&Array.isArray(r.items)&&(r=r.items[parseInt(s,10)]),r&&s&&(i=s)}return r},dd=(n,e,t)=>{try{const{baseType:r,baseTypeSize:i}=vj(e);if(r==="int"||r==="uint")switch(t.number){case Ri.NUMBER:return Number(ic(n));case Ri.HEX:return $n(ic(n));case Ri.STR:return ic(n).toString();case Ri.BIGINT:return ic(n);default:throw new xy(`Invalid format: ${String(t.number)}`)}if(r==="bytes"){let s;switch(i?typeof n=="string"?s=gu(n,i*2):ka(n)&&(s=Br(new Uint8Array(i-n.length),n)):s=n,t.bytes){case ko.HEX:return Ct(js(s));case ko.UINT8ARRAY:return js(s);default:throw new xy(`Invalid format: ${String(t.bytes)}`)}}if(r==="string")return String(n)}catch{return n}return n},sE=({value:n,schemaProp:e,schema:t,object:r,key:i,dataPath:s,format:o,oneOfPath:a=[]})=>{var c,l;if(Array.isArray(n)){let u=e;if((e==null?void 0:e.oneOf)!==void 0&&e.oneOf.forEach((f,d)=>{var p,v;!Array.isArray(e==null?void 0:e.items)&&(typeof n[0]=="object"&&((p=f==null?void 0:f.items)===null||p===void 0?void 0:p.type)==="object"||typeof n[0]=="string"&&((v=f==null?void 0:f.items)===null||v===void 0?void 0:v.type)!=="object")&&(u=f,a.push([i,d]))}),le(u==null?void 0:u.items))return delete r[i],s.pop(),!0;if(mu(u.items)&&!le(u.items.format)){for(let f=0;f<n.length;f+=1)r[i][f]=dd(n[f],(c=u==null?void 0:u.items)===null||c===void 0?void 0:c.format,o);return s.pop(),!0}if(!Array.isArray(u==null?void 0:u.items)&&((l=u==null?void 0:u.items)===null||l===void 0?void 0:l.type)==="object"){for(const f of n)i0(f,t,s,o,a);return s.pop(),!0}if(Array.isArray(u==null?void 0:u.items)){for(let f=0;f<n.length;f+=1)r[i][f]=dd(n[f],u.items[f].format,o);return s.pop(),!0}}return!1},i0=(n,e,t,r,i=[])=>{var s;if(!mu(n)&&!Array.isArray(n))return dd(n,e==null?void 0:e.format,r);const o=n;if(Array.isArray(o)&&(e==null?void 0:e.type)==="array"&&((s=e==null?void 0:e.items)===null||s===void 0?void 0:s.type)==="object")sE({value:o,schemaProp:e,schema:e,object:o,key:"",dataPath:t,format:r,oneOfPath:i});else for(const[a,c]of Object.entries(o)){t.push(a);let l=yj(e,t,i);if(le(l)){delete o[a],t.pop();continue}if(mu(c)){i0(c,e,t,r,i),t.pop();continue}if(!sE({value:c,schemaProp:l,schema:e,object:o,key:a,dataPath:t,format:r,oneOfPath:i})){if((l==null?void 0:l.format)===void 0&&(l==null?void 0:l.oneOf)!==void 0){for(const[u,f]of l.oneOf.entries())if((f==null?void 0:f.format)!==void 0){l=f;break}}o[a]=dd(c,l.format,r),t.pop()}}return o},ve=(n,e,t=Ir)=>{let r;mu(e)?r=Da({},e):Array.isArray(e)?r=[...e]:r=e;const i=mu(n)?n:bb(n);if(!i.properties&&!i.items&&!i.format)throw new xy("Invalid json schema for formatting");return i0(r,i,[],t)},o2="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",vu=n=>{let e;return typeof n=="bigint"||typeof n=="number"?e=lu(n.toString()):Array.isArray(n)?e=new Uint8Array(n):typeof n=="string"&&!en(n)?e=lu(n):e=js(n),Ct(Tr(Jm(e)))},Vd=n=>{let e;typeof n=="string"?n.startsWith("0x")&&en(n)?e=bn(n):e=lu(n):e=n;const t=vu(e);return t===o2?void 0:t},di=n=>{const e=Vd(n);return le(e)?o2:e},_j=n=>{if(Array.isArray(n))throw new Error("Autodetection of array types is not supported.");let e,t;if(typeof n=="object"&&("t"in n||"type"in n)&&("v"in n||"value"in n))e="t"in n?n.t:n.type,t="v"in n?n.v:n.value,e=e.toLowerCase()==="bigint"?"int":e;else{if(typeof n=="bigint")return["int",n];e=Uo(n,!0),t=Uo(n),!e.startsWith("int")&&!e.startsWith("uint")&&(e="bytes")}return(e.startsWith("int")||e.startsWith("uint"))&&typeof t=="string"&&!/^(-)?0x/i.test(t)&&(t=ic(t)),[e,t]},bj=n=>n.startsWith("int[")?`int256${n.slice(3)}`:n==="int"?"int256":n.startsWith("uint[")?`uint256'${n.slice(4)}`:n==="uint"?"uint256":n,xg=(n,e)=>{const t=/^(\d+).*$/.exec(n.slice(e));return t?parseInt(t[1],10):0},oE=n=>n.toString(2).length,aE=(n,e)=>{const t=e.toString();if(n==="string"){if(typeof e=="string")return is(e);throw new L7(e)}if(n==="bool"||n==="boolean"){if(typeof e=="boolean")return e?"01":"00";throw new lb(e)}if(n==="address"){if(!fi(t))throw new cb(t);return t}const r=bj(n);if(n.startsWith("uint")){const i=xg(r,4);if(i%8||i<8||i>256)throw new $A(t);const s=Wr(t);if(oE(s)>i)throw new XA(t);if(s<BigInt(0))throw new D7(t);return i?fd(s.toString(16),i/8*2):s.toString(16)}if(n.startsWith("int")){const i=xg(r,3);if(i%8||i<8||i>256)throw new $A(n);const s=Wr(t);if(oE(s)>i)throw new XA(t);return s<BigInt(0)?s2(s.toString(),i/8*2):i?fd(s.toString(16),i/4):s.toString(16)}if(r==="bytes"){if(t.replace(/^0x/i,"").length%2!==0)throw new Hl(t);return t}if(n.startsWith("bytes")){if(t.replace(/^0x/i,"").length%2!==0)throw new Hl(t);const i=xg(n,5);if(!i||i<1||i>64||i<t.replace(/^0x/i,"").length/2)throw new Hl(t);return i2(t,i*2)}return""},a2=n=>{const[e,t]=_j(n);return Array.isArray(t)?t.map(s=>aE(e,s).replace("0x","")).join(""):aE(e,t).replace("0x","")},Eb=(...n)=>`0x${n.map(a2).join("").toLowerCase()}`,xj=(...n)=>Vd(Eb(...n)),wj=(...n)=>di(Eb(...n)),Aj=n=>Vd(`0x${(typeof n=="number"?n.toString():n).padStart(64,"0")}`);function Ej(n){return PM(n)}const hd=n=>Ej(n),Sj=n=>Ct(hd(n));var s0=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};function c2(n){return(typeof n=="object"||typeof n=="function")&&typeof n.then=="function"}function l2(n,e,t){return s0(this,void 0,void 0,function*(){let r;const i=yield Promise.race([n instanceof Promise?n:n(),new Promise((s,o)=>{r=setTimeout(()=>t?o(t):s(void 0),e)})]);if(r&&clearTimeout(r),i instanceof Error)throw i;return i})}function Sb(n,e){let t;return[new Promise((i,s)=>{t=setInterval(function o(){return s0(this,void 0,void 0,function*(){try{const a=yield l2(n,e);le(a)||(clearInterval(t),i(a))}catch(a){clearInterval(t),s(a)}}),o}(),e)}),t]}function Tj(n,e){return s0(this,void 0,void 0,function*(){return Sb(n,e)[0]})}function Tb(n,e){let t;const r=new Promise((i,s)=>{t=setTimeout(()=>{s(e)},n)});return[t,r]}function u2(n,e){let t;const r=new Promise((i,s)=>{t=setInterval(()=>{s0(this,void 0,void 0,function*(){const o=yield n();o&&(clearInterval(t),s(o))})},e)});return[t,r]}const Mb=()=>{const n=hd(16);n[6]=n[6]&15|64,n[8]=n[8]&63|128;const e=Ct(n);return[e.substring(2,10),e.substring(10,14),e.substring(14,18),e.substring(18,22),e.substring(22,34)].join("-")},Rb=n=>{const e=n.error.code;return Pr.has(e)||e>=-32099&&e<=-32e3},_a=n=>!Array.isArray(n)&&!!n&&n.jsonrpc==="2.0"&&"result"in n&&le(n.error)&&(typeof n.id=="number"||typeof n.id=="string"),ba=n=>!Array.isArray(n)&&n.jsonrpc==="2.0"&&!!n&&le(n.result)&&"error"in n&&(typeof n.id=="number"||typeof n.id=="string"),o0=n=>!Array.isArray(n)&&!!n&&n.jsonrpc==="2.0"&&!le(n.params)&&!le(n.method),f2=n=>!Array.isArray(n)&&!!n&&n.jsonrpc==="2.0"&&"id"in n&&"result"in n,im=n=>_a(n)||ba(n),Ib=n=>Array.isArray(n)?n.every(im):im(n),pd=n=>Array.isArray(n)&&n.length>0&&Ib(n);let tp;const d2=n=>{tp=n},Cc=n=>{var e,t,r,i;return typeof tp<"u"&&(tp+=1),{jsonrpc:(e=n.jsonrpc)!==null&&e!==void 0?e:"2.0",id:(r=(t=n.id)!==null&&t!==void 0?t:tp)!==null&&r!==void 0?r:Mb(),method:n.method,params:(i=n.params)!==null&&i!==void 0?i:void 0}},Cb=n=>n.map(e=>Cc(e)),_s=n=>Array.isArray(n)&&n.length>0,Mj=Object.freeze(Object.defineProperty({__proto__:null,isBatchRequest:_s,isBatchResponse:pd,isResponseRpcError:Rb,isResponseWithError:ba,isResponseWithNotification:o0,isResponseWithResult:_a,isSubscriptionResult:f2,isValidResponse:Ib,setRequestIdStart:d2,toBatchPayload:Cb,toPayload:Cc,validateResponse:im},Symbol.toStringTag,{value:"Module"}));var wg=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},h2;class sm{constructor({timeout:e,eagerStart:t,timeoutMessage:r}={timeout:0,eagerStart:!1,timeoutMessage:"DeferredPromise timed out"}){this[h2]="Promise",this._state="pending",this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s}),this._timeoutMessage=r,this._timeoutInterval=e,t&&this.startTimer()}get state(){return this._state}then(e,t){return wg(this,void 0,void 0,function*(){return this._promise.then(e,t)})}catch(e){return wg(this,void 0,void 0,function*(){return this._promise.catch(e)})}finally(e){return wg(this,void 0,void 0,function*(){return this._promise.finally(e)})}resolve(e){this._resolve(e),this._state="fulfilled",this._clearTimeout()}reject(e){this._reject(e),this._state="rejected",this._clearTimeout()}startTimer(){this._timeoutInterval&&this._timeoutInterval>0&&(this._timeoutId=setTimeout(this._checkTimeout.bind(this),this._timeoutInterval))}_checkTimeout(){this._state==="pending"&&this._timeoutId&&this.reject(new dM(this._timeoutMessage))}_clearTimeout(){this._timeoutId&&clearTimeout(this._timeoutId)}}h2=Symbol.toStringTag;class p2{constructor(e,t){this.eventEmitter=e,this.autoReconnect=t,this.chunkTimeout=1e3*15}clearQueues(){typeof this._clearQueues=="function"&&this._clearQueues()}onError(e){this._clearQueues=e}parseResponse(e){const t=[];return e.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach(i=>{let s=i;this.lastChunk&&(s=this.lastChunk+s);let o;try{o=JSON.parse(s)}catch{this.lastChunk=s,this.lastChunkTimeout&&clearTimeout(this.lastChunkTimeout),this.lastChunkTimeout=setTimeout(()=>{this.autoReconnect||(this.clearQueues(),this.eventEmitter.emit("error",new Km({id:1,jsonrpc:"2.0",error:{code:2,message:"Chunk timeout"}})))},this.chunkTimeout);return}clearTimeout(this.lastChunkTimeout),this.lastChunk=void 0,o&&t.push(o)}),t}}var cE=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};class Pb extends Fd{constructor(){super(...arguments),this._eventEmitter=new CS,this._chainId="",this._accounts=[]}_getChainId(){return cE(this,void 0,void 0,function*(){var e;const t=yield this.request(Cc({method:"eth_chainId",params:[]}));return(e=t==null?void 0:t.result)!==null&&e!==void 0?e:""})}_getAccounts(){return cE(this,void 0,void 0,function*(){var e;const t=yield this.request(Cc({method:"eth_accounts",params:[]}));return(e=t==null?void 0:t.result)!==null&&e!==void 0?e:[]})}_onConnect(){Promise.all([this._getChainId().then(e=>{e!==this._chainId&&(this._chainId=e,this._eventEmitter.emit("chainChanged",this._chainId))}).catch(e=>{}),this._getAccounts().then(e=>{this._accounts.length===e.length&&e.every(t=>e.includes(t))||(this._accounts=e,this._onAccountsChanged())}).catch(e=>{})]).then(()=>this._eventEmitter.emit("connect",{chainId:this._chainId})).catch(e=>{})}_onDisconnect(e,t){this._eventEmitter.emit("disconnect",new F7(e,t))}_onAccountsChanged(){this._eventEmitter.emit("accountsChanged",this._accounts)}}var Ag=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const Rj={autoReconnect:!0,delay:5e3,maxAttempts:5},Ij=1e3;class m2 extends Pb{get SocketConnection(){return this._socketConnection}constructor(e,t,r){if(super(),this._connectionStatus="connecting",this._onMessageHandler=this._onMessage.bind(this),this._onOpenHandler=this._onConnect.bind(this),this._onCloseHandler=this._onCloseEvent.bind(this),this._onErrorHandler=this._onError.bind(this),!this._validateProviderPath(e))throw new wy(e);this._socketPath=e,this._socketOptions=t,this._reconnectOptions=Object.assign(Object.assign({},Rj),r??{}),this._pendingRequestsQueue=new Map,this._sentRequestsQueue=new Map,this._init(),this.connect(),this.chunkResponseParser=new p2(this._eventEmitter,this._reconnectOptions.autoReconnect),this.chunkResponseParser.onError(()=>{this._clearQueues()}),this.isReconnecting=!1}_init(){this._reconnectAttempts=0}connect(){try{this._openSocketConnection(),this._connectionStatus="connecting",this._addSocketListeners()}catch(e){if(this.isReconnecting)setImmediate(()=>{this._reconnect()});else throw this._connectionStatus="disconnected",e&&e.message?new Hd(`Error while connecting to ${this._socketPath}. Reason: ${e.message}`):new wy(this._socketPath)}}_validateProviderPath(e){return!!e}getPendingRequestQueueSize(){return this._pendingRequestsQueue.size}getSentRequestsQueueSize(){return this._sentRequestsQueue.size}supportsSubscriptions(){return!0}on(e,t){this._eventEmitter.on(e,t)}once(e,t){this._eventEmitter.once(e,t)}removeListener(e,t){this._eventEmitter.removeListener(e,t)}_onDisconnect(e,t){this._connectionStatus="disconnected",super._onDisconnect(e,t)}disconnect(e,t){const r=e??Ij;this._removeSocketListeners(),this.getStatus()!=="disconnected"&&this._closeSocketConnection(r,t),this._onDisconnect(r,t)}safeDisconnect(e,t){return Ag(this,arguments,void 0,function*(r,i,s=!1,o=1e3){let a=0;yield(()=>Ag(this,void 0,void 0,function*(){return new Promise(l=>{const u=setInterval(()=>{s&&a>=5&&this.clearQueues(),this.getPendingRequestQueueSize()===0&&this.getSentRequestsQueueSize()===0&&(clearInterval(u),l(!0)),a+=1},o)})}))(),this.disconnect(r,i)})}removeAllListeners(e){this._eventEmitter.removeAllListeners(e)}_onError(e){this.isReconnecting?this._reconnect():this._eventEmitter.emit("error",e)}reset(){this._sentRequestsQueue.clear(),this._pendingRequestsQueue.clear(),this._init(),this._removeSocketListeners(),this._addSocketListeners()}_reconnect(){this.isReconnecting||(this.isReconnecting=!0,this._sentRequestsQueue.size>0&&this._sentRequestsQueue.forEach((e,t)=>{e.deferredPromise.reject(new e7),this._sentRequestsQueue.delete(t)}),this._reconnectAttempts<this._reconnectOptions.maxAttempts?(this._reconnectAttempts+=1,setTimeout(()=>{this._removeSocketListeners(),this.connect(),this.isReconnecting=!1},this._reconnectOptions.delay)):(this.isReconnecting=!1,this._clearQueues(),this._removeSocketListeners(),this._eventEmitter.emit("error",new J9(this._reconnectOptions.maxAttempts))))}request(e){return Ag(this,void 0,void 0,function*(){if(at(this._socketConnection))throw new Error("Connection is undefined");this.getStatus()==="disconnected"&&this.connect();const t=_s(e)?e[0].id:e.id;if(!t)throw new a7("Request Id not defined");if(this._sentRequestsQueue.has(t))throw new t7(t);const r=new sm;r.catch(s=>{this._eventEmitter.emit("error",s)});const i={payload:e,deferredPromise:r};if(this.getStatus()==="connecting")return this._pendingRequestsQueue.set(t,i),i.deferredPromise;this._sentRequestsQueue.set(t,i);try{this._sendToSocket(i.payload)}catch(s){this._sentRequestsQueue.delete(t),this._eventEmitter.emit("error",s)}return r})}_onConnect(){this._connectionStatus="connected",this._reconnectAttempts=0,super._onConnect(),this._sendPendingRequests()}_sendPendingRequests(){for(const[e,t]of this._pendingRequestsQueue.entries())try{this._sendToSocket(t.payload),this._pendingRequestsQueue.delete(e),this._sentRequestsQueue.set(e,t)}catch(r){this._pendingRequestsQueue.delete(e),this._eventEmitter.emit("error",r)}}_onMessage(e){const t=this._parseResponses(e);if(!(at(t)||t.length===0))for(const r of t){if(o0(r)&&r.method.endsWith("_subscription")){this._eventEmitter.emit("message",r);return}const i=pd(r)?r[0].id:r.id,s=this._sentRequestsQueue.get(i);if(!s)return;(pd(r)||_a(r)||ba(r))&&(this._eventEmitter.emit("message",r),s.deferredPromise.resolve(r)),this._sentRequestsQueue.delete(i)}}clearQueues(e){this._clearQueues(e)}_clearQueues(e){this._pendingRequestsQueue.size>0&&this._pendingRequestsQueue.forEach((t,r)=>{t.deferredPromise.reject(new by(e)),this._pendingRequestsQueue.delete(r)}),this._sentRequestsQueue.size>0&&this._sentRequestsQueue.forEach((t,r)=>{t.deferredPromise.reject(new by(e)),this._sentRequestsQueue.delete(r)}),this._removeSocketListeners()}}const g2=Object.freeze(Object.defineProperty({__proto__:null,ChunkResponseParser:p2,Eip1193Provider:Pb,EventEmitter:Ab,SocketProvider:m2,Web3DeferredPromise:sm,asciiToHex:e2,bytesToHex:Ct,bytesToUint8Array:js,checkAddressCheckSum:aj,compareBlockNumbers:mj,convert:i0,convertScalarValue:dd,encodePacked:Eb,ethUnitMap:n0,format:ve,fromAscii:tj,fromDecimal:YW,fromTwosComplement:gj,fromUtf8:JM,fromWei:rj,getStorageSlotNumForLongString:Aj,hexToAscii:t2,hexToBytes:bn,hexToNumber:Gd,hexToNumberString:QW,hexToString:ej,hexToUtf8:r0,isAddress:cj,isBatchRequest:_s,isBatchResponse:pd,isBloom:lj,isContractAddressInBloom:dj,isContractInitOptions:pa,isDataFormat:vo,isHex:oj,isHexStrict:sj,isInBloom:uj,isNullish:at,isPromise:c2,isResponseRpcError:Rb,isResponseWithError:ba,isResponseWithNotification:o0,isResponseWithResult:_a,isSubscriptionResult:f2,isTopic:hj,isTopicInBloom:pj,isUint8Array:ka,isUserEthereumAddressInBloom:fj,isValidResponse:Ib,jsonRpc:Mj,keccak256:vu,keccak256Wrapper:vu,leftPad:fd,mergeDeep:Da,numberToHex:$n,padLeft:gu,padRight:r2,pollTillDefined:Tj,pollTillDefinedAndReturnIntervalId:Sb,processSolidityEncodePackedArgs:a2,randomBytes:hd,randomHex:Sj,rejectIfConditionAtInterval:u2,rejectIfTimeout:Tb,rightPad:i2,setRequestIdStart:d2,sha3:Vd,sha3Raw:di,soliditySha3:xj,soliditySha3Raw:wj,stringToHex:ZW,toAscii:nj,toBatchPayload:Cb,toBigInt:ic,toBool:n2,toChecksumAddress:Ys,toDecimal:KW,toHex:Uo,toNumber:Wr,toPayload:Cc,toTwosComplement:s2,toUtf8:JW,toWei:ij,uint8ArrayConcat:Br,uint8ArrayEquals:t0,utf8ToBytes:wb,utf8ToHex:is,uuidV4:Mb,validateResponse:im,waitWithTimeout:l2},Symbol.toStringTag,{value:"Module"}));class a0{constructor(){this._emitter=new Ab}on(e,t){this._emitter.on(e,t)}once(e,t){this._emitter.once(e,t)}off(e,t){this._emitter.off(e,t)}emit(e,t){this._emitter.emit(e,t)}listenerCount(e){return this._emitter.listenerCount(e)}listeners(e){return this._emitter.listeners(e)}eventNames(){return this._emitter.eventNames()}removeAllListeners(){return this._emitter.removeAllListeners()}setMaxListenerWarningThreshold(e){this._emitter.setMaxListeners(e)}getMaxListeners(){return this._emitter.getMaxListeners()}}var Pc;(function(n){n.CONFIG_CHANGE="CONFIG_CHANGE"})(Pc||(Pc={}));class Cj extends a0{constructor(e){super(),this.config={handleRevert:!1,defaultAccount:void 0,defaultBlock:"latest",transactionBlockTimeout:50,transactionConfirmationBlocks:24,transactionPollingInterval:1e3,transactionPollingTimeout:750*1e3,transactionReceiptPollingInterval:void 0,transactionSendTimeout:750*1e3,transactionConfirmationPollingInterval:void 0,blockHeaderTimeout:10,maxListenersWarningThreshold:100,contractDataInputFill:"data",defaultNetworkId:void 0,defaultChain:"mainnet",defaultHardfork:"london",defaultCommon:void 0,defaultTransactionType:"0x2",defaultMaxPriorityFeePerGas:Uo(25e8),enableExperimentalFeatures:{useSubscriptionWhenCheckingBlockTimeout:!1,useRpcCallSpecification:!1},transactionBuilder:void 0,transactionTypeParser:void 0,customTransactionSchema:void 0,defaultReturnFormat:Ir,ignoreGasPricing:!1},this.setConfig(e??{})}setConfig(e){const t=Object.keys(e);for(const r of t)this._triggerConfigChange(r,e[r]),!at(e[r])&&typeof e[r]=="number"&&r==="maxListenersWarningThreshold"&&this.setMaxListenerWarningThreshold(Number(e[r]));Object.assign(this.config,e)}get handleRevert(){return this.config.handleRevert}set handleRevert(e){this._triggerConfigChange("handleRevert",e),this.config.handleRevert=e}get contractDataInputFill(){return this.config.contractDataInputFill}set contractDataInputFill(e){this._triggerConfigChange("contractDataInputFill",e),this.config.contractDataInputFill=e}get defaultAccount(){return this.config.defaultAccount}set defaultAccount(e){this._triggerConfigChange("defaultAccount",e),this.config.defaultAccount=e}get defaultBlock(){return this.config.defaultBlock}set defaultBlock(e){this._triggerConfigChange("defaultBlock",e),this.config.defaultBlock=e}get transactionSendTimeout(){return this.config.transactionSendTimeout}set transactionSendTimeout(e){this._triggerConfigChange("transactionSendTimeout",e),this.config.transactionSendTimeout=e}get transactionBlockTimeout(){return this.config.transactionBlockTimeout}set transactionBlockTimeout(e){this._triggerConfigChange("transactionBlockTimeout",e),this.config.transactionBlockTimeout=e}get transactionConfirmationBlocks(){return this.config.transactionConfirmationBlocks}set transactionConfirmationBlocks(e){this._triggerConfigChange("transactionConfirmationBlocks",e),this.config.transactionConfirmationBlocks=e}get transactionPollingInterval(){return this.config.transactionPollingInterval}set transactionPollingInterval(e){this._triggerConfigChange("transactionPollingInterval",e),this.config.transactionPollingInterval=e,this.transactionReceiptPollingInterval=e,this.transactionConfirmationPollingInterval=e}get transactionPollingTimeout(){return this.config.transactionPollingTimeout}set transactionPollingTimeout(e){this._triggerConfigChange("transactionPollingTimeout",e),this.config.transactionPollingTimeout=e}get transactionReceiptPollingInterval(){return this.config.transactionReceiptPollingInterval}set transactionReceiptPollingInterval(e){this._triggerConfigChange("transactionReceiptPollingInterval",e),this.config.transactionReceiptPollingInterval=e}get transactionConfirmationPollingInterval(){return this.config.transactionConfirmationPollingInterval}set transactionConfirmationPollingInterval(e){this._triggerConfigChange("transactionConfirmationPollingInterval",e),this.config.transactionConfirmationPollingInterval=e}get blockHeaderTimeout(){return this.config.blockHeaderTimeout}set blockHeaderTimeout(e){this._triggerConfigChange("blockHeaderTimeout",e),this.config.blockHeaderTimeout=e}get enableExperimentalFeatures(){return this.config.enableExperimentalFeatures}set enableExperimentalFeatures(e){this._triggerConfigChange("enableExperimentalFeatures",e),this.config.enableExperimentalFeatures=e}get maxListenersWarningThreshold(){return this.config.maxListenersWarningThreshold}set maxListenersWarningThreshold(e){this._triggerConfigChange("maxListenersWarningThreshold",e),this.setMaxListenerWarningThreshold(e),this.config.maxListenersWarningThreshold=e}get defaultReturnFormat(){return this.config.defaultReturnFormat}set defaultReturnFormat(e){this._triggerConfigChange("defaultReturnFormat",e),this.config.defaultReturnFormat=e}get defaultNetworkId(){return this.config.defaultNetworkId}set defaultNetworkId(e){this._triggerConfigChange("defaultNetworkId",e),this.config.defaultNetworkId=e}get defaultChain(){return this.config.defaultChain}set defaultChain(e){if(!at(this.config.defaultCommon)&&!at(this.config.defaultCommon.baseChain)&&e!==this.config.defaultCommon.baseChain)throw new QA(this.config.defaultChain,e);this._triggerConfigChange("defaultChain",e),this.config.defaultChain=e}get defaultHardfork(){return this.config.defaultHardfork}set defaultHardfork(e){if(!at(this.config.defaultCommon)&&!at(this.config.defaultCommon.hardfork)&&e!==this.config.defaultCommon.hardfork)throw new YA(this.config.defaultCommon.hardfork,e);this._triggerConfigChange("defaultHardfork",e),this.config.defaultHardfork=e}get defaultCommon(){return this.config.defaultCommon}set defaultCommon(e){if(!at(this.config.defaultHardfork)&&!at(e)&&!at(e.hardfork)&&this.config.defaultHardfork!==e.hardfork)throw new YA(this.config.defaultHardfork,e.hardfork);if(!at(this.config.defaultChain)&&!at(e)&&!at(e.baseChain)&&this.config.defaultChain!==e.baseChain)throw new QA(this.config.defaultChain,e.baseChain);this._triggerConfigChange("defaultCommon",e),this.config.defaultCommon=e}get ignoreGasPricing(){return this.config.ignoreGasPricing}set ignoreGasPricing(e){this._triggerConfigChange("ignoreGasPricing",e),this.config.ignoreGasPricing=e}get defaultTransactionType(){return this.config.defaultTransactionType}set defaultTransactionType(e){this._triggerConfigChange("defaultTransactionType",e),this.config.defaultTransactionType=e}get defaultMaxPriorityFeePerGas(){return this.config.defaultMaxPriorityFeePerGas}set defaultMaxPriorityFeePerGas(e){this._triggerConfigChange("defaultMaxPriorityFeePerGas",e),this.config.defaultMaxPriorityFeePerGas=e}get transactionBuilder(){return this.config.transactionBuilder}set transactionBuilder(e){this._triggerConfigChange("transactionBuilder",e),this.config.transactionBuilder=e}get transactionTypeParser(){return this.config.transactionTypeParser}set transactionTypeParser(e){this._triggerConfigChange("transactionTypeParser",e),this.config.transactionTypeParser=e}get customTransactionSchema(){return this.config.customTransactionSchema}set customTransactionSchema(e){this._triggerConfigChange("customTransactionSchema",e),this.config.customTransactionSchema=e}_triggerConfigChange(e,t){this.emit(Pc.CONFIG_CHANGE,{name:e,oldValue:this.config[e],newValue:t})}}var Py={exports:{}};(function(n,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Ao<"u"&&Ao,r=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof Ao<"u"&&Ao||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(_){return _&&DataView.prototype.isPrototypeOf(_)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(_){return _&&u.indexOf(Object.prototype.toString.call(_))>-1};function d(_){if(typeof _!="string"&&(_=String(_)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(_)||_==="")throw new TypeError('Invalid character in header field name: "'+_+'"');return _.toLowerCase()}function p(_){return typeof _!="string"&&(_=String(_)),_}function v(_){var b={next:function(){var E=_.shift();return{done:E===void 0,value:E}}};return c.iterable&&(b[Symbol.iterator]=function(){return b}),b}function m(_){this.map={},_ instanceof m?_.forEach(function(b,E){this.append(E,b)},this):Array.isArray(_)?_.forEach(function(b){if(b.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+b.length);this.append(b[0],b[1])},this):_&&Object.getOwnPropertyNames(_).forEach(function(b){this.append(b,_[b])},this)}m.prototype.append=function(_,b){_=d(_),b=p(b);var E=this.map[_];this.map[_]=E?E+", "+b:b},m.prototype.delete=function(_){delete this.map[d(_)]},m.prototype.get=function(_){return _=d(_),this.has(_)?this.map[_]:null},m.prototype.has=function(_){return this.map.hasOwnProperty(d(_))},m.prototype.set=function(_,b){this.map[d(_)]=p(b)},m.prototype.forEach=function(_,b){for(var E in this.map)this.map.hasOwnProperty(E)&&_.call(b,this.map[E],E,this)},m.prototype.keys=function(){var _=[];return this.forEach(function(b,E){_.push(E)}),v(_)},m.prototype.values=function(){var _=[];return this.forEach(function(b){_.push(b)}),v(_)},m.prototype.entries=function(){var _=[];return this.forEach(function(b,E){_.push([E,b])}),v(_)},c.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function y(_){if(!_._noBody){if(_.bodyUsed)return Promise.reject(new TypeError("Already read"));_.bodyUsed=!0}}function h(_){return new Promise(function(b,E){_.onload=function(){b(_.result)},_.onerror=function(){E(_.error)}})}function w(_){var b=new FileReader,E=h(b);return b.readAsArrayBuffer(_),E}function S(_){var b=new FileReader,E=h(b),R=/charset=([A-Za-z0-9_-]+)/.exec(_.type),L=R?R[1]:"utf-8";return b.readAsText(_,L),E}function T(_){for(var b=new Uint8Array(_),E=new Array(b.length),R=0;R<b.length;R++)E[R]=String.fromCharCode(b[R]);return E.join("")}function C(_){if(_.slice)return _.slice(0);var b=new Uint8Array(_.byteLength);return b.set(new Uint8Array(_)),b.buffer}function B(){return this.bodyUsed=!1,this._initBody=function(_){this.bodyUsed=this.bodyUsed,this._bodyInit=_,_?typeof _=="string"?this._bodyText=_:c.blob&&Blob.prototype.isPrototypeOf(_)?this._bodyBlob=_:c.formData&&FormData.prototype.isPrototypeOf(_)?this._bodyFormData=_:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)?this._bodyText=_.toString():c.arrayBuffer&&c.blob&&l(_)?(this._bodyArrayBuffer=C(_.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(_)||f(_))?this._bodyArrayBuffer=C(_):this._bodyText=_=Object.prototype.toString.call(_):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof _=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var _=y(this);if(_)return _;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var _=y(this);return _||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(w);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var _=y(this);if(_)return _;if(this._bodyBlob)return S(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(T(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(I)}),this.json=function(){return this.text().then(JSON.parse)},this}var O=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function P(_){var b=_.toUpperCase();return O.indexOf(b)>-1?b:_}function N(_,b){if(!(this instanceof N))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');b=b||{};var E=b.body;if(_ instanceof N){if(_.bodyUsed)throw new TypeError("Already read");this.url=_.url,this.credentials=_.credentials,b.headers||(this.headers=new m(_.headers)),this.method=_.method,this.mode=_.mode,this.signal=_.signal,!E&&_._bodyInit!=null&&(E=_._bodyInit,_.bodyUsed=!0)}else this.url=String(_);if(this.credentials=b.credentials||this.credentials||"same-origin",(b.headers||!this.headers)&&(this.headers=new m(b.headers)),this.method=P(b.method||this.method||"GET"),this.mode=b.mode||this.mode||null,this.signal=b.signal||this.signal||function(){if("AbortController"in a){var G=new AbortController;return G.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&E)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(E),(this.method==="GET"||this.method==="HEAD")&&(b.cache==="no-store"||b.cache==="no-cache")){var R=/([?&])_=[^&]*/;if(R.test(this.url))this.url=this.url.replace(R,"$1_="+new Date().getTime());else{var L=/\?/;this.url+=(L.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}N.prototype.clone=function(){return new N(this,{body:this._bodyInit})};function I(_){var b=new FormData;return _.trim().split("&").forEach(function(E){if(E){var R=E.split("="),L=R.shift().replace(/\+/g," "),G=R.join("=").replace(/\+/g," ");b.append(decodeURIComponent(L),decodeURIComponent(G))}}),b}function U(_){var b=new m,E=_.replace(/\r?\n[\t ]+/g," ");return E.split("\r").map(function(R){return R.indexOf(`
`)===0?R.substr(1,R.length):R}).forEach(function(R){var L=R.split(":"),G=L.shift().trim();if(G){var k=L.join(":").trim();try{b.append(G,k)}catch{}}}),b}B.call(N.prototype);function q(_,b){if(!(this instanceof q))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(b||(b={}),this.type="default",this.status=b.status===void 0?200:b.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=b.statusText===void 0?"":""+b.statusText,this.headers=new m(b.headers),this.url=b.url||"",this._initBody(_)}B.call(q.prototype),q.prototype.clone=function(){return new q(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},q.error=function(){var _=new q(null,{status:200,statusText:""});return _.ok=!1,_.status=0,_.type="error",_};var M=[301,302,303,307,308];q.redirect=function(_,b){if(M.indexOf(b)===-1)throw new RangeError("Invalid status code");return new q(null,{status:b,headers:{location:_}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(b,E){this.message=b,this.name=E;var R=Error(b);this.stack=R.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function g(_,b){return new Promise(function(E,R){var L=new N(_,b);if(L.signal&&L.signal.aborted)return R(new o.DOMException("Aborted","AbortError"));var G=new XMLHttpRequest;function k(){G.abort()}G.onload=function(){var K={statusText:G.statusText,headers:U(G.getAllResponseHeaders()||"")};L.url.indexOf("file://")===0&&(G.status<200||G.status>599)?K.status=200:K.status=G.status,K.url="responseURL"in G?G.responseURL:K.headers.get("X-Request-URL");var A="response"in G?G.response:G.responseText;setTimeout(function(){E(new q(A,K))},0)},G.onerror=function(){setTimeout(function(){R(new TypeError("Network request failed"))},0)},G.ontimeout=function(){setTimeout(function(){R(new TypeError("Network request timed out"))},0)},G.onabort=function(){setTimeout(function(){R(new o.DOMException("Aborted","AbortError"))},0)};function x(K){try{return K===""&&a.location.href?a.location.href:K}catch{return K}}if(G.open(L.method,x(L.url),!0),L.credentials==="include"?G.withCredentials=!0:L.credentials==="omit"&&(G.withCredentials=!1),"responseType"in G&&(c.blob?G.responseType="blob":c.arrayBuffer&&(G.responseType="arraybuffer")),b&&typeof b.headers=="object"&&!(b.headers instanceof m||a.Headers&&b.headers instanceof a.Headers)){var F=[];Object.getOwnPropertyNames(b.headers).forEach(function(K){F.push(d(K)),G.setRequestHeader(K,p(b.headers[K]))}),L.headers.forEach(function(K,A){F.indexOf(A)===-1&&G.setRequestHeader(A,K)})}else L.headers.forEach(function(K,A){G.setRequestHeader(A,K)});L.signal&&(L.signal.addEventListener("abort",k),G.onreadystatechange=function(){G.readyState===4&&L.signal.removeEventListener("abort",k)}),G.send(typeof L._bodyInit>"u"?null:L._bodyInit)})}return g.polyfill=!0,a.fetch||(a.fetch=g,a.Headers=m,a.Request=N,a.Response=q),o.Headers=m,o.Request=N,o.Response=q,o.fetch=g,o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=t.fetch?t:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,n.exports=e})(Py,Py.exports);var Pj=Py.exports;const Nj=zc(Pj);var Bj=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};class c0 extends Fd{constructor(e,t){if(super(),!c0.validateClientUrl(e))throw new wy(e);this.clientUrl=e,this.httpProviderOptions=t}static validateClientUrl(e){return typeof e=="string"?/^http(s)?:\/\//i.test(e):!1}getStatus(){throw new io}supportsSubscriptions(){return!1}request(e,t){var r;return Bj(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},(r=this.httpProviderOptions)===null||r===void 0?void 0:r.providerOptions),t),s=yield Nj(this.clientUrl,Object.assign(Object.assign({},i),{method:"POST",headers:Object.assign(Object.assign({},i.headers),{"Content-Type":"application/json"}),body:JSON.stringify(e)}));if(!s.ok)throw new Es(yield s.json(),void 0,void 0,s.status);return yield s.json()})}on(){throw new io}removeListener(){throw new io}once(){throw new io}removeAllListeners(){throw new io}connect(){throw new io}disconnect(){throw new io}reset(){throw new io}reconnect(){throw new io}}var wl=null;typeof WebSocket<"u"?wl=WebSocket:typeof MozWebSocket<"u"?wl=MozWebSocket:typeof global<"u"?wl=global.WebSocket||global.MozWebSocket:typeof window<"u"?wl=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(wl=self.WebSocket||self.MozWebSocket);const Lj=wl;class v2 extends m2{constructor(e,t,r){super(e,t,r)}_validateProviderPath(e){return typeof e=="string"?/^ws(s)?:\/\//i.test(e):!1}getStatus(){if(this._socketConnection&&!at(this._socketConnection))switch(this._socketConnection.readyState){case this._socketConnection.CONNECTING:return"connecting";case this._socketConnection.OPEN:return"connected";default:return"disconnected"}return"disconnected"}_openSocketConnection(){this._socketConnection=new Lj(this._socketPath,void 0,this._socketOptions&&Object.keys(this._socketOptions).length===0?void 0:this._socketOptions)}_closeSocketConnection(e,t){var r;(r=this._socketConnection)===null||r===void 0||r.close(e,t)}_sendToSocket(e){var t;if(this.getStatus()==="disconnected")throw new by;(t=this._socketConnection)===null||t===void 0||t.send(JSON.stringify(e))}_parseResponses(e){return this.chunkResponseParser.parseResponse(e.data)}_addSocketListeners(){var e,t,r,i;(e=this._socketConnection)===null||e===void 0||e.addEventListener("open",this._onOpenHandler),(t=this._socketConnection)===null||t===void 0||t.addEventListener("message",this._onMessageHandler),(r=this._socketConnection)===null||r===void 0||r.addEventListener("close",s=>this._onCloseHandler(s)),(i=this._socketConnection)===null||i===void 0||i.addEventListener("error",this._onErrorHandler)}_removeSocketListeners(){var e,t,r;(e=this._socketConnection)===null||e===void 0||e.removeEventListener("message",this._onMessageHandler),(t=this._socketConnection)===null||t===void 0||t.removeEventListener("open",this._onOpenHandler),(r=this._socketConnection)===null||r===void 0||r.removeEventListener("close",this._onCloseHandler)}_onCloseEvent(e){var t;if(this._reconnectOptions.autoReconnect&&(![1e3,1001].includes(e.code)||!e.wasClean)){this._reconnect();return}this._clearQueues(e),this._removeSocketListeners(),this._onDisconnect(e.code,e.reason),(t=this._socketConnection)===null||t===void 0||t.removeEventListener("error",this._onErrorHandler)}}const y2=n=>Fd.isWeb3Provider(n),_2=n=>typeof n!="string"&&"request"in n&&n.request.constructor.name==="Function",b2=n=>typeof n!="string"&&"request"in n&&n.request.constructor.name==="AsyncFunction",x2=n=>typeof n!="string"&&"send"in n,w2=n=>typeof n!="string"&&"sendAsync"in n,om=n=>n&&(y2(n)||b2(n)||_2(n)||w2(n)||x2(n)),kj=n=>n&&"supportsSubscriptions"in n?n.supportsSubscriptions():!!(n&&typeof n!="string"&&"on"in n);var Eg=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},yu;(function(n){n.PROVIDER_CHANGED="PROVIDER_CHANGED",n.BEFORE_PROVIDER_CHANGE="BEFORE_PROVIDER_CHANGE"})(yu||(yu={}));const lE={HttpProvider:c0,WebsocketProvider:v2};class hc extends a0{constructor(e,t,r){super(),at(e)||this.setProvider(e),this.useRpcCallSpecification=t,at(r)||(this.middleware=r)}static get providers(){return lE}get provider(){return this._provider}get providers(){return lE}setProvider(e){let t;if(e&&typeof e=="string"&&this.providers)if(/^http(s)?:\/\//i.test(e))t=new this.providers.HttpProvider(e);else if(/^ws(s)?:\/\//i.test(e))t=new this.providers.WebsocketProvider(e);else throw new Qh(`Can't autodetect provider for "${e}"`);else at(e)?t=void 0:t=e;return this.emit(yu.BEFORE_PROVIDER_CHANGE,this._provider),this._provider=t,this.emit(yu.PROVIDER_CHANGED,this._provider),!0}setMiddleware(e){this.middleware=e}send(e){return Eg(this,void 0,void 0,function*(){const t=Object.assign({},e);let r=yield this._sendRequest(t);if(at(this.middleware)||(r=yield this.middleware.processResponse(r)),_a(r))return r.result;throw new Es(r)})}sendBatch(e){return Eg(this,void 0,void 0,function*(){return yield this._sendRequest(e)})}_sendRequest(e){return Eg(this,void 0,void 0,function*(){const{provider:t}=this;if(at(t))throw new Qh("Provider not available. Use `.setProvider` or `.provider=` to initialize the provider.");let r=_s(e)?Cb(e):Cc(e);if(at(this.middleware)||(r=yield this.middleware.processRequest(r)),y2(t)){let i;try{i=yield t.request(r)}catch(s){i=s}return this._processJsonRpcResponse(r,i,{legacy:!1,error:!1})}if(b2(t))return t.request(r).then(i=>this._processJsonRpcResponse(r,i,{legacy:!0,error:!1})).catch(i=>this._processJsonRpcResponse(r,i,{legacy:!0,error:!0}));if(_2(t))return new Promise((i,s)=>{const o=l=>{s(this._processJsonRpcResponse(r,l,{legacy:!0,error:!0}))},a=l=>i(this._processJsonRpcResponse(r,l,{legacy:!0,error:!1})),c=t.request(r,(l,u)=>l?o(l):a(u));c2(c)&&c.then(a).catch(u=>{try{const f=this._processJsonRpcResponse(r,u,{legacy:!0,error:!0});s(f)}catch(f){s(f)}})});if(x2(t))return new Promise((i,s)=>{t.send(r,(o,a)=>{if(o)return s(this._processJsonRpcResponse(r,o,{legacy:!0,error:!0}));if(at(a))throw new Es({},'Got a "nullish" response from provider.');return i(this._processJsonRpcResponse(r,a,{legacy:!0,error:!1}))})});if(w2(t))return t.sendAsync(r).then(i=>this._processJsonRpcResponse(r,i,{legacy:!0,error:!1})).catch(i=>this._processJsonRpcResponse(r,i,{legacy:!0,error:!0}));throw new Qh("Provider does not have a request or send method to use.")})}_processJsonRpcResponse(e,t,{legacy:r,error:i}){if(at(t))return this._buildResponse(e,null,i);if(ba(t)){if(this.useRpcCallSpecification&&Rb(t)){const s=t;if(Pr.get(s.error.code)){const o=Pr.get(s.error.code).error;throw new o(s)}else throw new pi(s)}else if(!hc._isReverted(t))throw new Km(t,e)}if(_a(t))return t;if(t instanceof Error)throw hc._isReverted(t),t;if(!r&&_s(e)&&pd(t)||r&&!i&&_s(e))return t;if(r&&i&&_s(e))throw t;if(r&&!ba(t)&&!_a(t))return this._buildResponse(e,t,i);throw _s(e)&&!Array.isArray(t)?new Es(t,"Got normal response for a batch request."):!_s(e)&&Array.isArray(t)?new Es(t,"Got batch response for a normal request."):new Es(t,"Invalid response")}static _isReverted(e){let t;if(ba(e)?t=e.error:e instanceof Error&&(t=e),t!=null&&t.message.includes("revert"))throw new fc(t);return!1}_buildResponse(e,t,r){const i={jsonrpc:"2.0",id:_s(e)?e[0].id:"id"in e?e.id:null};return r?Object.assign(Object.assign({},i),{error:t}):Object.assign(Object.assign({},i),{result:t})}}var ff=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};class am{constructor(e,t,r=!1){this.requestManager=e,this.registeredSubscriptions=t,this.tolerateUnlinkedSubscription=r,this._subscriptions=new Map,this.requestManager.on(yu.BEFORE_PROVIDER_CHANGE,()=>ff(this,void 0,void 0,function*(){yield this.unsubscribe()})),this.requestManager.on(yu.PROVIDER_CHANGED,()=>{this.clear(),this.listenToProviderEvents()}),this.listenToProviderEvents()}listenToProviderEvents(){const e=this.requestManager.provider;!this.requestManager.provider||typeof(e==null?void 0:e.supportsSubscriptions)=="function"&&!(e!=null&&e.supportsSubscriptions())||typeof this.requestManager.provider.on=="function"&&(typeof this.requestManager.provider.request=="function"?this.requestManager.provider.on("message",t=>this.messageListener(t)):e.on("data",t=>this.messageListener(t)))}messageListener(e){var t,r,i;if(!e)throw new ho("Should not call messageListener with no data. Type was");const s=((t=e.params)===null||t===void 0?void 0:t.subscription)||((r=e.data)===null||r===void 0?void 0:r.subscription)||((i=e.id)===null||i===void 0?void 0:i.toString(16));if(s){const o=this._subscriptions.get(s);o==null||o.processSubscriptionData(e)}}subscribe(e,t){return ff(this,arguments,void 0,function*(r,i,s=Ir){const o=this.registeredSubscriptions[r];if(!o)throw new ho("Invalid subscription type");const a=new o(i??void 0,{subscriptionManager:this,returnFormat:s});return yield this.addSubscription(a),a})}get subscriptions(){return this._subscriptions}addSubscription(e){return ff(this,void 0,void 0,function*(){if(!this.requestManager.provider)throw new Qh("Provider not available");if(!this.supportsSubscriptions())throw new ho("The current provider does not support subscriptions");if(e.id&&this._subscriptions.has(e.id))throw new ho(`Subscription with id "${e.id}" already exists`);if(yield e.sendSubscriptionRequest(),at(e.id))throw new ho("Subscription is not subscribed yet.");return this._subscriptions.set(e.id,e),e.id})}removeSubscription(e){return ff(this,void 0,void 0,function*(){const{id:t}=e;if(at(t))throw new ho("Subscription is not subscribed yet. Or, had already been unsubscribed but not through the Subscription Manager.");if(!this._subscriptions.has(t)&&!this.tolerateUnlinkedSubscription)throw new ho(`Subscription with id "${t.toString()}" does not exists`);return yield e.sendUnsubscribeRequest(),this._subscriptions.delete(t),t})}unsubscribe(e){return ff(this,void 0,void 0,function*(){const t=[];for(const[r,i]of this.subscriptions.entries())(!e||typeof e=="function"&&e({id:r,sub:i}))&&t.push(this.removeSubscription(i));return Promise.all(t)})}clear(){this._subscriptions.clear()}supportsSubscriptions(){return at(this.requestManager.provider)?!1:kj(this.requestManager.provider)}}var df=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};class Wd extends a0{constructor(e,t){var r;super(),this.args=e;const{requestManager:i}=t,{subscriptionManager:s}=t;i?this._subscriptionManager=new am(i,{},!0):this._subscriptionManager=s,this._returnFormat=(r=t==null?void 0:t.returnFormat)!==null&&r!==void 0?r:Ir}get id(){return this._id}get lastBlock(){return this._lastBlock}subscribe(){return df(this,void 0,void 0,function*(){return this._subscriptionManager.addSubscription(this)})}processSubscriptionData(e){var t,r;e!=null&&e.data?this._processSubscriptionResult((r=(t=e==null?void 0:e.data)===null||t===void 0?void 0:t.result)!==null&&r!==void 0?r:e==null?void 0:e.data):e&&o0(e)&&this._processSubscriptionResult(e==null?void 0:e.params.result)}sendSubscriptionRequest(){return df(this,void 0,void 0,function*(){return this._id=yield this._subscriptionManager.requestManager.send({method:"eth_subscribe",params:this._buildSubscriptionParams()}),this.emit("connected",this._id),this._id})}get returnFormat(){return this._returnFormat}get subscriptionManager(){return this._subscriptionManager}resubscribe(){return df(this,void 0,void 0,function*(){yield this.unsubscribe(),yield this.subscribe()})}unsubscribe(){return df(this,void 0,void 0,function*(){this.id&&(yield this._subscriptionManager.removeSubscription(this))})}sendUnsubscribeRequest(){return df(this,void 0,void 0,function*(){yield this._subscriptionManager.requestManager.send({method:"eth_unsubscribe",params:[this.id]}),this._id=void 0})}formatSubscriptionResult(e){return e}_processSubscriptionResult(e){this.emit("data",this.formatSubscriptionResult(e))}_processSubscriptionError(e){this.emit("error",e)}_buildSubscriptionParams(){throw new Error("Implement in the child class")}}var ul=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};class cm extends aG{constructor(){super(...arguments),this._addressMap=new Map,this._defaultKeyName="web3js_wallet"}static getStorage(){let e;try{e=window.localStorage;const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch(t){return t&&(t.code===22||t.code===1014||t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED")&&!le(e)&&e.length!==0?e:void 0}}create(e){for(let t=0;t<e;t+=1)this.add(this._accountProvider.create());return this}add(e){var t;if(typeof e=="string")return this.add(this._accountProvider.privateKeyToAccount(e));let r=this.length;return this.get(e.address)&&(r=(t=this._addressMap.get(e.address.toLowerCase()))!==null&&t!==void 0?t:r),this._addressMap.set(e.address.toLowerCase(),r),this[r]=e,this}get(e){if(typeof e=="string"){const t=this._addressMap.get(e.toLowerCase());return le(t)?void 0:this[t]}return this[e]}remove(e){if(typeof e=="string"){const t=this._addressMap.get(e.toLowerCase());return le(t)?!1:(this._addressMap.delete(e.toLowerCase()),this.splice(t,1),!0)}return this[e]?(this.splice(e,1),!0):!1}clear(){return this._addressMap.clear(),this.length=0,this}encrypt(e,t){return ul(this,void 0,void 0,function*(){return Promise.all(this.map(r=>ul(this,void 0,void 0,function*(){return r.encrypt(e,t)})))})}decrypt(e,t,r){return ul(this,void 0,void 0,function*(){const i=yield Promise.all(e.map(s=>ul(this,void 0,void 0,function*(){return this._accountProvider.decrypt(s,t,r)})));for(const s of i)this.add(s);return this})}save(e,t){return ul(this,void 0,void 0,function*(){const r=cm.getStorage();if(!r)throw new Error("Local storage not available.");return r.setItem(t??this._defaultKeyName,JSON.stringify(yield this.encrypt(e))),!0})}load(e,t){return ul(this,void 0,void 0,function*(){const r=cm.getStorage();if(!r)throw new Error("Local storage not available.");const i=r.getItem(t??this._defaultKeyName);return i&&(yield this.decrypt(JSON.parse(i)||[],e)),this})}}const Bs={web:Zh};function A2(n,e,t){if(!t.startsWith("aes-"))throw new Error(`AES submodule doesn't support mode ${t}`);if(e.length!==16)throw new Error("AES: wrong IV length");if(t.startsWith("aes-128")&&n.length!==16||t.startsWith("aes-256")&&n.length!==32)throw new Error("AES: wrong key length")}async function E2(n,e,t){if(!Bs.web)throw new Error("Browser crypto not available.");let r;if(["aes-128-cbc","aes-256-cbc"].includes(n)&&(r="cbc"),["aes-128-ctr","aes-256-ctr"].includes(n)&&(r="ctr"),!r)throw new Error("AES: unsupported mode");return[await Bs.web.subtle.importKey("raw",e,{name:`AES-${r.toUpperCase()}`,length:e.length*8},!0,["encrypt","decrypt"]),{name:`aes-${r}`,iv:t,counter:t,length:128}]}async function Nb(n,e,t,r="aes-128-ctr",i=!0){if(A2(e,t,r),Bs.web){const[s,o]=await E2(r,e,t),a=await Bs.web.subtle.encrypt(o,s,n);let c=new Uint8Array(a);return!i&&o.name==="aes-cbc"&&!(n.length%16)&&(c=c.slice(0,-16)),c}else if(Bs.node){const s=Bs.node.createCipheriv(r,e,t);return s.setAutoPadding(i),jp(s.update(n),s.final())}else throw new Error("The environment doesn't have AES module")}async function Dj(n,e,t,r){const i=n.slice(-16);for(let o=0;o<16;o++)i[o]^=t[o]^16;return(await Nb(i,e,t,r)).slice(0,16)}async function Oj(n,e,t,r="aes-128-ctr",i=!0){if(A2(e,t,r),Bs.web){const[s,o]=await E2(r,e,t);if(!i&&o.name==="aes-cbc"){const l=await Dj(n,e,t,r);n=jp(n,l)}const a=await Bs.web.subtle.decrypt(o,s,n),c=new Uint8Array(a);if(o.name==="aes-cbc"){const l=await Nb(c,e,t,r);if(!IV(l,n))throw new Error("AES: wrong padding")}return c}else if(Bs.node){const s=Bs.node.createDecipheriv(r,e,t);return s.setAutoPadding(i),jp(s.update(n),s.final())}else throw new Error("The environment doesn't have AES module")}class S2 extends hb{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,ub(e);const r=uu(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Ec(this),this.iHash.update(e),this}digestInto(e){Ec(this),Hu(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Bb=(n,e,t)=>new S2(n,e).update(t).digest();Bb.create=(n,e)=>new S2(n,e);function Uj(n,e,t,r){ub(n);const i=CM({dkLen:32,asyncTick:10},r),{c:s,dkLen:o,asyncTick:a}=i;if(Hr(s),Hr(o),Hr(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=uu(e),l=uu(t),u=new Uint8Array(o),f=Bb.create(n,c),d=f._cloneInto().update(l);return{c:s,dkLen:o,asyncTick:a,DK:u,PRF:f,PRFSalt:d}}function Fj(n,e,t,r,i){return n.destroy(),e.destroy(),r&&r.destroy(),i.fill(0),t}function Lb(n,e,t,r){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:c}=Uj(n,e,t,r);let l;const u=new Uint8Array(4),f=ep(u),d=new Uint8Array(a.outputLen);for(let p=1,v=0;v<s;p++,v+=a.outputLen){const m=o.subarray(v,v+a.outputLen);f.setInt32(0,p,!1),(l=c._cloneInto(l)).update(u).digestInto(d),m.set(d.subarray(0,m.length));for(let y=1;y<i;y++){a._cloneInto(l).update(d).digestInto(d);for(let h=0;h<m.length;h++)m[h]^=d[h]}}return Fj(a,c,o,l,d)}function Hj(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),c=r?4:0,l=r?0:4;n.setUint32(e+c,o,r),n.setUint32(e+l,a,r)}const zj=(n,e,t)=>n&e^~n&t,Gj=(n,e,t)=>n&e^n&t^e&t;class T2 extends hb{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ep(this.buffer)}update(e){Ec(this);const{view:t,buffer:r,blockLen:i}=this;e=uu(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=ep(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ec(this),fb(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let f=o;f<i;f++)t[f]=0;Hj(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=ep(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<l;f++)a.setUint32(4*f,u[f],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(r),e}}const Vj=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ra=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ia=new Uint32Array(64);let Wj=class extends T2{constructor(){super(64,32,8,!1),this.A=ra[0]|0,this.B=ra[1]|0,this.C=ra[2]|0,this.D=ra[3]|0,this.E=ra[4]|0,this.F=ra[5]|0,this.G=ra[6]|0,this.H=ra[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,t,r,i,s,o,a,c]}set(e,t,r,i,s,o,a,c){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,t){for(let f=0;f<16;f++,t+=4)ia[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){const d=ia[f-15],p=ia[f-2],v=ms(d,7)^ms(d,18)^d>>>3,m=ms(p,17)^ms(p,19)^p>>>10;ia[f]=m+ia[f-7]+v+ia[f-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let f=0;f<64;f++){const d=ms(a,6)^ms(a,11)^ms(a,25),p=u+d+zj(a,c,l)+Vj[f]+ia[f]|0,m=(ms(r,2)^ms(r,13)^ms(r,22))+Gj(r,i,s)|0;u=l,l=c,c=a,a=o+p|0,o=s,s=i,i=r,r=p+m|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){ia.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const l0=pb(()=>new Wj),[jj,qj]=(()=>At.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))))(),sa=new Uint32Array(80),oa=new Uint32Array(80);let $j=class extends T2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:f,Fl:d,Gh:p,Gl:v,Hh:m,Hl:y}=this;return[e,t,r,i,s,o,a,c,l,u,f,d,p,v,m,y]}set(e,t,r,i,s,o,a,c,l,u,f,d,p,v,m,y){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=f|0,this.Fl=d|0,this.Gh=p|0,this.Gl=v|0,this.Hh=m|0,this.Hl=y|0}process(e,t){for(let S=0;S<16;S++,t+=4)sa[S]=e.getUint32(t),oa[S]=e.getUint32(t+=4);for(let S=16;S<80;S++){const T=sa[S-15]|0,C=oa[S-15]|0,B=At.rotrSH(T,C,1)^At.rotrSH(T,C,8)^At.shrSH(T,C,7),O=At.rotrSL(T,C,1)^At.rotrSL(T,C,8)^At.shrSL(T,C,7),P=sa[S-2]|0,N=oa[S-2]|0,I=At.rotrSH(P,N,19)^At.rotrBH(P,N,61)^At.shrSH(P,N,6),U=At.rotrSL(P,N,19)^At.rotrBL(P,N,61)^At.shrSL(P,N,6),q=At.add4L(O,U,oa[S-7],oa[S-16]),M=At.add4H(q,B,I,sa[S-7],sa[S-16]);sa[S]=M|0,oa[S]=q|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:f,El:d,Fh:p,Fl:v,Gh:m,Gl:y,Hh:h,Hl:w}=this;for(let S=0;S<80;S++){const T=At.rotrSH(f,d,14)^At.rotrSH(f,d,18)^At.rotrBH(f,d,41),C=At.rotrSL(f,d,14)^At.rotrSL(f,d,18)^At.rotrBL(f,d,41),B=f&p^~f&m,O=d&v^~d&y,P=At.add5L(w,C,O,qj[S],oa[S]),N=At.add5H(P,h,T,B,jj[S],sa[S]),I=P|0,U=At.rotrSH(r,i,28)^At.rotrBH(r,i,34)^At.rotrBH(r,i,39),q=At.rotrSL(r,i,28)^At.rotrBL(r,i,34)^At.rotrBL(r,i,39),M=r&s^r&a^s&a,g=i&o^i&c^o&c;h=m|0,w=y|0,m=p|0,y=v|0,p=f|0,v=d|0,{h:f,l:d}=At.add(l|0,u|0,N|0,I|0),l=a|0,u=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const _=At.add3L(I,q,g);r=At.add3H(_,N,U,M),i=_|0}({h:r,l:i}=At.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=At.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=At.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=At.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:f,l:d}=At.add(this.Eh|0,this.El|0,f|0,d|0),{h:p,l:v}=At.add(this.Fh|0,this.Fl|0,p|0,v|0),{h:m,l:y}=At.add(this.Gh|0,this.Gl|0,m|0,y|0),{h,l:w}=At.add(this.Hh|0,this.Hl|0,h|0,w|0),this.set(r,i,s,o,a,c,l,u,f,d,p,v,m,y,h,w)}roundClean(){sa.fill(0),oa.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const Xj=pb(()=>new $j);function M2(n,e,t,r,i){if(!["sha256","sha512"].includes(i))throw new Error("Only sha256 and sha512 are supported");return qp(n),qp(e),Lb(i==="sha256"?l0:Xj,n,e,{c:t,dkLen:r})}function uE(n,e,t,r,i,s){let o=n[e++]^t[r++],a=n[e++]^t[r++],c=n[e++]^t[r++],l=n[e++]^t[r++],u=n[e++]^t[r++],f=n[e++]^t[r++],d=n[e++]^t[r++],p=n[e++]^t[r++],v=n[e++]^t[r++],m=n[e++]^t[r++],y=n[e++]^t[r++],h=n[e++]^t[r++],w=n[e++]^t[r++],S=n[e++]^t[r++],T=n[e++]^t[r++],C=n[e++]^t[r++],B=o,O=a,P=c,N=l,I=u,U=f,q=d,M=p,g=v,_=m,b=y,E=h,R=w,L=S,G=T,k=C;for(let x=0;x<8;x+=2)I^=Xt(B+R|0,7),g^=Xt(I+B|0,9),R^=Xt(g+I|0,13),B^=Xt(R+g|0,18),_^=Xt(U+O|0,7),L^=Xt(_+U|0,9),O^=Xt(L+_|0,13),U^=Xt(O+L|0,18),G^=Xt(b+q|0,7),P^=Xt(G+b|0,9),q^=Xt(P+G|0,13),b^=Xt(q+P|0,18),N^=Xt(k+E|0,7),M^=Xt(N+k|0,9),E^=Xt(M+N|0,13),k^=Xt(E+M|0,18),O^=Xt(B+N|0,7),P^=Xt(O+B|0,9),N^=Xt(P+O|0,13),B^=Xt(N+P|0,18),q^=Xt(U+I|0,7),M^=Xt(q+U|0,9),I^=Xt(M+q|0,13),U^=Xt(I+M|0,18),E^=Xt(b+_|0,7),g^=Xt(E+b|0,9),_^=Xt(g+E|0,13),b^=Xt(_+g|0,18),R^=Xt(k+G|0,7),L^=Xt(R+k|0,9),G^=Xt(L+R|0,13),k^=Xt(G+L|0,18);i[s++]=o+B|0,i[s++]=a+O|0,i[s++]=c+P|0,i[s++]=l+N|0,i[s++]=u+I|0,i[s++]=f+U|0,i[s++]=d+q|0,i[s++]=p+M|0,i[s++]=v+g|0,i[s++]=m+_|0,i[s++]=y+b|0,i[s++]=h+E|0,i[s++]=w+R|0,i[s++]=S+L|0,i[s++]=T+G|0,i[s++]=C+k|0}function Sg(n,e,t,r,i){let s=r+0,o=r+16*i;for(let a=0;a<16;a++)t[o+a]=n[e+(2*i-1)*16+a];for(let a=0;a<i;a++,s+=16,e+=16)uE(t,o,n,e,t,s),a>0&&(o+=16),uE(t,s,n,e+=16,t,o)}function Kj(n,e,t){const r=CM({dkLen:32,asyncTick:10,maxmem:1073742848},t),{N:i,r:s,p:o,dkLen:a,asyncTick:c,maxmem:l,onProgress:u}=r;if(Hr(i),Hr(s),Hr(o),Hr(a),Hr(c),Hr(l),u!==void 0&&typeof u!="function")throw new Error("progressCb should be function");const f=128*s,d=f/4;if(i<=1||i&i-1||i>=2**(f/8)||i>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>(2**32-1)*32/f)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const p=f*(i+o);if(p>l)throw new Error(`Scrypt: parameters too large, ${p} (128 * r * (N + p)) > ${l} (maxmem)`);const v=Lb(l0,n,e,{c:1,dkLen:f*o}),m=Jh(v),y=Jh(new Uint8Array(f*i)),h=Jh(new Uint8Array(f));let w=()=>{};if(u){const S=2*i*o,T=Math.max(Math.floor(S/1e4),1);let C=0;w=()=>{C++,u&&(!(C%T)||C===S)&&u(C/S)}}return{N:i,r:s,p:o,dkLen:a,blockSize32:d,V:y,B32:m,B:v,tmp:h,blockMixCb:w,asyncTick:c}}function Yj(n,e,t,r,i){const s=Lb(l0,n,t,{c:1,dkLen:e});return t.fill(0),r.fill(0),i.fill(0),s}function Qj(n,e,t){const{N:r,r:i,p:s,dkLen:o,blockSize32:a,V:c,B32:l,B:u,tmp:f,blockMixCb:d}=Kj(n,e,t);Vp||Wp(l);for(let p=0;p<s;p++){const v=a*p;for(let m=0;m<a;m++)c[m]=l[v+m];for(let m=0,y=0;m<r-1;m++)Sg(c,y,c,y+=a,i),d();Sg(c,(r-1)*a,l,v,i),d();for(let m=0;m<r;m++){const y=l[v+a-16]%r;for(let h=0;h<a;h++)f[h]=l[v+h]^c[y*a+h];Sg(f,0,l,v,i),d()}}return Vp||Wp(l),Yj(n,o,u,c,f)}function R2(n,e,t,r,i,s,o){return qp(n),qp(e),Qj(n,e,{N:t,r:i,p:r,dkLen:s,onProgress:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const I2=BigInt(0),u0=BigInt(1),Zj=BigInt(2);function Nc(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function jd(n){if(!Nc(n))throw new Error("Uint8Array expected")}const Jj=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function _u(n){jd(n);let e="";for(let t=0;t<n.length;t++)e+=Jj[n[t]];return e}function C2(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function kb(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}const oo={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function fE(n){if(n>=oo._0&&n<=oo._9)return n-oo._0;if(n>=oo._A&&n<=oo._F)return n-(oo._A-10);if(n>=oo._a&&n<=oo._f)return n-(oo._a-10)}function bu(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length,t=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=fE(n.charCodeAt(s)),a=fE(n.charCodeAt(s+1));if(o===void 0||a===void 0){const c=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function pc(n){return kb(_u(n))}function Db(n){return jd(n),kb(_u(Uint8Array.from(n).reverse()))}function xu(n,e){return bu(n.toString(16).padStart(e*2,"0"))}function Ob(n,e){return xu(n,e).reverse()}function eq(n){return bu(C2(n))}function Xi(n,e,t){let r;if(typeof e=="string")try{r=bu(e)}catch(s){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${s}`)}else if(Nc(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(`${n} expected ${t} bytes, got ${i}`);return r}function md(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];jd(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}function tq(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}function nq(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function rq(n){let e;for(e=0;n>I2;n>>=u0,e+=1);return e}function iq(n,e){return n>>BigInt(e)&u0}function sq(n,e,t){return n|(t?u0:I2)<<BigInt(e)}const Ub=n=>(Zj<<BigInt(n-1))-u0,Tg=n=>new Uint8Array(n),dE=n=>Uint8Array.from(n);function P2(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=Tg(n),i=Tg(n),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...f)=>t(i,r,...f),c=(f=Tg())=>{i=a(dE([0]),f),r=a(),f.length!==0&&(i=a(dE([1]),f),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const d=[];for(;f<e;){r=a();const p=r.slice();d.push(p),f+=r.length}return md(...d)};return(f,d)=>{o(),c(f);let p;for(;!(p=d(l()));)c();return o(),p}}const oq={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||Nc(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function qd(n,e,t={}){const r=(i,s,o)=>{const a=oq[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const c=n[i];if(!(o&&c===void 0)&&!a(c,n))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(t))r(i,s,!0);return n}const aq=Object.freeze(Object.defineProperty({__proto__:null,abytes:jd,bitGet:iq,bitLen:rq,bitMask:Ub,bitSet:sq,bytesToHex:_u,bytesToNumberBE:pc,bytesToNumberLE:Db,concatBytes:md,createHmacDrbg:P2,ensureBytes:Xi,equalBytes:tq,hexToBytes:bu,hexToNumber:kb,isBytes:Nc,numberToBytesBE:xu,numberToBytesLE:Ob,numberToHexUnpadded:C2,numberToVarBytesBE:eq,utf8ToBytes:nq,validateObject:qd},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rr=BigInt(0),Dn=BigInt(1),Ja=BigInt(2),cq=BigInt(3),Ny=BigInt(4),hE=BigInt(5),pE=BigInt(8);BigInt(9);BigInt(16);function Fr(n,e){const t=n%e;return t>=rr?t:e+t}function lq(n,e,t){if(t<=rr||e<rr)throw new Error("Expected power/modulo > 0");if(t===Dn)return rr;let r=Dn;for(;e>rr;)e&Dn&&(r=r*n%t),n=n*n%t,e>>=Dn;return r}function bi(n,e,t){let r=n;for(;e-- >rr;)r*=r,r%=t;return r}function By(n,e){if(n===rr||e<=rr)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=Fr(n,e),r=e,i=rr,s=Dn;for(;t!==rr;){const a=r/t,c=r%t,l=i-s*a;r=t,t=c,i=s,s=l}if(r!==Dn)throw new Error("invert: does not exist");return Fr(i,e)}function uq(n){const e=(n-Dn)/Ja;let t,r,i;for(t=n-Dn,r=0;t%Ja===rr;t/=Ja,r++);for(i=Ja;i<n&&lq(i,e,n)!==n-Dn;i++);if(r===1){const o=(n+Dn)/Ny;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const s=(t+Dn)/Ja;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,i),t),f=a.pow(c,s),d=a.pow(c,t);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let p=1;for(let m=a.sqr(d);p<l&&!a.eql(m,a.ONE);p++)m=a.sqr(m);const v=a.pow(u,Dn<<BigInt(l-p-1));u=a.sqr(v),f=a.mul(f,v),d=a.mul(d,u),l=p}return f}}function fq(n){if(n%Ny===cq){const e=(n+Dn)/Ny;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(n%pE===hE){const e=(n-hE)/pE;return function(r,i){const s=r.mul(i,Ja),o=r.pow(s,e),a=r.mul(i,o),c=r.mul(r.mul(a,Ja),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),i))throw new Error("Cannot find square root");return l}}return uq(n)}const dq=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function hq(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=dq.reduce((r,i)=>(r[i]="function",r),e);return qd(n,t)}function pq(n,e,t){if(t<rr)throw new Error("Expected power > 0");if(t===rr)return n.ONE;if(t===Dn)return e;let r=n.ONE,i=e;for(;t>rr;)t&Dn&&(r=n.mul(r,i)),i=n.sqr(i),t>>=Dn;return r}function mq(n,e){const t=new Array(e.length),r=e.reduce((s,o,a)=>n.is0(o)?s:(t[a]=s,n.mul(s,o)),n.ONE),i=n.inv(r);return e.reduceRight((s,o,a)=>n.is0(o)?s:(t[a]=n.mul(s,t[a]),n.mul(s,o)),i),t}function N2(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function gq(n,e,t=!1,r={}){if(n<=rr)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:i,nByteLength:s}=N2(n,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=fq(n),a=Object.freeze({ORDER:n,BITS:i,BYTES:s,MASK:Ub(i),ZERO:rr,ONE:Dn,create:c=>Fr(c,n),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return rr<=c&&c<n},is0:c=>c===rr,isOdd:c=>(c&Dn)===Dn,neg:c=>Fr(-c,n),eql:(c,l)=>c===l,sqr:c=>Fr(c*c,n),add:(c,l)=>Fr(c+l,n),sub:(c,l)=>Fr(c-l,n),mul:(c,l)=>Fr(c*l,n),pow:(c,l)=>pq(a,c,l),div:(c,l)=>Fr(c*By(l,n),n),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>By(c,n),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>mq(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>t?Ob(c,s):xu(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return t?Db(c):pc(c)}});return Object.freeze(a)}function B2(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function L2(n){const e=B2(n);return e+Math.ceil(e/2)}function vq(n,e,t=!1){const r=n.length,i=B2(e),s=L2(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=t?pc(n):Db(n),a=Fr(o,e-Dn)+Dn;return t?Ob(a,i):xu(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yq=BigInt(0),Mg=BigInt(1);function _q(n,e){const t=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=n.ZERO,a=i;for(;s>yq;)s&Mg&&(o=o.add(a)),a=a.double(),s>>=Mg;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),c=[];let l=i,u=l;for(let f=0;f<o;f++){u=l,c.push(u);for(let d=1;d<a;d++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(i,s,o){const{windows:a,windowSize:c}=r(i);let l=n.ZERO,u=n.BASE;const f=BigInt(2**i-1),d=2**i,p=BigInt(i);for(let v=0;v<a;v++){const m=v*c;let y=Number(o&f);o>>=p,y>c&&(y-=d,o+=Mg);const h=m,w=m+Math.abs(y)-1,S=v%2!==0,T=y<0;y===0?u=u.add(t(S,s[h])):l=l.add(t(T,s[w]))}return{p:l,f:u}},wNAFCached(i,s,o,a){const c=i._WINDOW_SIZE||1;let l=s.get(i);return l||(l=this.precomputeWindow(i,c),c!==1&&s.set(i,a(l))),this.wNAF(c,l,o)}}}function k2(n){return hq(n.Fp),qd(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...N2(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function bq(n){const e=k2(n);qd(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:i}=e;if(t){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:xq,hexToBytes:wq}=aq,sc={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=sc;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:xq(r),l:n.subarray(t+2)}},toSig(n){const{Err:e}=sc,t=typeof n=="string"?wq(n):n;jd(t);let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=sc._parseInt(t.subarray(2)),{d:o,l:a}=sc._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(n){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,t=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(t(n.s)),i=e(t(n.r)),s=r.length/2,o=i.length/2,a=t(s),c=t(o);return`30${t(o+s+4)}02${c}${i}02${a}${r}`}},xo=BigInt(0),Ei=BigInt(1);BigInt(2);const mE=BigInt(3);BigInt(4);function Aq(n){const e=bq(n),{Fp:t}=e,r=e.toBytes||((v,m,y)=>{const h=m.toAffine();return md(Uint8Array.from([4]),t.toBytes(h.x),t.toBytes(h.y))}),i=e.fromBytes||(v=>{const m=v.subarray(1),y=t.fromBytes(m.subarray(0,t.BYTES)),h=t.fromBytes(m.subarray(t.BYTES,2*t.BYTES));return{x:y,y:h}});function s(v){const{a:m,b:y}=e,h=t.sqr(v),w=t.mul(h,v);return t.add(t.add(w,t.mul(v,m)),y)}if(!t.eql(t.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(v){return typeof v=="bigint"&&xo<v&&v<e.n}function a(v){if(!o(v))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(v){const{allowedPrivateKeyLengths:m,nByteLength:y,wrapPrivateKey:h,n:w}=e;if(m&&typeof v!="bigint"){if(Nc(v)&&(v=_u(v)),typeof v!="string"||!m.includes(v.length))throw new Error("Invalid key");v=v.padStart(y*2,"0")}let S;try{S=typeof v=="bigint"?v:pc(Xi("private key",v,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof v}`)}return h&&(S=Fr(S,w)),a(S),S}const l=new Map;function u(v){if(!(v instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(m,y,h){if(this.px=m,this.py=y,this.pz=h,m==null||!t.isValid(m))throw new Error("x required");if(y==null||!t.isValid(y))throw new Error("y required");if(h==null||!t.isValid(h))throw new Error("z required")}static fromAffine(m){const{x:y,y:h}=m||{};if(!m||!t.isValid(y)||!t.isValid(h))throw new Error("invalid affine point");if(m instanceof f)throw new Error("projective point not allowed");const w=S=>t.eql(S,t.ZERO);return w(y)&&w(h)?f.ZERO:new f(y,h,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const y=t.invertBatch(m.map(h=>h.pz));return m.map((h,w)=>h.toAffine(y[w])).map(f.fromAffine)}static fromHex(m){const y=f.fromAffine(i(Xi("pointHex",m)));return y.assertValidity(),y}static fromPrivateKey(m){return f.BASE.multiply(c(m))}_setWindowSize(m){this._WINDOW_SIZE=m,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:m,y}=this.toAffine();if(!t.isValid(m)||!t.isValid(y))throw new Error("bad point: x or y not FE");const h=t.sqr(y),w=s(m);if(!t.eql(h,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:m}=this.toAffine();if(t.isOdd)return!t.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){u(m);const{px:y,py:h,pz:w}=this,{px:S,py:T,pz:C}=m,B=t.eql(t.mul(y,C),t.mul(S,w)),O=t.eql(t.mul(h,C),t.mul(T,w));return B&&O}negate(){return new f(this.px,t.neg(this.py),this.pz)}double(){const{a:m,b:y}=e,h=t.mul(y,mE),{px:w,py:S,pz:T}=this;let C=t.ZERO,B=t.ZERO,O=t.ZERO,P=t.mul(w,w),N=t.mul(S,S),I=t.mul(T,T),U=t.mul(w,S);return U=t.add(U,U),O=t.mul(w,T),O=t.add(O,O),C=t.mul(m,O),B=t.mul(h,I),B=t.add(C,B),C=t.sub(N,B),B=t.add(N,B),B=t.mul(C,B),C=t.mul(U,C),O=t.mul(h,O),I=t.mul(m,I),U=t.sub(P,I),U=t.mul(m,U),U=t.add(U,O),O=t.add(P,P),P=t.add(O,P),P=t.add(P,I),P=t.mul(P,U),B=t.add(B,P),I=t.mul(S,T),I=t.add(I,I),P=t.mul(I,U),C=t.sub(C,P),O=t.mul(I,N),O=t.add(O,O),O=t.add(O,O),new f(C,B,O)}add(m){u(m);const{px:y,py:h,pz:w}=this,{px:S,py:T,pz:C}=m;let B=t.ZERO,O=t.ZERO,P=t.ZERO;const N=e.a,I=t.mul(e.b,mE);let U=t.mul(y,S),q=t.mul(h,T),M=t.mul(w,C),g=t.add(y,h),_=t.add(S,T);g=t.mul(g,_),_=t.add(U,q),g=t.sub(g,_),_=t.add(y,w);let b=t.add(S,C);return _=t.mul(_,b),b=t.add(U,M),_=t.sub(_,b),b=t.add(h,w),B=t.add(T,C),b=t.mul(b,B),B=t.add(q,M),b=t.sub(b,B),P=t.mul(N,_),B=t.mul(I,M),P=t.add(B,P),B=t.sub(q,P),P=t.add(q,P),O=t.mul(B,P),q=t.add(U,U),q=t.add(q,U),M=t.mul(N,M),_=t.mul(I,_),q=t.add(q,M),M=t.sub(U,M),M=t.mul(N,M),_=t.add(_,M),U=t.mul(q,_),O=t.add(O,U),U=t.mul(b,_),B=t.mul(g,B),B=t.sub(B,U),U=t.mul(g,q),P=t.mul(b,P),P=t.add(P,U),new f(B,O,P)}subtract(m){return this.add(m.negate())}is0(){return this.equals(f.ZERO)}wNAF(m){return p.wNAFCached(this,l,m,y=>{const h=t.invertBatch(y.map(w=>w.pz));return y.map((w,S)=>w.toAffine(h[S])).map(f.fromAffine)})}multiplyUnsafe(m){const y=f.ZERO;if(m===xo)return y;if(a(m),m===Ei)return this;const{endo:h}=e;if(!h)return p.unsafeLadder(this,m);let{k1neg:w,k1:S,k2neg:T,k2:C}=h.splitScalar(m),B=y,O=y,P=this;for(;S>xo||C>xo;)S&Ei&&(B=B.add(P)),C&Ei&&(O=O.add(P)),P=P.double(),S>>=Ei,C>>=Ei;return w&&(B=B.negate()),T&&(O=O.negate()),O=new f(t.mul(O.px,h.beta),O.py,O.pz),B.add(O)}multiply(m){a(m);let y=m,h,w;const{endo:S}=e;if(S){const{k1neg:T,k1:C,k2neg:B,k2:O}=S.splitScalar(y);let{p:P,f:N}=this.wNAF(C),{p:I,f:U}=this.wNAF(O);P=p.constTimeNegate(T,P),I=p.constTimeNegate(B,I),I=new f(t.mul(I.px,S.beta),I.py,I.pz),h=P.add(I),w=N.add(U)}else{const{p:T,f:C}=this.wNAF(y);h=T,w=C}return f.normalizeZ([h,w])[0]}multiplyAndAddUnsafe(m,y,h){const w=f.BASE,S=(C,B)=>B===xo||B===Ei||!C.equals(w)?C.multiplyUnsafe(B):C.multiply(B),T=S(this,y).add(S(m,h));return T.is0()?void 0:T}toAffine(m){const{px:y,py:h,pz:w}=this,S=this.is0();m==null&&(m=S?t.ONE:t.inv(w));const T=t.mul(y,m),C=t.mul(h,m),B=t.mul(w,m);if(S)return{x:t.ZERO,y:t.ZERO};if(!t.eql(B,t.ONE))throw new Error("invZ was invalid");return{x:T,y:C}}isTorsionFree(){const{h:m,isTorsionFree:y}=e;if(m===Ei)return!0;if(y)return y(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:y}=e;return m===Ei?this:y?y(f,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return this.assertValidity(),r(f,this,m)}toHex(m=!0){return _u(this.toRawBytes(m))}}f.BASE=new f(e.Gx,e.Gy,t.ONE),f.ZERO=new f(t.ZERO,t.ONE,t.ZERO);const d=e.nBitLength,p=_q(f,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:o}}function Eq(n){const e=k2(n);return qd(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Sq(n){const e=Eq(n),{Fp:t,n:r}=e,i=t.BYTES+1,s=2*t.BYTES+1;function o(_){return xo<_&&_<t.ORDER}function a(_){return Fr(_,r)}function c(_){return By(_,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:f,isWithinCurveOrder:d}=Aq({...e,toBytes(_,b,E){const R=b.toAffine(),L=t.toBytes(R.x),G=md;return E?G(Uint8Array.from([b.hasEvenY()?2:3]),L):G(Uint8Array.from([4]),L,t.toBytes(R.y))},fromBytes(_){const b=_.length,E=_[0],R=_.subarray(1);if(b===i&&(E===2||E===3)){const L=pc(R);if(!o(L))throw new Error("Point is not on curve");const G=f(L);let k;try{k=t.sqrt(G)}catch(K){const A=K instanceof Error?": "+K.message:"";throw new Error("Point is not on curve"+A)}const x=(k&Ei)===Ei;return(E&1)===1!==x&&(k=t.neg(k)),{x:L,y:k}}else if(b===s&&E===4){const L=t.fromBytes(R.subarray(0,t.BYTES)),G=t.fromBytes(R.subarray(t.BYTES,2*t.BYTES));return{x:L,y:G}}else throw new Error(`Point of length ${b} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),p=_=>_u(xu(_,e.nByteLength));function v(_){const b=r>>Ei;return _>b}function m(_){return v(_)?a(-_):_}const y=(_,b,E)=>pc(_.slice(b,E));class h{constructor(b,E,R){this.r=b,this.s=E,this.recovery=R,this.assertValidity()}static fromCompact(b){const E=e.nByteLength;return b=Xi("compactSignature",b,E*2),new h(y(b,0,E),y(b,E,2*E))}static fromDER(b){const{r:E,s:R}=sc.toSig(Xi("DER",b));return new h(E,R)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(b){return new h(this.r,this.s,b)}recoverPublicKey(b){const{r:E,s:R,recovery:L}=this,G=O(Xi("msgHash",b));if(L==null||![0,1,2,3].includes(L))throw new Error("recovery id invalid");const k=L===2||L===3?E+e.n:E;if(k>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const x=L&1?"03":"02",F=l.fromHex(x+p(k)),K=c(k),A=a(-G*K),X=a(R*K),V=l.BASE.multiplyAndAddUnsafe(F,A,X);if(!V)throw new Error("point at infinify");return V.assertValidity(),V}hasHighS(){return v(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return bu(this.toDERHex())}toDERHex(){return sc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return bu(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const w={isValidPrivateKey(_){try{return u(_),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const _=L2(e.n);return vq(e.randomBytes(_),e.n)},precompute(_=8,b=l.BASE){return b._setWindowSize(_),b.multiply(BigInt(3)),b}};function S(_,b=!0){return l.fromPrivateKey(_).toRawBytes(b)}function T(_){const b=Nc(_),E=typeof _=="string",R=(b||E)&&_.length;return b?R===i||R===s:E?R===2*i||R===2*s:_ instanceof l}function C(_,b,E=!0){if(T(_))throw new Error("first arg must be private key");if(!T(b))throw new Error("second arg must be public key");return l.fromHex(b).multiply(u(_)).toRawBytes(E)}const B=e.bits2int||function(_){const b=pc(_),E=_.length*8-e.nBitLength;return E>0?b>>BigInt(E):b},O=e.bits2int_modN||function(_){return a(B(_))},P=Ub(e.nBitLength);function N(_){if(typeof _!="bigint")throw new Error("bigint expected");if(!(xo<=_&&_<P))throw new Error(`bigint expected < 2^${e.nBitLength}`);return xu(_,e.nByteLength)}function I(_,b,E=U){if(["recovered","canonical"].some(ee=>ee in E))throw new Error("sign() legacy options not supported");const{hash:R,randomBytes:L}=e;let{lowS:G,prehash:k,extraEntropy:x}=E;G==null&&(G=!0),_=Xi("msgHash",_),k&&(_=Xi("prehashed msgHash",R(_)));const F=O(_),K=u(b),A=[N(K),N(F)];if(x!=null&&x!==!1){const ee=x===!0?L(t.BYTES):x;A.push(Xi("extraEntropy",ee))}const X=md(...A),V=F;function $(ee){const he=B(ee);if(!d(he))return;const pe=c(he),de=l.BASE.multiply(he).toAffine(),Fe=a(de.x);if(Fe===xo)return;const j=a(pe*a(V+Fe*K));if(j===xo)return;let Ue=(de.x===Fe?0:2)|Number(de.y&Ei),et=j;return G&&v(j)&&(et=m(j),Ue^=1),new h(Fe,et,Ue)}return{seed:X,k2sig:$}}const U={lowS:e.lowS,prehash:!1},q={lowS:e.lowS,prehash:!1};function M(_,b,E=U){const{seed:R,k2sig:L}=I(_,b,E),G=e;return P2(G.hash.outputLen,G.nByteLength,G.hmac)(R,L)}l.BASE._setWindowSize(8);function g(_,b,E,R=q){var de;const L=_;if(b=Xi("msgHash",b),E=Xi("publicKey",E),"strict"in R)throw new Error("options.strict was renamed to lowS");const{lowS:G,prehash:k}=R;let x,F;try{if(typeof L=="string"||Nc(L))try{x=h.fromDER(L)}catch(Fe){if(!(Fe instanceof sc.Err))throw Fe;x=h.fromCompact(L)}else if(typeof L=="object"&&typeof L.r=="bigint"&&typeof L.s=="bigint"){const{r:Fe,s:j}=L;x=new h(Fe,j)}else throw new Error("PARSE");F=l.fromHex(E)}catch(Fe){if(Fe.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(G&&x.hasHighS())return!1;k&&(b=e.hash(b));const{r:K,s:A}=x,X=O(b),V=c(A),$=a(X*V),ee=a(K*V),he=(de=l.BASE.multiplyAndAddUnsafe(F,$,ee))==null?void 0:de.toAffine();return he?a(he.x)===K:!1}return{CURVE:e,getPublicKey:S,getSharedSecret:C,sign:M,verify:g,ProjectivePoint:l,Signature:h,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Tq(n){return{hash:n,hmac:(e,...t)=>Bb(n,e,jp(...t)),randomBytes:PM}}function Mq(n,e){const t=r=>Sq({...n,...Tq(r)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const D2=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),gE=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Rq=BigInt(1),Ly=BigInt(2),vE=(n,e)=>(n+e/Ly)/e;function Iq(n){const e=D2,t=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=n*n*n%e,u=l*l*n%e,f=bi(u,t,e)*u%e,d=bi(f,t,e)*u%e,p=bi(d,Ly,e)*l%e,v=bi(p,i,e)*p%e,m=bi(v,s,e)*v%e,y=bi(m,a,e)*m%e,h=bi(y,c,e)*y%e,w=bi(h,a,e)*m%e,S=bi(w,t,e)*u%e,T=bi(S,o,e)*v%e,C=bi(T,r,e)*l%e,B=bi(C,Ly,e);if(!ky.eql(ky.sqr(B),n))throw new Error("Cannot find square root");return B}const ky=gq(D2,void 0,void 0,{sqrt:Iq}),Fb=Mq({a:BigInt(0),b:BigInt(7),Fp:ky,n:gE,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=gE,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Rq*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=vE(s*n,e),c=vE(-r*n,e);let l=Fr(n-a*t-c*i,e),u=Fr(-a*r-c*s,e);const f=l>o,d=u>o;if(f&&(l=e-l),d&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:f,k1:l,k2neg:d,k2:u}}}},l0);BigInt(0);Fb.ProjectivePoint;const Cq=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:Fb},Symbol.toStringTag,{value:"Module"}));var Rg;const Wo=(Rg=Fb)!==null&&Rg!==void 0?Rg:Cq,yE=BigInt("0xffffffffffffffff"),gd=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Pq=Wo.CURVE.n,Nq=Pq/BigInt(2),Bq={type:"object",required:["crypto","id","version","address"],properties:{crypto:{type:"object",required:["cipher","ciphertext","cipherparams","kdf","kdfparams","mac"],properties:{cipher:{type:"string"},ciphertext:{type:"string"},cipherparams:{type:"object"},kdf:{type:"string"},kdfparams:{type:"object"},salt:{type:"string"},mac:{type:"string"}}},id:{type:"string"},version:{type:"number"},address:{type:"string"}}};var lm;(function(n){n[n.Mainnet=1]="Mainnet",n[n.Goerli=5]="Goerli",n[n.Sepolia=11155111]="Sepolia"})(lm||(lm={}));var _n;(function(n){n.Chainstart="chainstart",n.Homestead="homestead",n.Dao="dao",n.TangerineWhistle="tangerineWhistle",n.SpuriousDragon="spuriousDragon",n.Byzantium="byzantium",n.Constantinople="constantinople",n.Petersburg="petersburg",n.Istanbul="istanbul",n.MuirGlacier="muirGlacier",n.Berlin="berlin",n.London="london",n.ArrowGlacier="arrowGlacier",n.GrayGlacier="grayGlacier",n.MergeForkIdTransition="mergeForkIdTransition",n.Merge="merge",n.Shanghai="shanghai",n.ShardingForkDev="shardingFork"})(_n||(_n={}));var _E;(function(n){n.ProofOfStake="pos",n.ProofOfWork="pow",n.ProofOfAuthority="poa"})(_E||(_E={}));var bE;(function(n){n.Ethash="ethash",n.Clique="clique",n.Casper="casper"})(bE||(bE={}));var pr;(function(n){n.PolygonMainnet="polygon-mainnet",n.PolygonMumbai="polygon-mumbai",n.ArbitrumRinkebyTestnet="arbitrum-rinkeby-testnet",n.ArbitrumOne="arbitrum-one",n.xDaiChain="x-dai-chain",n.OptimisticKovan="optimistic-kovan",n.OptimisticEthereum="optimistic-ethereum"})(pr||(pr={}));var Mi;(function(n){n[n.Number=0]="Number",n[n.BigInt=1]="BigInt",n[n.Uint8Array=2]="Uint8Array",n[n.PrefixedHexString=3]="PrefixedHexString"})(Mi||(Mi={}));const O2=n=>{if(typeof n!="string")throw new Error(`[stripHexPrefix] input must be type 'string', received ${typeof n}`);return yb(n)?n.slice(2):n};function Lq(n){return!n||n==="0x0"?"0x0000000000000000":yb(n)?`0x${O2(n).padStart(16,"0")}`:`0x${n.padStart(16,"0")}`}const U2=function(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Received an invalid integer type: ${n}`);return`0x${n.toString(16)}`};function kq(n,e=!0){var t,r;const{name:i,config:s,difficulty:o,mixHash:a,gasLimit:c,coinbase:l,baseFeePerGas:u}=n;let{extraData:f,timestamp:d,nonce:p}=n;const v=Number(d),{chainId:m}=s;if(f===""&&(f="0x"),yb(d)||(d=U2(parseInt(d))),p.length!==18&&(p=Lq(p)),s.eip155Block!==s.eip158Block)throw new Error("EIP155 block number must equal EIP 158 block number since both are part of SpuriousDragon hardfork and the client only supports activating the full hardfork");const y={name:i,chainId:m,networkId:m,genesis:{timestamp:d,gasLimit:parseInt(c),difficulty:parseInt(o),nonce:p,extraData:f,mixHash:a,coinbase:l,baseFeePerGas:u},hardfork:void 0,hardforks:[],bootstrapNodes:[],consensus:s.clique!==void 0?{type:"poa",algorithm:"clique",clique:{period:(t=s.clique.period)!==null&&t!==void 0?t:s.clique.blockperiodseconds,epoch:(r=s.clique.epoch)!==null&&r!==void 0?r:s.clique.epochlength}}:{type:"pow",algorithm:"ethash",ethash:{}}},h={[_n.Homestead]:{name:"homesteadBlock"},[_n.Dao]:{name:"daoForkBlock"},[_n.TangerineWhistle]:{name:"eip150Block"},[_n.SpuriousDragon]:{name:"eip155Block"},[_n.Byzantium]:{name:"byzantiumBlock"},[_n.Constantinople]:{name:"constantinopleBlock"},[_n.Petersburg]:{name:"petersburgBlock"},[_n.Istanbul]:{name:"istanbulBlock"},[_n.MuirGlacier]:{name:"muirGlacierBlock"},[_n.Berlin]:{name:"berlinBlock"},[_n.London]:{name:"londonBlock"},[_n.MergeForkIdTransition]:{name:"mergeForkBlock",postMerge:e},[_n.Shanghai]:{name:"shanghaiTime",postMerge:!0,isTimestamp:!0},[_n.ShardingForkDev]:{name:"shardingForkTime",postMerge:!0,isTimestamp:!0}},w=Object.keys(h).reduce((C,B)=>(C[h[B].name]=B,C),{}),S=Object.keys(s).filter(C=>w[C]!==void 0&&s[C]!==void 0&&s[C]!==null);if(y.hardforks=S.map(C=>({name:w[C],block:h[w[C]].isTimestamp===!0||typeof s[C]!="number"?null:s[C],timestamp:h[w[C]].isTimestamp===!0&&typeof s[C]=="number"?s[C]:void 0})).filter(C=>C.block!==null||C.timestamp!==void 0),y.hardforks.sort((C,B)=>{var O,P;return((O=C.block)!==null&&O!==void 0?O:1/0)-((P=B.block)!==null&&P!==void 0?P:1/0)}),y.hardforks.sort((C,B)=>{var O,P;return((O=C.timestamp)!==null&&O!==void 0?O:v)-((P=B.timestamp)!==null&&P!==void 0?P:v)}),s.terminalTotalDifficulty!==void 0){const C={name:_n.Merge,ttd:s.terminalTotalDifficulty,block:null},B=y.hardforks.findIndex(O=>{var P;return((P=h[O.name])===null||P===void 0?void 0:P.postMerge)===!0});B!==-1?y.hardforks.splice(B,0,C):y.hardforks.push(C)}const T=y.hardforks.length>0?y.hardforks.slice(-1)[0]:void 0;return y.hardfork=T==null?void 0:T.name,y.hardforks.unshift({name:_n.Chainstart,block:0}),y}function Dq(n,e,t){try{if(["config","difficulty","gasLimit","alloc"].some(r=>!(r in n)))throw new Error("Invalid format, expected geth genesis fields missing");return e!==void 0&&(n.name=e),kq(n,t)}catch(r){throw new Error(`Error parsing parameters file: ${r.message}`)}}function F2(n){let e=n;if(typeof e!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof e}`);return e.length%2&&(e=`0${e}`),e}const Oq=function(n){const e=U2(n);return bn(`0x${F2(e.slice(2))}`)},Sn=function(n){var e;if(n==null)return new Uint8Array;if(n instanceof Uint8Array)return n;if(((e=n==null?void 0:n.constructor)===null||e===void 0?void 0:e.name)==="Uint8Array"||Array.isArray(n))return Uint8Array.from(n);if(typeof n=="string"){if(!$M(n))throw new Error(`Cannot convert string to Uint8Array. only supports 0x-prefixed hex strings and this string was given: ${n}`);return bn(F2(O2(n)))}if(typeof n=="number")return Sn($n(n));if(typeof n=="bigint"){if(n<BigInt(0))throw new Error(`Cannot convert negative bigint to Uint8Array. Given: ${n}`);let t=n.toString(16);return t.length%2&&(t=`0${t}`),Sn(`0x${t}`)}if(n.toArray)return Uint8Array.from(n.toArray());throw new Error("invalid type")};function gn(n){const e=Ct(n);return BigInt(e==="0x"?0:e)}function Uq(n){return Sn(`0x${n.toString(16)}`)}const H2=function(n){return new Uint8Array(n).fill(0)},Fq=function(n,e,t){const r=H2(e);return t?n.length<e?(r.set(n),r):n.subarray(0,e):n.length<e?(r.set(n,e-n.length),r):n.subarray(-e)};function Hb(n){if(!ka(n)){const e=`This method only supports Uint8Array but input was: ${n}`;throw new Error(e)}}const xE=function(n,e){return Hb(n),Fq(n,e,!1)};function Hq(n){let e=n[0];for(;n.length>0&&e.toString()==="0";)n=n.slice(1),e=n[0];return n}const um=function(n){return Hb(n),Hq(n)},Tn=n=>`0x${n.toString(16)}`;function Gt(n){return um(Uq(n))}function zq(n,e){return n===BigInt(0)||n===BigInt(1)?n:e===void 0?n-BigInt(27):n-(e*BigInt(2)+BigInt(35))}function Gq(n){return n===BigInt(0)||n===BigInt(1)}const zb=function(n,e,t,r,i){const s=zq(e,i);if(!Gq(s))throw new Error("Invalid signature v value");return new Wo.Signature(gn(t),gn(r)).addRecoveryBit(Number(s)).recoverPublicKey(n).toRawBytes(!1).slice(1)};function fl(n,e){if(n===null)return null;if(n===void 0)return;if(typeof n=="string"&&!$M(n))throw new Error(`A string must be provided with a 0x-prefix, given: ${n}`);if(typeof n=="number"&&!Number.isSafeInteger(n))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const t=Sn(n);switch(e){case Mi.Uint8Array:return t;case Mi.BigInt:return gn(t);case Mi.Number:{const r=gn(t);if(r>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(r)}case Mi.PrefixedHexString:return Ct(t);default:throw new Error("unknown outputType")}}var To={};Object.defineProperty(To,"__esModule",{value:!0});var ai=To.RLP=To.utils=To.decode=To.encode=void 0;function Gb(n){if(Array.isArray(n)){const t=[];let r=0;for(let i=0;i<n.length;i++){const s=Gb(n[i]);t.push(s),r+=s.length}return Oy(AE(r,192),...t)}const e=q2(n);return e.length===1&&e[0]<128?e:Oy(AE(e.length,128),e)}To.encode=Gb;function dl(n,e,t){if(t>n.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return n.slice(e,t)}function wE(n){if(n[0]===0)throw new Error("invalid RLP: extra zeros");return V2(G2(n))}function AE(n,e){if(n<56)return Uint8Array.from([n+e]);const t=Uy(n),r=t.length/2,i=Uy(e+55+r);return Uint8Array.from(fm(i+t))}function z2(n,e=!1){if(typeof n>"u"||n===null||n.length===0)return Uint8Array.from([]);const t=q2(n),r=Dy(t);if(e)return r;if(r.remainder.length!==0)throw new Error("invalid RLP: remainder must be zero");return r.data}To.decode=z2;function Dy(n){let e,t,r,i,s;const o=[],a=n[0];if(a<=127)return{data:n.slice(0,1),remainder:n.slice(1)};if(a<=183){if(e=a-127,a===128?r=Uint8Array.from([]):r=dl(n,1,e),e===2&&r[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:r,remainder:n.slice(e)}}else if(a<=191){if(t=a-182,n.length-1<t)throw new Error("invalid RLP: not enough bytes for string length");if(e=wE(dl(n,1,t)),e<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return r=dl(n,t,e+t),{data:r,remainder:n.slice(e+t)}}else if(a<=247){for(e=a-191,i=dl(n,1,e);i.length;)s=Dy(i),o.push(s.data),i=s.remainder;return{data:o,remainder:n.slice(e)}}else{if(t=a-246,e=wE(dl(n,1,t)),e<56)throw new Error("invalid RLP: encoded list too short");const c=t+e;if(c>n.length)throw new Error("invalid RLP: total length is larger than the data");for(i=dl(n,t,c);i.length;)s=Dy(i),o.push(s.data),i=s.remainder;return{data:o,remainder:n.slice(c)}}}const Vq=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function G2(n){let e="";for(let t=0;t<n.length;t++)e+=Vq[n[t]];return e}function V2(n){const e=Number.parseInt(n,16);if(Number.isNaN(e))throw new Error("Invalid byte sequence");return e}function fm(n){if(typeof n!="string")throw new TypeError("hexToBytes: expected string, got "+typeof n);if(n.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(n.length/2);for(let t=0;t<e.length;t++){const r=t*2;e[t]=V2(n.slice(r,r+2))}return e}function Oy(...n){if(n.length===1)return n[0];const e=n.reduce((r,i)=>r+i.length,0),t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}function W2(n){return new TextEncoder().encode(n)}function Uy(n){if(n<0)throw new Error("Invalid integer as argument, must be unsigned!");const e=n.toString(16);return e.length%2?`0${e}`:e}function Wq(n){return n.length%2?`0${n}`:n}function j2(n){return n.length>=2&&n[0]==="0"&&n[1]==="x"}function jq(n){return typeof n!="string"?n:j2(n)?n.slice(2):n}function q2(n){if(n instanceof Uint8Array)return n;if(typeof n=="string")return j2(n)?fm(Wq(jq(n))):W2(n);if(typeof n=="number"||typeof n=="bigint")return n?fm(Uy(n)):Uint8Array.from([]);if(n==null)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof n)}To.utils={bytesToHex:G2,concatBytes:Oy,hexToBytes:fm,utf8ToBytes:W2};ai=To.RLP={encode:Gb,decode:z2};var $2={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */(function(n){(function(e){e(typeof DO_NOT_EXPORT_CRC>"u"?n:{})})(function(e){e.version="1.2.2";function t(){for(var P=0,N=new Array(256),I=0;I!=256;++I)P=I,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,N[I]=P;return typeof Int32Array<"u"?new Int32Array(N):N}var r=t();function i(P){var N=0,I=0,U=0,q=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(U=0;U!=256;++U)q[U]=P[U];for(U=0;U!=256;++U)for(I=P[U],N=256+U;N<4096;N+=256)I=q[N]=I>>>8^P[I&255];var M=[];for(U=1;U!=16;++U)M[U-1]=typeof Int32Array<"u"?q.subarray(U*256,U*256+256):q.slice(U*256,U*256+256);return M}var s=i(r),o=s[0],a=s[1],c=s[2],l=s[3],u=s[4],f=s[5],d=s[6],p=s[7],v=s[8],m=s[9],y=s[10],h=s[11],w=s[12],S=s[13],T=s[14];function C(P,N){for(var I=N^-1,U=0,q=P.length;U<q;)I=I>>>8^r[(I^P.charCodeAt(U++))&255];return~I}function B(P,N){for(var I=N^-1,U=P.length-15,q=0;q<U;)I=T[P[q++]^I&255]^S[P[q++]^I>>8&255]^w[P[q++]^I>>16&255]^h[P[q++]^I>>>24]^y[P[q++]]^m[P[q++]]^v[P[q++]]^p[P[q++]]^d[P[q++]]^f[P[q++]]^u[P[q++]]^l[P[q++]]^c[P[q++]]^a[P[q++]]^o[P[q++]]^r[P[q++]];for(U+=15;q<U;)I=I>>>8^r[(I^P[q++])&255];return~I}function O(P,N){for(var I=N^-1,U=0,q=P.length,M=0,g=0;U<q;)M=P.charCodeAt(U++),M<128?I=I>>>8^r[(I^M)&255]:M<2048?(I=I>>>8^r[(I^(192|M>>6&31))&255],I=I>>>8^r[(I^(128|M&63))&255]):M>=55296&&M<57344?(M=(M&1023)+64,g=P.charCodeAt(U++)&1023,I=I>>>8^r[(I^(240|M>>8&7))&255],I=I>>>8^r[(I^(128|M>>2&63))&255],I=I>>>8^r[(I^(128|g>>6&15|(M&3)<<4))&255],I=I>>>8^r[(I^(128|g&63))&255]):(I=I>>>8^r[(I^(224|M>>12&15))&255],I=I>>>8^r[(I^(128|M>>6&63))&255],I=I>>>8^r[(I^(128|M&63))&255]);return~I}e.table=r,e.bstr=C,e.buf=B,e.str=O})})($2);const qq=zc($2),$q={name:"goerli",chainId:5,networkId:5,defaultHardfork:"merge",consensus:{type:"poa",algorithm:"clique",clique:{period:15,epoch:3e4}},comment:"Cross-client PoA test network",url:"https://github.com/goerli/testnet",genesis:{timestamp:"0x5c51a607",gasLimit:10485760,difficulty:1,nonce:"0x0000000000000000",extraData:"0x22466c6578692069732061207468696e6722202d204166726900000000000000e0a2bd4258d2768837baa26a28fe71dc079f84c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"},hardforks:[{name:"chainstart",block:0,forkHash:"0xa3f5ab08"},{name:"homestead",block:0,forkHash:"0xa3f5ab08"},{name:"tangerineWhistle",block:0,forkHash:"0xa3f5ab08"},{name:"spuriousDragon",block:0,forkHash:"0xa3f5ab08"},{name:"byzantium",block:0,forkHash:"0xa3f5ab08"},{name:"constantinople",block:0,forkHash:"0xa3f5ab08"},{name:"petersburg",block:0,forkHash:"0xa3f5ab08"},{name:"istanbul",block:1561651,forkHash:"0xc25efa5c"},{name:"berlin",block:4460644,forkHash:"0x757a1c47"},{name:"london",block:5062605,forkHash:"0xb8c6299d"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://goerli.etherscan.io/block/7382818",name:"merge",ttd:"10790000",block:7382819,forkHash:"0xb8c6299d"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,forkHash:null}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.goerli.ethdisco.net"]},Xq={name:"mainnet",chainId:1,networkId:1,defaultHardfork:"merge",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"The Ethereum main chain",url:"https://ethstats.net/",genesis:{gasLimit:5e3,difficulty:17179869184,nonce:"0x0000000000000042",extraData:"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfc64ec04"},{name:"homestead",block:115e4,forkHash:"0x97c2c34c"},{name:"dao",block:192e4,forkHash:"0x91d1f948"},{name:"tangerineWhistle",block:2463e3,forkHash:"0x7a64da13"},{name:"spuriousDragon",block:2675e3,forkHash:"0x3edd5b10"},{name:"byzantium",block:437e4,forkHash:"0xa00bc324"},{name:"constantinople",block:728e4,forkHash:"0x668db0af"},{name:"petersburg",block:728e4,forkHash:"0x668db0af"},{name:"istanbul",block:9069e3,forkHash:"0x879d6e30"},{name:"muirGlacier",block:92e5,forkHash:"0xe029e991"},{name:"berlin",block:12244e3,forkHash:"0x0eb440f6"},{name:"london",block:12965e3,forkHash:"0xb715077d"},{name:"arrowGlacier",block:13773e3,forkHash:"0x20c327fc"},{name:"grayGlacier",block:1505e4,forkHash:"0xf0afd0e3"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://etherscan.io/block/15537393",name:"merge",ttd:"58750000000000000000000",block:15537394,forkHash:"0xf0afd0e3"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,forkHash:null}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net"]},Kq={name:"sepolia",chainId:11155111,networkId:11155111,defaultHardfork:"merge",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"PoW test network to replace Ropsten",url:"https://github.com/ethereum/go-ethereum/pull/23730",genesis:{timestamp:"0x6159af19",gasLimit:3e7,difficulty:131072,nonce:"0x0000000000000000",extraData:"0x5365706f6c69612c20417468656e732c204174746963612c2047726565636521"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfe3366e7"},{name:"homestead",block:0,forkHash:"0xfe3366e7"},{name:"tangerineWhistle",block:0,forkHash:"0xfe3366e7"},{name:"spuriousDragon",block:0,forkHash:"0xfe3366e7"},{name:"byzantium",block:0,forkHash:"0xfe3366e7"},{name:"constantinople",block:0,forkHash:"0xfe3366e7"},{name:"petersburg",block:0,forkHash:"0xfe3366e7"},{name:"istanbul",block:0,forkHash:"0xfe3366e7"},{name:"muirGlacier",block:0,forkHash:"0xfe3366e7"},{name:"berlin",block:0,forkHash:"0xfe3366e7"},{name:"london",block:0,forkHash:"0xfe3366e7"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://sepolia.etherscan.io/block/1450408",name:"merge",ttd:"17000000000000000",block:1450409,forkHash:"0xfe3366e7"},{name:"mergeForkIdTransition",block:1735371,forkHash:"0xb96cbd13"},{name:"shanghai",block:null,timestamp:"1677557088",forkHash:"0xf7f9bc08"}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.sepolia.ethdisco.net"]},Yq={name:"EIP-1153",number:1153,comment:"Transient Storage",url:"https://eips.ethereum.org/EIPS/eip-1153",status:"Review",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{tstore:{v:100,d:"Base fee of the TSTORE opcode"},tload:{v:100,d:"Base fee of the TLOAD opcode"}},vm:{},pow:{}},Qq={name:"EIP-1559",number:1559,comment:"Fee market change for ETH 1.0 chain",url:"https://eips.ethereum.org/EIPS/eip-1559",status:"Final",minimumHardfork:"berlin",requiredEIPs:[2930],gasConfig:{baseFeeMaxChangeDenominator:{v:8,d:"Maximum base fee change denominator"},elasticityMultiplier:{v:2,d:"Maximum block gas target elasticity"},initialBaseFee:{v:1e9,d:"Initial base fee on first EIP1559 block"}},gasPrices:{},vm:{},pow:{}},Zq={name:"EIP-2315",number:2315,comment:"Simple subroutines for the EVM",url:"https://eips.ethereum.org/EIPS/eip-2315",status:"Draft",minimumHardfork:"istanbul",gasConfig:{},gasPrices:{beginsub:{v:2,d:"Base fee of the BEGINSUB opcode"},returnsub:{v:5,d:"Base fee of the RETURNSUB opcode"},jumpsub:{v:10,d:"Base fee of the JUMPSUB opcode"}},vm:{},pow:{}},Jq={name:"EIP-2537",number:2537,comment:"BLS12-381 precompiles",url:"https://eips.ethereum.org/EIPS/eip-2537",status:"Draft",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{Bls12381G1AddGas:{v:600,d:"Gas cost of a single BLS12-381 G1 addition precompile-call"},Bls12381G1MulGas:{v:12e3,d:"Gas cost of a single BLS12-381 G1 multiplication precompile-call"},Bls12381G2AddGas:{v:4500,d:"Gas cost of a single BLS12-381 G2 addition precompile-call"},Bls12381G2MulGas:{v:55e3,d:"Gas cost of a single BLS12-381 G2 multiplication precompile-call"},Bls12381PairingBaseGas:{v:115e3,d:"Base gas cost of BLS12-381 pairing check"},Bls12381PairingPerPairGas:{v:23e3,d:"Per-pair gas cost of BLS12-381 pairing check"},Bls12381MapG1Gas:{v:5500,d:"Gas cost of BLS12-381 map field element to G1"},Bls12381MapG2Gas:{v:11e4,d:"Gas cost of BLS12-381 map field element to G2"},Bls12381MultiExpGasDiscount:{v:[[1,1200],[2,888],[3,764],[4,641],[5,594],[6,547],[7,500],[8,453],[9,438],[10,423],[11,408],[12,394],[13,379],[14,364],[15,349],[16,334],[17,330],[18,326],[19,322],[20,318],[21,314],[22,310],[23,306],[24,302],[25,298],[26,294],[27,289],[28,285],[29,281],[30,277],[31,273],[32,269],[33,268],[34,266],[35,265],[36,263],[37,262],[38,260],[39,259],[40,257],[41,256],[42,254],[43,253],[44,251],[45,250],[46,248],[47,247],[48,245],[49,244],[50,242],[51,241],[52,239],[53,238],[54,236],[55,235],[56,233],[57,232],[58,231],[59,229],[60,228],[61,226],[62,225],[63,223],[64,222],[65,221],[66,220],[67,219],[68,219],[69,218],[70,217],[71,216],[72,216],[73,215],[74,214],[75,213],[76,213],[77,212],[78,211],[79,211],[80,210],[81,209],[82,208],[83,208],[84,207],[85,206],[86,205],[87,205],[88,204],[89,203],[90,202],[91,202],[92,201],[93,200],[94,199],[95,199],[96,198],[97,197],[98,196],[99,196],[100,195],[101,194],[102,193],[103,193],[104,192],[105,191],[106,191],[107,190],[108,189],[109,188],[110,188],[111,187],[112,186],[113,185],[114,185],[115,184],[116,183],[117,182],[118,182],[119,181],[120,180],[121,179],[122,179],[123,178],[124,177],[125,176],[126,176],[127,175],[128,174]],d:"Discount gas costs of calls to the MultiExp precompiles with `k` (point, scalar) pair"}},vm:{},pow:{}},e$={name:"EIP-2565",number:2565,comment:"ModExp gas cost",url:"https://eips.ethereum.org/EIPS/eip-2565",status:"Final",minimumHardfork:"byzantium",gasConfig:{},gasPrices:{modexpGquaddivisor:{v:3,d:"Gquaddivisor from modexp precompile for gas calculation"}},vm:{},pow:{}},t$={name:"EIP-2718",comment:"Typed Transaction Envelope",url:"https://eips.ethereum.org/EIPS/eip-2718",status:"Final",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{},vm:{},pow:{}},n$={name:"EIP-2929",comment:"Gas cost increases for state access opcodes",url:"https://eips.ethereum.org/EIPS/eip-2929",status:"Final",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{coldsload:{v:2100,d:"Gas cost of the first read of storage from a given location (per transaction)"},coldaccountaccess:{v:2600,d:"Gas cost of the first read of a given address (per transaction)"},warmstorageread:{v:100,d:"Gas cost of reading storage locations which have already loaded 'cold'"},sstoreCleanGasEIP2200:{v:2900,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreNoopGasEIP2200:{v:100,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:100,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitRefundEIP2200:{v:19900,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanRefundEIP2200:{v:4900,d:"Once per SSTORE operation for resetting to the original non-zero value"},call:{v:0,d:"Base fee of the CALL opcode"},callcode:{v:0,d:"Base fee of the CALLCODE opcode"},delegatecall:{v:0,d:"Base fee of the DELEGATECALL opcode"},staticcall:{v:0,d:"Base fee of the STATICCALL opcode"},balance:{v:0,d:"Base fee of the BALANCE opcode"},extcodesize:{v:0,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:0,d:"Base fee of the EXTCODECOPY opcode"},extcodehash:{v:0,d:"Base fee of the EXTCODEHASH opcode"},sload:{v:0,d:"Base fee of the SLOAD opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"}},vm:{},pow:{}},r$={name:"EIP-2930",comment:"Optional access lists",url:"https://eips.ethereum.org/EIPS/eip-2930",status:"Final",minimumHardfork:"istanbul",requiredEIPs:[2718,2929],gasConfig:{},gasPrices:{accessListStorageKeyCost:{v:1900,d:"Gas cost per storage key in an Access List transaction"},accessListAddressCost:{v:2400,d:"Gas cost per storage key in an Access List transaction"}},vm:{},pow:{}},i$={name:"EIP-3198",number:3198,comment:"BASEFEE opcode",url:"https://eips.ethereum.org/EIPS/eip-3198",status:"Final",minimumHardfork:"london",gasConfig:{},gasPrices:{basefee:{v:2,d:"Gas cost of the BASEFEE opcode"}},vm:{},pow:{}},s$={name:"EIP-3529",comment:"Reduction in refunds",url:"https://eips.ethereum.org/EIPS/eip-3529",status:"Final",minimumHardfork:"berlin",requiredEIPs:[2929],gasConfig:{maxRefundQuotient:{v:5,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{selfdestructRefund:{v:0,d:"Refunded following a selfdestruct operation"},sstoreClearRefundEIP2200:{v:4800,d:"Once per SSTORE operation for clearing an originally existing storage slot"}},vm:{},pow:{}},o$={name:"EIP-3540",number:3540,comment:"EVM Object Format (EOF) v1",url:"https://eips.ethereum.org/EIPS/eip-3540",status:"Review",minimumHardfork:"london",requiredEIPs:[3541],gasConfig:{},gasPrices:{},vm:{},pow:{}},a$={name:"EIP-3541",comment:"Reject new contracts starting with the 0xEF byte",url:"https://eips.ethereum.org/EIPS/eip-3541",status:"Final",minimumHardfork:"berlin",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},c$={name:"EIP-3554",comment:"Reduction in refunds",url:"Difficulty Bomb Delay to December 1st 2021",status:"Final",minimumHardfork:"muirGlacier",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:95e5,d:"the amount of blocks to delay the difficulty bomb with"}}},l$={name:"EIP-3607",number:3607,comment:"Reject transactions from senders with deployed code",url:"https://eips.ethereum.org/EIPS/eip-3607",status:"Final",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},u$={name:"EIP-3651",number:3198,comment:"Warm COINBASE",url:"https://eips.ethereum.org/EIPS/eip-3651",status:"Review",minimumHardfork:"london",requiredEIPs:[2929],gasConfig:{},gasPrices:{},vm:{},pow:{}},f$={name:"EIP-3670",number:3670,comment:"EOF - Code Validation",url:"https://eips.ethereum.org/EIPS/eip-3670",status:"Review",minimumHardfork:"london",requiredEIPs:[3540],gasConfig:{},gasPrices:{},vm:{},pow:{}},d$={name:"EIP-3675",number:3675,comment:"Upgrade consensus to Proof-of-Stake",url:"https://eips.ethereum.org/EIPS/eip-3675",status:"Final",minimumHardfork:"london",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},h$={name:"EIP-3855",number:3855,comment:"PUSH0 instruction",url:"https://eips.ethereum.org/EIPS/eip-3855",status:"Review",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{push0:{v:2,d:"Base fee of the PUSH0 opcode"}},vm:{},pow:{}},p$={name:"EIP-3860",number:3860,comment:"Limit and meter initcode",url:"https://eips.ethereum.org/EIPS/eip-3860",status:"Review",minimumHardfork:"spuriousDragon",requiredEIPs:[],gasConfig:{},gasPrices:{initCodeWordCost:{v:2,d:"Gas to pay for each word (32 bytes) of initcode when creating a contract"}},vm:{maxInitCodeSize:{v:49152,d:"Maximum length of initialization code when creating a contract"}},pow:{}},m$={name:"EIP-4345",number:4345,comment:"Difficulty Bomb Delay to June 2022",url:"https://eips.ethereum.org/EIPS/eip-4345",status:"Final",minimumHardfork:"london",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:107e5,d:"the amount of blocks to delay the difficulty bomb with"}}},g$={name:"EIP-4399",number:4399,comment:"Supplant DIFFICULTY opcode with PREVRANDAO",url:"https://eips.ethereum.org/EIPS/eip-4399",status:"Review",minimumHardfork:"london",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},v$={name:"EIP-5133",number:5133,comment:"Delaying Difficulty Bomb to mid-September 2022",url:"https://eips.ethereum.org/EIPS/eip-5133",status:"Draft",minimumHardfork:"grayGlacier",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:114e5,d:"the amount of blocks to delay the difficulty bomb with"}}},hl={1153:Yq,1559:Qq,2315:Zq,2537:Jq,2565:e$,2718:t$,2929:n$,2930:r$,3198:i$,3529:s$,3540:o$,3541:a$,3554:c$,3607:l$,3651:u$,3670:f$,3675:d$,3855:h$,3860:p$,4345:m$,4399:g$,5133:v$},y$={name:"chainstart",comment:"Start of the Ethereum main chain",url:"",status:"",gasConfig:{minGasLimit:{v:5e3,d:"Minimum the gas limit may ever be"},gasLimitBoundDivisor:{v:1024,d:"The bound divisor of the gas limit, used in update calculations"},maxRefundQuotient:{v:2,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{base:{v:2,d:"Gas base cost, used e.g. for ChainID opcode (Istanbul)"},tierStep:{v:[0,2,3,5,8,10,20],d:"Once per operation, for a selection of them"},exp:{v:10,d:"Base fee of the EXP opcode"},expByte:{v:10,d:"Times ceil(log256(exponent)) for the EXP instruction"},sha3:{v:30,d:"Base fee of the SHA3 opcode"},sha3Word:{v:6,d:"Once per word of the SHA3 operation's data"},sload:{v:50,d:"Base fee of the SLOAD opcode"},sstoreSet:{v:2e4,d:"Once per SSTORE operation if the zeroness changes from zero"},sstoreReset:{v:5e3,d:"Once per SSTORE operation if the zeroness does not change from zero"},sstoreRefund:{v:15e3,d:"Once per SSTORE operation if the zeroness changes to zero"},jumpdest:{v:1,d:"Base fee of the JUMPDEST opcode"},log:{v:375,d:"Base fee of the LOG opcode"},logData:{v:8,d:"Per byte in a LOG* operation's data"},logTopic:{v:375,d:"Multiplied by the * of the LOG*, per LOG transaction. e.g. LOG0 incurs 0 * c_txLogTopicGas, LOG4 incurs 4 * c_txLogTopicGas"},create:{v:32e3,d:"Base fee of the CREATE opcode"},call:{v:40,d:"Base fee of the CALL opcode"},callStipend:{v:2300,d:"Free gas given at beginning of call"},callValueTransfer:{v:9e3,d:"Paid for CALL when the value transfor is non-zero"},callNewAccount:{v:25e3,d:"Paid for CALL when the destination address didn't exist prior"},selfdestructRefund:{v:24e3,d:"Refunded following a selfdestruct operation"},memory:{v:3,d:"Times the address of the (highest referenced byte in memory + 1). NOTE: referencing happens on read, write and in instructions such as RETURN and CALL"},quadCoeffDiv:{v:512,d:"Divisor for the quadratic particle of the memory cost equation"},createData:{v:200,d:""},tx:{v:21e3,d:"Per transaction. NOTE: Not payable on data of calls between transactions"},txCreation:{v:32e3,d:"The cost of creating a contract via tx"},txDataZero:{v:4,d:"Per byte of data attached to a transaction that equals zero. NOTE: Not payable on data of calls between transactions"},txDataNonZero:{v:68,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},copy:{v:3,d:"Multiplied by the number of 32-byte words that are copied (round up) for any *COPY operation and added"},ecRecover:{v:3e3,d:""},sha256:{v:60,d:""},sha256Word:{v:12,d:""},ripemd160:{v:600,d:""},ripemd160Word:{v:120,d:""},identity:{v:15,d:""},identityWord:{v:3,d:""},stop:{v:0,d:"Base fee of the STOP opcode"},add:{v:3,d:"Base fee of the ADD opcode"},mul:{v:5,d:"Base fee of the MUL opcode"},sub:{v:3,d:"Base fee of the SUB opcode"},div:{v:5,d:"Base fee of the DIV opcode"},sdiv:{v:5,d:"Base fee of the SDIV opcode"},mod:{v:5,d:"Base fee of the MOD opcode"},smod:{v:5,d:"Base fee of the SMOD opcode"},addmod:{v:8,d:"Base fee of the ADDMOD opcode"},mulmod:{v:8,d:"Base fee of the MULMOD opcode"},signextend:{v:5,d:"Base fee of the SIGNEXTEND opcode"},lt:{v:3,d:"Base fee of the LT opcode"},gt:{v:3,d:"Base fee of the GT opcode"},slt:{v:3,d:"Base fee of the SLT opcode"},sgt:{v:3,d:"Base fee of the SGT opcode"},eq:{v:3,d:"Base fee of the EQ opcode"},iszero:{v:3,d:"Base fee of the ISZERO opcode"},and:{v:3,d:"Base fee of the AND opcode"},or:{v:3,d:"Base fee of the OR opcode"},xor:{v:3,d:"Base fee of the XOR opcode"},not:{v:3,d:"Base fee of the NOT opcode"},byte:{v:3,d:"Base fee of the BYTE opcode"},address:{v:2,d:"Base fee of the ADDRESS opcode"},balance:{v:20,d:"Base fee of the BALANCE opcode"},origin:{v:2,d:"Base fee of the ORIGIN opcode"},caller:{v:2,d:"Base fee of the CALLER opcode"},callvalue:{v:2,d:"Base fee of the CALLVALUE opcode"},calldataload:{v:3,d:"Base fee of the CALLDATALOAD opcode"},calldatasize:{v:2,d:"Base fee of the CALLDATASIZE opcode"},calldatacopy:{v:3,d:"Base fee of the CALLDATACOPY opcode"},codesize:{v:2,d:"Base fee of the CODESIZE opcode"},codecopy:{v:3,d:"Base fee of the CODECOPY opcode"},gasprice:{v:2,d:"Base fee of the GASPRICE opcode"},extcodesize:{v:20,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:20,d:"Base fee of the EXTCODECOPY opcode"},blockhash:{v:20,d:"Base fee of the BLOCKHASH opcode"},coinbase:{v:2,d:"Base fee of the COINBASE opcode"},timestamp:{v:2,d:"Base fee of the TIMESTAMP opcode"},number:{v:2,d:"Base fee of the NUMBER opcode"},difficulty:{v:2,d:"Base fee of the DIFFICULTY opcode"},gaslimit:{v:2,d:"Base fee of the GASLIMIT opcode"},pop:{v:2,d:"Base fee of the POP opcode"},mload:{v:3,d:"Base fee of the MLOAD opcode"},mstore:{v:3,d:"Base fee of the MSTORE opcode"},mstore8:{v:3,d:"Base fee of the MSTORE8 opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"},jump:{v:8,d:"Base fee of the JUMP opcode"},jumpi:{v:10,d:"Base fee of the JUMPI opcode"},pc:{v:2,d:"Base fee of the PC opcode"},msize:{v:2,d:"Base fee of the MSIZE opcode"},gas:{v:2,d:"Base fee of the GAS opcode"},push:{v:3,d:"Base fee of the PUSH opcode"},dup:{v:3,d:"Base fee of the DUP opcode"},swap:{v:3,d:"Base fee of the SWAP opcode"},callcode:{v:40,d:"Base fee of the CALLCODE opcode"},return:{v:0,d:"Base fee of the RETURN opcode"},invalid:{v:0,d:"Base fee of the INVALID opcode"},selfdestruct:{v:0,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{stackLimit:{v:1024,d:"Maximum size of VM stack allowed"},callCreateDepth:{v:1024,d:"Maximum depth of call/create stack"},maxExtraDataSize:{v:32,d:"Maximum size extra data may be after Genesis"}},pow:{minimumDifficulty:{v:131072,d:"The minimum that the difficulty may ever be"},difficultyBoundDivisor:{v:2048,d:"The bound divisor of the difficulty, used in the update calculations"},durationLimit:{v:13,d:"The decision boundary on the blocktime duration used to determine whether difficulty should go up or not"},epochDuration:{v:3e4,d:"Duration between proof-of-work epochs"},timebombPeriod:{v:1e5,d:"Exponential difficulty timebomb period"},minerReward:{v:"5000000000000000000",d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:0,d:"the amount of blocks to delay the difficulty bomb with"}}},_$={name:"dao",comment:"DAO rescue hardfork",url:"https://eips.ethereum.org/EIPS/eip-779",status:"Final",gasConfig:{},gasPrices:{},vm:{},pow:{}},b$={name:"homestead",comment:"Homestead hardfork with protocol and network changes",url:"https://eips.ethereum.org/EIPS/eip-606",status:"Final",gasConfig:{},gasPrices:{delegatecall:{v:40,d:"Base fee of the DELEGATECALL opcode"}},vm:{},pow:{}},x$={name:"tangerineWhistle",comment:"Hardfork with gas cost changes for IO-heavy operations",url:"https://eips.ethereum.org/EIPS/eip-608",status:"Final",gasConfig:{},gasPrices:{sload:{v:200,d:"Once per SLOAD operation"},call:{v:700,d:"Once per CALL operation & message call transaction"},extcodesize:{v:700,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:700,d:"Base fee of the EXTCODECOPY opcode"},balance:{v:400,d:"Base fee of the BALANCE opcode"},delegatecall:{v:700,d:"Base fee of the DELEGATECALL opcode"},callcode:{v:700,d:"Base fee of the CALLCODE opcode"},selfdestruct:{v:5e3,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{},pow:{}},w$={name:"spuriousDragon",comment:"HF with EIPs for simple replay attack protection, EXP cost increase, state trie clearing, contract code size limit",url:"https://eips.ethereum.org/EIPS/eip-607",status:"Final",gasConfig:{},gasPrices:{expByte:{v:50,d:"Times ceil(log256(exponent)) for the EXP instruction"}},vm:{maxCodeSize:{v:24576,d:"Maximum length of contract code"}},pow:{}},A$={name:"byzantium",comment:"Hardfork with new precompiles, instructions and other protocol changes",url:"https://eips.ethereum.org/EIPS/eip-609",status:"Final",gasConfig:{},gasPrices:{modexpGquaddivisor:{v:20,d:"Gquaddivisor from modexp precompile for gas calculation"},ecAdd:{v:500,d:"Gas costs for curve addition precompile"},ecMul:{v:4e4,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:1e5,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:8e4,d:"Gas costs regarding curve pairing precompile input length"},revert:{v:0,d:"Base fee of the REVERT opcode"},staticcall:{v:700,d:"Base fee of the STATICCALL opcode"},returndatasize:{v:2,d:"Base fee of the RETURNDATASIZE opcode"},returndatacopy:{v:3,d:"Base fee of the RETURNDATACOPY opcode"}},vm:{},pow:{minerReward:{v:"3000000000000000000",d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:3e6,d:"the amount of blocks to delay the difficulty bomb with"}}},E$={name:"constantinople",comment:"Postponed hardfork including EIP-1283 (SSTORE gas metering changes)",url:"https://eips.ethereum.org/EIPS/eip-1013",status:"Final",gasConfig:{},gasPrices:{netSstoreNoopGas:{v:200,d:"Once per SSTORE operation if the value doesn't change"},netSstoreInitGas:{v:2e4,d:"Once per SSTORE operation from clean zero"},netSstoreCleanGas:{v:5e3,d:"Once per SSTORE operation from clean non-zero"},netSstoreDirtyGas:{v:200,d:"Once per SSTORE operation from dirty"},netSstoreClearRefund:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},netSstoreResetRefund:{v:4800,d:"Once per SSTORE operation for resetting to the original non-zero value"},netSstoreResetClearRefund:{v:19800,d:"Once per SSTORE operation for resetting to the original zero value"},shl:{v:3,d:"Base fee of the SHL opcode"},shr:{v:3,d:"Base fee of the SHR opcode"},sar:{v:3,d:"Base fee of the SAR opcode"},extcodehash:{v:400,d:"Base fee of the EXTCODEHASH opcode"},create2:{v:32e3,d:"Base fee of the CREATE2 opcode"}},vm:{},pow:{minerReward:{v:"2000000000000000000",d:"The amount a miner gets rewarded for mining a block"},difficultyBombDelay:{v:5e6,d:"the amount of blocks to delay the difficulty bomb with"}}},S$={name:"petersburg",comment:"Aka constantinopleFix, removes EIP-1283, activate together with or after constantinople",url:"https://eips.ethereum.org/EIPS/eip-1716",status:"Final",gasConfig:{},gasPrices:{netSstoreNoopGas:{v:null,d:"Removed along EIP-1283"},netSstoreInitGas:{v:null,d:"Removed along EIP-1283"},netSstoreCleanGas:{v:null,d:"Removed along EIP-1283"},netSstoreDirtyGas:{v:null,d:"Removed along EIP-1283"},netSstoreClearRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetClearRefund:{v:null,d:"Removed along EIP-1283"}},vm:{},pow:{}},T$={name:"istanbul",comment:"HF targeted for December 2019 following the Constantinople/Petersburg HF",url:"https://eips.ethereum.org/EIPS/eip-1679",status:"Final",gasConfig:{},gasPrices:{blake2Round:{v:1,d:"Gas cost per round for the Blake2 F precompile"},ecAdd:{v:150,d:"Gas costs for curve addition precompile"},ecMul:{v:6e3,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:45e3,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:34e3,d:"Gas costs regarding curve pairing precompile input length"},txDataNonZero:{v:16,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},sstoreSentryGasEIP2200:{v:2300,d:"Minimum gas required to be present for an SSTORE call, not consumed"},sstoreNoopGasEIP2200:{v:800,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:800,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitGasEIP2200:{v:2e4,d:"Once per SSTORE operation from clean zero to non-zero"},sstoreInitRefundEIP2200:{v:19200,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanGasEIP2200:{v:5e3,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreCleanRefundEIP2200:{v:4200,d:"Once per SSTORE operation for resetting to the original non-zero value"},sstoreClearRefundEIP2200:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},balance:{v:700,d:"Base fee of the BALANCE opcode"},extcodehash:{v:700,d:"Base fee of the EXTCODEHASH opcode"},chainid:{v:2,d:"Base fee of the CHAINID opcode"},selfbalance:{v:5,d:"Base fee of the SELFBALANCE opcode"},sload:{v:800,d:"Base fee of the SLOAD opcode"}},vm:{},pow:{}},M$={name:"muirGlacier",comment:"HF to delay the difficulty bomb",url:"https://eips.ethereum.org/EIPS/eip-2384",status:"Final",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:9e6,d:"the amount of blocks to delay the difficulty bomb with"}}},R$={name:"berlin",comment:"HF targeted for July 2020 following the Muir Glacier HF",url:"https://eips.ethereum.org/EIPS/eip-2070",status:"Final",eips:[2565,2929,2718,2930]},I$={name:"london",comment:"HF targeted for July 2021 following the Berlin fork",url:"https://github.com/ethereum/eth1.0-specs/blob/master/network-upgrades/mainnet-upgrades/london.md",status:"Final",eips:[1559,3198,3529,3541]},C$={name:"shanghai",comment:"Next feature hardfork after the merge hardfork having withdrawals, warm coinbase, push0, limit/meter initcode",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/shanghai.md",status:"Final",eips:[3651,3855,3860,4895]},P$={name:"arrowGlacier",comment:"HF to delay the difficulty bomb",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/arrow-glacier.md",status:"Final",eips:[4345],gasConfig:{},gasPrices:{},vm:{},pow:{}},N$={name:"grayGlacier",comment:"Delaying the difficulty bomb to Mid September 2022",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/gray-glacier.md",status:"Draft",eips:[5133],gasConfig:{},gasPrices:{},vm:{},pow:{}},B$={name:"mergeForkIdTransition",comment:"Pre-merge hardfork to fork off non-upgraded clients",url:"https://eips.ethereum.org/EIPS/eip-3675",status:"Draft",eips:[]},L$={name:"merge",comment:"Hardfork to upgrade the consensus mechanism to Proof-of-Stake",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/merge.md",status:"Final",consensus:{type:"pos",algorithm:"casper",casper:{}},eips:[3675,4399]},k$={chainstart:y$,homestead:b$,dao:_$,tangerineWhistle:x$,spuriousDragon:w$,byzantium:A$,constantinople:E$,petersburg:S$,istanbul:T$,muirGlacier:M$,berlin:R$,london:I$,shanghai:C$,arrowGlacier:P$,grayGlacier:N$,mergeForkIdTransition:B$,merge:L$},{buf:D$}=qq;class jn extends Ab{static custom(e,t={}){var r;const i=(r=t.baseChain)!==null&&r!==void 0?r:"mainnet",s=Object.assign({},jn._getChainParams(i));if(s.name="custom-chain",typeof e!="string")return new jn(Object.assign({chain:Object.assign(Object.assign({},s),e)},t));if(e===pr.PolygonMainnet)return jn.custom({name:pr.PolygonMainnet,chainId:137,networkId:137},t);if(e===pr.PolygonMumbai)return jn.custom({name:pr.PolygonMumbai,chainId:80001,networkId:80001},t);if(e===pr.ArbitrumRinkebyTestnet)return jn.custom({name:pr.ArbitrumRinkebyTestnet,chainId:421611,networkId:421611},t);if(e===pr.ArbitrumOne)return jn.custom({name:pr.ArbitrumOne,chainId:42161,networkId:42161},t);if(e===pr.xDaiChain)return jn.custom({name:pr.xDaiChain,chainId:100,networkId:100},t);if(e===pr.OptimisticKovan)return jn.custom({name:pr.OptimisticKovan,chainId:69,networkId:69},Object.assign({hardfork:_n.Berlin},t));if(e===pr.OptimisticEthereum)return jn.custom({name:pr.OptimisticEthereum,chainId:10,networkId:10},Object.assign({hardfork:_n.Berlin},t));throw new Error(`Custom chain ${e} not supported`)}static fromGethGenesis(e,{chain:t,eips:r,genesisHash:i,hardfork:s,mergeForkIdPostMerge:o}){var a;const c=Dq(e,t,o),l=new jn({chain:(a=c.name)!==null&&a!==void 0?a:"custom",customChains:[c],eips:r,hardfork:s??c.hardfork});return i!==void 0&&l.setForkHashes(i),l}static isSupportedChainId(e){return!!this._getInitializedChains().names[e.toString()]}static _getChainParams(e,t){let r=e;const i=this._getInitializedChains(t);if(typeof r=="number"||typeof r=="bigint"){if(r=r.toString(),i.names[r]){const s=i.names[r];return i[s]}throw new Error(`Chain with ID ${r} not supported`)}if(i[r]!==void 0)return i[r];throw new Error(`Chain with name ${r} not supported`)}constructor(e){var t,r;super(),this._eips=[],this._customChains=(t=e.customChains)!==null&&t!==void 0?t:[],this._chainParams=this.setChain(e.chain),this.DEFAULT_HARDFORK=(r=this._chainParams.defaultHardfork)!==null&&r!==void 0?r:_n.Merge,this.HARDFORK_CHANGES=this.hardforks().map(i=>[i.name,k$[i.name]]),this._hardfork=this.DEFAULT_HARDFORK,e.hardfork!==void 0&&this.setHardfork(e.hardfork),e.eips&&this.setEIPs(e.eips)}setChain(e){if(typeof e=="number"||typeof e=="bigint"||typeof e=="string")this._chainParams=jn._getChainParams(e,this._customChains);else if(typeof e=="object"){if(this._customChains.length>0)throw new Error("Chain must be a string, number, or bigint when initialized with customChains passed in");const t=["networkId","genesis","hardforks","bootstrapNodes"];for(const r of t)if(!(r in e))throw new Error(`Missing required chain parameter: ${r}`);this._chainParams=e}else throw new Error("Wrong input format");for(const t of this.hardforks())if(t.block===void 0)throw new Error("Hardfork cannot have undefined block number");return this._chainParams}setHardfork(e){let t=!1;for(const r of this.HARDFORK_CHANGES)r[0]===e&&(this._hardfork!==e&&(this._hardfork=e,this.emit("hardforkChanged",e)),t=!0);if(!t)throw new Error(`Hardfork with name ${e} not supported`)}getHardforkByBlockNumber(e,t,r){const i=fl(e,Mi.BigInt),s=fl(t,Mi.BigInt),o=fl(r,Mi.Number),a=this.hardforks().filter(p=>p.block!==null||p.ttd!==null&&p.ttd!==void 0||p.timestamp!==void 0),c=a.findIndex(p=>p.ttd!==null&&p.ttd!==void 0);if(a.slice(c+1).findIndex(p=>p.ttd!==null&&p.ttd!==void 0)>=0)throw Error("More than one merge hardforks found with ttd specified");let u=a.findIndex(p=>p.block!==null&&p.block>i||o!==void 0&&Number(p.timestamp)>o);if(u===-1)u=a.length;else if(u===0)throw Error("Must have at least one hardfork at block 0");if(o===void 0){const p=a.slice(0,u).reverse().findIndex(v=>v.block!==null||v.ttd!==void 0);u-=p}if(u-=1,a[u].block===null&&a[u].timestamp===void 0)(s==null||BigInt(a[u].ttd)>s)&&(u-=1);else if(c>=0&&s!==void 0&&s!==null){if(u>=c&&BigInt(a[c].ttd)>s)throw Error("Maximum HF determined by total difficulty is lower than the block number HF");if(u<c&&BigInt(a[c].ttd)<=s)throw Error("HF determined by block number is lower than the minimum total difficulty HF")}const f=u;for(;u<a.length-1&&!(a[u].block!==a[u+1].block||a[u].timestamp!==a[u+1].timestamp);u+=1);if(o){if(a.slice(0,f).reduce((m,y)=>{var h;return Math.max(Number((h=y.timestamp)!==null&&h!==void 0?h:"0"),m)},0)>o)throw Error("Maximum HF determined by timestamp is lower than the block number/ttd HF");if(a.slice(u+1).reduce((m,y)=>{var h;return Math.min(Number((h=y.timestamp)!==null&&h!==void 0?h:o),m)},o)<o)throw Error("Maximum HF determined by block number/ttd is lower than timestamp HF")}return a[u].name}setHardforkByBlockNumber(e,t,r){const i=this.getHardforkByBlockNumber(e,t,r);return this.setHardfork(i),i}_getHardfork(e){const t=this.hardforks();for(const r of t)if(r.name===e)return r;return null}setEIPs(e=[]){for(const t of e){if(!(t in hl))throw new Error(`${t} not supported`);const r=this.gteHardfork(hl[t].minimumHardfork);if(!r)throw new Error(`${t} cannot be activated on hardfork ${this.hardfork()}, minimumHardfork: ${r}`);if(hl[t].requiredEIPs!==void 0){for(const i of hl[t].requiredEIPs)if(!(e.includes(i)||this.isActivatedEIP(i)))throw new Error(`${t} requires EIP ${i}, but is not included in the EIP list`)}}this._eips=e}param(e,t){let r;for(const i of this._eips)if(r=this.paramByEIP(e,t,i),r!==void 0)return r;return this.paramByHardfork(e,t,this._hardfork)}paramByHardfork(e,t,r){let i=null;for(const s of this.HARDFORK_CHANGES){if("eips"in s[1]){const o=s[1].eips;for(const a of o){const c=this.paramByEIP(e,t,a);i=typeof c=="bigint"?c:i}}else{if(s[1][e]===void 0)throw new Error(`Topic ${e} not defined`);s[1][e][t]!==void 0&&(i=s[1][e][t].v)}if(s[0]===r)break}return BigInt(i??0)}paramByEIP(e,t,r){if(!(r in hl))throw new Error(`${r} not supported`);const i=hl[r];if(!(e in i))throw new Error(`Topic ${e} not defined`);if(i[e][t]===void 0)return;const s=i[e][t].v;return BigInt(s)}paramByBlock(e,t,r,i,s){const o=this.getHardforkByBlockNumber(r,i,s);return this.paramByHardfork(e,t,o)}isActivatedEIP(e){if(this.eips().includes(e))return!0;for(const t of this.HARDFORK_CHANGES){const r=t[1];if(this.gteHardfork(r.name)&&"eips"in r&&r.eips.includes(e))return!0}return!1}hardforkIsActiveOnBlock(e,t){const r=fl(t,Mi.BigInt),i=e??this._hardfork,s=this.hardforkBlock(i);return typeof s=="bigint"&&s!==BigInt(0)&&r>=s}activeOnBlock(e){return this.hardforkIsActiveOnBlock(null,e)}hardforkGteHardfork(e,t){const r=e??this._hardfork,i=this.hardforks();let s=-1,o=-1,a=0;for(const c of i)c.name===r&&(s=a),c.name===t&&(o=a),a+=1;return s>=o&&o!==-1}gteHardfork(e){return this.hardforkGteHardfork(null,e)}hardforkBlock(e){var t;const r=e??this._hardfork,i=(t=this._getHardfork(r))===null||t===void 0?void 0:t.block;return i==null?null:BigInt(i)}hardforkTimestamp(e){var t;const r=e??this._hardfork,i=(t=this._getHardfork(r))===null||t===void 0?void 0:t.timestamp;return i==null?null:BigInt(i)}eipBlock(e){for(const t of this.HARDFORK_CHANGES){const r=t[1];if("eips"in r&&r.eips.includes(e))return this.hardforkBlock(typeof t[0]=="number"?String(t[0]):t[0])}return null}hardforkTTD(e){var t;const r=e??this._hardfork,i=(t=this._getHardfork(r))===null||t===void 0?void 0:t.ttd;return i==null?null:BigInt(i)}isHardforkBlock(e,t){const r=fl(e,Mi.BigInt),i=t??this._hardfork,s=this.hardforkBlock(i);return typeof s=="bigint"&&s!==BigInt(0)?s===r:!1}nextHardforkBlockOrTimestamp(e){var t,r,i;const s=(t=e)!==null&&t!==void 0?t:this._hardfork,o=this.hardforks();let a=o.findIndex(f=>f.name===s);if(s===_n.Merge&&(a-=1),a<0)return null;let c=(r=o[a].timestamp)!==null&&r!==void 0?r:o[a].block;c=c!=null?Number(c):null;const l=o.slice(a+1).find(f=>{var d;let p=(d=f.timestamp)!==null&&d!==void 0?d:f.block;return p=p!=null?Number(p):null,f.name!==_n.Merge&&p!==null&&p!==void 0&&p!==c});if(l===void 0)return null;const u=(i=l.timestamp)!==null&&i!==void 0?i:l.block;return u==null?null:BigInt(u)}nextHardforkBlock(e){var t;const r=(t=e)!==null&&t!==void 0?t:this._hardfork;let i=this.hardforkBlock(r);if(i===null&&r===_n.Merge){const o=this.hardforks(),a=o.findIndex(c=>c.ttd!==null&&c.ttd!==void 0);if(a<0)throw Error("Merge hardfork should have been found");i=this.hardforkBlock(o[a-1].name)}return i===null?null:this.hardforks().reduce((o,a)=>{const c=BigInt(a.block===null||a.ttd!==void 0&&a.ttd!==null?0:a.block);return c>i&&o===null?c:o},null)}isNextHardforkBlock(e,t){const r=fl(e,Mi.BigInt),i=t??this._hardfork,s=this.nextHardforkBlock(i);return s===null?!1:s===r}_calcForkHash(e,t){let r=new Uint8Array,i=0;for(const a of this.hardforks()){const{block:c,timestamp:l,name:u}=a;let f=l??c;if(f=f!==null?Number(f):null,typeof f=="number"&&f!==0&&f!==i&&u!==_n.Merge){const d=bn(f.toString(16).padStart(16,"0"));r=Br(r,d),i=f}if(a.name===e)break}const s=Br(t,r);return Ct(Oq(D$(s)>>>0))}forkHash(e,t){const r=e??this._hardfork,i=this._getHardfork(r);if(i===null||(i==null?void 0:i.block)===null&&(i==null?void 0:i.timestamp)===void 0&&(i==null?void 0:i.ttd)===void 0){const s="No fork hash calculation possible for future hardfork";throw new Error(s)}if((i==null?void 0:i.forkHash)!==null&&(i==null?void 0:i.forkHash)!==void 0)return i.forkHash;if(!t)throw new Error("genesisHash required for forkHash calculation");return this._calcForkHash(r,t)}hardforkForForkHash(e){const t=this.hardforks().filter(r=>r.forkHash===e);return t.length>=1?t[t.length-1]:null}setForkHashes(e){var t;for(const r of this.hardforks()){const i=(t=r.timestamp)!==null&&t!==void 0?t:r.block;(r.forkHash===null||r.forkHash===void 0)&&(i!=null||typeof r.ttd<"u")&&(r.forkHash=this.forkHash(r.name,e))}}genesis(){return this._chainParams.genesis}hardforks(){return this._chainParams.hardforks}bootstrapNodes(){return this._chainParams.bootstrapNodes}dnsNetworks(){return this._chainParams.dnsNetworks}hardfork(){return this._hardfork}chainId(){return BigInt(this._chainParams.chainId)}chainName(){return this._chainParams.name}networkId(){return BigInt(this._chainParams.networkId)}eips(){return this._eips}consensusType(){const e=this.hardfork();let t;for(const r of this.HARDFORK_CHANGES)if("consensus"in r[1]&&(t=r[1].consensus.type),r[0]===e)break;return t??this._chainParams.consensus.type}consensusAlgorithm(){const e=this.hardfork();let t;for(const r of this.HARDFORK_CHANGES)if("consensus"in r[1]&&(t=r[1].consensus.algorithm),r[0]===e)break;return t??this._chainParams.consensus.algorithm}consensusConfig(){var e;const t=this.hardfork();let r;for(const i of this.HARDFORK_CHANGES)if("consensus"in i[1]&&(r=i[1].consensus[i[1].consensus.algorithm]),i[0]===t)break;return(e=r??this._chainParams.consensus[this.consensusAlgorithm()])!==null&&e!==void 0?e:{}}copy(){const e=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return e.removeAllListeners(),e}static _getInitializedChains(e){const t={};for(const[i,s]of Object.entries(lm))t[s]=i.toLowerCase();const r={mainnet:Xq,goerli:$q,sepolia:Kq};if(e)for(const i of e){const{name:s}=i;t[i.chainId.toString()]=s,r[s]=i}return r.names=t,r}}var Ss;(function(n){n[n.EIP155ReplayProtection=155]="EIP155ReplayProtection",n[n.EIP1559FeeMarket=1559]="EIP1559FeeMarket",n[n.EIP2718TypedTransaction=2718]="EIP2718TypedTransaction",n[n.EIP2930AccessLists=2930]="EIP2930AccessLists"})(Ss||(Ss={}));function O$(n){if(n.length===0)return!0;const e=n[0];return!!Array.isArray(e)}function U$(n){return!O$(n)}class Gl{constructor(e){if(e.length!==20)throw new Error("Invalid address length");this.buf=e}static zero(){return new Gl(H2(20))}equals(e){return t0(this.buf,e.buf)}isZero(){return this.equals(Gl.zero())}toString(){return Ct(this.buf)}toArray(){return this.buf}static publicToAddress(e,t=!1){let r=e;if(Hb(r),t&&r.length!==64&&(r=Wo.ProjectivePoint.fromHex(r).toRawBytes(!1).slice(1)),r.length!==64)throw new Error("Expected pubKey to be of length 64");return Tr(r).slice(-20)}}const F$=(n,e)=>{const t=n.param("vm","maxInitCodeSize");if(t&&BigInt(e)>t)throw new Error(`the initcode size of this transaction is too large: it is ${e} while the max is ${n.param("vm","maxInitCodeSize")}`)},X2=n=>{let e,t;if(U$(n)){e=n;const r=[];for(let i=0;i<n.length;i+=1){const s=n[i],o=Sn(s.address),a=[];for(let c=0;c<s.storageKeys.length;c+=1)a.push(Sn(s.storageKeys[c]));r.push([o,a])}t=r}else{t=n??[];const r=[];for(let i=0;i<t.length;i+=1){const s=t[i],o=Ct(s[0]),a=[];for(let l=0;l<s[1].length;l+=1)a.push(Ct(s[1][l]));const c={address:o,storageKeys:a};r.push(c)}e=r}return{AccessListJSON:e,accessList:t}},K2=n=>{for(let e=0;e<n.length;e+=1){const t=n[e],r=t[0],i=t[1];if(t[2]!==void 0)throw new Error("Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.");if(r.length!==20)throw new Error("Invalid EIP-2930 transaction: address length should be 20 bytes");for(let s=0;s<i.length;s+=1)if(i[s].length!==32)throw new Error("Invalid EIP-2930 transaction: storage slot length should be 32 bytes")}},Y2=n=>{const e=[];for(let t=0;t<n.length;t+=1){const r=n[t],i={address:Ct(xE(r[0],20)),storageKeys:[]},s=r&&r[1];for(let o=0;o<s.length;o+=1){const a=s[o];i.storageKeys.push(Ct(xE(a,32)))}e.push(i)}return e},Q2=(n,e)=>{const t=e.param("gasPrices","accessListStorageKeyCost"),r=e.param("gasPrices","accessListAddressCost");let i=0;for(let o=0;o<n.length;o+=1){const c=n[o][1];i+=c.length}return n.length*Number(r)+i*Number(t)};class wu{constructor(e,t){var r,i;this.cache={hash:void 0,dataFee:void 0},this.activeCapabilities=[],this.DEFAULT_CHAIN=lm.Mainnet,this.DEFAULT_HARDFORK=_n.Merge;const{nonce:s,gasLimit:o,to:a,value:c,data:l,v:u,r:f,s:d,type:p}=e;this._type=Number(gn(Sn(p))),this.txOptions=t;const v=Sn(a===""?"0x":a),m=Sn(u===""?"0x":u),y=Sn(f===""?"0x":f),h=Sn(d===""?"0x":d);this.nonce=gn(Sn(s===""?"0x":s)),this.gasLimit=gn(Sn(o===""?"0x":o)),this.to=v.length>0?new Gl(v):void 0,this.value=gn(Sn(c===""?"0x":c)),this.data=Sn(l===""?"0x":l),this.v=m.length>0?gn(m):void 0,this.r=y.length>0?gn(y):void 0,this.s=h.length>0?gn(h):void 0,this._validateCannotExceedMaxInteger({value:this.value,r:this.r,s:this.s}),this._validateCannotExceedMaxInteger({gasLimit:this.gasLimit},64),this._validateCannotExceedMaxInteger({nonce:this.nonce},64,!0);const w=this.to===void 0||this.to===null,S=(r=t.allowUnlimitedInitCodeSize)!==null&&r!==void 0?r:!1,T=(i=t.common)!==null&&i!==void 0?i:this._getCommon();w&&T.isActivatedEIP(3860)&&!S&&F$(T,this.data.length)}get type(){return this._type}supports(e){return this.activeCapabilities.includes(e)}validate(e=!1){const t=[];return this.getBaseFee()>this.gasLimit&&t.push(`gasLimit is too low. given ${this.gasLimit}, need at least ${this.getBaseFee()}`),this.isSigned()&&!this.verifySignature()&&t.push("Invalid Signature"),e?t:t.length===0}_validateYParity(){const{v:e}=this;if(e!==void 0&&e!==BigInt(0)&&e!==BigInt(1)){const t=this._errorMsg("The y-parity of the transaction should either be 0 or 1");throw new Error(t)}}_validateHighS(){const{s:e}=this;if(this.common.gteHardfork("homestead")&&e!==void 0&&e>Nq){const t=this._errorMsg("Invalid Signature: s-values greater than secp256k1n/2 are considered invalid");throw new Error(t)}}getBaseFee(){const e=this.common.param("gasPrices","tx");let t=this.getDataFee();if(e&&(t+=e),this.common.gteHardfork("homestead")&&this.toCreationAddress()){const r=this.common.param("gasPrices","txCreation");r&&(t+=r)}return t}getDataFee(){const e=this.common.param("gasPrices","txDataZero"),t=this.common.param("gasPrices","txDataNonZero");let r=BigInt(0);for(let i=0;i<this.data.length;i+=1)this.data[i]===0?r+=e:r+=t;if((this.to===void 0||this.to===null)&&this.common.isActivatedEIP(3860)){const i=BigInt(Math.ceil(this.data.length/32)),s=this.common.param("gasPrices","initCodeWordCost")*i;r+=s}return r}toCreationAddress(){return this.to===void 0||this.to.buf.length===0}isSigned(){const{v:e,r:t,s:r}=this;return!(e===void 0||t===void 0||r===void 0)}verifySignature(){try{const e=this.getSenderPublicKey();return um(e).length!==0}catch{return!1}}getSenderAddress(){return new Gl(Gl.publicToAddress(this.getSenderPublicKey()))}sign(e){if(e.length!==32){const c=this._errorMsg("Private key must be 32 bytes in length.");throw new Error(c)}let t=!1;this.type===0&&this.common.gteHardfork("spuriousDragon")&&!this.supports(Ss.EIP155ReplayProtection)&&(this.activeCapabilities.push(Ss.EIP155ReplayProtection),t=!0);const r=this.getMessageToSign(!0),{v:i,r:s,s:o}=this._ecsign(r,e),a=this._processSignature(i,s,o);if(t){const c=this.activeCapabilities.indexOf(Ss.EIP155ReplayProtection);c>-1&&this.activeCapabilities.splice(c,1)}return a}_getCommon(e,t){var r,i,s,o;if(t!==void 0){const a=gn(Sn(t));if(e){if(e.chainId()!==a){const c=this._errorMsg("The chain ID does not match the chain ID of Common");throw new Error(c)}return e.copy()}return jn.isSupportedChainId(a)?new jn({chain:a,hardfork:this.DEFAULT_HARDFORK}):jn.custom({name:"custom-chain",networkId:a,chainId:a},{baseChain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}if(e!=null&&e.copy&&typeof(e==null?void 0:e.copy)=="function")return e.copy();if(e){const a=typeof e.hardfork=="function"?e.hardfork():e.hardfork;return jn.custom({name:"custom-chain",networkId:e.networkId?e.networkId():(i=BigInt((r=e.customChain)===null||r===void 0?void 0:r.networkId))!==null&&i!==void 0?i:void 0,chainId:e.chainId?e.chainId():(o=BigInt((s=e.customChain)===null||s===void 0?void 0:s.chainId))!==null&&o!==void 0?o:void 0},{baseChain:this.DEFAULT_CHAIN,hardfork:a||this.DEFAULT_HARDFORK})}return new jn({chain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}_validateCannotExceedMaxInteger(e,t=256,r=!1){for(const[i,s]of Object.entries(e))switch(t){case 64:if(r){if(s!==void 0&&s>=yE){const o=this._errorMsg(`${i} cannot equal or exceed MAX_UINT64 (2^64-1), given ${s}`);throw new Error(o)}}else if(s!==void 0&&s>yE){const o=this._errorMsg(`${i} cannot exceed MAX_UINT64 (2^64-1), given ${s}`);throw new Error(o)}break;case 256:if(r){if(s!==void 0&&s>=gd){const o=this._errorMsg(`${i} cannot equal or exceed MAX_INTEGER (2^256-1), given ${s}`);throw new Error(o)}}else if(s!==void 0&&s>gd){const o=this._errorMsg(`${i} cannot exceed MAX_INTEGER (2^256-1), given ${s}`);throw new Error(o)}break;default:{const o=this._errorMsg("unimplemented bits value");throw new Error(o)}}}static _validateNotArray(e){const t=["nonce","gasPrice","gasLimit","to","value","data","v","r","s","type","baseFee","maxFeePerGas","chainId"];for(const[r,i]of Object.entries(e))if(t.includes(r)&&Array.isArray(i))throw new Error(`${r} cannot be an array`)}_getSharedErrorPostfix(){let e="";try{e=this.isSigned()?Ct(this.hash()):"not available (unsigned)"}catch{e="error"}let t="";try{t=this.isSigned().toString()}catch{e="error"}let r="";try{r=this.common.hardfork()}catch{r="error"}let i=`tx type=${this.type} hash=${e} nonce=${this.nonce} value=${this.value} `;return i+=`signed=${t} hf=${r}`,i}_ecsign(e,t,r){const i=Wo.sign(e,t),s=i.toCompactRawBytes(),o=s.subarray(0,32),a=s.subarray(32,64),c=r===void 0?BigInt(i.recovery+27):BigInt(i.recovery+35)+BigInt(r)*BigInt(2);return{r:o,s:a,v:c}}static fromSerializedTx(e,t={}){}static fromTxData(e,t={}){}}const Fy=2,Ig=bn(Fy.toString(16).padStart(2,"0"));class oc extends wu{static fromTxData(e,t={}){return new oc(e,t)}static fromSerializedTx(e,t={}){if(!t0(e.subarray(0,1),Ig))throw new Error(`Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: ${Fy}, received: ${Ct(e.subarray(0,1))}`);const r=ai.decode(e.subarray(1));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return oc.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(e.length!==9&&e.length!==12)throw new Error("Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).");const[r,i,s,o,a,c,l,u,f,d,p,v]=e;return this._validateNotArray({chainId:r,v:d}),_b({nonce:i,maxPriorityFeePerGas:s,maxFeePerGas:o,gasLimit:a,value:l,v:d,r:p,s:v}),new oc({chainId:gn(r),nonce:i,maxPriorityFeePerGas:s,maxFeePerGas:o,gasLimit:a,to:c,value:l,data:u,accessList:f??[],v:d!==void 0?gn(d):void 0,r:p,s:v},t)}constructor(e,t={}){var r;super(Object.assign(Object.assign({},e),{type:Fy}),t),this.DEFAULT_HARDFORK="london";const{chainId:i,accessList:s,maxFeePerGas:o,maxPriorityFeePerGas:a}=e;if(this.common=this._getCommon(t.common,i),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(1559))throw new Error("EIP-1559 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);const c=X2(s??[]);if(this.accessList=c.accessList,this.AccessListJSON=c.AccessListJSON,K2(this.accessList),this.maxFeePerGas=gn(Sn(o===""?"0x":o)),this.maxPriorityFeePerGas=gn(Sn(a===""?"0x":a)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),wu._validateNotArray(e),this.gasLimit*this.maxFeePerGas>gd){const u=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(u)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const u=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(u)}this._validateYParity(),this._validateHighS(),((r=t==null?void 0:t.freeze)!==null&&r!==void 0?r:!0)&&Object.freeze(this)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(Q2(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(e=BigInt(0)){const t=this.maxPriorityFeePerGas,r=this.maxFeePerGas-e,s=(t<r?t:r)+e;return this.gasLimit*s+this.value}raw(){return[Gt(this.chainId),Gt(this.nonce),Gt(this.maxPriorityFeePerGas),Gt(this.maxFeePerGas),Gt(this.gasLimit),this.to!==void 0?this.to.buf:Uint8Array.from([]),Gt(this.value),this.data,this.accessList,this.v!==void 0?Gt(this.v):Uint8Array.from([]),this.r!==void 0?Gt(this.r):Uint8Array.from([]),this.s!==void 0?Gt(this.s):Uint8Array.from([])]}serialize(){const e=this.raw();return Br(Ig,ai.encode(e))}getMessageToSign(e=!0){const t=this.raw().slice(0,9),r=Br(Ig,ai.encode(t));return e?Tr(r):r}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=Tr(this.serialize())),this.cache.hash):Tr(this.serialize())}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const s=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(s)}const e=this.getMessageToVerifySignature(),{v:t,r,s:i}=this;this._validateHighS();try{return zb(e,t+BigInt(27),Gt(r),Gt(i))}catch{const o=this._errorMsg("Invalid Signature");throw new Error(o)}}_processSignature(e,t,r){const i=Object.assign(Object.assign({},this.txOptions),{common:this.common});return oc.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:gn(t),s:gn(r)},i)}toJSON(){const e=Y2(this.accessList);return{chainId:Tn(this.chainId),nonce:Tn(this.nonce),maxPriorityFeePerGas:Tn(this.maxPriorityFeePerGas),maxFeePerGas:Tn(this.maxFeePerGas),gasLimit:Tn(this.gasLimit),to:this.to!==void 0?this.to.toString():void 0,value:Tn(this.value),data:Ct(this.data),accessList:e,v:this.v!==void 0?Tn(this.v):void 0,r:this.r!==void 0?Tn(this.r):void 0,s:this.s!==void 0?Tn(this.s):void 0}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}const Hy=1,Cg=bn(Hy.toString(16).padStart(2,"0"));class ac extends wu{static fromTxData(e,t={}){return new ac(e,t)}static fromSerializedTx(e,t={}){if(!t0(e.subarray(0,1),Cg))throw new Error(`Invalid serialized tx input: not an EIP-2930 transaction (wrong tx type, expected: ${Hy}, received: ${Ct(e.subarray(0,1))}`);const r=ai.decode(Uint8Array.from(e.subarray(1)));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return ac.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(e.length!==8&&e.length!==11)throw new Error("Invalid EIP-2930 transaction. Only expecting 8 values (for unsigned tx) or 11 values (for signed tx).");const[r,i,s,o,a,c,l,u,f,d,p]=e;this._validateNotArray({chainId:r,v:f}),_b({nonce:i,gasPrice:s,gasLimit:o,value:c,v:f,r:d,s:p});const v=[];return new ac({chainId:gn(r),nonce:i,gasPrice:s,gasLimit:o,to:a,value:c,data:l,accessList:u??v,v:f!==void 0?gn(f):void 0,r:d,s:p},t)}constructor(e,t={}){var r;super(Object.assign(Object.assign({},e),{type:Hy}),t),this.DEFAULT_HARDFORK="berlin";const{chainId:i,accessList:s,gasPrice:o}=e;if(this.common=this._getCommon(t.common,i),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(2930))throw new Error("EIP-2930 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([2718,2930]);const a=X2(s??[]);if(this.accessList=a.accessList,this.AccessListJSON=a.AccessListJSON,K2(this.accessList),this.gasPrice=gn(Sn(o===""?"0x":o)),this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),wu._validateNotArray(e),this.gasPrice*this.gasLimit>gd){const l=this._errorMsg("gasLimit * gasPrice cannot exceed MAX_INTEGER");throw new Error(l)}this._validateYParity(),this._validateHighS(),((r=t==null?void 0:t.freeze)!==null&&r!==void 0?r:!0)&&Object.freeze(this)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(Q2(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}raw(){return[Gt(this.chainId),Gt(this.nonce),Gt(this.gasPrice),Gt(this.gasLimit),this.to!==void 0?this.to.buf:Uint8Array.from([]),Gt(this.value),this.data,this.accessList,this.v!==void 0?Gt(this.v):Uint8Array.from([]),this.r!==void 0?Gt(this.r):Uint8Array.from([]),this.s!==void 0?Gt(this.s):Uint8Array.from([])]}serialize(){const e=this.raw();return Br(Cg,ai.encode(e))}getMessageToSign(e=!0){const t=this.raw().slice(0,8),r=Br(Cg,ai.encode(t));return e?Tr(r):r}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=Tr(this.serialize())),this.cache.hash):Tr(this.serialize())}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const s=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(s)}const e=this.getMessageToVerifySignature(),{v:t,r,s:i}=this;this._validateHighS();try{return zb(e,t+BigInt(27),Gt(r),Gt(i))}catch{const o=this._errorMsg("Invalid Signature");throw new Error(o)}}_processSignature(e,t,r){const i=Object.assign(Object.assign({},this.txOptions),{common:this.common});return ac.fromTxData({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:gn(t),s:gn(r)},i)}toJSON(){const e=Y2(this.accessList);return{chainId:Tn(this.chainId),nonce:Tn(this.nonce),gasPrice:Tn(this.gasPrice),gasLimit:Tn(this.gasLimit),to:this.to!==void 0?this.to.toString():void 0,value:Tn(this.value),data:Ct(this.data),accessList:e,v:this.v!==void 0?Tn(this.v):void 0,r:this.r!==void 0?Tn(this.r):void 0,s:this.s!==void 0?Tn(this.s):void 0}}errorStr(){var e,t;let r=this._getSharedErrorPostfix();return r+=` gasPrice=${this.gasPrice} accessListCount=${(t=(e=this.accessList)===null||e===void 0?void 0:e.length)!==null&&t!==void 0?t:0}`,r}_errorMsg(e){return`${e} (${this.errorStr()})`}}const H$=0;function EE(n,e){const t=Number(n),r=Number(e)*2;return t===r+35||t===r+36}class ma extends wu{static fromTxData(e,t={}){return new ma(e,t)}static fromSerializedTx(e,t={}){const r=ai.decode(e);if(!Array.isArray(r))throw new Error("Invalid serialized tx input. Must be array");return this.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(e.length!==6&&e.length!==9)throw new Error("Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).");const[r,i,s,o,a,c,l,u,f]=e;return _b({nonce:r,gasPrice:i,gasLimit:s,value:a,v:l,r:u,s:f}),new ma({nonce:r,gasPrice:i,gasLimit:s,to:o,value:a,data:c,v:l,r:u,s:f},t)}constructor(e,t={}){var r;if(super(Object.assign(Object.assign({},e),{type:H$}),t),this.common=this._validateTxV(this.v,t.common),this.gasPrice=gn(Sn(e.gasPrice===""?"0x":e.gasPrice)),this.gasPrice*this.gasLimit>gd){const s=this._errorMsg("gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)");throw new Error(s)}this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),wu._validateNotArray(e),this.common.gteHardfork("spuriousDragon")&&(this.isSigned()?EE(this.v,this.common.chainId())&&this.activeCapabilities.push(Ss.EIP155ReplayProtection):this.activeCapabilities.push(Ss.EIP155ReplayProtection)),((r=t==null?void 0:t.freeze)!==null&&r!==void 0?r:!0)&&Object.freeze(this)}raw(){return[Gt(this.nonce),Gt(this.gasPrice),Gt(this.gasLimit),this.to!==void 0?this.to.buf:Uint8Array.from([]),Gt(this.value),this.data,this.v!==void 0?Gt(this.v):Uint8Array.from([]),this.r!==void 0?Gt(this.r):Uint8Array.from([]),this.s!==void 0?Gt(this.s):Uint8Array.from([])]}serialize(){return ai.encode(this.raw())}_getMessageToSign(){const e=[Gt(this.nonce),Gt(this.gasPrice),Gt(this.gasLimit),this.to!==void 0?this.to.buf:Uint8Array.from([]),Gt(this.value),this.data];return this.supports(Ss.EIP155ReplayProtection)&&(e.push(Sn(this.common.chainId())),e.push(um(Sn(0))),e.push(um(Sn(0)))),e}getMessageToSign(e=!0){const t=this._getMessageToSign();return e?Tr(ai.encode(t)):t}getDataFee(){return this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork()?this.cache.dataFee.value:(Object.isFrozen(this)&&(this.cache.dataFee={value:super.getDataFee(),hardfork:this.common.hardfork()}),super.getDataFee())}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=Tr(ai.encode(this.raw()))),this.cache.hash):Tr(ai.encode(this.raw()))}getMessageToVerifySignature(){if(!this.isSigned()){const t=this._errorMsg("This transaction is not signed");throw new Error(t)}const e=this._getMessageToSign();return Tr(ai.encode(e))}getSenderPublicKey(){const e=this.getMessageToVerifySignature(),{v:t,r,s:i}=this;this._validateHighS();try{return zb(e,t,Gt(r),Gt(i),this.supports(Ss.EIP155ReplayProtection)?this.common.chainId():void 0)}catch{const o=this._errorMsg("Invalid Signature");throw new Error(o)}}_processSignature(e,t,r){let i=e;this.supports(Ss.EIP155ReplayProtection)&&(i+=this.common.chainId()*BigInt(2)+BigInt(8));const s=Object.assign(Object.assign({},this.txOptions),{common:this.common});return ma.fromTxData({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,v:i,r:gn(t),s:gn(r)},s)}toJSON(){return{nonce:Tn(this.nonce),gasPrice:Tn(this.gasPrice),gasLimit:Tn(this.gasLimit),to:this.to!==void 0?this.to.toString():void 0,value:Tn(this.value),data:Ct(this.data),v:this.v!==void 0?Tn(this.v):void 0,r:this.r!==void 0?Tn(this.r):void 0,s:this.s!==void 0?Tn(this.s):void 0}}_validateTxV(e,t){let r;const i=e!==void 0?Number(e):void 0;if(i!==void 0&&i<37&&i!==27&&i!==28)throw new Error(`Legacy txs need either v = 27/28 or v >= 37 (EIP-155 replay protection), got v = ${i}`);if(i!==void 0&&i!==0&&(!t||t.gteHardfork("spuriousDragon"))&&i!==27&&i!==28)if(t){if(!EE(BigInt(i),t.chainId()))throw new Error(`Incompatible EIP155-based V ${i} and chain id ${t.chainId()}. See the Common parameter of the Transaction constructor to set the chain id.`)}else{let s;(i-35)%2===0?s=35:s=36,r=BigInt(i-s)/BigInt(2)}return this._getCommon(t,r)}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}const Pg=new Map;class Bc{constructor(){}static typeToInt(e){return Number(gn(Sn(e)))}static registerTransactionType(e,t){const r=Bc.typeToInt(e);Pg.set(r,t)}static fromTxData(e,t={}){if(!("type"in e)||e.type===void 0)return ma.fromTxData(e,t);const r=Bc.typeToInt(e.type);if(r===0)return ma.fromTxData(e,t);if(r===1)return ac.fromTxData(e,t);if(r===2)return oc.fromTxData(e,t);const i=Pg.get(r);if(i!=null&&i.fromTxData)return i.fromTxData(e,t);throw new Error(`Tx instantiation with type ${r} not supported`)}static fromSerializedData(e,t={}){if(e[0]<=127)switch(e[0]){case 1:return ac.fromSerializedTx(e,t);case 2:return oc.fromSerializedTx(e,t);default:{const r=Pg.get(Number(e[0]));if(r!=null&&r.fromSerializedTx)return r.fromSerializedTx(e,t);throw new Error(`TypedTransaction with ID ${e[0]} unknown`)}}else return ma.fromSerializedTx(e,t)}static fromBlockBodyData(e,t={}){if(ka(e))return this.fromSerializedData(e,t);if(Array.isArray(e))return ma.fromValuesArray(e,t);throw new Error("Cannot decode transaction: unknown type input")}}var f0=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const Gu=(n,e)=>{let t;if(!e&&typeof n=="string"&&en(n)&&n.length!==66)throw new zA;try{t=ka(n)?n:js(n)}catch{throw new q9}if(!e&&t.byteLength!==32)throw new zA;return t},Vb=(n,e=!1)=>{const t=en(n)?n:is(n),r=bn(t),i=bn(JM(`Ethereum Signed Message:
${r.byteLength}`)),s=e?r:Br(i,r);return di(s)},z$=(n,e)=>{const t=Gu(e),r=Wo.sign(n.substring(2),t),i=r.toCompactRawBytes(),s=r.r.toString(16).padStart(64,"0"),o=r.s.toString(16).padStart(64,"0"),a=r.recovery+27;return{messageHash:n,v:$n(a),r:`0x${s}`,s:`0x${o}`,signature:`${Ct(i)}${a.toString(16)}`}},Z2=(n,e)=>{const t=Vb(n),{messageHash:r,v:i,r:s,s:o,signature:a}=z$(t,e);return{message:n,messageHash:r,v:i,r:s,s:o,signature:a}},G$=(n,e)=>f0(void 0,void 0,void 0,function*(){const t=n.sign(bn(e));if(le(t.v)||le(t.r)||le(t.s))throw new Ay("Signer Error");const r=t.validate(!0);if(r.length>0){let o="Signer Error ";for(const a of r)o+=`${o} ${a}.`;throw new Ay(o)}const i=Ct(t.serialize()),s=di(i);return{messageHash:Ct(t.getMessageToSign(!0)),v:`0x${t.v.toString(16)}`,r:`0x${t.r.toString(16).padStart(64,"0")}`,s:`0x${t.s.toString(16).padStart(64,"0")}`,rawTransaction:i,transactionHash:Ct(s)}}),V$=n=>{if(le(n))throw new l7;const e=Bc.fromSerializedData(bn(n));return Ys(e.getSenderAddress().toString())},zy=(n,e,t,r,i)=>{if(typeof n=="object"){const f=`${n.r}${n.s.slice(2)}${n.v.slice(2)}`;return zy(n.messageHash,f,t)}if(typeof e=="string"&&typeof t=="string"&&!le(r)){const f=`${t}${r.slice(2)}${e.slice(2)}`;return zy(n,f,i)}if(le(e))throw new $9("signature string undefined");const s=130,o=t?n:Vb(n);let a=parseInt(e.substring(s),16);a>26&&(a-=27);const c=Wo.Signature.fromCompact(e.slice(2,s)).addRecoveryBit(a).recoverPublicKey(o.replace("0x","")).toRawBytes(!1),l=di(c.subarray(1));return Ys(`0x${l.slice(-40)}`)},d0=n=>{const e=Gu(n),t=Wo.getPublicKey(e,!1),i=di(t.slice(1)).slice(-40);return Ys(`0x${i}`)},W$=(n,e)=>{const t=Gu(n);return`0x${Ct(Wo.getPublicKey(t,e)).slice(4)}`},J2=(n,e,t)=>f0(void 0,void 0,void 0,function*(){var r,i,s,o,a,c,l;const u=Gu(n);let f;if(t!=null&&t.salt?f=typeof t.salt=="string"?bn(t.salt):t.salt:f=hd(32),!(vb(e)||ka(e)))throw new Y9;const d=typeof e=="string"?bn(is(e)):e;let p;if(t!=null&&t.iv){if(p=typeof t.iv=="string"?bn(t.iv):t.iv,p.length!==16)throw new Q9}else p=hd(16);const v=(r=t==null?void 0:t.kdf)!==null&&r!==void 0?r:"scrypt";let m,y;if(v==="pbkdf2"){if(y={dklen:(i=t==null?void 0:t.dklen)!==null&&i!==void 0?i:32,salt:Ct(f).replace("0x",""),c:(s=t==null?void 0:t.c)!==null&&s!==void 0?s:262144,prf:"hmac-sha256"},y.c<1e3)throw new Z9;m=M2(d,f,y.c,y.dklen,"sha256")}else if(v==="scrypt")y={n:(o=t==null?void 0:t.n)!==null&&o!==void 0?o:8192,r:(a=t==null?void 0:t.r)!==null&&a!==void 0?a:8,p:(c=t==null?void 0:t.p)!==null&&c!==void 0?c:1,dklen:(l=t==null?void 0:t.dklen)!==null&&l!==void 0?l:32,salt:Ct(f).replace("0x","")},m=R2(d,f,y.n,y.p,y.r,y.dklen);else throw new fM;const h=yield Nb(u,m.slice(0,16),p,"aes-128-ctr"),w=Ct(h).slice(2),S=di(Br(m.slice(16,32),h)).replace("0x","");return{version:3,id:Mb(),address:d0(u).toLowerCase().replace("0x",""),crypto:{ciphertext:w,cipherparams:{iv:Ct(p).replace("0x","")},cipher:"aes-128-ctr",kdf:v,kdfparams:y,mac:S}}}),Wb=(n,e)=>{const t=Gu(n,e);return{address:d0(t),privateKey:Ct(t),signTransaction:r=>{throw new Ay("Do not have network access to sign the transaction")},sign:r=>Z2(typeof r=="string"?r:JSON.stringify(r),t),encrypt:(r,i)=>f0(void 0,void 0,void 0,function*(){return J2(t,r,i)})}},j$=()=>{const n=Wo.utils.randomPrivateKey();return Wb(`${Ct(n)}`)},q$=(n,e,t)=>f0(void 0,void 0,void 0,function*(){const r=typeof n=="object"?n:JSON.parse(t?n.toLowerCase():n);if(nt.validateJSONSchema(Bq,r),r.version!==3)throw new K9;const i=typeof e=="string"?bn(is(e)):e;nt.validate(["bytes"],[i]);let s;if(r.crypto.kdf==="scrypt"){const l=r.crypto.kdfparams,u=typeof l.salt=="string"?bn(l.salt):l.salt;s=R2(i,u,l.n,l.p,l.r,l.dklen)}else if(r.crypto.kdf==="pbkdf2"){const l=r.crypto.kdfparams,u=typeof l.salt=="string"?bn(l.salt):l.salt;s=M2(i,u,l.c,l.dklen,"sha256")}else throw new fM;const o=bn(r.crypto.ciphertext);if(di(Br(s.slice(16,32),o)).replace("0x","")!==r.crypto.mac)throw new X9;const c=yield Oj(bn(r.crypto.ciphertext),s.slice(0,16),bn(r.crypto.cipherparams.iv));return Wb(c)});var SE=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const $$=1e3;class X${constructor(e){this._requestManager=e,this._requests=new Map}get requests(){return[...this._requests.values()].map(e=>e.payload)}add(e){const t=Cc(e),r=new sm;return this._requests.set(t.id,{payload:t,promise:r}),r}execute(e){return SE(this,void 0,void 0,function*(){var t;if(this.requests.length===0)return Promise.resolve([]);const r=new sm({timeout:(t=e==null?void 0:e.timeout)!==null&&t!==void 0?t:$$,eagerStart:!0,timeoutMessage:"Batch request timeout"});return this._processBatchRequest(r).catch(i=>r.reject(i)),r.catch(i=>{i instanceof dM&&this._abortAllRequests("Batch request timeout"),r.reject(i)}),r})}_processBatchRequest(e){return SE(this,void 0,void 0,function*(){var t,r;const i=yield this._requestManager.sendBatch([...this._requests.values()].map(a=>a.payload));if(i.length!==this._requests.size)throw this._abortAllRequests("Invalid batch response"),new Es(i,`Batch request size mismatch the results size. Requests: ${this._requests.size}, Responses: ${i.length}`);const s=this.requests.map(a=>a.id).map(Number).sort((a,c)=>a-c),o=i.map(a=>a.id).map(Number).sort((a,c)=>a-c);if(JSON.stringify(s)!==JSON.stringify(o))throw this._abortAllRequests("Invalid batch response"),new Es(i,`Batch request mismatch the results. Requests: [${s.join()}], Responses: [${o.join()}]`);for(const a of i)_a(a)?(t=this._requests.get(a.id))===null||t===void 0||t.promise.resolve(a.result):ba(a)&&((r=this._requests.get(a.id))===null||r===void 0||r.promise.reject(a.error));e.resolve(i)})}_abortAllRequests(e){for(const{promise:t}of this._requests.values())t.reject(new s7(e))}}var K$=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};class jr extends Cj{constructor(e){var t;if(super(),this.providers=hc.providers,at(e)||typeof e=="string"&&e.trim()!==""||om(e)){this._requestManager=new hc(e),this._subscriptionManager=new am(this._requestManager,{});return}const{config:r,provider:i,requestManager:s,subscriptionManager:o,registeredSubscriptions:a,accountProvider:c,wallet:l,requestManagerMiddleware:u}=e;this.setConfig(r??{}),this._requestManager=s??new hc(i,(t=r==null?void 0:r.enableExperimentalFeatures)===null||t===void 0?void 0:t.useSubscriptionWhenCheckingBlockTimeout,u),o?this._subscriptionManager=o:this._subscriptionManager=new am(this.requestManager,a??{}),c&&(this._accountProvider=c),l&&(this._wallet=l)}get requestManager(){return this._requestManager}get subscriptionManager(){return this._subscriptionManager}get wallet(){return this._wallet}get accountProvider(){return this._accountProvider}static fromContextObject(...e){return new this(...e.reverse())}getContextObject(){var e;return{config:this.config,provider:this.provider,requestManager:this.requestManager,subscriptionManager:this.subscriptionManager,registeredSubscriptions:(e=this.subscriptionManager)===null||e===void 0?void 0:e.registeredSubscriptions,providers:this.providers,wallet:this.wallet,accountProvider:this.accountProvider}}use(e,...t){const r=new e(...t,this.getContextObject());return this.on(Pc.CONFIG_CHANGE,i=>{r.setConfig({[i.name]:i.newValue})}),this[e.name]=r,r}link(e){this.setConfig(e.config),this._requestManager=e.requestManager,this.provider=e.provider,this._subscriptionManager=e.subscriptionManager,this._wallet=e.wallet,this._accountProvider=e._accountProvider,e.on(Pc.CONFIG_CHANGE,t=>{this.setConfig({[t.name]:t.newValue})})}registerPlugin(e){if(this[e.pluginNamespace]!==void 0)throw new o7(e.pluginNamespace);const t={[e.pluginNamespace]:e};t[e.pluginNamespace].link(this),Object.assign(this,t)}get provider(){return this.currentProvider}set provider(e){this.requestManager.setProvider(e)}get currentProvider(){return this.requestManager.provider}set currentProvider(e){this.requestManager.setProvider(e)}get givenProvider(){return jr.givenProvider}setProvider(e){return this.provider=e,!0}setRequestManagerMiddleware(e){this.requestManager.setMiddleware(e)}get BatchRequest(){return X$.bind(void 0,this._requestManager)}extend(e){var t;return e.property&&!this[e.property]&&(this[e.property]={}),(t=e.methods)===null||t===void 0||t.forEach(r=>{const i=(...s)=>K$(this,void 0,void 0,function*(){return this.requestManager.send({method:r.call,params:s})});e.property?this[e.property][r.name]=i:this[r.name]=i}),this}}jr.providers=hc.providers;class Hn{constructor(e){if(this.toAddress=()=>{if(this.isDirect()){const t=this._iban.slice(4),r=Hn._parseInt(t,36),i=fd(r,40);return Ys(i)}throw new Error("Iban is indirect and cannot be converted. Must be length of 34 or 35")},Hn.isIndirect(e)||Hn.isDirect(e))this._iban=e;else throw new Error("Invalid IBAN was provided")}static isDirect(e){return e.length===34||e.length===35}isDirect(){return Hn.isDirect(this._iban)}static isIndirect(e){return e.length===20}isIndirect(){return Hn.isIndirect(this._iban)}static isValid(e){return/^XE[0-9]{2}(ETH[0-9A-Z]{13}|[0-9A-Z]{30,31})$/.test(e)&&Hn._mod9710(Hn._iso13616Prepare(e))===1}isValid(){return Hn.isValid(this._iban)}static fromBban(e){const t="XE",i=`0${(98-this._mod9710(this._iso13616Prepare(`${t}00${e}`))).toString()}`.slice(-2);return new Hn(`${t}${i}${e}`)}static createIndirect(e){return Hn.fromBban(`ETH${e.institution}${e.identifier}`)}static fromAddress(e){if(!fi(e))throw new cb(e);const r=BigInt(Gd(e)).toString(36),i=fd(r,15);return Hn.fromBban(i.toUpperCase())}static toIban(e){return Hn.fromAddress(e).toString()}client(){return this.isIndirect()?this._iban.slice(11):""}checksum(){return this._iban.slice(2,4)}institution(){return this.isIndirect()?this._iban.slice(7,11):""}toString(){return this._iban}}Hn._iso13616Prepare=n=>{const e="A".charCodeAt(0),t="Z".charCodeAt(0),r=n.toUpperCase();return`${r.slice(4)}${r.slice(0,4)}`.split("").map(s=>{const o=s.charCodeAt(0);return o>=e&&o<=t?o-e+10:s}).join("")};Hn._parseInt=(n,e)=>[...n].reduce((t,r)=>BigInt(parseInt(r,e))+BigInt(e)*t,BigInt(0));Hn._mod9710=n=>{let e=n,t;for(;e.length>2;)t=e.slice(0,9),e=`${(parseInt(t,10)%97).toString()}${e.slice(t.length)}`;return parseInt(e,10)%97};Hn.toAddress=n=>new Hn(n).toAddress();var Ng=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},eR;class tR extends a0{constructor(e){super(),this[eR]="Promise",this._promise=new Promise(e)}then(e,t){return Ng(this,void 0,void 0,function*(){return this._promise.then(e,t)})}catch(e){return Ng(this,void 0,void 0,function*(){return this._promise.catch(e)})}finally(e){return Ng(this,void 0,void 0,function*(){return this._promise.finally(e)})}on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}}eR=Symbol.toStringTag;(function(n,e){if(n.setImmediate)return;var t=1,r={},i=!1,s=n.document,o;function a(w){typeof w!="function"&&(w=new Function(""+w));for(var S=new Array(arguments.length-1),T=0;T<S.length;T++)S[T]=arguments[T+1];var C={callback:w,args:S};return r[t]=C,o(t),t++}function c(w){delete r[w]}function l(w){var S=w.callback,T=w.args;switch(T.length){case 0:S();break;case 1:S(T[0]);break;case 2:S(T[0],T[1]);break;case 3:S(T[0],T[1],T[2]);break;default:S.apply(e,T);break}}function u(w){if(i)setTimeout(u,0,w);else{var S=r[w];if(S){i=!0;try{l(S)}finally{c(w),i=!1}}}}function f(){o=function(w){process.nextTick(function(){u(w)})}}function d(){if(n.postMessage&&!n.importScripts){var w=!0,S=n.onmessage;return n.onmessage=function(){w=!1},n.postMessage("","*"),n.onmessage=S,w}}function p(){var w="setImmediate$"+Math.random()+"$",S=function(T){T.source===n&&typeof T.data=="string"&&T.data.indexOf(w)===0&&u(+T.data.slice(w.length))};n.addEventListener?n.addEventListener("message",S,!1):n.attachEvent("onmessage",S),o=function(T){n.postMessage(w+T,"*")}}function v(){var w=new MessageChannel;w.port1.onmessage=function(S){var T=S.data;u(T)},o=function(S){w.port2.postMessage(S)}}function m(){var w=s.documentElement;o=function(S){var T=s.createElement("script");T.onreadystatechange=function(){u(S),T.onreadystatechange=null,w.removeChild(T),T=null},w.appendChild(T)}}function y(){o=function(w){setTimeout(u,0,w)}}var h=Object.getPrototypeOf&&Object.getPrototypeOf(n);h=h&&h.setTimeout?h:n,{}.toString.call(globalThis.process)==="[object process]"?f():d()?p():n.MessageChannel?v():s&&"onreadystatechange"in s.createElement("script")?m():y(),h.setImmediate=a,h.clearImmediate=c})(typeof self>"u"?typeof Ao>"u"?Ao:Ao:self);var pt=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};function Y$(n){return pt(this,void 0,void 0,function*(){return n.send({method:"eth_protocolVersion",params:[]})})}function nR(n){return pt(this,void 0,void 0,function*(){return n.send({method:"eth_syncing",params:[]})})}function Q$(n){return pt(this,void 0,void 0,function*(){return n.send({method:"eth_coinbase",params:[]})})}function Z$(n){return pt(this,void 0,void 0,function*(){return n.send({method:"eth_mining",params:[]})})}function J$(n){return pt(this,void 0,void 0,function*(){return n.send({method:"eth_hashrate",params:[]})})}function eX(n){return pt(this,void 0,void 0,function*(){return n.send({method:"eth_gasPrice",params:[]})})}function tX(n){return pt(this,void 0,void 0,function*(){return n.send({method:"eth_maxPriorityFeePerGas",params:[]})})}function nX(n){return pt(this,void 0,void 0,function*(){return n.send({method:"eth_accounts",params:[]})})}function rX(n){return pt(this,void 0,void 0,function*(){return n.send({method:"eth_blockNumber",params:[]})})}function iX(n,e,t){return pt(this,void 0,void 0,function*(){return nt.validate(["address","blockNumberOrTag"],[e,t]),n.send({method:"eth_getBalance",params:[e,t]})})}function sX(n,e,t,r){return pt(this,void 0,void 0,function*(){return nt.validate(["address","hex","blockNumberOrTag"],[e,t,r]),n.send({method:"eth_getStorageAt",params:[e,t,r]})})}function oX(n,e,t){return pt(this,void 0,void 0,function*(){return nt.validate(["address","blockNumberOrTag"],[e,t]),n.send({method:"eth_getTransactionCount",params:[e,t]})})}function aX(n,e){return pt(this,void 0,void 0,function*(){return nt.validate(["bytes32"],[e]),n.send({method:"eth_getBlockTransactionCountByHash",params:[e]})})}function cX(n,e){return pt(this,void 0,void 0,function*(){return nt.validate(["blockNumberOrTag"],[e]),n.send({method:"eth_getBlockTransactionCountByNumber",params:[e]})})}function lX(n,e){return pt(this,void 0,void 0,function*(){return nt.validate(["bytes32"],[e]),n.send({method:"eth_getUncleCountByBlockHash",params:[e]})})}function uX(n,e){return pt(this,void 0,void 0,function*(){return nt.validate(["blockNumberOrTag"],[e]),n.send({method:"eth_getUncleCountByBlockNumber",params:[e]})})}function fX(n,e,t){return pt(this,void 0,void 0,function*(){return nt.validate(["address","blockNumberOrTag"],[e,t]),n.send({method:"eth_getCode",params:[e,t]})})}function dX(n,e,t){return pt(this,void 0,void 0,function*(){return nt.validate(["address","hex"],[e,t]),n.send({method:"eth_sign",params:[e,t]})})}function hX(n,e){return pt(this,void 0,void 0,function*(){return n.send({method:"eth_signTransaction",params:[e]})})}function pX(n,e){return pt(this,void 0,void 0,function*(){return n.send({method:"eth_sendTransaction",params:[e]})})}function rR(n,e){return pt(this,void 0,void 0,function*(){return nt.validate(["hex"],[e]),n.send({method:"eth_sendRawTransaction",params:[e]})})}function mX(n,e,t){return pt(this,void 0,void 0,function*(){return nt.validate(["blockNumberOrTag"],[t]),n.send({method:"eth_call",params:[e,t]})})}function gX(n,e,t){return pt(this,void 0,void 0,function*(){return nt.validate(["blockNumberOrTag"],[t]),n.send({method:"eth_estimateGas",params:[e,t]})})}function vX(n,e,t){return pt(this,void 0,void 0,function*(){return nt.validate(["bytes32","bool"],[e,t]),n.send({method:"eth_getBlockByHash",params:[e,t]})})}function iR(n,e,t){return pt(this,void 0,void 0,function*(){return nt.validate(["blockNumberOrTag","bool"],[e,t]),n.send({method:"eth_getBlockByNumber",params:[e,t]})})}function yX(n,e){return pt(this,void 0,void 0,function*(){return nt.validate(["bytes32"],[e]),n.send({method:"eth_getTransactionByHash",params:[e]})})}function _X(n,e,t){return pt(this,void 0,void 0,function*(){return nt.validate(["bytes32","hex"],[e,t]),n.send({method:"eth_getTransactionByBlockHashAndIndex",params:[e,t]})})}function bX(n,e,t){return pt(this,void 0,void 0,function*(){return nt.validate(["blockNumberOrTag","hex"],[e,t]),n.send({method:"eth_getTransactionByBlockNumberAndIndex",params:[e,t]})})}function xX(n,e){return pt(this,void 0,void 0,function*(){return nt.validate(["bytes32"],[e]),n.send({method:"eth_getTransactionReceipt",params:[e]})})}function wX(n,e,t){return pt(this,void 0,void 0,function*(){return nt.validate(["bytes32","hex"],[e,t]),n.send({method:"eth_getUncleByBlockHashAndIndex",params:[e,t]})})}function AX(n,e,t){return pt(this,void 0,void 0,function*(){return nt.validate(["blockNumberOrTag","hex"],[e,t]),n.send({method:"eth_getUncleByBlockNumberAndIndex",params:[e,t]})})}function EX(n,e){return pt(this,void 0,void 0,function*(){return nt.validate(["filter"],[e]),n.send({method:"eth_newFilter",params:[e]})})}function SX(n){return pt(this,void 0,void 0,function*(){return n.send({method:"eth_newBlockFilter",params:[]})})}function TX(n){return pt(this,void 0,void 0,function*(){return n.send({method:"eth_newPendingTransactionFilter",params:[]})})}function MX(n,e){return pt(this,void 0,void 0,function*(){return nt.validate(["hex"],[e]),n.send({method:"eth_uninstallFilter",params:[e]})})}function RX(n,e){return pt(this,void 0,void 0,function*(){return nt.validate(["hex"],[e]),n.send({method:"eth_getFilterChanges",params:[e]})})}function IX(n,e){return pt(this,void 0,void 0,function*(){return nt.validate(["hex"],[e]),n.send({method:"eth_getFilterLogs",params:[e]})})}function CX(n,e){return pt(this,void 0,void 0,function*(){return nt.validate(["filter"],[e]),n.send({method:"eth_getLogs",params:[e]})})}function PX(n){return pt(this,void 0,void 0,function*(){return n.send({method:"eth_getWork",params:[]})})}function NX(n,e,t,r){return pt(this,void 0,void 0,function*(){return nt.validate(["bytes8","bytes32","bytes32"],[e,t,r]),n.send({method:"eth_submitWork",params:[e,t,r]})})}function BX(n,e,t,r){return pt(this,void 0,void 0,function*(){nt.validate(["hex","blockNumberOrTag"],[e,t]);for(const i of r)nt.validate(["number"],[i]);return n.send({method:"eth_feeHistory",params:[e,t,r]})})}function LX(n){return pt(this,void 0,void 0,function*(){return n.send({method:"eth_pendingTransactions",params:[]})})}function kX(n){return pt(this,void 0,void 0,function*(){return n.send({method:"eth_requestAccounts",params:[]})})}function DX(n){return pt(this,void 0,void 0,function*(){return n.send({method:"eth_chainId",params:[]})})}function OX(n,e,t,r){return pt(this,void 0,void 0,function*(){return nt.validate(["address","bytes32[]","blockNumberOrTag"],[e,t,r]),n.send({method:"eth_getProof",params:[e,t,r]})})}function UX(n){return pt(this,void 0,void 0,function*(){return n.send({method:"web3_clientVersion",params:[]})})}function FX(n,e,t){return pt(this,void 0,void 0,function*(){return nt.validate(["blockNumberOrTag"],[t]),n.send({method:"eth_createAccessList",params:[e,t]})})}function HX(n,e,t,r=!1){return pt(this,void 0,void 0,function*(){return nt.validate(["address"],[e]),n.send({method:`eth_signTypedData${r?"":"_v4"}`,params:[e,t]})})}var jb=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};function zX(n){return jb(this,void 0,void 0,function*(){return n.send({method:"net_version",params:[]})})}function GX(n){return jb(this,void 0,void 0,function*(){return n.send({method:"net_peerCount",params:[]})})}function VX(n){return jb(this,void 0,void 0,function*(){return n.send({method:"net_listening",params:[]})})}var jo=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const WX=n=>jo(void 0,void 0,void 0,function*(){return n.send({method:"personal_listAccounts",params:[]})}),jX=(n,e)=>jo(void 0,void 0,void 0,function*(){return n.send({method:"personal_newAccount",params:[e]})}),qX=(n,e,t,r)=>jo(void 0,void 0,void 0,function*(){return n.send({method:"personal_unlockAccount",params:[e,t,r]})}),$X=(n,e)=>jo(void 0,void 0,void 0,function*(){return n.send({method:"personal_lockAccount",params:[e]})}),XX=(n,e,t)=>jo(void 0,void 0,void 0,function*(){return n.send({method:"personal_importRawKey",params:[e,t]})}),KX=(n,e,t)=>jo(void 0,void 0,void 0,function*(){return n.send({method:"personal_sendTransaction",params:[e,t]})}),YX=(n,e,t)=>jo(void 0,void 0,void 0,function*(){return n.send({method:"personal_signTransaction",params:[e,t]})}),QX=(n,e,t,r)=>jo(void 0,void 0,void 0,function*(){return n.send({method:"personal_sign",params:[e,t,r]})}),ZX=(n,e,t)=>jo(void 0,void 0,void 0,function*(){return n.send({method:"personal_ecRecover",params:[e,t]})}),TE={type:"object",properties:{accessList:{type:"null"},maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},ME={type:"object",properties:{maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},RE={type:"object",properties:{gasPrice:{type:"null"}}},Bh=(n,e,t)=>{try{nt.validateJSONSchema(n,e)}catch(r){throw r instanceof pu?new B7(r.errors,t):r}},JX=n=>{var e,t;const r=n;if(!le(r.type)){let s;switch(r.type){case"0x0":s=TE;break;case"0x1":s=ME;break;case"0x2":s=RE;break;default:return ve({format:"uint"},r.type,mt)}return Bh(s,r,r.type),ve({format:"uint"},r.type,mt)}if(!le(r.maxFeePerGas)||!le(r.maxPriorityFeePerGas))return Bh(RE,r,"0x2"),"0x2";if(!le(r.accessList))return Bh(ME,r,"0x1"),"0x1";const i=(e=r.hardfork)!==null&&e!==void 0?e:(t=r.common)===null||t===void 0?void 0:t.hardfork;if(!le(i)){const s=Object.keys(Bf).indexOf(i);if(s>=Object.keys(Bf).indexOf("london"))return le(r.gasPrice)?"0x2":"0x0";if(s===Object.keys(Bf).indexOf("berlin"))return"0x0"}if(!le(r.gasPrice))return Bh(TE,r,"0x0"),"0x0"},eK=(n,e)=>{var t;return((t=e==null?void 0:e.transactionTypeParser)!==null&&t!==void 0?t:JX)(n)},tK=n=>n[0]>127?"0x0":Uo(n[0]),nK={type:"object",properties:{address:{format:"address"},storageKeys:{type:"array",items:{format:"bytes32"}}}},qb={type:"array",items:Object.assign({},nK)},rK={type:"object",properties:{accessList:Object.assign({},qb),gasUsed:{type:"string"}}},IE={type:"string",enum:["goerli","kovan","mainnet","rinkeby","ropsten","sepolia"]},CE={type:"string",enum:["arrowGlacier","berlin","byzantium","chainstart","constantinople","dao","homestead","istanbul","london","merge","muirGlacier","petersburg","shanghai","spuriousDragon","tangerineWhistle"]},iK={type:"object",properties:{name:{format:"string"},networkId:{format:"uint"},chainId:{format:"uint"}}},sR={type:"object",properties:{from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},qb),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},chain:Object.assign({},IE),hardfork:Object.assign({},CE),chainId:{format:"uint"},networkId:{format:"uint"},common:{type:"object",properties:{customChain:Object.assign({},iK),baseChain:Object.assign({},IE),hardfork:Object.assign({},CE)}},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}}},Gy={type:"object",properties:Object.assign(Object.assign({},sR.properties),{blockHash:{format:"bytes32"},blockNumber:{format:"uint"},hash:{format:"bytes32"},transactionIndex:{format:"uint"},from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},qb),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}})},oR={type:"object",properties:{index:{format:"uint"},validatorIndex:{format:"uint"},address:{format:"address"},amount:{format:"uint"}}},dm={type:"object",properties:{baseFeePerGas:{format:"uint"},blobGasUsed:{format:"uint"},difficulty:{format:"uint"},excessBlobGas:{format:"uint"},extraData:{format:"bytes"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},hash:{format:"bytes32"},logsBloom:{format:"bytes256"},miner:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},number:{format:"uint"},parentBeaconBlockRoot:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},stateRoot:{format:"bytes32"},timestamp:{format:"uint"},totalDifficulty:{format:"uint"},transactions:{oneOf:[{type:"array",items:Object.assign({},Gy)},{type:"array",items:{format:"bytes32"}}]},transactionsRoot:{format:"bytes32"},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},oR)},withdrawalsRoot:{format:"bytes32"}}},sK={type:"object",properties:{author:{format:"bytes32"},excessDataGas:{format:"uint"},baseFeePerGas:{format:"uint"},blobGasUsed:{format:"uint"},difficulty:{format:"uint"},excessBlobGas:{format:"uint"},extraData:{format:"bytes"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},hash:{format:"bytes32"},logsBloom:{format:"bytes256"},miner:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},number:{format:"uint"},parentBeaconBlockRoot:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},stateRoot:{format:"bytes32"},timestamp:{format:"uint"},totalDifficulty:{format:"uint"},transactions:{type:"array",items:{format:"bytes32"}},transactionsRoot:{format:"bytes32"},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},oR)},withdrawalsRoot:{format:"bytes32"}}},Vu={type:"object",properties:{removed:{format:"bool"},logIndex:{format:"uint"},transactionIndex:{format:"uint"},transactionHash:{format:"bytes32"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},address:{format:"address"},data:{format:"bytes"},topics:{type:"array",items:{format:"bytes32"}}}},oK={type:"object",properties:{startingBlock:{format:"string"},currentBlock:{format:"string"},highestBlock:{format:"string"},knownStates:{format:"string"},pulledStates:{format:"string"}}},Wu={type:"object",properties:{transactionHash:{format:"bytes32"},transactionIndex:{format:"uint"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},from:{format:"address"},to:{format:"address"},cumulativeGasUsed:{format:"uint"},gasUsed:{format:"uint"},effectiveGasPrice:{format:"uint"},contractAddress:{format:"address"},logs:{type:"array",items:Object.assign({},Vu)},logsBloom:{format:"bytes"},root:{format:"bytes"},status:{format:"uint"},type:{format:"uint"}}},aK={type:"object",properties:{messageHash:{format:"bytes"},r:{format:"bytes32"},s:{format:"bytes32"},v:{format:"bytes"},message:{format:"bytes"},signature:{format:"bytes"}}},cK={type:"object",properties:{oldestBlock:{format:"uint"},baseFeePerGas:{type:"array",items:{format:"uint"}},reward:{type:"array",items:{type:"array",items:{format:"uint"}}},gasUsedRatio:{type:"array",items:{type:"number"}}}},lK={type:"object",properties:{key:{format:"bytes32"},value:{format:"uint"},proof:{type:"array",items:{format:"bytes32"}}}},uK={type:"object",properties:{balance:{format:"uint"},codeHash:{format:"bytes32"},nonce:{format:"uint"},storageHash:{format:"bytes32"},accountProof:{type:"array",items:{format:"bytes32"}},storageProof:{type:"array",items:Object.assign({},lK)}}};function Yr(n,e=Ir,t={transactionSchema:Gy,fillInputAndData:!1}){var r,i;let s=Da({},n);if(le(n==null?void 0:n.common)||(s.common=Object.assign({},n.common),le((r=n.common)===null||r===void 0?void 0:r.customChain)||(s.common.customChain=Object.assign({},n.common.customChain))),s=ve((i=t.transactionSchema)!==null&&i!==void 0?i:Gy,s,e),!le(s.data)&&!le(s.input)&&Uo(s.data)!==Uo(s.input))throw new gM({data:Ct(s.data),input:Ct(s.input)});return t.fillInputAndData&&(le(s.data)?le(s.input)||(s.data=s.input):s.input=s.data),le(s.gasLimit)||(s.gas=s.gasLimit,delete s.gasLimit),s}function fK(n,e,t={fillInputAndData:!1}){return{raw:ve({format:"bytes"},n,e),tx:Yr(Object.assign(Object.assign({},Bc.fromSerializedData(bn(n)).toJSON()),{hash:Ct(vu(bn(n))),type:tK(bn(n))}),e,{fillInputAndData:t.fillInputAndData,transactionSchema:t.transactionSchema})}}var $b=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};function Xb(n,e){return $b(this,void 0,void 0,function*(){const t=yield zX(n.requestManager);return ve({format:"uint"},t,e)})}function dK(n,e){return $b(this,void 0,void 0,function*(){const t=yield GX(n.requestManager);return ve({format:"uint"},t,e)})}const hK=n=>$b(void 0,void 0,void 0,function*(){return VX(n.requestManager)});var Bg=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};class aR extends jr{getId(e=this.defaultReturnFormat){return Bg(this,void 0,void 0,function*(){return Xb(this,e)})}getPeerCount(e=this.defaultReturnFormat){return Bg(this,void 0,void 0,function*(){return dK(this,e)})}isListening(){return Bg(this,void 0,void 0,function*(){return hK(this)})}}const Au="ALLEVENTS",Vy={name:Au,signature:"",type:"event",inputs:[]},h0={bytes:ko.HEX,number:Ri.NUMBER};var cR=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};function pK(n,e,t){return cR(this,void 0,void 0,function*(){var r,i,s,o;const a=yield UR(e,e.defaultBlock,!1,mt);if(le(a.baseFeePerGas))throw new I7;let c;if(le(n.gasPrice)&&BigInt(a.baseFeePerGas)===BigInt(0)&&(c=yield rx(e,t)),!le(n.gasPrice)||!le(c)){const l=ve({format:"uint"},(r=n.gasPrice)!==null&&r!==void 0?r:c,t);return{maxPriorityFeePerGas:l,maxFeePerGas:l}}return{maxPriorityFeePerGas:ve({format:"uint"},(i=n.maxPriorityFeePerGas)!==null&&i!==void 0?i:e.defaultMaxPriorityFeePerGas,t),maxFeePerGas:ve({format:"uint"},(s=n.maxFeePerGas)!==null&&s!==void 0?s:BigInt(a.baseFeePerGas)*BigInt(2)+BigInt((o=n.maxPriorityFeePerGas)!==null&&o!==void 0?o:e.defaultMaxPriorityFeePerGas),t)}})}function lR(n,e,t){return cR(this,void 0,void 0,function*(){const r=uR(n,e);if(!le(r)){if(r.startsWith("-"))throw new jA(r);if(Number(r)<0||Number(r)>127)throw new jA(r);if(le(n.gasPrice)&&(r==="0x0"||r==="0x1"))return{gasPrice:yield rx(e,t),maxPriorityFeePerGas:void 0,maxFeePerGas:void 0};if(r==="0x2")return Object.assign({gasPrice:void 0},yield pK(n,e,t))}})}var Kb=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const Wy=(n,e,t,r)=>{if(t!==void 0&&n in t&&t[n]!==void 0){if(typeof t[n]=="string"&&fi(t[n]))return t[n];if(!en(t[n])&&QM(t[n])){if(e.wallet){const i=e.wallet.get(ve({format:"uint"},t[n],h0));if(!le(i))return i.address;throw new qA}throw new qA}else throw n==="from"?new u7(t.from):new f7(t.to)}if(n==="from"){if(!le(r))return d0(r);if(!le(e.defaultAccount))return e.defaultAccount}},mK=(n,e,...t)=>Kb(void 0,[n,e,...t],void 0,function*(r,i,s=r.defaultReturnFormat){if(le(i))throw new R7;return HR(r,i,r.defaultBlock,s)}),uR=(n,e)=>{const t=eK(n,e);if(!le(t))return t;if(!le(e.defaultTransactionType))return ve({format:"uint"},e.defaultTransactionType,mt)};function gK(n){return Kb(this,void 0,void 0,function*(){var e,t;let r=ve(sR,n.transaction,n.web3Context.defaultReturnFormat);if(le(r.from)&&(r.from=Wy("from",n.web3Context,void 0,n.privateKey)),le(r.nonce)&&(r.nonce=yield mK(n.web3Context,r.from,mt)),le(r.value)&&(r.value="0x0"),le(r.data))le(r.input)?r.input="0x":r.input.startsWith("0x")||(r.input=`0x${r.input}`);else{if(!le(r.input)&&r.data!==r.input)throw new gM({data:Ct(r.data),input:Ct(r.input)});r.data.startsWith("0x")||(r.data=`0x${r.data}`)}if(le(r.common)){if(n.web3Context.defaultCommon){const i=n.web3Context.defaultCommon,s=i.customChain.chainId,o=i.customChain.networkId,a=i.customChain.name;r.common=Object.assign(Object.assign({},i),{customChain:{chainId:s,networkId:o,name:a}})}le(r.chain)&&(r.chain=n.web3Context.defaultChain),le(r.hardfork)&&(r.hardfork=n.web3Context.defaultHardfork)}if(le(r.chainId)&&le((e=r.common)===null||e===void 0?void 0:e.customChain.chainId)&&(r.chainId=yield GR(n.web3Context,mt)),le(r.networkId)&&(r.networkId=(t=n.web3Context.defaultNetworkId)!==null&&t!==void 0?t:yield Xb(n.web3Context,mt)),le(r.gasLimit)&&!le(r.gas)&&(r.gasLimit=r.gas),r.type=uR(r,n.web3Context),le(r.accessList)&&(r.type==="0x1"||r.type==="0x2")&&(r.accessList=[]),n.fillGasPrice&&(r=Object.assign(Object.assign({},r),yield lR(r,n.web3Context,mt))),le(r.gas)&&le(r.gasLimit)&&n.fillGasLimit){const i=yield ox(n.web3Context,r,"latest",mt);r=Object.assign(Object.assign({},r),{gas:ve({format:"uint"},i,mt)})}return r})}const vK=n=>Kb(void 0,void 0,void 0,function*(){var e;return((e=n.web3Context.transactionBuilder)!==null&&e!==void 0?e:gK)(Object.assign(Object.assign({},n),{transaction:n.transaction}))});var Yb=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};function jy(n,e,t){const r=n.transactionPollingInterval,[i,s]=u2(()=>Yb(this,void 0,void 0,function*(){let a;try{a=yield ix(n,h0)}catch{return}const c=a-e;if(c>=n.transactionBlockTimeout)return new _M({starterBlockNumber:e,numberOfBlocks:c,transactionHash:t})}),r);return[s,{clean:()=>{clearInterval(i)}}]}function yK(n,e,t){return Yb(this,void 0,void 0,function*(){var r;let i=!0,s,o;function a(l,u){o.clean(),i=!1;const[f,d]=jy(n,e,t);o.clean=d.clean,f.catch(p=>l(p))}try{s=yield(r=n.subscriptionManager)===null||r===void 0?void 0:r.subscribe("newHeads"),o={clean:()=>{var l;s.id&&((l=n.subscriptionManager)===null||l===void 0||l.removeSubscription(s).then(()=>{}).catch(()=>{}))}}}catch{return jy(n,e,t)}return[new Promise((l,u)=>{try{s.on("data",f=>{if(i=!1,!(f!=null&&f.number))return;const d=Number(BigInt(f.number)-BigInt(e));d>=n.transactionBlockTimeout&&u(new _M({starterBlockNumber:e,numberOfBlocks:d,transactionHash:t}))}),s.on("error",f=>{a(u,f)})}catch(f){a(u,f)}setTimeout(()=>{i&&a(u)},n.blockHeaderTimeout*1e3)}),o]})}function fR(n,e){return Yb(this,void 0,void 0,function*(){var t,r;const{provider:i}=n.requestManager;let s;const o=yield ix(n,h0);return!((r=(t=i).supportsSubscriptions)===null||r===void 0)&&r.call(t)&&n.enableExperimentalFeatures.useSubscriptionWhenCheckingBlockTimeout?s=yield yK(n,o,e):s=jy(n,o,e),s})}var _K=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};function qy(n,e,t){return _K(this,void 0,void 0,function*(){const[r,i]=Tb(n.transactionSendTimeout,new C7({numberOfSeconds:n.transactionSendTimeout/1e3,transactionHash:t})),[s,o]=yield fR(n,t);try{return yield Promise.race([e(),i,s])}finally{clearTimeout(r),o.clean()}})}var PE=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};function dR(n,e,t,r){return PE(this,void 0,void 0,function*(){var i;const s=(i=n.transactionReceiptPollingInterval)!==null&&i!==void 0?i:n.transactionPollingInterval,[o,a]=Sb(()=>PE(this,void 0,void 0,function*(){try{return(r??FR)(n,e,t)}catch{return}}),s),[c,l]=Tb(n.transactionPollingTimeout,new yM({numberOfSeconds:n.transactionPollingTimeout/1e3,transactionHash:e})),[u,f]=yield fR(n,e);try{return yield Promise.race([o,l,u])}finally{c&&clearTimeout(c),a&&clearInterval(a),f.clean()}})}var bK=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const np=({web3Context:n,transactionReceipt:e,transactionPromiEvent:t,customTransactionReceiptSchema:r,returnFormat:i})=>{var s;let o=1;const a=setInterval(()=>{bK(void 0,void 0,void 0,function*(){if(o>=n.transactionConfirmationBlocks){clearInterval(a);return}const c=yield iR(n.requestManager,$n(BigInt(e.blockNumber)+BigInt(o)),!1);c!=null&&c.hash&&(o+=1,t.emit("confirmation",{confirmations:ve({format:"uint"},o,i),receipt:ve(r??Wu,e,i),latestBlockHash:ve({format:"bytes32"},c.hash,i)}))})},(s=n.transactionReceiptPollingInterval)!==null&&s!==void 0?s:n.transactionPollingInterval)};var NE=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const xK=({web3Context:n,transactionReceipt:e,transactionPromiEvent:t,customTransactionReceiptSchema:r,returnFormat:i})=>{let s=!0,o;setImmediate(()=>{var a;(a=n.subscriptionManager)===null||a===void 0||a.subscribe("newHeads").then(c=>{c.on("data",l=>NE(void 0,void 0,void 0,function*(){var u;if(s=!1,!(l!=null&&l.number)||o===(l==null?void 0:l.parentHash))return;o=l==null?void 0:l.parentHash;const f=BigInt(l.number)-BigInt(e.blockNumber)+BigInt(1);t.emit("confirmation",{confirmations:ve({format:"uint"},f,i),receipt:ve(r??Wu,e,i),latestBlockHash:ve({format:"bytes32"},l.parentHash,i)}),f>=n.transactionConfirmationBlocks&&(yield(u=n.subscriptionManager)===null||u===void 0?void 0:u.removeSubscription(c))})),c.on("error",()=>NE(void 0,void 0,void 0,function*(){var l;yield(l=n.subscriptionManager)===null||l===void 0?void 0:l.removeSubscription(c),s=!1,np({web3Context:n,transactionReceipt:e,transactionPromiEvent:t,customTransactionReceiptSchema:r,returnFormat:i})}))}).catch(()=>{s=!1,np({web3Context:n,transactionReceipt:e,customTransactionReceiptSchema:r,transactionPromiEvent:t,returnFormat:i})})}),setTimeout(()=>{s&&np({web3Context:n,transactionReceipt:e,transactionPromiEvent:t,returnFormat:i})},n.blockHeaderTimeout*1e3)};function wK(n,e,t,r,i,s){if(le(t)||le(t.blockHash))throw new P7({receipt:t,blockHash:ve({format:"bytes32"},t==null?void 0:t.blockHash,i),transactionHash:ve({format:"bytes32"},r,i)});if(!t.blockNumber)throw new N7({receipt:t});e.emit("confirmation",{confirmations:ve({format:"uint"},1,i),receipt:ve(s??Wu,t,i),latestBlockHash:ve({format:"bytes32"},t.blockHash,i)});const o=n.requestManager.provider;o&&"supportsSubscriptions"in o&&o.supportsSubscriptions()?xK({web3Context:n,transactionReceipt:t,transactionPromiEvent:e,customTransactionReceiptSchema:s,returnFormat:i}):np({web3Context:n,transactionReceipt:t,transactionPromiEvent:e,customTransactionReceiptSchema:s,returnFormat:i})}const p0=n=>!at(n)&&typeof n=="object"&&!at(n.type)&&n.type==="error",Qb=n=>!at(n)&&typeof n=="object"&&!at(n.type)&&n.type==="event",m0=n=>!at(n)&&typeof n=="object"&&!at(n.type)&&n.type==="function",AK=n=>!at(n)&&typeof n=="object"&&!at(n.type)&&n.type==="constructor",EK=n=>typeof n=="object"&&typeof n.components>"u"&&typeof n.name>"u",hR=n=>n.includes("[]")?{type:"tuple[]",name:n.slice(0,-2)}:{type:"tuple",name:n},pR=n=>{const e=[];for(const t of Object.keys(n)){const r=n[t];typeof r=="object"?e.push(Object.assign(Object.assign({},hR(t)),{components:pR(r)})):e.push({name:t,type:n[t]})}return e},$y=(n,e)=>{const t=[];return e.forEach(r=>{if(typeof r.components=="object"){if(!r.type.startsWith("tuple"))throw new kt(`Invalid value given "${r.type}". Error: components found but type is not tuple.`);const i=r.type.indexOf("["),s=i>=0?r.type.substring(i):"",o=$y(n,r.components);Array.isArray(o)&&n?t.push(`tuple(${o.join(",")})${s}`):n?t.push(`(${o.join()})`):t.push(`(${o.join(",")})${s}`)}else t.push(r.type)}),t},Co=n=>{var e,t,r,i;return p0(n)||Qb(n)||m0(n)?!((e=n.name)===null||e===void 0)&&e.includes("(")?n.name:`${(t=n.name)!==null&&t!==void 0?t:""}(${$y(!1,(r=n.inputs)!==null&&r!==void 0?r:[]).join(",")})`:`(${$y(!1,(i=n.inputs)!==null&&i!==void 0?i:[]).join(",")})`},SK=n=>{if(typeof n!="string"&&!p0(n))throw new kt("Invalid parameter value in encodeErrorSignature");let e;return n&&(typeof n=="function"||typeof n=="object")?e=Co(n):e=n,di(e)},Zb=n=>{if(typeof n!="string"&&!Qb(n))throw new kt("Invalid parameter value in encodeEventSignature");let e;return n&&(typeof n=="function"||typeof n=="object")?e=Co(n):e=n,di(e)};function Jb(n,e){const t=n.exec(e);return t==null?void 0:t.groups}var mR=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,gR=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,vR=/^\(.+?\).*?$/,TK=Object.defineProperty,MK=(n,e,t)=>e in n?TK(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,hf=(n,e,t)=>(MK(n,typeof e!="symbol"?e+"":e,t),t),RK="abitype",IK="0.7.1",zr=class extends Error{constructor(n,e={}){var s;const t=e.cause instanceof zr?e.cause.details:(s=e.cause)!=null&&s.message?e.cause.message:e.details,r=e.cause instanceof zr&&e.cause.docsPath||e.docsPath,i=[n||"An error occurred.","",...e.metaMessages?[...e.metaMessages,""]:[],...r?[`Docs: https://abitype.dev${r}`]:[],...t?[`Details: ${t}`]:[],`Version: ${RK}@${IK}`].join(`
`);super(i),hf(this,"details"),hf(this,"docsPath"),hf(this,"metaMessages"),hf(this,"shortMessage"),hf(this,"name","AbiTypeError"),e.cause&&(this.cause=e.cause),this.details=t,this.docsPath=r,this.metaMessages=e.metaMessages,this.shortMessage=n}},yR=/^struct (?<name>[a-zA-Z0-9_]+) \{(?<properties>.*?)\}$/;function _R(n){return yR.test(n)}function CK(n){return Jb(yR,n)}var BE=new Set(["memory","indexed","storage","calldata"]),PK=new Set(["calldata","memory","storage"]);function NK(n,e){return e?`${e}:${n}`:n}var Lg=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]),BK=/^(?<type>[a-zA-Z0-9_]+?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z0-9_]+))?$/,LK=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z0-9_]+))?$/,kK=/^u?int$/;function hm(n,e){var f,d;const t=NK(n,e==null?void 0:e.type);if(Lg.has(t))return Lg.get(t);const r=vR.test(n),i=Jb(r?LK:BK,n);if(!i)throw new zr("Invalid ABI parameter.",{details:n});if(i.name&&OK(i.name))throw new zr("Invalid ABI parameter.",{details:n,metaMessages:[`"${i.name}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]});const s=i.name?{name:i.name}:{},o=i.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const p=Al(i.type),v=[],m=p.length;for(let y=0;y<m;y++)v.push(hm(p[y],{structs:a}));l={components:v}}else if(i.type in a)c="tuple",l={components:a[i.type]};else if(kK.test(i.type))c=`${i.type}256`;else if(c=i.type,(e==null?void 0:e.type)!=="struct"&&!bR(c))throw new zr("Unknown type.",{metaMessages:[`Type "${c}" is not a valid ABI type.`]});if(i.modifier){if(!((d=(f=e==null?void 0:e.modifiers)==null?void 0:f.has)!=null&&d.call(f,i.modifier)))throw new zr("Invalid ABI parameter.",{details:n,metaMessages:[`Modifier "${i.modifier}" not allowed${e!=null&&e.type?` in "${e.type}" type`:""}.`]});if(PK.has(i.modifier)&&!UK(c,!!i.array))throw new zr("Invalid ABI parameter.",{details:n,metaMessages:[`Modifier "${i.modifier}" not allowed${e!=null&&e.type?` in "${e.type}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${i.modifier}" was given.`]})}const u={type:`${c}${i.array??""}`,...s,...o,...l};return Lg.set(t,u),u}function Al(n,e=[],t="",r=0){if(n===""){if(t==="")return e;if(r!==0)throw new zr("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${r>0?"opening":"closing"} parentheses.`],details:`Depth "${r}"`});return[...e,t.trim()]}const i=n.length;for(let s=0;s<i;s++){const o=n[s],a=n.slice(s+1);switch(o){case",":return r===0?Al(a,[...e,t.trim()]):Al(a,e,`${t}${o}`,r);case"(":return Al(a,e,`${t}${o}`,r+1);case")":return Al(a,e,`${t}${o}`,r-1);default:return Al(a,e,`${t}${o}`,r)}}return[]}function bR(n){return n==="address"||n==="bool"||n==="function"||n==="string"||mR.test(n)||gR.test(n)}var DK=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function OK(n){return n==="address"||n==="bool"||n==="function"||n==="string"||n==="tuple"||mR.test(n)||gR.test(n)||DK.test(n)}function UK(n,e){return e||n==="bytes"||n==="string"||n==="tuple"}function FK(n){const e={},t=n.length;for(let o=0;o<t;o++){const a=n[o];if(!_R(a))continue;const c=CK(a);if(!c)throw new zr("Invalid struct signature.",{details:a});const l=c.properties.split(";"),u=[],f=l.length;for(let d=0;d<f;d++){const v=l[d].trim();if(!v)continue;const m=hm(v,{type:"struct"});u.push(m)}if(!u.length)throw new zr("Invalid struct signature.",{details:a,metaMessages:["No properties exist."]});e[c.name]=u}const r={},i=Object.entries(e),s=i.length;for(let o=0;o<s;o++){const[a,c]=i[o];r[a]=xR(c,e)}return r}var HK=/^(?<type>[a-zA-Z0-9_]+?)(?<array>(?:\[\d*?\])+?)?$/;function xR(n,e,t=new Set){const r=[],i=n.length;for(let s=0;s<i;s++){const o=n[s];if(vR.test(o.type))r.push(o);else{const c=Jb(HK,o.type);if(!(c!=null&&c.type))throw new zr("Invalid ABI parameter.",{details:JSON.stringify(o,null,2),metaMessages:["ABI parameter type is invalid."]});const{array:l,type:u}=c;if(u in e){if(t.has(u))throw new zr("Circular reference detected.",{metaMessages:[`Struct "${u}" is a circular reference.`]});r.push({...o,type:`tuple${l??""}`,components:xR(e[u]??[],e,new Set([...t,u]))})}else if(bR(u))r.push(o);else throw new zr("Unknown type.",{metaMessages:[`Type "${u}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]})}}return r}function zK(n){let e;if(typeof n=="string")e=hm(n,{modifiers:BE});else{const t=FK(n),r=n.length;for(let i=0;i<r;i++){const s=n[i];if(!_R(s)){e=hm(s,{modifiers:BE,structs:t});break}}}if(!e)throw new zr("Failed to parse ABI parameter.",{details:`parseAbiParameter(${JSON.stringify(n,null,2)})`,docsPath:"/api/human.html#parseabiparameter-1"});return e}const Nn=32;function Xy(n=0){var e;if(((e=globalThis.Buffer)===null||e===void 0?void 0:e.alloc)!==void 0){const t=globalThis.Buffer.alloc(n);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}return new Uint8Array(n)}function wR(n){var e,t;return Object.assign(Object.assign({},n),{name:(e=n.name)!==null&&e!==void 0?e:"",components:(t=n.components)===null||t===void 0?void 0:t.map(r=>wR(r))})}function GK(n){return!at(n)&&typeof n=="object"&&!at(n.type)&&typeof n.type=="string"}function AR(n){return n.map(e=>{var t;if(GK(e))return e;if(typeof e=="string")return wR(zK(e.replace(/tuple/,"")));if(EK(e)){const r=Object.keys(e)[0],i=hR(r);return i.name=(t=i.name)!==null&&t!==void 0?t:"",Object.assign(Object.assign({},i),{components:pR(e[r])})}throw new kt("Invalid abi")})}function ex(n){const e=n.type.lastIndexOf("["),t=n.type.substring(0,e),r=n.type.substring(e);let i=-1;if(r!=="[]"&&(i=Number(r.slice(1,-1)),isNaN(i)))throw new kt("Invalid fixed array size",{size:r});return{param:{type:t,name:"",components:n.components},size:i}}function pm(n){var e,t;return n.type==="string"||n.type==="bytes"||n.type.endsWith("[]")?!0:n.type==="tuple"?(t=(e=n.components)===null||e===void 0?void 0:e.some(pm))!==null&&t!==void 0?t:!1:n.type.endsWith("]")?pm(ex(n).param):!1}const ER=20,SR=Nn-ER;function VK(n,e){if(typeof e!="string")throw new kt("address type expects string as input type",{value:e,name:n.name,type:n.type});let t=e.toLowerCase();if(t.startsWith("0x")||(t=`0x${t}`),!fi(t))throw new kt("provided input is not valid address",{value:e,name:n.name,type:n.type});const r=Wc(t),i=Xy(Nn);return i.set(r,SR),{dynamic:!1,encoded:i}}function WK(n,e){const t=e.subarray(SR,Nn);if(t.length!==ER)throw new kt("Invalid decoding input, not enough bytes to decode address",{bytes:e});const r=Vo(t);return{result:Ys(r),encoded:e.subarray(Nn),consumed:Nn}}const Ca=new Map;let Lh=BigInt(256);for(let n=8;n<=256;n+=8)Ca.set(`uint${n}`,{min:BigInt(0),max:Lh-BigInt(1)}),Ca.set(`int${n}`,{min:-Lh/BigInt(2),max:Lh/BigInt(2)-BigInt(1)}),Lh*=BigInt(256);Ca.set("int",Ca.get("int256"));Ca.set("uint",Ca.get("uint256"));const TR=BigInt(1)<<BigInt(256);function jK(n,e=Nn){let t;return n<0?t=(TR+n).toString(16):t=n.toString(16),t=gu(t,e*2),Wc(t)}function qK(n,e){const t=Vo(n),r=BigInt(t);return r<=e?r:r-TR}function $d(n,e){let t;try{t=ic(e)}catch{throw new kt("provided input is not number value",{type:n.type,value:e,name:n.name})}const r=Ca.get(n.type);if(!r)throw new kt("provided abi contains invalid number datatype",{type:n.type});if(t<r.min)throw new kt("provided input is less then minimum for given type",{type:n.type,value:e,name:n.name,minimum:r.min.toString()});if(t>r.max)throw new kt("provided input is greater then maximum for given type",{type:n.type,value:e,name:n.name,maximum:r.max.toString()});return{dynamic:!1,encoded:jK(t)}}function Eu(n,e){if(e.length<Nn)throw new kt("Not enough bytes left to decode",{param:n,bytesLeft:e.length});const t=e.subarray(0,Nn),r=Ca.get(n.type);if(!r)throw new kt("provided abi contains invalid number datatype",{type:n.type});const i=qK(t,r.max);if(i<r.min)throw new kt("decoded value is less then minimum for given type",{type:n.type,value:i,name:n.name,minimum:r.min.toString()});if(i>r.max)throw new kt("decoded value is greater then maximum for given type",{type:n.type,value:i,name:n.name,maximum:r.max.toString()});return{result:i,encoded:e.subarray(Nn),consumed:Nn}}function $K(n,e){let t;try{t=n2(e)}catch(r){if(r instanceof lb)throw new kt("provided input is not valid boolean value",{type:n.type,value:e,name:n.name})}return $d({type:"uint8",name:""},Number(t))}function XK(n,e){const t=Eu({type:"uint8",name:""},e);if(t.result>1||t.result<0)throw new kt("Invalid boolean value encoded",{boolBytes:e.subarray(0,Nn),numberResult:t});return{result:t.result===BigInt(1),encoded:t.encoded,consumed:Nn}}const KK=32;function MR(n,e){if(typeof e=="string"&&e.length%2!==0&&(e+="0"),!La(e))throw new kt("provided input is not valid bytes value",{type:n.type,value:e,name:n.name});const t=js(e),[,r]=n.type.split("bytes");if(r){if(Number(r)>KK||Number(r)<1)throw new kt("invalid bytes type. Static byte type can have between 1 and 32 bytes",{type:n.type});if(Number(r)<t.length)throw new kt("provided input size is different than type size",{type:n.type,value:e,name:n.name});const o=Xy(Nn);return o.set(t),{dynamic:!1,encoded:o}}const i=Math.ceil(t.length/Nn),s=Xy(Nn+i*Nn);return s.set($d({type:"uint32",name:""},t.length).encoded),s.set(t,Nn),{dynamic:!0,encoded:s}}function RR(n,e){const[,t]=n.type.split("bytes");let r=Number(t),i=e,s=1,o=0;if(!r){const a=Eu({type:"uint32",name:""},i);r=Number(a.result),o+=a.consumed,i=a.encoded,s=Math.ceil(r/Nn)}if(r>e.length)throw new kt("there is not enough data to decode",{type:n.type,encoded:e,size:r});return{result:Ct(i.subarray(0,r)),encoded:i.subarray(s*Nn),consumed:o+s*Nn}}function YK(n,e){if(typeof e!="string")throw new kt("invalid input, should be string",{input:e});const t=wb(e);return MR({type:"bytes",name:""},t)}function QK(n,e){const t=RR({type:"bytes",name:""},e);return{result:r0(t.result),encoded:t.encoded,consumed:t.consumed}}function IR(n){let e=0,t=0;const r=[],i=[];for(const s of n)s.dynamic?e+=Nn:e+=s.encoded.length;for(const s of n)s.dynamic?(r.push($d({type:"uint256",name:""},e+t)),i.push(s),t+=s.encoded.length):r.push(s);return Br(...r.map(s=>s.encoded),...i.map(s=>s.encoded))}function ZK(n,e){if(!Array.isArray(e))throw new kt("Expected value to be array",{abi:n,values:e});const{size:t,param:r}=ex(n),i=e.map(a=>Ky(r,a)),s=t===-1,o=i.length>0&&i[0].dynamic;if(!s&&e.length!==t)throw new kt("Given arguments count doesn't match array length",{arrayLength:t,argumentsLength:e.length});if(s||o){const a=IR(i);if(s){const c=$d({type:"uint256",name:""},i.length).encoded;return{dynamic:!0,encoded:i.length>0?Br(c,a):c}}return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:Br(...i.map(a=>a.encoded))}}function JK(n,e){let{size:t,param:r}=ex(n);const i=t===-1;let s=0;const o=[];let a=e;if(i){const l=Eu({type:"uint32",name:""},e);t=Number(l.result),s=l.consumed,a=l.encoded}if(pm(r)){for(let l=0;l<t;l+=1){const u=Eu({type:"uint32",name:""},a.subarray(l*Nn));s+=u.consumed;const f=mm(r,a.subarray(Number(u.result)));s+=f.consumed,o.push(f.result)}return{result:o,encoded:a.subarray(s),consumed:s}}for(let l=0;l<t;l+=1){const u=mm(r,e.subarray(s));s+=u.consumed,o.push(u.result)}return{result:o,encoded:e.subarray(s),consumed:s}}function Ky(n,e){if(n.type==="string")return YK(n,e);if(n.type==="bool")return $K(n,e);if(n.type==="address")return VK(n,e);if(n.type==="tuple")return tx(n,e);if(n.type.endsWith("]"))return ZK(n,e);if(n.type.startsWith("bytes"))return MR(n,e);if(n.type.startsWith("uint")||n.type.startsWith("int"))return $d(n,e);throw new kt("Unsupported",{param:n,value:e})}function mm(n,e){if(n.type==="string")return QK(n,e);if(n.type==="bool")return XK(n,e);if(n.type==="address")return WK(n,e);if(n.type==="tuple")return CR(n,e);if(n.type.endsWith("]"))return JK(n,e);if(n.type.startsWith("bytes"))return RR(n,e);if(n.type.startsWith("uint")||n.type.startsWith("int"))return Eu(n,e);throw new kt("Unsupported",{param:n,bytes:e})}function tx(n,e){var t,r,i;let s=!1;if(!Array.isArray(e)&&typeof e!="object")throw new kt("param must be either Array or Object",{param:n,input:e});const o=e,a=[];for(let c=0;c<((r=(t=n.components)===null||t===void 0?void 0:t.length)!==null&&r!==void 0?r:0);c+=1){const l=n.components[c];let u;if(Array.isArray(o)){if(c>=o.length)throw new kt("input param length missmatch",{param:n,input:e});u=Ky(l,o[c])}else{const f=o[(i=l.name)!==null&&i!==void 0?i:""];if(f==null)throw new kt("missing input defined in abi",{param:n,input:e,paramName:l.name});u=Ky(l,f)}u.dynamic&&(s=!0),a.push(u)}return s?{dynamic:!0,encoded:IR(a)}:{dynamic:!1,encoded:Br(...a.map(c=>c.encoded))}}function CR(n,e){const t={__length__:0};let r=0;if(!n.components)return{result:t,encoded:e,consumed:r};let i=0;for(const[s,o]of n.components.entries()){let a;if(pm(o)){const c=Eu({type:"uint32",name:""},e.subarray(r));a=mm(o,e.subarray(Number(c.result))),r+=c.consumed,i+=a.consumed}else a=mm(o,e.subarray(r)),r+=a.consumed;t.__length__+=1,t[s]=a.result,o.name&&o.name!==""&&(t[o.name]=a.result)}return{encoded:e.subarray(r+i),result:t,consumed:r+i}}function eY(n,e,t){const r=AR(n),i=Wc(e);return CR({type:"tuple",name:"",components:r},i).result}function PR(n){const e=[];return n.forEach(t=>{if(Array.isArray(t)){const r=PR(t);e.push({type:"tuple",components:r,name:""})}else e.push({type:Uo(t,!0)})}),e}function g0(n,e){if((n==null?void 0:n.length)!==e.length)throw new kt("Invalid number of values received for given ABI",{expected:n==null?void 0:n.length,received:e.length});const t=AR(n);return Vo(tx({type:"tuple",name:"",components:t},e).encoded)}function tY(n){try{const e=PR(n);return Vo(tx({type:"tuple",name:"",components:e},n).encoded)}catch{throw new kt("Could not infer types from given params",{params:n})}}const Yy=(n,e)=>g0([n],[e]),NR=(n,e,t)=>{try{if(n.length>0&&(!e||e==="0x"||e==="0X"))throw new kt("Returned values aren't valid, did it run Out of Gas? You might also see this error if you are not using the correct ABI for the contract you are retrieving data from, requesting data from a block number that does not exist, or querying a node which is not fully synced.");return eY(n,`0x${e.replace(/0x/i,"")}`,t)}catch(r){throw new kt(`Parameter decoding error: ${r.message}`,{internalErr:r})}},mc=(n,e)=>NR(n,e,!1),BR=(n,e)=>mc([n],e)[0],vd=n=>{if(typeof n!="string"&&!m0(n))throw new kt("Invalid parameter value in encodeFunctionSignature");let e;return n&&(typeof n=="function"||typeof n=="object")?e=Co(n):e=n,di(e).slice(0,10)},nY=(n,e)=>{var t;if(!m0(n))throw new kt("Invalid parameter value in encodeFunctionCall");return`${vd(n)}${g0((t=n.inputs)!==null&&t!==void 0?t:[],e??[]).replace("0x","")}`},Qy=(n,e,t=!0)=>{const r=t&&e&&e.length>=10&&e.startsWith("0x")?e.slice(10):e;if(!n.inputs)throw new Cr("No inputs found in the ABI");const i=mc([...n.inputs],r);return Object.assign(Object.assign({},i),{__method__:Co(n)})},rY=(n,e)=>{if(n.type==="constructor")return e;if(!e)return null;const t=e.length>=2?e.slice(2):e;if(!n.outputs)return null;const r=mc([...n.outputs],t);return r.__length__===1?r[0]:r},iY=["bool","string","int","uint","address","fixed","ufixed"],sY=(n,e)=>n==="string"?e:BR(n,e),LR=(n,e,t)=>{const r=Array.isArray(t)?t:[t],i={},s={};for(const[d,p]of n.entries())p.indexed?i[d]=p:s[d]=p;const o=e?NR(Object.values(s),e,!0):{__length__:0},a=r.length-Object.keys(i).length,c=Object.values(i).map((d,p)=>iY.some(v=>d.type.startsWith(v))?sY(d.type,r[p+a]):r[p+a]),l={__length__:0};let u=0,f=0;for(const[d,p]of n.entries())l[d]=p.type==="string"?"":void 0,i[d]&&(l[d]=c[u],u+=1),s[d]&&(l[d]=o[String(f)],f+=1),p.name&&(l[p.name]=l[d]),l.__length__+=1;return l},rp=(n,e)=>{if(e!=null&&e.data){let t,r,i;try{const s=e.data.slice(0,10),o=n.find(a=>SK(a).startsWith(s));o!=null&&o.inputs?(t=o.name,r=Co(o),i=mc([...o.inputs],e.data.substring(10))):e.data.startsWith("0x08c379a0")?(t="Error",r="Error(string)",i=mc([{name:"message",type:"string"}],e.data.substring(10))):e.data.startsWith("0x4e487b71")&&(t="Panic",r="Panic(uint256)",i=mc([{name:"code",type:"uint256"}],e.data.substring(10)))}catch{}t&&e.setDecodedProperties(t,r,i)}};var oY=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const kR=(n,e)=>{var t,r,i,s,o;if(n instanceof fc&&n.cause instanceof Xm){if(e!==void 0){const a=e.filter(c=>p0(c));return rp(a,n.cause),{reason:n.cause.message,signature:(t=n.cause.data)===null||t===void 0?void 0:t.slice(0,10),data:(r=n.cause.data)===null||r===void 0?void 0:r.substring(10),customErrorName:n.cause.errorName,customErrorDecodedSignature:n.cause.errorSignature,customErrorArguments:n.cause.errorArgs}}return{reason:n.cause.message,signature:(i=n.cause.data)===null||i===void 0?void 0:i.slice(0,10),data:(s=n.cause.data)===null||s===void 0?void 0:s.substring(10)}}if(n instanceof Km&&!Array.isArray((o=n.cause)===null||o===void 0?void 0:o.errors)&&n.cause!==void 0)return n.cause.message;throw n};function DR(n,e,t){return oY(this,arguments,void 0,function*(r,i,s,o=r.defaultReturnFormat){try{yield sx(r,i,r.defaultBlock,o);return}catch(a){return kR(a,s)}})}var aY=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};function kg(n,e,t,r,i,s){return aY(this,void 0,void 0,function*(){let o=s;o===void 0&&(r!==void 0?o=kR(r):n.handleRevert&&e!==void 0&&(o=yield DR(n,e,i)));let a;if(o===void 0)a=new pM(t);else if(typeof o=="string")a=new Gp(o,void 0,t);else if(o.customErrorName!==void 0&&o.customErrorDecodedSignature!==void 0&&o.customErrorArguments!==void 0){const c=o;a=new hM(c.reason,c.customErrorName,c.customErrorDecodedSignature,c.customErrorArguments,c.signature,t,c.data)}else a=new Gp(o.reason,o.signature,t,o.data);return a})}const nx=(n,e,t,r=Ir)=>{var i,s,o,a,c,l;let u=Object.assign({},n);const f=ve(Vu,e,r);if([Au,"allEvents"].includes(u.name)){const p=t.find(v=>v.signature===e.topics[0]);p?u=p:u={anonymous:!0}}if(u.inputs=(s=(i=u.inputs)!==null&&i!==void 0?i:n.inputs)!==null&&s!==void 0?s:[],!u.anonymous){let p=0;((o=u.inputs)!==null&&o!==void 0?o:[]).forEach(v=>{v.indexed&&(p+=1)}),p>0&&(e!=null&&e.topics)&&(e==null?void 0:e.topics.length)!==p+1&&(u=Object.assign(Object.assign({},u),{anonymous:!0,inputs:[]}))}const d=u.anonymous?e.topics:((a=e.topics)!==null&&a!==void 0?a:[]).slice(1);return Object.assign(Object.assign({},f),{returnValues:LR([...(c=u.inputs)!==null&&c!==void 0?c:[]],e.data,d),event:u.name,signature:!u.anonymous&&((l=e.topics)===null||l===void 0?void 0:l.length)>0&&e.topics[0]?e.topics[0]:void 0,raw:{data:e.data,topics:e.topics}})};var qa=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};class OR{constructor({options:e,web3Context:t,promiEvent:r,returnFormat:i}){this.options={checkRevertBeforeSending:!0},this.options=e,this.web3Context=t,this.promiEvent=r,this.returnFormat=i}getReceiptWithEvents(e){var t,r;const i=Object.assign({},e??{});if(!((t=this.options)===null||t===void 0)&&t.contractAbi&&i.logs&&i.logs.length>0){i.events={};for(const s of i.logs){const o=nx(Vy,s,(r=this.options)===null||r===void 0?void 0:r.contractAbi,this.returnFormat);o.event&&(i.events[o.event]=o)}}return i}checkRevertBeforeSending(e){return qa(this,void 0,void 0,function*(){if(this.options.checkRevertBeforeSending!==!1){let t=e;le(e.data)&&le(e.input)&&le(e.gas)&&(t=Object.assign(Object.assign({},e),{gas:21e3}));const r=yield DR(this.web3Context,t,this.options.contractAbi);if(r!==void 0)throw yield kg(this.web3Context,e,void 0,void 0,this.options.contractAbi,r)}})}emitSending(e){this.promiEvent.listenerCount("sending")>0&&this.promiEvent.emit("sending",e)}populateGasPrice(e){return qa(this,arguments,void 0,function*({transactionFormatted:t,transaction:r}){var i;let s=t;return!this.web3Context.config.ignoreGasPricing&&!(!((i=this.options)===null||i===void 0)&&i.ignoreGasPricing)&&le(t.gasPrice)&&(le(r.maxPriorityFeePerGas)||le(r.maxFeePerGas))&&(s=Object.assign(Object.assign({},t),yield lR(t,this.web3Context,mt))),s})}signAndSend(e){return qa(this,arguments,void 0,function*({wallet:t,tx:r}){if(t){const i=yield t.signTransaction(r);return qy(this.web3Context,()=>qa(this,void 0,void 0,function*(){return rR(this.web3Context.requestManager,i.rawTransaction)}),i.transactionHash)}return qy(this.web3Context,()=>qa(this,void 0,void 0,function*(){return pX(this.web3Context.requestManager,r)}))})}emitSent(e){this.promiEvent.listenerCount("sent")>0&&this.promiEvent.emit("sent",e)}emitTransactionHash(e){this.promiEvent.listenerCount("transactionHash")>0&&this.promiEvent.emit("transactionHash",e)}emitReceipt(e){this.promiEvent.listenerCount("receipt")>0&&this.promiEvent.emit("receipt",e)}handleError(e){return qa(this,arguments,void 0,function*({error:t,tx:r}){var i;let s=t;return s instanceof fc&&this.web3Context.handleRevert&&(s=yield kg(this.web3Context,r,void 0,void 0,(i=this.options)===null||i===void 0?void 0:i.contractAbi)),(s instanceof Km||s instanceof fc||s instanceof hM||s instanceof pM||s instanceof Gp||s instanceof yM)&&this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",s),s})}emitConfirmation({receipt:e,transactionHash:t,customTransactionReceiptSchema:r}){this.promiEvent.listenerCount("confirmation")>0&&wK(this.web3Context,this.promiEvent,e,t,this.returnFormat,r)}handleResolve(e){return qa(this,arguments,void 0,function*({receipt:t,tx:r}){var i,s,o;if(!((i=this.options)===null||i===void 0)&&i.transactionResolver)return(s=this.options)===null||s===void 0?void 0:s.transactionResolver(t);if(t.status===BigInt(0)){const a=yield kg(this.web3Context,r,t,void 0,(o=this.options)===null||o===void 0?void 0:o.contractAbi);throw this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",a),a}else return t})}}var an=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},cY=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const lY=n=>an(void 0,void 0,void 0,function*(){return nR(n.requestManager)});function uY(n,e){return an(this,void 0,void 0,function*(){const t=yield J$(n.requestManager);return ve({format:"uint"},t,e??n.defaultReturnFormat)})}function rx(n,e){return an(this,void 0,void 0,function*(){const t=yield eX(n.requestManager);return ve({format:"uint"},t,e??n.defaultReturnFormat)})}function fY(n,e){return an(this,void 0,void 0,function*(){const t=yield tX(n.requestManager);return ve({format:"uint"},t,e??n.defaultReturnFormat)})}function ix(n,e){return an(this,void 0,void 0,function*(){const t=yield rX(n.requestManager);return ve({format:"uint"},t,e??n.defaultReturnFormat)})}function dY(n,e){return an(this,arguments,void 0,function*(t,r,i=t.defaultBlock,s){const o=ir(i)?i:ve({format:"uint"},i,mt),a=yield iX(t.requestManager,r,o);return ve({format:"uint"},a,s??t.defaultReturnFormat)})}function hY(n,e,t){return an(this,arguments,void 0,function*(r,i,s,o=r.defaultBlock,a){const c=ve({format:"uint"},s,mt),l=ir(o)?o:ve({format:"uint"},o,mt),u=yield sX(r.requestManager,i,c,l);return ve({format:"bytes"},u,a??r.defaultReturnFormat)})}function pY(n,e){return an(this,arguments,void 0,function*(t,r,i=t.defaultBlock,s){const o=ir(i)?i:ve({format:"uint"},i,mt),a=yield fX(t.requestManager,r,o);return ve({format:"bytes"},a,s??t.defaultReturnFormat)})}function UR(n){return an(this,arguments,void 0,function*(e,t=e.defaultBlock,r=!1,i){var s;let o;if(La(t)){const c=ve({format:"bytes32"},t,mt);o=yield vX(e.requestManager,c,r)}else{const c=ir(t)?t:ve({format:"uint"},t,mt);o=yield iR(e.requestManager,c,r)}const a=ve(dm,o,i??e.defaultReturnFormat);return le(a)?a:Object.assign(Object.assign({},a),{transactions:(s=a.transactions)!==null&&s!==void 0?s:[]})})}function mY(n){return an(this,arguments,void 0,function*(e,t=e.defaultBlock,r){let i;if(La(t)){const s=ve({format:"bytes32"},t,mt);i=yield aX(e.requestManager,s)}else{const s=ir(t)?t:ve({format:"uint"},t,mt);i=yield cX(e.requestManager,s)}return ve({format:"uint"},i,r??e.defaultReturnFormat)})}function gY(n){return an(this,arguments,void 0,function*(e,t=e.defaultBlock,r){let i;if(La(t)){const s=ve({format:"bytes32"},t,mt);i=yield lX(e.requestManager,s)}else{const s=ir(t)?t:ve({format:"uint"},t,mt);i=yield uX(e.requestManager,s)}return ve({format:"uint"},i,r??e.defaultReturnFormat)})}function vY(n){return an(this,arguments,void 0,function*(e,t=e.defaultBlock,r,i){const s=ve({format:"uint"},r,mt);let o;if(La(t)){const a=ve({format:"bytes32"},t,mt);o=yield wX(e.requestManager,a,s)}else{const a=ir(t)?t:ve({format:"uint"},t,mt);o=yield AX(e.requestManager,a,s)}return ve(dm,o,i??e.defaultReturnFormat)})}function yY(n,e){return an(this,arguments,void 0,function*(t,r,i=t.defaultReturnFormat){const s=ve({format:"bytes32"},r,Ir),o=yield yX(t.requestManager,s);return le(o)?o:Yr(o,i,{transactionSchema:t.config.customTransactionSchema,fillInputAndData:!0})})}function _Y(n,e){return an(this,void 0,void 0,function*(){return(yield LX(n.requestManager)).map(r=>Yr(r,e??n.defaultReturnFormat,{transactionSchema:n.config.customTransactionSchema,fillInputAndData:!0}))})}function bY(n){return an(this,arguments,void 0,function*(e,t=e.defaultBlock,r,i){const s=ve({format:"uint"},r,mt);let o;if(La(t)){const a=ve({format:"bytes32"},t,mt);o=yield _X(e.requestManager,a,s)}else{const a=ir(t)?t:ve({format:"uint"},t,mt);o=yield bX(e.requestManager,a,s)}return le(o)?o:Yr(o,i??e.defaultReturnFormat,{transactionSchema:e.config.customTransactionSchema,fillInputAndData:!0})})}function FR(n,e,t){return an(this,void 0,void 0,function*(){const r=ve({format:"bytes32"},e,Ir);let i;try{i=yield xX(n.requestManager,r)}catch(s){if(!(typeof s=="object"&&!le(s)&&"message"in s&&s.message==="transaction indexing is in progress"))throw s}return le(i)?i:ve(Wu,i,t??n.defaultReturnFormat)})}function HR(n,e){return an(this,arguments,void 0,function*(t,r,i=t.defaultBlock,s){const o=ir(i)?i:ve({format:"uint"},i,mt),a=yield oX(t.requestManager,r,o);return ve({format:"uint"},a,s??t.defaultReturnFormat)})}function yd(n,e,t,r={checkRevertBeforeSending:!0},i){const s=new tR((o,a)=>{setImmediate(()=>{an(this,void 0,void 0,function*(){const c=new OR({web3Context:n,promiEvent:s,options:r,returnFormat:t});let l=Object.assign({},e);le(i)||(l=yield i.processTransaction(l));let u=Yr(Object.assign(Object.assign({},l),{from:Wy("from",n,l),to:Wy("to",n,l)}),mt,{transactionSchema:n.config.customTransactionSchema});try{u=yield c.populateGasPrice({transaction:l,transactionFormatted:u}),yield c.checkRevertBeforeSending(u),c.emitSending(u);let f;n.wallet&&!le(u.from)&&(f=n.wallet.get(u.from));const d=yield c.signAndSend({wallet:f,tx:u}),p=ve({format:"bytes32"},d,t??n.defaultReturnFormat);c.emitSent(u),c.emitTransactionHash(p);const v=yield dR(n,d,t??n.defaultReturnFormat),m=c.getReceiptWithEvents(ve(Wu,v,t??n.defaultReturnFormat));c.emitReceipt(m),o(yield c.handleResolve({receipt:m,tx:u})),c.emitConfirmation({receipt:m,transactionHash:d})}catch(f){a(yield c.handleError({error:f,tx:u}))}})})});return s}function xY(n,e,t,r={checkRevertBeforeSending:!0}){const i=new tR((s,o)=>{setImmediate(()=>{an(this,void 0,void 0,function*(){const a=new OR({web3Context:n,promiEvent:i,options:r,returnFormat:t}),c=ve({format:"bytes"},e,mt),l=Bc.fromSerializedData(js(bn(c))),u=Object.assign(Object.assign({},l.toJSON()),{from:l.getSenderAddress().toString()});try{const{v:f,r:d,s:p}=u,v=cY(u,["v","r","s"]);yield a.checkRevertBeforeSending(v),a.emitSending(c);const m=yield qy(n,()=>an(this,void 0,void 0,function*(){return rR(n.requestManager,c)}));a.emitSent(c);const y=ve({format:"bytes32"},m,t??n.defaultReturnFormat);a.emitTransactionHash(y);const h=yield dR(n,m,t??n.defaultReturnFormat),w=a.getReceiptWithEvents(ve(Wu,h,t??n.defaultReturnFormat));a.emitReceipt(w),s(yield a.handleResolve({receipt:w,tx:u})),a.emitConfirmation({receipt:w,transactionHash:m})}catch(f){o(yield a.handleError({error:f,tx:u}))}})})});return i}function wY(n,e,t){return an(this,arguments,void 0,function*(r,i,s,o=r.defaultReturnFormat){var a;const c=ve({format:"bytes"},i,Ir);if(!((a=r.wallet)===null||a===void 0)&&a.get(s)){const f=r.wallet.get(s).sign(c);return ve(aK,f,o)}if(typeof s=="number")throw new c7(i,'RPC method "eth_sign" does not support index signatures');const l=yield dX(r.requestManager,s,c);return ve({format:"bytes"},l,o)})}function AY(n,e){return an(this,arguments,void 0,function*(t,r,i=t.defaultReturnFormat){const s=yield hX(t.requestManager,Yr(r,mt,{transactionSchema:t.config.customTransactionSchema}));return vb(s)?fK(s,i,{fillInputAndData:!0}):{raw:ve({format:"bytes"},s.raw,i),tx:Yr(s.tx,i,{transactionSchema:t.config.customTransactionSchema,fillInputAndData:!0})}})}function sx(n,e){return an(this,arguments,void 0,function*(t,r,i=t.defaultBlock,s=t.defaultReturnFormat){const o=ir(i)?i:ve({format:"uint"},i,mt),a=yield mX(t.requestManager,Yr(r,mt,{transactionSchema:t.config.customTransactionSchema}),o);return ve({format:"bytes"},a,s)})}function ox(n,e){return an(this,arguments,void 0,function*(t,r,i=t.defaultBlock,s){const o=Yr(r,mt,{transactionSchema:t.config.customTransactionSchema}),a=ir(i)?i:ve({format:"uint"},i,mt),c=yield gX(t.requestManager,o,a);return ve({format:"uint"},c,s??t.defaultReturnFormat)})}function zR(n,e,t){return an(this,void 0,void 0,function*(){let{toBlock:r,fromBlock:i}=e;le(r)||(typeof r=="number"||typeof r=="bigint")&&(r=$n(r)),le(i)||(typeof i=="number"||typeof i=="bigint")&&(i=$n(i));const s=Object.assign(Object.assign({},e),{fromBlock:i,toBlock:r});return(yield CX(n.requestManager,s)).map(c=>typeof c=="string"?c:ve(Vu,c,t??n.defaultReturnFormat))})}function GR(n,e){return an(this,void 0,void 0,function*(){const t=yield DX(n.requestManager);return ve({format:"uint"},t,e??n.defaultReturnFormat)})}function EY(n,e,t){return an(this,arguments,void 0,function*(r,i,s,o=r.defaultBlock,a){const c=s.map(f=>ve({format:"bytes"},f,mt)),l=ir(o)?o:ve({format:"uint"},o,mt),u=yield OX(r.requestManager,i,c,l);return ve(uK,u,a??r.defaultReturnFormat)})}function SY(n,e){return an(this,arguments,void 0,function*(t,r,i=t.defaultBlock,s,o){const a=ve({format:"uint"},r,mt),c=ir(i)?i:ve({format:"uint"},i,mt),l=ve({type:"array",items:{format:"uint"}},s,h0),u=yield BX(t.requestManager,a,c,l);return ve(cK,u,o??t.defaultReturnFormat)})}function VR(n,e){return an(this,arguments,void 0,function*(t,r,i=t.defaultBlock,s){const o=ir(i)?i:ve({format:"uint"},i,mt),a=yield FX(t.requestManager,Yr(r,mt,{transactionSchema:t.config.customTransactionSchema}),o);return ve(rK,a,s??t.defaultReturnFormat)})}function TY(n,e,t,r,i){return an(this,void 0,void 0,function*(){const s=yield HX(n.requestManager,e,t,r);return ve({format:"bytes"},s,i??n.defaultReturnFormat)})}var ju=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};function MY(n,e){return ju(this,void 0,void 0,function*(){const t=yield TX(n.requestManager);return ve({format:"uint"},t,e??n.defaultReturnFormat)})}function RY(n,e,t){return ju(this,void 0,void 0,function*(){let{toBlock:r,fromBlock:i}=e;le(r)||(typeof r=="number"||typeof r=="bigint")&&(r=$n(r)),le(i)||(typeof i=="number"||typeof i=="bigint")&&(i=$n(i));const s=Object.assign(Object.assign({},e),{fromBlock:i,toBlock:r}),o=yield EX(n.requestManager,s);return ve({format:"uint"},o,t??n.defaultReturnFormat)})}function IY(n,e){return ju(this,void 0,void 0,function*(){const t=yield SX(n.requestManager);return ve({format:"uint"},t,e??n.defaultReturnFormat)})}function CY(n,e){return ju(this,void 0,void 0,function*(){return yield MX(n.requestManager,$n(e))})}function PY(n,e,t){return ju(this,void 0,void 0,function*(){return(yield RX(n.requestManager,$n(e))).map(s=>typeof s=="string"?s:ve(Vu,s,t??n.defaultReturnFormat))})}function NY(n,e,t){return ju(this,void 0,void 0,function*(){return(yield IX(n.requestManager,$n(e))).map(s=>typeof s=="string"?s:ve(Vu,s,t??n.defaultReturnFormat))})}class WR extends Wd{_buildSubscriptionParams(){return["logs",this.args]}formatSubscriptionResult(e){return ve(Vu,e,super.returnFormat)}}class LE extends Wd{_buildSubscriptionParams(){return["newPendingTransactions"]}formatSubscriptionResult(e){return ve({format:"string"},e,super.returnFormat)}}class gm extends Wd{_buildSubscriptionParams(){return["newHeads"]}formatSubscriptionResult(e){return ve(sK,e,super.returnFormat)}}class jR extends Wd{_buildSubscriptionParams(){return["syncing"]}_processSubscriptionResult(e){if(typeof e=="boolean")this.emit("changed",e);else{const t=Object.fromEntries(Object.entries((e==null?void 0:e.status)||e).map(([r,i])=>[r.charAt(0).toLowerCase()+r.substring(1),i]));this.emit("changed",e.syncing),this.emit("data",ve(oK,t,super.returnFormat))}}}var vt=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const Zy={logs:WR,newPendingTransactions:LE,newHeads:gm,syncing:jR,pendingTransactions:LE,newBlockHeaders:gm};class v0 extends jr{constructor(e){if(typeof e=="string"||om(e)){super({provider:e,registeredSubscriptions:Zy});return}if(e.registeredSubscriptions){super(e);return}super(Object.assign(Object.assign({},e),{registeredSubscriptions:Zy})),this.getFeeData=this.calculateFeeData}setTransactionMiddleware(e){this.transactionMiddleware=e}getTransactionMiddleware(){return this.transactionMiddleware}getProtocolVersion(){return vt(this,void 0,void 0,function*(){return Y$(this.requestManager)})}isSyncing(){return vt(this,void 0,void 0,function*(){return nR(this.requestManager)})}getCoinbase(){return vt(this,void 0,void 0,function*(){return Q$(this.requestManager)})}isMining(){return vt(this,void 0,void 0,function*(){return Z$(this.requestManager)})}getHashrate(e){return vt(this,void 0,void 0,function*(){var t;return e===void 0&&(e=(t=this.defaultReturnFormat)!==null&&t!==void 0?t:Ir),this.getHashRate(e)})}getHashRate(){return vt(this,arguments,void 0,function*(e=this.defaultReturnFormat){return uY(this,e)})}getGasPrice(){return vt(this,arguments,void 0,function*(e=this.defaultReturnFormat){return rx(this,e)})}getMaxPriorityFeePerGas(){return vt(this,arguments,void 0,function*(e=this.defaultReturnFormat){return fY(this,e)})}calculateFeeData(){return vt(this,arguments,void 0,function*(e=BigInt(2),t=n0.Gwei){var r;const i=yield this.getBlock(void 0,!1),s=(r=i==null?void 0:i.baseFeePerGas)!==null&&r!==void 0?r:void 0;let o;try{o=yield this.getGasPrice()}catch{}let a;try{a=yield this.getMaxPriorityFeePerGas()}catch{}let c;if(s){a=a??t;let l;typeof e=="number"?l=BigInt(Math.floor(e*1e3))/BigInt(1e3):l=e,c=s*l+a}return{gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:a,baseFeePerGas:s}})}getAccounts(){return vt(this,void 0,void 0,function*(){var e;return((e=yield nX(this.requestManager))!==null&&e!==void 0?e:[]).map(r=>Ys(r))})}getBlockNumber(){return vt(this,arguments,void 0,function*(e=this.defaultReturnFormat){return ix(this,e)})}getBalance(e){return vt(this,arguments,void 0,function*(t,r=this.defaultBlock,i=this.defaultReturnFormat){return dY(this,t,r,i)})}getStorageAt(e,t){return vt(this,arguments,void 0,function*(r,i,s=this.defaultBlock,o=this.defaultReturnFormat){return hY(this,r,i,s,o)})}getCode(e){return vt(this,arguments,void 0,function*(t,r=this.defaultBlock,i=this.defaultReturnFormat){return pY(this,t,r,i)})}getBlock(){return vt(this,arguments,void 0,function*(e=this.defaultBlock,t=!1,r=this.defaultReturnFormat){return UR(this,e,t,r)})}getBlockTransactionCount(){return vt(this,arguments,void 0,function*(e=this.defaultBlock,t=this.defaultReturnFormat){return mY(this,e,t)})}getBlockUncleCount(){return vt(this,arguments,void 0,function*(e=this.defaultBlock,t=this.defaultReturnFormat){return gY(this,e,t)})}getUncle(){return vt(this,arguments,void 0,function*(e=this.defaultBlock,t,r=this.defaultReturnFormat){return vY(this,e,t,r)})}getTransaction(e){return vt(this,arguments,void 0,function*(t,r=this.defaultReturnFormat){const i=yield yY(this,t,r);if(!i)throw new WA;return i})}getPendingTransactions(){return vt(this,arguments,void 0,function*(e=this.defaultReturnFormat){return _Y(this,e)})}getTransactionFromBlock(){return vt(this,arguments,void 0,function*(e=this.defaultBlock,t,r=this.defaultReturnFormat){return bY(this,e,t,r)})}getTransactionReceipt(e){return vt(this,arguments,void 0,function*(t,r=this.defaultReturnFormat){const i=yield FR(this,t,r);if(!i)throw new WA;return i})}getTransactionCount(e){return vt(this,arguments,void 0,function*(t,r=this.defaultBlock,i=this.defaultReturnFormat){return HR(this,t,r,i)})}sendTransaction(e,t=this.defaultReturnFormat,r){return yd(this,e,t,r,this.transactionMiddleware)}sendSignedTransaction(e,t=this.defaultReturnFormat,r){return xY(this,e,t,r)}sign(e,t){return vt(this,arguments,void 0,function*(r,i,s=this.defaultReturnFormat){return wY(this,r,i,s)})}signTransaction(e){return vt(this,arguments,void 0,function*(t,r=this.defaultReturnFormat){return AY(this,t,r)})}call(e){return vt(this,arguments,void 0,function*(t,r=this.defaultBlock,i=this.defaultReturnFormat){return sx(this,t,r,i)})}estimateGas(e){return vt(this,arguments,void 0,function*(t,r=this.defaultBlock,i=this.defaultReturnFormat){return ox(this,t,r,i)})}getPastLogs(e){return vt(this,arguments,void 0,function*(t,r=this.defaultReturnFormat){return zR(this,t,r)})}getWork(){return vt(this,void 0,void 0,function*(){return PX(this.requestManager)})}submitWork(e,t,r){return vt(this,void 0,void 0,function*(){return NX(this.requestManager,e,t,r)})}requestAccounts(){return vt(this,void 0,void 0,function*(){return kX(this.requestManager)})}getChainId(){return vt(this,arguments,void 0,function*(e=this.defaultReturnFormat){return GR(this,e)})}getNodeInfo(){return vt(this,void 0,void 0,function*(){return UX(this.requestManager)})}getProof(e,t){return vt(this,arguments,void 0,function*(r,i,s=this.defaultBlock,o=this.defaultReturnFormat){return EY(this,r,i,s,o)})}getFeeHistory(e){return vt(this,arguments,void 0,function*(t,r=this.defaultBlock,i,s=this.defaultReturnFormat){return SY(this,t,r,i,s)})}createAccessList(e){return vt(this,arguments,void 0,function*(t,r=this.defaultBlock,i=this.defaultReturnFormat){return VR(this,t,r,i)})}signTypedData(e,t,r,i){return vt(this,void 0,void 0,function*(){var s;return r===void 0&&(r=!1),i===void 0&&(i=(s=this.defaultReturnFormat)!==null&&s!==void 0?s:Ir),TY(this,e,t,r,i)})}subscribe(e,t,r){return vt(this,void 0,void 0,function*(){var i,s;r===void 0&&(r=(i=this.defaultReturnFormat)!==null&&i!==void 0?i:Ir);const o=yield(s=this.subscriptionManager)===null||s===void 0?void 0:s.subscribe(e,t,r);return o instanceof WR&&e==="logs"&&typeof t=="object"&&!at(t.fromBlock)&&Number.isFinite(Number(t.fromBlock))&&setImmediate(()=>{this.getPastLogs(t).then(a=>{for(const c of a)o._processSubscriptionResult(c)}).catch(a=>{o._processSubscriptionError(a)})}),o})}static shouldClearSubscription({sub:e}){return!(e instanceof jR)}clearSubscriptions(e=!1){var t;return(t=this.subscriptionManager)===null||t===void 0?void 0:t.unsubscribe(e?v0.shouldClearSubscription:void 0)}createNewPendingTransactionFilter(){return vt(this,arguments,void 0,function*(e=this.defaultReturnFormat){return MY(this,e)})}createNewFilter(e){return vt(this,arguments,void 0,function*(t,r=this.defaultReturnFormat){return RY(this,t,r)})}createNewBlockFilter(){return vt(this,arguments,void 0,function*(e=this.defaultReturnFormat){return IY(this,e)})}uninstallFilter(e){return vt(this,void 0,void 0,function*(){return CY(this,e)})}getFilterChanges(e){return vt(this,arguments,void 0,function*(t,r=this.defaultReturnFormat){return PY(this,t,r)})}getFilterLogs(e){return vt(this,arguments,void 0,function*(t,r=this.defaultReturnFormat){return NY(this,t,r)})}}const BY=n=>{if(!le(n.common)){if(le(n.common.customChain))throw new d7;if(le(n.common.customChain.chainId))throw new h7;if(!le(n.chainId)&&n.chainId!==n.common.customChain.chainId)throw new p7({txChainId:n.chainId,customChainId:n.common.customChain.chainId})}},LY=n=>{if(!le(n.common)&&!le(n.chain)&&!le(n.hardfork))throw new v7;if(!le(n.chain)&&le(n.hardfork)||!le(n.hardfork)&&le(n.chain))throw new y7({chain:n.chain,hardfork:n.hardfork})},kY=n=>{if(!le(n.common)&&!le(n.common.baseChain)&&!le(n.chain)&&n.chain!==n.common.baseChain)throw new m7({txChain:n.chain,baseChain:n.common.baseChain})},DY=n=>{if(!le(n.common)&&!le(n.common.hardfork)&&!le(n.hardfork)&&n.hardfork!==n.common.hardfork)throw new g7({txHardfork:n.hardfork,commonHardfork:n.common.hardfork})},kE=n=>{if(le(n.gas)||!Oo(n.gas)||le(n.gasPrice)||!Oo(n.gasPrice))throw new A7({gas:n.gas,gasPrice:n.gasPrice});if(!le(n.maxFeePerGas)||!le(n.maxPriorityFeePerGas))throw new mM({maxFeePerGas:n.maxFeePerGas,maxPriorityFeePerGas:n.maxPriorityFeePerGas})},DE=n=>{if(!le(n.gasPrice)&&n.type==="0x2")throw new S7(n.gasPrice);if(n.type==="0x0"||n.type==="0x1")throw new mM({maxFeePerGas:n.maxFeePerGas,maxPriorityFeePerGas:n.maxPriorityFeePerGas});if(le(n.maxFeePerGas)||!Oo(n.maxFeePerGas)||le(n.maxPriorityFeePerGas)||!Oo(n.maxPriorityFeePerGas))throw new E7({maxPriorityFeePerGas:n.maxPriorityFeePerGas,maxFeePerGas:n.maxFeePerGas})},OY=n=>{const e=!le(n.gas)||!le(n.gasLimit),t=e&&!le(n.gasPrice),r=e&&!le(n.maxPriorityFeePerGas)&&!le(n.maxFeePerGas);if(!t&&!r)throw new b7({gas:n.gas,gasPrice:n.gasPrice,maxPriorityFeePerGas:n.maxPriorityFeePerGas,maxFeePerGas:n.maxFeePerGas});if(t&&r)throw new w7({gas:n.gas,gasPrice:n.gasPrice,maxPriorityFeePerGas:n.maxPriorityFeePerGas,maxFeePerGas:n.maxFeePerGas});(t?kE:DE)(n),(!le(n.type)&&n.type>"0x1"?DE:kE)(n)},UY=(n,e,t={transactionSchema:void 0})=>{if(!le(e)){e(n);return}if(typeof n!="object"||le(n))throw new T7(n);BY(n),LY(n),kY(n),DY(n);const r=Yr(n,mt,{transactionSchema:t.transactionSchema});if(OY(r),le(r.nonce)||le(r.chainId)||r.nonce.startsWith("-")||r.chainId.startsWith("-"))throw new M7({nonce:n.nonce,chainId:n.chainId})};var FY=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const HY=n=>{var e,t;return Object.assign(Object.assign({},n),{nonce:n.nonce,gasPrice:n.gasPrice,gasLimit:(e=n.gasLimit)!==null&&e!==void 0?e:n.gas,to:n.to,value:n.value,data:(t=n.data)!==null&&t!==void 0?t:n.input,type:n.type,chainId:n.chainId,accessList:n.accessList,maxPriorityFeePerGas:n.maxPriorityFeePerGas,maxFeePerGas:n.maxFeePerGas})},zY=(n,e)=>{var t,r,i,s,o,a,c,l,u,f,d,p,v,m,y,h,w,S;const T=!le(n.chain)&&!le(n.hardfork)||!le(n.common);let C;if(!T)e.defaultCommon?(C=Object.assign({},e.defaultCommon),le(C.hardfork)&&(C.hardfork=(t=n.hardfork)!==null&&t!==void 0?t:e.defaultHardfork),le(C.baseChain)&&(C.baseChain=e.defaultChain)):C=jn.custom({name:"custom-network",chainId:Wr(n.chainId),networkId:le(n.networkId)?void 0:Wr(n.networkId),defaultHardfork:(r=n.hardfork)!==null&&r!==void 0?r:e.defaultHardfork},{baseChain:e.defaultChain});else{const B=(a=(o=(s=(i=n==null?void 0:n.common)===null||i===void 0?void 0:i.customChain)===null||s===void 0?void 0:s.name)!==null&&o!==void 0?o:n.chain)!==null&&a!==void 0?a:"custom-network",O=Wr((u=(l=(c=n==null?void 0:n.common)===null||c===void 0?void 0:c.customChain)===null||l===void 0?void 0:l.chainId)!==null&&u!==void 0?u:n==null?void 0:n.chainId),P=Wr((p=(d=(f=n==null?void 0:n.common)===null||f===void 0?void 0:f.customChain)===null||d===void 0?void 0:d.networkId)!==null&&p!==void 0?p:n==null?void 0:n.networkId),N=(y=(m=(v=n==null?void 0:n.common)===null||v===void 0?void 0:v.hardfork)!==null&&m!==void 0?m:n==null?void 0:n.hardfork)!==null&&y!==void 0?y:e.defaultHardfork,I=(S=(w=(h=n.common)===null||h===void 0?void 0:h.baseChain)!==null&&w!==void 0?w:n.chain)!==null&&S!==void 0?S:e.defaultChain;O&&P&&B&&(C=jn.custom({name:B,chainId:O,networkId:P,defaultHardfork:N},{baseChain:I}))}return{common:C}},GY=(n,e,t,...r)=>FY(void 0,[n,e,t,...r],void 0,function*(i,s,o,a=!1,c=!0){const l=yield vK({transaction:i,web3Context:s,privateKey:o,fillGasPrice:a,fillGasLimit:c}),u=Yr(l,mt,{transactionSchema:s.config.customTransactionSchema});return UY(u,void 0,{transactionSchema:s.config.customTransactionSchema}),Bc.fromTxData(HY(u),zY(u,s))}),OE=({address:n},e,t)=>{var r,i;const s=t==null?void 0:t.topics,o=(r=t==null?void 0:t.filter)!==null&&r!==void 0?r:{},a={};if(at(t==null?void 0:t.fromBlock)||(a.fromBlock=ve(dm.properties.number,t==null?void 0:t.fromBlock,{number:Ri.HEX,bytes:ko.HEX})),at(t==null?void 0:t.toBlock)||(a.toBlock=ve(dm.properties.number,t==null?void 0:t.toBlock,{number:Ri.HEX,bytes:ko.HEX})),s&&Array.isArray(s))a.topics=[...s];else if(a.topics=[],e&&!e.anonymous&&![Au,"allEvents"].includes(e.name)&&a.topics.push((i=e.signature)!==null&&i!==void 0?i:Zb(Co(e))),![Au,"allEvents"].includes(e.name)&&e.inputs)for(const c of e.inputs){if(!c.indexed)continue;const l=o[c.name];if(!l){a.topics.push(null);continue}Array.isArray(l)?a.topics.push(l.map(u=>Yy(c.type,u))):c.type==="string"?a.topics.push(vu(l)):a.topics.push(Yy(c.type,l))}return a.topics.length||delete a.topics,n&&(a.address=n.toLowerCase()),a},Df=(n,e,t)=>{const r=Array.isArray(n.inputs)?n.inputs.length:0;if(n.inputs&&r!==e.length)throw new Cr(`The number of arguments is not matching the methods required number. You need to pass ${r} arguments.`);let i;if(n.inputs?i=g0(Array.isArray(n.inputs)?n.inputs:[],e).replace("0x",""):i=tY(e).replace("0x",""),AK(n)){if(!t)throw new Cr("The contract has no contract data option set. This is necessary to append the constructor parameters.");return t.startsWith("0x")?`${t}${i}`:`0x${t}${i}`}return`${vd(n)}${i}`};class qR extends Wd{constructor(e,t){super(e,t),this.address=e.address,this.topics=e.topics,this.abi=e.abi,this.jsonInterface=e.jsonInterface}_buildSubscriptionParams(){return["logs",{address:this.address,topics:this.topics}]}formatSubscriptionResult(e){return nx(this.abi,e,this.jsonInterface,super.returnFormat)}}Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));const y0=(n,e,t,r)=>{var i,s;const o={};return(!at(n.data)||r==="both")&&(o.data=Df(e,t,(i=n.data)!==null&&i!==void 0?i:n.input)),(!at(n.input)||r==="both")&&(o.input=Df(e,t,(s=n.input)!==null&&s!==void 0?s:n.data)),at(o.input)&&at(o.data)&&(o[r]=Df(e,t)),{data:o.data,input:o.input}},Jy=({abi:n,params:e,options:t,contractOptions:r})=>{var i,s,o;if(!((o=(s=(i=t==null?void 0:t.input)!==null&&i!==void 0?i:t==null?void 0:t.data)!==null&&s!==void 0?s:r.input)!==null&&o!==void 0?o:r.data)&&!(t!=null&&t.to)&&!r.address)throw new Cr("Contract address not specified");if(!(t!=null&&t.from)&&!r.from)throw new Cr('Contract "from" address not specified');let c=Da({to:r.address,gas:r.gas,gasPrice:r.gasPrice,from:r.from,input:r.input,maxPriorityFeePerGas:r.maxPriorityFeePerGas,maxFeePerGas:r.maxFeePerGas,data:r.data},t);const l=y0(c,n,e,t==null?void 0:t.dataInputFill);return c=Object.assign(Object.assign({},c),{data:l.data,input:l.input}),c},VY=({abi:n,params:e,options:t,contractOptions:r})=>{if(!(t!=null&&t.to)&&!r.address)throw new Cr("Contract address not specified");let i=Da({to:r.address,gas:r.gas,gasPrice:r.gasPrice,from:r.from,input:r.input,maxPriorityFeePerGas:r.maxPriorityFeePerGas,maxFeePerGas:r.maxFeePerGas,data:r.data},t);const s=y0(i,n,e,t==null?void 0:t.dataInputFill);return i=Object.assign(Object.assign({},i),{data:s.data,input:s.input}),i},WY=({abi:n,params:e,options:t,contractOptions:r})=>{let i=Da({to:r.address,gas:r.gas,gasPrice:r.gasPrice,from:r.from,input:r.input,data:r.data},t);const s=y0(i,n,e,t==null?void 0:t.dataInputFill);return i=Object.assign(Object.assign({},i),{data:s.data,input:s.input}),i},UE=n=>typeof n=="object"&&!at(n)&&Object.keys(n).length!==0&&!pa(n),jY=({abi:n,params:e,options:t,contractOptions:r})=>{if(!(t!=null&&t.to)&&!r.address)throw new Cr("Contract address not specified");if(!(t!=null&&t.from)&&!r.from)throw new Cr('Contract "from" address not specified');let i=Da({to:r.address,gas:r.gas,gasPrice:r.gasPrice,from:r.from,input:r.input,maxPriorityFeePerGas:r.maxPriorityFeePerGas,maxFeePerGas:r.maxFeePerGas,data:r.data},t);const s=y0(i,n,e,t==null?void 0:t.dataInputFill);return i=Object.assign(Object.assign({},i),{data:s.data,input:s.input}),i};var qY=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};class $Y{_contractMethodDeploySend(e){const t={transactionResolver:r=>{if(r.status===BigInt(0))throw new Cr("code couldn't be stored",r);const i=this.parent.clone();return i.options.address=r.contractAddress,i},contractAbi:this.parent.options.jsonInterface,checkRevertBeforeSending:!1};return le(this.parent.getTransactionMiddleware())?yd(this.parent,e,this.parent.defaultReturnFormat,t):yd(this.parent,e,this.parent.defaultReturnFormat,t,this.parent.getTransactionMiddleware())}constructor(e,t){this.parent=e,this.deployOptions=t;const{args:r,abi:i,contractOptions:s,deployData:o}=this.calculateDeployParams();this.args=r,this.constructorAbi=i,this.contractOptions=s,this.deployData=o}send(e){const t=Object.assign({},e),r=this.populateTransaction(t);return this._contractMethodDeploySend(r)}populateTransaction(e){var t,r;const i=Object.assign(Object.assign({},this.contractOptions),{from:(r=(t=this.contractOptions.from)!==null&&t!==void 0?t:this.parent.defaultAccount)!==null&&r!==void 0?r:void 0}),s=Jy({abi:this.constructorAbi,params:this.args,options:Object.assign(Object.assign({},e),{dataInputFill:this.parent.contractDataInputFill}),contractOptions:i});return s.dataInputFill&&delete s.dataInputFill,s}calculateDeployParams(){var e,t,r,i,s,o;let a=this.parent.options.jsonInterface.find(p=>p.type==="constructor");a||(a={type:"constructor",stateMutability:""});const c=ve({format:"bytes"},(t=(e=this.deployOptions)===null||e===void 0?void 0:e.input)!==null&&t!==void 0?t:this.parent.options.input,Ir),l=ve({format:"bytes"},(i=(r=this.deployOptions)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:this.parent.options.data,Ir);if((!c||c.trim()==="0x")&&(!l||l.trim()==="0x"))throw new Cr("contract creation without any data provided.");const u=(o=(s=this.deployOptions)===null||s===void 0?void 0:s.arguments)!==null&&o!==void 0?o:[],f=Object.assign(Object.assign({},this.parent.options),{input:c,data:l});return{args:u,abi:a,contractOptions:f,deployData:c??l}}estimateGas(e){return qY(this,arguments,void 0,function*(t,r=this.parent.defaultReturnFormat){const i=Object.assign({},t);return this.parent.contractMethodEstimateGas({abi:this.constructorAbi,params:this.args,returnFormat:r,options:i,contractOptions:this.contractOptions})})}encodeABI(){return Df(this.constructorAbi,this.args,ve({format:"bytes"},this.deployData,this.parent.defaultReturnFormat))}decodeData(e){return Object.assign(Object.assign({},Qy(this.constructorAbi,e.replace(this.deployData,""),!1)),{__method__:this.constructorAbi.type})}}var XY=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};class KY extends am{constructor(e,t){super(e.requestManager,e.registeredSubscriptions),this.parentContract=t}subscribe(e,t){const r=Object.create(null,{subscribe:{get:()=>super.subscribe}});return XY(this,arguments,void 0,function*(i,s,o=Ir){return r.subscribe.call(this,i,s??this.parentContract.options,o)})}}var $a=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const YY={logs:qR,newHeads:gm,newBlockHeaders:gm};let e_=class ip extends jr{get subscriptionManager(){return this._subscriptionManager}constructor(e,t,r,i,s){var o,a,c;const l=pa(t)?t:pa(r)?r:void 0;let u;UE(t)?u=t:UE(r)?u=r:u=i;let f;if(typeof t=="object"&&"provider"in t?f=t.provider:typeof r=="object"&&"provider"in r?f=r.provider:typeof i=="object"&&"provider"in i?f=i.provider:f=ip.givenProvider,super(Object.assign(Object.assign({},u),{provider:f,registeredSubscriptions:YY})),this.syncWithContext=!1,this._functions={},this._subscriptionManager=new KY(super.subscriptionManager,this),u!=null&&u.wallet&&(this._wallet=u.wallet),u!=null&&u.accountProvider&&(this._accountProvider=u.accountProvider),!le(l)&&!le(l.data)&&!le(l.input)&&this.config.contractDataInputFill!=="both")throw new n7({data:l.data,input:l.input});this._overloadedMethodAbis=new Map;const d=vo(i)?i:vo(r)?r:s??this.defaultReturnFormat,p=typeof t=="string"?t:void 0;this.config.contractDataInputFill=(o=l==null?void 0:l.dataInputFill)!==null&&o!==void 0?o:this.config.contractDataInputFill,this._parseAndSetJsonInterface(e,d),this.defaultReturnFormat!==d&&(this.defaultReturnFormat=d),le(p)||this._parseAndSetAddress(p,d),this.options={address:p,jsonInterface:this._jsonInterface,gas:(a=l==null?void 0:l.gas)!==null&&a!==void 0?a:l==null?void 0:l.gasLimit,gasPrice:l==null?void 0:l.gasPrice,from:l==null?void 0:l.from,input:l==null?void 0:l.input,data:l==null?void 0:l.data},this.syncWithContext=(c=l==null?void 0:l.syncWithContext)!==null&&c!==void 0?c:!1,u instanceof jr&&this.subscribeToContextEvents(u),Object.defineProperty(this.options,"address",{set:v=>this._parseAndSetAddress(v,d),get:()=>this._address}),Object.defineProperty(this.options,"jsonInterface",{set:v=>this._parseAndSetJsonInterface(v,d),get:()=>this._jsonInterface}),u instanceof jr&&u.on(Pc.CONFIG_CHANGE,v=>{this.setConfig({[v.name]:v.newValue})})}setTransactionMiddleware(e){this.transactionMiddleware=e}getTransactionMiddleware(){return this.transactionMiddleware}get events(){return this._events}get methods(){return this._methods}clone(){let e;return this.options.address?e=new ip([...this._jsonInterface,...this._errorsInterface],this.options.address,{gas:this.options.gas,gasPrice:this.options.gasPrice,from:this.options.from,input:this.options.input,data:this.options.data,provider:this.currentProvider,syncWithContext:this.syncWithContext,dataInputFill:this.config.contractDataInputFill},this.getContextObject()):e=new ip([...this._jsonInterface,...this._errorsInterface],{gas:this.options.gas,gasPrice:this.options.gasPrice,from:this.options.from,input:this.options.input,data:this.options.data,provider:this.currentProvider,syncWithContext:this.syncWithContext,dataInputFill:this.config.contractDataInputFill},this.getContextObject()),this.context&&e.subscribeToContextEvents(this.context),e}deploy(e){return new $Y(this,e)}getPastEvents(e,t,r){return $a(this,void 0,void 0,function*(){var i;const s=typeof e=="string"?e:Au,o=typeof e!="string"&&!vo(e)?e:vo(t)?{}:t,a=vo(e)?e:vo(t)?t:r??this.defaultReturnFormat,c=s==="allEvents"||s===Au?Vy:this._jsonInterface.find(h=>"name"in h&&h.name===s);if(!c)throw new Cr(`Event ${String(s)} not found.`);const{fromBlock:l,toBlock:u,topics:f,address:d}=OE(this.options,c,o??{}),p=yield zR(this,{fromBlock:l,toBlock:u,topics:f,address:d},a),v=p?p.map(h=>typeof h=="string"?h:nx(c,h,this._jsonInterface,a)):[],m=(i=o==null?void 0:o.filter)!==null&&i!==void 0?i:{},y=Object.keys(m);return y.length>0?v.filter(h=>typeof h=="string"?!0:y.every(w=>{var S;if(Array.isArray(m[w]))return m[w].some(C=>String(h.returnValues[w]).toUpperCase()===String(C).toUpperCase());const T=(S=c.inputs)===null||S===void 0?void 0:S.filter(C=>C.name===w)[0];return T!=null&&T.indexed&&T.type==="string"&&vu(m[w])===String(h.returnValues[w])?!0:String(h.returnValues[w]).toUpperCase()===String(m[w]).toUpperCase()})):v})}_parseAndSetAddress(e,t=this.defaultReturnFormat){this._address=e&&Ys(ve({format:"address"},e,t))}decodeMethodData(e){const t=e.slice(0,10),i=this._jsonInterface.filter(s=>s.type!=="error").find(s=>t===vd(Co(s)));if(!i)throw new Cr(`The ABI for the provided method signature ${t} was not found.`);return Qy(i,e)}_parseAndSetJsonInterface(e,t=this.defaultReturnFormat){var r,i;this._functions={},this._methods={},this._events={};let s=[];const o=e.filter(c=>c.type!=="error"),a=e.filter(c=>p0(c));for(const c of o){const l=Object.assign(Object.assign({},c),{signature:""});if(m0(l)){const u=Co(l),f=vd(u);l.methodNameWithInputs=u,l.signature=f,l.constant=l.stateMutability==="view"||l.stateMutability==="pure"||l.constant,l.payable=l.stateMutability==="payable"||l.payable,this._overloadedMethodAbis.set(l.name,[...(r=this._overloadedMethodAbis.get(l.name))!==null&&r!==void 0?r:[],l]);const d=(i=this._overloadedMethodAbis.get(l.name))!==null&&i!==void 0?i:[],p=this._createContractMethod(d,a),v=this._createContractMethod(d,a,!0);this._functions[u]={signature:f,method:v},this._methods[l.name]=p,this._methods[u]=v,this._methods[f]=v}else if(Qb(l)){const u=Co(l),f=Zb(u),d=this._createContractEvent(l,t);l.signature=f,(!(u in this._events)||l.name==="bound")&&(this._events[u]=d),this._events[l.name]=d,this._events[f]=d}s=[...s,l]}this._events.allEvents=this._createContractEvent(Vy,t),this._jsonInterface=[...s],this._errorsInterface=a}_getAbiParams(e,t){var r;try{return kf((r=e.inputs)!==null&&r!==void 0?r:[],t)}catch(i){throw new Cr(`Invalid parameters for method ${e.name}: ${i.message}`)}}_createContractMethod(e,t,r=!1){const i=e[e.length-1];return(...s)=>{var o,a,c;let l;const u=(a=r?(o=this._overloadedMethodAbis.get(i.name))===null||o===void 0?void 0:o.filter(m=>m.signature===i.signature):this._overloadedMethodAbis.get(i.name))!==null&&a!==void 0?a:[];let f=u[0];const d=t,p=u.filter(m=>{var y;return((y=m.inputs)!==null&&y!==void 0?y:[]).length===s.length});if(u.length===1||p.length===0)l=this._getAbiParams(f,s),nt.validate((c=i.inputs)!==null&&c!==void 0?c:[],l);else{const m=[],y=[];for(const h of p)try{l=this._getAbiParams(h,s),nt.validate(h.inputs,l),y.push(h)}catch(w){m.push(w)}if(y.length===1?[f]=y:y.length>1&&([f]=y),m.length===p.length)throw new pu(m)}const v={arguments:l,call:(m,y)=>$a(this,void 0,void 0,function*(){return this._contractMethodCall(f,l,d,m,y)}),send:m=>this._contractMethodSend(f,l,d,m),populateTransaction:(m,y)=>{var h,w;let S=y??this.options;S=Object.assign(Object.assign({},S),{input:void 0,from:(w=(h=S==null?void 0:S.from)!==null&&h!==void 0?h:this.defaultAccount)!==null&&w!==void 0?w:void 0});const T=Jy({abi:i,params:s,options:Object.assign(Object.assign({},m),{dataInputFill:this.config.contractDataInputFill}),contractOptions:S});return T.dataInputFill&&delete T.dataInputFill,T},estimateGas:(m,...y)=>$a(this,[m,...y],void 0,function*(h,w=this.defaultReturnFormat){return this.contractMethodEstimateGas({abi:f,params:l,returnFormat:w,options:h})}),encodeABI:()=>Df(f,l),decodeData:m=>Qy(f,m),createAccessList:(m,y)=>$a(this,void 0,void 0,function*(){return this._contractMethodCreateAccessList(f,l,d,m,y)})};return f.stateMutability==="payable",v}}_contractMethodCall(e,t,r,i,s){return $a(this,void 0,void 0,function*(){var o;const a=VY({abi:e,params:t,options:Object.assign(Object.assign({},i),{dataInputFill:this.config.contractDataInputFill}),contractOptions:Object.assign(Object.assign({},this.options),{from:(o=this.options.from)!==null&&o!==void 0?o:this.config.defaultAccount})});try{const c=yield sx(this,a,s,this.defaultReturnFormat);return rY(e,c)}catch(c){throw c instanceof fc&&rp(r,c.cause),c}})}_contractMethodCreateAccessList(e,t,r,i,s){return $a(this,void 0,void 0,function*(){var o;const a=jY({abi:e,params:t,options:Object.assign(Object.assign({},i),{dataInputFill:this.config.contractDataInputFill}),contractOptions:Object.assign(Object.assign({},this.options),{from:(o=this.options.from)!==null&&o!==void 0?o:this.config.defaultAccount})});try{return VR(this,a,s,this.defaultReturnFormat)}catch(c){throw c instanceof fc&&rp(r,c.cause),c}})}_contractMethodSend(e,t,r,i,s){var o,a;let c=s??this.options;c=Object.assign(Object.assign({},c),{input:void 0,from:(a=(o=c.from)!==null&&o!==void 0?o:this.defaultAccount)!==null&&a!==void 0?a:void 0});const l=Jy({abi:e,params:t,options:Object.assign(Object.assign({},i),{dataInputFill:this.config.contractDataInputFill}),contractOptions:c}),u=le(this.transactionMiddleware)?yd(this,l,this.defaultReturnFormat,{checkRevertBeforeSending:!1,contractAbi:this._jsonInterface}):yd(this,l,this.defaultReturnFormat,{checkRevertBeforeSending:!1,contractAbi:this._jsonInterface},this.transactionMiddleware);return u.on("error",f=>{f instanceof fc&&rp(r,f.cause)}),u}contractMethodEstimateGas(e){return $a(this,arguments,void 0,function*({abi:t,params:r,returnFormat:i,options:s,contractOptions:o}){const a=WY({abi:t,params:r,options:Object.assign(Object.assign({},s),{dataInputFill:this.config.contractDataInputFill}),contractOptions:o??this.options});return ox(this,a,bo.LATEST,i??this.defaultReturnFormat)})}_createContractEvent(e,t=this.defaultReturnFormat){return(...r)=>{var i;const{topics:s,fromBlock:o}=OE(this.options,e,r[0]),a=new qR({address:this.options.address,topics:s,abi:e,jsonInterface:this._jsonInterface},{subscriptionManager:this.subscriptionManager,returnFormat:t});return le(o)||this.getPastEvents(e.name,{fromBlock:o,topics:s},t).then(c=>{c&&c.forEach(l=>a.emit("data",l))}).catch(c=>{a.emit("error",new ho("Failed to get past events.",c))}),(i=this.subscriptionManager)===null||i===void 0||i.addSubscription(a).catch(c=>{a.emit("error",new ho("Failed to subscribe.",c))}),a}}subscribeToContextEvents(e){const t=this;this.context=e,t.syncWithContext&&e.on(Pc.CONFIG_CHANGE,r=>{t.setConfig({[r.name]:r.newValue})})}};const FE={addr:"0x3b3b57de",name:"0x691f3431",abi:"0x2203ab56",pubkey:"0xc8690233",text:"0x59d1d43c",contenthash:"0xbc1c58d1"},pl={setAddr:"addr",addr:"addr",setPubkey:"pubkey",pubkey:"pubkey",setContenthash:"contenthash",contenthash:"contenthash",text:"text",name:"name"},vm={main:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",goerli:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},QY={"0x1":"main","0x5":"goerli"},ZY=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"label",type:"bytes32"},{indexed:!1,internalType:"address",name:"owner",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"resolver",type:"address"}],name:"NewResolver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"owner",type:"address"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"recordExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"resolver",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"ttl",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"}],JY=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"a",type:"address"}],name:"AddrChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"coinType",type:"uint256"},{indexed:!1,internalType:"bytes",name:"newAddress",type:"bytes"}],name:"AddressChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"hash",type:"bytes"}],name:"ContenthashChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"name",type:"bytes"},{indexed:!1,internalType:"uint16",name:"resource",type:"uint16"},{indexed:!1,internalType:"bytes",name:"record",type:"bytes"}],name:"DNSRecordChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"name",type:"bytes"},{indexed:!1,internalType:"uint16",name:"resource",type:"uint16"}],name:"DNSRecordDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"}],name:"DNSZoneCleared",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"lastzonehash",type:"bytes"},{indexed:!1,internalType:"bytes",name:"zonehash",type:"bytes"}],name:"DNSZonehashChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"bytes4",name:"interfaceID",type:"bytes4"},{indexed:!1,internalType:"address",name:"implementer",type:"address"}],name:"InterfaceChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"string",name:"name",type:"string"}],name:"NameChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"x",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"y",type:"bytes32"}],name:"PubkeyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"string",name:"indexedKey",type:"string"},{indexed:!1,internalType:"string",name:"key",type:"string"}],name:"TextChanged",type:"event"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"uint256",name:"contentTypes",type:"uint256"}],name:"ABI",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"addr",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"uint256",name:"coinType",type:"uint256"}],name:"addr",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"contenthash",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"},{internalType:"uint16",name:"resource",type:"uint16"}],name:"dnsRecord",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"}],name:"hasDNSRecords",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes4",name:"interfaceID",type:"bytes4"}],name:"interfaceImplementer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"pubkey",outputs:[{internalType:"bytes32",name:"x",type:"bytes32"},{internalType:"bytes32",name:"y",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"string",name:"key",type:"string"}],name:"text",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"zonehash",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"address",name:"a",type:"address"}],name:"setAddr",outputs:[],stateMutability:"nonpayable",type:"function"}];var eQ="AEkU4AngDVgB0QKRAQYBOwDqATEAnwDbAIUApABsAOAAbwCRAEYAiQBPAHYAPgA+ACsANwAlAGMAHwAvACsAJQAWAC8AGwAiACIALwAUACsAEQAiAAsAGwARABcAGAA6ACkALAAsADUAFgAsABEAHQAhAA8AGwAdABUAFgAZAA0ADQAXABAAGQAUABIEqgYJAR4UFjfDBdMAsQCuPwFnAKUBA10jAK5/Ly8vLwE/pwUJ6/0HPwbkMQVXBVgAPSs5APa2EQbIwQuUCkEDyJ4zAsUKLwKOoQKG2D+Ob4kCxcsCg/IBH98JAPKtAUECLY0KP48A4wDiChUAF9S5yAwLPZ0EG3cA/QI5GL0P6wkGKekFBIFnDRsHLQCrAGmR76WcfwBbBpMjBukAGwA7DJMAWxVbqfu75wzbIM8IuykDsRQ7APcta6MAoX0YABcEJdcWAR0AuRnNBPoJIEw3CZcJiB4bVllM44NCABMADAAVAA5rVAAhAA4AR+4V2D3zOVjKleYuChAdX01YPewAEwAMABUADmsgXECXAMPrABsAOQzFABsVW6n7Adq4HB0FWwXiAtCfAsSwCkwcpGUUcxptTPUAuw1nAuEACy00iRfJkQKBewETGwC9DWcC4QALLQFIUCWRTAoDLfsFMgnXaRetAddDAEkrEncCMRYhAusnuTdrADnhAfUlAMcOy7UBG2OBALEFAAUAitNJBRvDHwcXAKgn0QGhKy0DmwBnAQoZPu03dAQYFwCqAccCIQDTKxJzOvNQsAWQOncnNUgF+icFWQVYr7gFaTtdQhI6WEGXe5NmX6H4CxMDxQcl8XcjBKNLAlNTAnUbqycBj6OlNVsDRRcEg2EJANEGqz8vIwcpAjldAGsBYR9xAIMdGQCVAUm3ACdpFwGvxQM3LSFDUwFvWQZlAmUA8UkXAykBBQBJQQCrAF0AcwArtQYH8+8ZjX8ACSEAKQCzG0cB0QHbBwsxl3iB6AAKABEANAA9ADgzd3nTwBBfEFwBTQlMbDoVCwKsD6YL5REVDNEqy9PYADSpB+sDUwfrA1MDUwfrB+sDUwfrA1MDUwNTA1McCvAa08AQXw9IBG0FjgWLBNYIgyZJEYEHKAjSVA10HhxHA0UA/CMlSRw7kzMLJUJMDE0DB/w2QmynfTgDRzGrVPWQogPLMk85bAEecRKgACoPcxw1tU5+ekdxoApLT661f0liTmcCvjqoP/gKIQmTb7t3TgY9EBcnoRDzDC8BsQE3DelL1ATtBjcExR95GRUPyZWYCKEt2QzpJt8unYBWI/EqfwXpS/A82QtJUWQPVQthCd86X4FKAx0BCSKHCtkNNQhpEO8KxWcN4RFBBzUD0UmWAKEG/QsNHTEVsSYMYqgLBTlzBvca8guLJqsTJXr4Bc8aHQZJASUa+wDLLuOFrFotXBhPWwX/CyEjwxSkUBwNIUCzeEQaFwcRJaUCjUNsSoNRMh6PIfI8OQ1iLg9ReAfxPAEZSwt9PJpGp0UKEc4+iT1EIkVMKAQxeywrJ4cJyw+BDLV8bgFVCR0JrQxtEy0REzfBCDUHFSmXICcRCB1GkWCWBPObA+8TzQMHBTsJPQcPA7EcKRMqFSUFCYEg0wLvNtEurwKLVnwBEwXHDyEf2xBMR9wO5QiXAmEDfyXnACkVHQATIpcIP18AW4/UUwEuxwjDamgjcANjFONdEW8HjQ5TB6McLxW7HN1wxF4HhgQon6sJVwFxCZUBWwTfCAU1V4ycID1nT4tUGJcgXUE7XfgCLQxhFZtEuYd0AocPZxIXATEBbwc1DP0CcxHpEWcQkQjnhgA1sTP0OiEESyF/IA0KIwNLbMoLIyb1DPRlAZ8SXgMINDl36menYLIgF/kHFTLBQVwh7QuOT8kMmBq9GD5UKhngB7sD7xrvJ+ZBUwX7A58POkkz6gS5C2UIhwk7AEUOnxMH0xhmCm2MzAEthwGzlQNTjX8Ca4sGMwcHAGMHgwV14QAZAqMInwABAMsDUwA1AqkHmQAVAIE9ATkDIysBHeECiwOPCC3HAZErAe8lBBe/DBEA8zNuRgLDrQKAZmaeBdlUAooCRTEBSSEEAUpDTQOrbd0A1wBHBg/bQwERp0bHFt8/AdtrJwDDAPcAATEHAT0ByQHvaQCzAVsLLQmer7EBSeUlAH8AEWcB0wKFANkAMQB77QFPAEkFVfUFzwJLRQENLRQnU10BtwMbAS8BCQB1BseJocUDGwRpB88CEBcV3QLvKgexAyLbE8lCwQK92lEAMhIKNAq1CrQfX/NcLwItbj1MAAofpD7DP0oFTTtPO1Q7TztUO087VDtPO1Q7TztUA5O73rveCmhfQWHnDKIN0ETEOkUT12BNYC4TxC2zFL0VyiVSGTkauCcBJeBVBQ8ALc9mLAgoNHEXuAA7KWSDPWOCHiwKRxzjU41U9C0XAK1LnjOrDagbEUQ8BUN16WImFgoKHgJkfQJiPldJq1c3HAKh8wJolAJmBQKfgDgXBwJmNwJmIgRqBHsDfw8Dfo45AjlzEzl+Oh8fAmwZAjIyOAYCbcMCbarrhi9jQScBYwDaAN0ARgEHlAyJAPoHvgAJsQJ3KwJ2njsCeUc/Ani2GVjXRapG0wJ8OwJ6xAJ9BQJ87AVVBRxH/Eh5XyAAJxFJVEpXERNKyALQ/QLQyEsjA4hLA4fiRMGRLgLynVz/AwOqS8pMKSHLTUhNqwKLOwKK1L0XAxk/YwGzAo4zAo5YPJN9Ao7VAo5YdFGwUzEGUtBUgQKT9wKTCADlABhVGlWrVcwCLBcpkYIy3XhiRTc1ApebAu+uWB2kAFUhApaLApZ4mAClWahaBX1JADcClrEClkpcQFzNApnHAplgXMZdAxUCnJc5vjqZApwSAp+XAp60hgAZCy0mCwKd7QKejgCxOWEwYesCns8CoGoBpQKemxsCnkqhY8RkIyEnAierAiZ6AqD3AqBIAqLZAqHAAqYrAqXKAqf7AHkCp+5oeGit/0VqGGrNAqzfAqyqAq1jAqz+AlcZAlXYArHd0wMfSmyTArK5CQKy5BNs3G1fbURbAyXJArZYNztujAMpQQK4WgK5QxECuSZzcDJw3QK9FQK71nCSAzINAr6Ecf4DM20CvhZzHnNLAsPHAsMAc350RzFBdNwDPKMDPJYDPbsCxXgCxkMCxgyFAshlTQLIQALJSwLJKgJkmQLdznh1XXiqeSFLzAMYn2b+AmHwGe+VIHsHXo5etw0Cz2cCz2grR0/O7w+bAMKpAs9vASXmA04OfkcBAtwjAtuGAtJLA1JYA1NbAP0DVYiAhTvHEulcQYIYgs+CyoOJAtrDAtnahAyERac4A4ahACsDZAqGbVX1AFEC32EC3rRvcwLiK+0QAfMsIwH0lwHyzoMC6+8C6Wx1Aur1AurgAPVDAbUC7oUC65iWppb/Au47A4XcmHVw3HGdAvL/AGUDjhKZjwL3DwORagOSgwL3lAL51QL4YpoYmqe3M5saA51/Av72ARcANZ8Yn68DBYkDpmYDptUAzcEDBmahhKIBBQMMRQELARsHaQZdtWMBALcEZ7sNhx6vCQATcTUAHwMvEkkDhXsBXyMdAIzrAB0A5p8Dm40IswYbn8EApwURu+kdPT4WeAVoNz5AK0IhQrRfcRFfvACWxQUyAJBMGZu5OyZgMhG6zw4vGMYYicn2BVcFWAVXBVgFYwVYBVcFWAVXBVgFVwVYBVcFWEYVCNeFZwICAgpkXukrBMkDsQYvu7sAuwSnuwDnQCkWsgVGPmk+cEI/QrZfdTdf6ABYETOrAIz+zGvL/KbnRno9JiMEKxYnNjV+bd9qwfEZwixpAWvXbjAXBV8FasnBybgIz0lbAAAACnxefYu+ADM/gQADFtEG5a0jBQCMwwsDAQ0A5WUdPSQfSkKxQrxBOCNfJ2A2JzgjCcE9CkQ/Qz54PoE+cD5xAolCvElCO1/LTk9qTQosa1QvagtuH1/gMzobCWebCmIjKzwdJkKrQrwrzAHL/F/JDh8uCQgJIn6d32o6LUoXyavJrAllwcvMCmBBXw/lEKMRAJONHUVCJRupbTnOOAozP0M+cEI/HAcKHUxHbFssLVrhvBIKfe0dK0I/HF0ISgkOM1RDQjcEO0OcLAqBGy1CPxv1CFMiIxgwMQAFj2HwXgpxZMlgC2AtI25DYBk5AhseYLMGAmsQZU5gTREBZOdgFWCVYH1gs2BLYJFoFhcGtQ7cVam8WgtDFqsBuyvNwQIfFQAcAx4BeQJsLzCVUoABigq4RxoA5CN0jgrKDaZN6gGbAoecTwVAXwD39wkANBZXDAulDCQfuq9HAE8MNAAVE58rggh6AtILS2URGwDYTgZ1BAoeWgAxALa4AZonCxZvqyQ4nxkBWwGGCfwD2e0PBqoGSga5AB3LValaCbthE4kLLT8OuwG7ASICR1ooKCggHh8hLBImBiEMjQBUAm5XkEmVAW4fD3FHAdN1D85RIBmpsE3qBxEFTF8A9/cKAHoGJGwKKwulODAtx69WDQsAX7wLAGNAlQh6AOpN7yIbvwAxALa4AZonLTsOzgKQGHtQu1jIdHKO16WbDvWZFT0b7AEpEFwSBg8bAccJOhCTBRArDDYLABEAs84BAgCkAOEAmIIABWtXLwAUAFsbxi5sdioNwRACOyQz0+EcHgsbfQJ7Ls6hHATBCqrxbAA3OS0Opge7CQAQOi7OERkAfavaHA+7GkcczaF3HgE9Kl8cAuugCAHCAULz5B9lAb4Jtwz6CDwKPgAFwAs9AksNuwi8DTwKvC7OoSoJPA67BZgBG2sKD4sa4QHDARELuxY7AKALOxC7BBige9wAO2sMPAACpgm8BRvQ9QUBvgH6bsoGewAHuwG7D00RErwBAQDqAQAAdBVbBhbLFPxvF7sYOwAuuwLrDlaouwAeuwJVICp/AAG7AALjAAg7FTwVuwAbuwG9KOClWw6/xAD0AGj7L7ZtvgNIo7vIqDsDAbuVJ0sAAlsACrsEAOfdGbsIGnsIoQUK/3AA37unuxjbGruji3lyBvupm4MAErsGGwsBvAAAhgBtuwYAC7unOwEaO7oIoZzKAbsL7QfAqTsA4XsBvwAA5QAVuwAG+wAJuwBpiwAauwAOuwIYu45pFfsAAVsADmsALkseAAa7ABe7CCEADUoBwgC3ryYBwAAAtAAOmwG+J+QAsloAHBsBv/7hCqEABcYLFRXbAAebAEK7AQIAabsAC3sAHbsACLsJoQAFygBunxnVAJEIIQAFygABOwAH2wAdmwghAAaaAAl7ABsrAG0bAOa7gAAIWwAUuwkhAAbKAOOLAAk7C6EOxPtfAAc7AG6cQEgARwADOwAJrQM3AAcbABl7Abv/Aab7AAobAAo7AAn7p+sGuwAJGwADCwAQOwAAFDsAEWsAD4sADesADbsAGQsGFhsAFTsAbpsWswG7ALoAEzsDAGkrCgDhSwACOwAEUgAXewUbAAbQABi7AAv7AF+7AGv7AOSLAbsAF3YBvAABcguhAAVKHgF7KFIAOUUA/gcNDHIAKCpwAaQFCF4BvF4jDAkHb0tsXyqJHzwUYi02A6EKtAHYABYC0QNuAXZyR1IUIQNPAhU+ASwGA3NGvHtSekAAKQAxAfsAUwrbAHuQLAErAHblDREyRgFKAFcFAAFQAQeKzAB4OwQgpQBaANYVAJVoNx+LAM1rsQDP1BYIwnVzGxhWHQnRAYiQqyJTU01IEjzCifkAfxw3QCkr4BGXTwByASksMClCGQ8DMFUE98XuAEtl3ABqAnECPxF6Osd4LjXVBgUAEBsdCggMKgQfHSlOU04IuboAChLNACYAARoAhgCJAI41AO4AtADgAJ08ALsAqwCmAKEA8gCfANMAnADrAQwBBwDAAHkAWgDLAM0BBwDXAOsAiACiATUA4wDYANUDAQcqM9TU1NS2wNzN0M5DMhcBTQFXL0cBVQFkAWMBVgFHS0NFaA0BThUHCAMyNgwHACINJCYpLDg6Oj09PT4/DkAeUVFRUVNTUlMpVFVXVlYcXWFhYGJhI2ZocG9ycnJycnJ0dHR0dHR0dHR0dHZ2d3Z1WwBA7ABFAJYAdAAuAGLyAIoAUwBTADMCc+kAh//y8gBgAI/sAJsASwBeAGD5+aoAgQCBAGUAUgCtAB4AsgB/AjwCPwD4AOMA+gD6AOQA+wDlAOUA5ADiACkCdwFNATwBOgFQAToBOgE6ATUBNAE0ATQBGAFUDwArCAAATRcKFgMVFg4AigCSAKIASwBkGAItAHAAaQCRAxIDJCoDHkE+RykAiwJLAMMCUwKgALoCkgKSApICkgKSApIChwKSApICkgKSApICkgKRApEClAKcApMCkgKSApACkAKQApACjgKRAnEB0AKTApsCkgKSApEWeQsA+gUDpwJdAjYXAVAQNQLeEQorEwFKNxNNkQF3pDwBZVkA/wM9RwEAAJMpHhiPagApYABpAC4AiQOUzIvwroRaBborDsIRAZ3VdCoLBCMxbAEzWmwBsgDdfoB/foB+gYKCfoOGhH6FiIaAh4KIgol+in6LfoyKjX6Ofo+CkH6RfpJ+k36Ug5WIloKXftoC2WzhAtdsAIJsJGygAINsbARCBD8EQQREBEIESARFBEAERgRIBEcEQwRFBEgAlmZsAKMDh2wAtGYBBWwAyVFsbADPbAIMbAD2WmwA9gEZAPYA9AD0APUA9AN8XmzUhCNlvwD2APQA9AD1APQcbGwAiVpsAPYAiQEZAPYAiQLsAPYAiQN8XmzUhCNlvxxsAPdabAEZAPYA9gD0APQA9QD0APcA9AD0APUA9AN8XmzUhCNlvxxsbACJWmwBGQD2AIkA9gCJAuwA9gCJA3xebNSEI2W/HGwCQwE2bAJKATlsAkvBbGwCV2xsA54C7AOeA54DnwOfA58DnwN8XmzUhCNlvxxsbACJWmwBGQOeAIkDngCJAuwDngCJA3xebNSEI2W/HGwEN2wAiQQ4AIkGjTFtIC9s1m4DJmwA/QDGWgJsbABVWv4UMgJsbACJAmwAVAEAuV5sAmxebGwAiV5sAmxebD3YAEls1gJsbEZFNiJ9FGVAe8xvEZKvxVfKZszAVTBzYBH2d1iyUXEHH7twNw7eZF5JJRHI5EgaRr5D20/3dfONrFLSq5qSrrgd2CEUq722WBQ/LzpA+bx1oREI5xy4BDSZNun0ZWORUJqInZSyMaioyvfSI0l5uFDzbWaQ28/zdB0hwR4OQZ0/jn9ALSLNikjFYGfqR389qtFlhD3a6KdIh97rhZYpywuLc7o8ql5/X8KCbPU3L/QlmCowhRXhsGDvg6wUNprA9bM/49uxlAj7ZVy3ouEY/BgFXBNyK0TLrSjZWeJm/T4nz6QGLT3cJNtWRZVZTvIdtaxMMJRHgig9+S11LjBh7Inr06ykoch1U097Rw0hvgmOrydQyaWcEQDg0RavuMuT0zYabUZl1e33HNSK1oNUCS03eh+9C2EvF3fq9h+XBaAMFuoWeZf+mfZgL4HzyiKDIUtfNU4oFu0aE9qt3VA3U4D3fOSrAcYVnjG3cSkp1vhXZnp3JQm4JknKdBitO2NVnGCYQwU3YMWHWB87NEd+4AHuOKI8BSIH92reW0pfs+kWCTJxDCbRjFv8Cfc4/DSBYJScJYTeAEgg9wTEvcwd/QuHRHqGzAQ4fXf5FUI1lPrO+fvEcPl4JInM1z9AtBT2bL4QYEREe7KiSnnxTwtmAFjn8lqT3mND8qTktX2F16Ae9cakqJ6/pEQsHURqyqWlRMCzKXRKfCHT7sYHWx9/T/ugYTFY6iVN3Btm58ATJR5alYZybKMWojwOw3HbFn23NFyeLl7+Er82RchyYuBoGQ3j7SAWNxiYvp5U+Fq/DEzB9cG5DlJWsqkosRze92OVlCtQEYo1S1lF72Z8xWc4ld/+fFcfTEDTFb9d8tJGQ75dpJEvcWyGmGBiTbiWDdGOcw93Dmxq5ISUrmasygONfHLvhgo83HQZenbdBtSzBkvYrCEQ/xEDMhMZsN6gqplx5jGG9mSQLhM81UEdEeJ59sdNJDAFy/gPyJoKlwPZgB/MkC/kICLiCB8va+nCdO2ry4aDfkmPFpF/H/SGQ3LJ6aAv9dtJ8DniHtLOckZix0BVb0iR5V3LAp521LBSIi6AtV7r2ZB/hQEvAw54EFNOQcFnl1xGUIc67tqK1INNwD2n/RbwgzO9h45LM6VMuN8V1ZNIQ6t+Xy3lTqyVCD5kqLy/t3/b8MLbgDg8JIWDkSZ+LrGhhr+gYpH+pr1TnCUnZPjpUdw6bSL6MWVXoDDciQDWECwU2e6VEpfrcOBbrSOijqGkEIoJPbpmeJLkcwbvA0yWIixQVjo0HnYh7fji+Dfdq1mtV1lG2Zz9R7eFMHS+FK7nybutu2fwzDpFldO2pZBshsHJWaltn3PWOoGJpCT2jE8EHOuC6FkejNWcfsWCqNqMLP9xTwcWArj2EiiI7D+EaDi7/2cqHL1gPiF6C/J7aUo7RQqogPZ11WqbyP97nsoMxPOC78wZMF7B1Y0g7JNXJV/nN1m4xx8hbqWz07KSaqr5hE4icB326DMR/vUKX9LoNjle/ZWtbUhrTAcsdgrLlG5Ne8aiR0bS/2ZhpNOVVxavWIZsEM/rd68EB4vjbbD13NkMK1qvMk74vGbSkL7ULO0sZ9R6APSCo6KH+Xn98wEdw1bCPAnDTaBsD6sidAGN58uiH4a3ovG1KyZAu2XtyGgF/vgWKGxw9R1lfAVcfuYE71DHuxtTzfGZnHaDpDGWmfEq0N4GawE7yIkaoz8jcmVmzJe1ydM8q0p08YIxFcY1YcqQc1djWBEoNETDFcgk5waRftEJasPREkrV++N/TOKkERF1fCLrXS8DFGYGRBeECMQRNEs0ES3FzUtXCcNxpYEM3Uei6XodZruXUIRnn+UXf2b/r7n1vQutoi6WoIbW7svDNWBbUWcDUc7F9SJK3bvSy9KIqhgyJHoW2Kpvv0J4ob14HFXGWWVsYXJzjwxS+SADShTgCRjhoDgjAYRGxwJ1Vonw+cpnCKhz8NQPrb0SFxHIRbmG95Q2hlC4mDxvPBRbkFa60cvWakd7f0kVBxxktzZ9agPJEWyA63RSHYVqt8cPrs2uFJ3rS3k9ETGKn5+A6F9IOrdZHfT1biEyUJKEvwzuscwshGCBJvd16TrefW03xVnJf4xvs72PdxrMidjJO8EiWyN/VWyB3fv9kc34YIuZTFtXGo9DuG3H1Uka5FgBMwDPEvRcSabi3WakNQkXFecJlFk6buLVk5YHpuKWTw6oF632FPPSVIVl5hgUAeHhj0t/sw/PEEvThLQDDFE34eCg/rLOyXT3r+L98oRKrlTO0MdALYQ3rRQqC7d822dJPGxF1K4J2TtfPSMFaCAg0n0NGk9yiaKKOJD1v2aBX9HUOIawjjfvwCmjHZJTR62R9c9x33JnBjWrN4QYEOmehy0oZMP9XM9Zyi6TYoe07PaLceRXcCWZiY/imRUWW6+mci7+wMxSdwMdbXckXtvhJH8sc4iQcTwm7yp+3f7CaesTTQB2qkgeXh+wFiSMXfMlH7Yil0OoZ2QTtRLTip2O0cLZ4SstqWHZ6H+8A2kZXhpm0kPbL9dUanTOvziqIUh6Ambwa3WrCb2eWbuCN3L1hgWUmjRC3JoL3dBhR3imSQI8xuCMfsszlji7cSShNSYdqCXPxEVwbqO9i5B6hf93YI7aeyI8jxgcVXK0I/klbvhSXjkjOIwZgPdVwmsFW7HGPLUAvDRuKm+itybRg7c8+Yqqjg824Qf+/NxsBSUNAK9KCoJpauFqK0XQULrWYj4FnxeKDuvr54iokpi+D57e6Y1zxRJJdsHnDR3JyraCUufHBRTKODWBVzthjm4k3/Hv+Q990XDVR+KW+TcJX045LW86EKhz/97aqj89A8ZvTk1//tczosU90loIPVaHuWegJU3wP//7XHcO7c0yQM2jM/IhQKrf8hiObHWiWDZManF8Uf/HzbmDfC2wT//aiZ4hGTv/xzgKwdb1sD6cGEkceow0s3b89/zg+3plyRm0HlZi886j5wUwFhdHiDTaBidZRo5cx/tMeLyguOATbzq17ydhzbrpxunuHx6lbFGiO97gsd4dk//7iCIo+Ew+hG2so5kvv+ITG4c1fzHPtu1Xn5QfUnqY3/uByVmB7gmnE/E+5zdm+6nDmoews5fr+NzThdSHzK4bBQOL9c4O8OI0xLSqjJ4lbniLJg1aFpQRLwaSMZmpkC9e/j6FOVrTQ6a/a4alGgfrl2ZL1sbHUQ3DOI7ntq9diHFfm3t1mul3rdJEJCHnlW/hlQntipMrpeMs7fUr6wK370D7VbXH0DUHzdYfRg/6Z11Ult1sffJS+heHbco15Sxy3+rDnPesqH1lajk0yu02hPUvEUqvcUXWXL7Ad0wNGMx5gOle4XJxq/r/YY0xdco2wRSEGwcT7YADlBrHc9ZbvzOL0QwyWCWWChB9Obg800v7tyBWaNvdwz+fL7Ph9i2irEeJkRgOzeEDw+JiD/V93vH9FgMEoFIJMoIuogmicZohf94SBuPn6hXaV9jP4VVVA/bu+Wg8S88GLtmEPSNRLdtlXx2XL/nuM8nKkhnlnjaropiKKLIH94pLIASci0pDBfj9Hi5BfaTSXQg5+PMjQX91Ktk4MOqK1K99l4BRPv5+vNovGZ3IxQv8ICvjV4/diThpoaM8uvd3D9d/DE477w3yAbW3IDm2i73pZ9aEj38JqS6h/s8/xgmUIVcuq2JTgefAyuoafzQxAuRASeg3NtG3ach/JEkyuX+JDt2PnDZTShUhyHHG3ttBg/6lhAchGjLJBtopj4e01MlCp2yqQRTr4sBBXru+lKaoanwYX8y2aWCJiR3KnhCOkYVFSvsO0oDRujUFOEptiNDTYrJoUbvOyvl4AhC9h3wORiTXK1MrpMfnvdnndnR/HRVSusMBgIxwrLdn3vq1VcncPiD0SquTx/kNmxeFyCT4uXVUd9AL+rSGmuq7OOCzDKeVPjiNWVaoP5KOFqYq5Xcuf/xW9S+u9eIq9GAtZWtQlgkRecjRtvG1NR4WXXpn+pwsTBTIy079Ikg8rSef1aVapIFcXCd6C2wHVjLXR+N0tw4Taw6x6H90BFRgNrtlq2up6hHKuV3inM5RJaQWZHd84e6RsKkk9po3dk9by54tpPw7cBkFas/G+GbHwuG+AwP55BZyXILTHCIVrPpXHEaUPYfL6nphJP1Rc10xG4UaCeY4IHCwuur8xmSQDgY4aVwhzWhjbtSHG8JO6P2i2nC9/0Bfx0zk6dYQq3aw7k5vIObD7SEKrxhz0fQ0+YTOfHW23CBNeZci1qNsUDhoeqmfyP6PvjoEjHk8QbrFyQVZPHVWijnb8YCM65iYNoEbvnchStZ/9cKg5Vd45j8KnB6UjzXl/bkyZx7VoD47ocUUi117WwgySSb4rXgLJ52Mv5XJbp3I+uBP81BUvOjy4Cacgi+GWWlC/8dwgqwiojjUBDnEOxyRyowwLQfytFra1OZS4XvRYr4uoamAfG3I/p2bA7G90yqKThH8Ke00Tqd+3l3dmJpaCZelBMYjGqNLVa3SM4+LQeL56gY6Bymy2LQPVOxjWfj5tq4o74swcxhyGJPynkS5xAjOXZP1/FAYcBT3u6qLoIkEfErwo4gozmyI1YCvM0oyI3ghjGPQSsof2sKUhq91WsKy9cYWN+4A2v4pG/Mxpdc6w6kI/HX7Xb0TuihmsiOy2wQIsrZbUmr3OBSUo6oDJNgQp+YqYkgTgYcWZDgawJw3DFfdzT//PhVUidgB2qa8uw/j9ToHBAS33iT8YLhhAfyXG0bQUFp7QmH7oQ3i6Flf4OTZLvJdh8pfuflmWu2ohm5pTiSg1pl3vq9uluTJwqXfh1hqy8e2iHoD+Y35gCIViTo6VOtK5dD8HYClucJucXASzwe2kPj4S4eYQtmkYHagXhAzp/F541xE8YFYqSPszDuz3soWzHy0p3E2jwZNQaIcGU9FNQwQxeDw0ZlK9dxXrj9IUHGUPTOyib8CqXmbZ7Ex54bn1rLx3qqAavu/gh6XjV0GmN1p+yyMK9HN5uYEvxgbAk43tsheREhyI+Q5WLIneKTGPmYiM/lxOp8fvqHy8YgXK0TlMiX0tliLI2JtfmWZP8eVV732sdYm+pcWzDzEmKLJZyeelyaZKkjPnnUO9keDwtgiLnmd5+t+Sr5y8brRnlvxcWEWfCqIALQYHvaXx6jTg4dAlye469uGwwOZVZCILLfGjaMg4LUCNMTtMSp1aC2y/3wR2t1v3w/iNBRQ+bNbtDqL2NAr7K4rUcyqbSpNrXZgAWXvjxBBtfYLK1uRYt3q2pfXJOAL0HtWcEwJLddOSJKV1SwvcvEuzg/4MPnA8MIUJOLqm3qI6wFyN99Ck6zYaV/zGSAzF/PGsaNa4vPLe5QnyuqVUnVQ6xELA6gbe53aGgeke+R/ycb2LJVyc7BhuzI90zA+c6wUDTb7NH//gdDSl2u/aW7lRJm8m1fLtPxcNuEM5JbkOCZKPM88HUsLRoC1pmKKlvWyeAXuxILbu0snpSxf8N+RgtLUSe5n2gdjOjoSTaN7mMZ7bF+cWk/MS8mFD4pcyl5UN7CbpFZH2a+Pm1VAnUTVfbw8qrmz1G9m5aKmRzY1SMhhPrlCn2t4uNUXNA3IFe6NOjSC1DEaAFZAfDlEkQCsbNhsZPj6NQPDSB3tLiTo0ZYoEbIeEIaKtU3Wk60rEszawTFuyHVd365LA/c/uarABN5M5rGq/dqTG3Ilye/5EKiYisisuzqNaZjmWv0z9TORc0CKbaTea214oNM9u2sXUZub/eqM3Pi/PjRSyQiOSwPWif2asTgu6hS6fb5UGosCWxdedMqdViIUUSSdIJx+qQ4KShfTT39VAWZbi+mB+iKICNwpt6cflY57Rcbs6d1kA26Iru73cuxYVlSvuJdcR5VfDYZRk8X0AXePROyw3Le6LaUdmTLzYsoNhhgQpd67xVNiHgk3pakmndeIAtTC4DCXy9oS6eU4CWxDdVmY53pKNbdAKmQsP37lrJZC6iDXMELGKcHjNuuZgcDyY8W/yv6ha3DX7OWm/35fpvhw55oitf4V+GULlcPWYyGGuVBdro19c8u0RDddDun40W7G5cSIzHLh/qZxb59R+EPY+wZ2XerkUim92hhXpKyW6WtAh6zQS97DrPyjCvKi3pCw96LeKynOpyjtsMQc2RmI/20zFOZcSa2AK++PoRcT6zeJyxlBZ7kk5mhqXGkLlM2hFKc+/T544xXP0Ua38Q6xdPTLTeG1PHnLMaOvksUQMrEFTB/lizCirmFQL8zYVU+OTeYQEFaITsBSMMYexS9HkajO2gGIf2micvntCZJsZQEwIH3/4JGJQGflBuH5rNXmnRRYXDQs3ZoEQoMtYDr1kFKUS/siiQSUxcTH9XYeBZiKDDFQoExREO9dddKQLO3BwMHvymCSTFyY+vxn3D27NDx6OlU092D5EDUwilttqVHpjJQDUceJYCLsK2swfXeNUVrBJT/w/sk+7si8rPtiMFis+oxvGdGQxirMBID700T39mULuNHzOyN+xBfcFACZcyngF1aSpv0JPkNUrAZTqfplv509cGXFUiEEm5dZb+OsP/blizqdK45/dSsIrufYTrCPY2lgJD6k6QljTfXVlHfYKSq+MsagyUcaMintyr95bD8kdTAeYNLNsMmo/Wdd8a2nStBP49ARIjqqpUHWY4q4mvO5Cq/CgCP+4/B+5zutGwX5pssgVLr1+fIM7WWLfiUQDk4c6ZdHZOWv5hG3g2dgQ5NXnpIY+BWwJpaouf25bXnjDzbHnQNofH/c6m+dEAS9Gs2h7pFRPKOBDnqswZ8KZjhId1ytHUTs533KwBoSiImoxKQUgZ7z6pA9QB3sZ8Cq0vwutJTTkfbX8AzCpm2cFXx/P22niUMHauU8IGc+78R6TsutoonoqFuoNA3l80t387YHMoL5KGAT1JO4zmx+vJ0LbLHlicHraSVYvJjnO9p++qnWgKw9OwFVVUagvZuf9qfiuum+hIicxP1q4zDnzkHsCNriLxBpxY9N+UOmqzdY1MunLMDgkMyi3uvnN3UBXJeZ8YLs5xr8QrOhimYoKuGBebZHAiBIkViv3DG8k2oNpp5OIgX6ulqaRN8V62QUPjn5tl1kPXhT9bcd8qIm8gi4or/FGbvQ6pgGSHmnayrugmf5E0upGxPRf/3xOtitGMaHLKJVm5zhglmVfI91o0yxhJZVS/5wQ8zfxK8Ylw0WmHXoGfRkoBRx9Hsnl/6sgTjAVwpmNuSeZtBwlX4qB8Bh8lxjqBDIuFGJ4I1wxN0XRlAAslzqMKwQfyA7OkuivCXfv+i+3XmhcBFM2n4jdT+NyUmBnQJPV3F2sZfKvJhUlXzSosFR4VevVVcOkFnnjdiRWc0TeSYxj41sJGYMbZTeLI3GvyZ8/gAAudQ1+4oFX+enX5V49MczGCYVBuoC4kHjp7ZVxj+clBwPr9k+v05SsezQK3enxLs1Nt/N7c7AImVUysjGou4iOohHo83Zs9/MI/OWB+OyXzOBD93NbApGHXrv8CVRHp2bwH+xB55cfNrdqFD35HSMx4iVmtzYAmSCIV8kXsHoq3DIb93riTWbubnjxbBW5zConVtbxLRStXHkIyAByaozME952Gc9aAdAbBpZSVCH88Uwb/4bPTVOVl+WoMYD7JIvK8VcMrJ8zHV4bbG0Dg7Kx17A4ej/ZcZ2Z5pVuVLUH1E/AccUTKm81SE+LQ6STTUDscUk0x2OWIbEORhg69tdoTGNkA1RfkGIRZHr5mCXOpLC55WWzCZoGPFUVtZRHwh0nq039CDdjEPo+JyaxSQAvDgR6Iqvxy0frrtEG1A385N81l05SSzN+IDm9bypF9m92EUqblnauZ5sjc37wRykOdl7w4o8WMgQsjii3EE/aJYDfHs1cH6DNBEujjcCc8qAefYFyIAURDcDnzun5UmkbBQsU4eu/W8I9nBE0qJKTdg2hwjq0+XV7a3TJ7R+alvJZCRia9lJ+grNB9dbrOmWEvUotMjvDhq4wV/kq4fvIBkzUGpDeYH74rne8uU3dgoNZdR9pUL6q9YDNRfOiF6Dyk+SYXQIghTjm9qR4tBHh0gnmF/9q3Qv22EzaLhSvDlDOxMrrCNRmLCl1jApzLrBCPn2mjn5zqK7OYK7VxOfQ5GfBfoPdyQwqFEgCVHkJ9oTnagRM3R0+rsuN5jQv9icCav/p1WqiEXSzCdLd/WEA6z6dDP7tPqPbeDYKAkVcz1lLGbFOC9b7cBd3MV0Ve8dZ89oR7OnxGS7uVpSry8banVZwpJg+nkH1jRBYa2BvBMY2xITH9ERXCjHzdZxs+ipdXP2DY7X+eWiBhtT2L0RRGTLPeazn5tpl4tu8iE2rWig731iuJDRbCHHy+g/Mb9+miAyVqfIpXT/iZeOxOxODO0hEpLM78I1+G2Z45yi3lS1K3m4WMQ559Lp4UML5vZUjYGJuxl+OPpUH5klpyBujkjprhei0TmUik10gjvNUp8mDkWlNKikmYspaVTqewbnOzJrmz8FLIpsT67EJLHIIfeDcWEfiP+DJrZ1jfxpoAb2abeMqLx+9RuZGzQoYtYVGgAWwEM9Kek2vPIeBNAKD6ao7nw6sgvfeLZPoXkbYO/tStHJdKzk+WFSFEU2NcALJAEP6S8pcnqqBBt57dwTrzQNCIdk2SocK4dLRbD/pu/VryKnm65ZYXiJCfHJk3mx9MRSl+nSK6OqEBSoGjz0/LADddwF/HqcfK3K3O+6YUGQcmj8pZL4PhZ6KrGkb8B38FmDvvLd3XQXbvS/FQmrXFTvJNkaN/FGo83KuS43BK1UfVnIqigGkCoP5fBda2MwAGTGNKX9K9t4Bx83pMFc5KSORmWKv+8VoVggWxoaBz3/9IBh6RwLd1tebwy89xvE5z6EEpXpDfrXWfRsMs6+ekUHH6idVosno55+xQ8Zqzelh0bxtJTgCcH3Z3/Cxlx9eNIS4JIFKOAVrDqbrXRszmY55a5+niJGHtkO3b6mnIDxLa1WXc7BAe33mt2KyM4Fbc3R6/WVTQN8QhlqAtave2WsQTqzWeSlKuGUVIJRqtObpv294rS0kDN1RKzdstZTXJebR2HlzsQ4P3NbMHUqFZMZw+/IKXnh4t+lY8qocp/B1oMszR03EFs3bPeND8QkItMvllObeCz3SZAjqZrobmLcrpFyQV7mwBjg3C3C8/bc5goQhv8j/IXMLGnt4mF7tybRDG5G0polxoUScQkPvmnga2/K+aapKeqSL0BTmo1Cm5g+booNOtdyKva2KoefRURaBk7113QKo3y+WTuFKtgETIK8HRluYS9DvlcciCDvnG8UaJRfZE2siZsiTHvRmN80xkUIInHeRZl5Re/+ATL6VhKFi8CZ/n/jbFV6T5pZ+Uoppvsi3qjacVFOJgWWfdlwVHKPW/TJO3na9hRM9bS2yo2rEsC6IBzRReVO6IesJU7PItzOamr+ROFfwGZmZ7ue8HNxAgLJKb7P3p8dMqk6Be5PJaT/5Rdc1deYVihWH9cjVKc9uz5EnfHqxLUkOO8iJUENBNVf5LyNy8zjLu/78k5WNTywiPfYeX3CPk7yc6CI3lum/CEZwfUaNpcI3KsPqfn2lmz3kd/acQjKA1ebkJaiuLD+epQ/Fc1llHXXMzofWzz/Kd29SNmOhcjMWw1jq1g3YfrXZ9rzXDYW4ZttfgfMi6oCUtBs0PkMVuxmq5lxEoCaSXPSqCJJ7MlKdRDidVt0AFlxk5cTdX++sBF2+E35mjwfm8ERVxH0FvuAQtsfA4V2G0TKTUxeyRGVjd/u6F1SvuAiU2/WaQjcNCU4Ep7VunXCYSbZj3U3wzu/LWM5MPlYuyQ3FOOCD/zt7K295hY2JhwF+ODDIZ676vGQFKveEQYkWj7lkK7rVmD7MhU0Y/tF8EcTTpo4/yqOufbd/zWIpMajnbDuWK2vn6OPPtz2rc9MIBNlPd8tt+yf+7SC4wqEPbozKMCwY5Bygx4JmoIEDsixWRDcdHd6S3/dZMHXOJAAv7+NIstl00crgSqHZKAEe4g3G4dzIV51EeZB01r7p8GNlfUnG/GjZgNGsqXZdYMBVtAtFNv3hJWPve4GvqZ2XxuiNkHTz5kxWgr0PjQdJlVywJ9Zf2ZvqeeTbolKtvK54re2Lq5BoyzfsRtvDfyao3kmyFzDQ88nM+qx83w74RDlkngtYiArI05Epre3GgBeSlMig0pE6RGQaFznKkGeb0SozLCyiOtxh7hgwZlbKbClzUUfC8ntMiHUOZE375RhTy9c4DA+oMLkUDkztSybZbdmP1xpaIbjUpPAHBq3cIq+CBFzbMlMMCCkUQ6d9LGV6GYCsYiEWZIy3nBnuxOYXeU4YTGDSin9e4/pCjPtQSHlg5LMEvIlF0ElthqrF129iK2RPBEWd3XWOl3SWV5uz5VUyZYp5kEFmz7QfP/B1W1BBzQ2iTGbSVT79lUHzcGXz3PJceSgz4uknETUwo0xffpr2KUvZF0i/r2sL3IFIClYx8CbIZE6Qt7MDJbOPB3xMScwaOcWG66IJfCnDkb0D2Mb+PHzX+oiCbxeTIogtyN+s2NJirNACk/OACSOTtV6vscwbzW4M168xqaI+RzR47S1nlV/rOoZnid87n/Ima2XYa3un3BuGAisNjb8eLMT9OnMtazQROFCuO1HiZXaOc0oUDbNC4eKLToOx8DzVhMgGA8XIAQ2x3b6I0uEyLssQjJX3QphcUMx4KsMgJ+72km4N2aqkBF2coKmUEt1eqIMGn+5txMT4kYVGd3ALO+y9Z4PP3d3l48JQK8s9ZZ/Qx/+NBKgBEJFlQ32psoJiihGO7FSYM5L81q72kaAYcilEFMG+ZK1BcMqELkflyCV7v8JEXLO4Rf/oZYNZHZVjJhfL6fnpP9Tio3Euue5uS7FMkfGOeRCTrBZ06Caev7tgufeTrX34Ur/Vvc+b8ksiIShNJtuF9WmYxOZ4xg8y6zTdy3KAB2y5kYkcRnXsptWwAFyKZ2I/QGySNeoQLkINUMloC+5L3WuMMx297Q1xUYLKqZ9XHavaobo6QQv4auMm+i84IhxRpPt9nUmcav9NcjCcP+TcMmxsQZ/F3mgeoA0fQgwvTsyXuuTaM3Sqtv2jaaajmaFQpK9W6uIbeqwvSDo34ZrY6elDUHwSCjHRRmlwmyy+eOra64Ssq0XSXYljMHtKY+FShcMkHsEUY/4Bw63dJ6KpwDaxmthlDdbdE+TvYF3v33cGSKqO+1H1pKYhJMvZD5ckQcHyNF8zrtiR5b0ko6NPGoRexUZTYP6VbUdn3zzxGBOi8Z0OqHjGqYxRXwN3mYi0GYEEZYq+Q3QvdKcEHILLLj8S+VFepSfErtmfZCdvxbfIifFSpEzKi+7VJsLMT+zEFeyp1OdwRC1VZrfTLIyR7xTPUcZFYPD9qI7D70uTb4hdpqPXsJIRNYbZtNwch1OI3trh3u2ScoQyM9POnInsUa+OovcwkUP1UfIzPb95n4BaF2ev57NHAej0+BVMF9/Cj9663HN2/JN3SQgslL914bKfiTTDFAz9PlQEL/dSv1H8xl3mtWxh1McFO9EJXlRDaKQDsyKO4vOJW90NFE6yw2tjbc2GeF95sbs0I9enAa6QwQVf/kJQhAD2BzUDKggOyjy1TEhED6sfk+418lQy3c/uj8aw8UEzZ6hIMCd8RohAkumMtIj9m73l2yPWoGHVTPaywkC7Yj9tBM1NxMgcrDwRtk4RO2WHT7Ql5kQCKdJj6kNuOTeyEBYBjLMhGz+O5/YGa84HEiTYEpZ6fFzy26GG2hWtTyteuYrhSyG56BjsT/wQeLRytpTY3D7sIMqZnJ9z1FDrfyjFlGl2TNw9BQysbaxOuwYYZs/7I6BANgkqCknWZC7/BBXvaeKwAmC959I+G39BUE9bExkNlbRoFRyEtNzv+NJ91FuisG3JCS6uYBeRnfv8AkAfKTeg9EYamqnsGfAV7d0f9DghHEQ5IsPGDIUhgoSj7obM4Bu5uhQ3/CYEDTHc92AsFvDK4XGrwUeGBWBHPlS+f4x+CxmmHz2sAGmSFNt65kwZC64mnaoWlu2310laYn8r62AqsR5dfjyK18MEdurdagldzfJtjFXlZs7St4QhdPiye6TPh2/ZAQLU/Fip5s7TDEM16KtRWrK9hmxnQ7bmfa/+7pa10Z8WDPK3NuJ+NN/RAbQ5vHx2uX0Lm7/w7cAEH/hvZA+mt7J7zGw7YtQYwnNN6dpgwkGjjrS3yQoeoYt1EnczmtmJfQZWzUlP3Hlg9Wzlr9IH23q3thGth+QNEANFettxKfskkGOlLk8AqoKJwDqOxAa6UzAx07plSSyNBJSGco9zjnC5gGbDoKvsMDuBR6bGRlGzJ+hFsGa/Izt78aI+WZ6dJlZKp4pGISuv9rV0sAS0MWEwCmfauO7oQZMiakHU35LBxiyJoOMddhUWgcZuC8r4Ksvn75TTcQXLJ7kWtYhGuGqPd9dZuFjBWQHNwosXY5snbHFQq72CvHXhIg+shQxycuLOuWYErwCLZeF24b7F78pO7xw4X6lIAR02hUOf5087Rl0nOaeb6CK4i/KA/EZv76ftOWZtjwxslNr0E/u8rWUmnf3amfg6UZmBAluuoj3Dd7UV+9IAJ6iYcDfSJlgmIImohjfIUMJ27z+opj50Ak9af2LCNrWrBJvMovA1OeNO+MF/MwZvnaCxTgG7Cw4QfSPF6AYCGFt21M8PySZFeV3t2Rqqs5JMzMYzGRgq4o+UaKRgBf9GHi/9X9HXA3wxkCsd/UhnHSh2zUVDiraio/6nP4y3XJqs8ABfALAtCYU7DHPMPRjgcM6Ad/HiSXDAbOdSMkvGZPAkHs8wuQTy6X2Ov/JFvcPuKfV3/r9Q28";const HE=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),zE=4;function tQ(n){let e=0;function t(){return n[e++]<<8|n[e++]}let r=t(),i=1,s=[0,1];for(let C=1;C<r;C++)s.push(i+=t());let o=t(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|n[e++],c=8),l>>--c&1}const f=31,d=2**f,p=d>>>1,v=p>>1,m=d-1;let y=0;for(let C=0;C<f;C++)y=y<<1|u();let h=[],w=0,S=d;for(;;){let C=Math.floor(((y-w+1)*i-1)/S),B=0,O=r;for(;O-B>1;){let I=B+O>>>1;C<s[I]?O=I:B=I}if(B==0)break;h.push(B);let P=w+Math.floor(S*s[B]/i),N=w+Math.floor(S*s[B+1]/i)-1;for(;!((P^N)&p);)y=y<<1&m|u(),P=P<<1&m,N=N<<1&m|1;for(;P&~N&v;)y=y&p|y<<1&m>>>1|u(),P=P<<1^p,N=(N^p)<<1|p|1;w=P,S=1+N-P}let T=r-4;return h.map(C=>{switch(C-T){case 3:return T+65792+(n[a++]<<16|n[a++]<<8|n[a++]);case 2:return T+256+(n[a++]<<8|n[a++]);case 1:return T+n[a++];default:return C-1}})}function nQ(n){let e=0;return()=>n[e++]}function $R(n){return nQ(tQ(rQ(n)))}function rQ(n){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let t=n.length,r=new Uint8Array(6*t>>3);for(let i=0,s=0,o=0,a=0;i<t;i++)a=a<<6|e[n.charCodeAt(i)],o+=6,o>=8&&(r[s++]=a>>(o-=8));return r}function iQ(n){return n&1?~n>>1:n>>1}function sQ(n,e){let t=Array(n);for(let r=0,i=0;r<n;r++)t[r]=i+=iQ(e());return t}function _d(n,e=0){let t=[];for(;;){let r=n(),i=n();if(!i)break;e+=r;for(let s=0;s<i;s++)t.push(e+s);e+=i+1}return t}function XR(n){return bd(()=>{let e=_d(n);if(e.length)return e})}function KR(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(oQ(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(aQ(t,n))}return e.flat()}function bd(n){let e=[];for(;;){let t=n(e.length);if(!t)break;e.push(t)}return e}function YR(n,e,t){let r=Array(n).fill().map(()=>[]);for(let i=0;i<e;i++)sQ(n,t).forEach((s,o)=>r[o].push(s));return r}function oQ(n,e){let t=1+e(),r=e(),i=bd(e);return YR(i.length,1+n,e).flatMap((o,a)=>{let[c,...l]=o;return Array(i[a]).fill().map((u,f)=>{let d=f*r;return[c+f*t,l.map(p=>p+d)]})})}function aQ(n,e){let t=1+e();return YR(t,1+n,e).map(i=>[i[0],i.slice(1)])}function cQ(n){let e=[],t=_d(n);return i(r([]),[]),e;function r(s){let o=n(),a=bd(()=>{let c=_d(n).map(l=>t[l]);if(c.length)return r(c)});return{S:o,B:a,Q:s}}function i({S:s,B:o},a,c){if(!(s&4&&c===a[a.length-1])){s&2&&(c=a[a.length-1]),s&1&&e.push(a);for(let l of o)for(let u of l.Q)i(l,[...a,u],c)}}}function lQ(n){return n.toString(16).toUpperCase().padStart(2,"0")}function QR(n){return`{${lQ(n)}}`}function uQ(n){let e=[];for(let t=0,r=n.length;t<r;){let i=n.codePointAt(t);t+=i<65536?1:2,e.push(i)}return e}function Su(n){let t=n.length;if(t<4096)return String.fromCodePoint(...n);let r=[];for(let i=0;i<t;)r.push(String.fromCodePoint(...n.slice(i,i+=4096)));return r.join("")}function fQ(n,e){let t=n.length,r=t-e.length;for(let i=0;r==0&&i<t;i++)r=n[i]-e[i];return r}var dQ="AEUDVgHLCGMATwDUADIAdAAhADQAFAAtABQAIQAPACcADQASAAoAGAAJABIACQARAAUACwAFAAwABQAQAAMABwAEAAoABQAJAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACwANAA0AAwAKAAkABAAdAAYAZwDTAeYDMwCxCl8B8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgPi89uj00MsvBXxEPAGPCDwBnQKoEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiC+AZ4EWRJJFbEu7QDQLARtEbgECxDwAb/RyAk1AV4nD2cEQQKTAzsAGpobWgAahAGPCrysdy0OAKwAfFIcBAQFUmoA/PtZADkBIadVj2UMUgx5Il4ANQC9vAITAdQZWxDzALN9AhsZVwIcGSkCBAgXOhG7AqMZ4M7+1M0UAPDNAWsC+mcJDe8AAQA99zkEXLICyQozAo6lAobcP5JvjQLFzwKD9gU/OD8FEQCtEQL6bW+nAKUEvzjDHsuRyUvOFHcacUz5AqIFRSE2kzsBEQCuaQL5DQTlcgO6twSpTiUgCwIFCAUXBHQEqQV6swAVxUlmTmsCwjqsP/wKJQmXb793UgZBEBsnpRD3DDMBtQE7De1L2ATxBjsEyR99GRkPzZWcCKUt3QztJuMuoYBaI/UqgwXtS/Q83QtNUWgPWQtlCeM6Y4FOAyEBDSKLCt0NOQhtEPMKyWsN5RFFBzkD1UmaAKUHAQsRHTUVtSYQYqwLCTl3Bvsa9guPJq8TKXr8BdMaIQZNASka/wDPLueFsFoxXBxPXwYDCyUjxxSoUCANJUC3eEgaGwcVJakCkUNwSodRNh6TIfY8PQ1mLhNRfAf1PAUZTwuBPJ5Gq0UOEdI+jT1IIklMLAQ1fywvJ4sJzw+FDLl8cgFZCSEJsQxxEzERFzfFCDkHGS2XJCcVCCFGlWCaBPefA/MT0QMLBT8JQQcTA7UcLRMuFSkFDYEk1wLzNtUuswKPVoABFwXLDyUf3xBQR+AO6QibAmUDgyXrAC0VIQAXIpsIQ2MAX4/YUwUuywjHamwjdANnFOdhEXMHkQ5XB6ccMxW/HOFwyF4Lhggoo68JWwF1CZkBXwTjCAk1W4ygIEFnU4tYGJsgYUE/XfwCMQxlFZ9EvYd4AosPaxIbATUBcwc5DQECdxHtEWsQlQjrhgQ1tTP4OiUETyGDIBEKJwNPbM4LJyb5DPhpAaMSYgMMND137merYLYkF/0HGTLFQWAh8QuST80MnBrBGEJULhnkB78D8xrzJ+pBVwX/A6MDEzpNM+4EvQtpCIsJPwBJDqMXB9cYagpxjNABMYsBt5kDV5GDAm+PBjcHCwBnC4cFeeUAHQKnCKMABQDPA1cAOQKtB50AGQCFQQE9AycvASHlAo8DkwgxywGVLwHzKQQbwwwVAPc3bkoCw7ECgGpmogXdWAKOAkk1AU0lBAVOR1EDr3HhANsASwYT30cBFatKyxrjQwHfbysAxwD7AAU1BwVBAc0B820AtwFfCzEJorO1AU3pKQCDABVrAdcCiQDdADUAf/EBUwBNBVn5BdMCT0kBETEYK1dhAbsDHwEzAQ0AeQbLjaXJBx8EbQfTAhAbFeEC7y4HtQEDIt8TzULFAr3eVaFgAmSBAmJCW02vWzcgAqH3AmiYAmYJAp+EOBsLAmY7AmYmBG4EfwN/EwN+kjkGOXcXOYI6IyMCbB0CMjY4CgJtxwJtru+KM2dFKwFnAN4A4QBKBQeYDI0A/gvCAA21AncvAnaiPwJ5S0MCeLodXNtFrkbXAnw/AnrIAn0JAnzwBVkFIEgASH1jJAKBbQKAAAKABQJ/rklYSlsVF0rMAtEBAtDMSycDiE8Dh+ZExZEyAvKhXQMDA65LzkwtJQPPTUxNrwKLPwKK2MEbBx1DZwW3Ao43Ao5cQJeBAo7ZAo5ceFG0UzUKUtRUhQKT+wKTDADpABxVHlWvVdAGLBsplYYy4XhmRTs5ApefAu+yWCGoAFklApaPApZ8nACpWaxaCYFNADsClrUClk5cRFzRApnLAplkXMpdBxkCnJs5wjqdApwWAp+bAp64igAdDzEqDwKd8QKekgC1PWE0Ye8CntMCoG4BqQKenx8Cnk6lY8hkJyUrAievAiZ+AqD7AqBMAqLdAqHEAqYvAqXOAqf/AH0Cp/JofGixAANJahxq0QKs4wKsrgKtZwKtAgJXHQJV3AKx4dcDH05slwKyvQ0CsugXbOBtY21IXwMlzQK2XDs/bpADKUUCuF4CuUcVArkqd3A2cOECvRkCu9pwlgMyEQK+iHICAzNxAr4acyJzTwLDywLDBHOCdEs1RXTgAzynAzyaAz2/AsV8AsZHAsYQiQLIaVECyEQCyU8CyS4CZJ0C3dJ4eWF4rnklS9ADGKNnAgJh9BnzlSR7C16SXrsRAs9rAs9sL0tT0vMTnwDGrQLPcwEp6gNOEn5LBQLcJwLbigLSTwNSXANTXwEBA1WMgIk/AMsW7WBFghyC04LOg40C2scC2d6EEIRJpzwDhqUALwNkDoZxWfkAVQLfZQLeuHN3AuIv7RQB8zAnAfSbAfLShwLr8wLpcHkC6vkC6uQA+UcBuQLuiQLrnJaqlwMC7j8DheCYeXDgcaEC8wMAaQOOFpmTAvcTA5FuA5KHAveYAvnZAvhmmhyaq7s3mx4DnYMC/voBGwA5nxyfswMFjQOmagOm2QDRxQMGaqGIogUJAwxJAtQAPwMA4UEXUwER8wNrB5dnBQCTLSu3r73bAYmZFH8RBDkB+ykFIQ6dCZ8Akv0TtRQrxQL3LScApQC3BbmOkRc/xqdtQS4UJo0uAUMBgPwBtSYAdQMOBG0ALAIWDKEAAAoCPQJqA90DfgSRASBFBSF8CgAFAEQAEwA2EgJ3AQAF1QNr7wrFAgD3Cp8nv7G35QGRIUFCAekUfxE0wIkABAAbAFoCRQKEiwAGOlM6lI1tALg6jzrQAI04wTrcAKUA6ADLATqBOjs5/Dn5O3aJOls7nok6bzkYAVYBMwFsBS81XTWeNa01ZjV1NbY1xTWCNZE10jXhNZ41rTXuNf01sjXBNgI2ETXGNdU2FjYnNd417TYuNj02LjUtITY6Nj02PDbJNwgEkDxXNjg23TcgNw82yiA3iTcwCgSwPGc2JDcZN2w6jTchQtRDB0LgQwscDw8JmyhtKFFVBgDpfwDpsAD+mxQ91wLpNSMArQC9BbeOkRdLxptzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgELgEaJZkC7aMAoQCjBcGOmxdNxrsBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUHqSvAj5Gqwr7YrMUACT9AN3rlr3JG9m8w9lIAXltp/v8kfWaIaaR9OwpAES/I3ZVamDXSgB/UsOgAG6D0tq+5CIqE15FiAhV3yA2VhCQ7tj+m6xXaF53FIfGi/IAZIskMGAi2MU7MDVJNCbMzERyHZi+osdPtnFVbvq653O8rwaCy4IAf9OOok65AqJUtUriUfYsGPPVbe6jm0s9lbKlPCUKjdkHsFsEhvX4kT39ZCtAAbwQdn/h4TpO5hTByWAmr5n+Wuwhdegv6bmvX4LyOes3z2+cuHv2JFYwVMNuq2gzn8YHTjlUQd39osyWei4NKl3LAdfxlO876hh5ENp/cOvpuI9bF55guEthLLPOXjD4dktTH04P5TvZrWTM0e4+BHJxj7MLApXIFOs0sWKhNkG8iwuM5wR83my6V3wW06abhDzTXYfOr/ZpFXgXzmv4d12FFyP00/dPGbIVGV5ao8UufGzUwp/IHx6v/wDWJr9iaoCulhWwlZ7A8q/NMoD12+mBdNRgJYnThRLtMx1Bgwttn8/4Qn2CDfOSup9GVXEvA21ILgp0owHYxNOkpwLWz0G7K+WREIDjIzUzSn8I99CuJSmSpPyH0Ke6/NERYiNx+3dncSebPnOUnnWD61AhJ1n/tSLZmU5wYO5GfgzyAYJm6VL91LxZ8hL1lfximQxIDMRhIecQZBmeE5R0XlrpvwplVrJwpa8BBCdp93GPP9lyBeZ2zkRr920CR3cYbKpKHfogvm0nV7XdDz6EbjzlxADCMjSLXuXpIpyuizy39yY+I+H9rmpoIF3YwEjlH9MgGgWcCNTjHEWMqAbprn2Ox7rOHupaVE3lNyg3nt5XaZID6Y+uml5Ja+aOPu+BI+DZbiJVfaspUadakWUX6TA4dETkIqdJJHYnU4Z4yKpt5y8rVIahoMUf8A8kWtAQNCTbjp71gx3/zVdqNz1Sutkw0gFIMVm2BF4Xdv/0olw+NaDIR9Bb3DPweZA2K/cw+/b+AwyWl9ZOP67A9nexmeTNjfdzPGf9J6E6BMPKa5lJh+qNsdUz3HBUevU71eQFCqOcxiIYhacAhh/8PX0J5DdSViZ6WazDDx7cukJNpMfEkYLJ5Ao4vLoVd3d25Pg4qaVa2p2D2L3WvYPJ5Yf/A/MSxptjlgXL/KJtP2U0cRv2I09ATAiWCJYuRwiapeKFsqmi18yMMulDp3HdcIldq+7jkwsJUOHLHCzzzBw5XFvL0CAmo1ub456z7zb7shk3KPGCLZzr47oT1k/j06XNnJvG3Udv6XrP+wsqTBlZ5MaNPt9FOs/4Bt/ja/vbVhTNpBFl9Gq7MqINvGlWKOAwQzwOZy+EzSdjAqKJVV2YcskTuM94aIK+kc/AZaXiZLPREUDpkXIV947IFfj+85TrqPqLfkGcxgboMQjosf+az+odLNXdyp1mDNGsqSdK/pJ2Ca04mt/4d6s1X+lncOEYaGBBeW4pApGcjf7/XJCFbj3N3mFb+BtlIcw8ZiDKoClFX9Rf0bxCqtLpicObKJzBVVHr/6u4siH2hK75RNv7w9GfTbhJOQBYiFUZAByY4rn37tZBHT//kqKsNi3ryL9AqXJRzqiMIJMhILjoi/i8LVEsbu+Ih9bsyW16sgQqjYLO0qda6KaCPKj3DQcu6CfV5lKtjS3ZCdqLAZkOey9MR+QutJBGiz/r15GVD6rCVwJR4UUKC4GNJkfDf00OMW8aQtLSAGLXV8MIi9mbbl/qQEpxCm2L5hutFX4ekeLH4QgBWUFKs/2VVMKy46WtFE6AbwgmYm/Z0yHk5veDIrcl2HpVqb/rSE0PC9EbDzJEWqeaPhh7vF369Umq2kSiB3s5rBI6c/7N9bkRu4h2n+/h5nSwy+7n+/I+6oXQVANo2Jb5zDwtiBPf1ySCzHdT6yJShMzqSRZfnykX49CaFaxhoVF4PBhEuECJ1PrFYSpmHuyYsl14DTAV9ZxRms1XiR/kBrjhZjidOt0UNe+GSml7XNgpVw8YsUTmZXLTK+6iYnyW/wYR1W4UXwOi14xpFROHb6HcZzksgF5DbL2AFXzKNwHU2adjdAY+KCyM/cwRTBkkq/a227NI0q6DR2MkMCRu620t79bGcYUmACtqN3mk/0uNwd3JSXHqE1kzf6Yyj0W2083JNDRnIXDlgBxJ6uf58NN1f6FQiRCWB4egF8QDx74AixV8oTyw7PluIjr3/rj/WzgwPSq4xPojaF7V0xqG2u5ti2L1h6yYHv73Isrukr0kURDIEjClBsBx7kdcXUxaYMS0syT3ymLzDzslNDWQOT1Tao1YNmJHARUenhCkmV9tqCPGI5GqZaRpkiPxyjoncWjyOHYGqvbvRX+Bn1pn7EhRNXa1lqJPmoeN5VqdqIDPhEVhFsyG0d4iQEIYX0wZUbY2XbZWYlpZ/l66IrDDY0q1C1YzBDpHC4h05YqHQLqS9anyl22JQ6lEvjvdBwMHfE7z0luCXD34/rFeDa2TmSeEAykSpYO5j1G/nsgpR3qn0qaQEmLjnnLfcz+veoYqPnRqmRGwCJ6FJ3Gm/Z1/aVX5PSb03MMnjAf41ww54sD5k8FrkfBP+K0b1MrYpapWjtpZfve2HVf4ickX3LKSOhu7qI1Vd4c1kNrn2ajy1t4y93JhV4fnWCKq7OmFpcr7FjdJCXPTql0Drr14Ho3Z87+GPQ4Z/DcTiGqtvZxlRYi8cNuhXABveZIwNl/BX1huhVLaFax5OqypUrQRyb9OE3SSkPlDdy5uo5XGg2EIGEjLY1MO5cr1ibfiFWV7zspcTgkBKkwo5jPyAin04LqizZXb2tDRgwKJjGx4cVk3ngAQixwcxjYAg2Q7vmUR/hpwInMdw7OhC2qyf41vTPkudQAORS0DdLtOGQxb4fH2VYGsvJCkeWPeUwtf1/tuIhzXEThoCZzzSJqqjUtbaPI3ntHm3T5uf849hGUA0zU8ni5W+EEn3/0Y6oUhQFw9z0aGjkljBbAlFXc0y82G2wkd7VdgWa5KTgJJNjNwZMfmdnUIUn1JU5LiWX5UZEZbVlKSN76mlmjUR2ku+fucTNlO4IAAahnLjBhlvQNR9pe9swGBgq0YR7P3VCyI/seYwQ4QBzy9X+HPePgoF8WfKaJ4MBOhLCGHae6Z8xkNXwni9QAKvTNtVA56x8YJflZ/VvONRSlsSLmiSyNMnTjTaE1ko81zkzGEnVwEhjCzlwIqpxmpDAqwsEmtpdr3xpc7i/ZX3f2TzT3M0FdxIEQvO1jgmmiN+D1YpMduAzEhBtj2OBkMN/rv6p7Th4pSH6f5aH3aTvwFTl7EOSgGASI7ttyMehzpm4AVyK+bFEaFg9gnZsSUPpsbAe/0RFhrH+EXZ12Z7thf4dzN1+Sn+G8QrDA1VKaN4IFxD1rQz9Xq9Coii9S9/hPbTGjyBwFH3H1UdQuz5KsgPDEHua4/kPg2Gp/IIItsaLWBqiT9XH45MiQxSosGJ56H/0F2cjcCFd72l1665RNHURdC3lspI77esfJsl+rXXabkAy7vxDXG/XGGcKpwiKDPFfvMEgjkAHil4Za1F36RnyxxvdIAzvgfH8knukYDck07tc++DP4TdWeI7HXuq5Yl6VVFrUQtf64/dkXewlKZSHQo6YvCSpREB0GDrz+Ys2GfO8nw2SwrYwaf88AifzlPvP17bf1mI3AuccJvAjZIpBmqvharKFAebEjVKfGAwpQjWoXlm9LROsq9bCk1UeQ3CJxJqprzssS/Q04JeS1ReCCubL3J7sx86spkP4eNpp95UF+8K748icIs8vdILFklk9skQqi1So6cx3X906pvy1vz+KipTJ8fiVJxsV5MmT0XwA";const xd=44032,ym=4352,_m=4449,bm=4519,ZR=19,JR=21,Tu=28,xm=JR*Tu,hQ=ZR*xm,pQ=xd+hQ,mQ=ym+ZR,gQ=_m+JR,vQ=bm+Tu;function Sf(n){return n>>24&255}function eI(n){return n&16777215}let t_,GE,n_,sp;function yQ(){let n=$R(dQ);t_=new Map(XR(n).flatMap((e,t)=>e.map(r=>[r,t+1<<24]))),GE=new Set(_d(n)),n_=new Map,sp=new Map;for(let[e,t]of KR(n)){if(!GE.has(e)&&t.length==2){let[r,i]=t,s=sp.get(r);s||(s=new Map,sp.set(r,s)),s.set(i,e)}n_.set(e,t.reverse())}}function tI(n){return n>=xd&&n<pQ}function _Q(n,e){if(n>=ym&&n<mQ&&e>=_m&&e<gQ)return xd+(n-ym)*xm+(e-_m)*Tu;if(tI(n)&&e>bm&&e<vQ&&(n-xd)%Tu==0)return n+(e-bm);{let t=sp.get(n);return t&&(t=t.get(e),t)?t:-1}}function nI(n){t_||yQ();let e=[],t=[],r=!1;function i(s){let o=t_.get(s);o&&(r=!0,s|=o),e.push(s)}for(let s of n)for(;;){if(s<128)e.push(s);else if(tI(s)){let o=s-xd,a=o/xm|0,c=o%xm/Tu|0,l=o%Tu;i(ym+a),i(_m+c),l>0&&i(bm+l)}else{let o=n_.get(s);o?t.push(...o):i(s)}if(!t.length)break;s=t.pop()}if(r&&e.length>1){let s=Sf(e[0]);for(let o=1;o<e.length;o++){let a=Sf(e[o]);if(a==0||s<=a){s=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(s=Sf(e[--c]),s<=a))break}s=Sf(e[o])}}return e}function bQ(n){let e=[],t=[],r=-1,i=0;for(let s of n){let o=Sf(s),a=eI(s);if(r==-1)o==0?r=a:e.push(a);else if(i>0&&i>=o)o==0?(e.push(r,...t),t.length=0,r=a):t.push(a),i=o;else{let c=_Q(r,a);c>=0?r=c:i==0&&o==0?(e.push(r),r=a):(t.push(a),i=o)}}return r>=0&&e.push(r,...t),e}function rI(n){return nI(n).map(eI)}function xQ(n){return bQ(nI(n))}const VE=45,iI=".",sI=65039,oI=1,wm=n=>Array.from(n);function wd(n,e){return n.P.has(e)||n.Q.has(e)}class wQ extends Array{get is_emoji(){return!0}}let r_,aI,cc,Am,cI,Vl,Dg,El,Ya,WE,i_;function ax(){if(r_)return;let n=$R(eQ);const e=()=>_d(n),t=()=>new Set(e()),r=(u,f)=>f.forEach(d=>u.add(d));r_=new Map(KR(n)),aI=t(),cc=e(),Am=new Set(e().map(u=>cc[u])),cc=new Set(cc),cI=t(),t();let i=XR(n),s=n();const o=()=>{let u=new Set;return e().forEach(f=>r(u,i[f])),r(u,e()),u};Vl=bd(u=>{let f=bd(n).map(d=>d+96);if(f.length){let d=u>=s;f[0]-=32,f=Su(f),d&&(f=`Restricted[${f}]`);let p=o(),v=o(),m=!n();return{N:f,P:p,Q:v,M:m,R:d}}}),Dg=t(),El=new Map;let a=e().concat(wm(Dg)).sort((u,f)=>u-f);a.forEach((u,f)=>{let d=n(),p=a[f]=d?a[f-d]:{V:[],M:new Map};p.V.push(u),Dg.has(u)||El.set(u,p)});for(let{V:u,M:f}of new Set(El.values())){let d=[];for(let v of u){let m=Vl.filter(h=>wd(h,v)),y=d.find(({G:h})=>m.some(w=>h.has(w)));y||(y={G:new Set,V:[]},d.push(y)),y.V.push(v),r(y.G,m)}let p=d.flatMap(v=>wm(v.G));for(let{G:v,V:m}of d){let y=new Set(p.filter(h=>!v.has(h)));for(let h of m)f.set(h,y)}}Ya=new Set;let c=new Set;const l=u=>Ya.has(u)?c.add(u):Ya.add(u);for(let u of Vl){for(let f of u.P)l(f);for(let f of u.Q)l(f)}for(let u of Ya)!El.has(u)&&!c.has(u)&&El.set(u,oI);r(Ya,rI(Ya)),WE=cQ(n).map(u=>wQ.from(u)).sort(fQ),i_=new Map;for(let u of WE){let f=[i_];for(let d of u){let p=f.map(v=>{let m=v.get(d);return m||(m=new Map,v.set(d,m)),m});d===sI?f.push(...p):f=p}for(let d of f)d.V=u}}function cx(n){return(lI(n)?"":`${lx(_0([n]))} `)+QR(n)}function lx(n){return`"${n}"‎`}function AQ(n){if(n.length>=4&&n[2]==VE&&n[3]==VE)throw new Error(`invalid label extension: "${Su(n.slice(0,4))}"`)}function EQ(n){for(let t=n.lastIndexOf(95);t>0;)if(n[--t]!==95)throw new Error("underscore allowed only at start")}function SQ(n){let e=n[0],t=HE.get(e);if(t)throw Of(`leading ${t}`);let r=n.length,i=-1;for(let s=1;s<r;s++){e=n[s];let o=HE.get(e);if(o){if(i==s)throw Of(`${t} + ${o}`);i=s+1,t=o}}if(i==r)throw Of(`trailing ${t}`)}function _0(n,e=1/0,t=QR){let r=[];TQ(n[0])&&r.push("◌"),n.length>e&&(e>>=1,n=[...n.slice(0,e),8230,...n.slice(-e)]);let i=0,s=n.length;for(let o=0;o<s;o++){let a=n[o];lI(a)&&(r.push(Su(n.slice(i,o))),r.push(t(a)),i=o+1)}return r.push(Su(n.slice(i,s))),r.join("")}function TQ(n,e){return ax(),e?Am.has(n):cc.has(n)}function lI(n){return ax(),cI.has(n)}function MQ(n){return PQ(RQ(n,xQ,LQ))}function RQ(n,e,t){if(!n)return[];ax();let r=0;return n.split(iI).map(i=>{let s=uQ(i),o={input:s,offset:r};r+=s.length+1;try{let a=o.tokens=BQ(s,e,t),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(EQ(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(d=>d<128))AQ(u),l="ASCII";else{let d=a.flatMap(p=>p.is_emoji?[]:p);if(!d.length)l="Emoji";else{if(cc.has(u[0]))throw Of("leading combining mark");for(let m=1;m<c;m++){let y=a[m];if(!y.is_emoji&&cc.has(y[0]))throw Of(`emoji + combining mark: "${Su(a[m-1])} + ${_0([y[0]])}"`)}SQ(u);let p=wm(new Set(d)),[v]=CQ(p);NQ(v,d),IQ(v,p),l=v.N}}o.type=l}catch(a){o.error=a}return o})}function IQ(n,e){let t,r=[];for(let i of e){let s=El.get(i);if(s===oI)return;if(s){let o=s.M.get(i);if(t=t?t.filter(a=>o.has(a)):wm(o),!t.length)return}else r.push(i)}if(t){for(let i of t)if(r.every(s=>wd(i,s)))throw new Error(`whole-script confusable: ${n.N}/${i.N}`)}}function CQ(n){let e=Vl;for(let t of n){let r=e.filter(i=>wd(i,t));if(!r.length)throw Vl.some(i=>wd(i,t))?fI(e[0],t):uI(t);if(e=r,r.length==1)break}return e}function PQ(n){return n.map(({input:e,error:t,output:r})=>{if(t){let i=t.message;throw new Error(n.length==1?i:`Invalid label ${lx(_0(e,63))}: ${i}`)}return Su(r)}).join(iI)}function uI(n){return new Error(`disallowed character: ${cx(n)}`)}function fI(n,e){let t=cx(e),r=Vl.find(i=>i.P.has(e));return r&&(t=`${r.N} ${t}`),new Error(`illegal mixture: ${n.N} + ${t}`)}function Of(n){return new Error(`illegal placement: ${n}`)}function NQ(n,e){for(let t of e)if(!wd(n,t))throw fI(n,t);if(n.M){let t=rI(e);for(let r=1,i=t.length;r<i;r++)if(Am.has(t[r])){let s=r+1;for(let o;s<i&&Am.has(o=t[s]);s++)for(let a=r;a<s;a++)if(t[a]==o)throw new Error(`duplicate non-spacing marks: ${cx(o)}`);if(s-r>zE)throw new Error(`excessive non-spacing marks: ${lx(_0(t.slice(r-1,s)))} (${s-r}/${zE})`);r=s}}}function BQ(n,e,t){let r=[],i=[];for(n=n.slice().reverse();n.length;){let s=kQ(n);if(s)i.length&&(r.push(e(i)),i=[]),r.push(t(s));else{let o=n.pop();if(Ya.has(o))i.push(o);else{let a=r_.get(o);if(a)i.push(...a);else if(!aI.has(o))throw uI(o)}}}return i.length&&r.push(e(i)),r}function LQ(n){return n.filter(e=>e!=sI)}function kQ(n,e){let t=i_,r,i=n.length;for(;i&&(t=t.get(n[--i]),!!t);){let{V:s}=t;s&&(r=s,e&&e.push(...n.slice(i).reverse()),n.length=i)}return r}const DQ=n=>MQ(n),ws=n=>{let e="";for(let t=0;t<32;t+=1)e+="00";if(n){const r=DQ(n).split(".");for(let i=r.length-1;i>=0;i-=1){const s=di(r[i]).slice(2);e=di(`0x${e}${s}`).slice(2)}}return`0x${e}`};var kh=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};class OQ{constructor(e,t){this.contract=new e_(ZY,t??vm.main,e),this.context=e}getOwner(e){return kh(this,void 0,void 0,function*(){try{return this.contract.methods.owner(ws(e)).call()}catch{throw new Error}})}getTTL(e){return kh(this,void 0,void 0,function*(){try{return this.contract.methods.ttl(ws(e)).call()}catch{throw new Error}})}recordExists(e){return kh(this,void 0,void 0,function*(){try{return this.contract.methods.recordExists(ws(e)).call()}catch{throw new Error}})}getResolver(e){return kh(this,void 0,void 0,function*(){try{return this.contract.methods.resolver(ws(e)).call().then(t=>{if(typeof t=="string")return new e_(JY,t,this.context);throw new Error})}catch{throw new Error}})}get events(){return this.contract.events}}var ao=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};let UQ=class{constructor(e){this.registry=e}getResolverContractAdapter(e){return ao(this,void 0,void 0,function*(){return this.registry.getResolver(e)})}checkInterfaceSupport(e,t){var r,i;return ao(this,void 0,void 0,function*(){if(at(FE[t]))throw new GA((r=e.options.address)!==null&&r!==void 0?r:"",t);if(!(yield e.methods.supportsInterface(FE[t]).call()))throw new GA((i=e.options.address)!==null&&i!==void 0?i:"",t)})}supportsInterface(e,t){var r;return ao(this,void 0,void 0,function*(){const i=yield this.getResolverContractAdapter(e);let s=t;if(!en(s)){if(s=(r=Vd(t))!==null&&r!==void 0?r:"",t==="")throw new Error("Invalid interface Id");s=s.slice(0,10)}return i.methods.supportsInterface(s).call()})}getAddress(e,t=60){return ao(this,void 0,void 0,function*(){const r=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(r,pl.addr),r.methods.addr(ws(e),t).call()})}getPubkey(e){return ao(this,void 0,void 0,function*(){const t=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(t,pl.pubkey),t.methods.pubkey(ws(e)).call()})}getContenthash(e){return ao(this,void 0,void 0,function*(){const t=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(t,pl.contenthash),t.methods.contenthash(ws(e)).call()})}setAddress(e,t,r){return ao(this,void 0,void 0,function*(){const i=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(i,pl.setAddr),i.methods.setAddr(ws(e),t).send(r)})}getText(e,t){return ao(this,void 0,void 0,function*(){const r=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(r,pl.text),r.methods.text(ws(e),t).call()})}getName(e,t=!0){return ao(this,void 0,void 0,function*(){const r=`${e.toLowerCase().substring(2)}.addr.reverse`,i=yield this.getResolverContractAdapter(r);return t&&(yield this.checkInterfaceSupport(i,pl.name)),i.methods.name(ws(r)).call()})}};var xi=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};class dI extends jr{constructor(e,t){super(t??""),this.registryAddress=e??vm.main,this._registry=new OQ(this.getContextObject(),e),this._resolver=new UQ(this._registry)}getResolver(e){return xi(this,void 0,void 0,function*(){return this._registry.getResolver(e)})}recordExists(e){return xi(this,void 0,void 0,function*(){return this._registry.recordExists(e)})}getTTL(e){return xi(this,void 0,void 0,function*(){return this._registry.getTTL(e)})}getOwner(e){return xi(this,void 0,void 0,function*(){return this._registry.getOwner(e)})}getAddress(e,t=60){return xi(this,void 0,void 0,function*(){return this._resolver.getAddress(e,t)})}getText(e,t){return xi(this,void 0,void 0,function*(){return fi(e)?this._resolver.getText(yield this._resolver.getName(e,!1),t):this._resolver.getText(e,t)})}getName(e,t=!0){return xi(this,void 0,void 0,function*(){return this._resolver.getName(e,t)})}getPubkey(e){return xi(this,void 0,void 0,function*(){return this._resolver.getPubkey(e)})}getContenthash(e){return xi(this,void 0,void 0,function*(){return this._resolver.getContenthash(e)})}checkNetwork(){return xi(this,void 0,void 0,function*(){const e=Date.now()/1e3;if(!this._lastSyncCheck||e-this._lastSyncCheck>3600){const i=yield lY(this);if(!(typeof i=="boolean"&&!i))throw new i7;this._lastSyncCheck=e}if(this._detectedAddress)return this._detectedAddress;const t=yield Xb(this,Object.assign(Object.assign({},this.defaultReturnFormat),{number:Ri.HEX})),r=vm[QY[t]];if(typeof r>"u")throw new r7(t);return this._detectedAddress=r,this._detectedAddress})}supportsInterface(e,t){return xi(this,void 0,void 0,function*(){return this._resolver.supportsInterface(e,t)})}get events(){return this._registry.events}setAddress(e,t,r){return xi(this,void 0,void 0,function*(){return this._resolver.setAddress(e,t,r)})}}var qo=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const FQ=n=>qo(void 0,void 0,void 0,function*(){return(yield WX(n)).map(Ys)}),HQ=(n,e)=>qo(void 0,void 0,void 0,function*(){nt.validate(["string"],[e]);const t=yield jX(n,e);return Ys(t)}),zQ=(n,e,t,r)=>qo(void 0,void 0,void 0,function*(){return nt.validate(["address","string","uint"],[e,t,r]),qX(n,e,t,r)}),GQ=(n,e)=>qo(void 0,void 0,void 0,function*(){return nt.validate(["address"],[e]),$X(n,e)}),VQ=(n,e,t)=>qo(void 0,void 0,void 0,function*(){return nt.validate(["string","string"],[e,t]),XX(n,e,t)}),WQ=(n,e,t,r)=>qo(void 0,void 0,void 0,function*(){const i=Yr(e,mt,{transactionSchema:r==null?void 0:r.customTransactionSchema});return KX(n,i,t)}),jQ=(n,e,t,r)=>qo(void 0,void 0,void 0,function*(){const i=Yr(e,mt,{transactionSchema:r==null?void 0:r.customTransactionSchema});return YX(n,i,t)}),qQ=(n,e,t,r)=>qo(void 0,void 0,void 0,function*(){nt.validate(["string","address","string"],[e,t,r]);const i=en(e)?e:is(e);return QX(n,i,t,r)}),$Q=(n,e,t)=>qo(void 0,void 0,void 0,function*(){nt.validate(["string","string"],[e,t]);const r=en(e)?e:is(e);return ZX(n,r,t)});var co=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};class hI extends jr{getAccounts(){return co(this,void 0,void 0,function*(){return FQ(this.requestManager)})}newAccount(e){return co(this,void 0,void 0,function*(){return HQ(this.requestManager,e)})}unlockAccount(e,t,r){return co(this,void 0,void 0,function*(){return zQ(this.requestManager,e,t,r)})}lockAccount(e){return co(this,void 0,void 0,function*(){return GQ(this.requestManager,e)})}importRawKey(e,t){return co(this,void 0,void 0,function*(){return VQ(this.requestManager,e,t)})}sendTransaction(e,t){return co(this,void 0,void 0,function*(){return WQ(this.requestManager,e,t,this.config)})}signTransaction(e,t){return co(this,void 0,void 0,function*(){return jQ(this.requestManager,e,t,this.config)})}sign(e,t,r){return co(this,void 0,void 0,function*(){return qQ(this.requestManager,e,t,r)})}ecRecover(e,t){return co(this,void 0,void 0,function*(){return $Q(this.requestManager,e,t)})}}var Ts;(function(n){n.HTTPS="https",n.WebSocket="wss"})(Ts||(Ts={}));var He;(function(n){n.ETH_MAINNET="eth_mainnet",n.ETH_SEPOLIA="eth_sepolia",n.ETH_HOLESKY="eth_holesky",n.POLYGON_MAINNET="polygon_mainnet",n.POLYGON_AMOY="polygon_amoy",n.AVALANCHE_C_MAINNET="avalanche_c_mainnet",n.AVALANCHE_P_MAINNET="avalanche_p_mainnet",n.AVALANCHE_X_MAINNET="avalanche_x_mainnet",n.ARBITRUM_MAINNET="arbitrum_mainnet",n.ARBITRUM_SEPOLIA="arbitrum_sepolia",n.BASE_MAINNET="base_mainnet",n.BASE_SEPOLIA="base_sepolia",n.OPTIMISM_MAINNET="optimism_mainnet",n.OPTIMISM_SEPOLIA="optimism_sepolia",n.FANTOM_MAINNET="fantom_mainnet",n.FANTOM_TESTNET="fantom_testnet",n.DYMENSION_MAINNET="dymension_mainnet",n.DYMENSION_TESTNET="dymension_testnet",n.BNB_MAINNET="bnb_mainnet",n.BNB_TESTNET="bnb_testnet",n.BSC_MAINNET="bsc_mainnet",n.BSC_TESTNET="bsc_testnet",n.ARBITRUM_ONE="arbitrum_one",n.ARBITRUM_NOVA="arbitrum_nova",n.AVALANCHE_FUJI_C="avalanche_fuji_c",n.AVALANCHE_FUJI_P="avalanche_fuji_p",n.AVALANCHE_FUJI_X="avalanche_fuji_x",n.BLAST_MAINNET="blast_mainnet",n.OPBNB_MAINNET="opbnb_mainnet",n.OPBNB_TESTNET="opbnb_testnet",n.GNOSIS_MAINNET="gnosis_mainnet",n.GNOSIS_CHIADO="gnosis_chiado",n.PULSECHAIN_MAINNET="pulsechain_mainnet",n.PULSECHAIN_TESTNET="pulsechain_testnet",n.KAVA_MAINNET="kava_mainnet",n.CRONOS_MAINNET="cronos_mainnet",n.MANTLE_MAINNET="mantle_mainnet",n.CHILIZ_MAINNET="chiliz_mainnet",n.CHILIZ_SPICY="chiliz_spicy",n.MOONBEAM_MAINNET="moonbeam_mainnet",n.TAIKO_MAINNET="taiko_mainnet",n.TAIKO_HEKLA="taiko_hekla",n.LINEA_MAINNET="linea_mainnet",n.LINEA_SEPOLIA="linea_sepolia",n.BAHAMUT_MAINNET="bahamut_mainnet",n.SCROLL_MAINNET="scroll_mainnet",n.SCROLL_SEPOLIA="scroll_sepolia",n.TRON_MAINNET="tron_mainnet",n.SYSCOIN_MAINNET="syscoin_mainnet",n.SYSCOIN_TANENBAUM="syscoin_tanenbaum",n.MOONRIVER_MAINNET="moonriver_mainnet",n.HAQQ_MAINNET="haqq_mainnet",n.EVMOS_MAINNET="evmos_mainnet",n.EVMOS_TESTNET="evmos_testnet",n.BERACHAIN_TESTNET="berachain_testnet"})(He||(He={}));const XQ=1300;class KQ extends ht{constructor(e){super("You've reach the rate limit of free RPC calls from our Partner Quick Nodes. There are two options you can either create a paid Quick Nodes account and get 20% off for 2 months using WEB3JS referral code, or use Free public RPC endpoint.",e),this.code=XQ}}const YQ=1301;class jE extends ht{constructor(e){super(`Invalid provider config options given for ${e}`),this.code=YQ}}var QQ=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};class pI extends Pb{constructor(e,t,r,i,s){if(super(),s!==void 0&&t===Ts.HTTPS&&!("providerOptions"in s))throw new jE("HTTP Provider");if(s!==void 0&&t===Ts.WebSocket&&!("socketOptions"in s||"reconnectOptions"in s))throw new jE("Websocket Provider");this.transport=t,t===Ts.HTTPS?this.provider=new c0(this.getRPCURL(e,t,r,i),s):t===Ts.WebSocket&&(this.provider=new v2(this.getRPCURL(e,t,r,i),s==null?void 0:s.socketOptions,s==null?void 0:s.reconnectOptions))}request(e,t){return QQ(this,void 0,void 0,function*(){return this.transport===Ts.HTTPS?yield this.provider.request(e,t):this.provider.request(e)})}getStatus(){return this.provider.getStatus()}supportsSubscriptions(){return this.provider.supportsSubscriptions()}once(e,t){var r;!((r=this.provider)===null||r===void 0)&&r.once&&this.provider.once(e,t)}removeAllListeners(e){var t;!((t=this.provider)===null||t===void 0)&&t.removeAllListeners&&this.provider.removeAllListeners(e)}connect(){var e;!((e=this.provider)===null||e===void 0)&&e.connect&&this.provider.connect()}disconnect(e,t){var r;!((r=this.provider)===null||r===void 0)&&r.disconnect&&this.provider.disconnect(e,t)}reset(){var e;!((e=this.provider)===null||e===void 0)&&e.reset&&this.provider.reset()}on(e,t){this.provider&&this.provider.on(e,t)}removeListener(e,t){this.provider&&this.provider.removeListener(e,t)}}var ZQ=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const Jn=n=>n!==void 0&&n.trim().length>0;class JQ extends pI{constructor(e=He.ETH_MAINNET,t=Ts.HTTPS,r="",i="",s){super(e,t,r,i,s)}request(e,t){const r=Object.create(null,{request:{get:()=>super.request}});return ZQ(this,void 0,void 0,function*(){try{return yield r.request.call(this,e,t)}catch(i){throw i instanceof Es&&i.statusCode===429?new KQ(i):i}})}getRPCURL(e,t,r,i){let s="",o="";switch(e){case He.ETH_MAINNET:s=Jn(i)?i:"powerful-holy-bush.quiknode.pro",o=Jn(r)?r:"3240624a343867035925ff7561eb60dfdba2a668";break;case He.ETH_SEPOLIA:s=Jn(i)?i:"dimensional-fabled-glitter.ethereum-sepolia.quiknode.pro",o=Jn(r)?r:"382a3b5a4b938f2d6e8686c19af4b22921fde2cd";break;case He.ETH_HOLESKY:s=Jn(i)?i:"yolo-morning-card.ethereum-holesky.quiknode.pro",o=Jn(r)?r:"481ebe70638c4dcf176af617a16d02ab866b9af9";break;case He.ARBITRUM_MAINNET:s=Jn(i)?i:"autumn-divine-dinghy.arbitrum-mainnet.quiknode.pro",o=Jn(r)?r:"a5d7bfbf60b5ae9ce3628e53d69ef50d529e9a8c";break;case He.ARBITRUM_SEPOLIA:s=Jn(i)?i:"few-patient-pond.arbitrum-sepolia.quiknode.pro",o=Jn(r)?r:"3be985450970628c860b959c65cd2642dcafe53c";break;case He.BNB_MAINNET:s=Jn(i)?i:"purple-empty-reel.bsc.quiknode.pro",o=Jn(r)?r:"ebf6c532961e21f092ff2facce1ec4c89c540158";break;case He.BNB_TESTNET:s=Jn(i)?i:"floral-rough-scion.bsc-testnet.quiknode.pro",o=Jn(r)?r:"5b297e5acff5f81f4c37ebf6f235f7299b6f9d28";break;case He.POLYGON_MAINNET:s=Jn(i)?i:"small-chaotic-moon.matic.quiknode.pro",o=Jn(r)?r:"847569f8a017e84d985e10d0f44365d965a951f1";break;case He.POLYGON_AMOY:s=Jn(i)?i:"prettiest-side-shape.matic-amoy.quiknode.pro",o=Jn(r)?r:"79a9476eea661d4f82de614db1d8a895b14b881c";break;default:throw new Error("Network info not avalible.")}return`${t}://${s}/${o}`}}const eZ=n=>n!==void 0&&n.trim().length>0,tZ=[He.DYMENSION_MAINNET,He.DYMENSION_TESTNET,He.KAVA_MAINNET,He.CRONOS_MAINNET,He.POLYGON_MAINNET];class Em extends pI{constructor(e=He.ETH_MAINNET,t=Ts.HTTPS,r="",i){super(e,t,"",r,i)}getRPCURL(e,t,r,i){if(!Em.networkHostMap[e])throw new Error("Network info not avalible.");const s=`${Em.networkHostMap[e]}.publicnode.com`,o=eZ(i)?i:s;return tZ.includes(e)&&t===Ts.WebSocket?`${t}://${o}/websocket`:`${t}://${o}`}}Em.networkHostMap={[He.POLYGON_AMOY]:"polygon-amoy-bor-rpc",[He.DYMENSION_MAINNET]:"dymension-evm-rpc",[He.DYMENSION_TESTNET]:"dymension-testnet-evm-rpc",[He.BLAST_MAINNET]:"blast-rpc",[He.GNOSIS_MAINNET]:"gnosis-rpc",[He.PULSECHAIN_MAINNET]:"pulsechain-rpc",[He.PULSECHAIN_TESTNET]:"pulsechain-testnet-rpc",[He.KAVA_MAINNET]:"kava-evm-rpc",[He.CRONOS_MAINNET]:"cronos-evm-rpc",[He.MANTLE_MAINNET]:"mantle-rpc",[He.TAIKO_MAINNET]:"taiko-rpc",[He.TAIKO_HEKLA]:"taiko-hekla-rpc",[He.LINEA_MAINNET]:"linea-rpc",[He.LINEA_SEPOLIA]:"linea-sepolia-rpc",[He.SCROLL_MAINNET]:"scroll-rpc",[He.SCROLL_SEPOLIA]:"scroll-sepolia-rpc",[He.SYSCOIN_MAINNET]:"syscoin-evm-rpc",[He.SYSCOIN_TANENBAUM]:"syscoin-tanenbaum-evm-rpc",[He.HAQQ_MAINNET]:"haqq-evm-rpc",[He.EVMOS_MAINNET]:"evmos-evm-rpc",[He.EVMOS_TESTNET]:"evmos-testnet-evm-rpc",[He.BERACHAIN_TESTNET]:"berachain-testnet-evm-rpc",[He.ETH_MAINNET]:"ethereum-rpc",[He.ETH_SEPOLIA]:"ethereum-sepolia-rpc",[He.ETH_HOLESKY]:"ethereum-holesky-rpc",[He.BSC_MAINNET]:"bsc-rpc",[He.BSC_TESTNET]:"bsc-testnet-rpc",[He.POLYGON_MAINNET]:"polygon-bor-rpc",[He.BASE_MAINNET]:"base-rpc",[He.BASE_SEPOLIA]:"base-sepolia-rpc",[He.ARBITRUM_ONE]:"arbitrum-one-rpc",[He.ARBITRUM_NOVA]:"arbitrum-nova-rpc",[He.ARBITRUM_SEPOLIA]:"arbitrum-sepolia-rpc",[He.AVALANCHE_C_MAINNET]:"avalanche-c-chain-rpc",[He.AVALANCHE_P_MAINNET]:"avalanche-p-chain-rpc",[He.AVALANCHE_X_MAINNET]:"avalanche-x-chain-rpc",[He.AVALANCHE_FUJI_C]:"avalanche-fuji-c-chain-rpc",[He.AVALANCHE_FUJI_P]:"avalanche-fuji-p-chain-rpc",[He.AVALANCHE_FUJI_X]:"avalanche-fuji-x-chain-rpc",[He.OPTIMISM_MAINNET]:"optimism-rpc",[He.OPTIMISM_SEPOLIA]:"optimism-sepolia-rpc",[He.FANTOM_MAINNET]:"fantom-rpc",[He.FANTOM_TESTNET]:"fantom-testnet-rpc",[He.OPBNB_MAINNET]:"opbnb-rpc",[He.OPBNB_TESTNET]:"opbnb-testnet-rpc",[He.GNOSIS_CHIADO]:"gnosis-chiado-rpc",[He.CHILIZ_MAINNET]:"chiliz-rpc",[He.CHILIZ_SPICY]:"chiliz-spicy-rpc",[He.MOONBEAM_MAINNET]:"moonbeam-rpc",[He.BAHAMUT_MAINNET]:"bahamut-rpc",[He.TRON_MAINNET]:"tron-evm-rpc",[He.MOONRIVER_MAINNET]:"moonriver-rpc"};const nZ=new JQ,rZ={encodeEventSignature:Zb,encodeFunctionCall:nY,encodeFunctionSignature:vd,encodeParameter:Yy,encodeParameters:g0,decodeParameter:BR,decodeParameters:mc,decodeLog:LR};var pf=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const iZ=n=>{const e=(o,a)=>pf(void 0,void 0,void 0,function*(){const c=yield GY(o,n),l=ve({format:"bytes"},a,mt);return G$(c,l)}),t=o=>{const a=Wb(o);return Object.assign(Object.assign({},a),{signTransaction:c=>pf(void 0,void 0,void 0,function*(){return e(c,a.privateKey)})})},r=(o,a,c)=>pf(void 0,void 0,void 0,function*(){var l;const u=yield q$(o,a,(l=c==null?void 0:c.nonStrict)!==null&&l!==void 0?l:!0);return Object.assign(Object.assign({},u),{signTransaction:f=>pf(void 0,void 0,void 0,function*(){return e(f,u.privateKey)})})}),i=()=>{const o=j$();return Object.assign(Object.assign({},o),{signTransaction:a=>pf(void 0,void 0,void 0,function*(){return e(a,o.privateKey)})})},s=new cm({create:i,privateKeyToAccount:t,decrypt:r});return{signTransaction:e,create:i,privateKeyToAccount:t,decrypt:r,recoverTransaction:V$,hashMessage:Vb,sign:Z2,recover:zy,encrypt:J2,wallet:s,privateKeyToAddress:d0,parseAndValidatePrivateKey:Gu,privateKeyToPublicKey:W$}},sZ={version:"4.16.0"};var oZ=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},Sm;(function(n){n.eip6963announceProvider="eip6963:announceProvider",n.eip6963requestProvider="eip6963:requestProvider"})(Sm||(Sm={}));const Og=new Map,mI="web3:providersMapUpdated",aZ=()=>oZ(void 0,void 0,void 0,function*(){return new Promise((n,e)=>{typeof window>"u"&&e(new Error("window object not available, EIP-6963 is intended to be used within a browser")),window.addEventListener(Sm.eip6963announceProvider,t=>{Og.set(t.detail.info.uuid,t.detail);const r=new CustomEvent(mI,{detail:Og});window.dispatchEvent(r),n(Og)}),window.dispatchEvent(new Event(Sm.eip6963requestProvider))})}),cZ=n=>{if(typeof window>"u")throw new Error("window object not available, EIP-6963 is intended to be used within a browser");window.addEventListener(mI,n)};class qu extends jr{constructor(e=nZ){var t;at(e)||typeof e=="string"&&e.trim()===""||typeof e!="string"&&!om(e)&&e.provider;let r={};typeof e=="string"||om(e)?r.provider=e:e?r=e:r={},r.registeredSubscriptions=Object.assign(Object.assign({},Zy),(t=r.registeredSubscriptions)!==null&&t!==void 0?t:{}),super(r);const i=iZ(this);this._wallet=i.wallet,this._accountProvider=i,this.utils=g2;const s=this;class o extends e_{constructor(l,u,f,d,p){if(pa(u)&&pa(f))throw new VA("Should not provide options at both 2nd and 3rd parameters");let v,m={},y,h;if(!at(u)&&typeof u!="object"&&typeof u!="string")throw new VA;if(typeof u=="string"&&(v=u),pa(u)?m=u:pa(f)?m=f:m={},u instanceof jr?y=u:f instanceof jr?y=f:d instanceof jr?y=d:y=s.getContextObject(),p?h=p:vo(f)?h=f:vo(d)&&(h=d),super(l,v,m,y,h),super.subscribeToContextEvents(s),!at(a)){const w=a.getTransactionMiddleware();at(w)||super.setTransactionMiddleware(w)}}}const a=s.use(v0);this.eth=Object.assign(a,{ens:s.use(dI,vm.main),Iban:Hn,net:s.use(aR),personal:s.use(hI),Contract:o,abi:rZ,accounts:i})}}qu.version=sZ.version;qu.utils=g2;qu.requestEIP6963Providers=aZ;qu.onNewProviderDiscovered=cZ;qu.modules={Web3Eth:v0,Iban:Hn,Net:aR,ENS:dI,Personal:hI};var ux={exports:{}},gI=function(e,t){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(t,i)}},lZ=gI,fx=Object.prototype.toString,dx=function(n){return function(e){var t=fx.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())}}(Object.create(null));function jc(n){return n=n.toLowerCase(),function(t){return dx(t)===n}}function hx(n){return Array.isArray(n)}function Tm(n){return typeof n>"u"}function uZ(n){return n!==null&&!Tm(n)&&n.constructor!==null&&!Tm(n.constructor)&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}var vI=jc("ArrayBuffer");function fZ(n){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&vI(n.buffer),e}function dZ(n){return typeof n=="string"}function hZ(n){return typeof n=="number"}function yI(n){return n!==null&&typeof n=="object"}function op(n){if(dx(n)!=="object")return!1;var e=Object.getPrototypeOf(n);return e===null||e===Object.prototype}var pZ=jc("Date"),mZ=jc("File"),gZ=jc("Blob"),vZ=jc("FileList");function px(n){return fx.call(n)==="[object Function]"}function yZ(n){return yI(n)&&px(n.pipe)}function _Z(n){var e="[object FormData]";return n&&(typeof FormData=="function"&&n instanceof FormData||fx.call(n)===e||px(n.toString)&&n.toString()===e)}var bZ=jc("URLSearchParams");function xZ(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function wZ(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function mx(n,e){if(!(n===null||typeof n>"u"))if(typeof n!="object"&&(n=[n]),hx(n))for(var t=0,r=n.length;t<r;t++)e.call(null,n[t],t,n);else for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.call(null,n[i],i,n)}function s_(){var n={};function e(i,s){op(n[s])&&op(i)?n[s]=s_(n[s],i):op(i)?n[s]=s_({},i):hx(i)?n[s]=i.slice():n[s]=i}for(var t=0,r=arguments.length;t<r;t++)mx(arguments[t],e);return n}function AZ(n,e,t){return mx(e,function(i,s){t&&typeof i=="function"?n[s]=lZ(i,t):n[s]=i}),n}function EZ(n){return n.charCodeAt(0)===65279&&(n=n.slice(1)),n}function SZ(n,e,t,r){n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,t&&Object.assign(n.prototype,t)}function TZ(n,e,t){var r,i,s,o={};e=e||{};do{for(r=Object.getOwnPropertyNames(n),i=r.length;i-- >0;)s=r[i],o[s]||(e[s]=n[s],o[s]=!0);n=Object.getPrototypeOf(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e}function MZ(n,e,t){n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;var r=n.indexOf(e,t);return r!==-1&&r===t}function RZ(n){if(!n)return null;var e=n.length;if(Tm(e))return null;for(var t=new Array(e);e-- >0;)t[e]=n[e];return t}var IZ=function(n){return function(e){return n&&e instanceof n}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),ur={isArray:hx,isArrayBuffer:vI,isBuffer:uZ,isFormData:_Z,isArrayBufferView:fZ,isString:dZ,isNumber:hZ,isObject:yI,isPlainObject:op,isUndefined:Tm,isDate:pZ,isFile:mZ,isBlob:gZ,isFunction:px,isStream:yZ,isURLSearchParams:bZ,isStandardBrowserEnv:wZ,forEach:mx,merge:s_,extend:AZ,trim:xZ,stripBOM:EZ,inherits:SZ,toFlatObject:TZ,kindOf:dx,kindOfTest:jc,endsWith:MZ,toArray:RZ,isTypedArray:IZ,isFileList:vZ},ml=ur;function qE(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var _I=function(e,t,r){if(!t)return e;var i;if(r)i=r(t);else if(ml.isURLSearchParams(t))i=t.toString();else{var s=[];ml.forEach(t,function(c,l){c===null||typeof c>"u"||(ml.isArray(c)?l=l+"[]":c=[c],ml.forEach(c,function(f){ml.isDate(f)?f=f.toISOString():ml.isObject(f)&&(f=JSON.stringify(f)),s.push(qE(l)+"="+qE(f))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},CZ=ur;function b0(){this.handlers=[]}b0.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};b0.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};b0.prototype.forEach=function(e){CZ.forEach(this.handlers,function(r){r!==null&&e(r)})};var PZ=b0,NZ=ur,BZ=function(e,t){NZ.forEach(e,function(i,s){s!==t&&s.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[s])})},bI=ur;function Mu(n,e,t,r,i){Error.call(this),this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i)}bI.inherits(Mu,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var xI=Mu.prototype,wI={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(n){wI[n]={value:n}});Object.defineProperties(Mu,wI);Object.defineProperty(xI,"isAxiosError",{value:!0});Mu.from=function(n,e,t,r,i,s){var o=Object.create(xI);return bI.toFlatObject(n,o,function(c){return c!==Error.prototype}),Mu.call(o,n.message,e,t,r,i),o.name=n.name,s&&Object.assign(o,s),o};var $u=Mu,AI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Vi=ur;function LZ(n,e){e=e||new FormData;var t=[];function r(s){return s===null?"":Vi.isDate(s)?s.toISOString():Vi.isArrayBuffer(s)||Vi.isTypedArray(s)?typeof Blob=="function"?new Blob([s]):Buffer.from(s):s}function i(s,o){if(Vi.isPlainObject(s)||Vi.isArray(s)){if(t.indexOf(s)!==-1)throw Error("Circular reference detected in "+o);t.push(s),Vi.forEach(s,function(c,l){if(!Vi.isUndefined(c)){var u=o?o+"."+l:l,f;if(c&&!o&&typeof c=="object"){if(Vi.endsWith(l,"{}"))c=JSON.stringify(c);else if(Vi.endsWith(l,"[]")&&(f=Vi.toArray(c))){f.forEach(function(d){!Vi.isUndefined(d)&&e.append(u,r(d))});return}}i(c,u)}}),t.pop()}else e.append(o,r(s))}return i(n),e}var EI=LZ,Ug,$E;function kZ(){if($E)return Ug;$E=1;var n=$u;return Ug=function(t,r,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?t(i):r(new n("Request failed with status code "+i.status,[n.ERR_BAD_REQUEST,n.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},Ug}var Fg,XE;function DZ(){if(XE)return Fg;XE=1;var n=ur;return Fg=n.isStandardBrowserEnv()?function(){return{write:function(r,i,s,o,a,c){var l=[];l.push(r+"="+encodeURIComponent(i)),n.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),n.isString(o)&&l.push("path="+o),n.isString(a)&&l.push("domain="+a),c===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(r){var i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Fg}var OZ=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},UZ=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},FZ=OZ,HZ=UZ,SI=function(e,t){return e&&!FZ(t)?HZ(e,t):t},Hg,KE;function zZ(){if(KE)return Hg;KE=1;var n=ur,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Hg=function(r){var i={},s,o,a;return r&&n.forEach(r.split(`
`),function(l){if(a=l.indexOf(":"),s=n.trim(l.substr(0,a)).toLowerCase(),o=n.trim(l.substr(a+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([o]):i[s]=i[s]?i[s]+", "+o:o}}),i},Hg}var zg,YE;function GZ(){if(YE)return zg;YE=1;var n=ur;return zg=n.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),i;function s(o){var a=o;return t&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=s(window.location.href),function(a){var c=n.isString(a)?s(a):a;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),zg}var Gg,QE;function x0(){if(QE)return Gg;QE=1;var n=$u,e=ur;function t(r){n.call(this,r??"canceled",n.ERR_CANCELED),this.name="CanceledError"}return e.inherits(t,n,{__CANCEL__:!0}),Gg=t,Gg}var Vg,ZE;function VZ(){return ZE||(ZE=1,Vg=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}),Vg}var Wg,JE;function e1(){if(JE)return Wg;JE=1;var n=ur,e=kZ(),t=DZ(),r=_I,i=SI,s=zZ(),o=GZ(),a=AI,c=$u,l=x0(),u=VZ();return Wg=function(d){return new Promise(function(v,m){var y=d.data,h=d.headers,w=d.responseType,S;function T(){d.cancelToken&&d.cancelToken.unsubscribe(S),d.signal&&d.signal.removeEventListener("abort",S)}n.isFormData(y)&&n.isStandardBrowserEnv()&&delete h["Content-Type"];var C=new XMLHttpRequest;if(d.auth){var B=d.auth.username||"",O=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";h.Authorization="Basic "+btoa(B+":"+O)}var P=i(d.baseURL,d.url);C.open(d.method.toUpperCase(),r(P,d.params,d.paramsSerializer),!0),C.timeout=d.timeout;function N(){if(C){var q="getAllResponseHeaders"in C?s(C.getAllResponseHeaders()):null,M=!w||w==="text"||w==="json"?C.responseText:C.response,g={data:M,status:C.status,statusText:C.statusText,headers:q,config:d,request:C};e(function(b){v(b),T()},function(b){m(b),T()},g),C=null}}if("onloadend"in C?C.onloadend=N:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(N)},C.onabort=function(){C&&(m(new c("Request aborted",c.ECONNABORTED,d,C)),C=null)},C.onerror=function(){m(new c("Network Error",c.ERR_NETWORK,d,C,C)),C=null},C.ontimeout=function(){var M=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",g=d.transitional||a;d.timeoutErrorMessage&&(M=d.timeoutErrorMessage),m(new c(M,g.clarifyTimeoutError?c.ETIMEDOUT:c.ECONNABORTED,d,C)),C=null},n.isStandardBrowserEnv()){var I=(d.withCredentials||o(P))&&d.xsrfCookieName?t.read(d.xsrfCookieName):void 0;I&&(h[d.xsrfHeaderName]=I)}"setRequestHeader"in C&&n.forEach(h,function(M,g){typeof y>"u"&&g.toLowerCase()==="content-type"?delete h[g]:C.setRequestHeader(g,M)}),n.isUndefined(d.withCredentials)||(C.withCredentials=!!d.withCredentials),w&&w!=="json"&&(C.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&C.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(S=function(q){C&&(m(!q||q&&q.type?new l:q),C.abort(),C=null)},d.cancelToken&&d.cancelToken.subscribe(S),d.signal&&(d.signal.aborted?S():d.signal.addEventListener("abort",S))),y||(y=null);var U=u(P);if(U&&["http","https","file"].indexOf(U)===-1){m(new c("Unsupported protocol "+U+":",c.ERR_BAD_REQUEST,d));return}C.send(y)})},Wg}var jg,t1;function WZ(){return t1||(t1=1,jg=null),jg}var er=ur,n1=BZ,r1=$u,jZ=AI,qZ=EI,$Z={"Content-Type":"application/x-www-form-urlencoded"};function i1(n,e){!er.isUndefined(n)&&er.isUndefined(n["Content-Type"])&&(n["Content-Type"]=e)}function XZ(){var n;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(n=e1()),n}function KZ(n,e,t){if(er.isString(n))try{return(e||JSON.parse)(n),er.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}var w0={transitional:jZ,adapter:XZ(),transformRequest:[function(e,t){if(n1(t,"Accept"),n1(t,"Content-Type"),er.isFormData(e)||er.isArrayBuffer(e)||er.isBuffer(e)||er.isStream(e)||er.isFile(e)||er.isBlob(e))return e;if(er.isArrayBufferView(e))return e.buffer;if(er.isURLSearchParams(e))return i1(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var r=er.isObject(e),i=t&&t["Content-Type"],s;if((s=er.isFileList(e))||r&&i==="multipart/form-data"){var o=this.env&&this.env.FormData;return qZ(s?{"files[]":e}:e,o&&new o)}else if(r||i==="application/json")return i1(t,"application/json"),KZ(e);return e}],transformResponse:[function(e){var t=this.transitional||w0.transitional,r=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,s=!r&&this.responseType==="json";if(s||i&&er.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?r1.from(o,r1.ERR_BAD_RESPONSE,this,null,this.response):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:WZ()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};er.forEach(["delete","get","head"],function(e){w0.headers[e]={}});er.forEach(["post","put","patch"],function(e){w0.headers[e]=er.merge($Z)});var gx=w0,YZ=ur,QZ=gx,ZZ=function(e,t,r){var i=this||QZ;return YZ.forEach(r,function(o){e=o.call(i,e,t)}),e},qg,s1;function TI(){return s1||(s1=1,qg=function(e){return!!(e&&e.__CANCEL__)}),qg}var o1=ur,$g=ZZ,JZ=TI(),eJ=gx,tJ=x0();function Xg(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new tJ}var nJ=function(e){Xg(e),e.headers=e.headers||{},e.data=$g.call(e,e.data,e.headers,e.transformRequest),e.headers=o1.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),o1.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var t=e.adapter||eJ.adapter;return t(e).then(function(i){return Xg(e),i.data=$g.call(e,i.data,i.headers,e.transformResponse),i},function(i){return JZ(i)||(Xg(e),i&&i.response&&(i.response.data=$g.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},ni=ur,MI=function(e,t){t=t||{};var r={};function i(u,f){return ni.isPlainObject(u)&&ni.isPlainObject(f)?ni.merge(u,f):ni.isPlainObject(f)?ni.merge({},f):ni.isArray(f)?f.slice():f}function s(u){if(ni.isUndefined(t[u])){if(!ni.isUndefined(e[u]))return i(void 0,e[u])}else return i(e[u],t[u])}function o(u){if(!ni.isUndefined(t[u]))return i(void 0,t[u])}function a(u){if(ni.isUndefined(t[u])){if(!ni.isUndefined(e[u]))return i(void 0,e[u])}else return i(void 0,t[u])}function c(u){if(u in t)return i(e[u],t[u]);if(u in e)return i(void 0,e[u])}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return ni.forEach(Object.keys(e).concat(Object.keys(t)),function(f){var d=l[f]||s,p=d(f);ni.isUndefined(p)&&d!==c||(r[f]=p)}),r},Kg,a1;function RI(){return a1||(a1=1,Kg={version:"0.27.2"}),Kg}var rJ=RI().version,ua=$u,vx={};["object","boolean","number","function","string","symbol"].forEach(function(n,e){vx[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});var c1={};vx.transitional=function(e,t,r){function i(s,o){return"[Axios v"+rJ+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return function(s,o,a){if(e===!1)throw new ua(i(o," has been removed"+(t?" in "+t:"")),ua.ERR_DEPRECATED);return t&&!c1[o]&&(c1[o]=!0),e?e(s,o,a):!0}};function iJ(n,e,t){if(typeof n!="object")throw new ua("options must be an object",ua.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(n),i=r.length;i-- >0;){var s=r[i],o=e[s];if(o){var a=n[s],c=a===void 0||o(a,s,n);if(c!==!0)throw new ua("option "+s+" must be "+c,ua.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ua("Unknown option "+s,ua.ERR_BAD_OPTION)}}var sJ={assertOptions:iJ,validators:vx},II=ur,oJ=_I,l1=PZ,u1=nJ,A0=MI,aJ=SI,CI=sJ,gl=CI.validators;function Ru(n){this.defaults=n,this.interceptors={request:new l1,response:new l1}}Ru.prototype.request=function(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=A0(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&CI.assertOptions(r,{silentJSONParsing:gl.transitional(gl.boolean),forcedJSONParsing:gl.transitional(gl.boolean),clarifyTimeoutError:gl.transitional(gl.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(t)===!1||(s=s&&p.synchronous,i.unshift(p.fulfilled,p.rejected))});var o=[];this.interceptors.response.forEach(function(p){o.push(p.fulfilled,p.rejected)});var a;if(!s){var c=[u1,void 0];for(Array.prototype.unshift.apply(c,i),c=c.concat(o),a=Promise.resolve(t);c.length;)a=a.then(c.shift(),c.shift());return a}for(var l=t;i.length;){var u=i.shift(),f=i.shift();try{l=u(l)}catch(d){f(d);break}}try{a=u1(l)}catch(d){return Promise.reject(d)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};Ru.prototype.getUri=function(e){e=A0(this.defaults,e);var t=aJ(e.baseURL,e.url);return oJ(t,e.params,e.paramsSerializer)};II.forEach(["delete","get","head","options"],function(e){Ru.prototype[e]=function(t,r){return this.request(A0(r||{},{method:e,url:t,data:(r||{}).data}))}});II.forEach(["post","put","patch"],function(e){function t(r){return function(s,o,a){return this.request(A0(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Ru.prototype[e]=t(),Ru.prototype[e+"Form"]=t(!0)});var cJ=Ru,Yg,f1;function lJ(){if(f1)return Yg;f1=1;var n=x0();function e(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(o){r=o});var i=this;this.promise.then(function(s){if(i._listeners){var o,a=i._listeners.length;for(o=0;o<a;o++)i._listeners[o](s);i._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(c){i.subscribe(c),o=c}).then(s);return a.cancel=function(){i.unsubscribe(o)},a},t(function(o){i.reason||(i.reason=new n(o),r(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]},e.prototype.unsubscribe=function(r){if(this._listeners){var i=this._listeners.indexOf(r);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var r,i=new e(function(o){r=o});return{token:i,cancel:r}},Yg=e,Yg}var Qg,d1;function uJ(){return d1||(d1=1,Qg=function(e){return function(r){return e.apply(null,r)}}),Qg}var Zg,h1;function fJ(){if(h1)return Zg;h1=1;var n=ur;return Zg=function(t){return n.isObject(t)&&t.isAxiosError===!0},Zg}var p1=ur,dJ=gI,ap=cJ,hJ=MI,pJ=gx;function PI(n){var e=new ap(n),t=dJ(ap.prototype.request,e);return p1.extend(t,ap.prototype,e),p1.extend(t,e),t.create=function(i){return PI(hJ(n,i))},t}var Qr=PI(pJ);Qr.Axios=ap;Qr.CanceledError=x0();Qr.CancelToken=lJ();Qr.isCancel=TI();Qr.VERSION=RI().version;Qr.toFormData=EI;Qr.AxiosError=$u;Qr.Cancel=Qr.CanceledError;Qr.all=function(e){return Promise.all(e)};Qr.spread=uJ();Qr.isAxiosError=fJ();ux.exports=Qr;ux.exports.default=Qr;var mJ=ux.exports,gJ=mJ;const NI=zc(gJ);var yx={exports:{}};const vJ={},yJ=Object.freeze(Object.defineProperty({__proto__:null,default:vJ},Symbol.toStringTag,{value:"Module"})),_J=WP(yJ);yx.exports;(function(n){(function(e,t){function r(M,g){if(!M)throw new Error(g||"Assertion failed")}function i(M,g){M.super_=g;var _=function(){};_.prototype=g.prototype,M.prototype=new _,M.prototype.constructor=M}function s(M,g,_){if(s.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((g==="le"||g==="be")&&(_=g,g=10),this._init(M||0,g||10,_||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=_J.Buffer}catch{}s.isBN=function(g){return g instanceof s?!0:g!==null&&typeof g=="object"&&g.constructor.wordSize===s.wordSize&&Array.isArray(g.words)},s.max=function(g,_){return g.cmp(_)>0?g:_},s.min=function(g,_){return g.cmp(_)<0?g:_},s.prototype._init=function(g,_,b){if(typeof g=="number")return this._initNumber(g,_,b);if(typeof g=="object")return this._initArray(g,_,b);_==="hex"&&(_=16),r(_===(_|0)&&_>=2&&_<=36),g=g.toString().replace(/\s+/g,"");var E=0;g[0]==="-"&&(E++,this.negative=1),E<g.length&&(_===16?this._parseHex(g,E,b):(this._parseBase(g,_,E),b==="le"&&this._initArray(this.toArray(),_,b)))},s.prototype._initNumber=function(g,_,b){g<0&&(this.negative=1,g=-g),g<67108864?(this.words=[g&67108863],this.length=1):g<4503599627370496?(this.words=[g&67108863,g/67108864&67108863],this.length=2):(r(g<9007199254740992),this.words=[g&67108863,g/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),_,b)},s.prototype._initArray=function(g,_,b){if(r(typeof g.length=="number"),g.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(g.length/3),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var R,L,G=0;if(b==="be")for(E=g.length-1,R=0;E>=0;E-=3)L=g[E]|g[E-1]<<8|g[E-2]<<16,this.words[R]|=L<<G&67108863,this.words[R+1]=L>>>26-G&67108863,G+=24,G>=26&&(G-=26,R++);else if(b==="le")for(E=0,R=0;E<g.length;E+=3)L=g[E]|g[E+1]<<8|g[E+2]<<16,this.words[R]|=L<<G&67108863,this.words[R+1]=L>>>26-G&67108863,G+=24,G>=26&&(G-=26,R++);return this._strip()};function a(M,g){var _=M.charCodeAt(g);if(_>=48&&_<=57)return _-48;if(_>=65&&_<=70)return _-55;if(_>=97&&_<=102)return _-87;r(!1,"Invalid character in "+M)}function c(M,g,_){var b=a(M,_);return _-1>=g&&(b|=a(M,_-1)<<4),b}s.prototype._parseHex=function(g,_,b){this.length=Math.ceil((g.length-_)/6),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var R=0,L=0,G;if(b==="be")for(E=g.length-1;E>=_;E-=2)G=c(g,_,E)<<R,this.words[L]|=G&67108863,R>=18?(R-=18,L+=1,this.words[L]|=G>>>26):R+=8;else{var k=g.length-_;for(E=k%2===0?_+1:_;E<g.length;E+=2)G=c(g,_,E)<<R,this.words[L]|=G&67108863,R>=18?(R-=18,L+=1,this.words[L]|=G>>>26):R+=8}this._strip()};function l(M,g,_,b){for(var E=0,R=0,L=Math.min(M.length,_),G=g;G<L;G++){var k=M.charCodeAt(G)-48;E*=b,k>=49?R=k-49+10:k>=17?R=k-17+10:R=k,r(k>=0&&R<b,"Invalid character"),E+=R}return E}s.prototype._parseBase=function(g,_,b){this.words=[0],this.length=1;for(var E=0,R=1;R<=67108863;R*=_)E++;E--,R=R/_|0;for(var L=g.length-b,G=L%E,k=Math.min(L,L-G)+b,x=0,F=b;F<k;F+=E)x=l(g,F,F+E,_),this.imuln(R),this.words[0]+x<67108864?this.words[0]+=x:this._iaddn(x);if(G!==0){var K=1;for(x=l(g,F,g.length,_),F=0;F<G;F++)K*=_;this.imuln(K),this.words[0]+x<67108864?this.words[0]+=x:this._iaddn(x)}this._strip()},s.prototype.copy=function(g){g.words=new Array(this.length);for(var _=0;_<this.length;_++)g.words[_]=this.words[_];g.length=this.length,g.negative=this.negative,g.red=this.red};function u(M,g){M.words=g.words,M.length=g.length,M.negative=g.negative,M.red=g.red}if(s.prototype._move=function(g){u(g,this)},s.prototype.clone=function(){var g=new s(null);return this.copy(g),g},s.prototype._expand=function(g){for(;this.length<g;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch{s.prototype.inspect=f}else s.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(g,_){g=g||10,_=_|0||1;var b;if(g===16||g==="hex"){b="";for(var E=0,R=0,L=0;L<this.length;L++){var G=this.words[L],k=((G<<E|R)&16777215).toString(16);R=G>>>24-E&16777215,E+=2,E>=26&&(E-=26,L--),R!==0||L!==this.length-1?b=d[6-k.length]+k+b:b=k+b}for(R!==0&&(b=R.toString(16)+b);b.length%_!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(g===(g|0)&&g>=2&&g<=36){var x=p[g],F=v[g];b="";var K=this.clone();for(K.negative=0;!K.isZero();){var A=K.modrn(F).toString(g);K=K.idivn(F),K.isZero()?b=A+b:b=d[x-A.length]+A+b}for(this.isZero()&&(b="0"+b);b.length%_!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var g=this.words[0];return this.length===2?g+=this.words[1]*67108864:this.length===3&&this.words[2]===1?g+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-g:g},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(g,_){return this.toArrayLike(o,g,_)}),s.prototype.toArray=function(g,_){return this.toArrayLike(Array,g,_)};var m=function(g,_){return g.allocUnsafe?g.allocUnsafe(_):new g(_)};s.prototype.toArrayLike=function(g,_,b){this._strip();var E=this.byteLength(),R=b||Math.max(1,E);r(E<=R,"byte array longer than desired length"),r(R>0,"Requested array length <= 0");var L=m(g,R),G=_==="le"?"LE":"BE";return this["_toArrayLike"+G](L,E),L},s.prototype._toArrayLikeLE=function(g,_){for(var b=0,E=0,R=0,L=0;R<this.length;R++){var G=this.words[R]<<L|E;g[b++]=G&255,b<g.length&&(g[b++]=G>>8&255),b<g.length&&(g[b++]=G>>16&255),L===6?(b<g.length&&(g[b++]=G>>24&255),E=0,L=0):(E=G>>>24,L+=2)}if(b<g.length)for(g[b++]=E;b<g.length;)g[b++]=0},s.prototype._toArrayLikeBE=function(g,_){for(var b=g.length-1,E=0,R=0,L=0;R<this.length;R++){var G=this.words[R]<<L|E;g[b--]=G&255,b>=0&&(g[b--]=G>>8&255),b>=0&&(g[b--]=G>>16&255),L===6?(b>=0&&(g[b--]=G>>24&255),E=0,L=0):(E=G>>>24,L+=2)}if(b>=0)for(g[b--]=E;b>=0;)g[b--]=0},Math.clz32?s.prototype._countBits=function(g){return 32-Math.clz32(g)}:s.prototype._countBits=function(g){var _=g,b=0;return _>=4096&&(b+=13,_>>>=13),_>=64&&(b+=7,_>>>=7),_>=8&&(b+=4,_>>>=4),_>=2&&(b+=2,_>>>=2),b+_},s.prototype._zeroBits=function(g){if(g===0)return 26;var _=g,b=0;return _&8191||(b+=13,_>>>=13),_&127||(b+=7,_>>>=7),_&15||(b+=4,_>>>=4),_&3||(b+=2,_>>>=2),_&1||b++,b},s.prototype.bitLength=function(){var g=this.words[this.length-1],_=this._countBits(g);return(this.length-1)*26+_};function y(M){for(var g=new Array(M.bitLength()),_=0;_<g.length;_++){var b=_/26|0,E=_%26;g[_]=M.words[b]>>>E&1}return g}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var g=0,_=0;_<this.length;_++){var b=this._zeroBits(this.words[_]);if(g+=b,b!==26)break}return g},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(g){return this.negative!==0?this.abs().inotn(g).iaddn(1):this.clone()},s.prototype.fromTwos=function(g){return this.testn(g-1)?this.notn(g).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(g){for(;this.length<g.length;)this.words[this.length++]=0;for(var _=0;_<g.length;_++)this.words[_]=this.words[_]|g.words[_];return this._strip()},s.prototype.ior=function(g){return r((this.negative|g.negative)===0),this.iuor(g)},s.prototype.or=function(g){return this.length>g.length?this.clone().ior(g):g.clone().ior(this)},s.prototype.uor=function(g){return this.length>g.length?this.clone().iuor(g):g.clone().iuor(this)},s.prototype.iuand=function(g){var _;this.length>g.length?_=g:_=this;for(var b=0;b<_.length;b++)this.words[b]=this.words[b]&g.words[b];return this.length=_.length,this._strip()},s.prototype.iand=function(g){return r((this.negative|g.negative)===0),this.iuand(g)},s.prototype.and=function(g){return this.length>g.length?this.clone().iand(g):g.clone().iand(this)},s.prototype.uand=function(g){return this.length>g.length?this.clone().iuand(g):g.clone().iuand(this)},s.prototype.iuxor=function(g){var _,b;this.length>g.length?(_=this,b=g):(_=g,b=this);for(var E=0;E<b.length;E++)this.words[E]=_.words[E]^b.words[E];if(this!==_)for(;E<_.length;E++)this.words[E]=_.words[E];return this.length=_.length,this._strip()},s.prototype.ixor=function(g){return r((this.negative|g.negative)===0),this.iuxor(g)},s.prototype.xor=function(g){return this.length>g.length?this.clone().ixor(g):g.clone().ixor(this)},s.prototype.uxor=function(g){return this.length>g.length?this.clone().iuxor(g):g.clone().iuxor(this)},s.prototype.inotn=function(g){r(typeof g=="number"&&g>=0);var _=Math.ceil(g/26)|0,b=g%26;this._expand(_),b>0&&_--;for(var E=0;E<_;E++)this.words[E]=~this.words[E]&67108863;return b>0&&(this.words[E]=~this.words[E]&67108863>>26-b),this._strip()},s.prototype.notn=function(g){return this.clone().inotn(g)},s.prototype.setn=function(g,_){r(typeof g=="number"&&g>=0);var b=g/26|0,E=g%26;return this._expand(b+1),_?this.words[b]=this.words[b]|1<<E:this.words[b]=this.words[b]&~(1<<E),this._strip()},s.prototype.iadd=function(g){var _;if(this.negative!==0&&g.negative===0)return this.negative=0,_=this.isub(g),this.negative^=1,this._normSign();if(this.negative===0&&g.negative!==0)return g.negative=0,_=this.isub(g),g.negative=1,_._normSign();var b,E;this.length>g.length?(b=this,E=g):(b=g,E=this);for(var R=0,L=0;L<E.length;L++)_=(b.words[L]|0)+(E.words[L]|0)+R,this.words[L]=_&67108863,R=_>>>26;for(;R!==0&&L<b.length;L++)_=(b.words[L]|0)+R,this.words[L]=_&67108863,R=_>>>26;if(this.length=b.length,R!==0)this.words[this.length]=R,this.length++;else if(b!==this)for(;L<b.length;L++)this.words[L]=b.words[L];return this},s.prototype.add=function(g){var _;return g.negative!==0&&this.negative===0?(g.negative=0,_=this.sub(g),g.negative^=1,_):g.negative===0&&this.negative!==0?(this.negative=0,_=g.sub(this),this.negative=1,_):this.length>g.length?this.clone().iadd(g):g.clone().iadd(this)},s.prototype.isub=function(g){if(g.negative!==0){g.negative=0;var _=this.iadd(g);return g.negative=1,_._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(g),this.negative=1,this._normSign();var b=this.cmp(g);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var E,R;b>0?(E=this,R=g):(E=g,R=this);for(var L=0,G=0;G<R.length;G++)_=(E.words[G]|0)-(R.words[G]|0)+L,L=_>>26,this.words[G]=_&67108863;for(;L!==0&&G<E.length;G++)_=(E.words[G]|0)+L,L=_>>26,this.words[G]=_&67108863;if(L===0&&G<E.length&&E!==this)for(;G<E.length;G++)this.words[G]=E.words[G];return this.length=Math.max(this.length,G),E!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(g){return this.clone().isub(g)};function h(M,g,_){_.negative=g.negative^M.negative;var b=M.length+g.length|0;_.length=b,b=b-1|0;var E=M.words[0]|0,R=g.words[0]|0,L=E*R,G=L&67108863,k=L/67108864|0;_.words[0]=G;for(var x=1;x<b;x++){for(var F=k>>>26,K=k&67108863,A=Math.min(x,g.length-1),X=Math.max(0,x-M.length+1);X<=A;X++){var V=x-X|0;E=M.words[V]|0,R=g.words[X]|0,L=E*R+K,F+=L/67108864|0,K=L&67108863}_.words[x]=K|0,k=F|0}return k!==0?_.words[x]=k|0:_.length--,_._strip()}var w=function(g,_,b){var E=g.words,R=_.words,L=b.words,G=0,k,x,F,K=E[0]|0,A=K&8191,X=K>>>13,V=E[1]|0,$=V&8191,ee=V>>>13,he=E[2]|0,pe=he&8191,de=he>>>13,Fe=E[3]|0,j=Fe&8191,Ue=Fe>>>13,et=E[4]|0,Ve=et&8191,Ie=et>>>13,Pt=E[5]|0,Se=Pt&8191,W=Pt>>>13,D=E[6]|0,te=D&8191,ue=D>>>13,Z=E[7]|0,ne=Z&8191,me=Z>>>13,Re=E[8]|0,we=Re&8191,Ke=Re>>>13,xe=E[9]|0,Te=xe&8191,ke=xe>>>13,tt=R[0]|0,Me=tt&8191,$e=tt>>>13,ut=R[1]|0,rt=ut&8191,Y=ut>>>13,Ne=R[2]|0,se=Ne&8191,fe=Ne>>>13,Be=R[3]|0,_e=Be&8191,We=Be>>>13,tn=R[4]|0,bt=tn&8191,Je=tn>>>13,Vn=R[5]|0,Ot=Vn&8191,ln=Vn>>>13,cs=R[6]|0,qt=cs&8191,cn=cs>>>13,ls=R[7]|0,un=ls&8191,nn=ls>>>13,us=R[8]|0,rn=us&8191,fn=us>>>13,fs=R[9]|0,pn=fs&8191,mn=fs>>>13;b.negative=g.negative^_.negative,b.length=19,k=Math.imul(A,Me),x=Math.imul(A,$e),x=x+Math.imul(X,Me)|0,F=Math.imul(X,$e);var ds=(G+k|0)+((x&8191)<<13)|0;G=(F+(x>>>13)|0)+(ds>>>26)|0,ds&=67108863,k=Math.imul($,Me),x=Math.imul($,$e),x=x+Math.imul(ee,Me)|0,F=Math.imul(ee,$e),k=k+Math.imul(A,rt)|0,x=x+Math.imul(A,Y)|0,x=x+Math.imul(X,rt)|0,F=F+Math.imul(X,Y)|0;var hs=(G+k|0)+((x&8191)<<13)|0;G=(F+(x>>>13)|0)+(hs>>>26)|0,hs&=67108863,k=Math.imul(pe,Me),x=Math.imul(pe,$e),x=x+Math.imul(de,Me)|0,F=Math.imul(de,$e),k=k+Math.imul($,rt)|0,x=x+Math.imul($,Y)|0,x=x+Math.imul(ee,rt)|0,F=F+Math.imul(ee,Y)|0,k=k+Math.imul(A,se)|0,x=x+Math.imul(A,fe)|0,x=x+Math.imul(X,se)|0,F=F+Math.imul(X,fe)|0;var ps=(G+k|0)+((x&8191)<<13)|0;G=(F+(x>>>13)|0)+(ps>>>26)|0,ps&=67108863,k=Math.imul(j,Me),x=Math.imul(j,$e),x=x+Math.imul(Ue,Me)|0,F=Math.imul(Ue,$e),k=k+Math.imul(pe,rt)|0,x=x+Math.imul(pe,Y)|0,x=x+Math.imul(de,rt)|0,F=F+Math.imul(de,Y)|0,k=k+Math.imul($,se)|0,x=x+Math.imul($,fe)|0,x=x+Math.imul(ee,se)|0,F=F+Math.imul(ee,fe)|0,k=k+Math.imul(A,_e)|0,x=x+Math.imul(A,We)|0,x=x+Math.imul(X,_e)|0,F=F+Math.imul(X,We)|0;var H=(G+k|0)+((x&8191)<<13)|0;G=(F+(x>>>13)|0)+(H>>>26)|0,H&=67108863,k=Math.imul(Ve,Me),x=Math.imul(Ve,$e),x=x+Math.imul(Ie,Me)|0,F=Math.imul(Ie,$e),k=k+Math.imul(j,rt)|0,x=x+Math.imul(j,Y)|0,x=x+Math.imul(Ue,rt)|0,F=F+Math.imul(Ue,Y)|0,k=k+Math.imul(pe,se)|0,x=x+Math.imul(pe,fe)|0,x=x+Math.imul(de,se)|0,F=F+Math.imul(de,fe)|0,k=k+Math.imul($,_e)|0,x=x+Math.imul($,We)|0,x=x+Math.imul(ee,_e)|0,F=F+Math.imul(ee,We)|0,k=k+Math.imul(A,bt)|0,x=x+Math.imul(A,Je)|0,x=x+Math.imul(X,bt)|0,F=F+Math.imul(X,Je)|0;var J=(G+k|0)+((x&8191)<<13)|0;G=(F+(x>>>13)|0)+(J>>>26)|0,J&=67108863,k=Math.imul(Se,Me),x=Math.imul(Se,$e),x=x+Math.imul(W,Me)|0,F=Math.imul(W,$e),k=k+Math.imul(Ve,rt)|0,x=x+Math.imul(Ve,Y)|0,x=x+Math.imul(Ie,rt)|0,F=F+Math.imul(Ie,Y)|0,k=k+Math.imul(j,se)|0,x=x+Math.imul(j,fe)|0,x=x+Math.imul(Ue,se)|0,F=F+Math.imul(Ue,fe)|0,k=k+Math.imul(pe,_e)|0,x=x+Math.imul(pe,We)|0,x=x+Math.imul(de,_e)|0,F=F+Math.imul(de,We)|0,k=k+Math.imul($,bt)|0,x=x+Math.imul($,Je)|0,x=x+Math.imul(ee,bt)|0,F=F+Math.imul(ee,Je)|0,k=k+Math.imul(A,Ot)|0,x=x+Math.imul(A,ln)|0,x=x+Math.imul(X,Ot)|0,F=F+Math.imul(X,ln)|0;var ae=(G+k|0)+((x&8191)<<13)|0;G=(F+(x>>>13)|0)+(ae>>>26)|0,ae&=67108863,k=Math.imul(te,Me),x=Math.imul(te,$e),x=x+Math.imul(ue,Me)|0,F=Math.imul(ue,$e),k=k+Math.imul(Se,rt)|0,x=x+Math.imul(Se,Y)|0,x=x+Math.imul(W,rt)|0,F=F+Math.imul(W,Y)|0,k=k+Math.imul(Ve,se)|0,x=x+Math.imul(Ve,fe)|0,x=x+Math.imul(Ie,se)|0,F=F+Math.imul(Ie,fe)|0,k=k+Math.imul(j,_e)|0,x=x+Math.imul(j,We)|0,x=x+Math.imul(Ue,_e)|0,F=F+Math.imul(Ue,We)|0,k=k+Math.imul(pe,bt)|0,x=x+Math.imul(pe,Je)|0,x=x+Math.imul(de,bt)|0,F=F+Math.imul(de,Je)|0,k=k+Math.imul($,Ot)|0,x=x+Math.imul($,ln)|0,x=x+Math.imul(ee,Ot)|0,F=F+Math.imul(ee,ln)|0,k=k+Math.imul(A,qt)|0,x=x+Math.imul(A,cn)|0,x=x+Math.imul(X,qt)|0,F=F+Math.imul(X,cn)|0;var ce=(G+k|0)+((x&8191)<<13)|0;G=(F+(x>>>13)|0)+(ce>>>26)|0,ce&=67108863,k=Math.imul(ne,Me),x=Math.imul(ne,$e),x=x+Math.imul(me,Me)|0,F=Math.imul(me,$e),k=k+Math.imul(te,rt)|0,x=x+Math.imul(te,Y)|0,x=x+Math.imul(ue,rt)|0,F=F+Math.imul(ue,Y)|0,k=k+Math.imul(Se,se)|0,x=x+Math.imul(Se,fe)|0,x=x+Math.imul(W,se)|0,F=F+Math.imul(W,fe)|0,k=k+Math.imul(Ve,_e)|0,x=x+Math.imul(Ve,We)|0,x=x+Math.imul(Ie,_e)|0,F=F+Math.imul(Ie,We)|0,k=k+Math.imul(j,bt)|0,x=x+Math.imul(j,Je)|0,x=x+Math.imul(Ue,bt)|0,F=F+Math.imul(Ue,Je)|0,k=k+Math.imul(pe,Ot)|0,x=x+Math.imul(pe,ln)|0,x=x+Math.imul(de,Ot)|0,F=F+Math.imul(de,ln)|0,k=k+Math.imul($,qt)|0,x=x+Math.imul($,cn)|0,x=x+Math.imul(ee,qt)|0,F=F+Math.imul(ee,cn)|0,k=k+Math.imul(A,un)|0,x=x+Math.imul(A,nn)|0,x=x+Math.imul(X,un)|0,F=F+Math.imul(X,nn)|0;var re=(G+k|0)+((x&8191)<<13)|0;G=(F+(x>>>13)|0)+(re>>>26)|0,re&=67108863,k=Math.imul(we,Me),x=Math.imul(we,$e),x=x+Math.imul(Ke,Me)|0,F=Math.imul(Ke,$e),k=k+Math.imul(ne,rt)|0,x=x+Math.imul(ne,Y)|0,x=x+Math.imul(me,rt)|0,F=F+Math.imul(me,Y)|0,k=k+Math.imul(te,se)|0,x=x+Math.imul(te,fe)|0,x=x+Math.imul(ue,se)|0,F=F+Math.imul(ue,fe)|0,k=k+Math.imul(Se,_e)|0,x=x+Math.imul(Se,We)|0,x=x+Math.imul(W,_e)|0,F=F+Math.imul(W,We)|0,k=k+Math.imul(Ve,bt)|0,x=x+Math.imul(Ve,Je)|0,x=x+Math.imul(Ie,bt)|0,F=F+Math.imul(Ie,Je)|0,k=k+Math.imul(j,Ot)|0,x=x+Math.imul(j,ln)|0,x=x+Math.imul(Ue,Ot)|0,F=F+Math.imul(Ue,ln)|0,k=k+Math.imul(pe,qt)|0,x=x+Math.imul(pe,cn)|0,x=x+Math.imul(de,qt)|0,F=F+Math.imul(de,cn)|0,k=k+Math.imul($,un)|0,x=x+Math.imul($,nn)|0,x=x+Math.imul(ee,un)|0,F=F+Math.imul(ee,nn)|0,k=k+Math.imul(A,rn)|0,x=x+Math.imul(A,fn)|0,x=x+Math.imul(X,rn)|0,F=F+Math.imul(X,fn)|0;var be=(G+k|0)+((x&8191)<<13)|0;G=(F+(x>>>13)|0)+(be>>>26)|0,be&=67108863,k=Math.imul(Te,Me),x=Math.imul(Te,$e),x=x+Math.imul(ke,Me)|0,F=Math.imul(ke,$e),k=k+Math.imul(we,rt)|0,x=x+Math.imul(we,Y)|0,x=x+Math.imul(Ke,rt)|0,F=F+Math.imul(Ke,Y)|0,k=k+Math.imul(ne,se)|0,x=x+Math.imul(ne,fe)|0,x=x+Math.imul(me,se)|0,F=F+Math.imul(me,fe)|0,k=k+Math.imul(te,_e)|0,x=x+Math.imul(te,We)|0,x=x+Math.imul(ue,_e)|0,F=F+Math.imul(ue,We)|0,k=k+Math.imul(Se,bt)|0,x=x+Math.imul(Se,Je)|0,x=x+Math.imul(W,bt)|0,F=F+Math.imul(W,Je)|0,k=k+Math.imul(Ve,Ot)|0,x=x+Math.imul(Ve,ln)|0,x=x+Math.imul(Ie,Ot)|0,F=F+Math.imul(Ie,ln)|0,k=k+Math.imul(j,qt)|0,x=x+Math.imul(j,cn)|0,x=x+Math.imul(Ue,qt)|0,F=F+Math.imul(Ue,cn)|0,k=k+Math.imul(pe,un)|0,x=x+Math.imul(pe,nn)|0,x=x+Math.imul(de,un)|0,F=F+Math.imul(de,nn)|0,k=k+Math.imul($,rn)|0,x=x+Math.imul($,fn)|0,x=x+Math.imul(ee,rn)|0,F=F+Math.imul(ee,fn)|0,k=k+Math.imul(A,pn)|0,x=x+Math.imul(A,mn)|0,x=x+Math.imul(X,pn)|0,F=F+Math.imul(X,mn)|0;var Le=(G+k|0)+((x&8191)<<13)|0;G=(F+(x>>>13)|0)+(Le>>>26)|0,Le&=67108863,k=Math.imul(Te,rt),x=Math.imul(Te,Y),x=x+Math.imul(ke,rt)|0,F=Math.imul(ke,Y),k=k+Math.imul(we,se)|0,x=x+Math.imul(we,fe)|0,x=x+Math.imul(Ke,se)|0,F=F+Math.imul(Ke,fe)|0,k=k+Math.imul(ne,_e)|0,x=x+Math.imul(ne,We)|0,x=x+Math.imul(me,_e)|0,F=F+Math.imul(me,We)|0,k=k+Math.imul(te,bt)|0,x=x+Math.imul(te,Je)|0,x=x+Math.imul(ue,bt)|0,F=F+Math.imul(ue,Je)|0,k=k+Math.imul(Se,Ot)|0,x=x+Math.imul(Se,ln)|0,x=x+Math.imul(W,Ot)|0,F=F+Math.imul(W,ln)|0,k=k+Math.imul(Ve,qt)|0,x=x+Math.imul(Ve,cn)|0,x=x+Math.imul(Ie,qt)|0,F=F+Math.imul(Ie,cn)|0,k=k+Math.imul(j,un)|0,x=x+Math.imul(j,nn)|0,x=x+Math.imul(Ue,un)|0,F=F+Math.imul(Ue,nn)|0,k=k+Math.imul(pe,rn)|0,x=x+Math.imul(pe,fn)|0,x=x+Math.imul(de,rn)|0,F=F+Math.imul(de,fn)|0,k=k+Math.imul($,pn)|0,x=x+Math.imul($,mn)|0,x=x+Math.imul(ee,pn)|0,F=F+Math.imul(ee,mn)|0;var ze=(G+k|0)+((x&8191)<<13)|0;G=(F+(x>>>13)|0)+(ze>>>26)|0,ze&=67108863,k=Math.imul(Te,se),x=Math.imul(Te,fe),x=x+Math.imul(ke,se)|0,F=Math.imul(ke,fe),k=k+Math.imul(we,_e)|0,x=x+Math.imul(we,We)|0,x=x+Math.imul(Ke,_e)|0,F=F+Math.imul(Ke,We)|0,k=k+Math.imul(ne,bt)|0,x=x+Math.imul(ne,Je)|0,x=x+Math.imul(me,bt)|0,F=F+Math.imul(me,Je)|0,k=k+Math.imul(te,Ot)|0,x=x+Math.imul(te,ln)|0,x=x+Math.imul(ue,Ot)|0,F=F+Math.imul(ue,ln)|0,k=k+Math.imul(Se,qt)|0,x=x+Math.imul(Se,cn)|0,x=x+Math.imul(W,qt)|0,F=F+Math.imul(W,cn)|0,k=k+Math.imul(Ve,un)|0,x=x+Math.imul(Ve,nn)|0,x=x+Math.imul(Ie,un)|0,F=F+Math.imul(Ie,nn)|0,k=k+Math.imul(j,rn)|0,x=x+Math.imul(j,fn)|0,x=x+Math.imul(Ue,rn)|0,F=F+Math.imul(Ue,fn)|0,k=k+Math.imul(pe,pn)|0,x=x+Math.imul(pe,mn)|0,x=x+Math.imul(de,pn)|0,F=F+Math.imul(de,mn)|0;var je=(G+k|0)+((x&8191)<<13)|0;G=(F+(x>>>13)|0)+(je>>>26)|0,je&=67108863,k=Math.imul(Te,_e),x=Math.imul(Te,We),x=x+Math.imul(ke,_e)|0,F=Math.imul(ke,We),k=k+Math.imul(we,bt)|0,x=x+Math.imul(we,Je)|0,x=x+Math.imul(Ke,bt)|0,F=F+Math.imul(Ke,Je)|0,k=k+Math.imul(ne,Ot)|0,x=x+Math.imul(ne,ln)|0,x=x+Math.imul(me,Ot)|0,F=F+Math.imul(me,ln)|0,k=k+Math.imul(te,qt)|0,x=x+Math.imul(te,cn)|0,x=x+Math.imul(ue,qt)|0,F=F+Math.imul(ue,cn)|0,k=k+Math.imul(Se,un)|0,x=x+Math.imul(Se,nn)|0,x=x+Math.imul(W,un)|0,F=F+Math.imul(W,nn)|0,k=k+Math.imul(Ve,rn)|0,x=x+Math.imul(Ve,fn)|0,x=x+Math.imul(Ie,rn)|0,F=F+Math.imul(Ie,fn)|0,k=k+Math.imul(j,pn)|0,x=x+Math.imul(j,mn)|0,x=x+Math.imul(Ue,pn)|0,F=F+Math.imul(Ue,mn)|0;var ct=(G+k|0)+((x&8191)<<13)|0;G=(F+(x>>>13)|0)+(ct>>>26)|0,ct&=67108863,k=Math.imul(Te,bt),x=Math.imul(Te,Je),x=x+Math.imul(ke,bt)|0,F=Math.imul(ke,Je),k=k+Math.imul(we,Ot)|0,x=x+Math.imul(we,ln)|0,x=x+Math.imul(Ke,Ot)|0,F=F+Math.imul(Ke,ln)|0,k=k+Math.imul(ne,qt)|0,x=x+Math.imul(ne,cn)|0,x=x+Math.imul(me,qt)|0,F=F+Math.imul(me,cn)|0,k=k+Math.imul(te,un)|0,x=x+Math.imul(te,nn)|0,x=x+Math.imul(ue,un)|0,F=F+Math.imul(ue,nn)|0,k=k+Math.imul(Se,rn)|0,x=x+Math.imul(Se,fn)|0,x=x+Math.imul(W,rn)|0,F=F+Math.imul(W,fn)|0,k=k+Math.imul(Ve,pn)|0,x=x+Math.imul(Ve,mn)|0,x=x+Math.imul(Ie,pn)|0,F=F+Math.imul(Ie,mn)|0;var ft=(G+k|0)+((x&8191)<<13)|0;G=(F+(x>>>13)|0)+(ft>>>26)|0,ft&=67108863,k=Math.imul(Te,Ot),x=Math.imul(Te,ln),x=x+Math.imul(ke,Ot)|0,F=Math.imul(ke,ln),k=k+Math.imul(we,qt)|0,x=x+Math.imul(we,cn)|0,x=x+Math.imul(Ke,qt)|0,F=F+Math.imul(Ke,cn)|0,k=k+Math.imul(ne,un)|0,x=x+Math.imul(ne,nn)|0,x=x+Math.imul(me,un)|0,F=F+Math.imul(me,nn)|0,k=k+Math.imul(te,rn)|0,x=x+Math.imul(te,fn)|0,x=x+Math.imul(ue,rn)|0,F=F+Math.imul(ue,fn)|0,k=k+Math.imul(Se,pn)|0,x=x+Math.imul(Se,mn)|0,x=x+Math.imul(W,pn)|0,F=F+Math.imul(W,mn)|0;var Ze=(G+k|0)+((x&8191)<<13)|0;G=(F+(x>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,k=Math.imul(Te,qt),x=Math.imul(Te,cn),x=x+Math.imul(ke,qt)|0,F=Math.imul(ke,cn),k=k+Math.imul(we,un)|0,x=x+Math.imul(we,nn)|0,x=x+Math.imul(Ke,un)|0,F=F+Math.imul(Ke,nn)|0,k=k+Math.imul(ne,rn)|0,x=x+Math.imul(ne,fn)|0,x=x+Math.imul(me,rn)|0,F=F+Math.imul(me,fn)|0,k=k+Math.imul(te,pn)|0,x=x+Math.imul(te,mn)|0,x=x+Math.imul(ue,pn)|0,F=F+Math.imul(ue,mn)|0;var Nt=(G+k|0)+((x&8191)<<13)|0;G=(F+(x>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,k=Math.imul(Te,un),x=Math.imul(Te,nn),x=x+Math.imul(ke,un)|0,F=Math.imul(ke,nn),k=k+Math.imul(we,rn)|0,x=x+Math.imul(we,fn)|0,x=x+Math.imul(Ke,rn)|0,F=F+Math.imul(Ke,fn)|0,k=k+Math.imul(ne,pn)|0,x=x+Math.imul(ne,mn)|0,x=x+Math.imul(me,pn)|0,F=F+Math.imul(me,mn)|0;var zt=(G+k|0)+((x&8191)<<13)|0;G=(F+(x>>>13)|0)+(zt>>>26)|0,zt&=67108863,k=Math.imul(Te,rn),x=Math.imul(Te,fn),x=x+Math.imul(ke,rn)|0,F=Math.imul(ke,fn),k=k+Math.imul(we,pn)|0,x=x+Math.imul(we,mn)|0,x=x+Math.imul(Ke,pn)|0,F=F+Math.imul(Ke,mn)|0;var An=(G+k|0)+((x&8191)<<13)|0;G=(F+(x>>>13)|0)+(An>>>26)|0,An&=67108863,k=Math.imul(Te,pn),x=Math.imul(Te,mn),x=x+Math.imul(ke,pn)|0,F=Math.imul(ke,mn);var vn=(G+k|0)+((x&8191)<<13)|0;return G=(F+(x>>>13)|0)+(vn>>>26)|0,vn&=67108863,L[0]=ds,L[1]=hs,L[2]=ps,L[3]=H,L[4]=J,L[5]=ae,L[6]=ce,L[7]=re,L[8]=be,L[9]=Le,L[10]=ze,L[11]=je,L[12]=ct,L[13]=ft,L[14]=Ze,L[15]=Nt,L[16]=zt,L[17]=An,L[18]=vn,G!==0&&(L[19]=G,b.length++),b};Math.imul||(w=h);function S(M,g,_){_.negative=g.negative^M.negative,_.length=M.length+g.length;for(var b=0,E=0,R=0;R<_.length-1;R++){var L=E;E=0;for(var G=b&67108863,k=Math.min(R,g.length-1),x=Math.max(0,R-M.length+1);x<=k;x++){var F=R-x,K=M.words[F]|0,A=g.words[x]|0,X=K*A,V=X&67108863;L=L+(X/67108864|0)|0,V=V+G|0,G=V&67108863,L=L+(V>>>26)|0,E+=L>>>26,L&=67108863}_.words[R]=G,b=L,L=E}return b!==0?_.words[R]=b:_.length--,_._strip()}function T(M,g,_){return S(M,g,_)}s.prototype.mulTo=function(g,_){var b,E=this.length+g.length;return this.length===10&&g.length===10?b=w(this,g,_):E<63?b=h(this,g,_):E<1024?b=S(this,g,_):b=T(this,g,_),b},s.prototype.mul=function(g){var _=new s(null);return _.words=new Array(this.length+g.length),this.mulTo(g,_)},s.prototype.mulf=function(g){var _=new s(null);return _.words=new Array(this.length+g.length),T(this,g,_)},s.prototype.imul=function(g){return this.clone().mulTo(g,this)},s.prototype.imuln=function(g){var _=g<0;_&&(g=-g),r(typeof g=="number"),r(g<67108864);for(var b=0,E=0;E<this.length;E++){var R=(this.words[E]|0)*g,L=(R&67108863)+(b&67108863);b>>=26,b+=R/67108864|0,b+=L>>>26,this.words[E]=L&67108863}return b!==0&&(this.words[E]=b,this.length++),_?this.ineg():this},s.prototype.muln=function(g){return this.clone().imuln(g)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(g){var _=y(g);if(_.length===0)return new s(1);for(var b=this,E=0;E<_.length&&_[E]===0;E++,b=b.sqr());if(++E<_.length)for(var R=b.sqr();E<_.length;E++,R=R.sqr())_[E]!==0&&(b=b.mul(R));return b},s.prototype.iushln=function(g){r(typeof g=="number"&&g>=0);var _=g%26,b=(g-_)/26,E=67108863>>>26-_<<26-_,R;if(_!==0){var L=0;for(R=0;R<this.length;R++){var G=this.words[R]&E,k=(this.words[R]|0)-G<<_;this.words[R]=k|L,L=G>>>26-_}L&&(this.words[R]=L,this.length++)}if(b!==0){for(R=this.length-1;R>=0;R--)this.words[R+b]=this.words[R];for(R=0;R<b;R++)this.words[R]=0;this.length+=b}return this._strip()},s.prototype.ishln=function(g){return r(this.negative===0),this.iushln(g)},s.prototype.iushrn=function(g,_,b){r(typeof g=="number"&&g>=0);var E;_?E=(_-_%26)/26:E=0;var R=g%26,L=Math.min((g-R)/26,this.length),G=67108863^67108863>>>R<<R,k=b;if(E-=L,E=Math.max(0,E),k){for(var x=0;x<L;x++)k.words[x]=this.words[x];k.length=L}if(L!==0)if(this.length>L)for(this.length-=L,x=0;x<this.length;x++)this.words[x]=this.words[x+L];else this.words[0]=0,this.length=1;var F=0;for(x=this.length-1;x>=0&&(F!==0||x>=E);x--){var K=this.words[x]|0;this.words[x]=F<<26-R|K>>>R,F=K&G}return k&&F!==0&&(k.words[k.length++]=F),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(g,_,b){return r(this.negative===0),this.iushrn(g,_,b)},s.prototype.shln=function(g){return this.clone().ishln(g)},s.prototype.ushln=function(g){return this.clone().iushln(g)},s.prototype.shrn=function(g){return this.clone().ishrn(g)},s.prototype.ushrn=function(g){return this.clone().iushrn(g)},s.prototype.testn=function(g){r(typeof g=="number"&&g>=0);var _=g%26,b=(g-_)/26,E=1<<_;if(this.length<=b)return!1;var R=this.words[b];return!!(R&E)},s.prototype.imaskn=function(g){r(typeof g=="number"&&g>=0);var _=g%26,b=(g-_)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(_!==0&&b++,this.length=Math.min(b,this.length),_!==0){var E=67108863^67108863>>>_<<_;this.words[this.length-1]&=E}return this._strip()},s.prototype.maskn=function(g){return this.clone().imaskn(g)},s.prototype.iaddn=function(g){return r(typeof g=="number"),r(g<67108864),g<0?this.isubn(-g):this.negative!==0?this.length===1&&(this.words[0]|0)<=g?(this.words[0]=g-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(g),this.negative=1,this):this._iaddn(g)},s.prototype._iaddn=function(g){this.words[0]+=g;for(var _=0;_<this.length&&this.words[_]>=67108864;_++)this.words[_]-=67108864,_===this.length-1?this.words[_+1]=1:this.words[_+1]++;return this.length=Math.max(this.length,_+1),this},s.prototype.isubn=function(g){if(r(typeof g=="number"),r(g<67108864),g<0)return this.iaddn(-g);if(this.negative!==0)return this.negative=0,this.iaddn(g),this.negative=1,this;if(this.words[0]-=g,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var _=0;_<this.length&&this.words[_]<0;_++)this.words[_]+=67108864,this.words[_+1]-=1;return this._strip()},s.prototype.addn=function(g){return this.clone().iaddn(g)},s.prototype.subn=function(g){return this.clone().isubn(g)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(g,_,b){var E=g.length+b,R;this._expand(E);var L,G=0;for(R=0;R<g.length;R++){L=(this.words[R+b]|0)+G;var k=(g.words[R]|0)*_;L-=k&67108863,G=(L>>26)-(k/67108864|0),this.words[R+b]=L&67108863}for(;R<this.length-b;R++)L=(this.words[R+b]|0)+G,G=L>>26,this.words[R+b]=L&67108863;if(G===0)return this._strip();for(r(G===-1),G=0,R=0;R<this.length;R++)L=-(this.words[R]|0)+G,G=L>>26,this.words[R]=L&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(g,_){var b=this.length-g.length,E=this.clone(),R=g,L=R.words[R.length-1]|0,G=this._countBits(L);b=26-G,b!==0&&(R=R.ushln(b),E.iushln(b),L=R.words[R.length-1]|0);var k=E.length-R.length,x;if(_!=="mod"){x=new s(null),x.length=k+1,x.words=new Array(x.length);for(var F=0;F<x.length;F++)x.words[F]=0}var K=E.clone()._ishlnsubmul(R,1,k);K.negative===0&&(E=K,x&&(x.words[k]=1));for(var A=k-1;A>=0;A--){var X=(E.words[R.length+A]|0)*67108864+(E.words[R.length+A-1]|0);for(X=Math.min(X/L|0,67108863),E._ishlnsubmul(R,X,A);E.negative!==0;)X--,E.negative=0,E._ishlnsubmul(R,1,A),E.isZero()||(E.negative^=1);x&&(x.words[A]=X)}return x&&x._strip(),E._strip(),_!=="div"&&b!==0&&E.iushrn(b),{div:x||null,mod:E}},s.prototype.divmod=function(g,_,b){if(r(!g.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var E,R,L;return this.negative!==0&&g.negative===0?(L=this.neg().divmod(g,_),_!=="mod"&&(E=L.div.neg()),_!=="div"&&(R=L.mod.neg(),b&&R.negative!==0&&R.iadd(g)),{div:E,mod:R}):this.negative===0&&g.negative!==0?(L=this.divmod(g.neg(),_),_!=="mod"&&(E=L.div.neg()),{div:E,mod:L.mod}):this.negative&g.negative?(L=this.neg().divmod(g.neg(),_),_!=="div"&&(R=L.mod.neg(),b&&R.negative!==0&&R.isub(g)),{div:L.div,mod:R}):g.length>this.length||this.cmp(g)<0?{div:new s(0),mod:this}:g.length===1?_==="div"?{div:this.divn(g.words[0]),mod:null}:_==="mod"?{div:null,mod:new s(this.modrn(g.words[0]))}:{div:this.divn(g.words[0]),mod:new s(this.modrn(g.words[0]))}:this._wordDiv(g,_)},s.prototype.div=function(g){return this.divmod(g,"div",!1).div},s.prototype.mod=function(g){return this.divmod(g,"mod",!1).mod},s.prototype.umod=function(g){return this.divmod(g,"mod",!0).mod},s.prototype.divRound=function(g){var _=this.divmod(g);if(_.mod.isZero())return _.div;var b=_.div.negative!==0?_.mod.isub(g):_.mod,E=g.ushrn(1),R=g.andln(1),L=b.cmp(E);return L<0||R===1&&L===0?_.div:_.div.negative!==0?_.div.isubn(1):_.div.iaddn(1)},s.prototype.modrn=function(g){var _=g<0;_&&(g=-g),r(g<=67108863);for(var b=(1<<26)%g,E=0,R=this.length-1;R>=0;R--)E=(b*E+(this.words[R]|0))%g;return _?-E:E},s.prototype.modn=function(g){return this.modrn(g)},s.prototype.idivn=function(g){var _=g<0;_&&(g=-g),r(g<=67108863);for(var b=0,E=this.length-1;E>=0;E--){var R=(this.words[E]|0)+b*67108864;this.words[E]=R/g|0,b=R%g}return this._strip(),_?this.ineg():this},s.prototype.divn=function(g){return this.clone().idivn(g)},s.prototype.egcd=function(g){r(g.negative===0),r(!g.isZero());var _=this,b=g.clone();_.negative!==0?_=_.umod(g):_=_.clone();for(var E=new s(1),R=new s(0),L=new s(0),G=new s(1),k=0;_.isEven()&&b.isEven();)_.iushrn(1),b.iushrn(1),++k;for(var x=b.clone(),F=_.clone();!_.isZero();){for(var K=0,A=1;!(_.words[0]&A)&&K<26;++K,A<<=1);if(K>0)for(_.iushrn(K);K-- >0;)(E.isOdd()||R.isOdd())&&(E.iadd(x),R.isub(F)),E.iushrn(1),R.iushrn(1);for(var X=0,V=1;!(b.words[0]&V)&&X<26;++X,V<<=1);if(X>0)for(b.iushrn(X);X-- >0;)(L.isOdd()||G.isOdd())&&(L.iadd(x),G.isub(F)),L.iushrn(1),G.iushrn(1);_.cmp(b)>=0?(_.isub(b),E.isub(L),R.isub(G)):(b.isub(_),L.isub(E),G.isub(R))}return{a:L,b:G,gcd:b.iushln(k)}},s.prototype._invmp=function(g){r(g.negative===0),r(!g.isZero());var _=this,b=g.clone();_.negative!==0?_=_.umod(g):_=_.clone();for(var E=new s(1),R=new s(0),L=b.clone();_.cmpn(1)>0&&b.cmpn(1)>0;){for(var G=0,k=1;!(_.words[0]&k)&&G<26;++G,k<<=1);if(G>0)for(_.iushrn(G);G-- >0;)E.isOdd()&&E.iadd(L),E.iushrn(1);for(var x=0,F=1;!(b.words[0]&F)&&x<26;++x,F<<=1);if(x>0)for(b.iushrn(x);x-- >0;)R.isOdd()&&R.iadd(L),R.iushrn(1);_.cmp(b)>=0?(_.isub(b),E.isub(R)):(b.isub(_),R.isub(E))}var K;return _.cmpn(1)===0?K=E:K=R,K.cmpn(0)<0&&K.iadd(g),K},s.prototype.gcd=function(g){if(this.isZero())return g.abs();if(g.isZero())return this.abs();var _=this.clone(),b=g.clone();_.negative=0,b.negative=0;for(var E=0;_.isEven()&&b.isEven();E++)_.iushrn(1),b.iushrn(1);do{for(;_.isEven();)_.iushrn(1);for(;b.isEven();)b.iushrn(1);var R=_.cmp(b);if(R<0){var L=_;_=b,b=L}else if(R===0||b.cmpn(1)===0)break;_.isub(b)}while(!0);return b.iushln(E)},s.prototype.invm=function(g){return this.egcd(g).a.umod(g)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(g){return this.words[0]&g},s.prototype.bincn=function(g){r(typeof g=="number");var _=g%26,b=(g-_)/26,E=1<<_;if(this.length<=b)return this._expand(b+1),this.words[b]|=E,this;for(var R=E,L=b;R!==0&&L<this.length;L++){var G=this.words[L]|0;G+=R,R=G>>>26,G&=67108863,this.words[L]=G}return R!==0&&(this.words[L]=R,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(g){var _=g<0;if(this.negative!==0&&!_)return-1;if(this.negative===0&&_)return 1;this._strip();var b;if(this.length>1)b=1;else{_&&(g=-g),r(g<=67108863,"Number is too big");var E=this.words[0]|0;b=E===g?0:E<g?-1:1}return this.negative!==0?-b|0:b},s.prototype.cmp=function(g){if(this.negative!==0&&g.negative===0)return-1;if(this.negative===0&&g.negative!==0)return 1;var _=this.ucmp(g);return this.negative!==0?-_|0:_},s.prototype.ucmp=function(g){if(this.length>g.length)return 1;if(this.length<g.length)return-1;for(var _=0,b=this.length-1;b>=0;b--){var E=this.words[b]|0,R=g.words[b]|0;if(E!==R){E<R?_=-1:E>R&&(_=1);break}}return _},s.prototype.gtn=function(g){return this.cmpn(g)===1},s.prototype.gt=function(g){return this.cmp(g)===1},s.prototype.gten=function(g){return this.cmpn(g)>=0},s.prototype.gte=function(g){return this.cmp(g)>=0},s.prototype.ltn=function(g){return this.cmpn(g)===-1},s.prototype.lt=function(g){return this.cmp(g)===-1},s.prototype.lten=function(g){return this.cmpn(g)<=0},s.prototype.lte=function(g){return this.cmp(g)<=0},s.prototype.eqn=function(g){return this.cmpn(g)===0},s.prototype.eq=function(g){return this.cmp(g)===0},s.red=function(g){return new U(g)},s.prototype.toRed=function(g){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),g.convertTo(this)._forceRed(g)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(g){return this.red=g,this},s.prototype.forceRed=function(g){return r(!this.red,"Already a number in reduction context"),this._forceRed(g)},s.prototype.redAdd=function(g){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,g)},s.prototype.redIAdd=function(g){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,g)},s.prototype.redSub=function(g){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,g)},s.prototype.redISub=function(g){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,g)},s.prototype.redShl=function(g){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,g)},s.prototype.redMul=function(g){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.mul(this,g)},s.prototype.redIMul=function(g){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.imul(this,g)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(g){return r(this.red&&!g.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,g)};var C={k256:null,p224:null,p192:null,p25519:null};function B(M,g){this.name=M,this.p=new s(g,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}B.prototype._tmp=function(){var g=new s(null);return g.words=new Array(Math.ceil(this.n/13)),g},B.prototype.ireduce=function(g){var _=g,b;do this.split(_,this.tmp),_=this.imulK(_),_=_.iadd(this.tmp),b=_.bitLength();while(b>this.n);var E=b<this.n?-1:_.ucmp(this.p);return E===0?(_.words[0]=0,_.length=1):E>0?_.isub(this.p):_.strip!==void 0?_.strip():_._strip(),_},B.prototype.split=function(g,_){g.iushrn(this.n,0,_)},B.prototype.imulK=function(g){return g.imul(this.k)};function O(){B.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(O,B),O.prototype.split=function(g,_){for(var b=4194303,E=Math.min(g.length,9),R=0;R<E;R++)_.words[R]=g.words[R];if(_.length=E,g.length<=9){g.words[0]=0,g.length=1;return}var L=g.words[9];for(_.words[_.length++]=L&b,R=10;R<g.length;R++){var G=g.words[R]|0;g.words[R-10]=(G&b)<<4|L>>>22,L=G}L>>>=22,g.words[R-10]=L,L===0&&g.length>10?g.length-=10:g.length-=9},O.prototype.imulK=function(g){g.words[g.length]=0,g.words[g.length+1]=0,g.length+=2;for(var _=0,b=0;b<g.length;b++){var E=g.words[b]|0;_+=E*977,g.words[b]=_&67108863,_=E*64+(_/67108864|0)}return g.words[g.length-1]===0&&(g.length--,g.words[g.length-1]===0&&g.length--),g};function P(){B.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(P,B);function N(){B.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(N,B);function I(){B.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(I,B),I.prototype.imulK=function(g){for(var _=0,b=0;b<g.length;b++){var E=(g.words[b]|0)*19+_,R=E&67108863;E>>>=26,g.words[b]=R,_=E}return _!==0&&(g.words[g.length++]=_),g},s._prime=function(g){if(C[g])return C[g];var _;if(g==="k256")_=new O;else if(g==="p224")_=new P;else if(g==="p192")_=new N;else if(g==="p25519")_=new I;else throw new Error("Unknown prime "+g);return C[g]=_,_};function U(M){if(typeof M=="string"){var g=s._prime(M);this.m=g.p,this.prime=g}else r(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}U.prototype._verify1=function(g){r(g.negative===0,"red works only with positives"),r(g.red,"red works only with red numbers")},U.prototype._verify2=function(g,_){r((g.negative|_.negative)===0,"red works only with positives"),r(g.red&&g.red===_.red,"red works only with red numbers")},U.prototype.imod=function(g){return this.prime?this.prime.ireduce(g)._forceRed(this):(u(g,g.umod(this.m)._forceRed(this)),g)},U.prototype.neg=function(g){return g.isZero()?g.clone():this.m.sub(g)._forceRed(this)},U.prototype.add=function(g,_){this._verify2(g,_);var b=g.add(_);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},U.prototype.iadd=function(g,_){this._verify2(g,_);var b=g.iadd(_);return b.cmp(this.m)>=0&&b.isub(this.m),b},U.prototype.sub=function(g,_){this._verify2(g,_);var b=g.sub(_);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},U.prototype.isub=function(g,_){this._verify2(g,_);var b=g.isub(_);return b.cmpn(0)<0&&b.iadd(this.m),b},U.prototype.shl=function(g,_){return this._verify1(g),this.imod(g.ushln(_))},U.prototype.imul=function(g,_){return this._verify2(g,_),this.imod(g.imul(_))},U.prototype.mul=function(g,_){return this._verify2(g,_),this.imod(g.mul(_))},U.prototype.isqr=function(g){return this.imul(g,g.clone())},U.prototype.sqr=function(g){return this.mul(g,g)},U.prototype.sqrt=function(g){if(g.isZero())return g.clone();var _=this.m.andln(3);if(r(_%2===1),_===3){var b=this.m.add(new s(1)).iushrn(2);return this.pow(g,b)}for(var E=this.m.subn(1),R=0;!E.isZero()&&E.andln(1)===0;)R++,E.iushrn(1);r(!E.isZero());var L=new s(1).toRed(this),G=L.redNeg(),k=this.m.subn(1).iushrn(1),x=this.m.bitLength();for(x=new s(2*x*x).toRed(this);this.pow(x,k).cmp(G)!==0;)x.redIAdd(G);for(var F=this.pow(x,E),K=this.pow(g,E.addn(1).iushrn(1)),A=this.pow(g,E),X=R;A.cmp(L)!==0;){for(var V=A,$=0;V.cmp(L)!==0;$++)V=V.redSqr();r($<X);var ee=this.pow(F,new s(1).iushln(X-$-1));K=K.redMul(ee),F=ee.redSqr(),A=A.redMul(F),X=$}return K},U.prototype.invm=function(g){var _=g._invmp(this.m);return _.negative!==0?(_.negative=0,this.imod(_).redNeg()):this.imod(_)},U.prototype.pow=function(g,_){if(_.isZero())return new s(1).toRed(this);if(_.cmpn(1)===0)return g.clone();var b=4,E=new Array(1<<b);E[0]=new s(1).toRed(this),E[1]=g;for(var R=2;R<E.length;R++)E[R]=this.mul(E[R-1],g);var L=E[0],G=0,k=0,x=_.bitLength()%26;for(x===0&&(x=26),R=_.length-1;R>=0;R--){for(var F=_.words[R],K=x-1;K>=0;K--){var A=F>>K&1;if(L!==E[0]&&(L=this.sqr(L)),A===0&&G===0){k=0;continue}G<<=1,G|=A,k++,!(k!==b&&(R!==0||K!==0))&&(L=this.mul(L,E[G]),k=0,G=0)}x=26}return L},U.prototype.convertTo=function(g){var _=g.umod(this.m);return _===g?_.clone():_},U.prototype.convertFrom=function(g){var _=g.clone();return _.red=null,_},s.mont=function(g){return new q(g)};function q(M){U.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(q,U),q.prototype.convertTo=function(g){return this.imod(g.ushln(this.shift))},q.prototype.convertFrom=function(g){var _=this.imod(g.mul(this.rinv));return _.red=null,_},q.prototype.imul=function(g,_){if(g.isZero()||_.isZero())return g.words[0]=0,g.length=1,g;var b=g.imul(_),E=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=b.isub(E).iushrn(this.shift),L=R;return R.cmp(this.m)>=0?L=R.isub(this.m):R.cmpn(0)<0&&(L=R.iadd(this.m)),L._forceRed(this)},q.prototype.mul=function(g,_){if(g.isZero()||_.isZero())return new s(0)._forceRed(this);var b=g.mul(_),E=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=b.isub(E).iushrn(this.shift),L=R;return R.cmp(this.m)>=0?L=R.isub(this.m):R.cmpn(0)<0&&(L=R.iadd(this.m)),L._forceRed(this)},q.prototype.invm=function(g){var _=this.imod(g._invmp(this.m).mul(this.r2));return _._forceRed(this)}})(n,Ao)})(yx);var bJ=yx.exports;const _t=zc(bJ),xJ="logger/5.7.0";let m1=!1,g1=!1;const cp={debug:1,default:2,info:2,warning:3,error:4,off:5};let v1=cp.default,Jg=null;function wJ(){try{const n=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{n.push(e)}}),n.length)throw new Error("missing "+n.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(n){return n.message}return null}const y1=wJ();var o_;(function(n){n.DEBUG="DEBUG",n.INFO="INFO",n.WARNING="WARNING",n.ERROR="ERROR",n.OFF="OFF"})(o_||(o_={}));var Ki;(function(n){n.UNKNOWN_ERROR="UNKNOWN_ERROR",n.NOT_IMPLEMENTED="NOT_IMPLEMENTED",n.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.TIMEOUT="TIMEOUT",n.BUFFER_OVERRUN="BUFFER_OVERRUN",n.NUMERIC_FAULT="NUMERIC_FAULT",n.MISSING_NEW="MISSING_NEW",n.INVALID_ARGUMENT="INVALID_ARGUMENT",n.MISSING_ARGUMENT="MISSING_ARGUMENT",n.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",n.CALL_EXCEPTION="CALL_EXCEPTION",n.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",n.NONCE_EXPIRED="NONCE_EXPIRED",n.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",n.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",n.TRANSACTION_REPLACED="TRANSACTION_REPLACED",n.ACTION_REJECTED="ACTION_REJECTED"})(Ki||(Ki={}));const _1="0123456789abcdef";class ie{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();cp[r]==null&&this.throwArgumentError("invalid log level name","logLevel",e),v1>cp[r]}debug(...e){this._log(ie.levels.DEBUG,e)}info(...e){this._log(ie.levels.INFO,e)}warn(...e){this._log(ie.levels.WARNING,e)}makeError(e,t,r){if(g1)return this.makeError("censored error",t,{});t||(t=ie.errors.UNKNOWN_ERROR),r||(r={});const i=[];Object.keys(r).forEach(c=>{const l=r[c];try{if(l instanceof Uint8Array){let u="";for(let f=0;f<l.length;f++)u+=_1[l[f]>>4],u+=_1[l[f]&15];i.push(c+"=Uint8Array(0x"+u+")")}else i.push(c+"="+JSON.stringify(l))}catch{i.push(c+"="+JSON.stringify(r[c].toString()))}}),i.push(`code=${t}`),i.push(`version=${this.version}`);const s=e;let o="";switch(t){case Ki.NUMERIC_FAULT:{o="NUMERIC_FAULT";const c=e;switch(c){case"overflow":case"underflow":case"division-by-zero":o+="-"+c;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case Ki.CALL_EXCEPTION:case Ki.INSUFFICIENT_FUNDS:case Ki.MISSING_NEW:case Ki.NONCE_EXPIRED:case Ki.REPLACEMENT_UNDERPRICED:case Ki.TRANSACTION_REPLACED:case Ki.UNPREDICTABLE_GAS_LIMIT:o=t;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const a=new Error(e);return a.reason=s,a.code=t,Object.keys(r).forEach(function(c){a[c]=r[c]}),a}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,ie.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,i){e||this.throwError(t,r,i)}assertArgument(e,t,r,i){e||this.throwArgumentError(t,r,i)}checkNormalize(e){y1&&this.throwError("platform missing String.prototype.normalize",ie.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:y1})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,ie.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,ie.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r?r=": "+r:r="",e<t&&this.throwError("missing argument"+r,ie.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,ie.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",ie.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",ie.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",ie.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Jg||(Jg=new ie(xJ)),Jg}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",ie.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),m1){if(!e)return;this.globalLogger().throwError("error censorship permanent",ie.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}g1=!!e,m1=!!t}static setLogLevel(e){const t=cp[e.toLowerCase()];if(t==null){ie.globalLogger().warn("invalid log level - "+e);return}v1=t}static from(e){return new ie(e)}}ie.errors=Ki;ie.levels=o_;const AJ="bytes/5.7.0",Pn=new ie(AJ);function BI(n){return!!n.toHexString}function Wl(n){return n.slice||(n.slice=function(){const e=Array.prototype.slice.call(arguments);return Wl(new Uint8Array(Array.prototype.slice.apply(n,e)))}),n}function _x(n){return Qt(n)&&!(n.length%2)||Xu(n)}function b1(n){return typeof n=="number"&&n==n&&n%1===0}function Xu(n){if(n==null)return!1;if(n.constructor===Uint8Array)return!0;if(typeof n=="string"||!b1(n.length)||n.length<0)return!1;for(let e=0;e<n.length;e++){const t=n[e];if(!b1(t)||t<0||t>=256)return!1}return!0}function ot(n,e){if(e||(e={}),typeof n=="number"){Pn.checkSafeUint53(n,"invalid arrayify value");const t=[];for(;n;)t.unshift(n&255),n=parseInt(String(n/256));return t.length===0&&t.push(0),Wl(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),BI(n)&&(n=n.toHexString()),Qt(n)){let t=n.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":Pn.throwArgumentError("hex data is odd-length","value",n));const r=[];for(let i=0;i<t.length;i+=2)r.push(parseInt(t.substring(i,i+2),16));return Wl(new Uint8Array(r))}return Xu(n)?Wl(new Uint8Array(n)):Pn.throwArgumentError("invalid arrayify value","value",n)}function li(n){const e=n.map(i=>ot(i)),t=e.reduce((i,s)=>i+s.length,0),r=new Uint8Array(t);return e.reduce((i,s)=>(r.set(s,i),i+s.length),0),Wl(r)}function Iu(n){let e=ot(n);if(e.length===0)return e;let t=0;for(;t<e.length&&e[t]===0;)t++;return t&&(e=e.slice(t)),e}function EJ(n,e){n=ot(n),n.length>e&&Pn.throwArgumentError("value out of range","value",arguments[0]);const t=new Uint8Array(e);return t.set(n,e-n.length),Wl(t)}function Qt(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||e&&n.length!==2+2*e)}const ev="0123456789abcdef";function Qe(n,e){if(e||(e={}),typeof n=="number"){Pn.checkSafeUint53(n,"invalid hexlify value");let t="";for(;n;)t=ev[n&15]+t,n=Math.floor(n/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof n=="bigint")return n=n.toString(16),n.length%2?"0x0"+n:"0x"+n;if(e.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),BI(n))return n.toHexString();if(Qt(n))return n.length%2&&(e.hexPad==="left"?n="0x0"+n.substring(2):e.hexPad==="right"?n+="0":Pn.throwArgumentError("hex data is odd-length","value",n)),n.toLowerCase();if(Xu(n)){let t="0x";for(let r=0;r<n.length;r++){let i=n[r];t+=ev[(i&240)>>4]+ev[i&15]}return t}return Pn.throwArgumentError("invalid hexlify value","value",n)}function Lc(n){if(typeof n!="string")n=Qe(n);else if(!Qt(n)||n.length%2)return null;return(n.length-2)/2}function mr(n,e,t){return typeof n!="string"?n=Qe(n):(!Qt(n)||n.length%2)&&Pn.throwArgumentError("invalid hexData","value",n),e=2+2*e,t!=null?"0x"+n.substring(e,2+2*t):"0x"+n.substring(e)}function Gr(n){let e="0x";return n.forEach(t=>{e+=Qe(t).substring(2)}),e}function bx(n){const e=SJ(Qe(n,{hexPad:"left"}));return e==="0x"?"0x0":e}function SJ(n){typeof n!="string"&&(n=Qe(n)),Qt(n)||Pn.throwArgumentError("invalid hex string","value",n),n=n.substring(2);let e=0;for(;e<n.length&&n[e]==="0";)e++;return"0x"+n.substring(e)}function Mn(n,e){for(typeof n!="string"?n=Qe(n):Qt(n)||Pn.throwArgumentError("invalid hex string","value",n),n.length>2*e+2&&Pn.throwArgumentError("value out of range","value",arguments[1]);n.length<2*e+2;)n="0x0"+n.substring(2);return n}function E0(n){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(_x(n)){let t=ot(n);t.length===64?(e.v=27+(t[32]>>7),t[32]&=127,e.r=Qe(t.slice(0,32)),e.s=Qe(t.slice(32,64))):t.length===65?(e.r=Qe(t.slice(0,32)),e.s=Qe(t.slice(32,64)),e.v=t[64]):Pn.throwArgumentError("invalid signature string","signature",n),e.v<27&&(e.v===0||e.v===1?e.v+=27:Pn.throwArgumentError("signature invalid v byte","signature",n)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=Qe(t.slice(32,64))}else{if(e.r=n.r,e.s=n.s,e.v=n.v,e.recoveryParam=n.recoveryParam,e._vs=n._vs,e._vs!=null){const i=EJ(ot(e._vs),32);e._vs=Qe(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&Pn.throwArgumentError("signature recoveryParam mismatch _vs","signature",n),i[0]&=127;const o=Qe(i);e.s==null?e.s=o:e.s!==o&&Pn.throwArgumentError("signature v mismatch _vs","signature",n)}if(e.recoveryParam==null)e.v==null?Pn.throwArgumentError("signature missing v and recoveryParam","signature",n):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&Pn.throwArgumentError("signature recoveryParam mismatch v","signature",n)}e.r==null||!Qt(e.r)?Pn.throwArgumentError("signature missing or invalid r","signature",n):e.r=Mn(e.r,32),e.s==null||!Qt(e.s)?Pn.throwArgumentError("signature missing or invalid s","signature",n):e.s=Mn(e.s,32);const t=ot(e.s);t[0]>=128&&Pn.throwArgumentError("signature s out of range","signature",n),e.recoveryParam&&(t[0]|=128);const r=Qe(t);e._vs&&(Qt(e._vs)||Pn.throwArgumentError("signature invalid _vs","signature",n),e._vs=Mn(e._vs,32)),e._vs==null?e._vs=r:e._vs!==r&&Pn.throwArgumentError("signature _vs mismatch v and s","signature",n)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}const LI="bignumber/5.7.0";var Mm=_t.BN;const po=new ie(LI),tv={},x1=9007199254740991;function TJ(n){return n!=null&&(Ce.isBigNumber(n)||typeof n=="number"&&n%1===0||typeof n=="string"&&!!n.match(/^-?[0-9]+$/)||Qt(n)||typeof n=="bigint"||Xu(n))}let w1=!1;class Ce{constructor(e,t){e!==tv&&po.throwError("cannot call constructor directly; use BigNumber.from",ie.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Ur(Bt(this).fromTwos(e))}toTwos(e){return Ur(Bt(this).toTwos(e))}abs(){return this._hex[0]==="-"?Ce.from(this._hex.substring(1)):this}add(e){return Ur(Bt(this).add(Bt(e)))}sub(e){return Ur(Bt(this).sub(Bt(e)))}div(e){return Ce.from(e).isZero()&&wi("division-by-zero","div"),Ur(Bt(this).div(Bt(e)))}mul(e){return Ur(Bt(this).mul(Bt(e)))}mod(e){const t=Bt(e);return t.isNeg()&&wi("division-by-zero","mod"),Ur(Bt(this).umod(t))}pow(e){const t=Bt(e);return t.isNeg()&&wi("negative-power","pow"),Ur(Bt(this).pow(t))}and(e){const t=Bt(e);return(this.isNegative()||t.isNeg())&&wi("unbound-bitwise-result","and"),Ur(Bt(this).and(t))}or(e){const t=Bt(e);return(this.isNegative()||t.isNeg())&&wi("unbound-bitwise-result","or"),Ur(Bt(this).or(t))}xor(e){const t=Bt(e);return(this.isNegative()||t.isNeg())&&wi("unbound-bitwise-result","xor"),Ur(Bt(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&wi("negative-width","mask"),Ur(Bt(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&wi("negative-width","shl"),Ur(Bt(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&wi("negative-width","shr"),Ur(Bt(this).shrn(e))}eq(e){return Bt(this).eq(Bt(e))}lt(e){return Bt(this).lt(Bt(e))}lte(e){return Bt(this).lte(Bt(e))}gt(e){return Bt(this).gt(Bt(e))}gte(e){return Bt(this).gte(Bt(e))}isNegative(){return this._hex[0]==="-"}isZero(){return Bt(this).isZero()}toNumber(){try{return Bt(this).toNumber()}catch{wi("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return po.throwError("this platform does not support BigInt",ie.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?w1||(w1=!0,po.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?po.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",ie.errors.UNEXPECTED_ARGUMENT,{}):po.throwError("BigNumber.toString does not accept parameters",ie.errors.UNEXPECTED_ARGUMENT,{})),Bt(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof Ce)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new Ce(tv,Ad(e)):e.match(/^-?[0-9]+$/)?new Ce(tv,Ad(new Mm(e))):po.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&wi("underflow","BigNumber.from",e),(e>=x1||e<=-x1)&&wi("overflow","BigNumber.from",e),Ce.from(String(e));const t=e;if(typeof t=="bigint")return Ce.from(t.toString());if(Xu(t))return Ce.from(Qe(t));if(t)if(t.toHexString){const r=t.toHexString();if(typeof r=="string")return Ce.from(r)}else{let r=t._hex;if(r==null&&t.type==="BigNumber"&&(r=t.hex),typeof r=="string"&&(Qt(r)||r[0]==="-"&&Qt(r.substring(1))))return Ce.from(r)}return po.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function Ad(n){if(typeof n!="string")return Ad(n.toString(16));if(n[0]==="-")return n=n.substring(1),n[0]==="-"&&po.throwArgumentError("invalid hex","value",n),n=Ad(n),n==="0x00"?n:"-"+n;if(n.substring(0,2)!=="0x"&&(n="0x"+n),n==="0x")return"0x00";for(n.length%2&&(n="0x0"+n.substring(2));n.length>4&&n.substring(0,4)==="0x00";)n="0x"+n.substring(4);return n}function Ur(n){return Ce.from(Ad(n))}function Bt(n){const e=Ce.from(n).toHexString();return e[0]==="-"?new Mm("-"+e.substring(3),16):new Mm(e.substring(2),16)}function wi(n,e,t){const r={fault:n,operation:e};return t!=null&&(r.value=t),po.throwError(n,ie.errors.NUMERIC_FAULT,r)}function MJ(n){return new Mm(n,36).toString(16)}const Sr=new ie(LI),Uf={},kI=Ce.from(0),DI=Ce.from(-1);function OI(n,e,t,r){const i={fault:e,operation:t};return r!==void 0&&(i.value=r),Sr.throwError(n,ie.errors.NUMERIC_FAULT,i)}let Ff="0";for(;Ff.length<256;)Ff+=Ff;function xx(n){if(typeof n!="number")try{n=Ce.from(n).toNumber()}catch{}return typeof n=="number"&&n>=0&&n<=256&&!(n%1)?"1"+Ff.substring(0,n):Sr.throwArgumentError("invalid decimal size","decimals",n)}function lp(n,e){e==null&&(e=0);const t=xx(e);n=Ce.from(n);const r=n.lt(kI);r&&(n=n.mul(DI));let i=n.mod(t).toString();for(;i.length<t.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=n.div(t).toString();return t.length===1?n=s:n=s+"."+i,r&&(n="-"+n),n}function vs(n,e){e==null&&(e=0);const t=xx(e);(typeof n!="string"||!n.match(/^-?[0-9.]+$/))&&Sr.throwArgumentError("invalid decimal value","value",n);const r=n.substring(0,1)==="-";r&&(n=n.substring(1)),n==="."&&Sr.throwArgumentError("missing value","value",n);const i=n.split(".");i.length>2&&Sr.throwArgumentError("too many decimal points","value",n);let s=i[0],o=i[1];for(s||(s="0"),o||(o="0");o[o.length-1]==="0";)o=o.substring(0,o.length-1);for(o.length>t.length-1&&OI("fractional component exceeds decimals","underflow","parseFixed"),o===""&&(o="0");o.length<t.length-1;)o+="0";const a=Ce.from(s),c=Ce.from(o);let l=a.mul(t).add(c);return r&&(l=l.mul(DI)),l}class jl{constructor(e,t,r,i){e!==Uf&&Sr.throwError("cannot use FixedFormat constructor; use FixedFormat.from",ie.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=r,this.decimals=i,this.name=(t?"":"u")+"fixed"+String(r)+"x"+String(i),this._multiplier=xx(i),Object.freeze(this)}static from(e){if(e instanceof jl)return e;typeof e=="number"&&(e=`fixed128x${e}`);let t=!0,r=128,i=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")t=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);s||Sr.throwArgumentError("invalid fixed format","format",e),t=s[1]!=="u",r=parseInt(s[2]),i=parseInt(s[3])}}else if(e){const s=(o,a,c)=>e[o]==null?c:(typeof e[o]!==a&&Sr.throwArgumentError("invalid fixed format ("+o+" not "+a+")","format."+o,e[o]),e[o]);t=s("signed","boolean",t),r=s("width","number",r),i=s("decimals","number",i)}return r%8&&Sr.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",r),i>80&&Sr.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new jl(Uf,t,r,i)}}class ar{constructor(e,t,r,i){e!==Uf&&Sr.throwError("cannot use FixedNumber constructor; use FixedNumber.from",ie.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=i,this._hex=t,this._value=r,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Sr.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const t=vs(this._value,this.format.decimals),r=vs(e._value,e.format.decimals);return ar.fromValue(t.add(r),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const t=vs(this._value,this.format.decimals),r=vs(e._value,e.format.decimals);return ar.fromValue(t.sub(r),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const t=vs(this._value,this.format.decimals),r=vs(e._value,e.format.decimals);return ar.fromValue(t.mul(r).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const t=vs(this._value,this.format.decimals),r=vs(e._value,e.format.decimals);return ar.fromValue(t.mul(this.format._multiplier).div(r),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=ar.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);return this.isNegative()&&r&&(t=t.subUnsafe(A1.toFormat(t.format))),t}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=ar.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);return!this.isNegative()&&r&&(t=t.addUnsafe(A1.toFormat(t.format))),t}round(e){e==null&&(e=0);const t=this.toString().split(".");if(t.length===1&&t.push("0"),(e<0||e>80||e%1)&&Sr.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;const r=ar.from("1"+Ff.substring(0,e),this.format),i=RJ.toFormat(this.format);return this.mulUnsafe(r).addUnsafe(i).floor().divUnsafe(r)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&Sr.throwArgumentError("invalid byte width","width",e);const t=Ce.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return Mn(t,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return ar.fromString(this._value,e)}static fromValue(e,t,r){return r==null&&t!=null&&!TJ(t)&&(r=t,t=null),t==null&&(t=0),r==null&&(r="fixed"),ar.fromString(lp(e,t),jl.from(r))}static fromString(e,t){t==null&&(t="fixed");const r=jl.from(t),i=vs(e,r.decimals);!r.signed&&i.lt(kI)&&OI("unsigned value cannot be negative","overflow","value",e);let s=null;r.signed?s=i.toTwos(r.width).toHexString():(s=i.toHexString(),s=Mn(s,r.width/8));const o=lp(i,r.decimals);return new ar(Uf,s,o,r)}static fromBytes(e,t){t==null&&(t="fixed");const r=jl.from(t);if(ot(e).length>r.width/8)throw new Error("overflow");let i=Ce.from(e);r.signed&&(i=i.fromTwos(r.width));const s=i.toTwos((r.signed?0:1)+r.width).toHexString(),o=lp(i,r.decimals);return new ar(Uf,s,o,r)}static from(e,t){if(typeof e=="string")return ar.fromString(e,t);if(Xu(e))return ar.fromBytes(e,t);try{return ar.fromValue(e,0,t)}catch(r){if(r.code!==ie.errors.INVALID_ARGUMENT)throw r}return Sr.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const A1=ar.from(1),RJ=ar.from("0.5"),IJ="properties/5.7.0";var CJ=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const Rm=new ie(IJ);function Ae(n,e,t){Object.defineProperty(n,e,{enumerable:!0,value:t,writable:!1})}function Ls(n,e){for(let t=0;t<32;t++){if(n[e])return n[e];if(!n.prototype||typeof n.prototype!="object")break;n=Object.getPrototypeOf(n.prototype).constructor}return null}function zn(n){return CJ(this,void 0,void 0,function*(){const e=Object.keys(n).map(r=>{const i=n[r];return Promise.resolve(i).then(s=>({key:r,value:s}))});return(yield Promise.all(e)).reduce((r,i)=>(r[i.key]=i.value,r),{})})}function PJ(n,e){(!n||typeof n!="object")&&Rm.throwArgumentError("invalid object","object",n),Object.keys(n).forEach(t=>{e[t]||Rm.throwArgumentError("invalid object key - "+t,"transaction:"+t,n)})}function Xn(n){const e={};for(const t in n)e[t]=n[t];return e}const NJ={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function UI(n){if(n==null||NJ[typeof n])return!0;if(Array.isArray(n)||typeof n=="object"){if(!Object.isFrozen(n))return!1;const e=Object.keys(n);for(let t=0;t<e.length;t++){let r=null;try{r=n[e[t]]}catch{continue}if(!UI(r))return!1}return!0}return Rm.throwArgumentError(`Cannot deepCopy ${typeof n}`,"object",n)}function BJ(n){if(UI(n))return n;if(Array.isArray(n))return Object.freeze(n.map(e=>Fo(e)));if(typeof n=="object"){const e={};for(const t in n){const r=n[t];r!==void 0&&Ae(e,t,Fo(r))}return e}return Rm.throwArgumentError(`Cannot deepCopy ${typeof n}`,"object",n)}function Fo(n){return BJ(n)}class Xd{constructor(e){for(const t in e)this[t]=Fo(e[t])}}const Kd="abi/5.7.0",Ht=new ie(Kd),kc={};let E1={calldata:!0,memory:!0,storage:!0},LJ={calldata:!0,memory:!0};function Dh(n,e){if(n==="bytes"||n==="string"){if(E1[e])return!0}else if(n==="address"){if(e==="payable")return!0}else if((n.indexOf("[")>=0||n==="tuple")&&LJ[e])return!0;return(E1[e]||e==="payable")&&Ht.throwArgumentError("invalid modifier","name",e),!1}function kJ(n,e){let t=n;function r(a){Ht.throwArgumentError(`unexpected character at position ${a}`,"param",n)}n=n.replace(/\s/g," ");function i(a){let c={type:"",name:"",parent:a,state:{allowType:!0}};return e&&(c.indexed=!1),c}let s={type:"",name:"",state:{allowType:!0}},o=s;for(let a=0;a<n.length;a++){let c=n[a];switch(c){case"(":o.state.allowType&&o.type===""?o.type="tuple":o.state.allowParams||r(a),o.state.allowType=!1,o.type=Sl(o.type),o.components=[i(o)],o=o.components[0];break;case")":delete o.state,o.name==="indexed"&&(e||r(a),o.indexed=!0,o.name=""),Dh(o.type,o.name)&&(o.name=""),o.type=Sl(o.type);let l=o;o=o.parent,o||r(a),delete l.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,o.name==="indexed"&&(e||r(a),o.indexed=!0,o.name=""),Dh(o.type,o.name)&&(o.name=""),o.type=Sl(o.type);let u=i(o.parent);o.parent.components.push(u),delete o.parent,o=u;break;case" ":o.state.allowType&&o.type!==""&&(o.type=Sl(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&o.name!==""&&(o.name==="indexed"?(e||r(a),o.indexed&&r(a),o.indexed=!0,o.name=""):Dh(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||r(a),o.type+=c,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||r(a),o.type+=c,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=c,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=c,delete o.state.allowArray):o.state.readArray?o.type+=c:r(a)}}return o.parent&&Ht.throwArgumentError("unexpected eof","param",n),delete s.state,o.name==="indexed"?(e||r(t.length-7),o.indexed&&r(t.length-7),o.indexed=!0,o.name=""):Dh(o.type,o.name)&&(o.name=""),s.type=Sl(s.type),s}function up(n,e){for(let t in e)Ae(n,t,e[t])}const Yt=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),DJ=new RegExp(/^(.*)\[([0-9]*)\]$/);class tr{constructor(e,t){e!==kc&&Ht.throwError("use fromString",ie.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),up(this,t);let r=this.type.match(DJ);r?up(this,{arrayLength:parseInt(r[2]||"-1"),arrayChildren:tr.fromObject({type:r[1],components:this.components}),baseType:"array"}):up(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Yt.sighash),Yt[e]||Ht.throwArgumentError("invalid format type","format",e),e===Yt.json){let r={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(r.indexed=this.indexed),this.components&&(r.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(r)}let t="";return this.baseType==="array"?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==Yt.sighash&&(t+=this.type),t+="("+this.components.map(r=>r.format(e)).join(e===Yt.full?", ":",")+")"):t+=this.type,e!==Yt.sighash&&(this.indexed===!0&&(t+=" indexed"),e===Yt.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return typeof e=="string"?tr.fromString(e,t):tr.fromObject(e)}static fromObject(e){return tr.isParamType(e)?e:new tr(kc,{name:e.name||null,type:Sl(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(tr.fromObject):null})}static fromString(e,t){function r(i){return tr.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components})}return r(kJ(e,!!t))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function Ed(n,e){return UJ(n).map(t=>tr.fromString(t,e))}class Mo{constructor(e,t){e!==kc&&Ht.throwError("use a static from method",ie.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),up(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return Mo.isFragment(e)?e:typeof e=="string"?Mo.fromString(e):Mo.fromObject(e)}static fromObject(e){if(Mo.isFragment(e))return e;switch(e.type){case"function":return Rs.fromObject(e);case"event":return wo.fromObject(e);case"constructor":return Ms.fromObject(e);case"error":return da.fromObject(e);case"fallback":case"receive":return null}return Ht.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?wo.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?Rs.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?Ms.fromString(e.trim()):e.split(" ")[0]==="error"?da.fromString(e.substring(5).trim()):Ht.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class wo extends Mo{format(e){if(e||(e=Yt.sighash),Yt[e]||Ht.throwArgumentError("invalid format type","format",e),e===Yt.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==Yt.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===Yt.full?", ":",")+") ",e!==Yt.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return typeof e=="string"?wo.fromString(e):wo.fromObject(e)}static fromObject(e){if(wo.isEventFragment(e))return e;e.type!=="event"&&Ht.throwArgumentError("invalid event object","value",e);const t={name:Sd(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(tr.fromObject):[],type:"event"};return new wo(kc,t)}static fromString(e){let t=e.match(Td);t||Ht.throwArgumentError("invalid event string","value",e);let r=!1;return t[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":r=!0;break;case"":break;default:Ht.warn("unknown modifier: "+i)}}),wo.fromObject({name:t[1].trim(),anonymous:r,inputs:Ed(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function FI(n,e){e.gas=null;let t=n.split("@");return t.length!==1?(t.length>2&&Ht.throwArgumentError("invalid human-readable ABI signature","value",n),t[1].match(/^[0-9]+$/)||Ht.throwArgumentError("invalid human-readable ABI signature gas","value",n),e.gas=Ce.from(t[1]),t[0]):n}function HI(n,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",n.split(" ").forEach(t=>{switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:}})}function zI(n){let e={constant:!1,payable:!0,stateMutability:"payable"};return n.stateMutability!=null?(e.stateMutability=n.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",n.constant!=null&&!!n.constant!==e.constant&&Ht.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",n),e.payable=e.stateMutability==="payable",n.payable!=null&&!!n.payable!==e.payable&&Ht.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",n)):n.payable!=null?(e.payable=!!n.payable,n.constant==null&&!e.payable&&n.type!=="constructor"&&Ht.throwArgumentError("unable to determine stateMutability","value",n),e.constant=!!n.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&Ht.throwArgumentError("cannot have constant payable function","value",n)):n.constant!=null?(e.constant=!!n.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):n.type!=="constructor"&&Ht.throwArgumentError("unable to determine stateMutability","value",n),e}class Ms extends Mo{format(e){if(e||(e=Yt.sighash),Yt[e]||Ht.throwArgumentError("invalid format type","format",e),e===Yt.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});e===Yt.sighash&&Ht.throwError("cannot format a constructor for sighash",ie.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map(r=>r.format(e)).join(e===Yt.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "),t.trim()}static from(e){return typeof e=="string"?Ms.fromString(e):Ms.fromObject(e)}static fromObject(e){if(Ms.isConstructorFragment(e))return e;e.type!=="constructor"&&Ht.throwArgumentError("invalid constructor object","value",e);let t=zI(e);t.constant&&Ht.throwArgumentError("constructor cannot be constant","value",e);const r={name:null,type:e.type,inputs:e.inputs?e.inputs.map(tr.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?Ce.from(e.gas):null};return new Ms(kc,r)}static fromString(e){let t={type:"constructor"};e=FI(e,t);let r=e.match(Td);return(!r||r[1].trim()!=="constructor")&&Ht.throwArgumentError("invalid constructor string","value",e),t.inputs=Ed(r[2].trim(),!1),HI(r[3].trim(),t),Ms.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class Rs extends Ms{format(e){if(e||(e=Yt.sighash),Yt[e]||Ht.throwArgumentError("invalid format type","format",e),e===Yt.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e))),outputs:this.outputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==Yt.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===Yt.full?", ":",")+") ",e!==Yt.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map(r=>r.format(e)).join(", ")+") "),this.gas!=null&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return typeof e=="string"?Rs.fromString(e):Rs.fromObject(e)}static fromObject(e){if(Rs.isFunctionFragment(e))return e;e.type!=="function"&&Ht.throwArgumentError("invalid function object","value",e);let t=zI(e);const r={type:e.type,name:Sd(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(tr.fromObject):[],outputs:e.outputs?e.outputs.map(tr.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?Ce.from(e.gas):null};return new Rs(kc,r)}static fromString(e){let t={type:"function"};e=FI(e,t);let r=e.split(" returns ");r.length>2&&Ht.throwArgumentError("invalid function string","value",e);let i=r[0].match(Td);if(i||Ht.throwArgumentError("invalid function signature","value",e),t.name=i[1].trim(),t.name&&Sd(t.name),t.inputs=Ed(i[2],!1),HI(i[3].trim(),t),r.length>1){let s=r[1].match(Td);(s[1].trim()!=""||s[3].trim()!="")&&Ht.throwArgumentError("unexpected tokens","value",e),t.outputs=Ed(s[2],!1)}else t.outputs=[];return Rs.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function S1(n){const e=n.format();return(e==="Error(string)"||e==="Panic(uint256)")&&Ht.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",n),n}class da extends Mo{format(e){if(e||(e=Yt.sighash),Yt[e]||Ht.throwArgumentError("invalid format type","format",e),e===Yt.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==Yt.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===Yt.full?", ":",")+") ",t.trim()}static from(e){return typeof e=="string"?da.fromString(e):da.fromObject(e)}static fromObject(e){if(da.isErrorFragment(e))return e;e.type!=="error"&&Ht.throwArgumentError("invalid error object","value",e);const t={type:e.type,name:Sd(e.name),inputs:e.inputs?e.inputs.map(tr.fromObject):[]};return S1(new da(kc,t))}static fromString(e){let t={type:"error"},r=e.match(Td);return r||Ht.throwArgumentError("invalid error signature","value",e),t.name=r[1].trim(),t.name&&Sd(t.name),t.inputs=Ed(r[2],!1),S1(da.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function Sl(n){return n.match(/^uint($|[^1-9])/)?n="uint256"+n.substring(4):n.match(/^int($|[^1-9])/)&&(n="int256"+n.substring(3)),n}const OJ=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function Sd(n){return(!n||!n.match(OJ))&&Ht.throwArgumentError(`invalid identifier "${n}"`,"value",n),n}const Td=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function UJ(n){n=n.trim();let e=[],t="",r=0;for(let i=0;i<n.length;i++){let s=n[i];s===","&&r===0?(e.push(t),t=""):(t+=s,s==="("?r++:s===")"&&(r--,r===-1&&Ht.throwArgumentError("unbalanced parenthesis","value",n)))}return t&&e.push(t),e}const wx=new ie(Kd);function FJ(n){const e=[],t=function(r,i){if(Array.isArray(i))for(let s in i){const o=r.slice();o.push(s);try{t(o,i[s])}catch(a){e.push({path:o,error:a})}}};return t([],n),e}class $o{constructor(e,t,r,i){this.name=e,this.type=t,this.localName=r,this.dynamic=i}_throwError(e,t){wx.throwArgumentError(e,this.localName,t)}}class a_{constructor(e){Ae(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return Gr(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(li(e._data))}writeBytes(e){let t=ot(e);const r=t.length%this.wordSize;return r&&(t=li([t,this._padding.slice(r)])),this._writeData(t)}_getValue(e){let t=ot(Ce.from(e));return t.length>this.wordSize&&wx.throwError("value out-of-bounds",ie.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=li([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class Im{constructor(e,t,r,i){Ae(this,"_data",ot(e)),Ae(this,"wordSize",t||32),Ae(this,"_coerceFunc",r),Ae(this,"allowLoose",i),this._offset=0}get data(){return Qe(this._data)}get consumed(){return this._offset}static coerce(e,t){let r=e.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):Im.coerce(e,t)}_peekBytes(e,t,r){let i=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&r&&this._offset+t<=this._data.length?i=t:wx.throwError("data out-of-bounds",ie.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new Im(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let r=this._peekBytes(0,e,!!t);return this._offset+=r.length,r.slice(0,e)}readValue(){return Ce.from(this.readBytes(this.wordSize))}}var GI={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(n){(function(){var e="input is invalid type",t="finalize already called",r=typeof window=="object",i=r?window:{};i.JS_SHA3_NO_WINDOW&&(r=!1);var s=!r&&typeof self=="object",o=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?i=Ao:s&&(i=self);var a=!i.JS_SHA3_NO_COMMON_JS&&!0&&n.exports,c=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",l="0123456789abcdef".split(""),u=[31,7936,2031616,520093696],f=[4,1024,262144,67108864],d=[1,256,65536,16777216],p=[6,1536,393216,100663296],v=[0,8,16,24],m=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],y=[224,256,384,512],h=[128,256],w=["hex","buffer","arrayBuffer","array","digest"],S={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(A){return Object.prototype.toString.call(A)==="[object Array]"}),c&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(A){return typeof A=="object"&&A.buffer&&A.buffer.constructor===ArrayBuffer});for(var T=function(A,X,V){return function($){return new x(A,X,A).update($)[V]()}},C=function(A,X,V){return function($,ee){return new x(A,X,ee).update($)[V]()}},B=function(A,X,V){return function($,ee,he,pe){return g["cshake"+A].update($,ee,he,pe)[V]()}},O=function(A,X,V){return function($,ee,he,pe){return g["kmac"+A].update($,ee,he,pe)[V]()}},P=function(A,X,V,$){for(var ee=0;ee<w.length;++ee){var he=w[ee];A[he]=X(V,$,he)}return A},N=function(A,X){var V=T(A,X,"hex");return V.create=function(){return new x(A,X,A)},V.update=function($){return V.create().update($)},P(V,T,A,X)},I=function(A,X){var V=C(A,X,"hex");return V.create=function($){return new x(A,X,$)},V.update=function($,ee){return V.create(ee).update($)},P(V,C,A,X)},U=function(A,X){var V=S[A],$=B(A,X,"hex");return $.create=function(ee,he,pe){return!he&&!pe?g["shake"+A].create(ee):new x(A,X,ee).bytepad([he,pe],V)},$.update=function(ee,he,pe,de){return $.create(he,pe,de).update(ee)},P($,B,A,X)},q=function(A,X){var V=S[A],$=O(A,X,"hex");return $.create=function(ee,he,pe){return new F(A,X,he).bytepad(["KMAC",pe],V).bytepad([ee],V)},$.update=function(ee,he,pe,de){return $.create(ee,pe,de).update(he)},P($,O,A,X)},M=[{name:"keccak",padding:d,bits:y,createMethod:N},{name:"sha3",padding:p,bits:y,createMethod:N},{name:"shake",padding:u,bits:h,createMethod:I},{name:"cshake",padding:f,bits:h,createMethod:U},{name:"kmac",padding:f,bits:h,createMethod:q}],g={},_=[],b=0;b<M.length;++b)for(var E=M[b],R=E.bits,L=0;L<R.length;++L){var G=E.name+"_"+R[L];if(_.push(G),g[G]=E.createMethod(R[L],E.padding),E.name!=="sha3"){var k=E.name+R[L];_.push(k),g[k]=g[G]}}function x(A,X,V){this.blocks=[],this.s=[],this.padding=X,this.outputBits=V,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(A<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=V>>5,this.extraBytes=(V&31)>>3;for(var $=0;$<50;++$)this.s[$]=0}x.prototype.update=function(A){if(this.finalized)throw new Error(t);var X,V=typeof A;if(V!=="string"){if(V==="object"){if(A===null)throw new Error(e);if(c&&A.constructor===ArrayBuffer)A=new Uint8Array(A);else if(!Array.isArray(A)&&(!c||!ArrayBuffer.isView(A)))throw new Error(e)}else throw new Error(e);X=!0}for(var $=this.blocks,ee=this.byteCount,he=A.length,pe=this.blockCount,de=0,Fe=this.s,j,Ue;de<he;){if(this.reset)for(this.reset=!1,$[0]=this.block,j=1;j<pe+1;++j)$[j]=0;if(X)for(j=this.start;de<he&&j<ee;++de)$[j>>2]|=A[de]<<v[j++&3];else for(j=this.start;de<he&&j<ee;++de)Ue=A.charCodeAt(de),Ue<128?$[j>>2]|=Ue<<v[j++&3]:Ue<2048?($[j>>2]|=(192|Ue>>6)<<v[j++&3],$[j>>2]|=(128|Ue&63)<<v[j++&3]):Ue<55296||Ue>=57344?($[j>>2]|=(224|Ue>>12)<<v[j++&3],$[j>>2]|=(128|Ue>>6&63)<<v[j++&3],$[j>>2]|=(128|Ue&63)<<v[j++&3]):(Ue=65536+((Ue&1023)<<10|A.charCodeAt(++de)&1023),$[j>>2]|=(240|Ue>>18)<<v[j++&3],$[j>>2]|=(128|Ue>>12&63)<<v[j++&3],$[j>>2]|=(128|Ue>>6&63)<<v[j++&3],$[j>>2]|=(128|Ue&63)<<v[j++&3]);if(this.lastByteIndex=j,j>=ee){for(this.start=j-ee,this.block=$[pe],j=0;j<pe;++j)Fe[j]^=$[j];K(Fe),this.reset=!0}else this.start=j}return this},x.prototype.encode=function(A,X){var V=A&255,$=1,ee=[V];for(A=A>>8,V=A&255;V>0;)ee.unshift(V),A=A>>8,V=A&255,++$;return X?ee.push($):ee.unshift($),this.update(ee),ee.length},x.prototype.encodeString=function(A){var X,V=typeof A;if(V!=="string"){if(V==="object"){if(A===null)throw new Error(e);if(c&&A.constructor===ArrayBuffer)A=new Uint8Array(A);else if(!Array.isArray(A)&&(!c||!ArrayBuffer.isView(A)))throw new Error(e)}else throw new Error(e);X=!0}var $=0,ee=A.length;if(X)$=ee;else for(var he=0;he<A.length;++he){var pe=A.charCodeAt(he);pe<128?$+=1:pe<2048?$+=2:pe<55296||pe>=57344?$+=3:(pe=65536+((pe&1023)<<10|A.charCodeAt(++he)&1023),$+=4)}return $+=this.encode($*8),this.update(A),$},x.prototype.bytepad=function(A,X){for(var V=this.encode(X),$=0;$<A.length;++$)V+=this.encodeString(A[$]);var ee=X-V%X,he=[];return he.length=ee,this.update(he),this},x.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var A=this.blocks,X=this.lastByteIndex,V=this.blockCount,$=this.s;if(A[X>>2]|=this.padding[X&3],this.lastByteIndex===this.byteCount)for(A[0]=A[V],X=1;X<V+1;++X)A[X]=0;for(A[V-1]|=2147483648,X=0;X<V;++X)$[X]^=A[X];K($)}},x.prototype.toString=x.prototype.hex=function(){this.finalize();for(var A=this.blockCount,X=this.s,V=this.outputBlocks,$=this.extraBytes,ee=0,he=0,pe="",de;he<V;){for(ee=0;ee<A&&he<V;++ee,++he)de=X[ee],pe+=l[de>>4&15]+l[de&15]+l[de>>12&15]+l[de>>8&15]+l[de>>20&15]+l[de>>16&15]+l[de>>28&15]+l[de>>24&15];he%A===0&&(K(X),ee=0)}return $&&(de=X[ee],pe+=l[de>>4&15]+l[de&15],$>1&&(pe+=l[de>>12&15]+l[de>>8&15]),$>2&&(pe+=l[de>>20&15]+l[de>>16&15])),pe},x.prototype.arrayBuffer=function(){this.finalize();var A=this.blockCount,X=this.s,V=this.outputBlocks,$=this.extraBytes,ee=0,he=0,pe=this.outputBits>>3,de;$?de=new ArrayBuffer(V+1<<2):de=new ArrayBuffer(pe);for(var Fe=new Uint32Array(de);he<V;){for(ee=0;ee<A&&he<V;++ee,++he)Fe[he]=X[ee];he%A===0&&K(X)}return $&&(Fe[ee]=X[ee],de=de.slice(0,pe)),de},x.prototype.buffer=x.prototype.arrayBuffer,x.prototype.digest=x.prototype.array=function(){this.finalize();for(var A=this.blockCount,X=this.s,V=this.outputBlocks,$=this.extraBytes,ee=0,he=0,pe=[],de,Fe;he<V;){for(ee=0;ee<A&&he<V;++ee,++he)de=he<<2,Fe=X[ee],pe[de]=Fe&255,pe[de+1]=Fe>>8&255,pe[de+2]=Fe>>16&255,pe[de+3]=Fe>>24&255;he%A===0&&K(X)}return $&&(de=he<<2,Fe=X[ee],pe[de]=Fe&255,$>1&&(pe[de+1]=Fe>>8&255),$>2&&(pe[de+2]=Fe>>16&255)),pe};function F(A,X,V){x.call(this,A,X,V)}F.prototype=new x,F.prototype.finalize=function(){return this.encode(this.outputBits,!0),x.prototype.finalize.call(this)};var K=function(A){var X,V,$,ee,he,pe,de,Fe,j,Ue,et,Ve,Ie,Pt,Se,W,D,te,ue,Z,ne,me,Re,we,Ke,xe,Te,ke,tt,Me,$e,ut,rt,Y,Ne,se,fe,Be,_e,We,tn,bt,Je,Vn,Ot,ln,cs,qt,cn,ls,un,nn,us,rn,fn,fs,pn,mn,ds,hs,ps,H,J;for($=0;$<48;$+=2)ee=A[0]^A[10]^A[20]^A[30]^A[40],he=A[1]^A[11]^A[21]^A[31]^A[41],pe=A[2]^A[12]^A[22]^A[32]^A[42],de=A[3]^A[13]^A[23]^A[33]^A[43],Fe=A[4]^A[14]^A[24]^A[34]^A[44],j=A[5]^A[15]^A[25]^A[35]^A[45],Ue=A[6]^A[16]^A[26]^A[36]^A[46],et=A[7]^A[17]^A[27]^A[37]^A[47],Ve=A[8]^A[18]^A[28]^A[38]^A[48],Ie=A[9]^A[19]^A[29]^A[39]^A[49],X=Ve^(pe<<1|de>>>31),V=Ie^(de<<1|pe>>>31),A[0]^=X,A[1]^=V,A[10]^=X,A[11]^=V,A[20]^=X,A[21]^=V,A[30]^=X,A[31]^=V,A[40]^=X,A[41]^=V,X=ee^(Fe<<1|j>>>31),V=he^(j<<1|Fe>>>31),A[2]^=X,A[3]^=V,A[12]^=X,A[13]^=V,A[22]^=X,A[23]^=V,A[32]^=X,A[33]^=V,A[42]^=X,A[43]^=V,X=pe^(Ue<<1|et>>>31),V=de^(et<<1|Ue>>>31),A[4]^=X,A[5]^=V,A[14]^=X,A[15]^=V,A[24]^=X,A[25]^=V,A[34]^=X,A[35]^=V,A[44]^=X,A[45]^=V,X=Fe^(Ve<<1|Ie>>>31),V=j^(Ie<<1|Ve>>>31),A[6]^=X,A[7]^=V,A[16]^=X,A[17]^=V,A[26]^=X,A[27]^=V,A[36]^=X,A[37]^=V,A[46]^=X,A[47]^=V,X=Ue^(ee<<1|he>>>31),V=et^(he<<1|ee>>>31),A[8]^=X,A[9]^=V,A[18]^=X,A[19]^=V,A[28]^=X,A[29]^=V,A[38]^=X,A[39]^=V,A[48]^=X,A[49]^=V,Pt=A[0],Se=A[1],ln=A[11]<<4|A[10]>>>28,cs=A[10]<<4|A[11]>>>28,ke=A[20]<<3|A[21]>>>29,tt=A[21]<<3|A[20]>>>29,hs=A[31]<<9|A[30]>>>23,ps=A[30]<<9|A[31]>>>23,bt=A[40]<<18|A[41]>>>14,Je=A[41]<<18|A[40]>>>14,Y=A[2]<<1|A[3]>>>31,Ne=A[3]<<1|A[2]>>>31,W=A[13]<<12|A[12]>>>20,D=A[12]<<12|A[13]>>>20,qt=A[22]<<10|A[23]>>>22,cn=A[23]<<10|A[22]>>>22,Me=A[33]<<13|A[32]>>>19,$e=A[32]<<13|A[33]>>>19,H=A[42]<<2|A[43]>>>30,J=A[43]<<2|A[42]>>>30,rn=A[5]<<30|A[4]>>>2,fn=A[4]<<30|A[5]>>>2,se=A[14]<<6|A[15]>>>26,fe=A[15]<<6|A[14]>>>26,te=A[25]<<11|A[24]>>>21,ue=A[24]<<11|A[25]>>>21,ls=A[34]<<15|A[35]>>>17,un=A[35]<<15|A[34]>>>17,ut=A[45]<<29|A[44]>>>3,rt=A[44]<<29|A[45]>>>3,we=A[6]<<28|A[7]>>>4,Ke=A[7]<<28|A[6]>>>4,fs=A[17]<<23|A[16]>>>9,pn=A[16]<<23|A[17]>>>9,Be=A[26]<<25|A[27]>>>7,_e=A[27]<<25|A[26]>>>7,Z=A[36]<<21|A[37]>>>11,ne=A[37]<<21|A[36]>>>11,nn=A[47]<<24|A[46]>>>8,us=A[46]<<24|A[47]>>>8,Vn=A[8]<<27|A[9]>>>5,Ot=A[9]<<27|A[8]>>>5,xe=A[18]<<20|A[19]>>>12,Te=A[19]<<20|A[18]>>>12,mn=A[29]<<7|A[28]>>>25,ds=A[28]<<7|A[29]>>>25,We=A[38]<<8|A[39]>>>24,tn=A[39]<<8|A[38]>>>24,me=A[48]<<14|A[49]>>>18,Re=A[49]<<14|A[48]>>>18,A[0]=Pt^~W&te,A[1]=Se^~D&ue,A[10]=we^~xe&ke,A[11]=Ke^~Te&tt,A[20]=Y^~se&Be,A[21]=Ne^~fe&_e,A[30]=Vn^~ln&qt,A[31]=Ot^~cs&cn,A[40]=rn^~fs&mn,A[41]=fn^~pn&ds,A[2]=W^~te&Z,A[3]=D^~ue&ne,A[12]=xe^~ke&Me,A[13]=Te^~tt&$e,A[22]=se^~Be&We,A[23]=fe^~_e&tn,A[32]=ln^~qt&ls,A[33]=cs^~cn&un,A[42]=fs^~mn&hs,A[43]=pn^~ds&ps,A[4]=te^~Z&me,A[5]=ue^~ne&Re,A[14]=ke^~Me&ut,A[15]=tt^~$e&rt,A[24]=Be^~We&bt,A[25]=_e^~tn&Je,A[34]=qt^~ls&nn,A[35]=cn^~un&us,A[44]=mn^~hs&H,A[45]=ds^~ps&J,A[6]=Z^~me&Pt,A[7]=ne^~Re&Se,A[16]=Me^~ut&we,A[17]=$e^~rt&Ke,A[26]=We^~bt&Y,A[27]=tn^~Je&Ne,A[36]=ls^~nn&Vn,A[37]=un^~us&Ot,A[46]=hs^~H&rn,A[47]=ps^~J&fn,A[8]=me^~Pt&W,A[9]=Re^~Se&D,A[18]=ut^~we&xe,A[19]=rt^~Ke&Te,A[28]=bt^~Y&se,A[29]=Je^~Ne&fe,A[38]=nn^~Vn&ln,A[39]=us^~Ot&cs,A[48]=H^~rn&fs,A[49]=J^~fn&pn,A[0]^=m[$],A[1]^=m[$+1]};if(a)n.exports=g;else for(b=0;b<_.length;++b)i[_[b]]=g[_[b]]})()})(GI);var HJ=GI.exports;const zJ=zc(HJ);function qn(n){return"0x"+zJ.keccak_256(ot(n))}const GJ="rlp/5.7.0",bs=new ie(GJ);function T1(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function M1(n,e,t){let r=0;for(let i=0;i<t;i++)r=r*256+n[e+i];return r}function VI(n){if(Array.isArray(n)){let r=[];if(n.forEach(function(s){r=r.concat(VI(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=T1(r.length);return i.unshift(247+i.length),i.concat(r)}_x(n)||bs.throwArgumentError("RLP object must be BytesLike","object",n);const e=Array.prototype.slice.call(ot(n));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=T1(e.length);return t.unshift(183+t.length),t.concat(e)}function S0(n){return Qe(VI(n))}function R1(n,e,t,r){const i=[];for(;t<e+1+r;){const s=WI(n,t);i.push(s.result),t+=s.consumed,t>e+1+r&&bs.throwError("child data too short",ie.errors.BUFFER_OVERRUN,{})}return{consumed:1+r,result:i}}function WI(n,e){if(n.length===0&&bs.throwError("data too short",ie.errors.BUFFER_OVERRUN,{}),n[e]>=248){const t=n[e]-247;e+1+t>n.length&&bs.throwError("data short segment too short",ie.errors.BUFFER_OVERRUN,{});const r=M1(n,e+1,t);return e+1+t+r>n.length&&bs.throwError("data long segment too short",ie.errors.BUFFER_OVERRUN,{}),R1(n,e,e+1+t,t+r)}else if(n[e]>=192){const t=n[e]-192;return e+1+t>n.length&&bs.throwError("data array too short",ie.errors.BUFFER_OVERRUN,{}),R1(n,e,e+1,t)}else if(n[e]>=184){const t=n[e]-183;e+1+t>n.length&&bs.throwError("data array too short",ie.errors.BUFFER_OVERRUN,{});const r=M1(n,e+1,t);e+1+t+r>n.length&&bs.throwError("data array too short",ie.errors.BUFFER_OVERRUN,{});const i=Qe(n.slice(e+1+t,e+1+t+r));return{consumed:1+t+r,result:i}}else if(n[e]>=128){const t=n[e]-128;e+1+t>n.length&&bs.throwError("data too short",ie.errors.BUFFER_OVERRUN,{});const r=Qe(n.slice(e+1,e+1+t));return{consumed:1+t,result:r}}return{consumed:1,result:Qe(n[e])}}function Ax(n){const e=ot(n),t=WI(e,0);return t.consumed!==e.length&&bs.throwArgumentError("invalid rlp data","data",n),t.result}const VJ="address/5.7.0",Nl=new ie(VJ);function I1(n){Qt(n,20)||Nl.throwArgumentError("invalid address","address",n),n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const r=ot(qn(t));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const WJ=9007199254740991;function jJ(n){return Math.log10?Math.log10(n):Math.log(n)/Math.LN10}const Ex={};for(let n=0;n<10;n++)Ex[String(n)]=String(n);for(let n=0;n<26;n++)Ex[String.fromCharCode(65+n)]=String(10+n);const C1=Math.floor(jJ(WJ));function qJ(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(r=>Ex[r]).join("");for(;e.length>=C1;){let r=e.substring(0,C1);e=parseInt(r,10)%97+e.substring(r.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function lr(n){let e=null;if(typeof n!="string"&&Nl.throwArgumentError("invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/))n.substring(0,2)!=="0x"&&(n="0x"+n),e=I1(n),n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==n&&Nl.throwArgumentError("bad address checksum","address",n);else if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(n.substring(2,4)!==qJ(n)&&Nl.throwArgumentError("bad icap checksum","address",n),e=MJ(n.substring(4));e.length<40;)e="0"+e;e=I1("0x"+e)}else Nl.throwArgumentError("invalid address","address",n);return e}function jI(n){let e=null;try{e=lr(n.from)}catch{Nl.throwArgumentError("missing from address","transaction",n)}const t=Iu(ot(Ce.from(n.nonce).toHexString()));return lr(mr(qn(S0([e,t])),12))}class $J extends $o{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=lr(t)}catch(r){this._throwError(r.message,t)}return e.writeValue(t)}decode(e){return lr(Mn(e.readValue().toHexString(),20))}}class XJ extends $o{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const Bl=new ie(Kd);function qI(n,e,t){let r=null;if(Array.isArray(t))r=t;else if(t&&typeof t=="object"){let c={};r=e.map(l=>{const u=l.localName;return u||Bl.throwError("cannot encode object for signature with missing names",ie.errors.INVALID_ARGUMENT,{argument:"values",coder:l,value:t}),c[u]&&Bl.throwError("cannot encode object for signature with duplicate names",ie.errors.INVALID_ARGUMENT,{argument:"values",coder:l,value:t}),c[u]=!0,t[u]})}else Bl.throwArgumentError("invalid tuple value","tuple",t);e.length!==r.length&&Bl.throwArgumentError("types/value length mismatch","tuple",t);let i=new a_(n.wordSize),s=new a_(n.wordSize),o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let f=s.length;c.encode(s,u);let d=i.writeUpdatableValue();o.push(p=>{d(p+f)})}else c.encode(i,u)}),o.forEach(c=>{c(i.length)});let a=n.appendWriter(i);return a+=n.appendWriter(s),a}function $I(n,e){let t=[],r=n.subReader(0);e.forEach(s=>{let o=null;if(s.dynamic){let a=n.readValue(),c=r.subReader(a.toNumber());try{o=s.decode(c)}catch(l){if(l.code===ie.errors.BUFFER_OVERRUN)throw l;o=l,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(n)}catch(a){if(a.code===ie.errors.BUFFER_OVERRUN)throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}o!=null&&t.push(o)});const i=e.reduce((s,o)=>{const a=o.localName;return a&&(s[a]||(s[a]=0),s[a]++),s},{});e.forEach((s,o)=>{let a=s.localName;if(!a||i[a]!==1||(a==="length"&&(a="_length"),t[a]!=null))return;const c=t[o];c instanceof Error?Object.defineProperty(t,a,{enumerable:!0,get:()=>{throw c}}):t[a]=c});for(let s=0;s<t.length;s++){const o=t[s];o instanceof Error&&Object.defineProperty(t,s,{enumerable:!0,get:()=>{throw o}})}return Object.freeze(t)}class KJ extends $o{constructor(e,t,r){const i=e.type+"["+(t>=0?t:"")+"]",s=t===-1||e.dynamic;super("array",i,r,s),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let r=this.length;r===-1&&(r=t.length,e.writeValue(t.length)),Bl.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<t.length;s++)i.push(this.coder);return qI(e,i,t)}decode(e){let t=this.length;t===-1&&(t=e.readValue().toNumber(),t*32>e._data.length&&Bl.throwError("insufficient data length",ie.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let r=[];for(let i=0;i<t;i++)r.push(new XJ(this.coder));return e.coerce(this.name,$I(e,r))}}class YJ extends $o{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class XI extends $o{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=ot(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class QJ extends XI{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,Qe(super.decode(e)))}}class ZJ extends $o{constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let r=ot(t);return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return e.coerce(this.name,Qe(e.readBytes(this.size)))}}class JJ extends $o{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const eee="0x0000000000000000000000000000000000000000",tee=Ce.from(-1),KI=Ce.from(0),nee=Ce.from(1),ree=Ce.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),iee="0x0000000000000000000000000000000000000000000000000000000000000000";class see extends $o{constructor(e,t,r){const i=(t?"int":"uint")+e*8;super(i,i,r,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let r=Ce.from(t),i=ree.mask(e.wordSize*8);if(this.signed){let s=i.mask(this.size*8-1);(r.gt(s)||r.lt(s.add(nee).mul(tee)))&&this._throwError("value out-of-bounds",t)}else(r.lt(KI)||r.gt(i.mask(this.size*8)))&&this._throwError("value out-of-bounds",t);return r=r.toTwos(this.size*8).mask(this.size*8),this.signed&&(r=r.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(r)}decode(e){let t=e.readValue().mask(this.size*8);return this.signed&&(t=t.fromTwos(this.size*8)),e.coerce(this.name,t)}}const oee="strings/5.7.0",YI=new ie(oee);var Md;(function(n){n.current="",n.NFC="NFC",n.NFD="NFD",n.NFKC="NFKC",n.NFKD="NFKD"})(Md||(Md={}));var si;(function(n){n.UNEXPECTED_CONTINUE="unexpected continuation byte",n.BAD_PREFIX="bad codepoint prefix",n.OVERRUN="string overrun",n.MISSING_CONTINUE="missing continuation byte",n.OUT_OF_RANGE="out of UTF-8 range",n.UTF16_SURROGATE="UTF-16 surrogate",n.OVERLONG="overlong representation"})(si||(si={}));function aee(n,e,t,r,i){return YI.throwArgumentError(`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function QI(n,e,t,r,i){if(n===si.BAD_PREFIX||n===si.UNEXPECTED_CONTINUE){let s=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)s++;return s}return n===si.OVERRUN?t.length-e-1:0}function cee(n,e,t,r,i){return n===si.OVERLONG?(r.push(i),0):(r.push(65533),QI(n,e,t))}const lee=Object.freeze({error:aee,ignore:QI,replace:cee});function ZI(n,e){e==null&&(e=lee.error),n=ot(n);const t=[];let r=0;for(;r<n.length;){const i=n[r++];if(!(i>>7)){t.push(i);continue}let s=null,o=null;if((i&224)===192)s=1,o=127;else if((i&240)===224)s=2,o=2047;else if((i&248)===240)s=3,o=65535;else{(i&192)===128?r+=e(si.UNEXPECTED_CONTINUE,r-1,n,t):r+=e(si.BAD_PREFIX,r-1,n,t);continue}if(r-1+s>=n.length){r+=e(si.OVERRUN,r-1,n,t);continue}let a=i&(1<<8-s-1)-1;for(let c=0;c<s;c++){let l=n[r];if((l&192)!=128){r+=e(si.MISSING_CONTINUE,r,n,t),a=null;break}a=a<<6|l&63,r++}if(a!==null){if(a>1114111){r+=e(si.OUT_OF_RANGE,r-1-s,n,t,a);continue}if(a>=55296&&a<=57343){r+=e(si.UTF16_SURROGATE,r-1-s,n,t,a);continue}if(a<=o){r+=e(si.OVERLONG,r-1-s,n,t,a);continue}t.push(a)}}return t}function qs(n,e=Md.current){e!=Md.current&&(YI.checkNormalize(),n=n.normalize(e));let t=[];for(let r=0;r<n.length;r++){const i=n.charCodeAt(r);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){r++;const s=n.charCodeAt(r);if(r>=n.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((i&1023)<<10)+(s&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return ot(t)}function uee(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Yd(n,e){return uee(ZI(n,e))}function fee(n,e=Md.current){return ZI(qs(n,e))}class dee extends XI{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,qs(t))}decode(e){return Yd(super.decode(e))}}class Oh extends $o{constructor(e,t){let r=!1;const i=[];e.forEach(o=>{o.dynamic&&(r=!0),i.push(o.type)});const s="tuple("+i.join(",")+")";super("tuple",s,t,r),this.coders=e}defaultValue(){const e=[];this.coders.forEach(r=>{e.push(r.defaultValue())});const t=this.coders.reduce((r,i)=>{const s=i.localName;return s&&(r[s]||(r[s]=0),r[s]++),r},{});return this.coders.forEach((r,i)=>{let s=r.localName;!s||t[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,t){return qI(e,this.coders,t)}decode(e){return e.coerce(this.name,$I(e,this.coders))}}const Uh=new ie(Kd),hee=new RegExp(/^bytes([0-9]*)$/),pee=new RegExp(/^(u?int)([0-9]*)$/);class mee{constructor(e){Ae(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new $J(e.name);case"bool":return new YJ(e.name);case"string":return new dee(e.name);case"bytes":return new QJ(e.name);case"array":return new KJ(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new Oh((e.components||[]).map(r=>this._getCoder(r)),e.name);case"":return new JJ(e.name)}let t=e.type.match(pee);if(t){let r=parseInt(t[2]||"256");return(r===0||r>256||r%8!==0)&&Uh.throwArgumentError("invalid "+t[1]+" bit length","param",e),new see(r/8,t[1]==="int",e.name)}if(t=e.type.match(hee),t){let r=parseInt(t[1]);return(r===0||r>32)&&Uh.throwArgumentError("invalid bytes length","param",e),new ZJ(r,e.name)}return Uh.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new Im(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new a_(this._getWordSize())}getDefaultValue(e){const t=e.map(i=>this._getCoder(tr.from(i)));return new Oh(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&Uh.throwError("types/values length mismatch",ie.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const r=e.map(o=>this._getCoder(tr.from(o))),i=new Oh(r,"_"),s=this._getWriter();return i.encode(s,t),s.data}decode(e,t,r){const i=e.map(o=>this._getCoder(tr.from(o)));return new Oh(i,"_").decode(this._getReader(ot(t),r))}}const gee=new mee;function Ll(n){return qn(qs(n))}const JI="hash/5.7.0";function eC(n){n=atob(n);const e=[];for(let t=0;t<n.length;t++)e.push(n.charCodeAt(t));return ot(e)}function tC(n){n=ot(n);let e="";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return btoa(e)}function nC(n,e){e==null&&(e=1);const t=[],r=t.forEach,i=function(s,o){r.call(s,function(a){o>0&&Array.isArray(a)?i(a,o-1):t.push(a)})};return i(n,e),t}function vee(n){const e={};for(let t=0;t<n.length;t++){const r=n[t];e[r[0]]=r[1]}return e}function yee(n){let e=0;function t(){return n[e++]<<8|n[e++]}let r=t(),i=1,s=[0,1];for(let C=1;C<r;C++)s.push(i+=t());let o=t(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|n[e++],c=8),l>>--c&1}const f=31,d=Math.pow(2,f),p=d>>>1,v=p>>1,m=d-1;let y=0;for(let C=0;C<f;C++)y=y<<1|u();let h=[],w=0,S=d;for(;;){let C=Math.floor(((y-w+1)*i-1)/S),B=0,O=r;for(;O-B>1;){let I=B+O>>>1;C<s[I]?O=I:B=I}if(B==0)break;h.push(B);let P=w+Math.floor(S*s[B]/i),N=w+Math.floor(S*s[B+1]/i)-1;for(;!((P^N)&p);)y=y<<1&m|u(),P=P<<1&m,N=N<<1&m|1;for(;P&~N&v;)y=y&p|y<<1&m>>>1|u(),P=P<<1^p,N=(N^p)<<1|p|1;w=P,S=1+N-P}let T=r-4;return h.map(C=>{switch(C-T){case 3:return T+65792+(n[a++]<<16|n[a++]<<8|n[a++]);case 2:return T+256+(n[a++]<<8|n[a++]);case 1:return T+n[a++];default:return C-1}})}function _ee(n){let e=0;return()=>n[e++]}function bee(n){return _ee(yee(n))}function xee(n){return n&1?~n>>1:n>>1}function wee(n,e){let t=Array(n);for(let r=0;r<n;r++)t[r]=1+e();return t}function P1(n,e){let t=Array(n);for(let r=0,i=-1;r<n;r++)t[r]=i+=1+e();return t}function Aee(n,e){let t=Array(n);for(let r=0,i=0;r<n;r++)t[r]=i+=xee(e());return t}function Cm(n,e){let t=P1(n(),n),r=n(),i=P1(r,n),s=wee(r,n);for(let o=0;o<r;o++)for(let a=0;a<s[o];a++)t.push(i[o]+a);return e?t.map(o=>e[o]):t}function Eee(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(Tee(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(Mee(t,n))}return vee(nC(e))}function See(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(t)}return e}function rC(n,e,t){let r=Array(n).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)Aee(n,t).forEach((s,o)=>r[o].push(s));return r}function Tee(n,e){let t=1+e(),r=e(),i=See(e),s=rC(i.length,1+n,e);return nC(s.map((o,a)=>{const c=o[0],l=o.slice(1);return Array(i[a]).fill(void 0).map((u,f)=>{let d=f*r;return[c+f*t,l.map(p=>p+d)]})}))}function Mee(n,e){let t=1+e();return rC(t,1+n,e).map(i=>[i[0],i.slice(1)])}function Ree(n){let e=Cm(n).sort((r,i)=>r-i);return t();function t(){let r=[];for(;;){let l=Cm(n,e);if(l.length==0)break;r.push({set:new Set(l),node:t()})}r.sort((l,u)=>u.set.size-l.set.size);let i=n(),s=i%3;i=i/3|0;let o=!!(i&1);i>>=1;let a=i==1,c=i==2;return{branches:r,valid:s,fe0f:o,save:a,check:c}}}function Iee(){return bee(eC("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const T0=Iee(),Cee=new Set(Cm(T0)),Pee=new Set(Cm(T0)),Nee=Eee(T0),Bee=Ree(T0),N1=45,B1=95;function iC(n){return fee(n)}function Lee(n){return n.filter(e=>e!=65039)}function sC(n){for(let e of n.split(".")){let t=iC(e);try{for(let r=t.lastIndexOf(B1)-1;r>=0;r--)if(t[r]!==B1)throw new Error("underscore only allowed at start");if(t.length>=4&&t.every(r=>r<128)&&t[2]===N1&&t[3]===N1)throw new Error("invalid label extension")}catch(r){throw new Error(`Invalid label "${e}": ${r.message}`)}}return n}function kee(n){return sC(Dee(n,Lee))}function Dee(n,e){let t=iC(n).reverse(),r=[];for(;t.length;){let i=Uee(t);if(i){r.push(...e(i));continue}let s=t.pop();if(Cee.has(s)){r.push(s);continue}if(Pee.has(s))continue;let o=Nee[s];if(o){r.push(...o);continue}throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`)}return sC(Oee(String.fromCodePoint(...r)))}function Oee(n){return n.normalize("NFC")}function Uee(n,e){var t;let r=Bee,i,s,o=[],a=n.length;for(e&&(e.length=0);a;){let c=n[--a];if(r=(t=r.branches.find(l=>l.set.has(c)))===null||t===void 0?void 0:t.node,!r)break;if(r.save)s=c;else if(r.check&&c===s)break;o.push(c),r.fe0f&&(o.push(65039),a>0&&n[a-1]==65039&&a--),r.valid&&(i=o.slice(),r.valid==2&&i.splice(1,1),e&&e.push(...n.slice(a).reverse()),n.length=a)}return i}const Fee=new ie(JI),oC=new Uint8Array(32);oC.fill(0);function L1(n){if(n.length===0)throw new Error("invalid ENS name; empty component");return n}function aC(n){const e=qs(kee(n)),t=[];if(n.length===0)return t;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(L1(e.slice(r,i))),r=i+1);if(r>=e.length)throw new Error("invalid ENS name; empty component");return t.push(L1(e.slice(r))),t}function fp(n){typeof n!="string"&&Fee.throwArgumentError("invalid ENS name; not a string","name",n);let e=oC;const t=aC(n);for(;t.length;)e=qn(li([e,qn(t.pop())]));return Qe(e)}function Hee(n){return Qe(li(aC(n).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"}var zee=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const In=new ie(JI),cC=new Uint8Array(32);cC.fill(0);const Gee=Ce.from(-1),lC=Ce.from(0),uC=Ce.from(1),Vee=Ce.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Wee(n){const e=ot(n),t=e.length%32;return t?Gr([e,cC.slice(t)]):Qe(e)}const jee=Mn(uC.toHexString(),32),qee=Mn(lC.toHexString(),32),k1={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},nv=["name","version","chainId","verifyingContract","salt"];function D1(n){return function(e){return typeof e!="string"&&In.throwArgumentError(`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const $ee={name:D1("name"),version:D1("version"),chainId:function(n){try{return Ce.from(n).toString()}catch{}return In.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",n)},verifyingContract:function(n){try{return lr(n).toLowerCase()}catch{}return In.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){try{const e=ot(n);if(e.length!==32)throw new Error("bad length");return Qe(e)}catch{}return In.throwArgumentError('invalid domain value "salt"',"domain.salt",n)}};function rv(n){{const e=n.match(/^(u?)int(\d*)$/);if(e){const t=e[1]==="",r=parseInt(e[2]||"256");(r%8!==0||r>256||e[2]&&e[2]!==String(r))&&In.throwArgumentError("invalid numeric width","type",n);const i=Vee.mask(t?r-1:r),s=t?i.add(uC).mul(Gee):lC;return function(o){const a=Ce.from(o);return(a.lt(s)||a.gt(i))&&In.throwArgumentError(`value out-of-bounds for ${n}`,"value",o),Mn(a.toTwos(256).toHexString(),32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return(t===0||t>32||e[1]!==String(t))&&In.throwArgumentError("invalid bytes width","type",n),function(r){return ot(r).length!==t&&In.throwArgumentError(`invalid length for ${n}`,"value",r),Wee(r)}}}switch(n){case"address":return function(e){return Mn(lr(e),32)};case"bool":return function(e){return e?jee:qee};case"bytes":return function(e){return qn(e)};case"string":return function(e){return Ll(e)}}return null}function O1(n,e){return`${n}(${e.map(({name:t,type:r})=>r+" "+t).join(",")})`}class ii{constructor(e){Ae(this,"types",Object.freeze(Fo(e))),Ae(this,"_encoderCache",{}),Ae(this,"_types",{});const t={},r={},i={};Object.keys(e).forEach(a=>{t[a]={},r[a]=[],i[a]={}});for(const a in e){const c={};e[a].forEach(l=>{c[l.name]&&In.throwArgumentError(`duplicate variable name ${JSON.stringify(l.name)} in ${JSON.stringify(a)}`,"types",e),c[l.name]=!0;const u=l.type.match(/^([^\x5b]*)(\x5b|$)/)[1];u===a&&In.throwArgumentError(`circular type reference to ${JSON.stringify(u)}`,"types",e),!rv(u)&&(r[u]||In.throwArgumentError(`unknown type ${JSON.stringify(u)}`,"types",e),r[u].push(a),t[a][u]=!0)})}const s=Object.keys(r).filter(a=>r[a].length===0);s.length===0?In.throwArgumentError("missing primary type","types",e):s.length>1&&In.throwArgumentError(`ambiguous primary types or unused types: ${s.map(a=>JSON.stringify(a)).join(", ")}`,"types",e),Ae(this,"primaryType",s[0]);function o(a,c){c[a]&&In.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e),c[a]=!0,Object.keys(t[a]).forEach(l=>{r[l]&&(o(l,c),Object.keys(c).forEach(u=>{i[u][l]=!0}))}),delete c[a]}o(this.primaryType,{});for(const a in i){const c=Object.keys(i[a]);c.sort(),this._types[a]=O1(a,e[a])+c.map(l=>O1(l,e[l])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const i=rv(e);if(i)return i}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const i=t[1],s=this.getEncoder(i),o=parseInt(t[3]);return a=>{o>=0&&a.length!==o&&In.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",a);let c=a.map(s);return this._types[i]&&(c=c.map(qn)),qn(Gr(c))}}const r=this.types[e];if(r){const i=Ll(this._types[e]);return s=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(s[a]);return this._types[c]?qn(l):l});return o.unshift(i),Gr(o)}}return In.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||In.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return qn(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(rv(e))return r(e,t);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const o=i[1],a=parseInt(i[3]);return a>=0&&t.length!==a&&In.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(c=>this._visit(o,c,r))}const s=this.types[e];return s?s.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,t[a],r),o),{}):In.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new ii(e)}static getPrimaryType(e){return ii.from(e).primaryType}static hashStruct(e,t,r){return ii.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){const i=k1[r];i||In.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:i})}return t.sort((r,i)=>nv.indexOf(r.name)-nv.indexOf(i.name)),ii.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return Gr(["0x1901",ii.hashDomain(e),ii.from(t).hash(r)])}static hash(e,t,r){return qn(ii.encode(e,t,r))}static resolveNames(e,t,r,i){return zee(this,void 0,void 0,function*(){e=Xn(e);const s={};e.verifyingContract&&!Qt(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=ii.from(t);o.visit(r,(a,c)=>(a==="address"&&!Qt(c,20)&&(s[c]="0x"),c));for(const a in s)s[a]=yield i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&s[c]?s[c]:c),{domain:e,value:r}})}static getPayload(e,t,r){ii.hashDomain(e);const i={},s=[];nv.forEach(c=>{const l=e[c];l!=null&&(i[c]=$ee[c](l),s.push({name:c,type:k1[c]}))});const o=ii.from(t),a=Xn(t);return a.EIP712Domain?In.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return Qe(ot(l));if(c.match(/^u?int/))return Ce.from(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return typeof l!="string"&&In.throwArgumentError("invalid string","value",l),l}return In.throwArgumentError("unsupported type","type",c)})}}}const Rn=new ie(Kd);class Xee extends Xd{}class Kee extends Xd{}class Yee extends Xd{}class c_ extends Xd{static isIndexed(e){return!!(e&&e._isIndexed)}}const Qee={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function U1(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);return t.error=e,t}class F1{constructor(e){let t=[];typeof e=="string"?t=JSON.parse(e):t=e,Ae(this,"fragments",t.map(r=>Mo.from(r)).filter(r=>r!=null)),Ae(this,"_abiCoder",Ls(new.target,"getAbiCoder")()),Ae(this,"functions",{}),Ae(this,"errors",{}),Ae(this,"events",{}),Ae(this,"structs",{}),this.fragments.forEach(r=>{let i=null;switch(r.type){case"constructor":if(this.deploy){Rn.warn("duplicate definition - constructor");return}Ae(this,"deploy",r);return;case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=r.format();if(i[s]){Rn.warn("duplicate definition - "+s);return}i[s]=r}),this.deploy||Ae(this,"deploy",Ms.from({payable:!1,type:"constructor"})),Ae(this,"_isInterface",!0)}format(e){e||(e=Yt.full),e===Yt.sighash&&Rn.throwArgumentError("interface does not support formatting sighash","format",e);const t=this.fragments.map(r=>r.format(e));return e===Yt.json?JSON.stringify(t.map(r=>JSON.parse(r))):t}static getAbiCoder(){return gee}static getAddress(e){return lr(e)}static getSighash(e){return mr(Ll(e.format()),0,4)}static getEventTopic(e){return Ll(e.format())}getFunction(e){if(Qt(e)){for(const r in this.functions)if(e===this.getSighash(r))return this.functions[r];Rn.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===r);return i.length===0?Rn.throwArgumentError("no matching function","name",r):i.length>1&&Rn.throwArgumentError("multiple matching functions","name",r),this.functions[i[0]]}const t=this.functions[Rs.fromString(e).format()];return t||Rn.throwArgumentError("no matching function","signature",e),t}getEvent(e){if(Qt(e)){const r=e.toLowerCase();for(const i in this.events)if(r===this.getEventTopic(i))return this.events[i];Rn.throwArgumentError("no matching event","topichash",r)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===r);return i.length===0?Rn.throwArgumentError("no matching event","name",r):i.length>1&&Rn.throwArgumentError("multiple matching events","name",r),this.events[i[0]]}const t=this.events[wo.fromString(e).format()];return t||Rn.throwArgumentError("no matching event","signature",e),t}getError(e){if(Qt(e)){const r=Ls(this.constructor,"getSighash");for(const i in this.errors){const s=this.errors[i];if(e===r(s))return this.errors[i]}Rn.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===r);return i.length===0?Rn.throwArgumentError("no matching error","name",r):i.length>1&&Rn.throwArgumentError("multiple matching errors","name",r),this.errors[i[0]]}const t=this.errors[Rs.fromString(e).format()];return t||Rn.throwArgumentError("no matching error","signature",e),t}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch{throw t}}return Ls(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),Ls(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){typeof e=="string"&&(e=this.getError(e));const r=ot(t);return Qe(r.slice(0,4))!==this.getSighash(e)&&Rn.throwArgumentError(`data signature does not match error ${e.name}.`,"data",Qe(r)),this._decodeParams(e.inputs,r.slice(4))}encodeErrorResult(e,t){return typeof e=="string"&&(e=this.getError(e)),Qe(li([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){typeof e=="string"&&(e=this.getFunction(e));const r=ot(t);return Qe(r.slice(0,4))!==this.getSighash(e)&&Rn.throwArgumentError(`data signature does not match function ${e.name}.`,"data",Qe(r)),this._decodeParams(e.inputs,r.slice(4))}encodeFunctionData(e,t){return typeof e=="string"&&(e=this.getFunction(e)),Qe(li([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){typeof e=="string"&&(e=this.getFunction(e));let r=ot(t),i=null,s="",o=null,a=null,c=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,r)}catch{}break;case 4:{const l=Qe(r.slice(0,4)),u=Qee[l];if(u)o=this._abiCoder.decode(u.inputs,r.slice(4)),a=u.name,c=u.signature,u.reason&&(i=o[0]),a==="Error"?s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:a==="Panic"&&(s=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const f=this.getError(l);o=this._abiCoder.decode(f.inputs,r.slice(4)),a=f.name,c=f.format()}catch{}break}}return Rn.throwError("call revert exception"+s,ie.errors.CALL_EXCEPTION,{method:e.format(),data:Qe(t),errorArgs:o,errorName:a,errorSignature:c,reason:i})}encodeFunctionResult(e,t){return typeof e=="string"&&(e=this.getFunction(e)),Qe(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){typeof e=="string"&&(e=this.getEvent(e)),t.length>e.inputs.length&&Rn.throwError("too many arguments for "+e.format(),ie.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let r=[];e.anonymous||r.push(this.getEventTopic(e));const i=(s,o)=>s.type==="string"?Ll(o):s.type==="bytes"?qn(Qe(o)):(s.type==="bool"&&typeof o=="boolean"&&(o=o?"0x01":"0x00"),s.type.match(/^u?int/)&&(o=Ce.from(o).toHexString()),s.type==="address"&&this._abiCoder.encode(["address"],[o]),Mn(Qe(o),32));for(t.forEach((s,o)=>{let a=e.inputs[o];if(!a.indexed){s!=null&&Rn.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?Rn.throwArgumentError("filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(c=>i(a,c))):r.push(i(a,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,t){typeof e=="string"&&(e=this.getEvent(e));const r=[],i=[],s=[];return e.anonymous||r.push(this.getEventTopic(e)),t.length!==e.inputs.length&&Rn.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach((o,a)=>{const c=t[a];if(o.indexed)if(o.type==="string")r.push(Ll(c));else if(o.type==="bytes")r.push(qn(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(this._abiCoder.encode([o.type],[c]))}else i.push(o),s.push(c)}),{data:this._abiCoder.encode(i,s),topics:r}}decodeEventLog(e,t,r){if(typeof e=="string"&&(e=this.getEvent(e)),r!=null&&!e.anonymous){let d=this.getEventTopic(e);(!Qt(r[0],32)||r[0].toLowerCase()!==d)&&Rn.throwError("fragment/topic mismatch",ie.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:d,value:r[0]}),r=r.slice(1)}let i=[],s=[],o=[];e.inputs.forEach((d,p)=>{d.indexed?d.type==="string"||d.type==="bytes"||d.baseType==="tuple"||d.baseType==="array"?(i.push(tr.fromObject({type:"bytes32",name:d.name})),o.push(!0)):(i.push(d),o.push(!1)):(s.push(d),o.push(!1))});let a=r!=null?this._abiCoder.decode(i,li(r)):null,c=this._abiCoder.decode(s,t,!0),l=[],u=0,f=0;e.inputs.forEach((d,p)=>{if(d.indexed)if(a==null)l[p]=new c_({_isIndexed:!0,hash:null});else if(o[p])l[p]=new c_({_isIndexed:!0,hash:a[f++]});else try{l[p]=a[f++]}catch(v){l[p]=v}else try{l[p]=c[u++]}catch(v){l[p]=v}if(d.name&&l[d.name]==null){const v=l[p];v instanceof Error?Object.defineProperty(l,d.name,{enumerable:!0,get:()=>{throw U1(`property ${JSON.stringify(d.name)}`,v)}}):l[d.name]=v}});for(let d=0;d<l.length;d++){const p=l[d];p instanceof Error&&Object.defineProperty(l,d,{enumerable:!0,get:()=>{throw U1(`index ${d}`,p)}})}return Object.freeze(l)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new Kee({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:Ce.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new Xee({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=Qe(e);let r=this.getError(t.substring(0,10).toLowerCase());return r?new Yee({args:this._abiCoder.decode(r.inputs,"0x"+t.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const Zee="abstract-provider/5.7.0";var Jee=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const ete=new ie(Zee);class tte extends Xd{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class M0{constructor(){ete.checkAbstract(new.target,M0),Ae(this,"_isProvider",!0)}getFeeData(){return Jee(this,void 0,void 0,function*(){const{block:e,gasPrice:t}=yield zn({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(o=>null)});let r=null,i=null,s=null;return e&&e.baseFeePerGas&&(r=e.baseFeePerGas,s=Ce.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:r,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:t}})}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!!(e&&e._isProvider)}}const nte="abstract-signer/5.7.0";var Wi=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const Ai=new ie(nte),rte=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],ite=[ie.errors.INSUFFICIENT_FUNDS,ie.errors.NONCE_EXPIRED,ie.errors.REPLACEMENT_UNDERPRICED];class Qd{constructor(){Ai.checkAbstract(new.target,Qd),Ae(this,"_isSigner",!0)}getBalance(e){return Wi(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return Wi(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return Wi(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const t=yield zn(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return Wi(this,void 0,void 0,function*(){this._checkProvider("call");const r=yield zn(this.checkTransaction(e));return yield this.provider.call(r,t)})}sendTransaction(e){return Wi(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),r=yield this.signTransaction(t);return yield this.provider.sendTransaction(r)})}getChainId(){return Wi(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return Wi(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return Wi(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return Wi(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const r in e)rte.indexOf(r)===-1&&Ai.throwArgumentError("invalid transaction key: "+r,"transaction",e);const t=Xn(e);return t.from==null?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then(r=>(r[0].toLowerCase()!==r[1].toLowerCase()&&Ai.throwArgumentError("from address mismatch","transaction",e),r[0])),t}populateTransaction(e){return Wi(this,void 0,void 0,function*(){const t=yield zn(this.checkTransaction(e));t.to!=null&&(t.to=Promise.resolve(t.to).then(i=>Wi(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&Ai.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),t.to.catch(i=>{}));const r=t.maxFeePerGas!=null||t.maxPriorityFeePerGas!=null;if(t.gasPrice!=null&&(t.type===2||r)?Ai.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(t.type===0||t.type===1)&&r&&Ai.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(t.type===2||t.type==null)&&t.maxFeePerGas!=null&&t.maxPriorityFeePerGas!=null)t.type=2;else if(t.type===0||t.type===1)t.gasPrice==null&&(t.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(t.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(t.type=2,t.gasPrice!=null){const s=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=s,t.maxPriorityFeePerGas=s}else t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(r&&Ai.throwError("network does not support EIP-1559",ie.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),t.gasPrice==null&&(t.gasPrice=i.gasPrice),t.type=0):Ai.throwError("failed to get consistent fee data",ie.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else t.type===2&&(t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return t.nonce==null&&(t.nonce=this.getTransactionCount("pending")),t.gasLimit==null&&(t.gasLimit=this.estimateGas(t).catch(i=>{if(ite.indexOf(i.code)>=0)throw i;return Ai.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",ie.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:t})})),t.chainId==null?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&Ai.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield zn(t)})}_checkProvider(e){this.provider||Ai.throwError("missing provider",ie.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class Sx extends Qd{constructor(e,t){super(),Ae(this,"address",e),Ae(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then(()=>{Ai.throwError(e,ie.errors.UNSUPPORTED_OPERATION,{operation:t})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,r){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new Sx(this.address,e)}}var fC={},Dt={},Zd=dC;function dC(n,e){if(!n)throw new Error(e||"Assertion failed")}dC.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var l_={exports:{}};typeof Object.create=="function"?l_.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:l_.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var ste=l_.exports,ote=Zd,ate=ste;Dt.inherits=ate;function cte(n,e){return(n.charCodeAt(e)&64512)!==55296||e<0||e+1>=n.length?!1:(n.charCodeAt(e+1)&64512)===56320}function lte(n,e){if(Array.isArray(n))return n.slice();if(!n)return[];var t=[];if(typeof n=="string")if(e){if(e==="hex")for(n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n),i=0;i<n.length;i+=2)t.push(parseInt(n[i]+n[i+1],16))}else for(var r=0,i=0;i<n.length;i++){var s=n.charCodeAt(i);s<128?t[r++]=s:s<2048?(t[r++]=s>>6|192,t[r++]=s&63|128):cte(n,i)?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),t[r++]=s>>18|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=s&63|128):(t[r++]=s>>12|224,t[r++]=s>>6&63|128,t[r++]=s&63|128)}else for(i=0;i<n.length;i++)t[i]=n[i]|0;return t}Dt.toArray=lte;function ute(n){for(var e="",t=0;t<n.length;t++)e+=pC(n[t].toString(16));return e}Dt.toHex=ute;function hC(n){var e=n>>>24|n>>>8&65280|n<<8&16711680|(n&255)<<24;return e>>>0}Dt.htonl=hC;function fte(n,e){for(var t="",r=0;r<n.length;r++){var i=n[r];e==="little"&&(i=hC(i)),t+=mC(i.toString(16))}return t}Dt.toHex32=fte;function pC(n){return n.length===1?"0"+n:n}Dt.zero2=pC;function mC(n){return n.length===7?"0"+n:n.length===6?"00"+n:n.length===5?"000"+n:n.length===4?"0000"+n:n.length===3?"00000"+n:n.length===2?"000000"+n:n.length===1?"0000000"+n:n}Dt.zero8=mC;function dte(n,e,t,r){var i=t-e;ote(i%4===0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var c;r==="big"?c=n[a]<<24|n[a+1]<<16|n[a+2]<<8|n[a+3]:c=n[a+3]<<24|n[a+2]<<16|n[a+1]<<8|n[a],s[o]=c>>>0}return s}Dt.join32=dte;function hte(n,e){for(var t=new Array(n.length*4),r=0,i=0;r<n.length;r++,i+=4){var s=n[r];e==="big"?(t[i]=s>>>24,t[i+1]=s>>>16&255,t[i+2]=s>>>8&255,t[i+3]=s&255):(t[i+3]=s>>>24,t[i+2]=s>>>16&255,t[i+1]=s>>>8&255,t[i]=s&255)}return t}Dt.split32=hte;function pte(n,e){return n>>>e|n<<32-e}Dt.rotr32=pte;function mte(n,e){return n<<e|n>>>32-e}Dt.rotl32=mte;function gte(n,e){return n+e>>>0}Dt.sum32=gte;function vte(n,e,t){return n+e+t>>>0}Dt.sum32_3=vte;function yte(n,e,t,r){return n+e+t+r>>>0}Dt.sum32_4=yte;function _te(n,e,t,r,i){return n+e+t+r+i>>>0}Dt.sum32_5=_te;function bte(n,e,t,r){var i=n[e],s=n[e+1],o=r+s>>>0,a=(o<r?1:0)+t+i;n[e]=a>>>0,n[e+1]=o}Dt.sum64=bte;function xte(n,e,t,r){var i=e+r>>>0,s=(i<e?1:0)+n+t;return s>>>0}Dt.sum64_hi=xte;function wte(n,e,t,r){var i=e+r;return i>>>0}Dt.sum64_lo=wte;function Ate(n,e,t,r,i,s,o,a){var c=0,l=e;l=l+r>>>0,c+=l<e?1:0,l=l+s>>>0,c+=l<s?1:0,l=l+a>>>0,c+=l<a?1:0;var u=n+t+i+o+c;return u>>>0}Dt.sum64_4_hi=Ate;function Ete(n,e,t,r,i,s,o,a){var c=e+r+s+a;return c>>>0}Dt.sum64_4_lo=Ete;function Ste(n,e,t,r,i,s,o,a,c,l){var u=0,f=e;f=f+r>>>0,u+=f<e?1:0,f=f+s>>>0,u+=f<s?1:0,f=f+a>>>0,u+=f<a?1:0,f=f+l>>>0,u+=f<l?1:0;var d=n+t+i+o+c+u;return d>>>0}Dt.sum64_5_hi=Ste;function Tte(n,e,t,r,i,s,o,a,c,l){var u=e+r+s+a+l;return u>>>0}Dt.sum64_5_lo=Tte;function Mte(n,e,t){var r=e<<32-t|n>>>t;return r>>>0}Dt.rotr64_hi=Mte;function Rte(n,e,t){var r=n<<32-t|e>>>t;return r>>>0}Dt.rotr64_lo=Rte;function Ite(n,e,t){return n>>>t}Dt.shr64_hi=Ite;function Cte(n,e,t){var r=n<<32-t|e>>>t;return r>>>0}Dt.shr64_lo=Cte;var Ku={},H1=Dt,Pte=Zd;function R0(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Ku.BlockHash=R0;R0.prototype.update=function(e,t){if(e=H1.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var r=e.length%this._delta8;this.pending=e.slice(e.length-r,e.length),this.pending.length===0&&(this.pending=null),e=H1.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};R0.prototype.digest=function(e){return this.update(this._pad()),Pte(this.pending===null),this._digest(e)};R0.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,i=new Array(r+this.padLength);i[0]=128;for(var s=1;s<r;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var Yu={},Qs={},Nte=Dt,Fs=Nte.rotr32;function Bte(n,e,t,r){if(n===0)return gC(e,t,r);if(n===1||n===3)return yC(e,t,r);if(n===2)return vC(e,t,r)}Qs.ft_1=Bte;function gC(n,e,t){return n&e^~n&t}Qs.ch32=gC;function vC(n,e,t){return n&e^n&t^e&t}Qs.maj32=vC;function yC(n,e,t){return n^e^t}Qs.p32=yC;function Lte(n){return Fs(n,2)^Fs(n,13)^Fs(n,22)}Qs.s0_256=Lte;function kte(n){return Fs(n,6)^Fs(n,11)^Fs(n,25)}Qs.s1_256=kte;function Dte(n){return Fs(n,7)^Fs(n,18)^n>>>3}Qs.g0_256=Dte;function Ote(n){return Fs(n,17)^Fs(n,19)^n>>>10}Qs.g1_256=Ote;var Cu=Dt,Ute=Ku,Fte=Qs,iv=Cu.rotl32,mf=Cu.sum32,Hte=Cu.sum32_5,zte=Fte.ft_1,_C=Ute.BlockHash,Gte=[1518500249,1859775393,2400959708,3395469782];function $s(){if(!(this instanceof $s))return new $s;_C.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Cu.inherits($s,_C);var Vte=$s;$s.blockSize=512;$s.outSize=160;$s.hmacStrength=80;$s.padLength=64;$s.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=iv(r[i-3]^r[i-8]^r[i-14]^r[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4];for(i=0;i<r.length;i++){var u=~~(i/20),f=Hte(iv(s,5),zte(u,o,a,c),l,r[i],Gte[u]);l=c,c=a,a=iv(o,30),o=s,s=f}this.h[0]=mf(this.h[0],s),this.h[1]=mf(this.h[1],o),this.h[2]=mf(this.h[2],a),this.h[3]=mf(this.h[3],c),this.h[4]=mf(this.h[4],l)};$s.prototype._digest=function(e){return e==="hex"?Cu.toHex32(this.h,"big"):Cu.split32(this.h,"big")};var Pu=Dt,Wte=Ku,Qu=Qs,jte=Zd,ji=Pu.sum32,qte=Pu.sum32_4,$te=Pu.sum32_5,Xte=Qu.ch32,Kte=Qu.maj32,Yte=Qu.s0_256,Qte=Qu.s1_256,Zte=Qu.g0_256,Jte=Qu.g1_256,bC=Wte.BlockHash,ene=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Xs(){if(!(this instanceof Xs))return new Xs;bC.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=ene,this.W=new Array(64)}Pu.inherits(Xs,bC);var xC=Xs;Xs.blockSize=512;Xs.outSize=256;Xs.hmacStrength=192;Xs.padLength=64;Xs.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=qte(Jte(r[i-2]),r[i-7],Zte(r[i-15]),r[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4],u=this.h[5],f=this.h[6],d=this.h[7];for(jte(this.k.length===r.length),i=0;i<r.length;i++){var p=$te(d,Qte(l),Xte(l,u,f),this.k[i],r[i]),v=ji(Yte(s),Kte(s,o,a));d=f,f=u,u=l,l=ji(c,p),c=a,a=o,o=s,s=ji(p,v)}this.h[0]=ji(this.h[0],s),this.h[1]=ji(this.h[1],o),this.h[2]=ji(this.h[2],a),this.h[3]=ji(this.h[3],c),this.h[4]=ji(this.h[4],l),this.h[5]=ji(this.h[5],u),this.h[6]=ji(this.h[6],f),this.h[7]=ji(this.h[7],d)};Xs.prototype._digest=function(e){return e==="hex"?Pu.toHex32(this.h,"big"):Pu.split32(this.h,"big")};var u_=Dt,wC=xC;function Ho(){if(!(this instanceof Ho))return new Ho;wC.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}u_.inherits(Ho,wC);var tne=Ho;Ho.blockSize=512;Ho.outSize=224;Ho.hmacStrength=192;Ho.padLength=64;Ho.prototype._digest=function(e){return e==="hex"?u_.toHex32(this.h.slice(0,7),"big"):u_.split32(this.h.slice(0,7),"big")};var Zr=Dt,nne=Ku,rne=Zd,Hs=Zr.rotr64_hi,zs=Zr.rotr64_lo,AC=Zr.shr64_hi,EC=Zr.shr64_lo,aa=Zr.sum64,sv=Zr.sum64_hi,ov=Zr.sum64_lo,ine=Zr.sum64_4_hi,sne=Zr.sum64_4_lo,one=Zr.sum64_5_hi,ane=Zr.sum64_5_lo,SC=nne.BlockHash,cne=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function ss(){if(!(this instanceof ss))return new ss;SC.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=cne,this.W=new Array(160)}Zr.inherits(ss,SC);var TC=ss;ss.blockSize=1024;ss.outSize=512;ss.hmacStrength=192;ss.padLength=128;ss.prototype._prepareBlock=function(e,t){for(var r=this.W,i=0;i<32;i++)r[i]=e[t+i];for(;i<r.length;i+=2){var s=_ne(r[i-4],r[i-3]),o=bne(r[i-4],r[i-3]),a=r[i-14],c=r[i-13],l=vne(r[i-30],r[i-29]),u=yne(r[i-30],r[i-29]),f=r[i-32],d=r[i-31];r[i]=ine(s,o,a,c,l,u,f,d),r[i+1]=sne(s,o,a,c,l,u,f,d)}};ss.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],l=this.h[5],u=this.h[6],f=this.h[7],d=this.h[8],p=this.h[9],v=this.h[10],m=this.h[11],y=this.h[12],h=this.h[13],w=this.h[14],S=this.h[15];rne(this.k.length===r.length);for(var T=0;T<r.length;T+=2){var C=w,B=S,O=mne(d,p),P=gne(d,p),N=lne(d,p,v,m,y),I=une(d,p,v,m,y,h),U=this.k[T],q=this.k[T+1],M=r[T],g=r[T+1],_=one(C,B,O,P,N,I,U,q,M,g),b=ane(C,B,O,P,N,I,U,q,M,g);C=hne(i,s),B=pne(i,s),O=fne(i,s,o,a,c),P=dne(i,s,o,a,c,l);var E=sv(C,B,O,P),R=ov(C,B,O,P);w=y,S=h,y=v,h=m,v=d,m=p,d=sv(u,f,_,b),p=ov(f,f,_,b),u=c,f=l,c=o,l=a,o=i,a=s,i=sv(_,b,E,R),s=ov(_,b,E,R)}aa(this.h,0,i,s),aa(this.h,2,o,a),aa(this.h,4,c,l),aa(this.h,6,u,f),aa(this.h,8,d,p),aa(this.h,10,v,m),aa(this.h,12,y,h),aa(this.h,14,w,S)};ss.prototype._digest=function(e){return e==="hex"?Zr.toHex32(this.h,"big"):Zr.split32(this.h,"big")};function lne(n,e,t,r,i){var s=n&t^~n&i;return s<0&&(s+=4294967296),s}function une(n,e,t,r,i,s){var o=e&r^~e&s;return o<0&&(o+=4294967296),o}function fne(n,e,t,r,i){var s=n&t^n&i^t&i;return s<0&&(s+=4294967296),s}function dne(n,e,t,r,i,s){var o=e&r^e&s^r&s;return o<0&&(o+=4294967296),o}function hne(n,e){var t=Hs(n,e,28),r=Hs(e,n,2),i=Hs(e,n,7),s=t^r^i;return s<0&&(s+=4294967296),s}function pne(n,e){var t=zs(n,e,28),r=zs(e,n,2),i=zs(e,n,7),s=t^r^i;return s<0&&(s+=4294967296),s}function mne(n,e){var t=Hs(n,e,14),r=Hs(n,e,18),i=Hs(e,n,9),s=t^r^i;return s<0&&(s+=4294967296),s}function gne(n,e){var t=zs(n,e,14),r=zs(n,e,18),i=zs(e,n,9),s=t^r^i;return s<0&&(s+=4294967296),s}function vne(n,e){var t=Hs(n,e,1),r=Hs(n,e,8),i=AC(n,e,7),s=t^r^i;return s<0&&(s+=4294967296),s}function yne(n,e){var t=zs(n,e,1),r=zs(n,e,8),i=EC(n,e,7),s=t^r^i;return s<0&&(s+=4294967296),s}function _ne(n,e){var t=Hs(n,e,19),r=Hs(e,n,29),i=AC(n,e,6),s=t^r^i;return s<0&&(s+=4294967296),s}function bne(n,e){var t=zs(n,e,19),r=zs(e,n,29),i=EC(n,e,6),s=t^r^i;return s<0&&(s+=4294967296),s}var f_=Dt,MC=TC;function zo(){if(!(this instanceof zo))return new zo;MC.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}f_.inherits(zo,MC);var xne=zo;zo.blockSize=1024;zo.outSize=384;zo.hmacStrength=192;zo.padLength=128;zo.prototype._digest=function(e){return e==="hex"?f_.toHex32(this.h.slice(0,12),"big"):f_.split32(this.h.slice(0,12),"big")};Yu.sha1=Vte;Yu.sha224=tne;Yu.sha256=xC;Yu.sha384=xne;Yu.sha512=TC;var RC={},Dc=Dt,wne=Ku,Fh=Dc.rotl32,z1=Dc.sum32,gf=Dc.sum32_3,G1=Dc.sum32_4,IC=wne.BlockHash;function Ks(){if(!(this instanceof Ks))return new Ks;IC.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Dc.inherits(Ks,IC);RC.ripemd160=Ks;Ks.blockSize=512;Ks.outSize=160;Ks.hmacStrength=192;Ks.padLength=64;Ks.prototype._update=function(e,t){for(var r=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],c=r,l=i,u=s,f=o,d=a,p=0;p<80;p++){var v=z1(Fh(G1(r,V1(p,i,s,o),e[Sne[p]+t],Ane(p)),Mne[p]),a);r=a,a=o,o=Fh(s,10),s=i,i=v,v=z1(Fh(G1(c,V1(79-p,l,u,f),e[Tne[p]+t],Ene(p)),Rne[p]),d),c=d,d=f,f=Fh(u,10),u=l,l=v}v=gf(this.h[1],s,f),this.h[1]=gf(this.h[2],o,d),this.h[2]=gf(this.h[3],a,c),this.h[3]=gf(this.h[4],r,l),this.h[4]=gf(this.h[0],i,u),this.h[0]=v};Ks.prototype._digest=function(e){return e==="hex"?Dc.toHex32(this.h,"little"):Dc.split32(this.h,"little")};function V1(n,e,t,r){return n<=15?e^t^r:n<=31?e&t|~e&r:n<=47?(e|~t)^r:n<=63?e&r|t&~r:e^(t|~r)}function Ane(n){return n<=15?0:n<=31?1518500249:n<=47?1859775393:n<=63?2400959708:2840853838}function Ene(n){return n<=15?1352829926:n<=31?1548603684:n<=47?1836072691:n<=63?2053994217:0}var Sne=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Tne=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Mne=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Rne=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Ine=Dt,Cne=Zd;function Nu(n,e,t){if(!(this instanceof Nu))return new Nu(n,e,t);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(Ine.toArray(e,t))}var Pne=Nu;Nu.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),Cne(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};Nu.prototype.update=function(e,t){return this.inner.update(e,t),this};Nu.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(n){var e=n;e.utils=Dt,e.common=Ku,e.sha=Yu,e.ripemd=RC,e.hmac=Pne,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(fC);const ys=zc(fC);function Zu(n,e,t){return t={path:e,exports:{},require:function(r,i){return Nne(r,i??t.path)}},n(t,t.exports),t.exports}function Nne(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Tx=CC;function CC(n,e){if(!n)throw new Error(e||"Assertion failed")}CC.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var Ji=Zu(function(n,e){var t=e;function r(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var c=[];if(typeof o!="string"){for(var l=0;l<o.length;l++)c[l]=o[l]|0;return c}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var l=0;l<o.length;l+=2)c.push(parseInt(o[l]+o[l+1],16))}else for(var l=0;l<o.length;l++){var u=o.charCodeAt(l),f=u>>8,d=u&255;f?c.push(f,d):c.push(d)}return c}t.toArray=r;function i(o){return o.length===1?"0"+o:o}t.zero2=i;function s(o){for(var a="",c=0;c<o.length;c++)a+=i(o[c].toString(16));return a}t.toHex=s,t.encode=function(a,c){return c==="hex"?s(a):a}}),mi=Zu(function(n,e){var t=e;t.assert=Tx,t.toArray=Ji.toArray,t.zero2=Ji.zero2,t.toHex=Ji.toHex,t.encode=Ji.encode;function r(c,l,u){var f=new Array(Math.max(c.bitLength(),u)+1);f.fill(0);for(var d=1<<l+1,p=c.clone(),v=0;v<f.length;v++){var m,y=p.andln(d-1);p.isOdd()?(y>(d>>1)-1?m=(d>>1)-y:m=y,p.isubn(m)):m=0,f[v]=m,p.iushrn(1)}return f}t.getNAF=r;function i(c,l){var u=[[],[]];c=c.clone(),l=l.clone();for(var f=0,d=0,p;c.cmpn(-f)>0||l.cmpn(-d)>0;){var v=c.andln(3)+f&3,m=l.andln(3)+d&3;v===3&&(v=-1),m===3&&(m=-1);var y;v&1?(p=c.andln(7)+f&7,(p===3||p===5)&&m===2?y=-v:y=v):y=0,u[0].push(y);var h;m&1?(p=l.andln(7)+d&7,(p===3||p===5)&&v===2?h=-m:h=m):h=0,u[1].push(h),2*f===y+1&&(f=1-f),2*d===h+1&&(d=1-d),c.iushrn(1),l.iushrn(1)}return u}t.getJSF=i;function s(c,l,u){var f="_"+l;c.prototype[l]=function(){return this[f]!==void 0?this[f]:this[f]=u.call(this)}}t.cachedProperty=s;function o(c){return typeof c=="string"?t.toArray(c,"hex"):c}t.parseBytes=o;function a(c){return new _t(c,"hex","le")}t.intFromLE=a}),Pm=mi.getNAF,Bne=mi.getJSF,Nm=mi.assert;function Oa(n,e){this.type=n,this.p=new _t(e.p,16),this.red=e.prime?_t.red(e.prime):_t.mont(this.p),this.zero=new _t(0).toRed(this.red),this.one=new _t(1).toRed(this.red),this.two=new _t(2).toRed(this.red),this.n=e.n&&new _t(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var qc=Oa;Oa.prototype.point=function(){throw new Error("Not implemented")};Oa.prototype.validate=function(){throw new Error("Not implemented")};Oa.prototype._fixedNafMul=function(e,t){Nm(e.precomputed);var r=e._getDoubles(),i=Pm(t,1,this._bitLength),s=(1<<r.step+1)-(r.step%2===0?2:1);s/=3;var o=[],a,c;for(a=0;a<i.length;a+=r.step){c=0;for(var l=a+r.step-1;l>=a;l--)c=(c<<1)+i[l];o.push(c)}for(var u=this.jpoint(null,null,null),f=this.jpoint(null,null,null),d=s;d>0;d--){for(a=0;a<o.length;a++)c=o[a],c===d?f=f.mixedAdd(r.points[a]):c===-d&&(f=f.mixedAdd(r.points[a].neg()));u=u.add(f)}return u.toP()};Oa.prototype._wnafMul=function(e,t){var r=4,i=e._getNAFPoints(r);r=i.wnd;for(var s=i.points,o=Pm(t,r,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var l=0;c>=0&&o[c]===0;c--)l++;if(c>=0&&l++,a=a.dblp(l),c<0)break;var u=o[c];Nm(u!==0),e.type==="affine"?u>0?a=a.mixedAdd(s[u-1>>1]):a=a.mixedAdd(s[-u-1>>1].neg()):u>0?a=a.add(s[u-1>>1]):a=a.add(s[-u-1>>1].neg())}return e.type==="affine"?a.toP():a};Oa.prototype._wnafMulAdd=function(e,t,r,i,s){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,l=0,u,f,d;for(u=0;u<i;u++){d=t[u];var p=d._getNAFPoints(e);o[u]=p.wnd,a[u]=p.points}for(u=i-1;u>=1;u-=2){var v=u-1,m=u;if(o[v]!==1||o[m]!==1){c[v]=Pm(r[v],o[v],this._bitLength),c[m]=Pm(r[m],o[m],this._bitLength),l=Math.max(c[v].length,l),l=Math.max(c[m].length,l);continue}var y=[t[v],null,null,t[m]];t[v].y.cmp(t[m].y)===0?(y[1]=t[v].add(t[m]),y[2]=t[v].toJ().mixedAdd(t[m].neg())):t[v].y.cmp(t[m].y.redNeg())===0?(y[1]=t[v].toJ().mixedAdd(t[m]),y[2]=t[v].add(t[m].neg())):(y[1]=t[v].toJ().mixedAdd(t[m]),y[2]=t[v].toJ().mixedAdd(t[m].neg()));var h=[-3,-1,-5,-7,0,7,5,1,3],w=Bne(r[v],r[m]);for(l=Math.max(w[0].length,l),c[v]=new Array(l),c[m]=new Array(l),f=0;f<l;f++){var S=w[0][f]|0,T=w[1][f]|0;c[v][f]=h[(S+1)*3+(T+1)],c[m][f]=0,a[v]=y}}var C=this.jpoint(null,null,null),B=this._wnafT4;for(u=l;u>=0;u--){for(var O=0;u>=0;){var P=!0;for(f=0;f<i;f++)B[f]=c[f][u]|0,B[f]!==0&&(P=!1);if(!P)break;O++,u--}if(u>=0&&O++,C=C.dblp(O),u<0)break;for(f=0;f<i;f++){var N=B[f];N!==0&&(N>0?d=a[f][N-1>>1]:N<0&&(d=a[f][-N-1>>1].neg()),d.type==="affine"?C=C.mixedAdd(d):C=C.add(d))}}for(u=0;u<i;u++)a[u]=null;return s?C:C.toP()};function Di(n,e){this.curve=n,this.type=e,this.precomputed=null}Oa.BasePoint=Di;Di.prototype.eq=function(){throw new Error("Not implemented")};Di.prototype.validate=function(){return this.curve.validate(this)};Oa.prototype.decodePoint=function(e,t){e=mi.toArray(e,t);var r=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*r){e[0]===6?Nm(e[e.length-1]%2===0):e[0]===7&&Nm(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));return i}else if((e[0]===2||e[0]===3)&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),e[0]===3);throw new Error("Unknown point format")};Di.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Di.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))};Di.prototype.encode=function(e,t){return mi.encode(this._encode(t),e)};Di.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};Di.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};Di.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,s=0;s<t;s+=e){for(var o=0;o<e;o++)i=i.dbl();r.push(i)}return{step:e,points:r}};Di.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,i=r===1?null:this.dbl(),s=1;s<r;s++)t[s]=t[s-1].add(i);return{wnd:e,points:t}};Di.prototype._getBeta=function(){return null};Di.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var Mx=Zu(function(n){typeof Object.create=="function"?n.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}}}),Lne=mi.assert;function Oi(n){qc.call(this,"short",n),this.a=new _t(n.a,16).toRed(this.red),this.b=new _t(n.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(n),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Mx(Oi,qc);var kne=Oi;Oi.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,r;if(e.beta)t=new _t(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)r=new _t(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))===0?r=s[0]:(r=s[1],Lne(this.g.mul(r).x.cmp(this.g.x.redMul(t))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new _t(a.a,16),b:new _t(a.b,16)}}):o=this._getEndoBasis(r),{beta:t,lambda:r,basis:o}}};Oi.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:_t.mont(e),r=new _t(2).toRed(t).redInvm(),i=r.redNeg(),s=new _t(3).toRed(t).redNeg().redSqrt().redMul(r),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};Oi.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),r=e,i=this.n.clone(),s=new _t(1),o=new _t(0),a=new _t(0),c=new _t(1),l,u,f,d,p,v,m,y=0,h,w;r.cmpn(0)!==0;){var S=i.div(r);h=i.sub(S.mul(r)),w=a.sub(S.mul(s));var T=c.sub(S.mul(o));if(!f&&h.cmp(t)<0)l=m.neg(),u=s,f=h.neg(),d=w;else if(f&&++y===2)break;m=h,i=r,r=h,a=s,s=w,c=o,o=T}p=h.neg(),v=w;var C=f.sqr().add(d.sqr()),B=p.sqr().add(v.sqr());return B.cmp(C)>=0&&(p=l,v=u),f.negative&&(f=f.neg(),d=d.neg()),p.negative&&(p=p.neg(),v=v.neg()),[{a:f,b:d},{a:p,b:v}]};Oi.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],i=t[1],s=i.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),a=s.mul(r.a),c=o.mul(i.a),l=s.mul(r.b),u=o.mul(i.b),f=e.sub(a).sub(c),d=l.add(u).neg();return{k1:f,k2:d}};Oi.prototype.pointFromX=function(e,t){e=new _t(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(i.redSqr().redSub(r).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(e,i)};Oi.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,i=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return r.redSqr().redISub(s).cmpn(0)===0};Oi.prototype._endoWnafMulAdd=function(e,t,r){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(t[o]),c=e[o],l=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),i[o*2]=c,i[o*2+1]=l,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var u=this._wnafMulAdd(1,i,s,o*2,r),f=0;f<o*2;f++)i[f]=null,s[f]=null;return u};function sr(n,e,t,r){qc.BasePoint.call(this,n,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new _t(e,16),this.y=new _t(t,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Mx(sr,qc.BasePoint);Oi.prototype.point=function(e,t,r){return new sr(this,e,t,r)};Oi.prototype.pointFromJSON=function(e,t){return sr.fromJSON(this,e,t)};sr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,i=function(s){return r.point(s.x.redMul(r.endo.beta),s.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}};sr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};sr.fromJSON=function(e,t,r){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;function s(a){return e.point(a[0],a[1],r)}var o=t[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};sr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};sr.prototype.isInfinity=function(){return this.inf};sr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)};sr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),i=e.redInvm(),s=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};sr.prototype.getX=function(){return this.x.fromRed()};sr.prototype.getY=function(){return this.y.fromRed()};sr.prototype.mul=function(e){return e=new _t(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};sr.prototype.mulAdd=function(e,t,r){var i=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};sr.prototype.jmulAdd=function(e,t,r){var i=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};sr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};sr.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,i=function(s){return s.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t};sr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function fr(n,e,t,r){qc.BasePoint.call(this,n,"jacobian"),e===null&&t===null&&r===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new _t(0)):(this.x=new _t(e,16),this.y=new _t(t,16),this.z=new _t(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Mx(fr,qc.BasePoint);Oi.prototype.jpoint=function(e,t,r){return new fr(this,e,t,r)};fr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(r,i)};fr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};fr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t),s=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(r.redMul(this.z)),c=i.redSub(s),l=o.redSub(a);if(c.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=c.redSqr(),f=u.redMul(c),d=i.redMul(u),p=l.redSqr().redIAdd(f).redISub(d).redISub(d),v=l.redMul(d.redISub(p)).redISub(o.redMul(f)),m=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(p,v,m)};fr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,i=e.x.redMul(t),s=this.y,o=e.y.redMul(t).redMul(this.z),a=r.redSub(i),c=s.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),u=l.redMul(a),f=r.redMul(l),d=c.redSqr().redIAdd(u).redISub(f).redISub(f),p=c.redMul(f.redISub(d)).redISub(s.redMul(u)),v=this.z.redMul(a);return this.curve.jpoint(d,p,v)};fr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,c=this.z,l=c.redSqr().redSqr(),u=a.redAdd(a);for(t=0;t<e;t++){var f=o.redSqr(),d=u.redSqr(),p=d.redSqr(),v=f.redAdd(f).redIAdd(f).redIAdd(i.redMul(l)),m=o.redMul(d),y=v.redSqr().redISub(m.redAdd(m)),h=m.redISub(y),w=v.redMul(h);w=w.redIAdd(w).redISub(p);var S=u.redMul(c);t+1<e&&(l=l.redMul(p)),o=y,c=S,u=w}return this.curve.jpoint(o,u.redMul(s),c)};fr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};fr.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i),l=c.redSqr().redISub(a).redISub(a),u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),e=l,t=c.redMul(a.redISub(l)).redISub(u),r=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),d=this.y.redSqr(),p=d.redSqr(),v=this.x.redAdd(d).redSqr().redISub(f).redISub(p);v=v.redIAdd(v);var m=f.redAdd(f).redIAdd(f),y=m.redSqr(),h=p.redIAdd(p);h=h.redIAdd(h),h=h.redIAdd(h),e=y.redISub(v).redISub(v),t=m.redMul(v.redISub(e)).redISub(h),r=this.y.redMul(this.z),r=r.redIAdd(r)}return this.curve.jpoint(e,t,r)};fr.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=c.redSqr().redISub(a).redISub(a);e=l;var u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),t=c.redMul(a.redISub(l)).redISub(u),r=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),d=this.y.redSqr(),p=this.x.redMul(d),v=this.x.redSub(f).redMul(this.x.redAdd(f));v=v.redAdd(v).redIAdd(v);var m=p.redIAdd(p);m=m.redIAdd(m);var y=m.redAdd(m);e=v.redSqr().redISub(y),r=this.y.redAdd(this.z).redSqr().redISub(d).redISub(f);var h=d.redSqr();h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h),t=v.redMul(m.redISub(e)).redISub(h)}return this.curve.jpoint(e,t,r)};fr.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,i=this.z,s=i.redSqr().redSqr(),o=t.redSqr(),a=r.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),l=t.redAdd(t);l=l.redIAdd(l);var u=l.redMul(a),f=c.redSqr().redISub(u.redAdd(u)),d=u.redISub(f),p=a.redSqr();p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var v=c.redMul(d).redISub(p),m=r.redAdd(r).redMul(i);return this.curve.jpoint(f,v,m)};fr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=t.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),l=i.redIAdd(i);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var u=s.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(l),f=t.redMul(u);f=f.redIAdd(f),f=f.redIAdd(f);var d=this.x.redMul(c).redISub(f);d=d.redIAdd(d),d=d.redIAdd(d);var p=this.y.redMul(u.redMul(l.redISub(u)).redISub(a.redMul(c)));p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var v=this.z.redAdd(a).redSqr().redISub(r).redISub(c);return this.curve.jpoint(d,p,v)};fr.prototype.mul=function(e,t){return e=new _t(e,t),this.curve._wnafMul(this,e)};fr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),s=r.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};fr.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(r)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(s),this.x.cmp(r)===0)return!0}};fr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};fr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var dp=Zu(function(n,e){var t=e;t.base=qc,t.short=kne,t.mont=null,t.edwards=null}),hp=Zu(function(n,e){var t=e,r=mi.assert;function i(a){a.type==="short"?this.curve=new dp.short(a):a.type==="edwards"?this.curve=new dp.edwards(a):this.curve=new dp.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,r(this.g.validate(),"Invalid curve"),r(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=i;function s(a,c){Object.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){var l=new i(c);return Object.defineProperty(t,a,{configurable:!0,enumerable:!0,value:l}),l}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:ys.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:ys.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:ys.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:ys.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:ys.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ys.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ys.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:ys.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function Pa(n){if(!(this instanceof Pa))return new Pa(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Ji.toArray(n.entropy,n.entropyEnc||"hex"),t=Ji.toArray(n.nonce,n.nonceEnc||"hex"),r=Ji.toArray(n.pers,n.persEnc||"hex");Tx(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,r)}var PC=Pa;Pa.prototype._init=function(e,t,r){var i=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};Pa.prototype._hmac=function(){return new ys.hmac(this.hash,this.K)};Pa.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Pa.prototype.reseed=function(e,t,r,i){typeof t!="string"&&(i=r,r=t,t=null),e=Ji.toArray(e,t),r=Ji.toArray(r,i),Tx(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1};Pa.prototype.generate=function(e,t,r,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=r,r=t,t=null),r&&(r=Ji.toArray(r,i||"hex"),this._update(r));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(r),this._reseed++,Ji.encode(o,t)};var d_=mi.assert;function yr(n,e){this.ec=n,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Rx=yr;yr.fromPublic=function(e,t,r){return t instanceof yr?t:new yr(e,{pub:t,pubEnc:r})};yr.fromPrivate=function(e,t,r){return t instanceof yr?t:new yr(e,{priv:t,privEnc:r})};yr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};yr.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};yr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};yr.prototype._importPrivate=function(e,t){this.priv=new _t(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};yr.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?d_(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&d_(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};yr.prototype.derive=function(e){return e.validate()||d_(e.validate(),"public point not validated"),e.mul(this.priv).getX()};yr.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)};yr.prototype.verify=function(e,t){return this.ec.verify(e,t,this)};yr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Dne=mi.assert;function I0(n,e){if(n instanceof I0)return n;this._importDER(n,e)||(Dne(n.r&&n.s,"Signature without r or s"),this.r=new _t(n.r,16),this.s=new _t(n.s,16),n.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=n.recoveryParam)}var C0=I0;function One(){this.place=0}function av(n,e){var t=n[e.place++];if(!(t&128))return t;var r=t&15;if(r===0||r>4)return!1;for(var i=0,s=0,o=e.place;s<r;s++,o++)i<<=8,i|=n[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function W1(n){for(var e=0,t=n.length-1;!n[e]&&!(n[e+1]&128)&&e<t;)e++;return e===0?n:n.slice(e)}I0.prototype._importDER=function(e,t){e=mi.toArray(e,t);var r=new One;if(e[r.place++]!==48)return!1;var i=av(e,r);if(i===!1||i+r.place!==e.length||e[r.place++]!==2)return!1;var s=av(e,r);if(s===!1)return!1;var o=e.slice(r.place,s+r.place);if(r.place+=s,e[r.place++]!==2)return!1;var a=av(e,r);if(a===!1||e.length!==a+r.place)return!1;var c=e.slice(r.place,a+r.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new _t(o),this.s=new _t(c),this.recoveryParam=null,!0};function cv(n,e){if(e<128){n.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(n.push(t|128);--t;)n.push(e>>>(t<<3)&255);n.push(e)}I0.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),r[0]&128&&(r=[0].concat(r)),t=W1(t),r=W1(r);!r[0]&&!(r[1]&128);)r=r.slice(1);var i=[2];cv(i,t.length),i=i.concat(t),i.push(2),cv(i,r.length);var s=i.concat(r),o=[48];return cv(o,s.length),o=o.concat(s),mi.encode(o,e)};var Une=function(){throw new Error("unsupported")},NC=mi.assert;function Li(n){if(!(this instanceof Li))return new Li(n);typeof n=="string"&&(NC(Object.prototype.hasOwnProperty.call(hp,n),"Unknown curve "+n),n=hp[n]),n instanceof hp.PresetCurve&&(n={curve:n}),this.curve=n.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=n.curve.g,this.g.precompute(n.curve.n.bitLength()+1),this.hash=n.hash||n.curve.hash}var Fne=Li;Li.prototype.keyPair=function(e){return new Rx(this,e)};Li.prototype.keyFromPrivate=function(e,t){return Rx.fromPrivate(this,e,t)};Li.prototype.keyFromPublic=function(e,t){return Rx.fromPublic(this,e,t)};Li.prototype.genKeyPair=function(e){e||(e={});for(var t=new PC({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Une(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),i=this.n.sub(new _t(2));;){var s=new _t(t.generate(r));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Li.prototype._truncateToN=function(e,t){var r=e.byteLength()*8-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};Li.prototype.sign=function(e,t,r,i){typeof r=="object"&&(i=r,r=null),i||(i={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new _t(e,16));for(var s=this.n.byteLength(),o=t.getPrivate().toArray("be",s),a=e.toArray("be",s),c=new PC({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),l=this.n.sub(new _t(1)),u=0;;u++){var f=i.k?i.k(u):new _t(c.generate(this.n.byteLength()));if(f=this._truncateToN(f,!0),!(f.cmpn(1)<=0||f.cmp(l)>=0)){var d=this.g.mul(f);if(!d.isInfinity()){var p=d.getX(),v=p.umod(this.n);if(v.cmpn(0)!==0){var m=f.invm(this.n).mul(v.mul(t.getPrivate()).iadd(e));if(m=m.umod(this.n),m.cmpn(0)!==0){var y=(d.getY().isOdd()?1:0)|(p.cmp(v)!==0?2:0);return i.canonical&&m.cmp(this.nh)>0&&(m=this.n.sub(m),y^=1),new C0({r:v,s:m,recoveryParam:y})}}}}}};Li.prototype.verify=function(e,t,r,i){e=this._truncateToN(new _t(e,16)),r=this.keyFromPublic(r,i),t=new C0(t,"hex");var s=t.r,o=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),c=a.mul(e).umod(this.n),l=a.mul(s).umod(this.n),u;return this.curve._maxwellTrick?(u=this.g.jmulAdd(c,r.getPublic(),l),u.isInfinity()?!1:u.eqXToP(s)):(u=this.g.mulAdd(c,r.getPublic(),l),u.isInfinity()?!1:u.getX().umod(this.n).cmp(s)===0)};Li.prototype.recoverPubKey=function(n,e,t,r){NC((3&t)===t,"The recovery param is more than two bits"),e=new C0(e,r);var i=this.n,s=new _t(n),o=e.r,a=e.s,c=t&1,l=t>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var u=e.r.invm(i),f=i.sub(s).mul(u).umod(i),d=a.mul(u).umod(i);return this.g.mulAdd(f,o,d)};Li.prototype.getKeyRecoveryParam=function(n,e,t,r){if(e=new C0(e,r),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(n,e,i)}catch{continue}if(s.eq(t))return i}throw new Error("Unable to find valid recovery factor")};var Hne=Zu(function(n,e){var t=e;t.version="6.5.4",t.utils=mi,t.rand=function(){throw new Error("unsupported")},t.curve=dp,t.curves=hp,t.ec=Fne,t.eddsa=null}),zne=Hne.ec;const Gne="signing-key/5.7.0",h_=new ie(Gne);let lv=null;function As(){return lv||(lv=new zne("secp256k1")),lv}class Vne{constructor(e){Ae(this,"curve","secp256k1"),Ae(this,"privateKey",Qe(e)),Lc(this.privateKey)!==32&&h_.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=As().keyFromPrivate(ot(this.privateKey));Ae(this,"publicKey","0x"+t.getPublic(!1,"hex")),Ae(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),Ae(this,"_isSigningKey",!0)}_addPoint(e){const t=As().keyFromPublic(ot(this.publicKey)),r=As().keyFromPublic(ot(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=As().keyFromPrivate(ot(this.privateKey)),r=ot(e);r.length!==32&&h_.throwArgumentError("bad digest length","digest",e);const i=t.sign(r,{canonical:!0});return E0({recoveryParam:i.recoveryParam,r:Mn("0x"+i.r.toString(16),32),s:Mn("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const t=As().keyFromPrivate(ot(this.privateKey)),r=As().keyFromPublic(ot(BC(e)));return Mn("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function Wne(n,e){const t=E0(e),r={r:ot(t.r),s:ot(t.s)};return"0x"+As().recoverPubKey(ot(n),r,t.recoveryParam).encode("hex",!1)}function BC(n,e){const t=ot(n);if(t.length===32){const r=new Vne(t);return e?"0x"+As().keyFromPrivate(t).getPublic(!0,"hex"):r.publicKey}else{if(t.length===33)return e?Qe(t):"0x"+As().keyFromPublic(t).getPublic(!1,"hex");if(t.length===65)return e?"0x"+As().keyFromPublic(t).getPublic(!0,"hex"):Qe(t)}return h_.throwArgumentError("invalid public or private key","key","[REDACTED]")}const jne="transactions/5.7.0",Xo=new ie(jne);var j1;(function(n){n[n.legacy=0]="legacy",n[n.eip2930=1]="eip2930",n[n.eip1559=2]="eip1559"})(j1||(j1={}));function Ix(n){return n==="0x"?null:lr(n)}function gr(n){return n==="0x"?KI:Ce.from(n)}function qne(n){const e=BC(n);return lr(mr(qn(mr(e,1)),12))}function LC(n,e){return qne(Wne(ot(n),e))}function oi(n,e){const t=Iu(Ce.from(n).toHexString());return t.length>32&&Xo.throwArgumentError("invalid length for "+e,"transaction:"+e,n),t}function uv(n,e){return{address:lr(n),storageKeys:(e||[]).map((t,r)=>(Lc(t)!==32&&Xo.throwArgumentError("invalid access list storageKey",`accessList[${n}:${r}]`,t),t.toLowerCase()))}}function Ju(n){if(Array.isArray(n))return n.map((t,r)=>Array.isArray(t)?(t.length>2&&Xo.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${r}]`,t),uv(t[0],t[1])):uv(t.address,t.storageKeys));const e=Object.keys(n).map(t=>{const r=n[t].reduce((i,s)=>(i[s]=!0,i),{});return uv(t,Object.keys(r).sort())});return e.sort((t,r)=>t.address.localeCompare(r.address)),e}function kC(n){return Ju(n).map(e=>[e.address,e.storageKeys])}function $ne(n,e){if(n.gasPrice!=null){const r=Ce.from(n.gasPrice),i=Ce.from(n.maxFeePerGas||0);r.eq(i)||Xo.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:r,maxFeePerGas:i})}const t=[oi(n.chainId||0,"chainId"),oi(n.nonce||0,"nonce"),oi(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),oi(n.maxFeePerGas||0,"maxFeePerGas"),oi(n.gasLimit||0,"gasLimit"),n.to!=null?lr(n.to):"0x",oi(n.value||0,"value"),n.data||"0x",kC(n.accessList||[])];if(e){const r=E0(e);t.push(oi(r.recoveryParam,"recoveryParam")),t.push(Iu(r.r)),t.push(Iu(r.s))}return Gr(["0x02",S0(t)])}function Xne(n,e){const t=[oi(n.chainId||0,"chainId"),oi(n.nonce||0,"nonce"),oi(n.gasPrice||0,"gasPrice"),oi(n.gasLimit||0,"gasLimit"),n.to!=null?lr(n.to):"0x",oi(n.value||0,"value"),n.data||"0x",kC(n.accessList||[])];if(e){const r=E0(e);t.push(oi(r.recoveryParam,"recoveryParam")),t.push(Iu(r.r)),t.push(Iu(r.s))}return Gr(["0x01",S0(t)])}function DC(n,e,t){try{const r=gr(e[0]).toNumber();if(r!==0&&r!==1)throw new Error("bad recid");n.v=r}catch{Xo.throwArgumentError("invalid v for transaction type: 1","v",e[0])}n.r=Mn(e[1],32),n.s=Mn(e[2],32);try{const r=qn(t(n));n.from=LC(r,{r:n.r,s:n.s,recoveryParam:n.v})}catch{}}function Kne(n){const e=Ax(n.slice(1));e.length!==9&&e.length!==12&&Xo.throwArgumentError("invalid component count for transaction type: 2","payload",Qe(n));const t=gr(e[2]),r=gr(e[3]),i={type:2,chainId:gr(e[0]).toNumber(),nonce:gr(e[1]).toNumber(),maxPriorityFeePerGas:t,maxFeePerGas:r,gasPrice:null,gasLimit:gr(e[4]),to:Ix(e[5]),value:gr(e[6]),data:e[7],accessList:Ju(e[8])};return e.length===9||(i.hash=qn(n),DC(i,e.slice(9),$ne)),i}function Yne(n){const e=Ax(n.slice(1));e.length!==8&&e.length!==11&&Xo.throwArgumentError("invalid component count for transaction type: 1","payload",Qe(n));const t={type:1,chainId:gr(e[0]).toNumber(),nonce:gr(e[1]).toNumber(),gasPrice:gr(e[2]),gasLimit:gr(e[3]),to:Ix(e[4]),value:gr(e[5]),data:e[6],accessList:Ju(e[7])};return e.length===8||(t.hash=qn(n),DC(t,e.slice(8),Xne)),t}function Qne(n){const e=Ax(n);e.length!==9&&e.length!==6&&Xo.throwArgumentError("invalid raw transaction","rawTransaction",n);const t={nonce:gr(e[0]).toNumber(),gasPrice:gr(e[1]),gasLimit:gr(e[2]),to:Ix(e[3]),value:gr(e[4]),data:e[5],chainId:0};if(e.length===6)return t;try{t.v=Ce.from(e[6]).toNumber()}catch{return t}if(t.r=Mn(e[7],32),t.s=Mn(e[8],32),Ce.from(t.r).isZero()&&Ce.from(t.s).isZero())t.chainId=t.v,t.v=0;else{t.chainId=Math.floor((t.v-35)/2),t.chainId<0&&(t.chainId=0);let r=t.v-27;const i=e.slice(0,6);t.chainId!==0&&(i.push(Qe(t.chainId)),i.push("0x"),i.push("0x"),r-=t.chainId*2+8);const s=qn(S0(i));try{t.from=LC(s,{r:Qe(t.r),s:Qe(t.s),recoveryParam:r})}catch{}t.hash=qn(n)}return t.type=null,t}function Zne(n){const e=ot(n);if(e[0]>127)return Qne(e);switch(e[0]){case 1:return Yne(e);case 2:return Kne(e)}return Xo.throwError(`unsupported transaction type: ${e[0]}`,ie.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const Jne="contracts/5.7.0";var Oc=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const kn=new ie(Jne);function Bm(n,e){return Oc(this,void 0,void 0,function*(){const t=yield e;typeof t!="string"&&kn.throwArgumentError("invalid address or ENS name","name",t);try{return lr(t)}catch{}n||kn.throwError("a provider or signer is needed to resolve ENS names",ie.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const r=yield n.resolveName(t);return r==null&&kn.throwArgumentError("resolver or addr is not configured for ENS name","name",t),r})}function pp(n,e,t){return Oc(this,void 0,void 0,function*(){return Array.isArray(t)?yield Promise.all(t.map((r,i)=>pp(n,Array.isArray(e)?e[i]:e[r.name],r))):t.type==="address"?yield Bm(n,e):t.type==="tuple"?yield pp(n,e,t.components):t.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(r=>pp(n,r,t.arrayChildren))):Promise.reject(kn.makeError("invalid value for array",ie.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function P0(n,e,t){return Oc(this,void 0,void 0,function*(){let r={};t.length===e.inputs.length+1&&typeof t[t.length-1]=="object"&&(r=Xn(t.pop())),kn.checkArgumentCount(t.length,e.inputs.length,"passed to contract"),n.signer?r.from?r.from=zn({override:Bm(n.signer,r.from),signer:n.signer.getAddress()}).then(l=>Oc(this,void 0,void 0,function*(){return lr(l.signer)!==l.override&&kn.throwError("Contract with a Signer cannot override from",ie.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),l.override})):r.from=n.signer.getAddress():r.from&&(r.from=Bm(n.provider,r.from));const i=yield zn({args:pp(n.signer||n.provider,t,e.inputs),address:n.resolvedAddress,overrides:zn(r)||{}}),s=n.interface.encodeFunctionData(e,i.args),o={data:s,to:i.address},a=i.overrides;if(a.nonce!=null&&(o.nonce=Ce.from(a.nonce).toNumber()),a.gasLimit!=null&&(o.gasLimit=Ce.from(a.gasLimit)),a.gasPrice!=null&&(o.gasPrice=Ce.from(a.gasPrice)),a.maxFeePerGas!=null&&(o.maxFeePerGas=Ce.from(a.maxFeePerGas)),a.maxPriorityFeePerGas!=null&&(o.maxPriorityFeePerGas=Ce.from(a.maxPriorityFeePerGas)),a.from!=null&&(o.from=a.from),a.type!=null&&(o.type=a.type),a.accessList!=null&&(o.accessList=Ju(a.accessList)),o.gasLimit==null&&e.gas!=null){let l=21e3;const u=ot(s);for(let f=0;f<u.length;f++)l+=4,u[f]&&(l+=64);o.gasLimit=Ce.from(e.gas).add(l)}if(a.value){const l=Ce.from(a.value);!l.isZero()&&!e.payable&&kn.throwError("non-payable method cannot override value",ie.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:r.value}),o.value=l}a.customData&&(o.customData=Xn(a.customData)),a.ccipReadEnabled&&(o.ccipReadEnabled=!!a.ccipReadEnabled),delete r.nonce,delete r.gasLimit,delete r.gasPrice,delete r.from,delete r.value,delete r.type,delete r.accessList,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas,delete r.customData,delete r.ccipReadEnabled;const c=Object.keys(r).filter(l=>r[l]!=null);return c.length&&kn.throwError(`cannot override ${c.map(l=>JSON.stringify(l)).join(",")}`,ie.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:c}),o})}function ere(n,e){return function(...t){return P0(n,e,t)}}function tre(n,e){const t=n.signer||n.provider;return function(...r){return Oc(this,void 0,void 0,function*(){t||kn.throwError("estimate require a provider or signer",ie.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield P0(n,e,r);return yield t.estimateGas(i)})}}function nre(n,e){const t=e.wait.bind(e);e.wait=r=>t(r).then(i=>(i.events=i.logs.map(s=>{let o=Fo(s),a=null;try{a=n.interface.parseLog(s)}catch{}return a&&(o.args=a.args,o.decode=(c,l)=>n.interface.decodeEventLog(a.eventFragment,c,l),o.event=a.name,o.eventSignature=a.signature),o.removeListener=()=>n.provider,o.getBlock=()=>n.provider.getBlock(i.blockHash),o.getTransaction=()=>n.provider.getTransaction(i.transactionHash),o.getTransactionReceipt=()=>Promise.resolve(i),o}),i))}function OC(n,e,t){const r=n.signer||n.provider;return function(...i){return Oc(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const c=Xn(i.pop());c.blockTag!=null&&(s=yield c.blockTag),delete c.blockTag,i.push(c)}n.deployTransaction!=null&&(yield n._deployed(s));const o=yield P0(n,e,i),a=yield r.call(o,s);try{let c=n.interface.decodeFunctionResult(e,a);return t&&e.outputs.length===1&&(c=c[0]),c}catch(c){throw c.code===ie.errors.CALL_EXCEPTION&&(c.address=n.address,c.args=i,c.transaction=o),c}})}}function rre(n,e){return function(...t){return Oc(this,void 0,void 0,function*(){n.signer||kn.throwError("sending a transaction requires a signer",ie.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),n.deployTransaction!=null&&(yield n._deployed());const r=yield P0(n,e,t),i=yield n.signer.sendTransaction(r);return nre(n,i),i})}}function q1(n,e,t){return e.constant?OC(n,e,t):rre(n,e)}function UC(n){return n.address&&(n.topics==null||n.topics.length===0)?"*":(n.address||"*")+"@"+(n.topics?n.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class Rd{constructor(e,t){Ae(this,"tag",e),Ae(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter(r=>t||r.listener!==e?!0:(t=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter(r=>{const i=e.slice();return setTimeout(()=>{r.listener.apply(this,i)},0),!r.once}),t}prepareEvent(e){}getEmit(e){return[e]}}class ire extends Rd{constructor(){super("error",null)}}class $1 extends Rd{constructor(e,t,r,i){const s={address:e};let o=t.getEventTopic(r);i?(o!==i[0]&&kn.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[o],super(UC(s),s),Ae(this,"address",e),Ae(this,"interface",t),Ae(this,"fragment",r)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(t,r)=>this.interface.decodeEventLog(this.fragment,t,r);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=FJ(e.args);if(t.length)throw t[0].error;const r=(e.args||[]).slice();return r.push(e),r}}class X1 extends Rd{constructor(e,t){super("*",{address:e}),Ae(this,"address",e),Ae(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(r,i)=>this.interface.decodeEventLog(t.eventFragment,r,i),e.args=t.args}catch{}}}class sre{constructor(e,t,r){Ae(this,"interface",Ls(new.target,"getInterface")(t)),r==null?(Ae(this,"provider",null),Ae(this,"signer",null)):Qd.isSigner(r)?(Ae(this,"provider",r.provider||null),Ae(this,"signer",r)):M0.isProvider(r)?(Ae(this,"provider",r),Ae(this,"signer",null)):kn.throwArgumentError("invalid signer or provider","signerOrProvider",r),Ae(this,"callStatic",{}),Ae(this,"estimateGas",{}),Ae(this,"functions",{}),Ae(this,"populateTransaction",{}),Ae(this,"filters",{});{const o={};Object.keys(this.interface.events).forEach(a=>{const c=this.interface.events[a];Ae(this.filters,a,(...l)=>({address:this.address,topics:this.interface.encodeFilterTopics(c,l)})),o[c.name]||(o[c.name]=[]),o[c.name].push(a)}),Object.keys(o).forEach(a=>{const c=o[a];c.length===1?Ae(this.filters,a,this.filters[c[0]]):kn.warn(`Duplicate definition of ${a} (${c.join(", ")})`)})}if(Ae(this,"_runningEvents",{}),Ae(this,"_wrappedEmits",{}),e==null&&kn.throwArgumentError("invalid contract address or ENS name","addressOrName",e),Ae(this,"address",e),this.provider)Ae(this,"resolvedAddress",Bm(this.provider,e));else try{Ae(this,"resolvedAddress",Promise.resolve(lr(e)))}catch{kn.throwError("provider is required to use ENS name as contract address",ie.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(o=>{});const i={},s={};Object.keys(this.interface.functions).forEach(o=>{const a=this.interface.functions[o];if(s[o]){kn.warn(`Duplicate ABI entry for ${JSON.stringify(o)}`);return}s[o]=!0;{const c=a.name;i[`%${c}`]||(i[`%${c}`]=[]),i[`%${c}`].push(o)}this[o]==null&&Ae(this,o,q1(this,a,!0)),this.functions[o]==null&&Ae(this.functions,o,q1(this,a,!1)),this.callStatic[o]==null&&Ae(this.callStatic,o,OC(this,a,!0)),this.populateTransaction[o]==null&&Ae(this.populateTransaction,o,ere(this,a)),this.estimateGas[o]==null&&Ae(this.estimateGas,o,tre(this,a))}),Object.keys(i).forEach(o=>{const a=i[o];if(a.length>1)return;o=o.substring(1);const c=a[0];try{this[o]==null&&Ae(this,o,this[c])}catch{}this.functions[o]==null&&Ae(this.functions,o,this.functions[c]),this.callStatic[o]==null&&Ae(this.callStatic,o,this.callStatic[c]),this.populateTransaction[o]==null&&Ae(this.populateTransaction,o,this.populateTransaction[c]),this.estimateGas[o]==null&&Ae(this.estimateGas,o,this.estimateGas[c])})}static getContractAddress(e){return jI(e)}static getInterface(e){return F1.isInterface(e)?e:new F1(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(t=>(t==="0x"&&kn.throwError("contract not deployed",ie.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||kn.throwError("sending a transactions require a signer",ie.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=Xn(e||{});return["from","to"].forEach(function(r){t[r]!=null&&kn.throwError("cannot override "+r,ie.errors.UNSUPPORTED_OPERATION,{operation:r})}),t.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(t))}connect(e){typeof e=="string"&&(e=new Sx(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&Ae(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return c_.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new ire);if(e==="event")return this._normalizeRunningEvent(new Rd("event",null));if(e==="*")return this._normalizeRunningEvent(new X1(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new $1(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const r=e.topics[0];if(typeof r!="string")throw new Error("invalid topic");const i=this.interface.getEvent(r);return this._normalizeRunningEvent(new $1(this.address,this.interface,i,e.topics))}catch{}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new Rd(UC(t),t))}return this._normalizeRunningEvent(new X1(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,r){const i=Fo(t);return i.removeListener=()=>{r&&(e.removeListener(r),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(t.blockHash),i.getTransaction=()=>this.provider.getTransaction(t.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(i),i}_addEventListener(e,t,r){if(this.provider||kn.throwError("events require a provider or a signer with a provider",ie.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,r),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let o=this._wrapEvent(e,s,t);if(o.decodeError==null)try{const a=e.getEmit(o);this.emit(e.filter,...a)}catch(a){o.decodeError=a.error}e.filter!=null&&this.emit("event",o),o.decodeError!=null&&this.emit("error",o.decodeError,o)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,t,r){const i=this._getRunningEvent(e),s=Xn(i.filter);return typeof t=="string"&&Qt(t,32)?(r!=null&&kn.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r),s.blockHash=t):(s.fromBlock=t??0,s.toBlock=r??"latest"),this.provider.getLogs(s).then(o=>o.map(a=>this._wrapEvent(i,a,null)))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const r=this._getRunningEvent(e),i=r.run(t)>0;return this._checkRunningEvents(r),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((t,r)=>t+this._runningEvents[r].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const t=[];for(let r in this._runningEvents)this._runningEvents[r].listeners().forEach(i=>{t.push(i)});return t}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const r in this._runningEvents){const i=this._runningEvents[r];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const r=this._getRunningEvent(e);return r.removeListener(t),this._checkRunningEvents(r),this}removeListener(e,t){return this.off(e,t)}}class FC extends sre{}class HC{constructor(e){Ae(this,"alphabet",e),Ae(this,"base",e.length),Ae(this,"_alphabetMap",{}),Ae(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=ot(e);if(t.length===0)return"";let r=[0];for(let s=0;s<t.length;++s){let o=t[s];for(let a=0;a<r.length;++a)o+=r[a]<<8,r[a]=o%this.base,o=o/this.base|0;for(;o>0;)r.push(o%this.base),o=o/this.base|0}let i="";for(let s=0;t[s]===0&&s<t.length-1;++s)i+=this._leader;for(let s=r.length-1;s>=0;--s)i+=this.alphabet[r[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let t=[];if(e.length===0)return new Uint8Array(t);t.push(0);for(let r=0;r<e.length;r++){let i=this._alphabetMap[e[r]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let o=0;o<t.length;++o)s+=t[o]*this.base,t[o]=s&255,s>>=8;for(;s>0;)t.push(s&255),s>>=8}for(let r=0;e[r]===this._leader&&r<e.length-1;++r)t.push(0);return ot(new Uint8Array(t.reverse()))}}new HC("abcdefghijklmnopqrstuvwxyz234567");const p_=new HC("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function K1(n){return"0x"+ys.sha256().update(ot(n)).digest("hex")}const ore="networks/5.7.1",Y1=new ie(ore);function are(n){return n&&typeof n.renetwork=="function"}function yo(n){const e=function(t,r){r==null&&(r={});const i=[];if(t.InfuraProvider&&r.infura!=="-")try{i.push(new t.InfuraProvider(n,r.infura))}catch{}if(t.EtherscanProvider&&r.etherscan!=="-")try{i.push(new t.EtherscanProvider(n,r.etherscan))}catch{}if(t.AlchemyProvider&&r.alchemy!=="-")try{i.push(new t.AlchemyProvider(n,r.alchemy))}catch{}if(t.PocketProvider&&r.pocket!=="-"){const s=["goerli","ropsten","rinkeby","sepolia"];try{const o=new t.PocketProvider(n,r.pocket);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}}if(t.CloudflareProvider&&r.cloudflare!=="-")try{i.push(new t.CloudflareProvider(n))}catch{}if(t.AnkrProvider&&r.ankr!=="-")try{const s=["ropsten"],o=new t.AnkrProvider(n,r.ankr);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}if(i.length===0)return null;if(t.FallbackProvider){let s=1;return r.quorum!=null?s=r.quorum:n==="homestead"&&(s=2),new t.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(t){return yo(t)},e}function Lm(n,e){const t=function(r,i){return r.JsonRpcProvider?new r.JsonRpcProvider(n,e):null};return t.renetwork=function(r){return Lm(n,r)},t}const Q1={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:yo("homestead")},Z1={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:yo("ropsten")},J1={chainId:63,name:"classicMordor",_defaultProvider:Lm("https://www.ethercluster.com/mordor","classicMordor")},Hh={unspecified:{chainId:0,name:"unspecified"},homestead:Q1,mainnet:Q1,morden:{chainId:2,name:"morden"},ropsten:Z1,testnet:Z1,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:yo("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:yo("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:yo("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:yo("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:Lm("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:J1,classicTestnet:J1,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Lm("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:yo("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:yo("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function cre(n){if(n==null)return null;if(typeof n=="number"){for(const r in Hh){const i=Hh[r];if(i.chainId===n)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:n,name:"unknown"}}if(typeof n=="string"){const r=Hh[n];return r==null?null:{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress,_defaultProvider:r._defaultProvider||null}}const e=Hh[n.name];if(!e)return typeof n.chainId!="number"&&Y1.throwArgumentError("invalid network chainId","network",n),n;n.chainId!==0&&n.chainId!==e.chainId&&Y1.throwArgumentError("network chainId mismatch","network",n);let t=n._defaultProvider||null;return t==null&&e._defaultProvider&&(are(e._defaultProvider)?t=e._defaultProvider.renetwork(n):t=e._defaultProvider),{name:n.name,chainId:e.chainId,ensAddress:n.ensAddress||e.ensAddress||null,_defaultProvider:t}}const lre="web/5.7.1";var ure=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};function fre(n,e){return ure(this,void 0,void 0,function*(){e==null&&(e={});const t={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(t.mode="cors",t.cache="no-cache",t.credentials="same-origin",t.redirect="follow",t.referrer="client"),e.fetchOptions!=null){const o=e.fetchOptions;o.mode&&(t.mode=o.mode),o.cache&&(t.cache=o.cache),o.credentials&&(t.credentials=o.credentials),o.redirect&&(t.redirect=o.redirect),o.referrer&&(t.referrer=o.referrer)}const r=yield fetch(n,t),i=yield r.arrayBuffer(),s={};return r.headers.forEach?r.headers.forEach((o,a)=>{s[a.toLowerCase()]=o}):r.headers.keys().forEach(o=>{s[o.toLowerCase()]=r.headers.get(o)}),{headers:s,statusCode:r.status,statusMessage:r.statusText,body:ot(new Uint8Array(i))}})}var dre=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const $i=new ie(lre);function eS(n){return new Promise(e=>{setTimeout(e,n)})}function ca(n,e){if(n==null)return null;if(typeof n=="string")return n;if(_x(n)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return Yd(n)}catch{}return Qe(n)}return n}function hre(n){return qs(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function pre(n,e,t){const r=typeof n=="object"&&n.throttleLimit!=null?n.throttleLimit:12;$i.assertArgument(r>0&&r%1===0,"invalid connection throttle limit","connection.throttleLimit",r);const i=typeof n=="object"?n.throttleCallback:null,s=typeof n=="object"&&typeof n.throttleSlotInterval=="number"?n.throttleSlotInterval:100;$i.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o=typeof n=="object"?!!n.errorPassThrough:!1,a={};let c=null;const l={method:"GET"};let u=!1,f=2*60*1e3;if(typeof n=="string")c=n;else if(typeof n=="object"){if((n==null||n.url==null)&&$i.throwArgumentError("missing URL","connection.url",n),c=n.url,typeof n.timeout=="number"&&n.timeout>0&&(f=n.timeout),n.headers)for(const h in n.headers)a[h.toLowerCase()]={key:h,value:String(n.headers[h])},["if-none-match","if-modified-since"].indexOf(h.toLowerCase())>=0&&(u=!0);if(l.allowGzip=!!n.allowGzip,n.user!=null&&n.password!=null){c.substring(0,6)!=="https:"&&n.allowInsecureAuthentication!==!0&&$i.throwError("basic authentication requires a secure https url",ie.errors.INVALID_ARGUMENT,{argument:"url",url:c,user:n.user,password:"[REDACTED]"});const h=n.user+":"+n.password;a.authorization={key:"Authorization",value:"Basic "+tC(qs(h))}}n.skipFetchSetup!=null&&(l.skipFetchSetup=!!n.skipFetchSetup),n.fetchOptions!=null&&(l.fetchOptions=Xn(n.fetchOptions))}const d=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),p=c?c.match(d):null;if(p)try{const h={statusCode:200,statusMessage:"OK",headers:{"content-type":p[1]||"text/plain"},body:p[2]?eC(p[3]):hre(p[3])};let w=h.body;return t&&(w=t(h.body,h)),Promise.resolve(w)}catch(h){$i.throwError("processing response error",ie.errors.SERVER_ERROR,{body:ca(p[1],p[2]),error:h,requestBody:null,requestMethod:"GET",url:c})}e&&(l.method="POST",l.body=e,a["content-type"]==null&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),a["content-length"]==null&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));const v={};Object.keys(a).forEach(h=>{const w=a[h];v[w.key]=w.value}),l.headers=v;const m=function(){let h=null;return{promise:new Promise(function(T,C){f&&(h=setTimeout(()=>{h!=null&&(h=null,C($i.makeError("timeout",ie.errors.TIMEOUT,{requestBody:ca(l.body,v["content-type"]),requestMethod:l.method,timeout:f,url:c})))},f))}),cancel:function(){h!=null&&(clearTimeout(h),h=null)}}}(),y=function(){return dre(this,void 0,void 0,function*(){for(let h=0;h<r;h++){let w=null;try{if(w=yield fre(c,l),h<r){if(w.statusCode===301||w.statusCode===302){const T=w.headers.location||"";if(l.method==="GET"&&T.match(/^https:/)){c=w.headers.location;continue}}else if(w.statusCode===429){let T=!0;if(i&&(T=yield i(h,c)),T){let C=0;const B=w.headers["retry-after"];typeof B=="string"&&B.match(/^[1-9][0-9]*$/)?C=parseInt(B)*1e3:C=s*parseInt(String(Math.random()*Math.pow(2,h))),yield eS(C);continue}}}}catch(T){w=T.response,w==null&&(m.cancel(),$i.throwError("missing response",ie.errors.SERVER_ERROR,{requestBody:ca(l.body,v["content-type"]),requestMethod:l.method,serverError:T,url:c}))}let S=w.body;if(u&&w.statusCode===304?S=null:!o&&(w.statusCode<200||w.statusCode>=300)&&(m.cancel(),$i.throwError("bad response",ie.errors.SERVER_ERROR,{status:w.statusCode,headers:w.headers,body:ca(S,w.headers?w.headers["content-type"]:null),requestBody:ca(l.body,v["content-type"]),requestMethod:l.method,url:c})),t)try{const T=yield t(S,w);return m.cancel(),T}catch(T){if(T.throttleRetry&&h<r){let C=!0;if(i&&(C=yield i(h,c)),C){const B=s*parseInt(String(Math.random()*Math.pow(2,h)));yield eS(B);continue}}m.cancel(),$i.throwError("processing response error",ie.errors.SERVER_ERROR,{body:ca(S,w.headers?w.headers["content-type"]:null),error:T,requestBody:ca(l.body,v["content-type"]),requestMethod:l.method,url:c})}return m.cancel(),S}return $i.throwError("failed response",ie.errors.SERVER_ERROR,{requestBody:ca(l.body,v["content-type"]),requestMethod:l.method,url:c})})}();return Promise.race([m.promise,y])}function Cx(n,e,t){let r=(s,o)=>{let a=null;if(s!=null)try{a=JSON.parse(Yd(s))}catch(c){$i.throwError("invalid JSON",ie.errors.SERVER_ERROR,{body:s,error:c})}return t&&(a=t(a,o)),a},i=null;if(e!=null){i=qs(e);const s=typeof n=="string"?{url:n}:Xn(n);s.headers?Object.keys(s.headers).filter(a=>a.toLowerCase()==="content-type").length!==0||(s.headers=Xn(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},n=s}return pre(n,i,r)}function Tf(n,e){return e||(e={}),e=Xn(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(t,r){let i=null,s=!1;const o=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{o()&&r(new Error("timeout"))},e.timeout));const a=e.retryLimit;let c=0;function l(){return n().then(function(u){if(u!==void 0)o()&&t(u);else if(e.oncePoll)e.oncePoll.once("poll",l);else if(e.onceBlock)e.onceBlock.once("block",l);else if(!s){if(c++,c>a){o()&&r(new Error("retry limit reached"));return}let f=e.interval*parseInt(String(Math.random()*Math.pow(2,c)));f<e.floor&&(f=e.floor),f>e.ceiling&&(f=e.ceiling),setTimeout(l,f)}return null},function(u){o()&&r(u)})}l()})}var km="qpzry9x8gf2tvdw0s3jn54khce6mua7l",m_={};for(var zh=0;zh<km.length;zh++){var fv=km.charAt(zh);if(m_[fv]!==void 0)throw new TypeError(fv+" is ambiguous");m_[fv]=zh}function ql(n){var e=n>>25;return(n&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function zC(n){for(var e=1,t=0;t<n.length;++t){var r=n.charCodeAt(t);if(r<33||r>126)return"Invalid prefix ("+n+")";e=ql(e)^r>>5}for(e=ql(e),t=0;t<n.length;++t){var i=n.charCodeAt(t);e=ql(e)^i&31}return e}function mre(n,e,t){if(t=t||90,n.length+7+e.length>t)throw new TypeError("Exceeds length limit");n=n.toLowerCase();var r=zC(n);if(typeof r=="string")throw new Error(r);for(var i=n+"1",s=0;s<e.length;++s){var o=e[s];if(o>>5)throw new Error("Non 5-bit word");r=ql(r)^o,i+=km.charAt(o)}for(s=0;s<6;++s)r=ql(r);for(r^=1,s=0;s<6;++s){var a=r>>(5-s)*5&31;i+=km.charAt(a)}return i}function GC(n,e){if(e=e||90,n.length<8)return n+" too short";if(n.length>e)return"Exceeds length limit";var t=n.toLowerCase(),r=n.toUpperCase();if(n!==t&&n!==r)return"Mixed-case string "+n;n=t;var i=n.lastIndexOf("1");if(i===-1)return"No separator character for "+n;if(i===0)return"Missing prefix for "+n;var s=n.slice(0,i),o=n.slice(i+1);if(o.length<6)return"Data too short";var a=zC(s);if(typeof a=="string")return a;for(var c=[],l=0;l<o.length;++l){var u=o.charAt(l),f=m_[u];if(f===void 0)return"Unknown character "+u;a=ql(a)^f,!(l+6>=o.length)&&c.push(f)}return a!==1?"Invalid checksum for "+n:{prefix:s,words:c}}function gre(){var n=GC.apply(null,arguments);if(typeof n=="object")return n}function vre(n){var e=GC.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function N0(n,e,t,r){for(var i=0,s=0,o=(1<<t)-1,a=[],c=0;c<n.length;++c)for(i=i<<e|n[c],s+=e;s>=t;)s-=t,a.push(i>>s&o);if(r)s>0&&a.push(i<<t-s&o);else{if(s>=e)return"Excess padding";if(i<<t-s&o)return"Non-zero padding"}return a}function yre(n){var e=N0(n,8,5,!0);if(Array.isArray(e))return e}function _re(n){var e=N0(n,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function bre(n){var e=N0(n,5,8,!1);if(Array.isArray(e))return e}function xre(n){var e=N0(n,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var wre={decodeUnsafe:gre,decode:vre,encode:mre,toWordsUnsafe:yre,toWords:_re,fromWordsUnsafe:bre,fromWords:xre};const tS=zc(wre),B0="providers/5.7.2",vf=new ie(B0);class qe{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),r=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),o=this.hash.bind(this),a=this.hex.bind(this),c=this.number.bind(this),l=this.type.bind(this),u=f=>this.data(f,!0);return e.transaction={hash:o,type:l,accessList:qe.allowNull(this.accessList.bind(this),null),blockHash:qe.allowNull(o,null),blockNumber:qe.allowNull(c,null),transactionIndex:qe.allowNull(c,null),confirmations:qe.allowNull(c,null),from:t,gasPrice:qe.allowNull(r),maxPriorityFeePerGas:qe.allowNull(r),maxFeePerGas:qe.allowNull(r),gasLimit:r,to:qe.allowNull(t,null),value:r,nonce:c,data:s,r:qe.allowNull(this.uint256),s:qe.allowNull(this.uint256),v:qe.allowNull(c),creates:qe.allowNull(t,null),raw:qe.allowNull(s)},e.transactionRequest={from:qe.allowNull(t),nonce:qe.allowNull(c),gasLimit:qe.allowNull(r),gasPrice:qe.allowNull(r),maxPriorityFeePerGas:qe.allowNull(r),maxFeePerGas:qe.allowNull(r),to:qe.allowNull(t),value:qe.allowNull(r),data:qe.allowNull(u),type:qe.allowNull(c),accessList:qe.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:c,blockNumber:c,transactionHash:o,address:t,topics:qe.arrayOf(o),data:s,logIndex:c,blockHash:o},e.receipt={to:qe.allowNull(this.address,null),from:qe.allowNull(this.address,null),contractAddress:qe.allowNull(t,null),transactionIndex:c,root:qe.allowNull(a),gasUsed:r,logsBloom:qe.allowNull(s),blockHash:o,transactionHash:o,logs:qe.arrayOf(this.receiptLog.bind(this)),blockNumber:c,confirmations:qe.allowNull(c,null),cumulativeGasUsed:r,effectiveGasPrice:qe.allowNull(r),status:qe.allowNull(c),type:l},e.block={hash:qe.allowNull(o),parentHash:o,number:c,timestamp:c,nonce:qe.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:qe.allowNull(t),extraData:s,transactions:qe.allowNull(qe.arrayOf(o)),baseFeePerGas:qe.allowNull(r)},e.blockWithTransactions=Xn(e.block),e.blockWithTransactions.transactions=qe.allowNull(qe.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:qe.allowNull(i,void 0),toBlock:qe.allowNull(i,void 0),blockHash:qe.allowNull(o,void 0),address:qe.allowNull(t,void 0),topics:qe.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:qe.allowNull(c),blockHash:qe.allowNull(o),transactionIndex:c,removed:qe.allowNull(this.boolean.bind(this)),address:t,data:qe.allowFalsish(s,"0x"),topics:qe.arrayOf(o),transactionHash:o,logIndex:c},e}accessList(e){return Ju(e||[])}number(e){return e==="0x"?0:Ce.from(e).toNumber()}type(e){return e==="0x"||e==null?0:Ce.from(e).toNumber()}bigNumber(e){return Ce.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return typeof e=="string"&&(!t&&e.substring(0,2)!=="0x"&&(e="0x"+e),Qt(e))?e.toLowerCase():vf.throwArgumentError("invalid hash","value",e)}data(e,t){const r=this.hex(e,t);if(r.length%2!==0)throw new Error("invalid data; odd-length - "+e);return r}address(e){return lr(e)}callAddress(e){if(!Qt(e,32))return null;const t=lr(mr(e,12));return t===eee?null:t}contractAddress(e){return jI(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||Qt(e))return bx(e);throw new Error("invalid blockTag")}hash(e,t){const r=this.hex(e,t);return Lc(r)!==32?vf.throwArgumentError("invalid hash","value",e):r}difficulty(e){if(e==null)return null;const t=Ce.from(e);try{return t.toNumber()}catch{}return null}uint256(e){if(!Qt(e))throw new Error("invalid uint256");return Mn(e,32)}_block(e,t){e.author!=null&&e.miner==null&&(e.miner=e.author);const r=e._difficulty!=null?e._difficulty:e.difficulty,i=qe.check(t,e);return i._difficulty=r==null?null:Ce.from(r),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return qe.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&Ce.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const t=qe.check(this.formats.transaction,e);if(e.chainId!=null){let r=e.chainId;Qt(r)&&(r=Ce.from(r).toNumber()),t.chainId=r}else{let r=e.networkId;r==null&&t.v==null&&(r=e.chainId),Qt(r)&&(r=Ce.from(r).toNumber()),typeof r!="number"&&t.v!=null&&(r=(t.v-35)/2,r<0&&(r=0),r=parseInt(r)),typeof r!="number"&&(r=0),t.chainId=r}return t.blockHash&&t.blockHash.replace(/0/g,"")==="x"&&(t.blockHash=null),t}transaction(e){return Zne(e)}receiptLog(e){return qe.check(this.formats.receiptLog,e)}receipt(e){const t=qe.check(this.formats.receipt,e);if(t.root!=null)if(t.root.length<=4){const r=Ce.from(t.root).toNumber();r===0||r===1?(t.status!=null&&t.status!==r&&vf.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=r,delete t.root):vf.throwArgumentError("invalid alt-root-status","value.root",t.root)}else t.root.length!==66&&vf.throwArgumentError("invalid root hash","value.root",t.root);return t.status!=null&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(t=>this.topics(t)):e!=null?this.hash(e,!0):null}filter(e){return qe.check(this.formats.filter,e)}filterLog(e){return qe.check(this.formats.filterLog,e)}static check(e,t){const r={};for(const i in e)try{const s=e[i](t[i]);s!==void 0&&(r[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=t[i],s}return r}static allowNull(e,t){return function(r){return r==null?t:e(r)}}static allowFalsish(e,t){return function(r){return r?e(r):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const r=[];return t.forEach(function(i){r.push(e(i))}),r}}}var yt=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const Mt=new ie(B0),Are=10;function nS(n){return n==null?"null":(Lc(n)!==32&&Mt.throwArgumentError("invalid topic","topic",n),n.toLowerCase())}function rS(n){for(n=n.slice();n.length>0&&n[n.length-1]==null;)n.pop();return n.map(e=>{if(Array.isArray(e)){const t={};e.forEach(i=>{t[nS(i)]=!0});const r=Object.keys(t);return r.sort(),r.join("|")}else return nS(e)}).join("&")}function Ere(n){return n===""?[]:n.split(/&/g).map(e=>{if(e==="")return[];const t=e.split("|").map(r=>r==="null"?null:r);return t.length===1?t[0]:t})}function vl(n){if(typeof n=="string"){if(n=n.toLowerCase(),Lc(n)===32)return"tx:"+n;if(n.indexOf(":")===-1)return n}else{if(Array.isArray(n))return"filter:*:"+rS(n);if(tte.isForkEvent(n))throw Mt.warn("not implemented"),new Error("not implemented");if(n&&typeof n=="object")return"filter:"+(n.address||"*")+":"+rS(n.topics||[])}throw new Error("invalid event - "+n)}function yf(){return new Date().getTime()}function iS(n){return new Promise(e=>{setTimeout(e,n)})}const Sre=["block","network","pending","poll"];let Tre=class{constructor(e,t,r){Ae(this,"tag",e),Ae(this,"listener",t),Ae(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const t=e[1],r=Ere(e[2]),i={};return r.length>0&&(i.topics=r),t&&t!=="*"&&(i.address=t),i}pollable(){return this.tag.indexOf(":")>=0||Sre.indexOf(this.tag)>=0}};const Mre={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function dv(n){return Mn(Ce.from(n).toHexString(),32)}function sS(n){return p_.encode(li([n,mr(K1(K1(n)),0,4)]))}const VC=new RegExp("^(ipfs)://(.*)$","i"),oS=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),VC,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function mp(n,e){try{return Yd(Id(n,e))}catch{}return null}function Id(n,e){if(n==="0x")return null;const t=Ce.from(mr(n,e,e+32)).toNumber(),r=Ce.from(mr(n,t,t+32)).toNumber();return mr(n,t+32,t+32+r)}function hv(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):Mt.throwArgumentError("unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}function aS(n){const e=ot(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function Rre(n){if(n.length%32===0)return n;const e=new Uint8Array(Math.ceil(n.length/32)*32);return e.set(n),e}function WC(n){const e=[];let t=0;for(let r=0;r<n.length;r++)e.push(null),t+=32;for(let r=0;r<n.length;r++){const i=ot(n[r]);e[r]=aS(t),e.push(aS(i.length)),e.push(Rre(i)),t+=32+Math.ceil(i.length/32)*32}return Gr(e)}class cS{constructor(e,t,r,i){Ae(this,"provider",e),Ae(this,"name",r),Ae(this,"address",e.formatter.address(t)),Ae(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>Ce.from(e).eq(1)).catch(e=>{if(e.code===ie.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return yt(this,void 0,void 0,function*(){const r={to:this.address,ccipReadEnabled:!0,data:Gr([e,fp(this.name),t||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,r.data=Gr(["0x9061b923",WC([Hee(this.name),r.data])]));try{let s=yield this.provider.call(r);return ot(s).length%32===4&&Mt.throwError("resolver threw error",ie.errors.CALL_EXCEPTION,{transaction:r,data:s}),i&&(s=Id(s,0)),s}catch(s){if(s.code===ie.errors.CALL_EXCEPTION)return null;throw s}})}_fetchBytes(e,t){return yt(this,void 0,void 0,function*(){const r=yield this._fetch(e,t);return r!=null?Id(r,0):null})}_getAddress(e,t){const r=Mre[String(e)];if(r==null&&Mt.throwError(`unsupported coin type: ${e}`,ie.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),r.ilk==="eth")return this.provider.formatter.address(t);const i=ot(t);if(r.p2pkh!=null){const s=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return sS(li([[r.p2pkh],"0x"+s[2]]))}}if(r.p2sh!=null){const s=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return sS(li([[r.p2sh],"0x"+s[2]]))}}if(r.prefix!=null){const s=i[1];let o=i[0];if(o===0?s!==20&&s!==32&&(o=-1):o=-1,o>=0&&i.length===2+s&&s>=1&&s<=75){const a=tS.toWords(i.slice(2));return a.unshift(o),tS.encode(r.prefix,a)}}return null}getAddress(e){return yt(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===iee?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===ie.errors.CALL_EXCEPTION)return null;throw i}const t=yield this._fetchBytes("0xf1cb7e06",dv(e));if(t==null||t==="0x")return null;const r=this._getAddress(e,t);return r==null&&Mt.throwError("invalid or unsupported coin data",ie.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),r})}getAvatar(){return yt(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(t==null)return null;for(let r=0;r<oS.length;r++){const i=t.match(oS[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:hv(t)};case"erc721":case"erc1155":{const o=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:t});const a=this._resolvedAddress||(yield this.getAddress()),c=(i[2]||"").split("/");if(c.length!==2)return null;const l=yield this.provider.formatter.address(c[0]),u=Mn(Ce.from(c[1]).toHexString(),32);if(s==="erc721"){const m=this.provider.formatter.callAddress(yield this.provider.call({to:l,data:Gr(["0x6352211e",u])}));if(a!==m)return null;e.push({type:"owner",content:m})}else if(s==="erc1155"){const m=Ce.from(yield this.provider.call({to:l,data:Gr(["0x00fdd58e",Mn(a,32),u])}));if(m.isZero())return null;e.push({type:"balance",content:m.toString()})}const f={to:this.provider.formatter.address(c[0]),data:Gr([o,u])};let d=mp(yield this.provider.call(f),0);if(d==null)return null;e.push({type:"metadata-url-base",content:d}),s==="erc1155"&&(d=d.replace("{id}",u.substring(2)),e.push({type:"metadata-url-expanded",content:d})),d.match(/^ipfs:/i)&&(d=hv(d)),e.push({type:"metadata-url",content:d});const p=yield Cx(d);if(!p)return null;e.push({type:"metadata",content:JSON.stringify(p)});let v=p.image;if(typeof v!="string")return null;if(!v.match(/^(https:\/\/|data:)/i)){if(v.match(VC)==null)return null;e.push({type:"url-ipfs",content:v}),v=hv(v)}return e.push({type:"url",content:v}),{linkage:e,url:v}}}}}catch{}return null})}getContentHash(){return yt(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const o=parseInt(t[3],16);if(t[4].length===o*2)return"ipfs://"+p_.encode("0x"+t[1])}const r=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const o=parseInt(r[3],16);if(r[4].length===o*2)return"ipns://"+p_.encode("0x"+r[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===32*2)return"bzz://"+i[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&s[1].length===34*2){const o={"=":"","+":"-","/":"_"};return"sia://"+tC("0x"+s[1]).replace(/[=+\/]/g,c=>o[c])}return Mt.throwError("invalid or unsupported content hash data",ie.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return yt(this,void 0,void 0,function*(){let t=qs(e);t=li([dv(64),dv(t.length),t]),t.length%32!==0&&(t=li([t,Mn("0x",32-e.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",Qe(t));return r==null||r==="0x"?null:Yd(r)})}}let pv=null,Ire=1;class Cre extends M0{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),Ae(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(t=>{}),this._ready().catch(t=>{});else{const t=Ls(new.target,"getNetwork")(e);t?(Ae(this,"_network",t),this.emit("network",t,null)):Mt.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return yt(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||Mt.throwError("no network detected",ie.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:Ae(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return Tf(()=>this._ready().then(e=>e,e=>{if(!(e.code===ie.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return pv==null&&(pv=new qe),pv}static getNetwork(e){return cre(e??"homestead")}ccipReadFetch(e,t,r){return yt(this,void 0,void 0,function*(){if(this.disableCcipRead||r.length===0)return null;const i=e.to.toLowerCase(),s=t.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",i).replace("{data}",s),u=c.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:i}),f=yield Cx({url:l,errorPassThrough:!0},u,(p,v)=>(p.status=v.statusCode,p));if(f.data)return f.data;const d=f.message||"unknown error";if(f.status>=400&&f.status<500)return Mt.throwError(`response not found during CCIP fetch: ${d}`,ie.errors.SERVER_ERROR,{url:c,errorMessage:d});o.push(d)}return Mt.throwError(`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,ie.errors.SERVER_ERROR,{urls:r,errorMessages:o})})}_getInternalBlockNumber(e){return yt(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(yf()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const t=yf(),r=zn({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),s;const o=yf();return i=Ce.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:t,respTime:o}});return this._internalBlockNumber=r,r.catch(i=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)}),(yield r).blockNumber})}poll(){return yt(this,void 0,void 0,function*(){const e=Ire++,t=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(r),this.emit("poll",e,r),r===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)Mt.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",Mt.makeError("network block skew detected",ie.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let i=this._emitted.block+1;i<=r;i++)this.emit("block",i);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&r-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=r-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let o=this.getTransactionReceipt(s).then(a=>(!a||a.blockNumber==null||(this._emitted["t:"+s]=a.blockNumber,this.emit(s,a)),null)).catch(a=>{this.emit("error",a)});t.push(o);break}case"filter":{if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=r-1);const s=i.filter;s.fromBlock=i._lastBlockNumber+1,s.toBlock=r;const o=s.toBlock-this._maxFilterBlockRange;o>s.fromBlock&&(s.fromBlock=o),s.fromBlock<0&&(s.fromBlock=0);const a=this.getLogs(s).then(c=>{i._inflight=!1,c.length!==0&&c.forEach(l=>{l.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=l.blockNumber),this._emitted["b:"+l.blockHash]=l.blockNumber,this._emitted["t:"+l.transactionHash]=l.blockNumber,this.emit(s,l)})}).catch(c=>{this.emit("error",c),i._inflight=!1});t.push(a)}break}}}),this._lastBlockNumber=r,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return yt(this,void 0,void 0,function*(){return Mt.throwError("provider does not support network detection",ie.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return yt(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield iS(0),this._network;const r=Mt.makeError("underlying network changed",ie.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",r),r}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=yf();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(t=>((this._fastBlockNumber==null||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=yf(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,r){return yt(this,void 0,void 0,function*(){return this._waitForTransaction(e,t??1,r||0,null)})}_waitForTransaction(e,t,r,i){return yt(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=t?s:new Promise((o,a)=>{const c=[];let l=!1;const u=function(){return l?!0:(l=!0,c.forEach(d=>{d()}),!1)},f=d=>{d.confirmations<t||u()||o(d)};if(this.on(e,f),c.push(()=>{this.removeListener(e,f)}),i){let d=i.startBlock,p=null;const v=m=>yt(this,void 0,void 0,function*(){l||(yield iS(1e3),this.getTransactionCount(i.from).then(y=>yt(this,void 0,void 0,function*(){if(!l){if(y<=i.nonce)d=m;else{{const h=yield this.getTransaction(e);if(h&&h.blockNumber!=null)return}for(p==null&&(p=d-3,p<i.startBlock&&(p=i.startBlock));p<=m;){if(l)return;const h=yield this.getBlockWithTransactions(p);for(let w=0;w<h.transactions.length;w++){const S=h.transactions[w];if(S.hash===e)return;if(S.from===i.from&&S.nonce===i.nonce){if(l)return;const T=yield this.waitForTransaction(S.hash,t);if(u())return;let C="replaced";S.data===i.data&&S.to===i.to&&S.value.eq(i.value)?C="repriced":S.data==="0x"&&S.from===S.to&&S.value.isZero()&&(C="cancelled"),a(Mt.makeError("transaction was replaced",ie.errors.TRANSACTION_REPLACED,{cancelled:C==="replaced"||C==="cancelled",reason:C,replacement:this._wrapTransaction(S),hash:e,receipt:T}));return}}p++}}l||this.once("block",v)}}),y=>{l||this.once("block",v)}))});if(l)return;this.once("block",v),c.push(()=>{this.removeListener("block",v)})}if(typeof r=="number"&&r>0){const d=setTimeout(()=>{u()||a(Mt.makeError("timeout exceeded",ie.errors.TIMEOUT,{timeout:r}))},r);d.unref&&d.unref(),c.push(()=>{clearTimeout(d)})}})})}getBlockNumber(){return yt(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return yt(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return Ce.from(e)}catch(t){return Mt.throwError("bad result from backend",ie.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return yt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield zn({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getBalance",r);try{return Ce.from(i)}catch(s){return Mt.throwError("bad result from backend",ie.errors.SERVER_ERROR,{method:"getBalance",params:r,result:i,error:s})}})}getTransactionCount(e,t){return yt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield zn({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getTransactionCount",r);try{return Ce.from(i).toNumber()}catch(s){return Mt.throwError("bad result from backend",ie.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:i,error:s})}})}getCode(e,t){return yt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield zn({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getCode",r);try{return Qe(i)}catch(s){return Mt.throwError("bad result from backend",ie.errors.SERVER_ERROR,{method:"getCode",params:r,result:i,error:s})}})}getStorageAt(e,t,r){return yt(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield zn({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then(o=>bx(o))}),s=yield this.perform("getStorageAt",i);try{return Qe(s)}catch(o){return Mt.throwError("bad result from backend",ie.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:o})}})}_wrapTransaction(e,t,r){if(t!=null&&Lc(t)!==32)throw new Error("invalid response - sendTransaction");const i=e;return t!=null&&e.hash!==t&&Mt.throwError("Transaction hash mismatch from Provider.sendTransaction.",ie.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),i.wait=(s,o)=>yt(this,void 0,void 0,function*(){s==null&&(s=1),o==null&&(o=0);let a;s!==0&&r!=null&&(a={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r});const c=yield this._waitForTransaction(e.hash,s,o,a);return c==null&&s===0?null:(this._emitted["t:"+e.hash]=c.blockNumber,c.status===0&&Mt.throwError("transaction failed",ie.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:c}),c)}),i}sendTransaction(e){return yt(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(s=>Qe(s)),r=this.formatter.transaction(e);r.confirmations==null&&(r.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,s,i)}catch(s){throw s.transaction=r,s.transactionHash=r.hash,s}})}_getTransactionRequest(e){return yt(this,void 0,void 0,function*(){const t=yield e,r={};return["from","to"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?Ce.from(s):null))}),["type"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s??null))}),t.accessList&&(r.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?Qe(s):null))}),this.formatter.transactionRequest(yield zn(r))})}_getFilter(e){return yt(this,void 0,void 0,function*(){e=yield e;const t={};return e.address!=null&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(r=>{e[r]!=null&&(t[r]=e[r])}),["fromBlock","toBlock"].forEach(r=>{e[r]!=null&&(t[r]=this._getBlockTag(e[r]))}),this.formatter.filter(yield zn(t))})}_call(e,t,r){return yt(this,void 0,void 0,function*(){r>=Are&&Mt.throwError("CCIP read exceeded maximum redirections",ie.errors.SERVER_ERROR,{redirects:r,transaction:e});const i=e.to,s=yield this.perform("call",{transaction:e,blockTag:t});if(r>=0&&t==="latest"&&i!=null&&s.substring(0,10)==="0x556f1830"&&Lc(s)%32===4)try{const o=mr(s,4),a=mr(o,0,32);Ce.from(a).eq(i)||Mt.throwError("CCIP Read sender did not match",ie.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const c=[],l=Ce.from(mr(o,32,64)).toNumber(),u=Ce.from(mr(o,l,l+32)).toNumber(),f=mr(o,l+32);for(let h=0;h<u;h++){const w=mp(f,h*32);w==null&&Mt.throwError("CCIP Read contained corrupt URL string",ie.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),c.push(w)}const d=Id(o,64);Ce.from(mr(o,100,128)).isZero()||Mt.throwError("CCIP Read callback selector included junk",ie.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const p=mr(o,96,100),v=Id(o,128),m=yield this.ccipReadFetch(e,d,c);m==null&&Mt.throwError("CCIP Read disabled or provided no URLs",ie.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const y={to:i,data:Gr([p,WC([m,v])])};return this._call(y,t,r+1)}catch(o){if(o.code===ie.errors.SERVER_ERROR)throw o}try{return Qe(s)}catch(o){return Mt.throwError("bad result from backend",ie.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:s,error:o})}})}call(e,t){return yt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield zn({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)})}estimateGas(e){return yt(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield zn({transaction:this._getTransactionRequest(e)}),r=yield this.perform("estimateGas",t);try{return Ce.from(r)}catch(i){return Mt.throwError("bad result from backend",ie.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:i})}})}_getAddress(e){return yt(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&Mt.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return t==null&&Mt.throwError("ENS name not configured",ie.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return yt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let r=-128;const i={includeTransactions:!!t};if(Qt(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),Qt(i.blockTag)&&(r=parseInt(i.blockTag.substring(2),16))}catch{Mt.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return Tf(()=>yt(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&r>this._emitted.block?null:void 0;if(t){let o=null;for(let c=0;c<s.transactions.length;c++){const l=s.transactions[c];if(l.blockNumber==null)l.confirmations=0;else if(l.confirmations==null){o==null&&(o=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let u=o-l.blockNumber+1;u<=0&&(u=1),l.confirmations=u}}const a=this.formatter.blockWithTransactions(s);return a.transactions=a.transactions.map(c=>this._wrapTransaction(c)),a}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return yt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return Tf(()=>yt(this,void 0,void 0,function*(){const r=yield this.perform("getTransaction",t);if(r==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(r);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return yt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return Tf(()=>yt(this,void 0,void 0,function*(){const r=yield this.perform("getTransactionReceipt",t);if(r==null)return this._emitted["t:"+e]==null?null:void 0;if(r.blockHash==null)return;const i=this.formatter.receipt(r);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return i}),{oncePoll:this})})}getLogs(e){return yt(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield zn({filter:this._getFilter(e)}),r=yield this.perform("getLogs",t);return r.forEach(i=>{i.removed==null&&(i.removed=!1)}),qe.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)})}getEtherPrice(){return yt(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return yt(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&Mt.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return yt(this,void 0,void 0,function*(){let t=e;for(;;){if(t===""||t==="."||e!=="eth"&&t==="eth")return null;const r=yield this._getResolver(t,"getResolver");if(r!=null){const i=new cS(this,r,e);return t!==e&&!(yield i.supportsWildcard())?null:i}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return yt(this,void 0,void 0,function*(){t==null&&(t="ENS");const r=yield this.getNetwork();r.ensAddress||Mt.throwError("network does not support ENS",ie.errors.UNSUPPORTED_OPERATION,{operation:t,network:r.name});try{const i=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+fp(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return yt(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(r){if(Qt(e))throw r}typeof e!="string"&&Mt.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return yt(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const t=e.substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(t,"lookupAddress");if(r==null)return null;const i=mp(yield this.call({to:r,data:"0x691f3431"+fp(t).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return yt(this,void 0,void 0,function*(){let t=null;if(Qt(e)){const s=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(s,"getAvatar");if(!o)return null;t=new cS(this,o,s);try{const a=yield t.getAvatar();if(a)return a.url}catch(a){if(a.code!==ie.errors.CALL_EXCEPTION)throw a}try{const a=mp(yield this.call({to:o,data:"0x691f3431"+fp(s).substring(2)}),0);t=yield this.getResolver(a)}catch(a){if(a.code!==ie.errors.CALL_EXCEPTION)throw a;return null}}else if(t=yield this.getResolver(e),!t)return null;const r=yield t.getAvatar();return r==null?null:r.url})}perform(e,t){return Mt.throwError(e+" not implemented",ie.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_addEventListener(e,t,r){const i=new Tre(vl(e),t,r);return this._events.push(i),this._startEvent(i),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let r=!1,i=[],s=vl(e);return this._events=this._events.filter(o=>o.tag!==s?!0:(setTimeout(()=>{o.listener.apply(this,t)},0),r=!0,o.once?(i.push(o),!1):!0)),i.forEach(o=>{this._stopEvent(o)}),r}listenerCount(e){if(!e)return this._events.length;let t=vl(e);return this._events.filter(r=>r.tag===t).length}listeners(e){if(e==null)return this._events.map(r=>r.listener);let t=vl(e);return this._events.filter(r=>r.tag===t).map(r=>r.listener)}off(e,t){if(t==null)return this.removeAllListeners(e);const r=[];let i=!1,s=vl(e);return this._events=this._events.filter(o=>o.tag!==s||o.listener!=t||i?!0:(i=!0,r.push(o),!1)),r.forEach(o=>{this._stopEvent(o)}),this}removeAllListeners(e){let t=[];if(e==null)t=this._events,this._events=[];else{const r=vl(e);this._events=this._events.filter(i=>i.tag!==r?!0:(t.push(i),!1))}return t.forEach(r=>{this._stopEvent(r)}),this}}var mo=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const Gn=new ie(B0),Pre=["call","estimateGas"];function Hf(n,e){if(n==null)return null;if(typeof n.message=="string"&&n.message.match("reverted")){const t=Qt(n.data)?n.data:null;if(!e||t)return{message:n.message,data:t}}if(typeof n=="object"){for(const t in n){const r=Hf(n[t],e);if(r)return r}return null}if(typeof n=="string")try{return Hf(JSON.parse(n),e)}catch{}return null}function jC(n,e,t){const r=t.transaction||t.signedTransaction;if(n==="call"){const s=Hf(e,!0);if(s)return s.data;Gn.throwError("missing revert data in call exception; Transaction reverted without a reason string",ie.errors.CALL_EXCEPTION,{data:"0x",transaction:r,error:e})}if(n==="estimateGas"){let s=Hf(e.body,!1);s==null&&(s=Hf(e,!1)),s&&Gn.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",ie.errors.UNPREDICTABLE_GAS_LIMIT,{reason:s.message,method:n,transaction:r,error:e})}let i=e.message;throw e.code===ie.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&Gn.throwError("insufficient funds for intrinsic transaction cost",ie.errors.INSUFFICIENT_FUNDS,{error:e,method:n,transaction:r}),i.match(/nonce (is )?too low/i)&&Gn.throwError("nonce has already been used",ie.errors.NONCE_EXPIRED,{error:e,method:n,transaction:r}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&Gn.throwError("replacement fee too low",ie.errors.REPLACEMENT_UNDERPRICED,{error:e,method:n,transaction:r}),i.match(/only replay-protected/i)&&Gn.throwError("legacy pre-eip-155 transactions not supported",ie.errors.UNSUPPORTED_OPERATION,{error:e,method:n,transaction:r}),Pre.indexOf(n)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&Gn.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",ie.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:n,transaction:r}),e}function lS(n){return new Promise(function(e){setTimeout(e,n)})}function Nre(n){if(n.error){const e=new Error(n.error.message);throw e.code=n.error.code,e.data=n.error.data,e}return n.result}function _f(n){return n&&n.toLowerCase()}const g_={};class qC extends Qd{constructor(e,t,r){if(super(),e!==g_)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");Ae(this,"provider",t),r==null&&(r=0),typeof r=="string"?(Ae(this,"_address",this.provider.formatter.address(r)),Ae(this,"_index",null)):typeof r=="number"?(Ae(this,"_index",r),Ae(this,"_address",null)):Gn.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(e){return Gn.throwError("cannot alter JSON-RPC Signer connection",ie.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new Bre(g_,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&Gn.throwError("unknown account #"+this._index,ie.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=Xn(e);const t=this.getAddress().then(r=>(r&&(r=r.toLowerCase()),r));if(e.gasLimit==null){const r=Xn(e);r.from=t,e.gasLimit=this.provider.estimateGas(r)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(r=>mo(this,void 0,void 0,function*(){if(r==null)return null;const i=yield this.provider.resolveName(r);return i==null&&Gn.throwArgumentError("provided ENS name resolves to null","tx.to",r),i}))),zn({tx:zn(e),sender:t}).then(({tx:r,sender:i})=>{r.from!=null?r.from.toLowerCase()!==i&&Gn.throwArgumentError("from address mismatch","transaction",e):r.from=i;const s=this.provider.constructor.hexlifyTransaction(r,{from:!0});return this.provider.send("eth_sendTransaction",[s]).then(o=>o,o=>(typeof o.message=="string"&&o.message.match(/user denied/i)&&Gn.throwError("user rejected transaction",ie.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:r}),jC("sendTransaction",o,s)))})}signTransaction(e){return Gn.throwError("signing transactions is unsupported",ie.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return mo(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(e);try{return yield Tf(()=>mo(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(r);if(i!==null)return this.provider._wrapTransaction(i,r,t)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=r,i}})}signMessage(e){return mo(this,void 0,void 0,function*(){const t=typeof e=="string"?qs(e):e,r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[Qe(t),r.toLowerCase()])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&Gn.throwError("user rejected signing",ie.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:e}),i}})}_legacySignMessage(e){return mo(this,void 0,void 0,function*(){const t=typeof e=="string"?qs(e):e,r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),Qe(t)])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&Gn.throwError("user rejected signing",ie.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:e}),i}})}_signTypedData(e,t,r){return mo(this,void 0,void 0,function*(){const i=yield ii.resolveNames(e,t,r,o=>this.provider.resolveName(o)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(ii.getPayload(i.domain,t,i.value))])}catch(o){throw typeof o.message=="string"&&o.message.match(/user denied/i)&&Gn.throwError("user rejected signing",ie.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:i.domain,types:t,value:i.value}}),o}})}unlock(e){return mo(this,void 0,void 0,function*(){const t=this.provider,r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])})}}class Bre extends qC{sendTransaction(e){return this.sendUncheckedTransaction(e).then(t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:r=>this.provider.waitForTransaction(t,r)}))}}const Lre={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class $C extends Cre{constructor(e,t){let r=t;r==null&&(r=new Promise((i,s)=>{setTimeout(()=>{this.detectNetwork().then(o=>{i(o)},o=>{s(o)})},0)})),super(r),e||(e=Ls(this.constructor,"defaultUrl")()),typeof e=="string"?Ae(this,"connection",Object.freeze({url:e})):Ae(this,"connection",Object.freeze(Xn(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return mo(this,void 0,void 0,function*(){yield lS(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const t=Ls(this.constructor,"getNetwork");try{return t(Ce.from(e).toNumber())}catch(r){return Gn.throwError("could not detect network",ie.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:r})}}return Gn.throwError("could not detect network",ie.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new qC(g_,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(t=>this.formatter.address(t)))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Fo(r),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const s=Cx(this.connection,JSON.stringify(r),Nre).then(o=>(this.emit("debug",{action:"response",request:r,response:o,provider:this}),o),o=>{throw this.emit("debug",{action:"response",error:o,request:r,provider:this}),o});return i&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[_f(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[_f(t.address),t.blockTag]];case"getCode":return["eth_getCode",[_f(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[_f(t.address),Mn(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[Ls(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[Ls(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&t.filter.address!=null&&(t.filter.address=_f(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return mo(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=t.transaction;if(i&&i.type!=null&&Ce.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=yield this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(t=Xn(t),t.transaction=Xn(i),delete t.transaction.type)}}const r=this.prepareRequest(e,t);r==null&&Gn.throwError(e+" not implemented",ie.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(r[0],r[1])}catch(i){return jC(e,i,t)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(r){function i(){e.send("eth_getFilterChanges",[r]).then(function(s){if(e._pendingFilter!=t)return null;let o=Promise.resolve();return s.forEach(function(a){e._emitted["t:"+a.toLowerCase()]="pending",o=o.then(function(){return e.getTransaction(a).then(function(c){return e.emit("pending",c),null})})}),o.then(function(){return lS(1e3)})}).then(function(){if(e._pendingFilter!=t){e.send("eth_uninstallFilter",[r]);return}return setTimeout(function(){i()},0),null}).catch(s=>{})}return i(),r}).catch(r=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const r=Xn(Lre);if(t)for(const s in t)t[s]&&(r[s]=!0);PJ(e,r);const i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(s){if(e[s]==null)return;const o=bx(Ce.from(e[s]));s==="gasLimit"&&(s="gas"),i[s]=o}),["from","to","data"].forEach(function(s){e[s]!=null&&(i[s]=Qe(e[s]))}),e.accessList&&(i.accessList=Ju(e.accessList)),i}}const uS=new ie(B0);let kre=1;function fS(n,e){const t="Web3LegacyFetcher";return function(r,i){const s={method:r,params:i,id:kre++,jsonrpc:"2.0"};return new Promise((o,a)=>{this.emit("debug",{action:"request",fetcher:t,request:Fo(s),provider:this}),e(s,(c,l)=>{if(c)return this.emit("debug",{action:"response",fetcher:t,error:c,request:s,provider:this}),a(c);if(this.emit("debug",{action:"response",fetcher:t,request:s,response:l,provider:this}),l.error){const u=new Error(l.error.message);return u.code=l.error.code,u.data=l.error.data,a(u)}o(l.result)})})}}function Dre(n){return function(e,t){t==null&&(t=[]);const r={method:e,params:t};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:Fo(r),provider:this}),n.request(r).then(i=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,response:i,provider:this}),i),i=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,error:i,provider:this}),i})}}class Ore extends $C{constructor(e,t){e==null&&uS.throwArgumentError("missing provider","provider",e);let r=null,i=null,s=null;typeof e=="function"?(r="unknown:",i=e):(r=e.host||e.path||"",!r&&e.isMetaMask&&(r="metamask"),s=e,e.request?(r===""&&(r="eip-1193:"),i=Dre(e)):e.sendAsync?i=fS(e,e.sendAsync.bind(e)):e.send?i=fS(e,e.send.bind(e)):uS.throwArgumentError("unsupported provider","provider",e),r||(r="unknown:")),super(r,t),Ae(this,"jsonRpcFetchFunc",i),Ae(this,"provider",s)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}const Ure="units/5.7.0",Fre=new ie(Ure),XC=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Hre(n,e){if(typeof e=="string"){const t=XC.indexOf(e);t!==-1&&(e=3*t)}return lp(n,e??18)}function zre(n,e){if(typeof n!="string"&&Fre.throwArgumentError("value must be a string","value",n),typeof e=="string"){const t=XC.indexOf(e);t!==-1&&(e=3*t)}return vs(n,e??18)}function Gre(n){return Hre(n,18)}function Vre(n){return zre(n,18)}const Ua=(n,e)=>{const t=ki();var r="";e?r=e:t.getWeb3ConfigItem.explorer?r=t.getWeb3ConfigItem.explorer:r="https://base-sepolia.blockscout.com",t.setDialogError({show:!0,url:`${r}/tx/${n}`})},KC=async n=>{const t=ki().getWeb3ConfigItem;try{await n.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${t.chain_id.toString(16)}`}]})}catch(r){if(r.code===4902)try{await n.request({method:"wallet_addEthereumChain",params:[{chainId:`0x${t.chain_id.toString(16)}`,chainName:`${t.network}${t.network.includes("Testnet")?"":" Testnet"}`,nativeCurrency:{name:t.symbol||"ETH",symbol:t.symbol||"ETH",decimals:18},rpcUrls:[t.rpc||""],blockExplorerUrls:[t.explorer||""]}]})}catch(i){throw i}else throw r}},Jd=n=>{if(!n)return"";const e=Gre(n.toString());return e>0?Math.round(e*100)/100:0},YC=n=>n?Vre(n.toString()):"",Wre=async()=>{try{const n=ki();return(await NI.post(n.getWeb3ConfigItem.rpc,{jsonrpc:"2.0",method:"eth_blockNumber",params:[],id:QC()})).data.result}catch{}},jre=async n=>{const e=await Wre();if(e){const t=await qre(e,n);return parseInt(t,16)/10**18}},qre=async(n,e)=>{try{const t=ki();return(await NI.post(t.getWeb3ConfigItem.rpc,{jsonrpc:"2.0",method:"eth_getBalance",params:[e,n],id:QC()})).data.result}catch{}},QC=()=>Math.floor(Math.random()*1e16),ef=async()=>{var t;const n=hi(),e=n.getAccountsWalletAddress;if((e==null?void 0:e.toLowerCase())===((t=n.getAccountsWalletAddress)==null?void 0:t.toLowerCase()))return e;Mr.warning("The bound wallet address does not match the current account")},Ko=async(n="nftmint",e="saleAbi")=>{var t,r,i,s,o,a;try{const c=ki(),l=c.getWeb3ConfigItem,u=new $C(l.rpc),f=c.getWeb3ConfigItem[n],d=ib(e);return new FC(f,d,u)}catch(c){const l=Ba(c==null?void 0:c.message);return l?Ua(l):Mr.error(((r=(t=c==null?void 0:c.error)==null?void 0:t.data)==null?void 0:r.message)||((s=(i=c==null?void 0:c.error)==null?void 0:i.data)==null?void 0:s.message)||((o=c==null?void 0:c.error)==null?void 0:o.message)||((a=c==null?void 0:c.data)==null?void 0:a.message)||"Transaction failed"),null}},L0=async(n="nftmint",e="saleAbi")=>{try{const t=ki(),i=new Ore(t.getAccountWalletItem).getSigner(),s=t.getWeb3ConfigItem[n],o=ib(e);return new FC(s,o,i)}catch{}},ZC=async(n="nft",e="nftABI")=>{var t,r,i,s,o,a;try{const c=ki(),l=new qu(c.getAccountWalletItem),u=c.getWeb3ConfigItem[n],f=ib(e);return new l.eth.Contract(f,u)}catch(c){const l=Ba(c==null?void 0:c.message);return l?Ua(l):Mr.error(((r=(t=c==null?void 0:c.error)==null?void 0:t.data)==null?void 0:r.message)||((s=(i=c==null?void 0:c.error)==null?void 0:i.data)==null?void 0:s.message)||((o=c==null?void 0:c.error)==null?void 0:o.message)||((a=c==null?void 0:c.data)==null?void 0:a.message)||"Transaction failed"),null}},$re=async n=>{try{return(await(await Ko("nftmint","nftmintABI")).mintMetadatas(n)).toString().split(",").map(Number)}catch{}},Xre=async(n,e,t)=>{var r,i,s,o,a,c;try{if(await ef()){const f=await(await L0("nftmint","nftmintABI")).purchase(n,e,{value:YC(t)});return f.wait(),f.hash}}catch(l){const u=Ba(l==null?void 0:l.message);return u?Ua(u):Mr.error(((i=(r=l==null?void 0:l.error)==null?void 0:r.data)==null?void 0:i.message)||((o=(s=l==null?void 0:l.error)==null?void 0:s.data)==null?void 0:o.message)||((a=l==null?void 0:l.error)==null?void 0:a.message)||((c=l==null?void 0:l.data)==null?void 0:c.message)||"Transaction failed!"),null}},Kre=async(n,e,t,r)=>{var i,s,o,a,c,l;try{if(await ef()){const d=await(await L0("nftmint","nftmintABI")).purchaseBatch(n,e,r,{value:YC(t)});return d.wait(),d.hash}}catch(u){const f=Ba(u==null?void 0:u.message);return f?Ua(f):Mr.error(((s=(i=u==null?void 0:u.error)==null?void 0:i.data)==null?void 0:s.message)||((a=(o=u==null?void 0:u.error)==null?void 0:o.data)==null?void 0:a.message)||((c=u==null?void 0:u.error)==null?void 0:c.message)||((l=u==null?void 0:u.data)==null?void 0:l.message)||"Transaction failed!"),null}},Yre=async()=>{try{const n=hi();return n.getAccountsWalletAddress?(await(await Ko("nftmint","nftmintABI")).getUserPurchases(n.getAccountsWalletAddress)).toString().split(",").map(Number):void 0}catch{}},Qre=async()=>{try{const n=hi();if(!n.getAccountsWalletAddress)return;const t=await(await Ko("nftmint","nftmintABI")).getUserReferralEarnings(n.getAccountsWalletAddress);return Jd(t.toString())}catch{}},Zre=async()=>{try{const n=hi();return n.getAccountsWalletAddress?(await(await Ko("nftmint","nftmintABI")).getUserReferrales(n.getAccountsWalletAddress)).toString().split(",").map(Number):void 0}catch{}},Jre=async()=>{try{const n=hi();if(!n.getAccountsWalletAddress)return;const t=await(await Ko("nft","nftABI")).getOwnerTokenIds(n.getAccountsWalletAddress),i=(t&&t.toString()?t.toString().split(",").map(Number):[]).filter(a=>a!==0),s=20,o=[];for(let a=0;a<i.length;a+=s)o.push(i.slice(a,a+s));return o||[]}catch{return[]}},eie=async n=>{var e,t,r,i,s,o;try{const a=await ef();if(!a)return;const c=ki();await c.getAccountWalletItem.enable();const l=c.getWeb3ConfigItem.nftstake;return(await(await ZC()).methods.approve(l,n).send({from:a})).transactionHash}catch(a){const c=Ba(a==null?void 0:a.message);return c?Ua(c):Mr.error(((t=(e=a==null?void 0:a.error)==null?void 0:e.data)==null?void 0:t.message)||((i=(r=a==null?void 0:a.error)==null?void 0:r.data)==null?void 0:i.message)||((s=a==null?void 0:a.error)==null?void 0:s.message)||((o=a==null?void 0:a.data)==null?void 0:o.message)||"Authorization failed!"),null}},tie=async n=>{var e,t,r,i,s,o;try{const a=await ef();if(!a)return;const c=ki();await c.getAccountWalletItem.enable();const l=c.getWeb3ConfigItem.nftstake;return(await(await ZC()).methods.approveBatch(l,n).send({from:a})).transactionHash}catch(a){const c=Ba(a==null?void 0:a.message);return c?Ua(c):Mr.error(((t=(e=a==null?void 0:a.error)==null?void 0:e.data)==null?void 0:t.message)||((i=(r=a==null?void 0:a.error)==null?void 0:r.data)==null?void 0:i.message)||((s=a==null?void 0:a.error)==null?void 0:s.message)||((o=a==null?void 0:a.data)==null?void 0:o.message)||"Authorization failed!"),null}},nie=async n=>{var e,t,r,i,s,o;try{if(!await ef())return;if(await eie(n)){const u=await(await L0("nftstake","nftstakeABI")).stake(n);return await u.wait(),u.hash}}catch(a){const c=Ba(a==null?void 0:a.message);return c?Ua(c):Mr.error(((t=(e=a==null?void 0:a.error)==null?void 0:e.data)==null?void 0:t.message)||((i=(r=a==null?void 0:a.error)==null?void 0:r.data)==null?void 0:i.message)||((s=a==null?void 0:a.error)==null?void 0:s.message)||((o=a==null?void 0:a.data)==null?void 0:o.message)||"Pledge failed!"),null}},rie=async n=>{var e,t,r,i,s,o;try{if(!await ef())return;if(await tie(n)){const u=await(await L0("nftstake","nftstakeABI")).stakeBatch(n);return await u.wait(),u.hash}}catch(a){const c=Ba(a==null?void 0:a.message);return c?Ua(c):Mr.error(((t=(e=a==null?void 0:a.error)==null?void 0:e.data)==null?void 0:t.message)||((i=(r=a==null?void 0:a.error)==null?void 0:r.data)==null?void 0:i.message)||((s=a==null?void 0:a.error)==null?void 0:s.message)||((o=a==null?void 0:a.data)==null?void 0:o.message)||"Pledge failed!"),null}},dS=async()=>{try{const n=hi();return n.getAccountsWalletAddress?(await(await Ko("nftstake","nftstakeABI")).getStakedLevelCounts(n.getAccountsWalletAddress)).toString().split(",").map(Number):void 0}catch{}},iie=async()=>{try{const n=hi();if(!n.getAccountsWalletAddress)return;const t=await(await Ko("nftstake","nftstakeABI")).getTodayRewards(n.getAccountsWalletAddress);return Jd(t.toString())}catch{}},sie=async()=>{try{const n=hi();if(!n.getAccountsWalletAddress)return;const t=await(await Ko("nftstake","nftstakeABI")).getTotalRewards(n.getAccountsWalletAddress);return Jd(t.toString())}catch{}},oie=async n=>{try{const e=hi();return e.getAccountsWalletAddress?(await(await Ko("nftstake","nftstakeABI")).getLevelsRewards(e.getAccountsWalletAddress,n)).toString().split(",").map(s=>Jd(s)):void 0}catch{}},aie="https://apinode.aigaea.net";let hS=!1,cie=0;const lie=2e4,uie=n=>({"Content-Type":"application/json",Authorization:`Bearer ${n}`}),pS=n=>{var i,s,o,a,c,l;const e=Date.now(),t=((i=n.data)==null?void 0:i.message)||((s=n.data)==null?void 0:s.msg)||((c=(a=(o=n.data)==null?void 0:o.detail)==null?void 0:a[0])==null?void 0:c.msg)||n.detail||((l=n.data)==null?void 0:l.detail)||"network error",r=n.statusCode;if(!((t==="network error"||r===502)&&e-cie<lie)&&r!==502&&r!==403&&r!==503){Mr.error(t);return}},JC=async(n,e,t)=>{const r=hi(),i=uie(r.getAccountsWalletAddress),s=`${aie}${n}`;try{const{data:o,error:a}=await YP(s,{...e,headers:i,responseType:t},"$mr5k66ooDp");if(o.value)return o.value;const{statusCode:c}=a.value;if(a.value)return c===401||c===403&&!hS?(Mr.error(a.value.data.detail),hS=!0,!1):pS(a.value)}catch(o){return pS(o)}},k0=(n,e,t="json")=>JC(n,{method:"GET",params:e},t),fie=(n,e,t="json")=>JC(n,{method:"POST",body:e},t),Px=()=>k0("/api/nft/web3_config"),die=n=>fie("/api/nft/get_wallet_address",n),eP=()=>k0("/api/nft/info"),hie=n=>k0(`/api/nft/reward?days=${n}`),pie=()=>k0("/api/nft/eth_usd"),Nx=()=>({network:"Base Sepolia",chain_id:84532,symbol:"ETH",interval:12,rpc:"https://sepolia.base.org",server:"https://base-sepolia.drpc.org",explorer:"https://sepolia.basescan.com",nft:"0xB7A2d340d3367D0283879a219b9743bbC0Ded734",nftmint:"0x4A5BcC3DD8BE230Abfa6b572f10aFB4766EEb40d",nftstake:"0xfF5cEa684084a10351E51c8e7aE1E3B0Ff5434a2",logo:"https://d2f70xi62kby8n.cloudfront.net/bridge/icons/networks/base.svg?auto=compress%2Cformat"});let yl;const tP=(n,e=500,t=!0)=>{t?yl||(yl=!0,typeof n=="function"&&n(),setTimeout(()=>{yl=!1},e)):yl||(yl=!0,setTimeout(()=>{yl=!1,typeof n=="function"&&n()},e))},mie=""+globalThis.__publicAssetsURL("images/btn.png"),gie=""+globalThis.__publicAssetsURL("images/eth.png"),gi=n=>(w_("data-v-02c1f1db"),n=n(),A_(),n),vie=gi(()=>Q("div",{class:"w-[25%] aspect-[1/1] pointer-events-none absolute -bottom-[35%] left-0 transition-all duration-1000 ease-linear z-[50]"},[Q("div",{class:"w-full h-full pointer-events-none zoom-element rounded-full bg-primary opacity-50 blur-[100px] transition [transform:translate3d(0,0,0)] md:blur-[150px] lg:blur-[100px] xl:blur-[200px]"})],-1)),yie={class:"w-full h-fit flex items-center justify-between relative z-[10] overflow-hidden"},_ie=gi(()=>Q("div",{class:"w-[90%] h-[2px] bg-[#5D5D5D] absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2"},[Q("div",{class:"glowing-line"})],-1)),bie=["onClick"],xie={key:0,class:"absolute top-0 left-0 w-full h-full tier-box z-20 scale-[0.64] rounded-[8px]"},wie=gi(()=>Q("img",{src:mie,alt:"",class:"w-full h-full object-contain absolute top-0 left-0"},null,-1)),Aie={key:1,class:"w-[50px] aspect-[1/1] buy-node absolute -bottom-[50%] rotate-45"},Eie={class:"space-y-4"},Sie={class:"text-[3rem] font-bold"},Tie={class:"text-[#ebebebbd] text-[0.9rem] font-sans"},Mie={class:"w-full h-4 border border-[#ebebeb68] rounded-full relative"},Rie=gi(()=>Q("div",{class:"w-[32px] aspect-[1/1] buy-node absolute top-1/2 -translate-y-1/2 rounded-full right-0 border-[2px] border-[#ebebeb] flex items-center justify-center"},[Q("span",{class:"iconfont icon-icon- text-[18px] font-sans"})],-1)),Iie=[Rie],Cie={class:"flex items-center justify-between"},Pie={class:"flex items-center space-x-2"},Nie={class:"text-[1.625rem] font-bold"},Bie=gi(()=>Q("span",{class:"text-[#ebebeb88] text-[22px] font-sans"},"sold",-1)),Lie={class:"text-[#ebebebbd] text-[1rem] font-bold"},kie={class:"flex items-center justify-between space-x-2"},Die=gi(()=>Q("span",{class:"text-[#ebebebbd] text-[1.125rem] font-sans"},"Network",-1)),Oie={class:"flex items-center space-x-1"},Uie={class:"w-5 h-5"},Fie=["src"],Hie={class:"text-[#ebebebbd] text-[1.125rem] font-sans flex-1 u-line-1"},zie={class:"flex items-center justify-between"},Gie=gi(()=>Q("span",{class:"text-[#ebebebbd] text-[1.125rem] font-sans"},"Quantity",-1)),Vie={class:"bg-[#202020] px-3 py-2 rounded-2xl"},Wie={class:"flex items-center rounded-lg px-3 py-1.5 min-w-[90px] border border-[#2B2B2B]"},jie={class:"text-white px-4 text-[1rem] font-sans"},qie={class:"w-full space-y-3 flex flex-col justify-between items-end"},$ie={class:"w-full"},Xie={class:"w-full flex items-center justify-between"},Kie=gi(()=>Q("span",{class:"text-[#ebebebbd] text-[1.125rem] font-sans"},"Total",-1)),Yie={class:"flex items-center space-x-3"},Qie=gi(()=>Q("div",{class:"w-[22px] h-[22px]"},[Q("img",{src:gie,alt:""})],-1)),Zie={class:"text-[1.75rem] font-bold"},Jie=gi(()=>Q("span",{class:"text-[#ebebeb81] text-[1.125rem] font-sans"},"ETH",-1)),ese={class:"w-full flex items-center justify-end space-x-3"},tse={class:"text-[1rem] text-[#ebebeb81] font-sans"},nse=gi(()=>Q("span",{class:"text-[#ebebeb81] text-[1rem] font-sans"},"USD",-1)),rse={class:"w-full flex items-center justify-between"},ise={class:"w-full relative flex items-center justify-between"},sse=gi(()=>Q("span",{class:"text-[#ebebebbd] text-[18px] font-sans"},"Code",-1)),ose={key:0,class:"w-5 h-5 absolute top-1/2 text-[1.5rem] -translate-y-1/2 right-5 flex items-center justify-center"},ase={key:0,class:"iconfont icon-icon- text-green-500"},cse={key:1,class:"iconfont icon-del text-red-400"},lse=gi(()=>Q("span",{class:"text-[18px] font-bold text-[#EBEBEB]"},"BUY NODE",-1)),use={class:"text-[0.9rem]"},fse=gt({__name:"Index",emits:["update:success"],setup(n,{emit:e}){var U;const t=Ee(!1),r=Ee(null),i=ki(),s=hi(),o=Ee(1),a=Ee(1),c=Ee(!1),l=Ee(!1),u=Ee(!1),f=jP(),d=Ee([{title:"Basic Type",description:"Integration of edge device resources, Suitable for low load tasks."},{title:"Standard Type",description:"AI training/inference computing power pool, Support parallel computing of large models."},{title:"Professional Type",description:"Massive data storage and high-speed reading and writing, Support big data scenarios such as bioinformatics."},{title:"Flagship Type",description:"Cross chain resource scheduling core, Support heterogeneous computing power fusion."}]),p=Ee({price:0,ethUsd:0,maxSupply:0,currentSupply:0,title:"",description:""}),v=Ee(""),m=Ee(!1),y=Ee(!1),h=Fc({code:(U=f==null?void 0:f.query)==null?void 0:U.code,doYouAgree:!1}),w=ge(()=>!(s.getAccountsWalletAddress&&v.value)),S=ge(()=>Math.max((p.value.maxSupply||0)-(p.value.currentSupply||0),1)),T=async()=>{if(h.code.trim().includes("http")||h.code.trim().includes("://"))try{const q=new URL(h.code.trim());h.code=q.searchParams.get("code").trim()||h.code.trim()}catch{}h.code?P():(m.value=!1,v.value="")},C=q=>{o.value=q,a.value=1,B()},B=async()=>{try{c.value=!0;const q=await $re(o.value),M=await pie();if(q&&q.length>=3){p.value.price=Jd(q[0]),p.value.maxSupply=Number(q[1]);const g=o.value===1?.35:o.value===2?.31:o.value===3?.23:o.value===4?.15:0,_=Math.floor(p.value.maxSupply*g);p.value.currentSupply=Number(q[2])+_,p.value.ethUsd=(M==null?void 0:M.data)||0}}catch{}finally{c.value=!1}},O=async()=>{try{if(!h.doYouAgree){y.value=!0,setTimeout(()=>{y.value=!1},500);return}if(l.value=!0,s.getAccountsWalletAddress===v.value)return Mr.warning("Cannot fill in one's own invitation code");await KC(i.getAccountWalletItem);const q=await jre(s.getAccountsWalletAddress);if(q<=p.value.price*a.value+2e-4)return Mr.warning(`ETH balance is insufficient, current balance is ${q}`);let M=null;a.value===1?M=await Xre(o.value,v.value,p.value.price):M=await Kre(o.value,v.value,`${Number(p.value.price)*Number(a.value)}`,a.value),M&&(p.value.currentSupply+=a.value,N(),e("update:success",{level:o.value,quantity:a.value}),a.value=1,Mr.success("successful!"))}catch{}finally{l.value=!1}},P=async()=>{var q;try{m.value=!1,l.value=!0;const M=await die({referral_code:h.code});M.code===200&&M.data?v.value=(q=M.data)==null?void 0:q.address:v.value=""}catch{}finally{m.value=!0,l.value=!1}},N=async()=>{var q;if(!((q=s.getUserInfo)!=null&&q.referral_code))try{const M=await eP();s.setUserInfo(M.data)}catch{}},I=async()=>{var g;const q=await Px(),M=((g=q==null?void 0:q.data)==null?void 0:g.config[0])||Nx();i.setWeb3ConfigItem(M)};return xr(async()=>{await nr();const q=new IntersectionObserver(M=>{M.forEach(async g=>{t.value=g.isIntersecting,g.isIntersecting&&(u.value||(i.getWeb3ConfigItem.chain_id||await I(),h.code&&T(),B(),u.value=!0))})},{threshold:0});r.value&&q.observe(r.value)}),(q,M)=>{var k,x,F,K,A,X;const g=cO,_=YD,b=KD,E=ET,R=CT,L=mS,G=XU;return Pe(),Ye("div",{class:st(["w-full flex flex-col items-center justify-center space-y-10 relative -mt-[60px]",z(t)?"animate-start":""]),ref_key:"floor4",ref:r},[vie,Q("div",yie,[_ie,(Pe(),Ye(Ii,null,Wf(4,V=>Q("div",{class:"w-38 aspect-[1/1] z-10 relative flex items-center justify-center cursor-pointer",key:V,onClick:$=>C(V)},[z(o)===V?(Pe(),Ye("div",xie)):Ut("",!0),wie,Q("span",{class:st(["z-20 text-[24px] font-bold",z(o)===V?"text-[#ebebeb]":"text-[#ebebebac]"])},"#Tier"+Ft(V),3),z(o)===V?(Pe(),Ye("div",Aie)):Ut("",!0)],8,bie)),64))]),Pi((Pe(),Ye("div",{class:st(["w-full border border-[#2B2B2B] relative bg-black z-[20] overflow-hidden grid grid-cols-[1fr_40%] xl:grid-cols-[1fr_40%] lg:grid-cols-[1fr_40%] sm:grid-cols-1 px-10 py-6 gap-x-[120px] gap-y-5",z(o)<=2?"rounded-bl-[35px] rounded-tr-[35px]":"rounded-tl-[35px] rounded-br-[35px] "]),"element-loading-text":"Loading..."},[Q("div",Eie,[Q("p",Sie,Ft(((k=z(d)[z(o)-1])==null?void 0:k.title)||"***"),1),Q("div",Tie,Ft(((x=z(d)[z(o)-1])==null?void 0:x.description)||"***"),1),Q("div",Mie,[Q("div",{class:"min-w-[32px] max-w-full h-4 buy-node rounded-full relative",style:wa({width:(((F=z(p))==null?void 0:F.currentSupply)||0)/(((K=z(p))==null?void 0:K.maxSupply)||1)*100+"%"})},Iie,4)]),Q("div",Cie,[Q("div",Pie,[Q("span",Nie,Ft(z(p).currentSupply||0)+"/"+Ft(z(p).maxSupply||0),1),Bie]),Q("span",Lie,Ft(((z(p).currentSupply||0)/(z(p).maxSupply||1)*100).toFixed(2)+"%"),1)]),Q("div",kie,[Die,Q("div",Oie,[Q("div",Uie,[Q("img",{src:(A=z(i).getWeb3ConfigItem)==null?void 0:A.logo,alt:"",class:"rounded-full"},null,8,Fie)]),Q("span",Hie,Ft(((X=z(i).getWeb3ConfigItem)==null?void 0:X.network)||"BASE"),1)])]),Q("div",zie,[Gie,Q("div",Vie,[Q("div",Wie,[Q("div",{class:"text-white px-2 text-[1.25rem] font-bold bg-[#2b2b2b] rounded-[6px] cursor-pointer select-none",onClick:M[0]||(M[0]=V=>z(a)>1&&a.value--)},"-"),Q("span",jie,Ft(z(a)),1),Q("div",{class:"text-white px-2 text-xl font-bold bg-[#2b2b2b] rounded-[6px] cursor-pointer select-none",onClick:M[1]||(M[1]=V=>z(a)<20&&z(a)<z(S)&&a.value++)},"+")])])])]),Q("div",qie,[Q("div",$ie,[Q("div",Xie,[Kie,Q("div",Yie,[Qie,Q("span",Zie,Ft(Math.floor(z(p).price*z(a)*100)/100),1),Jie])]),Q("div",ese,[Q("span",tse,"≈"+Ft(Math.floor(z(p).price*z(p).ethUsd*z(a)*100)/100||0),1),nse])]),Q("div",rse,[Vt(b,{model:z(h),class:"w-full"},{default:Zt(()=>[Vt(_,{label:"",style:{border:"none"}},{default:Zt(()=>[Q("div",ise,[sse,Vt(g,{modelValue:z(h).code,"onUpdate:modelValue":M[2]||(M[2]=V=>z(h).code=V),placeholder:"Enter referral code",onInput:T,style:{width:"210px"}},null,8,["modelValue"]),z(m)?(Pe(),Ye("div",ose,[z(v)?(Pe(),Ye("span",ase)):(Pe(),Ye("span",cse))])):Ut("",!0)])]),_:1})]),_:1},8,["model"])]),Vt(E,{round:"",color:"none",class:"w-[400px] min-w-[260px] hover:scale-[1.1] duration-700 my-2 mr-3 buy-node",style:{height:"40px",border:"1px solid #ebebeb86"},loading:z(l),disabled:z(w),onClick:M[3]||(M[3]=V=>("throttle"in q?q.throttle:z(tP))(()=>{O()}))},{default:Zt(()=>[lse]),_:1},8,["loading","disabled"]),Q("div",{class:st(["flex items-center space-x-2 text-[#615F74] set_checkbox_sty px-2 py-2 bg-[#0B0E10]",{shake:!z(h).doYouAgree&&z(y)}])},[Vt(R,{modelValue:z(h).doYouAgree,"onUpdate:modelValue":M[4]||(M[4]=V=>z(h).doYouAgree=V),style:wa(`width: fit-content;height:fit-content;border: 1px ${!z(h).doYouAgree&&z(y)?"red":"#ebebeb"} solid;border-radius: 2px;`)},null,8,["modelValue","style"]),Q("span",use,[Aa(" I have read,understand, and agree to the "),Vt(L,{class:"underline underline-offset-4 cursor-pointer text-[#EBEBEB]",to:"/privacyPolicy",target:"_self"},{default:Zt(()=>[Aa(" Privacy Policy ")]),_:1})])],2)])],2)),[[G,z(c)]])],2)}}});const dse=ku(fse,[["__scopeId","data-v-02c1f1db"]]),hse={class:"relative"},pse={class:"text-[#6E6E6E] absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 scale-[0.5] text-sm z-50"},mse=gt({__name:"Refresh",emits:["toRefresh"],setup(n,{emit:e}){const t=Ee(!1),r=Ee(0),i=Ee(!1),s=()=>{if(i.value)return;t.value=!0,e("toRefresh"),i.value=!0,r.value=60;const o=setInterval(()=>{r.value--,r.value<=0&&(clearInterval(o),i.value=!1,t.value=!1)},1e3);setTimeout(()=>{t.value=!1},500)};return(o,a)=>(Pe(),Ye("div",hse,[Q("span",{class:st(["text-lg",["iconfont","icon-shuaxin","text-[#6E6E6E]","cursor-pointer","rotate-icon",{rotate:t.value}]]),onClick:s},null,2),Q("span",pse,Ft(r.value>0?r.value:""),1)]))}});const gse=ku(mse,[["__scopeId","data-v-0add8083"]]),vse={id:"floor5-line-chart",class:"w-full h-full"},yse=gt({__name:"Line",props:{data:{default:[0,0,0,0]}},setup(n){const e=n,{$eChart:t}=yS(),r=kl(),i=Ee(null),s=["T1","T2","T3","T4"];Jt(()=>e.data,async()=>{o()});const o=async()=>{r.value&&r.value.dispose();const c=document.getElementById("floor5-line-chart");if(!c||c.clientWidth===0||c.clientHeight===0)return;r.value=t.init(c);const l={tooltip:{trigger:"axis",backgroundColor:"rgba(255,255,255,.05)",borderWidth:"1",borderColor:"rgba(255,255,255,0.25)",extraCssText:"backdrop-filter: blur(5px);",textStyle:{fontSize:18,color:"#ffffff"},formatter:function(u){var f='<div class="my-tooltip">';return u.forEach(d=>{d.seriesName!=="maxdata"&&(f+=`<div><span class="name large">${d.name}</span>:<span class="value">${d.value} </span></div>`)}),f+="</div>",f}},grid:{top:"8%",left:"5%",right:0,bottom:"15%"},xAxis:{type:"category",axisLabel:{textStyle:{color:"#2B2B2B"}},axisTick:{show:!1},axisLine:{lineStyle:{color:"#2B2B2B"}},data:s},yAxis:{type:"value",axisLabel:{textStyle:{color:"#2B2B2B"}},axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!0,lineStyle:{color:"#2B2B2B"}}},series:[{data:e.data,type:"line",smooth:!0,lineStyle:{color:"#7030A0",width:5},symbol:"circle",symbolSize:0,itemStyle:{color:"#7030A0",borderColor:"#7030A0",width:2}}]};r.value.setOption(l,!0)},a=()=>{r.value&&(i.value&&clearTimeout(i.value),i.value=setTimeout(()=>{r.value.resize()},300))};return xr(async()=>{await nr(),setTimeout(o,500),window.addEventListener("resize",a,{passive:!0})}),Go(()=>{r.value&&(window.removeEventListener("resize",a),r.value.dispose()),i.value&&clearTimeout(i.value)}),(c,l)=>(Pe(),Ye("div",vse))}});const _se=""+globalThis.__publicAssetsURL("images/people.png"),bse=""+globalThis.__publicAssetsURL("images/money.png"),xse=""+globalThis.__publicAssetsURL("images/floor5.png"),as=n=>(w_("data-v-1bf838ce"),n=n(),A_(),n),wse=as(()=>Q("div",{class:"w-[25%] aspect-[1/1] pointer-events-none absolute bottom-[25%] right-0 transition-all duration-1000 ease-linear z-[30]"},[Q("div",{class:"w-full h-full pointer-events-none zoom-element rounded-full bg-primary opacity-50 blur-[100px] transition [transform:translate3d(0,0,0)] md:blur-[150px] lg:blur-[100px] xl:blur-[200px]"})],-1)),Ase={class:"w-full h-full overflow-hidden flex flex-col justify-between border border-[#2b2b2b] rounded-[25px] px-10 py-3 space-y-8 relative attribute"},Ese={class:"w-5 h-5 absolute top-3 right-5 attribute_box"},Sse={class:"space-y-4"},Tse=as(()=>Q("p",{class:"text-[28px] font-bold"},"My Invitation",-1)),Mse={class:"flex items-center justify-between"},Rse={class:"flex items-center space-x-2"},Ise=as(()=>Q("div",{class:"w-7 h-7"},[Q("img",{src:_se,alt:"",class:"w-full h-full object-contain"})],-1)),Cse={class:"text-[1.375rem] font-bold"},Pse={class:"flex items-center space-x-2"},Nse=as(()=>Q("div",{class:"w-[34px] h-[34px]"},[Q("img",{src:bse,alt:"",class:"w-full h-full object-contain"})],-1)),Bse={class:"text-[1.375rem] font-bold"},Lse={class:"space-x-1 cursor-pointer"},kse={class:"text-[1.375rem] font-[500]"},Dse=as(()=>Q("span",{class:"iconfont icon-copy text-[1.5rem]"},null,-1)),Ose={class:"flex flex-col items-center"},Use=as(()=>Q("div",{class:"w-[330px]"},[Q("img",{src:xse,alt:"",class:"w-full h-full object-cover"})],-1)),Fse={class:"text-[#808080] text-[1.625rem] font-[500] cursor-pointer hover:text-[#EBEBEB] duration-500"},Hse=as(()=>Q("span",{class:"text-[1.125rem] font-bold text-[#EBEBEB] uppercase"},"Stake Nodes",-1)),zse=as(()=>Q("span",{class:"text-[0.8rem]"}," The pledge is irrevocable and profits start accruing immediately. ",-1)),Gse={class:"w-full h-full flex flex-col justify-between space-y-5 overflow-hidden"},Vse={class:"flex-1 flex flex-col justify-between border border-[#2b2b2b] rounded-[25px] px-10 py-3 space-y-6 relative attribute cursor-pointer"},Wse={class:"w-5 h-5 absolute top-3 right-5 attribute_box"},jse=as(()=>Q("div",{class:"flex items-center justify-between"},[Q("p",{class:"text-[1.75rem] font-bold"},"Node Overview")],-1)),qse={class:"w-full grid grid-cols-4"},$se={class:"w-[200px] py-4 px-8 border border-[#ebebeb54] rounded-[15px] text-[#EBEBEB] space-y-6",style:{background:"rgba(0, 0, 0,0.8)"}},Xse=as(()=>Q("p",{class:"text-center text-[1.625rem] font-sans"},"Details",-1)),Kse={class:"w-full flex-1 flex flex-col space-y-4"},Yse={class:"flex flex-col items-center"},Qse=["title"],Zse={class:"text-[1rem] font-[400] u-line-1"},Jse={key:1,class:"flex flex-col items-center"},eoe=["title"],toe={class:"text-[1rem] font-[400] u-line-1"},noe={class:"w-full flex justify-end"},roe={class:"w-full flex-1 flex flex-col border border-[#2b2b2b] rounded-[25px] px-10 py-3 space-y-4"},ioe={class:"flex items-center justify-between"},soe=as(()=>Q("p",{class:"text-[1.75rem] font-bold"},"$Gaea Produce",-1)),ooe={class:"w-[40%] bg-[#0F0F0F] rounded-md grid grid-cols-3 p-1 text-[#ebebeb71]"},aoe={class:"w-full min-h-[250px] flex-1 items-end"},coe=gt({__name:"Index",props:{buyNodeData:{default:{level:1,quantity:0}}},emits:["update:scrollTo"],setup(n,{emit:e}){const t=n,r=Ee(7),i=hi(),s=ki(),o=Ee([0,0,0,0]),a=Ee(!1),c=Ee(!1),l=Ee(!1),u=Ee(!1),f=Ee(null),d=Ee(null),p="https://node.aigaea.net",v=E=>{e("update:scrollTo",E)},m=Fc({doYouAgree:!1}),y=Ee(null),h=Ee([{name:"My possessions",value:[0,0,0,0],sum:0},{name:"Running",value:[0,0,0,0],sum:0},{name:"Today's output",value:[0,0,0,0],sum:0},{name:"Total output",value:[0,0,0,0],sum:0}]);Jt(()=>t.buyNodeData,async()=>{var R;const E=t.buyNodeData.level-1;h.value[0].value[E]+=t.buyNodeData.quantity,h.value[0].sum+=t.buyNodeData.quantity,setTimeout(()=>{U(),P()},200),(R=i.getUserInfo)!=null&&R.referral_code?clearInterval(d.value):d.value=setInterval(M,3e4)}),Jt(()=>i.getAccountsWalletAddress,async()=>{i.getAccountsWalletAddress?B():(h.value=[{name:"My possessions",value:[0,0,0,0],sum:0},{name:"Running",value:[0,0,0,0],sum:0},{name:"Today's output",value:[0,0,0,0],sum:0},{name:"Total output",value:[0,0,0,0],sum:0}],w.value.rewardAmount=0,w.value.numberOfPeople=0,o.value=[0,0,0,0])},{deep:!0});const w=Ee({numberOfPeople:0,rewardAmount:0}),S=Ee(["T1","T2","T3","T4"]),T=ge(()=>{var R;const E=((R=s.getPledgeableNftTokenIds)==null?void 0:R[0])||[];return!(i.getAccountsWalletAddress&&E.length>0)}),C=async E=>{if(i.getAccountsWalletAddress)try{r.value=E,o.value=await oie(r.value)||[0,0,0,0];const R=await hie(r.value);if(R.code==200&&R.data){const L=Object.values(R.data)}}catch{}},B=async()=>{await Promise.all([U(),O(),P(),N(),M(),C(7)])},O=async()=>{const[E,R]=await Promise.all([Qre(),Zre()]);w.value.rewardAmount=E||0,w.value.numberOfPeople=R.reduce((L,G)=>L+G,0)||0},P=async()=>{const[E,R]=await Promise.all([sie(),iie()]);h.value[2].sum=R,h.value[3].sum=E},N=async()=>{const[E,R]=await Promise.all([Yre(),dS()]);h.value[0].value=E||[0,0,0,0],h.value[0].sum=E.reduce((L,G)=>L+G,0),h.value[1].value=R||[0,0,0,0],h.value[1].sum=R.reduce((L,G)=>L+G,0),h.value[1].sum>0&&(f.value=setInterval(I,3e5))},I=()=>{P(),C(r.value)},U=async()=>{const E=await Jre();s.setPledgeableNftTokenIds(E)},q=async()=>{try{if(!m.doYouAgree){u.value=!0,setTimeout(()=>{u.value=!1},500);return}c.value=!0;let E=null,R=s.getPledgeableNftTokenIds[0];if(await KC(s.getAccountWalletItem),R.length===1?E=await nie(R[0]):E=await rie(R),E){h.value[1].sum<=0&&(f.value=setInterval(I,3e5));const L=await dS();h.value[1].value=L||[0,0,0,0],h.value[1].sum=L.reduce((G,k)=>G+k,0),setTimeout(async()=>{await U();const G=[...s.getPledgeableNftTokenIds.flat()];Mr.success(`Successfully staked ${R.length} tokens, ${G.length} remaining`)},200)}}catch{}finally{c.value=!1}},M=async()=>{if(i.getAccountsWalletAddress)try{const E=await eP();i.setUserInfo(E.data)}catch{}},g=()=>{U(),M(),O()},_=async()=>{await Promise.all([P(),N(),C(r.value)])},b=async()=>{var L;const E=await Px(),R=((L=E==null?void 0:E.data)==null?void 0:L.config[0])||Nx();s.setWeb3ConfigItem(R)};return xr(async()=>{await nr();const E=new IntersectionObserver(R=>{R.forEach(async L=>{a.value=L.isIntersecting,L.isIntersecting&&(l.value||(s.getWeb3ConfigItem.chain_id||await b(),i.getAccountsWalletAddress&&B(),l.value=!0))})},{threshold:0});y.value&&E.observe(y.value)}),Go(()=>{f.value&&clearInterval(f.value)}),(E,R)=>{var A,X,V;const L=gse,G=ET,k=CT,x=JO,F=yse,K=PS("copy");return Pe(),Ye("div",{class:st(["w-full grid sm:grid-cols-1 lg:grid-cols-[550px_1fr] items-center gap-5 relative",z(a)?"animate-start":""]),ref_key:"floor5",ref:y},[wse,Q("div",Ase,[Q("div",Ese,[Vt(L,{onToRefresh:R[0]||(R[0]=$=>g())})]),Q("div",Sse,[Tse,Q("div",Mse,[Q("div",Rse,[Ise,Q("span",Cse,Ft(z(w).numberOfPeople),1)]),Q("div",Pse,[Nse,Q("span",Bse,Ft(z(w).rewardAmount),1)]),Pi((Pe(),Ye("div",Lse,[Q("span",kse,Ft(((A=z(i).getUserInfo)==null?void 0:A.referral_code)||"****"),1),Dse])),[[K,(X=z(i).getUserInfo)!=null&&X.referral_code?`${z(p)}?code=${(V=z(i).getUserInfo)==null?void 0:V.referral_code}`:""]])])]),Q("div",Ose,[Use,Pi((Pe(),Ye("div",Fse,[Aa(Ft(("stringStar"in E?E.stringStar:z(gS))({value:z(i).getAccountsWalletAddress,characters:"********",start:4})),1)])),[[K,z(i).getAccountsWalletAddress]])]),Q("div",null,[Vt(G,{round:"",color:"none",class:"w-full min-w-[260px] hover:scale-[1.05] duration-700 my-2 mr-3 buy-node",style:{height:"40px",border:"1px solid #ebebeb86"},disabled:z(T),loading:z(c),onClick:R[1]||(R[1]=$=>("throttle"in E?E.throttle:z(tP))(()=>{q()}))},{default:Zt(()=>[Hse]),_:1},8,["disabled","loading"]),Q("div",{class:st(["flex items-center space-x-2 text-[#ebebeb] px-2 text-[#ebebeb5a]",{shake:!z(m).doYouAgree&&z(u)}])},[Vt(k,{modelValue:z(m).doYouAgree,"onUpdate:modelValue":R[2]||(R[2]=$=>z(m).doYouAgree=$),style:wa(`width: fit-content;height:fit-content;border: 1px ${!z(m).doYouAgree&&z(u)?"red":"#ebebeb"} solid;border-radius: 2px;`)},null,8,["modelValue","style"]),zse],2)])]),Q("div",Gse,[Q("div",Vse,[Q("div",Wse,[Vt(L,{onToRefresh:R[3]||(R[3]=$=>_())})]),jse,Q("div",qse,[(Pe(!0),Ye(Ii,null,Wf(z(h),($,ee)=>(Pe(),Ye("div",{class:"flex flex-col items-center",key:ee},[ee<2?(Pe(),wn(x,{key:0,placement:"top-start",effect:"customized",trigger:"hover"},{content:Zt(()=>[Q("div",$se,[Xse,Q("ul",Kse,[(Pe(!0),Ye(Ii,null,Wf($.value,(he,pe)=>(Pe(),Ye("li",{class:"w-full flex items-center justify-between text-[1.375rem]",key:pe},[Q("span",null,Ft(z(S)[pe])+":",1),Q("span",null,Ft(he),1)]))),128))])])]),default:Zt(()=>[Q("div",Yse,[Q("span",{class:"text-[2.5rem] font-bold",title:$.sum},Ft(("formatNumber"in E?E.formatNumber:z(Bx))($.sum)||0),9,Qse),Q("span",Zse,Ft($.name),1)])]),_:2},1024)):(Pe(),Ye("div",Jse,[Q("span",{class:"text-[2.5rem] font-bold",title:$.sum},Ft(("formatNumber"in E?E.formatNumber:z(Bx))($.sum)||0),9,eoe),Q("span",toe,Ft($.name),1)]))]))),128))]),Q("div",noe,[Q("span",{class:"underline underline-offset-5 cursor-pointer text-[#ebebebaf] hover:text-[#EBEBEB] buy_node",onClick:R[4]||(R[4]=$=>v("floor4"))}," Buy Node ")])]),Q("div",roe,[Q("div",ioe,[soe,Q("div",ooe,[Q("div",{class:st(["py-1 flex items-center justify-center cursor-pointer",z(r)===7?"bg-[#272727] rounded-md text-[#EBEBEB] font-[500]":""]),onClick:R[5]||(R[5]=$=>C(7))},"7D",2),Q("div",{class:st(["py-1 flex items-center justify-center cursor-pointer",z(r)===30?"bg-[#272727] rounded-md text-[#EBEBEB] font-[500]":""]),onClick:R[6]||(R[6]=$=>C(30))},"30D",2),Q("div",{class:st(["py-1 flex items-center justify-center cursor-pointer",z(r)===0?"bg-[#272727] rounded-md text-[#EBEBEB] font-[500]":""]),onClick:R[7]||(R[7]=$=>C(0))},"All",2)])]),Q("div",aoe,[Vt(F,{data:z(o)},null,8,["data"])])])])],2)}}});const loe=ku(coe,[["__scopeId","data-v-1bf838ce"]]),uoe=""+globalThis.__publicAssetsURL("images/public/separation_line.png"),foe=""+globalThis.__publicAssetsURL("images/partner/hand1.png"),doe=""+globalThis.__publicAssetsURL("images/partner/hand2.png"),hoe={class:"w-full h-[250px] flex items-center justify-center relative mt-[150px]"},poe=IS('<div class="w-full h-7 mb-12 absolute -top-1" data-v-37e2af83><img src="'+uoe+'" class="w-full h-full object-fill" data-v-37e2af83></div><div class="h-full aspect-[1/1] absolute top-1/2 -translate-y-1/2 left-0" data-v-37e2af83><img src="'+foe+'" alt="" class="w-full h-full object-contain" data-v-37e2af83></div><div class="h-full aspect-[1/1] absolute top-1/2 -translate-y-1/2 right-0" data-v-37e2af83><img src="'+doe+'" alt="" class="w-full h-full object-contain" data-v-37e2af83></div>',3),moe={class:"wrapper"},goe={class:"marquee"},voe={class:"marquee__group"},yoe={class:"inline-block w-[270px] h-[47px] -ml-2"},_oe=["src"],boe={class:"inline-block w-[200px] h-[38px] scale-[0.9]"},xoe=["src"],woe={class:"inline-block w-[250px] h-[39px]"},Aoe=["src"],Eoe={class:"inline-block w-[250px] h-[48px]"},Soe=["src"],Toe={class:"inline-block w-[250px] h-[35px] scale-[0.75] -ml-5"},Moe=["src"],Roe={class:"inline-block w-[250px] h-[38px]"},Ioe=["src"],Coe={class:"inline-block w-[250px] h-[45px] grayscale-image mt-3"},Poe=["src"],Noe={"aria-hidden":"true",class:"marquee__group"},Boe={class:"inline-block w-[270px] h-[47px] -ml-2"},Loe=["src"],koe={class:"inline-block w-[200px] h-[38px] scale-[0.9]"},Doe=["src"],Ooe={class:"inline-block w-[250px] h-[39px]"},Uoe=["src"],Foe={class:"inline-block w-[250px] h-[48px]"},Hoe=["src"],zoe={class:"inline-block w-[250px] h-[35px] scale-[0.75] -ml-5"},Goe=["src"],Voe={class:"inline-block w-[250px] h-[38px]"},Woe=["src"],joe={class:"inline-block w-[250px] h-[45px] grayscale-image mt-3"},qoe=["src"],$oe=gt({__name:"Footer",setup(n){const e=["/images/partner/w3.png","/images/partner/vly.png","/images/partner/UXL.png","/images/partner/BL.png","/images/partner/GAL.png","/images/partner/hume.png","/images/partner/iq.png"];return(t,r)=>(Pe(),Ye("div",hoe,[poe,Q("div",moe,[Q("div",goe,[Q("div",voe,[Q("li",yoe,[Q("img",{src:e[0],alt:"",class:"w-full h-full object-contain object-center"},null,8,_oe)]),Q("li",boe,[Q("img",{src:e[1],alt:"",class:"w-full h-full object-contain object-center"},null,8,xoe)]),Q("li",woe,[Q("img",{src:e[2],alt:"",class:"w-full h-full object-contain object-center"},null,8,Aoe)]),Q("li",Eoe,[Q("img",{src:e[3],alt:"",class:"w-full h-full object-contain object-center mt-1"},null,8,Soe)]),Q("li",Toe,[Q("img",{src:e[4],alt:"",class:"w-full h-full object-contain object-center"},null,8,Moe)]),Q("li",Roe,[Q("img",{src:e[5],alt:"",class:"w-full h-full object-contain object-center"},null,8,Ioe)]),Q("li",Coe,[Q("img",{src:e[6],alt:"",class:"w-full h-full object-contain object-center"},null,8,Poe)])]),Q("div",Noe,[Q("li",Boe,[Q("img",{src:e[0],alt:"",class:"w-full h-full object-contain object-center"},null,8,Loe)]),Q("li",koe,[Q("img",{src:e[1],alt:"",class:"w-full h-full object-contain object-center"},null,8,Doe)]),Q("li",Ooe,[Q("img",{src:e[2],alt:"",class:"w-full h-full object-contain object-center"},null,8,Uoe)]),Q("li",Foe,[Q("img",{src:e[3],alt:"",class:"w-full h-full object-contain object-center mt-1"},null,8,Hoe)]),Q("li",zoe,[Q("img",{src:e[4],alt:"",class:"w-full h-full object-contain object-center"},null,8,Goe)]),Q("li",Voe,[Q("img",{src:e[5],alt:"",class:"w-full h-full object-contain object-center"},null,8,Woe)]),Q("li",joe,[Q("img",{src:e[6],alt:"",class:"w-full h-full object-contain object-center"},null,8,qoe)])])])])]))}});const Xoe=ku($oe,[["__scopeId","data-v-37e2af83"]]),Koe={class:"w-full space-x-1 space-y-3 px-4 pb-4 z-[10] mx-auto"},Yoe=Q("span",{class:"text-[#EBEBEB] text-[26px]"},"Connect",-1),Qoe={class:"w-full border border-[#2E2E2E] rounded-[9px] py-2 flex items-center justify-between px-4 hover:scale-[1.05] duration-700 cursor-pointer"},Zoe={class:"flex items-center justify-center space-x-2"},Joe={class:"flex-shrink-0"},eae=["src"],tae={class:"text-[#B0B0B0] text-[16px] font-[400]"},nae=["onClick"],rae={key:0,class:"relative block w-2 h-2 bg-green-300 rounded-full shadow-inner shadow-green-500"},iae=Q("span",{class:"absolute inline-flex w-full h-full bg-green-400 rounded-full opacity-75 animate-halo"},null,-1),sae=[iae],oae={key:0,class:"z-10 flex items-center justify-between px-2 pt-2 relative",style:{opacity:"1",transform:"translateY(0%) translateZ(0px)"}},aae={class:"select-none"},cae=Q("span",{class:"iconfont icon-copy text-xs sm:text-sm text-[#6E6E6E]"},null,-1),lae=gt({__name:"WalletSelection",emits:["update:success"],setup(n,{emit:e}){const t=Ee(),r=hi(),i=Ee(),s=Ee([]),o=Ee(null),a=()=>{s.value=[],t.value=null,i.value=null,r.setWalletSelectionDialogVisible(!1)},c=async()=>{s.value=await qP()},l=async(d,p)=>{t.value=p,r.setRdnsType(d.info.rdns);try{const v=await d.provider.request({method:"eth_requestAccounts"});u(v)}catch{}},u=d=>{f(d[0])},f=d=>{o.value=d.toLowerCase(),setTimeout(async()=>{d&&(e("update:success"),r.setAccountsWalletAddress(o.value),a())},1e3)};return(d,p)=>{const v=oP,m=aP,y=PS("copy");return Pe(),wn(m,null,{default:Zt(()=>[Vt(v,{class:"border-box","destroy-on-close":"",draggable:"","model-value":z(r).getWalletSelectionDialogVisible,"show-close":!1,width:"459px","append-to-body":!0,style:{background:"black","border-radius":"10px","padding-bottom":"10px",border:"1px solid #2B2B2B"},"align-center":"",onClose:a,onOpen:c},{default:Zt(()=>[Q("span",{class:"iconfont icon-del text-sm absolute top-5 right-5 text-[#EDEDED] cursor-pointer",onClick:a}),Q("div",Koe,[Yoe,(Pe(!0),Ye(Ii,null,Wf(z(s),(h,w)=>(Pe(),Ye("div",{class:"",key:h.info.name},[Q("div",Qoe,[Q("div",Zoe,[Q("div",Joe,[Q("img",{class:"w-8 h-8 rounded-full",src:h.info.icon,alt:"Provider image",style:{filter:"grayscale(100%) brightness(1)"}},null,8,eae)]),Q("span",tae,Ft(h.info.name),1)]),Q("div",{class:"text-[#EBEBEB] text-[18px] cursor-pointer hover:underline underline-offset-4 duration-500 flex items-center space-x-1",onClick:S=>l(h,w)},[Q("span",null,Ft(z(t)===w&&z(o)?"Connected":"Connect"),1),z(t)===w&&z(o)?(Pe(),Ye("div",rae,sae)):Ut("",!0)],8,nae)]),z(t)===w&&z(o)?(Pe(),Ye("div",oae,[Pi((Pe(),Ye("p",aae,[Aa(Ft(("stringStar"in d?d.stringStar:z(gS))({value:z(o),characters:"********",start:4})),1)])),[[y,z(o)]]),cae])):Ut("",!0)]))),128))])]),_:1},8,["model-value"])]),_:1})}}});const uae={class:"w-full h-full text-[#EBEBEB]"},fae={class:"w-full flex flex-col space-y-[150px] mt-[150px] adaptation-padding"},dae=gt({__name:"index",setup(n){const e=Ee(null),t=Ee(null),r=Ee(null),i=Ee(null),s=Ee(null),o=Ee(null),a=ki(),c=f=>{let d=document.getElementById(f);if(d||(f==="floor2"?d=t.value:f==="floor3"?d=r.value:f==="floor4"?d=i.value:f==="floor5"&&(d=s.value)),d){const p=document.querySelector(".w-full.h-screen.overflow-auto");if(p){const v=d.getBoundingClientRect().top-p.getBoundingClientRect().top+p.scrollTop-180;p.scrollTo({top:v,behavior:"smooth"})}else d.scrollIntoView({behavior:"smooth"})}},l=async()=>{var p;const f=await Px(),d=((p=f==null?void 0:f.data)==null?void 0:p.config[0])||Nx();a.setWeb3ConfigItem(d)},u=f=>{o.value=f};return xr(()=>{l()}),(f,d)=>{const p=cP,v=Vz,m=eG,y=oG,h=dse,w=loe,S=Xoe,T=lae;return Pe(),Ye("div",uae,[Vt(p,{"onUpdate:scrollTo":c}),Vt(v,{id:"floor1",ref_key:"floor1Ref",ref:e,"onUpdate:scrollTo":c},null,512),Q("div",fae,[Vt(m,{id:"floor2",ref_key:"floor2Ref",ref:t},null,512),Vt(y,{id:"floor3",ref_key:"floor3Ref",ref:r},null,512),Vt(h,{id:"floor4",ref_key:"floor4Ref",ref:i,"onUpdate:success":u},null,512),Vt(w,{id:"floor5",ref_key:"floor5Ref",ref:s,"onUpdate:scrollTo":c,buyNodeData:z(o)},null,8,["buyNodeData"])]),Vt(S),Vt(T)])}}});const bae=ku(dae,[["__scopeId","data-v-75427fdb"]]);export{bae as default};
